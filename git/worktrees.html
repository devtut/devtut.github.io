<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git - Worktrees</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Using a worktree, Moving a worktree">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Git - Worktrees">
    <meta property="og:description" content="Using a worktree, Moving a worktree">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/git/worktrees.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Git - Worktrees">
    <meta name="twitter:description" content="Using a worktree, Moving a worktree">
    <meta name="twitter:url" content="/git/worktrees.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1162.809eb662.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/git/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/git/getting-started-with-git.html" class="sidebar-link">Getting started with Git</a></li><li><a href="/git/browsing-the-history.html" class="sidebar-link">Browsing the history</a></li><li><a href="/git/working-with-remotes.html" class="sidebar-link">Working with Remotes</a></li><li><a href="/git/staging.html" class="sidebar-link">Staging</a></li><li><a href="/git/ignoring-files-and-folders.html" class="sidebar-link">Ignoring Files and Folders</a></li><li><a href="/git/git-diff.html" class="sidebar-link">Git Diff</a></li><li><a href="/git/undoing.html" class="sidebar-link">Undoing</a></li><li><a href="/git/merging.html" class="sidebar-link">Merging</a></li><li><a href="/git/submodules.html" class="sidebar-link">Submodules</a></li><li><a href="/git/committing.html" class="sidebar-link">Committing</a></li><li><a href="/git/aliases.html" class="sidebar-link">Aliases</a></li><li><a href="/git/rebasing.html" class="sidebar-link">Rebasing</a></li><li><a href="/git/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/git/branching.html" class="sidebar-link">Branching</a></li><li><a href="/git/rev-list.html" class="sidebar-link">Rev-List</a></li><li><a href="/git/squashing.html" class="sidebar-link">Squashing</a></li><li><a href="/git/cherry-picking.html" class="sidebar-link">Cherry Picking</a></li><li><a href="/git/recovering.html" class="sidebar-link">Recovering</a></li><li><a href="/git/git-clean.html" class="sidebar-link">Git Clean</a></li><li><a href="/git/using-a-gitattributes-file.html" class="sidebar-link">Using a .gitattributes file</a></li><li><a href="/git/mailmap-file-associating-contributor-and-email-aliases.html" class="sidebar-link">.mailmap file: Associating contributor and email aliases</a></li><li><a href="/git/analyzing-types-of-workflows.html" class="sidebar-link">Analyzing types of workflows</a></li><li><a href="/git/pulling.html" class="sidebar-link">Pulling</a></li><li><a href="/git/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/git/cloning-repositories.html" class="sidebar-link">Cloning Repositories</a></li><li><a href="/git/stashing.html" class="sidebar-link">Stashing</a></li><li><a href="/git/subtrees.html" class="sidebar-link">Subtrees</a></li><li><a href="/git/renaming.html" class="sidebar-link">Renaming</a></li><li><a href="/git/pushing.html" class="sidebar-link">Pushing</a></li><li><a href="/git/internals.html" class="sidebar-link">Internals</a></li><li><a href="/git/git-tfs.html" class="sidebar-link">git-tfs</a></li><li><a href="/git/empty-directories-in-git.html" class="sidebar-link">Empty directories in Git</a></li><li><a href="/git/git-svn.html" class="sidebar-link">git-svn</a></li><li><a href="/git/archive.html" class="sidebar-link">Archive</a></li><li><a href="/git/rewriting-history-with-filter-branch.html" class="sidebar-link">Rewriting history with filter-branch</a></li><li><a href="/git/migrating-to-git.html" class="sidebar-link">Migrating to Git</a></li><li><a href="/git/show.html" class="sidebar-link">Show</a></li><li><a href="/git/resolving-merge-conflicts.html" class="sidebar-link">Resolving merge conflicts</a></li><li><a href="/git/bundles.html" class="sidebar-link">Bundles</a></li><li><a href="/git/display-commit-history-graphically-with-gitk.html" class="sidebar-link">Display commit history graphically with Gitk</a></li><li><a href="/git/bisecting-finding-faulty-commits.html" class="sidebar-link">Bisecting/Finding faulty commits</a></li><li><a href="/git/blaming.html" class="sidebar-link">Blaming</a></li><li><a href="/git/git-revisions-syntax.html" class="sidebar-link">Git revisions syntax</a></li><li><a href="/git/worktrees.html" aria-current="page" class="active sidebar-link">Worktrees</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/git/worktrees.html#using-a-worktree" class="sidebar-link">Using a worktree</a></li><li class="sidebar-sub-header"><a href="/git/worktrees.html#moving-a-worktree" class="sidebar-link">Moving a worktree</a></li></ul></li><li><a href="/git/git-remote.html" class="sidebar-link">Git Remote</a></li><li><a href="/git/git-large-file-storage-lfs.html" class="sidebar-link">Git Large File Storage (LFS)</a></li><li><a href="/git/git-patch.html" class="sidebar-link">Git Patch</a></li><li><a href="/git/git-statistics.html" class="sidebar-link">Git statistics</a></li><li><a href="/git/git-send-email.html" class="sidebar-link">git send-email</a></li><li><a href="/git/git-gui-clients.html" class="sidebar-link">Git GUI Clients</a></li><li><a href="/git/reflog-restoring-commits-not-shown-in-git-log.html" class="sidebar-link">Reflog - Restoring commits not shown in git log</a></li><li><a href="/git/tortoisegit.html" class="sidebar-link">TortoiseGit</a></li><li><a href="/git/external-merge-and-difftools.html" class="sidebar-link">External merge and difftools</a></li><li><a href="/git/update-object-name-in-reference.html" class="sidebar-link">Update Object Name in Reference</a></li><li><a href="/git/git-branch-name-on-bash-ubuntu.html" class="sidebar-link">Git Branch Name on Bash Ubuntu</a></li><li><a href="/git/git-client-side-hooks.html" class="sidebar-link">Git Client-Side Hooks</a></li><li><a href="/git/git-rerere.html" class="sidebar-link">Git rerere</a></li><li><a href="/git/change-git-repository-name.html" class="sidebar-link">Change git repository name</a></li><li><a href="/git/git-tagging.html" class="sidebar-link">Git Tagging</a></li><li><a href="/git/tidying-up-your-local-and-remote-repository.html" class="sidebar-link">Tidying up your local and remote repository</a></li><li><a href="/git/diff-tree.html" class="sidebar-link">diff-tree</a></li><li><a href="/git/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="worktrees"><a href="#worktrees" class="header-anchor">#</a> Worktrees</h1> <h2 id="using-a-worktree"><a href="#using-a-worktree" class="header-anchor">#</a> Using a worktree</h2> <p>You are right in the middle of working on a new feature, and your boss comes in demanding that you fix something immediately. You may typically want use <code>git stash</code> to store your changes away temporarily. However, at this point your working tree is in a state of disarray (with new, moved, and removed files, and other bits and pieces strewn around) and you don't want to disturb your progress.</p> <p>By adding a worktree, you create a temporary linked working tree to make the emergency fix, remove it when done, and then resume your earlier coding session:</p> <div class="language-git extra-class"><pre class="language-git"><code><span class="token command">$ git worktree add<span class="token parameter"> -b</span> emergency-fix ../temp master</span>
$ pushd ../temp
<span class="token comment"># ... work work work ...</span>
<span class="token command">$ git commit<span class="token parameter"> -a</span><span class="token parameter"> -m</span> </span><span class="token string">'emergency fix for boss'</span>
$ popd
$ rm -rf ../temp
<span class="token command">$ git worktree prune</span>

</code></pre></div><p>NOTE: In this example, the fix still is in the emergency-fix branch. At this point you probably want to <code>git merge</code> or <code>git format-patch</code> and afterwards remove the emergency-fix branch.</p> <h2 id="moving-a-worktree"><a href="#moving-a-worktree" class="header-anchor">#</a> Moving a worktree</h2> <p>Currently (as of version 2.11.0) there is no built-in functionality to move an already existing worktree. This is listed as an official bug (see <a href="https://git-scm.com/docs/git-worktree#_bugs" target="_blank" rel="noopener noreferrer">https://git-scm.com/docs/git-worktree#_bugs)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>To get around this limitation it is possible to perform manual operations directly in the <code>.git</code> reference files.</p> <p>In this example, the main copy of the repo is living at <code>/home/user/project-main</code> and the secondary worktree is located at <code>/home/user/project-1</code> and we want to move it to <code>/home/user/project-2</code>.</p> <p>Don't perform any git command in between these steps, otherwise the garbage collector might be triggered and the references to the secondary tree can be lost. Perform these steps from the start until the end without interruption:</p> <li><p>Change the worktree's `.git` file to point to the new location inside the main
tree. The file `/home/user/project-1/.git` should now contain the following:</p> <div class="language-git extra-class"><pre class="language-git"><code>gitdir: /home/user/project-main/.git/worktrees/project-2

</code></pre></div></li> <li>
Rename the worktree inside the `.git` directory of the main project by moving the worktree's directory that exists in there:
<div class="language-git extra-class"><pre class="language-git"><code>$ mv /home/user/project-main/.git/worktrees/project-1 /home/user/project-main/.git/worktrees/project-2

</code></pre></div></li> <li>
Change the reference inside `/home/user/project-main/.git/worktrees/project-2/gitdir` to point to the new location. In this example, the file would have the following contents:
<div class="language-git extra-class"><pre class="language-git"><code>/home/user/project-2/.git

</code></pre></div></li> <li>
Finally, move your worktree to the new location:
<div class="language-git extra-class"><pre class="language-git"><code>$ mv /home/user/project-1 /home/user/project-2

</code></pre></div></li> <p>If you have done everything correctly, listing the existing worktrees should refer to the new location:</p> <div class="language-git extra-class"><pre class="language-git"><code><span class="token command">$ git worktree list</span>
/home/user/project-main  23f78ad [master]
/home/user/project-2     78ac3f3 [branch-name]

</code></pre></div><p>It should now also be safe to run <code>git worktree prune</code>.</p> <h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>git worktree add [-f] [--detach] [--checkout] [-b <new-branch>] <path> [<branch>]</branch></path></new-branch></li> <li>git worktree prune [-n] [-v] [--expire <expire>]</expire></li> <li>git worktree list [--porcelain]</li></ul> <h4 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h4> <table><thead><tr><th>Parameter</th> <th>Details</th></tr></thead> <tbody><tr><td>-f --force</td> <td>By default, add refuses to create a new working tree when <code>&lt;branch&gt;</code> is already checked out by another working tree. This option overrides that safeguard.</td></tr> <tr><td>-b <code>&lt;new-branch&gt;</code> -B <code>&lt;new-branch&gt;</code></td> <td>With add, create a new branch named <code>&lt;new-branch&gt;</code> starting at <code>&lt;branch&gt;</code>, and check out <code>&lt;new-branch&gt;</code> into the new working tree. If <code>&lt;branch&gt;</code> is omitted, it defaults to <code>HEAD</code>. By default, <code>-b</code> refuses to create a new branch if it already exists. <code>-B</code> overrides this safeguard, resetting <code>&lt;new-branch&gt;</code> to <code>&lt;branch&gt;</code>.</td></tr> <tr><td>--detach</td> <td>With add, detach <code>HEAD</code> in the new working tree.</td></tr> <tr><td>--[no-] checkout</td> <td>By default, add checks out <code>&lt;branch&gt;</code>, however, <code>--no-checkout</code> can be used to suppress checkout in order to make customizations, such as configuring sparse-checkout.</td></tr> <tr><td>-n --dry-run</td> <td>With prune, do not remove anything; just report what it would remove.</td></tr> <tr><td>--porcelain</td> <td>With list, output in an easy-to-parse format for scripts. This format will remain stable across Git versions and regardless of user configuration.</td></tr> <tr><td>-v --verbose</td> <td>With prune, report all removals.</td></tr> <tr><td>--expire <code>&lt;time&gt;</code></td> <td>With prune, only expire unused working trees older than <code>&lt;time&gt;</code>.</td></tr></tbody></table> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>See the official documentation for more information: <a href="https://git-scm.com/docs/git-worktree" target="_blank" rel="noopener noreferrer">https://git-scm.com/docs/git-worktree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/git/worktrees.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/git/git-revisions-syntax.html" class="prev">
        Git revisions syntax
      </a></span> <span class="next"><a href="/git/git-remote.html">
        Git Remote
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1162.809eb662.js" defer></script>
  </body>
</html>
