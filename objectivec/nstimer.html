<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Objective C - NSTimer</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Creating a Timer, Invalidating a timer, Manually firing a timer, Storing information in the Timer">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Objective C - NSTimer">
    <meta property="og:description" content="Creating a Timer, Invalidating a timer, Manually firing a timer, Storing information in the Timer">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/objectivec/nstimer.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Objective C - NSTimer">
    <meta name="twitter:description" content="Creating a Timer, Invalidating a timer, Manually firing a timer, Storing information in the Timer">
    <meta name="twitter:url" content="/objectivec/nstimer.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/2311.58a14489.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Objective-C</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/objectivec/" class="sidebar-link">Disclaimer</a></li><li><a href="/objectivec/getting-started-with-objective-c-language.html" class="sidebar-link">Getting started with Objective-C Language</a></li><li><a href="/objectivec/basic-data-types.html" class="sidebar-link">Basic Data Types</a></li><li><a href="/objectivec/enums.html" class="sidebar-link">Enums</a></li><li><a href="/objectivec/structs.html" class="sidebar-link">Structs</a></li><li><a href="/objectivec/classes-and-objects.html" class="sidebar-link">Classes  and Objects</a></li><li><a href="/objectivec/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/objectivec/methods.html" class="sidebar-link">Methods</a></li><li><a href="/objectivec/properties.html" class="sidebar-link">Properties</a></li><li><a href="/objectivec/random-integer.html" class="sidebar-link">Random Integer</a></li><li><a href="/objectivec/bool-bool-boolean-nscfboolean.html" class="sidebar-link">BOOL / bool / Boolean / NSCFBoolean</a></li><li><a href="/objectivec/continue-and-break.html" class="sidebar-link">Continue and Break!</a></li><li><a href="/objectivec/key-value-coding-key-value-observing.html" class="sidebar-link">Key Value Coding / Key Value Observing</a></li><li><a href="/objectivec/nsstring.html" class="sidebar-link">NSString</a></li><li><a href="/objectivec/nsarray.html" class="sidebar-link">NSArray</a></li><li><a href="/objectivec/nsmutablearray.html" class="sidebar-link">NSMutableArray</a></li><li><a href="/objectivec/nsdictionary.html" class="sidebar-link">NSDictionary</a></li><li><a href="/objectivec/nsmutabledictionary.html" class="sidebar-link">NSMutableDictionary</a></li><li><a href="/objectivec/nsdate.html" class="sidebar-link">NSDate</a></li><li><a href="/objectivec/nsurl.html" class="sidebar-link">NSURL</a></li><li><a href="/objectivec/nsurl-send-a-post-request.html" class="sidebar-link">NSUrl send a post request</a></li><li><a href="/objectivec/nsdata.html" class="sidebar-link">NSData</a></li><li><a href="/objectivec/nspredicate.html" class="sidebar-link">NSPredicate</a></li><li><a href="/objectivec/nsregularexpression.html" class="sidebar-link">NSRegularExpression</a></li><li><a href="/objectivec/nsjsonserialization.html" class="sidebar-link">NSJSONSerialization</a></li><li><a href="/objectivec/nscalendar.html" class="sidebar-link">NSCalendar</a></li><li><a href="/objectivec/nsattributedstring.html" class="sidebar-link">NSAttributedString</a></li><li><a href="/objectivec/nstimer.html" class="active sidebar-link">NSTimer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/objectivec/nstimer.html#creating-a-timer" class="sidebar-link">Creating a Timer</a></li><li class="sidebar-sub-header"><a href="/objectivec/nstimer.html#invalidating-a-timer" class="sidebar-link">Invalidating a timer</a></li><li class="sidebar-sub-header"><a href="/objectivec/nstimer.html#manually-firing-a-timer" class="sidebar-link">Manually firing a timer</a></li><li class="sidebar-sub-header"><a href="/objectivec/nstimer.html#storing-information-in-the-timer" class="sidebar-link">Storing information in the Timer</a></li></ul></li><li><a href="/objectivec/nsobject.html" class="sidebar-link">NSObject</a></li><li><a href="/objectivec/nssortdescriptor.html" class="sidebar-link">NSSortDescriptor</a></li><li><a href="/objectivec/nstextattachment.html" class="sidebar-link">NSTextAttachment</a></li><li><a href="/objectivec/nscache.html" class="sidebar-link">NSCache</a></li><li><a href="/objectivec/nsuserdefaults.html" class="sidebar-link">NSUserDefaults</a></li><li><a href="/objectivec/subscripting.html" class="sidebar-link">Subscripting</a></li><li><a href="/objectivec/low-level-runtime-environment.html" class="sidebar-link">Low-level Runtime Environment</a></li><li><a href="/objectivec/fast-enumeration.html" class="sidebar-link">Fast Enumeration</a></li><li><a href="/objectivec/categories.html" class="sidebar-link">Categories</a></li><li><a href="/objectivec/protocols.html" class="sidebar-link">Protocols</a></li><li><a href="/objectivec/protocols-and-delegates.html" class="sidebar-link">Protocols and Delegates</a></li><li><a href="/objectivec/blocks.html" class="sidebar-link">Blocks</a></li><li><a href="/objectivec/xml-parsing.html" class="sidebar-link">XML parsing</a></li><li><a href="/objectivec/declare-class-method-and-instance-method.html" class="sidebar-link">Declare class method and instance method</a></li><li><a href="/objectivec/predefined-macros.html" class="sidebar-link">Predefined Macros</a></li><li><a href="/objectivec/grand-central-dispatch.html" class="sidebar-link">Grand Central Dispatch</a></li><li><a href="/objectivec/format-specifiers.html" class="sidebar-link">Format-Specifiers</a></li><li><a href="/objectivec/logging.html" class="sidebar-link">Logging</a></li><li><a href="/objectivec/error-handling.html" class="sidebar-link">Error Handling</a></li><li><a href="/objectivec/modern-objective-c.html" class="sidebar-link">Modern Objective-C</a></li><li><a href="/objectivec/singletons.html" class="sidebar-link">Singletons</a></li><li><a href="/objectivec/multi-threading.html" class="sidebar-link">Multi-Threading</a></li><li><a href="/objectivec/unit-testing-using-xcode.html" class="sidebar-link">Unit testing using Xcode</a></li><li><a href="/objectivec/memory-management.html" class="sidebar-link">Memory Management</a></li><li><a href="/objectivec/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nstimer"><a href="#nstimer" class="header-anchor">#</a> NSTimer</h1> <h2 id="creating-a-timer"><a href="#creating-a-timer" class="header-anchor">#</a> Creating a Timer</h2> <p>This will create a timer to call the <code>doSomething</code> method on <code>self</code> in <code>5.0</code> seconds.</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token punctuation">[</span>NSTimer scheduledTimerWithTimeInterval<span class="token punctuation">:</span><span class="token number">5.0</span>
         target<span class="token punctuation">:</span><span class="token keyword">self</span> 
         selector<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>doSomething<span class="token punctuation">)</span> 
         userInfo<span class="token punctuation">:</span>nil 
         repeats<span class="token punctuation">:</span>NO<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre></div><p>Setting the <code>repeats</code> parameter to <code>false/NO</code> indicates that we want the timer to fire only once. If we set this to <code>true/YES</code>, it would fire every five seconds until manually invalidated.</p> <h2 id="invalidating-a-timer"><a href="#invalidating-a-timer" class="header-anchor">#</a> Invalidating a timer</h2> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token punctuation">[</span>timer invalidate<span class="token punctuation">]</span><span class="token punctuation">;</span>
timer <span class="token operator">=</span> nil<span class="token punctuation">;</span>

</code></pre></div><p>This will stop the timer from firing. <strong>Must be called from the thread the timer was created in,</strong> see <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/#//apple_ref/occ/instm/NSTimer/invalidate" target="_blank" rel="noopener noreferrer">Apple's notes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <blockquote></blockquote> <p>You must send this message from the thread on which the timer was installed. If you send this message from another thread, the input source associated with the timer may not be removed from its run loop, which could prevent the thread from exiting properly.</p> <p>Setting <code>nil</code> will help you next to check whether it's running or not.</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>timer invalidate<span class="token punctuation">]</span><span class="token punctuation">;</span>
    timer <span class="token operator">=</span> nil<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Now set a timer again.</span>

</code></pre></div><h2 id="manually-firing-a-timer"><a href="#manually-firing-a-timer" class="header-anchor">#</a> Manually firing a timer</h2> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token punctuation">[</span>timer fire<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre></div><p>Calling the <code>fire</code> method causes an NSTimer to perform the task it would have usually performed on a schedule.</p> <p>In a <strong>non-repeating timer</strong>, this will automatically invalidate the timer. That is, calling <code>fire</code> before the time interval is up will result in only one invocation.</p> <p>In a <strong>repeating timer</strong>, this will simply invoke the action without interrupting the usual schedule.</p> <h2 id="storing-information-in-the-timer"><a href="#storing-information-in-the-timer" class="header-anchor">#</a> Storing information in the Timer</h2> <p>When creating a timer, you can set the <code>userInfo</code> parameter to include information that you want to pass to the function you call with the timer.</p> <p>By taking a timer as a parameter in said function, you can access the <code>userInfo</code> property.</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>NSDictionary <span class="token operator">*</span>dictionary <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span>
                             <span class="token string">@&quot;Message&quot;</span> <span class="token punctuation">:</span> <span class="token string">@&quot;Hello, world!&quot;</span>
                            <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//this dictionary contains a message</span>
<span class="token punctuation">[</span>NSTimer scheduledTimerWithTimeInterval<span class="token punctuation">:</span><span class="token number">5.0</span>
     target<span class="token punctuation">:</span><span class="token keyword">self</span> 
     selector<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>doSomething<span class="token punctuation">)</span> 
     userInfo<span class="token punctuation">:</span>dictionary
     repeats<span class="token punctuation">:</span>NO<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//the timer contains the dictionary and later calls the function</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> doSomething<span class="token punctuation">:</span><span class="token punctuation">(</span>NSTimer<span class="token operator">*</span><span class="token punctuation">)</span>timer<span class="token punctuation">{</span>
    <span class="token comment">//the function retrieves the message from the timer</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">&quot;%@&quot;</span><span class="token punctuation">,</span> timer<span class="token punctuation">.</span>userInfo<span class="token punctuation">[</span><span class="token string">&quot;Message&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/objectivec/nstimer.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/objectivec/nsattributedstring.html" class="prev">
        NSAttributedString
      </a></span> <span class="next"><a href="/objectivec/nsobject.html">
        NSObject
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/2311.58a14489.js" defer></script>
  </body>
</html>
