<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android - Gradle for Android</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="A basic build.gradle file, Define and use Build Configuration Fields, Centralizing dependencies via dependencies.gradle file, Sign APK without exposing keystore password, Adding product flavor-specific dependencies, Specifying different application IDs for build types and product flavors, Versioning your builds via version.properties file, Defining product flavors, Adding product flavor-specific resources, Changing output apk name and add version name:, Directory structure for flavor-specific resources, Why are there two build.gradle files in an Android Studio project?, Enable Proguard using gradle, Enable experimental NDK plugin support for Gradle and AndroidStudio, Ignoring build variant, Seeing dependency tree, Display signing information, Executing a shell script from gradle, Disable image compression for a smaller APK file size, Show all gradle project tasks, Delete unaligned apk automatically , Debugging your Gradle errors, Use gradle.properties for central versionnumber/buildconfigurations, Defining build types">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Android - Gradle for Android">
    <meta property="og:description" content="A basic build.gradle file, Define and use Build Configuration Fields, Centralizing dependencies via dependencies.gradle file, Sign APK without exposing keystore password, Adding product flavor-specific dependencies, Specifying different application IDs for build types and product flavors, Versioning your builds via version.properties file, Defining product flavors, Adding product flavor-specific resources, Changing output apk name and add version name:, Directory structure for flavor-specific resources, Why are there two build.gradle files in an Android Studio project?, Enable Proguard using gradle, Enable experimental NDK plugin support for Gradle and AndroidStudio, Ignoring build variant, Seeing dependency tree, Display signing information, Executing a shell script from gradle, Disable image compression for a smaller APK file size, Show all gradle project tasks, Delete unaligned apk automatically , Debugging your Gradle errors, Use gradle.properties for central versionnumber/buildconfigurations, Defining build types">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/android/gradle-for-android.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Android - Gradle for Android">
    <meta name="twitter:description" content="A basic build.gradle file, Define and use Build Configuration Fields, Centralizing dependencies via dependencies.gradle file, Sign APK without exposing keystore password, Adding product flavor-specific dependencies, Specifying different application IDs for build types and product flavors, Versioning your builds via version.properties file, Defining product flavors, Adding product flavor-specific resources, Changing output apk name and add version name:, Directory structure for flavor-specific resources, Why are there two build.gradle files in an Android Studio project?, Enable Proguard using gradle, Enable experimental NDK plugin support for Gradle and AndroidStudio, Ignoring build variant, Seeing dependency tree, Display signing information, Executing a shell script from gradle, Disable image compression for a smaller APK file size, Show all gradle project tasks, Delete unaligned apk automatically , Debugging your Gradle errors, Use gradle.properties for central versionnumber/buildconfigurations, Defining build types">
    <meta name="twitter:url" content="/android/gradle-for-android.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/197.c0ec185a.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Android</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/android/" class="sidebar-link">Disclaimer</a></li><li><a href="/android/getting-started-with-android.html" class="sidebar-link">Getting started with Android</a></li><li><a href="/android/android-studio.html" class="sidebar-link">Android Studio</a></li><li><a href="/android/instant-run-in-android-studio.html" class="sidebar-link">Instant Run in Android Studio</a></li><li><a href="/android/textview.html" class="sidebar-link">TextView</a></li><li><a href="/android/autocompletetextview.html" class="sidebar-link">AutoCompleteTextView</a></li><li><a href="/android/autosizing-textviews.html" class="sidebar-link">Autosizing TextViews</a></li><li><a href="/android/listview.html" class="sidebar-link">ListView</a></li><li><a href="/android/layouts.html" class="sidebar-link">Layouts</a></li><li><a href="/android/constraintlayout.html" class="sidebar-link">ConstraintLayout</a></li><li><a href="/android/textinputlayout.html" class="sidebar-link">TextInputLayout</a></li><li><a href="/android/coordinatorlayout-and-behaviors.html" class="sidebar-link">CoordinatorLayout and Behaviors</a></li><li><a href="/android/tablayout.html" class="sidebar-link">TabLayout</a></li><li><a href="/android/viewpager.html" class="sidebar-link">ViewPager</a></li><li><a href="/android/cardview.html" class="sidebar-link">CardView</a></li><li><a href="/android/navigationview.html" class="sidebar-link">NavigationView</a></li><li><a href="/android/recyclerview.html" class="sidebar-link">RecyclerView</a></li><li><a href="/android/recyclerview-decorations.html" class="sidebar-link">RecyclerView Decorations</a></li><li><a href="/android/recyclerview-onclicklisteners.html" class="sidebar-link">RecyclerView onClickListeners</a></li><li><a href="/android/recyclerview-and-layoutmanagers.html" class="sidebar-link">RecyclerView and LayoutManagers</a></li><li><a href="/android/pagination-in-recyclerview.html" class="sidebar-link">Pagination in RecyclerView</a></li><li><a href="/android/imageview.html" class="sidebar-link">ImageView</a></li><li><a href="/android/videoview.html" class="sidebar-link">VideoView</a></li><li><a href="/android/optimized-videoview.html" class="sidebar-link">Optimized VideoView</a></li><li><a href="/android/webview.html" class="sidebar-link">WebView</a></li><li><a href="/android/searchview.html" class="sidebar-link">SearchView</a></li><li><a href="/android/bottomnavigationview.html" class="sidebar-link">BottomNavigationView</a></li><li><a href="/android/canvas-drawing-using-surfaceview.html" class="sidebar-link">Canvas drawing using SurfaceView</a></li><li><a href="/android/creating-custom-views.html" class="sidebar-link">Creating Custom Views</a></li><li><a href="/android/getting-calculated-view-dimensions.html" class="sidebar-link">Getting Calculated View Dimensions</a></li><li><a href="/android/adding-a-fuseview-to-an-android-project.html" class="sidebar-link">Adding a FuseView to an Android Project</a></li><li><a href="/android/supporting-screens-with-different-resolutions-sizes.html" class="sidebar-link">Supporting Screens With Different Resolutions, Sizes</a></li><li><a href="/android/viewflipper.html" class="sidebar-link">ViewFlipper</a></li><li><a href="/android/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/android/activity.html" class="sidebar-link">Activity</a></li><li><a href="/android/activity-recognition.html" class="sidebar-link">Activity Recognition</a></li><li><a href="/android/split-screen-multi-screen-activities.html" class="sidebar-link">Split Screen / Multi-Screen Activities</a></li><li><a href="/android/material-design.html" class="sidebar-link">Material Design</a></li><li><a href="/android/resources.html" class="sidebar-link">Resources</a></li><li><a href="/android/data-binding-library.html" class="sidebar-link">Data Binding Library</a></li><li><a href="/android/context.html" class="sidebar-link">Context</a></li><li><a href="/android/sharedpreferences.html" class="sidebar-link">SharedPreferences</a></li><li><a href="/android/intent.html" class="sidebar-link">Intent</a></li><li><a href="/android/fragments.html" class="sidebar-link">Fragments</a></li><li><a href="/android/button.html" class="sidebar-link">Button</a></li><li><a href="/android/emulator.html" class="sidebar-link">Emulator</a></li><li><a href="/android/service.html" class="sidebar-link">Service</a></li><li><a href="/android/the-manifest-file.html" class="sidebar-link">The Manifest File</a></li><li><a href="/android/gradle-for-android.html" class="active sidebar-link">Gradle for Android</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#a-basic-build-gradle-file" class="sidebar-link">A basic build.gradle file</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#define-and-use-build-configuration-fields" class="sidebar-link">Define and use Build Configuration Fields</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#centralizing-dependencies-via-dependencies-gradle-file" class="sidebar-link">Centralizing dependencies via &quot;dependencies.gradle&quot; file</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#sign-apk-without-exposing-keystore-password" class="sidebar-link">Sign APK without exposing keystore password</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#adding-product-flavor-specific-dependencies" class="sidebar-link">Adding product flavor-specific dependencies</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#specifying-different-application-ids-for-build-types-and-product-flavors" class="sidebar-link">Specifying different application IDs for build types and product flavors</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#versioning-your-builds-via-version-properties-file" class="sidebar-link">Versioning your builds via &quot;version.properties&quot; file</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#defining-product-flavors" class="sidebar-link">Defining product flavors</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#adding-product-flavor-specific-resources" class="sidebar-link">Adding product flavor-specific resources</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#changing-output-apk-name-and-add-version-name" class="sidebar-link">Changing output apk name and add version name:</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#directory-structure-for-flavor-specific-resources" class="sidebar-link">Directory structure for flavor-specific resources</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#why-are-there-two-build-gradle-files-in-an-android-studio-project" class="sidebar-link">Why are there two build.gradle files in an Android Studio project?</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#enable-proguard-using-gradle" class="sidebar-link">Enable Proguard using gradle</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#enable-experimental-ndk-plugin-support-for-gradle-and-androidstudio" class="sidebar-link">Enable experimental NDK plugin support for Gradle and AndroidStudio</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#ignoring-build-variant" class="sidebar-link">Ignoring build variant</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#seeing-dependency-tree" class="sidebar-link">Seeing dependency tree</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#display-signing-information" class="sidebar-link">Display signing information</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#executing-a-shell-script-from-gradle" class="sidebar-link">Executing a shell script from gradle</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#disable-image-compression-for-a-smaller-apk-file-size" class="sidebar-link">Disable image compression for a smaller APK file size</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#show-all-gradle-project-tasks" class="sidebar-link">Show all gradle project tasks</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#delete-unaligned-apk-automatically" class="sidebar-link">Delete &quot;unaligned&quot; apk automatically</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#debugging-your-gradle-errors" class="sidebar-link">Debugging your Gradle errors</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#use-gradle-properties-for-central-versionnumber-buildconfigurations" class="sidebar-link">Use gradle.properties for central versionnumber/buildconfigurations</a></li><li class="sidebar-sub-header"><a href="/android/gradle-for-android.html#defining-build-types" class="sidebar-link">Defining build types</a></li></ul></li><li><a href="/android/fileio-with-android.html" class="sidebar-link">FileIO with Android</a></li><li><a href="/android/fileprovider.html" class="sidebar-link">FileProvider</a></li><li><a href="/android/storing-files-in-internal-external-storage.html" class="sidebar-link">Storing Files in Internal &amp; External Storage</a></li><li><a href="/android/zip-file-in-android.html" class="sidebar-link">Zip file in android</a></li><li><a href="/android/unzip-file-in-android.html" class="sidebar-link">Unzip File in Android</a></li><li><a href="/android/camera-and-gallery.html" class="sidebar-link">Camera and Gallery</a></li><li><a href="/android/camera-2-api.html" class="sidebar-link">Camera 2 API</a></li><li><a href="/android/fingerprint-api-in-android.html" class="sidebar-link">Fingerprint API in android</a></li><li><a href="/android/bluetooth-and-bluetooth-le-api.html" class="sidebar-link">Bluetooth and Bluetooth LE API</a></li><li><a href="/android/runtime-permissions-in-api-23.html" class="sidebar-link">Runtime Permissions in API-23 +</a></li><li><a href="/android/android-places-api.html" class="sidebar-link">Android Places API</a></li><li><a href="/android/android-ndk.html" class="sidebar-link">Android NDK</a></li><li><a href="/android/daynight-theme-appcompat-v23-2-api-14.html" class="sidebar-link">DayNight Theme (AppCompat v23.2 / API 14+)</a></li><li><a href="/android/glide.html" class="sidebar-link">Glide</a></li><li><a href="/android/dialog.html" class="sidebar-link">Dialog</a></li><li><a href="/android/enhancing-alert-dialogs.html" class="sidebar-link">Enhancing Alert Dialogs</a></li><li><a href="/android/animated-alertdialog-box.html" class="sidebar-link">Animated AlertDialog Box</a></li><li><a href="/android/greendao.html" class="sidebar-link">GreenDAO</a></li><li><a href="/android/tools-attributes.html" class="sidebar-link">Tools Attributes</a></li><li><a href="/android/formatting-strings.html" class="sidebar-link">Formatting Strings</a></li><li><a href="/android/spannablestring.html" class="sidebar-link">SpannableString</a></li><li><a href="/android/notifications.html" class="sidebar-link">Notifications</a></li><li><a href="/android/alarmmanager.html" class="sidebar-link">AlarmManager</a></li><li><a href="/android/handler.html" class="sidebar-link">Handler</a></li><li><a href="/android/broadcastreceiver.html" class="sidebar-link">BroadcastReceiver</a></li><li><a href="/android/ui-lifecycle.html" class="sidebar-link">UI Lifecycle</a></li><li><a href="/android/httpurlconnection.html" class="sidebar-link">HttpURLConnection</a></li><li><a href="/android/callback-url.html" class="sidebar-link">Callback URL</a></li><li><a href="/android/snackbar.html" class="sidebar-link">Snackbar</a></li><li><a href="/android/widgets.html" class="sidebar-link">Widgets</a></li><li><a href="/android/toast.html" class="sidebar-link">Toast</a></li><li><a href="/android/create-singleton-class-for-toast-message.html" class="sidebar-link">Create Singleton Class for Toast Message</a></li><li><a href="/android/interfaces.html" class="sidebar-link">Interfaces</a></li><li><a href="/android/animators.html" class="sidebar-link">Animators</a></li><li><a href="/android/location.html" class="sidebar-link">Location</a></li><li><a href="/android/theme-style-attribute.html" class="sidebar-link">Theme, Style, Attribute</a></li><li><a href="/android/mediaplayer.html" class="sidebar-link">MediaPlayer</a></li><li><a href="/android/android-sound-and-media.html" class="sidebar-link">Android Sound and Media</a></li><li><a href="/android/mediasession.html" class="sidebar-link">MediaSession</a></li><li><a href="/android/mediastore.html" class="sidebar-link">MediaStore</a></li><li><a href="/android/multidex-and-the-dex-method-limit.html" class="sidebar-link">Multidex and the Dex Method Limit</a></li><li><a href="/android/data-synchronization-with-sync-adapter.html" class="sidebar-link">Data Synchronization with Sync Adapter</a></li><li><a href="/android/porterduff-mode.html" class="sidebar-link">PorterDuff Mode</a></li><li><a href="/android/menu.html" class="sidebar-link">Menu</a></li><li><a href="/android/picasso.html" class="sidebar-link">Picasso</a></li><li><a href="/android/roboguice.html" class="sidebar-link">RoboGuice</a></li><li><a href="/android/acra.html" class="sidebar-link">ACRA</a></li><li><a href="/android/parcelable.html" class="sidebar-link">Parcelable</a></li><li><a href="/android/retrofit2.html" class="sidebar-link">Retrofit2</a></li><li><a href="/android/butterknife.html" class="sidebar-link">ButterKnife</a></li><li><a href="/android/volley.html" class="sidebar-link">Volley</a></li><li><a href="/android/date-and-time-pickers.html" class="sidebar-link">Date and Time Pickers</a></li><li><a href="/android/localized-date-time-in-android.html" class="sidebar-link">Localized Date/Time in Android</a></li><li><a href="/android/time-utils.html" class="sidebar-link">Time Utils</a></li><li><a href="/android/in-app-billing.html" class="sidebar-link">In-app Billing</a></li><li><a href="/android/floatingactionbutton.html" class="sidebar-link">FloatingActionButton</a></li><li><a href="/android/touch-events.html" class="sidebar-link">Touch Events</a></li><li><a href="/android/handling-touch-and-motion-events.html" class="sidebar-link">Handling touch and motion events</a></li><li><a href="/android/detect-shake-event-in-android.html" class="sidebar-link">Detect Shake Event in Android</a></li><li><a href="/android/hardware-button-events-intents-ptt-lwp-etc.html" class="sidebar-link">Hardware Button Events/Intents (PTT, LWP, etc.)</a></li><li><a href="/android/greenrobot-eventbus.html" class="sidebar-link">GreenRobot EventBus</a></li><li><a href="/android/otto-event-bus.html" class="sidebar-link">Otto Event Bus</a></li><li><a href="/android/vibration.html" class="sidebar-link">Vibration</a></li><li><a href="/android/contentprovider.html" class="sidebar-link">ContentProvider</a></li><li><a href="/android/dagger-2.html" class="sidebar-link">Dagger 2</a></li><li><a href="/android/realm.html" class="sidebar-link">Realm</a></li><li><a href="/android/android-versions.html" class="sidebar-link">Android Versions</a></li><li><a href="/android/wi-fi-connections.html" class="sidebar-link">Wi-Fi Connections</a></li><li><a href="/android/sensormanager.html" class="sidebar-link">SensorManager</a></li><li><a href="/android/progressbar.html" class="sidebar-link">ProgressBar</a></li><li><a href="/android/custom-fonts.html" class="sidebar-link">Custom Fonts</a></li><li><a href="/android/getting-system-font-names-and-using-the-fonts.html" class="sidebar-link">Getting system font names and using the fonts</a></li><li><a href="/android/text-to-speech-tts.html" class="sidebar-link">Text to Speech(TTS)</a></li><li><a href="/android/spinner.html" class="sidebar-link">Spinner</a></li><li><a href="/android/data-encryption-decryption.html" class="sidebar-link">Data Encryption/Decryption</a></li><li><a href="/android/okhttp.html" class="sidebar-link">OkHttp</a></li><li><a href="/android/handling-deep-links.html" class="sidebar-link">Handling Deep Links</a></li><li><a href="/android/crash-reporting-tools.html" class="sidebar-link">Crash Reporting Tools</a></li><li><a href="/android/check-internet-connectivity.html" class="sidebar-link">Check Internet Connectivity</a></li><li><a href="/android/creating-your-own-libraries-for-android-applications.html" class="sidebar-link">Creating your own libraries for Android applications</a></li><li><a href="/android/device-display-metrics.html" class="sidebar-link">Device Display Metrics</a></li><li><a href="/android/building-backwards-compatible-apps.html" class="sidebar-link">Building Backwards Compatible Apps</a></li><li><a href="/android/loader.html" class="sidebar-link">Loader</a></li><li><a href="/android/proguard-obfuscating-and-shrinking-your-code.html" class="sidebar-link">ProGuard - Obfuscating and Shrinking your code</a></li><li><a href="/android/typedef-annotations-intdef-stringdef.html" class="sidebar-link">Typedef Annotations: @IntDef, @StringDef</a></li><li><a href="/android/capturing-screenshots.html" class="sidebar-link">Capturing Screenshots</a></li><li><a href="/android/mvp-architecture.html" class="sidebar-link">MVP Architecture</a></li><li><a href="/android/orientation-changes.html" class="sidebar-link">Orientation Changes</a></li><li><a href="/android/xposed.html" class="sidebar-link">Xposed</a></li><li><a href="/android/packagemanager.html" class="sidebar-link">PackageManager</a></li><li><a href="/android/gesture-detection.html" class="sidebar-link">Gesture Detection</a></li><li><a href="/android/doze-mode.html" class="sidebar-link">Doze Mode</a></li><li><a href="/android/colors.html" class="sidebar-link">Colors</a></li><li><a href="/android/keyboard.html" class="sidebar-link">Keyboard</a></li><li><a href="/android/renderscript.html" class="sidebar-link">RenderScript</a></li><li><a href="/android/fresco.html" class="sidebar-link">Fresco</a></li><li><a href="/android/swipe-to-refresh.html" class="sidebar-link">Swipe to Refresh</a></li><li><a href="/android/creating-splash-screen.html" class="sidebar-link">Creating Splash screen</a></li><li><a href="/android/intentservice.html" class="sidebar-link">IntentService</a></li><li><a href="/android/implicit-intents.html" class="sidebar-link">Implicit Intents</a></li><li><a href="/android/publish-to-play-store.html" class="sidebar-link">Publish to Play Store</a></li><li><a href="/android/universal-image-loader.html" class="sidebar-link">Universal Image Loader</a></li><li><a href="/android/image-compression.html" class="sidebar-link">Image Compression</a></li><li><a href="/android/9-patch-images.html" class="sidebar-link">9-Patch Images</a></li><li><a href="/android/email-validation.html" class="sidebar-link">Email Validation</a></li><li><a href="/android/bottom-sheets.html" class="sidebar-link">Bottom Sheets</a></li><li><a href="/android/edittext.html" class="sidebar-link">EditText</a></li><li><a href="/android/speech-to-text-conversion.html" class="sidebar-link">Speech to Text Conversion</a></li><li><a href="/android/installing-apps-with-adb.html" class="sidebar-link">Installing apps with ADB</a></li><li><a href="/android/count-down-timer.html" class="sidebar-link">Count Down Timer</a></li><li><a href="/android/barcode-and-qr-code-reading.html" class="sidebar-link">Barcode and QR code reading</a></li><li><a href="/android/android-paypal-gateway-integration.html" class="sidebar-link">Android Paypal Gateway Integration</a></li><li><a href="/android/drawables.html" class="sidebar-link">Drawables</a></li><li><a href="/android/transitiondrawable.html" class="sidebar-link">TransitionDrawable</a></li><li><a href="/android/vector-drawables.html" class="sidebar-link">Vector Drawables</a></li><li><a href="/android/vectordrawable-and-animatedvectordrawable.html" class="sidebar-link">VectorDrawable and AnimatedVectorDrawable</a></li><li><a href="/android/port-mapping-using-cling-library-in-android.html" class="sidebar-link">Port Mapping using Cling library in Android</a></li><li><a href="/android/creating-overlay-always-on-top-windows.html" class="sidebar-link">Creating Overlay (always-on-top) Windows</a></li><li><a href="/android/exoplayer.html" class="sidebar-link">ExoPlayer</a></li><li><a href="/android/xmpp-register-login-and-chat-simple-example.html" class="sidebar-link">XMPP register login and chat simple example</a></li><li><a href="/android/android-authenticator.html" class="sidebar-link">Android Authenticator</a></li><li><a href="/android/audiomanager.html" class="sidebar-link">AudioManager</a></li><li><a href="/android/audiotrack.html" class="sidebar-link">AudioTrack</a></li><li><a href="/android/job-scheduling.html" class="sidebar-link">Job Scheduling</a></li><li><a href="/android/accounts-and-accountmanager.html" class="sidebar-link">Accounts and AccountManager</a></li><li><a href="/android/integrate-opencv-into-android-studio.html" class="sidebar-link">Integrate OpenCV into Android Studio</a></li><li><a href="/android/mvvm-architecture.html" class="sidebar-link">MVVM (Architecture)</a></li><li><a href="/android/ormlite-in-android.html" class="sidebar-link">ORMLite in android</a></li><li><a href="/android/retrofit2-with-rxjava.html" class="sidebar-link">Retrofit2 with RxJava</a></li><li><a href="/android/shortcutmanager.html" class="sidebar-link">ShortcutManager</a></li><li><a href="/android/lrucache.html" class="sidebar-link">LruCache</a></li><li><a href="/android/jenkins-ci-setup-for-android-projects.html" class="sidebar-link">Jenkins CI setup for Android Projects</a></li><li><a href="/android/fastlane.html" class="sidebar-link">fastlane</a></li><li><a href="/android/define-step-value-increment-for-custom-rangeseekbar.html" class="sidebar-link">Define step value (increment) for custom RangeSeekBar</a></li><li><a href="/android/getting-started-with-opengl-es-2-0.html" class="sidebar-link">Getting started with OpenGL ES 2.0+</a></li><li><a href="/android/check-data-connection.html" class="sidebar-link">Check Data Connection</a></li><li><a href="/android/java-on-android.html" class="sidebar-link">Java on Android</a></li><li><a href="/android/android-java-native-interface-jni.html" class="sidebar-link">Android Java Native Interface (JNI)</a></li><li><a href="/android/notification-channel-android-o.html" class="sidebar-link">Notification Channel Android O</a></li><li><a href="/android/robolectric.html" class="sidebar-link">Robolectric</a></li><li><a href="/android/moshi.html" class="sidebar-link">Moshi</a></li><li><a href="/android/strict-mode-policy-a-tool-to-catch-the-bug-in-the-compile-time.html" class="sidebar-link">Strict Mode Policy : A tool to catch the bug in the Compile Time.</a></li><li><a href="/android/internationalization-and-localization-i18n-and-l10n.html" class="sidebar-link">Internationalization and localization (I18N and L10N)</a></li><li><a href="/android/fast-way-to-setup-retrolambda-on-an-android-project.html" class="sidebar-link">Fast way to setup Retrolambda on an android project.</a></li><li><a href="/android/how-to-use-sparsearray.html" class="sidebar-link">How to use SparseArray</a></li><li><a href="/android/shared-element-transitions.html" class="sidebar-link">Shared Element Transitions</a></li><li><a href="/android/android-things.html" class="sidebar-link">Android Things</a></li><li><a href="/android/library-dagger-2-dependency-injection-in-applications.html" class="sidebar-link">Library Dagger 2: Dependency Injection in Applications</a></li><li><a href="/android/jcodec.html" class="sidebar-link">JCodec</a></li><li><a href="/android/formatting-phone-numbers-with-pattern.html" class="sidebar-link">Formatting phone numbers with pattern.</a></li><li><a href="/android/paint.html" class="sidebar-link">Paint</a></li><li><a href="/android/what-is-proguard-what-is-use-in-android.html" class="sidebar-link">What is ProGuard? What is use in Android?</a></li><li><a href="/android/create-android-custom-roms.html" class="sidebar-link">Create Android Custom ROMs</a></li><li><a href="/android/genymotion-for-android.html" class="sidebar-link">Genymotion for android</a></li><li><a href="/android/constraintset.html" class="sidebar-link">ConstraintSet</a></li><li><a href="/android/clevertap.html" class="sidebar-link">CleverTap</a></li><li><a href="/android/publish-a-library-to-maven-repositories.html" class="sidebar-link">Publish a library to Maven Repositories</a></li><li><a href="/android/adb-shell.html" class="sidebar-link">adb shell</a></li><li><a href="/android/ping-icmp.html" class="sidebar-link">Ping ICMP</a></li><li><a href="/android/aidl.html" class="sidebar-link">AIDL</a></li><li><a href="/android/android-game-development.html" class="sidebar-link">Android game development</a></li><li><a href="/android/android-programming-with-kotlin.html" class="sidebar-link">Android programming with Kotlin</a></li><li><a href="/android/android-x86-in-virtualbox.html" class="sidebar-link">Android-x86 in VirtualBox</a></li><li><a href="/android/leakcanary.html" class="sidebar-link">Leakcanary</a></li><li><a href="/android/okio.html" class="sidebar-link">Okio</a></li><li><a href="/android/bluetooth-low-energy.html" class="sidebar-link">Bluetooth Low Energy</a></li><li><a href="/android/looper.html" class="sidebar-link">Looper</a></li><li><a href="/android/annotation-processor.html" class="sidebar-link">Annotation Processor</a></li><li><a href="/android/syncadapter-with-periodically-do-sync-of-data.html" class="sidebar-link">SyncAdapter with periodically do sync of data</a></li><li><a href="/android/fastjson.html" class="sidebar-link">Fastjson</a></li><li><a href="/android/json-in-android-with-org-json.html" class="sidebar-link">JSON in Android with org.json</a></li><li><a href="/android/gson.html" class="sidebar-link">Gson</a></li><li><a href="/android/android-architecture-components.html" class="sidebar-link">Android Architecture Components</a></li><li><a href="/android/jackson.html" class="sidebar-link">Jackson</a></li><li><a href="/android/smartcard.html" class="sidebar-link">Smartcard</a></li><li><a href="/android/security.html" class="sidebar-link">Security</a></li><li><a href="/android/how-to-store-passwords-securely.html" class="sidebar-link">How to store passwords securely</a></li><li><a href="/android/secure-sharedpreferences.html" class="sidebar-link">Secure SharedPreferences</a></li><li><a href="/android/secure-sharedpreferences.html" class="sidebar-link">Secure SharedPreferences</a></li><li><a href="/android/sqlite.html" class="sidebar-link">SQLite</a></li><li><a href="/android/accessing-sqlite-databases-using-the-contentvalues-class.html" class="sidebar-link">Accessing SQLite databases using the ContentValues class</a></li><li><a href="/android/firebase.html" class="sidebar-link">Firebase</a></li><li><a href="/android/firebase-cloud-messaging.html" class="sidebar-link">Firebase Cloud Messaging</a></li><li><a href="/android/firebase-realtime-database.html" class="sidebar-link">Firebase Realtime DataBase</a></li><li><a href="/android/firebase-app-indexing.html" class="sidebar-link">Firebase App Indexing</a></li><li><a href="/android/firebase-crash-reporting.html" class="sidebar-link">Firebase Crash Reporting</a></li><li><a href="/android/twitter-apis.html" class="sidebar-link">Twitter APIs</a></li><li><a href="/android/youtube-api.html" class="sidebar-link">Youtube-API</a></li><li><a href="/android/integrate-google-sign-in.html" class="sidebar-link">Integrate Google Sign In</a></li><li><a href="/android/google-signin-integration-on-android.html" class="sidebar-link">Google signin integration on android</a></li><li><a href="/android/google-awareness-apis.html" class="sidebar-link">Google Awareness APIs</a></li><li><a href="/android/google-maps-api-v2-for-android.html" class="sidebar-link">Google Maps API v2 for Android</a></li><li><a href="/android/google-drive-api.html" class="sidebar-link">Google Drive API</a></li><li><a href="/android/displaying-google-ads.html" class="sidebar-link">Displaying Google Ads</a></li><li><a href="/android/admob.html" class="sidebar-link">AdMob</a></li><li><a href="/android/google-play-store.html" class="sidebar-link">Google Play Store</a></li><li><a href="/android/sign-your-android-app-for-release.html" class="sidebar-link">Sign your Android App for Release</a></li><li><a href="/android/tensorflow.html" class="sidebar-link">TensorFlow</a></li><li><a href="/android/android-vk-sdk.html" class="sidebar-link">Android Vk Sdk</a></li><li><a href="/android/project-sdk-versions.html" class="sidebar-link">Project SDK versions</a></li><li><a href="/android/facebook-sdk-for-android.html" class="sidebar-link">Facebook SDK for Android</a></li><li><a href="/android/thread.html" class="sidebar-link">Thread</a></li><li><a href="/android/asynctask.html" class="sidebar-link">AsyncTask</a></li><li><a href="/android/testing-ui-with-espresso.html" class="sidebar-link">Testing UI with Espresso</a></li><li><a href="/android/writing-ui-tests-android.html" class="sidebar-link">Writing UI tests - Android</a></li><li><a href="/android/unit-testing-in-android-with-junit.html" class="sidebar-link">Unit testing in Android with JUnit</a></li><li><a href="/android/inter-app-ui-testing-with-uiautomator.html" class="sidebar-link">Inter-app UI testing with UIAutomator</a></li><li><a href="/android/lint-warnings.html" class="sidebar-link">Lint Warnings</a></li><li><a href="/android/performance-optimization.html" class="sidebar-link">Performance Optimization</a></li><li><a href="/android/android-kernel-optimization.html" class="sidebar-link">Android Kernel Optimization</a></li><li><a href="/android/memory-leaks.html" class="sidebar-link">Memory Leaks</a></li><li><a href="/android/enhancing-android-performance-using-icon-fonts.html" class="sidebar-link">Enhancing Android Performance Using Icon Fonts</a></li><li><a href="/android/bitmap-cache.html" class="sidebar-link">Bitmap Cache</a></li><li><a href="/android/loading-bitmaps-effectively.html" class="sidebar-link">Loading Bitmaps Effectively</a></li><li><a href="/android/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/android/logging-and-using-logcat.html" class="sidebar-link">Logging and using Logcat</a></li><li><a href="/android/adb-android-debug-bridge.html" class="sidebar-link">ADB (Android Debug Bridge)</a></li><li><a href="/android/localization-with-resources-in-android.html" class="sidebar-link">Localization with resources in Android</a></li><li><a href="/android/convert-vietnamese-string-to-english-string-android.html" class="sidebar-link">Convert vietnamese string to english string Android</a></li><li><a href="/android/publish-aar-file-to-apache-archiva-with-gradle.html" class="sidebar-link">Publish .aar file to Apache Archiva with Gradle</a></li><li><a href="/android/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gradle-for-android"><a href="#gradle-for-android" class="header-anchor">#</a> Gradle for Android</h1> <p>Gradle is a JVM-based build system that enables developers to write high-level scripts that can be used to automate the process of compilation and application production. It is a flexible plugin-based system, which allows you to automate various aspects of the build process; including compiling and signing a <code>.jar</code>, downloading and managing external dependencies, injecting fields into the <code>AndroidManifest</code> or utilising specific SDK versions.</p> <h2 id="a-basic-build-gradle-file"><a href="#a-basic-build-gradle-file" class="header-anchor">#</a> A basic build.gradle file</h2> <p>This is an example of a default <code>build.gradle</code> file in a module.</p> <div class="language-java extra-class"><pre class="language-java"><code>apply plugin<span class="token operator">:</span> <span class="token string">'com.android.application'</span>

android <span class="token punctuation">{</span>
    compileSdkVersion <span class="token number">25</span>
    buildToolsVersion <span class="token string">'25.0.3'</span>

    signingConfigs <span class="token punctuation">{</span>
        applicationName <span class="token punctuation">{</span>
            keyAlias <span class="token string">'applicationName'</span>
            keyPassword <span class="token string">'password'</span>
            storeFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'../key/applicationName.jks'</span><span class="token punctuation">)</span>
            storePassword <span class="token string">'keystorePassword'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    defaultConfig <span class="token punctuation">{</span>
        applicationId <span class="token string">'com.company.applicationName'</span>
        minSdkVersion <span class="token number">14</span>
        targetSdkVersion <span class="token number">25</span>
        versionCode <span class="token number">1</span>
        versionName <span class="token string">'1.0'</span>
        signingConfig signingConfigs<span class="token punctuation">.</span>applicationName
    <span class="token punctuation">}</span>
    buildTypes <span class="token punctuation">{</span>
        release <span class="token punctuation">{</span>
            minifyEnabled <span class="token boolean">true</span>
            proguardFiles <span class="token function">getDefaultProguardFile</span><span class="token punctuation">(</span><span class="token string">'proguard-android.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'proguard-rules.pro'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
    compile <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token operator">:</span> <span class="token string">'libs'</span><span class="token punctuation">,</span> include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*.jar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    compile <span class="token string">'com.android.support:appcompat-v7:25.3.1'</span>
    compile <span class="token string">'com.android.support:design:25.3.1'</span>

    testCompile <span class="token string">'junit:junit:4.12'</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="dsl-domain-specific-language"><a href="#dsl-domain-specific-language" class="header-anchor">#</a> DSL (domain-specific language)</h3> <p>Each block in the file above is called a <code>DSL</code> (domain-specific language).</p> <h3 id="plugins"><a href="#plugins" class="header-anchor">#</a> Plugins</h3> <p>The first line, <code>apply plugin: 'com.android.application'</code>, applies the <a href="http://stackoverflow.com/documentation/android-gradle/2092/introduction-to-android-gradle/19904/android-plugin-for-gradle#t=201609150649318227543" target="_blank" rel="noopener noreferrer">Android plugin for Gradle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to the build and makes the <code>android {}</code> block available to declare Android-specific build options.</p> <p>For an <strong>Android Application</strong>:</p> <div class="language-java extra-class"><pre class="language-java"><code>apply plugin<span class="token operator">:</span> <span class="token string">'com.android.application'</span>

</code></pre></div><p>For an <strong>Android Library</strong>:</p> <div class="language-java extra-class"><pre class="language-java"><code>apply plugin<span class="token operator">:</span> <span class="token string">'com.android.library'</span>

</code></pre></div><h3 id="understanding-the-dsls-in-the-sample-above"><a href="#understanding-the-dsls-in-the-sample-above" class="header-anchor">#</a> <a href="http://stackoverflow.com/documentation/android-gradle/2161/configure-your-build-with-gradle/7077/the-module-file-example#t=201608060824289248387" target="_blank" rel="noopener noreferrer">Understanding the DSLs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in the sample above</h3> <p>The second part, The <code>android {...}</code> block, is the Android <code>DSL</code> which contains information about your project.</p> <p>For example, you can set the <code>compileSdkVersion</code> which specifies the Android API level , Which should be used by Gradle to compile your app.<br>
The sub-block <code>defaultConfig</code> holds the defaults for your manifest. You can <code>override</code> them with <a href="http://stackoverflow.com/documentation/android-gradle/2929/configure-product-flavors#t=201609150655525420888" target="_blank" rel="noopener noreferrer">Product Flavors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>You can find more info in these examples:</p> <ul><li><a href="http://stackoverflow.com/documentation/android-gradle/2161/configure-your-build-with-gradle/7077/the-module-file-example#t=201609150656268962378" target="_blank" rel="noopener noreferrer">DSL for the app module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://stackoverflow.com/documentation/android-gradle/3281/configure-build-types#t=201609150657045925473" target="_blank" rel="noopener noreferrer">Build Types<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://stackoverflow.com/documentation/android-gradle/2929/configure-product-flavors#t=201609150656541535557" target="_blank" rel="noopener noreferrer">Product Flavors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://stackoverflow.com/documentation/android-gradle/5249/configure-signing-settings#t=201609150657547602413" target="_blank" rel="noopener noreferrer">Signing settings<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="dependencies"><a href="#dependencies" class="header-anchor">#</a> <a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies#t=201608040616412368066" target="_blank" rel="noopener noreferrer">Dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>The <code>dependencies</code> block is defined outside the <code>android</code> block <code>{...}</code> : This means it's not defined by the Android plugin but it's standard Gradle.<br>
The <code>dependencies</code> block specifies what external libraries (typically Android libraries, but Java libraries are also valid) you wish to include in your app. Gradle will automatically download these dependencies for you (if there is no local copy available), you just need to add similar <code>compile</code> lines when you wish to add another library.</p> <p>Let's look at one of the lines present here:</p> <blockquote></blockquote> <p><code>compile 'com.android.support:design:25.3.1'</code></p> <p>This line basically says</p> <blockquote></blockquote> <p>add a dependency on the Android support design library to my project.</p> <p>Gradle will ensure that the library is downloaded and present so that you can use it in your app, and its code will also be included in your app.</p> <p>If you're familiar with Maven, this syntax is the <strong>GroupId</strong>, a colon, <strong>ArtifactId</strong>, another colon, then the version of the dependency you wish to include, giving you full control over versioning.</p> <p>While it is possible to specify artifact versions using the plus (+) sign, best practice is to avoid doing so; it can lead to issues if the library gets updated with breaking changes without your knowledge, which would likely lead to crashes in your app.</p> <p>You can add different kind of dependencies:</p> <ul><li><a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies/11291/local-binary-dependencies#t=201609150702149292729" target="_blank" rel="noopener noreferrer">local binary dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies/11290/module-dependencies#t=201609150702254302343" target="_blank" rel="noopener noreferrer">module dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies/11292/remote-binary-dependencies#t=201609150702366671434" target="_blank" rel="noopener noreferrer">remote dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>A particular attention should be dedicated to the <a href="http://stackoverflow.com/documentation/android-gradle/3037/how-to-include-aar-files-in-a-project-in-android#t=201609150703402541119" target="_blank" rel="noopener noreferrer">aar flat dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>You can find more details in <a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies#t=201609150704148588267" target="_blank" rel="noopener noreferrer">this topic.<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Note about the <strong>-v7 in <strong>appcompat-v7</strong></strong></p> <blockquote></blockquote> <p><code>compile 'com.android.support:appcompat-v7:25.3.1'</code></p> <p>This simply means that this <strong>library</strong> (<code>appcompat</code>) is compatible with the Android API level 7 and forward.</p> <p>Note about the <strong>junit:junit:4.12</strong></p> <p>This is Testing dependency for Unit testing.</p> <h3 id="specifying-dependencies-specific-to-different-build-configurations"><a href="#specifying-dependencies-specific-to-different-build-configurations" class="header-anchor">#</a> Specifying dependencies specific to different build configurations</h3> <p>You can specify that a dependency should only be used for a certain <a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies/17861/declare-dependencies-for-configurations#t=201609150706071099895" target="_blank" rel="noopener noreferrer">build configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or you can define different dependencies for the <a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies/22988/declare-dependencies-for-build-types#t=201609150709405530227" target="_blank" rel="noopener noreferrer">build types<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or the <a href="http://stackoverflow.com/documentation/android-gradle/3289/declare-dependencies/18698/declare-dependencies-for-flavors#t=201609150706431102381" target="_blank" rel="noopener noreferrer">product flavors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (e.g., debug, test or release) by using <code>debugCompile</code>, <code>testCompile</code> or <code>releaseCompile</code> instead of the usual <code>compile</code>.</p> <p>This is helpful for keeping test- and debug- related dependencies out of your release build, which will keep your release <code>APK</code> as slim as possible and help to ensure that any debug information cannot be used to obtain internal information about your app.</p> <h3 id="signingconfig"><a href="#signingconfig" class="header-anchor">#</a> <a href="http://stackoverflow.com/documentation/android-gradle/5249/configure-signing-settings#t=201608060822323313637" target="_blank" rel="noopener noreferrer">signingConfig<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>The <code>signingConfig</code> allows you to configure your Gradle to include <code>keystore</code> information and ensure that the APK built using these configurations are signed and ready for Play Store release.</p> <p>Here you can find a <a href="http://stackoverflow.com/documentation/android-gradle/5249/configure-signing-settings#t=201609150711373069035" target="_blank" rel="noopener noreferrer">dedicated topic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>Note</strong>: It's not recommended though to keep the signing credentials inside your Gradle file. To remove the signing configurations, just omit the <code>signingConfigs</code> portion.<br>
You can specify them in different ways:</p> <ul><li>storing in an <a href="http://stackoverflow.com/documentation/android-gradle/5249/configure-signing-settings/18657/define-the-signing-configuration-in-an-external-file#t=201609150713390867222" target="_blank" rel="noopener noreferrer">external file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>storing them in <a href="http://stackoverflow.com/documentation/android-gradle/5249/configure-signing-settings/18658/define-the-signing-configuration-setting-environment-variables#t=201609150713570980288" target="_blank" rel="noopener noreferrer">setting environment variables<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ul> <p>See this topic for more details : <a href="http://stackoverflow.com/documentation/android/95/gradle-for-android/7078/sign-apk-without-exposing-keystore-password#t=201608090310148888637" target="_blank" rel="noopener noreferrer">Sign APK without exposing keystore password<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>You can find further information about Gradle for Android in the <a href="http://stackoverflow.com/documentation/android-gradle/2161/configure-your-build-with-gradle#t=201608060745337157221" target="_blank" rel="noopener noreferrer">dedicated Gradle topic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong>.</p> <h2 id="define-and-use-build-configuration-fields"><a href="#define-and-use-build-configuration-fields" class="header-anchor">#</a> Define and use Build Configuration Fields</h2> <h3 id="buildconfigfield"><a href="#buildconfigfield" class="header-anchor">#</a> <strong>BuildConfigField</strong></h3> <p>Gradle allows <code>buildConfigField</code> lines to define constants. These constants will be accessible at runtime as static fields of the <code>BuildConfig</code> class. This can be used to create <a href="http://stackoverflow.com/documentation/android/95/gradle-for-android/401/defining-product-flavors#t=20160804061141663974" target="_blank" rel="noopener noreferrer">flavors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by defining all fields within the <code>defaultConfig</code> block, then overriding them for individual build flavors as needed.</p> <p>This example defines the build date and flags the build for production rather than test:</p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    defaultConfig <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token comment">// defining the build date</span>
        buildConfigField <span class="token string">&quot;long&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;BUILD_DATE&quot;</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;L&quot;</span>
        <span class="token comment">// define whether this build is a production build</span>
        buildConfigField <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;IS_PRODUCTION&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;false&quot;</span>
        <span class="token comment">// note that to define a string you need to escape it</span>
        buildConfigField <span class="token string">&quot;String&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;API_KEY&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\&quot;my_api_key\&quot;&quot;</span>
    <span class="token punctuation">}</span>

    productFlavors <span class="token punctuation">{</span>
        prod <span class="token punctuation">{</span>
            <span class="token comment">// override the productive flag for the flavor &quot;prod&quot;</span>
            buildConfigField <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;IS_PRODUCTION&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span>
            resValue <span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token string">'app_name'</span><span class="token punctuation">,</span> <span class="token string">'My App Name'</span>
        <span class="token punctuation">}</span>
        dev <span class="token punctuation">{</span>
            <span class="token comment">// inherit default fields</span>
            resValue <span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token string">'app_name'</span><span class="token punctuation">,</span> <span class="token string">'My App Name - Dev'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The automatically-generated &lt;package_name&gt;.<code>BuildConfig</code>.java in the gen folder contains the following fields based on the directive above:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BuildConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... other generated fields ...</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> BUILD_DATE <span class="token operator">=</span> <span class="token number">1469504547000L</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> IS_PRODUCTION <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> API_KEY <span class="token operator">=</span> <span class="token string">&quot;my_api_key&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The defined fields can now be used within the app at runtime by accessing the generated <code>BuildConfig</code> class:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// format the build date</span>
    <span class="token class-name">SimpleDateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy/MM/dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> buildDate <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">BuildConfig</span><span class="token punctuation">.</span>BUILD_DATE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">&quot;build date&quot;</span><span class="token punctuation">,</span> buildDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// do something depending whether this is a productive build</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">BuildConfig</span><span class="token punctuation">.</span>IS_PRODUCTION<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">connectToProductionApiEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">connectToStagingApiEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="resvalue"><a href="#resvalue" class="header-anchor">#</a> ResValue</h3> <p>The <code>resValue</code> in the <code>productFlavors</code> creates a resource value. It can be any type of resource (<code>string</code>, <code>dimen</code>, <code>color</code>, etc.). This is similar to defining a resource in the appropriate file: e.g. defining string in a <code>strings.xml</code> file. The advantage being that the one defined in gradle can be modified based on your productFlavor/buildVariant. To access the value, write the same code as if you were accessing a res from the resources file:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>app_name<span class="token punctuation">)</span>

</code></pre></div><p>The important thing is that resources defined this way cannot modify existing resources defined in files. They can only create new resource values.</p> <p>Some libraries (such as the Google Maps Android API) require an API key provided in the Manifest as a <code>meta-data</code> tag. If different keys are needed for debugging and production builds, specify a manifest placeholder filled in by Gradle.</p> <p>In your <code>AndroidManifest.xml</code> file:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span>meta<span class="token operator">-</span>data
    android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;com.google.android.geo.API_KEY&quot;</span>
    android<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;${MAPS_API_KEY}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

</code></pre></div><p>And then set the field accordingly in your <code>build.gradle</code> file:</p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>
    defaultConfig <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token comment">// Your development key</span>
        manifestPlaceholders <span class="token operator">=</span> <span class="token punctuation">[</span> MAPS_API_KEY<span class="token operator">:</span> <span class="token string">&quot;AIza...&quot;</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    productFlavors <span class="token punctuation">{</span>
        prod <span class="token punctuation">{</span>
            <span class="token comment">// Your production key</span>
            manifestPlaceholders <span class="token operator">=</span> <span class="token punctuation">[</span> MAPS_API_KEY<span class="token operator">:</span> <span class="token string">&quot;AIza...&quot;</span> <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The Android build system generates a number of fields automatically and places them in <code>BuildConfig.java</code>. These fields are:</p> <table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td><code>DEBUG</code></td> <td>a <code>Boolean</code> stating if the app is in debug or release mode</td></tr> <tr><td><code>APPLICATION_ID</code></td> <td>a <code>String</code> containing the ID of the application (e.g. <code>com.example.app</code>)</td></tr> <tr><td><code>BUILD_TYPE</code></td> <td>a <code>String</code> containing the build type of the application (usually either <code>debug</code> or <code>release</code>)</td></tr> <tr><td><code>FLAVOR</code></td> <td>a <code>String</code> containing the particular flavor of the build</td></tr> <tr><td><code>VERSION_CODE</code></td> <td>an <code>int</code> containing the version (build) number.<br>This is the same as <code>versionCode</code> in <code>build.gradle</code> or <code>versionCode</code> in <code>AndroidManifest.xml</code></td></tr> <tr><td><code>VERSION_NAME</code></td> <td>a <code>String</code> containing the version (build) name.<br>This is the same as <code>versionName</code> in <code>build.gradle</code> or <code>versionName</code> in <code>AndroidManifest.xml</code></td></tr></tbody></table> <p>In addition to the above, if you have defined multiple dimensions of flavor then each dimension will have its own value.  For example, if you had two dimensions of flavor for <code>color</code> and <code>size</code> you will also have the following variables:</p> <table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td><code>FLAVOR_color</code></td> <td>a <code>String</code> containing the value for the 'color' flavor.</td></tr> <tr><td><code>FLAVOR_size</code></td> <td>a <code>String</code> containing the value for the 'size' flavor.</td></tr></tbody></table> <h2 id="centralizing-dependencies-via-dependencies-gradle-file"><a href="#centralizing-dependencies-via-dependencies-gradle-file" class="header-anchor">#</a> Centralizing dependencies via &quot;dependencies.gradle&quot; file</h2> <p>When working with multi-module projects, it is helpful to centralize dependencies in a single location rather than having them spread across many build files, especially for common libraries such as the Android support libraries and the <a href="http://stackoverflow.com/documentation/firebase/816/introduction-to-firebase#t=201608060827057525928" target="_blank" rel="noopener noreferrer">Firebase libraries<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>One recommended way is to separate the Gradle build files, with one <code>build.gradle</code> per module, as well as one in the project root and another one for the dependencies, for example:</p> <div class="language-java extra-class"><pre class="language-java"><code>root
  <span class="token operator">+</span><span class="token operator">-</span> gradleScript<span class="token operator">/</span>
  <span class="token operator">|</span>     dependencies<span class="token punctuation">.</span>gradle
  <span class="token operator">+</span><span class="token operator">-</span> module1<span class="token operator">/</span>
  <span class="token operator">|</span>     build<span class="token punctuation">.</span>gradle
  <span class="token operator">+</span><span class="token operator">-</span> module2<span class="token operator">/</span>
  <span class="token operator">|</span>     build<span class="token punctuation">.</span>gradle
  <span class="token operator">+</span><span class="token operator">-</span> build<span class="token punctuation">.</span>gradle

</code></pre></div><p>Then, all of your dependencies can be located in <code>gradleScript/dependencies.gradle</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code>ext <span class="token punctuation">{</span>
    <span class="token comment">// Version</span>
    supportVersion <span class="token operator">=</span> <span class="token string">'24.1.0'</span>

    <span class="token comment">// Support Libraries dependencies</span>
    supportDependencies <span class="token operator">=</span> <span class="token punctuation">[</span>
            design<span class="token operator">:</span>            <span class="token string">&quot;com.android.support:design:${supportVersion}&quot;</span><span class="token punctuation">,</span>
            recyclerView<span class="token operator">:</span>      <span class="token string">&quot;com.android.support:recyclerview-v7:${supportVersion}&quot;</span><span class="token punctuation">,</span>
            cardView<span class="token operator">:</span>          <span class="token string">&quot;com.android.support:cardview-v7:${supportVersion}&quot;</span><span class="token punctuation">,</span>
            appCompat<span class="token operator">:</span>         <span class="token string">&quot;com.android.support:appcompat-v7:${supportVersion}&quot;</span><span class="token punctuation">,</span>
            supportAnnotation<span class="token operator">:</span> <span class="token string">&quot;com.android.support:support-annotations:${supportVersion}&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

    firebaseVersion <span class="token operator">=</span> <span class="token string">'9.2.0'</span><span class="token punctuation">;</span>

    firebaseDependencies <span class="token operator">=</span> <span class="token punctuation">[</span>
            core<span class="token operator">:</span>         <span class="token string">&quot;com.google.firebase:firebase-core:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            database<span class="token operator">:</span>     <span class="token string">&quot;com.google.firebase:firebase-database:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            storage<span class="token operator">:</span>      <span class="token string">&quot;com.google.firebase:firebase-storage:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            crash<span class="token operator">:</span>        <span class="token string">&quot;com.google.firebase:firebase-crash:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            auth<span class="token operator">:</span>         <span class="token string">&quot;com.google.firebase:firebase-auth:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            messaging<span class="token operator">:</span>    <span class="token string">&quot;com.google.firebase:firebase-messaging:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            remoteConfig<span class="token operator">:</span> <span class="token string">&quot;com.google.firebase:firebase-config:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            invites<span class="token operator">:</span>      <span class="token string">&quot;com.google.firebase:firebase-invites:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            adMod<span class="token operator">:</span>        <span class="token string">&quot;com.google.firebase:firebase-ads:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
            appIndexing<span class="token operator">:</span>  <span class="token string">&quot;com.google.android.gms:play-services-appindexing:${firebaseVersion}&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Which can then be applied from that file in the top level file <code>build.gradle</code> like so:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Load dependencies</span>
apply from<span class="token operator">:</span> <span class="token string">'gradleScript/dependencies.gradle'</span>

</code></pre></div><p>and in the <code>module1/build.gradle</code> like so:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Module build file</span>
dependencies <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    compile supportDependencies<span class="token punctuation">.</span>appCompat
    compile supportDependencies<span class="token punctuation">.</span>design
    compile firebaseDependencies<span class="token punctuation">.</span>crash
<span class="token punctuation">}</span>

</code></pre></div><h3 id="another-approach"><a href="#another-approach" class="header-anchor">#</a> <strong>Another approach</strong></h3> <p>A less verbose approach for centralizing library dependencies versions can be achieved by declaring the version number as a variable once, and using it everywhere.</p> <p>In the workspace root <code>build.gradle</code> add this:</p> <div class="language-java extra-class"><pre class="language-java"><code>ext<span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token punctuation">[</span>
    supportVersion<span class="token operator">:</span><span class="token string">'24.1.1'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

</code></pre></div><p>And in every module that uses the same library add the needed libraries</p> <div class="language-java extra-class"><pre class="language-java"><code>compile <span class="token string">&quot;com.android.support:support-v4:${v.supportVersion}&quot;</span>
compile <span class="token string">&quot;com.android.support:recyclerview-v7:${v.supportVersion}&quot;</span>
compile <span class="token string">&quot;com.android.support:design:${v.supportVersion}&quot;</span>
compile <span class="token string">&quot;com.android.support:support-annotations:${v.supportVersion}&quot;</span>

</code></pre></div><h2 id="sign-apk-without-exposing-keystore-password"><a href="#sign-apk-without-exposing-keystore-password" class="header-anchor">#</a> Sign APK without exposing keystore password</h2> <p>You can define the signing configuration to sign the apk in the <code>build.gradle</code> file
using these properties:</p> <ul><li><code>storeFile</code> : the keystore file</li> <li><code>storePassword</code>: the keystore password</li> <li><code>keyAlias</code>: a key alias name</li> <li><code>keyPassword</code>: A key alias password</li></ul> <p>In many case you may need to avoid this kind of info in the <code>build.gradle</code> file.</p> <h3 id="method-a-configure-release-signing-using-a-keystore-properties-file"><a href="#method-a-configure-release-signing-using-a-keystore-properties-file" class="header-anchor">#</a> Method A: Configure release signing using a keystore.properties file</h3> <p>It's possible to configure your app's <code>build.gradle</code> so that it will read your signing configuration information from a properties file like <code>keystore.properties</code>.</p> <p>Setting up signing like this is beneficial because:</p> <ul><li>Your signing configuration information is separate from your <code>build.gradle</code> file</li> <li>You do not have to intervene during the signing process in order to provide passwords for your keystore file</li> <li>You can easily exclude the <code>keystore.properties</code> file from version control</li></ul> <p>First, create a file called <code>keystore.properties</code> in the root of your project with content like this (replacing the values with your own):</p> <div class="language-java extra-class"><pre class="language-java"><code>storeFile<span class="token operator">=</span>keystore<span class="token punctuation">.</span>jks
storePassword<span class="token operator">=</span>storePassword
keyAlias<span class="token operator">=</span>keyAlias
keyPassword<span class="token operator">=</span>keyPassword


</code></pre></div><p>Now, in your app's <code>build.gradle</code> file, set up the <code>signingConfigs</code> block as follows:</p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    signingConfigs <span class="token punctuation">{</span>
        release <span class="token punctuation">{</span>
            def propsFile <span class="token operator">=</span> rootProject<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'keystore.properties'</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>propsFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                def props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                props<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>propsFile<span class="token punctuation">)</span><span class="token punctuation">)</span>
                storeFile <span class="token operator">=</span> <span class="token function">file</span><span class="token punctuation">(</span>props<span class="token punctuation">[</span><span class="token string">'storeFile'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                storePassword <span class="token operator">=</span> props<span class="token punctuation">[</span><span class="token string">'storePassword'</span><span class="token punctuation">]</span>
                keyAlias <span class="token operator">=</span> props<span class="token punctuation">[</span><span class="token string">'keyAlias'</span><span class="token punctuation">]</span>
                keyPassword <span class="token operator">=</span> props<span class="token punctuation">[</span><span class="token string">'keyPassword'</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>That's really all there is to it, <strong>but don't forget to exclude both your keystore file and your <code>keystore.properties</code> file from version control</strong>.</p> <p>A couple of things to note:</p> <ul><li>The <code>storeFile</code> path specified in the <code>keystore.properties</code> file should be relative to your app's <code>build.gradle</code> file. This example assumes that the keystore file is in the same directory as the app's <code>build.gradle</code> file.</li> <li>This example has the <code>keystore.properties</code> file in the root of the project. If you put it somewhere else, be sure to change the value in <code>rootProject.file('keystore.properties')</code> to the location of yours, relative to the root of your project.</li></ul> <h3 id="method-b-by-using-an-environment-variable"><a href="#method-b-by-using-an-environment-variable" class="header-anchor">#</a> Method B: By using an environment variable</h3> <p>The same can be achieved also without a properties file, making the password harder to find:</p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>

  signingConfigs <span class="token punctuation">{</span>
    release <span class="token punctuation">{</span>
        storeFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'/your/keystore/location/key'</span><span class="token punctuation">)</span>
        keyAlias <span class="token string">'your_alias'</span>
        <span class="token class-name">String</span> ps <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token string">&quot;ps&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ps <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">GradleException</span><span class="token punctuation">(</span><span class="token string">'missing ps env variable'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        keyPassword ps
        storePassword ps
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <code>&quot;ps&quot;</code> environment variable can be global, but a safer approach can be by adding it to the shell of Android Studio only.
<br>In linux this can be done by editing Android Studio's <code>Desktop Entry</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Exec</span><span class="token operator">=</span>sh <span class="token operator">-</span>c <span class="token string">&quot;export ps=myPassword123 ; /path/to/studio.sh&quot;</span>

</code></pre></div><p>You can find more details in <a href="http://stackoverflow.com/documentation/android-gradle/5249/configure-signing-settings#t=201608060810223146528" target="_blank" rel="noopener noreferrer">this topic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="adding-product-flavor-specific-dependencies"><a href="#adding-product-flavor-specific-dependencies" class="header-anchor">#</a> Adding product flavor-specific dependencies</h2> <p>Dependencies can be added for a specific <a href="http://stackoverflow.com/documentation/android-gradle/2929/configure-product-flavors#t=201609161745387396696" target="_blank" rel="noopener noreferrer">product flavor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, similar to how they can be added for specific build configurations.</p> <p>For this example, assume that we have already defined two product flavors called <code>free</code> and <code>paid</code> (more on defining <a href="http://stackoverflow.com/documentation/android-gradle/2929/configure-product-flavors/9932/how-to-configure-the-build-gradle-file#t=201609161746456086524" target="_blank" rel="noopener noreferrer">flavors here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>).<br>
We can then add the AdMob dependency for the <code>free</code> flavor, and the Picasso library for the <code>paid</code> one like so:</p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    productFlavors <span class="token punctuation">{</span>
        free <span class="token punctuation">{</span>
            applicationId <span class="token string">&quot;com.example.app.free&quot;</span>
            versionName <span class="token string">&quot;1.0-free&quot;</span>
        <span class="token punctuation">}</span>
        paid <span class="token punctuation">{</span>
            applicationId <span class="token string">&quot;com.example.app.paid&quot;</span>
            versionName <span class="token string">&quot;1.0-paid&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
dependencies <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// Add AdMob only for free flavor</span>
    freeCompile <span class="token string">'com.android.support:appcompat-v7:23.1.1'</span>
    freeCompile <span class="token string">'com.google.android.gms:play-services-ads:8.4.0'</span>
    freeCompile <span class="token string">'com.android.support:support-v4:23.1.1'</span>

    <span class="token comment">// Add picasso only for paid flavor</span>
    paidCompile <span class="token string">'com.squareup.picasso:picasso:2.5.2'</span>
<span class="token punctuation">}</span> 
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre></div><h2 id="specifying-different-application-ids-for-build-types-and-product-flavors"><a href="#specifying-different-application-ids-for-build-types-and-product-flavors" class="header-anchor">#</a> Specifying different application IDs for build types and product flavors</h2> <p>You can specify different application IDs or package names for each <code>buildType</code> or <a href="http://stackoverflow.com/documentation/android/95/gradle-for-android/401/defining-product-flavors#t=201608040613545973062" target="_blank" rel="noopener noreferrer"><code>productFlavor</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> using the <strong>applicationIdSuffix</strong> configuration attribute:</p> <p>Example of suffixing the <code>applicationId</code> for each <code>buildType</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code>defaultConfig <span class="token punctuation">{</span>
    applicationId <span class="token string">&quot;com.package.android&quot;</span>
    minSdkVersion <span class="token number">17</span>
    targetSdkVersion <span class="token number">23</span>
    versionCode <span class="token number">1</span>
    versionName <span class="token string">&quot;1.0&quot;</span>
<span class="token punctuation">}</span>

buildTypes <span class="token punctuation">{</span>
    release <span class="token punctuation">{</span>
        debuggable <span class="token boolean">false</span>      
    <span class="token punctuation">}</span>

    development <span class="token punctuation">{</span>
        debuggable <span class="token boolean">true</span>
        applicationIdSuffix <span class="token string">&quot;.dev&quot;</span>
    <span class="token punctuation">}</span>

    testing <span class="token punctuation">{</span>
        debuggable <span class="token boolean">true</span>
        applicationIdSuffix <span class="token string">&quot;.qa&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Our resulting <code>applicationIds</code> would now be:</p> <ul><li>com.package.android for <code>release</code></li> <li>com.package.android.<strong>dev</strong> for <code>development</code></li> <li>com.package.android.<strong>qa</strong> for <code>testing</code></li></ul> <p>This can be done for <code>productFlavors</code> as well:</p> <div class="language-java extra-class"><pre class="language-java"><code>productFlavors <span class="token punctuation">{</span>
    free <span class="token punctuation">{</span>
        applicationIdSuffix <span class="token string">&quot;.free&quot;</span>
    <span class="token punctuation">}</span>
    paid <span class="token punctuation">{</span>
        applicationIdSuffix <span class="token string">&quot;.paid&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The resulting <code>applicationIds</code> would be:</p> <ul><li>com.package.android.<strong>free</strong> for the <code>free</code> flavor</li> <li>com.package.android.<strong>paid</strong> for the <code>paid</code> flavor</li></ul> <h2 id="versioning-your-builds-via-version-properties-file"><a href="#versioning-your-builds-via-version-properties-file" class="header-anchor">#</a> Versioning your builds via &quot;version.properties&quot; file</h2> <p>You can use Gradle to auto-increment your package version each time you build it.  To do so create a <code>version.properties</code> file in the same directory as your <code>build.gradle</code> with the following contents:</p> <div class="language-java extra-class"><pre class="language-java"><code>VERSION_MAJOR<span class="token operator">=</span><span class="token number">0</span>
VERSION_MINOR<span class="token operator">=</span><span class="token number">1</span>
VERSION_BUILD<span class="token operator">=</span><span class="token number">1</span>

</code></pre></div><p>(Changing the values for major and minor as you see fit).  Then in your <code>build.gradle</code> add the following code to the <code>android</code> section:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Read version information from local file and increment as appropriate</span>
def versionPropsFile <span class="token operator">=</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'version.properties'</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>versionPropsFile<span class="token punctuation">.</span><span class="token function">canRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  def <span class="token class-name">Properties</span> versionProps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  versionProps<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>versionPropsFile<span class="token punctuation">)</span><span class="token punctuation">)</span>

  def versionMajor <span class="token operator">=</span> versionProps<span class="token punctuation">[</span><span class="token string">'VERSION_MAJOR'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  def versionMinor <span class="token operator">=</span> versionProps<span class="token punctuation">[</span><span class="token string">'VERSION_MINOR'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  def versionBuild <span class="token operator">=</span> versionProps<span class="token punctuation">[</span><span class="token string">'VERSION_BUILD'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>

  <span class="token comment">// Update the build number in the local file</span>
  versionProps<span class="token punctuation">[</span><span class="token string">'VERSION_BUILD'</span><span class="token punctuation">]</span> <span class="token operator">=</span> versionBuild<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  versionProps<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span>versionPropsFile<span class="token punctuation">.</span><span class="token function">newWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>

  defaultConfig <span class="token punctuation">{</span>
    versionCode versionBuild
    versionName <span class="token string">&quot;${versionMajor}.${versionMinor}.&quot;</span> <span class="token operator">+</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%05d&quot;</span><span class="token punctuation">,</span> versionBuild<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The information can be accessed in Java as a string <code>BuildConfig.VERSION_NAME</code> for the complete {major}.{minor}.{build} number and as an integer <code>BuildConfig.VERSION_CODE</code> for just the build number.</p> <h2 id="defining-product-flavors"><a href="#defining-product-flavors" class="header-anchor">#</a> Defining product flavors</h2> <p><a href="http://stackoverflow.com/documentation/android-gradle/2929/configure-product-flavors#t=201608060748315130296" target="_blank" rel="noopener noreferrer">Product flavors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> are defined in the <code>build.gradle</code> file inside the <code>android { ... }</code> block as seen below.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
android <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    productFlavors <span class="token punctuation">{</span>
        free <span class="token punctuation">{</span>
            applicationId <span class="token string">&quot;com.example.app.free&quot;</span>
            versionName <span class="token string">&quot;1.0-free&quot;</span>
        <span class="token punctuation">}</span>
        paid <span class="token punctuation">{</span>
            applicationId <span class="token string">&quot;com.example.app.paid&quot;</span>
            versionName <span class="token string">&quot;1.0-paid&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>By doing this, we now have two additional product flavors: <code>free</code> and <code>paid</code>. Each can have its own specific configuration and attributes. For example, both of our new flavors has a separate <code>applicationId</code> and <code>versionName</code> than our existing <code>main</code> flavor (available by default, so not shown here).</p> <h2 id="adding-product-flavor-specific-resources"><a href="#adding-product-flavor-specific-resources" class="header-anchor">#</a> Adding product flavor-specific resources</h2> <p>Resources can be added for a specific <a href="http://stackoverflow.com/documentation/android/95/gradle-for-android/401/defining-product-flavors#t=201608040613153911086" target="_blank" rel="noopener noreferrer">product flavor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>For this example, assume that we have already defined two product flavors called <code>free</code> and <code>paid</code>. In order to add product flavor-specific resources, we create additional resource folders alongside the <code>main/res</code> folder, which we can then add resources to like usual. For this example, we'll define a string, <code>status</code>, for each product flavor:</p> <p><strong>/src/<strong>main</strong>/res/values/strings.xml</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>resources<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">&quot;status&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Default</span><span class="token operator">&lt;</span><span class="token operator">/</span>string<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>resources<span class="token operator">&gt;</span>

</code></pre></div><p><strong>/src/<strong>free</strong>/res/values/strings.xml</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>resources<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">&quot;status&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Free</span><span class="token operator">&lt;</span><span class="token operator">/</span>string<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>resources<span class="token operator">&gt;</span>

</code></pre></div><p><strong>/src/<strong>paid</strong>/res/values/strings.xml</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>resources<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">&quot;status&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Paid</span><span class="token operator">&lt;</span><span class="token operator">/</span>string<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>resources<span class="token operator">&gt;</span>

</code></pre></div><p>The product flavor-specific <code>status</code> strings will override the value for <code>status</code> in the <code>main</code> flavor.</p> <h2 id="changing-output-apk-name-and-add-version-name"><a href="#changing-output-apk-name-and-add-version-name" class="header-anchor">#</a> Changing output apk name and add version name:</h2> <p>This is the code for changing output application file name (.apk). The name can be configured by assigning a different value to <code>newName</code></p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>

    applicationVariants<span class="token punctuation">.</span>all <span class="token punctuation">{</span> variant <span class="token operator">-&gt;</span>
        def newName <span class="token operator">=</span> <span class="token string">&quot;ApkName&quot;</span><span class="token punctuation">;</span>
        variant<span class="token punctuation">.</span>outputs<span class="token punctuation">.</span>each <span class="token punctuation">{</span> output <span class="token operator">-&gt;</span>
            def apk <span class="token operator">=</span> output<span class="token punctuation">.</span>outputFile<span class="token punctuation">;</span>

            newName <span class="token operator">+=</span> <span class="token string">&quot;-v&quot;</span> <span class="token operator">+</span> defaultConfig<span class="token punctuation">.</span>versionName<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>variant<span class="token punctuation">.</span>buildType<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">&quot;release&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                newName <span class="token operator">+=</span> <span class="token string">&quot;-release.apk&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                newName <span class="token operator">+=</span> <span class="token string">&quot;.apk&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>output<span class="token punctuation">.</span>zipAlign<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                newName <span class="token operator">=</span> newName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.apk&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-unaligned.apk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            output<span class="token punctuation">.</span>outputFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>apk<span class="token punctuation">.</span>parentFile<span class="token punctuation">,</span> newName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;INFO: Set outputFile to &quot;</span> 
                        <span class="token operator">+</span> output<span class="token punctuation">.</span>outputFile 
                        <span class="token operator">+</span> <span class="token string">&quot; for [&quot;</span> <span class="token operator">+</span> output<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="directory-structure-for-flavor-specific-resources"><a href="#directory-structure-for-flavor-specific-resources" class="header-anchor">#</a> Directory structure for flavor-specific resources</h2> <p>Different flavors of application builds can contain different resources.  To create a flavor-specific resource make a directory with the lower-case name of your flavor in the <code>src</code> directory and add your resources in the same way you would normally.</p> <p>For example, if you had a flavour <code>Development</code> and wanted to provide a distinct launcher icon for it you would create a directory <code>src/development/res/drawable-mdpi</code> and inside that directory create an <code>ic_launcher.png</code> file with your development-specific icon.</p> <p>The directory structure will look like this:</p> <div class="language-java extra-class"><pre class="language-java"><code>src<span class="token operator">/</span>
  main<span class="token operator">/</span>
    res<span class="token operator">/</span>
      drawable<span class="token operator">-</span>mdpi<span class="token operator">/</span>
        ic_launcher<span class="token punctuation">.</span>png  <span class="token operator">&lt;</span><span class="token operator">--</span> the <span class="token keyword">default</span> launcher icon
  development<span class="token operator">/</span>
    res<span class="token operator">/</span>
      drawable<span class="token operator">-</span>mdpi<span class="token operator">/</span>
        ic_launcher<span class="token punctuation">.</span>png  <span class="token operator">&lt;</span><span class="token operator">--</span> the launcher icon used when the product flavor is <span class="token string">'Development'</span>

</code></pre></div><p>(Of course, in this case you would also create icons for drawable-hdpi, drawable-xhdpi <strong>etc</strong>).</p> <h2 id="why-are-there-two-build-gradle-files-in-an-android-studio-project"><a href="#why-are-there-two-build-gradle-files-in-an-android-studio-project" class="header-anchor">#</a> Why are there two build.gradle files in an Android Studio project?</h2> <p><code>&lt;PROJECT_ROOT&gt;\app\build.gradle</code> is specific for <strong>app module</strong>.</p> <p><code>&lt;PROJECT_ROOT&gt;\build.gradle</code> is a <strong>&quot;Top-level build file&quot;</strong> where you can add configuration options common to all sub-projects/modules.</p> <p>If you use another module in your project, as a local library you would have another <code>build.gradle</code> file:
<code>&lt;PROJECT_ROOT&gt;\module\build.gradle</code></p> <p>In the top level file you can specify common properties as the buildscript block or some common properties.</p> <div class="language-java extra-class"><pre class="language-java"><code>buildscript <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    dependencies <span class="token punctuation">{</span>
       classpath <span class="token string">'com.android.tools.build:gradle:2.2.0'</span>
       classpath <span class="token string">'com.google.gms:google-services:3.0.0'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ext <span class="token punctuation">{</span>
    compileSdkVersion <span class="token operator">=</span> <span class="token number">23</span>
    buildToolsVersion <span class="token operator">=</span> <span class="token string">&quot;23.0.1&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>In the <code>app\build.gradle</code> you define only the properties for the module:</p> <div class="language-java extra-class"><pre class="language-java"><code>apply plugin<span class="token operator">:</span> <span class="token string">'com.android.application'</span>


android <span class="token punctuation">{</span>
    compileSdkVersion rootProject<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>compileSdkVersion
    buildToolsVersion rootProject<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>buildToolsVersion
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
    <span class="token comment">//.....</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="enable-proguard-using-gradle"><a href="#enable-proguard-using-gradle" class="header-anchor">#</a> Enable Proguard using gradle</h2> <p>For enabling Proguard configurations for your application you need to enable it in your module-level gradle file. You need to set the value of <code>minifyEnabled</code> to <code>true</code>.</p> <div class="language-java extra-class"><pre class="language-java"><code>buildTypes <span class="token punctuation">{</span>
        release <span class="token punctuation">{</span>
            minifyEnabled <span class="token boolean">true</span>
            proguardFiles <span class="token function">getDefaultProguardFile</span><span class="token punctuation">(</span><span class="token string">'proguard-android.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'proguard-rules.pro'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>The above code will apply your Proguard configurations contained in the default Android SDK combined with the &quot;proguard-rules.pro&quot; file on your module to your released apk.</p> <h2 id="enable-experimental-ndk-plugin-support-for-gradle-and-androidstudio"><a href="#enable-experimental-ndk-plugin-support-for-gradle-and-androidstudio" class="header-anchor">#</a> Enable experimental NDK plugin support for Gradle and AndroidStudio</h2> <p>Enable and configure the experimental Gradle plugin to improve AndroidStudio's NDK support. Check that you fulfill the following requirements:</p> <ul><li>Gradle 2.10 (for this example)</li> <li>Android NDK r10 or later</li> <li>Android SDK with build tools v19.0.0 or later</li></ul> <h3 id="configure-myapp-build-gradle-file"><a href="#configure-myapp-build-gradle-file" class="header-anchor">#</a> Configure MyApp/build.gradle file</h3> <p>Edit the dependencies.classpath line in build.gradle from e.g.</p> <div class="language-java extra-class"><pre class="language-java"><code>classpath <span class="token string">'com.android.tools.build:gradle:2.1.2'</span>

</code></pre></div><p>to</p> <div class="language-java extra-class"><pre class="language-java"><code>classpath <span class="token string">'com.android.tools.build:gradle-experimental:0.7.2'</span>

</code></pre></div><p>(v0.7.2 was the latest version at the time of writing. Check the latest version yourself and adapt your line accordingly)</p> <p>The build.gradle file should look similar to this:</p> <div class="language-java extra-class"><pre class="language-java"><code>buildscript <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        classpath <span class="token string">'com.android.tools.build:gradle-experimental:0.7.2'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

allprojects <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

task <span class="token function">clean</span><span class="token punctuation">(</span>type<span class="token operator">:</span> <span class="token class-name">Delete</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    delete rootProject<span class="token punctuation">.</span>buildDir
<span class="token punctuation">}</span>

</code></pre></div><h3 id="configure-myapp-app-build-gradle-file"><a href="#configure-myapp-app-build-gradle-file" class="header-anchor">#</a> Configure MyApp/app/build.gradle file</h3> <p>Edit the build.gradle file to look similar to the following example. Your version numbers may look different.</p> <div class="language-java extra-class"><pre class="language-java"><code>apply plugin<span class="token operator">:</span> <span class="token string">'com.android.model.application'</span>

model <span class="token punctuation">{</span>
    android <span class="token punctuation">{</span>
        compileSdkVersion <span class="token number">19</span>
        buildToolsVersion <span class="token string">&quot;24.0.1&quot;</span>

        defaultConfig <span class="token punctuation">{</span>
            applicationId <span class="token string">&quot;com.example.mydomain.myapp&quot;</span>
            minSdkVersion<span class="token punctuation">.</span>apiLevel <span class="token number">19</span>
            targetSdkVersion<span class="token punctuation">.</span>apiLevel <span class="token number">19</span>
            versionCode <span class="token number">1</span>
            versionName <span class="token string">&quot;1.0&quot;</span>
        <span class="token punctuation">}</span>
        buildTypes <span class="token punctuation">{</span>
            release <span class="token punctuation">{</span>
                minifyEnabled <span class="token boolean">false</span>
                proguardFiles<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'proguard-android.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        ndk <span class="token punctuation">{</span>
            moduleName <span class="token string">&quot;myLib&quot;</span>
            
            <span class="token comment">/* The following lines are examples of a some optional flags that 
               you may set to configure your build environment
            */</span> 
            cppFlags<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;-I${file(&quot;</span>path<span class="token operator">/</span><span class="token keyword">to</span><span class="token operator">/</span>my<span class="token operator">/</span>includes<span class="token operator">/</span>dir<span class="token string">&quot;)}&quot;</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            cppFlags<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;-std=c++11&quot;</span><span class="token punctuation">)</span>
            ldLibs<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'log'</span><span class="token punctuation">,</span> <span class="token string">'m'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            stl <span class="token operator">=</span> <span class="token string">&quot;c++_static&quot;</span>
            abiFilters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;armeabi-v7a&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
    compile <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token operator">:</span> <span class="token string">'libs'</span><span class="token punctuation">,</span> include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*.jar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Sync and check that there are no errors in the Gradle files before proceeding.</p> <h3 id="test-if-plugin-is-enabled"><a href="#test-if-plugin-is-enabled" class="header-anchor">#</a> Test if plugin is enabled</h3> <p>First make sure you have downloaded the Android NDK module. Then create an new app in AndroidStudio and add the following to the ActivityMain file:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">implements</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
    <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Pregenerated code. Not important here</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">loadLibrary</span><span class="token punctuation">(</span><span class="token string">&quot;myLib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">native</span> <span class="token class-name">String</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <code>getString()</code> part should be highlighted red saying that the corresponding JNI function could not be found. Hover your mouse over the function call until a red lightbulb appears. Click the bulb and select <code>create function JNI_...</code>. This should generate a myLib.c file in the myApp/app/src/main/jni directory with the correct JNI function call. It should look similar to this:</p> <div class="language-java extra-class"><pre class="language-java"><code>#include <span class="token generics"><span class="token punctuation">&lt;</span>jni<span class="token punctuation">.</span>h<span class="token punctuation">&gt;</span></span>

JNIEXPORT jstring JNICALL 
<span class="token class-name">Java_com_example_mydomain_myapp_MainActivity_getString</span><span class="token punctuation">(</span><span class="token class-name">JNIEnv</span> <span class="token operator">*</span>env<span class="token punctuation">,</span> jobject instance<span class="token punctuation">)</span>     
<span class="token punctuation">{</span>
    <span class="token comment">// TODO</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">*</span>env<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token class-name">NewStringUTF</span><span class="token punctuation">(</span>env<span class="token punctuation">,</span> returnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>If it doesn't look like this, then the plugin has not correctly been configured or the NDK has not been downloaded</p> <h2 id="ignoring-build-variant"><a href="#ignoring-build-variant" class="header-anchor">#</a> Ignoring build variant</h2> <p>For some reasons you may want to ignore your build variants. For example: you have 'mock' product flavour and you use it only for debug purposes, such as unit/instrumentation tests.</p> <p>Let's ignore <strong>mockRelease</strong> variant from our project. Open <strong>build.gradle</strong> file and write:</p> <div class="language- extra-class"><pre class="language-text"><code>
   // Remove mockRelease as it's not needed.
    android.variantFilter { variant -&gt;
        if (variant.buildType.name.equals('release') &amp;&amp; variant.getFlavors().get(0).name.equals('mock')) {
            variant.setIgnore(true);
        }
    }

</code></pre></div><h2 id="seeing-dependency-tree"><a href="#seeing-dependency-tree" class="header-anchor">#</a> Seeing dependency tree</h2> <p>Use the task dependencies. Depending on how your modules are set up, it may be either <code>./gradlew dependencies</code> or to see the dependencies of module app use <code>./gradlew :app:dependencies</code></p> <p>The example following build.gradle file</p> <div class="language-java extra-class"><pre class="language-java"><code>dependencies <span class="token punctuation">{</span>
    compile <span class="token string">'com.android.support:design:23.2.1'</span>
    compile <span class="token string">'com.android.support:cardview-v7:23.1.1'</span>

    compile <span class="token string">'com.google.android.gms:play-services:6.5.87'</span>
<span class="token punctuation">}</span>

</code></pre></div><p>will produce the following graph:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Parallel</span> execution is an incubating feature<span class="token punctuation">.</span>
<span class="token operator">:</span>app<span class="token operator">:</span>dependencies

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Project</span> <span class="token operator">:</span>app
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>
_releaseApk <span class="token operator">-</span> ## <span class="token class-name">Internal</span> use<span class="token punctuation">,</span> <span class="token keyword">do</span> not manually configure ##
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>design<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">|</span>    <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>v4<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">|</span>    <span class="token operator">|</span>    \<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>annotations<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">|</span>    <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>appcompat<span class="token operator">-</span>v7<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">|</span>    <span class="token operator">|</span>    <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>v4<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token operator">|</span>    <span class="token operator">|</span>    <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>animated<span class="token operator">-</span>vector<span class="token operator">-</span>drawable<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">|</span>    <span class="token operator">|</span>    <span class="token operator">|</span>    \<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>vector<span class="token operator">-</span>drawable<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">|</span>    <span class="token operator">|</span>    <span class="token operator">|</span>         \<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>v4<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token operator">|</span>    <span class="token operator">|</span>    \<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>vector<span class="token operator">-</span>drawable<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token operator">|</span>    \<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>recyclerview<span class="token operator">-</span>v7<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">|</span>         <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>v4<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token operator">|</span>         \<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>annotations<span class="token operator">:</span><span class="token number">23.2</span><span class="token number">.1</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>cardview<span class="token operator">-</span>v7<span class="token operator">:</span><span class="token number">23.1</span><span class="token number">.1</span>
\<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token operator">:</span>play<span class="token operator">-</span>services<span class="token operator">:</span><span class="token number">6.5</span><span class="token number">.87</span>
     \<span class="token operator">--</span><span class="token operator">-</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>support<span class="token operator">:</span>support<span class="token operator">-</span>v4<span class="token operator">:</span><span class="token number">21.0</span><span class="token number">.0</span> <span class="token operator">-&gt;</span> <span class="token number">23.2</span><span class="token number">.1</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>

</code></pre></div><p>Here you can see the project is directly including <code>com.android.support:design</code> version 23.2.1, which itself is bringing <code>com.android.support:support-v4</code> with version 23.2.1. However, <code>com.google.android.gms:play-services</code> itself has a dependency on the same <code>support-v4</code> but with an older version 21.0.0, which is a conflict detected by gradle.</p> <p><code>(*)</code> are used when gradle skips the subtree because those dependencies were already listed previously.</p> <h2 id="display-signing-information"><a href="#display-signing-information" class="header-anchor">#</a> Display signing information</h2> <p>In some circumstances (for example obtaining a Google API key) you need to find your keystore fingerprint. Gradle has a convenient task that display all the signing information, including keystore fingerprints:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">.</span>/gradlew signingReport

</code></pre></div><p>This is a sample output:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">:</span>app<span class="token operator">:</span>signingReport
<span class="token class-name">Variant</span><span class="token operator">:</span> release
<span class="token class-name">Config</span><span class="token operator">:</span> none
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Variant</span><span class="token operator">:</span> debug
<span class="token class-name">Config</span><span class="token operator">:</span> debug
<span class="token class-name">Store</span><span class="token operator">:</span> <span class="token operator">/</span><span class="token class-name">Users</span><span class="token operator">/</span>user<span class="token operator">/</span><span class="token punctuation">.</span>android<span class="token operator">/</span>debug<span class="token punctuation">.</span>keystore
<span class="token class-name">Alias</span><span class="token operator">:</span> <span class="token class-name">AndroidDebugKey</span>
MD5<span class="token operator">:</span> <span class="token number">25</span><span class="token operator">:</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">76</span><span class="token operator">:</span>A9<span class="token operator">:</span><span class="token number">7</span>C<span class="token operator">:</span><span class="token number">0</span>C<span class="token operator">:</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">99</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">7</span>B<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>AA<span class="token operator">:</span><span class="token number">1</span>E<span class="token operator">:</span><span class="token number">49</span><span class="token operator">:</span>CA
SHA1<span class="token operator">:</span> <span class="token number">26</span><span class="token operator">:</span>BE<span class="token operator">:</span><span class="token number">89</span><span class="token operator">:</span><span class="token number">58</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">8</span>C<span class="token operator">:</span><span class="token number">5</span>A<span class="token operator">:</span><span class="token number">7D</span><span class="token operator">:</span>A3<span class="token operator">:</span>A9<span class="token operator">:</span>D3<span class="token operator">:</span><span class="token number">60</span><span class="token operator">:</span><span class="token number">4</span>A<span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">7</span>A<span class="token operator">:</span><span class="token number">3D</span><span class="token operator">:</span><span class="token number">4</span>E<span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">55</span>
<span class="token class-name">Valid</span> until<span class="token operator">:</span> <span class="token class-name">Saturday</span> <span class="token number">18</span> <span class="token class-name">June</span> <span class="token number">2044</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Variant</span><span class="token operator">:</span> debugAndroidTest
<span class="token class-name">Config</span><span class="token operator">:</span> debug
<span class="token class-name">Store</span><span class="token operator">:</span> <span class="token operator">/</span><span class="token class-name">Users</span><span class="token operator">/</span>user<span class="token operator">/</span><span class="token punctuation">.</span>android<span class="token operator">/</span>debug<span class="token punctuation">.</span>keystore
<span class="token class-name">Alias</span><span class="token operator">:</span> <span class="token class-name">AndroidDebugKey</span>
MD5<span class="token operator">:</span> <span class="token number">25</span><span class="token operator">:</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">76</span><span class="token operator">:</span>A9<span class="token operator">:</span><span class="token number">7</span>C<span class="token operator">:</span><span class="token number">0</span>C<span class="token operator">:</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">99</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">7</span>B<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>AA<span class="token operator">:</span><span class="token number">1</span>E<span class="token operator">:</span><span class="token number">49</span><span class="token operator">:</span>CA
SHA1<span class="token operator">:</span> <span class="token number">26</span><span class="token operator">:</span>BE<span class="token operator">:</span><span class="token number">89</span><span class="token operator">:</span><span class="token number">58</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">8</span>C<span class="token operator">:</span><span class="token number">5</span>A<span class="token operator">:</span><span class="token number">7D</span><span class="token operator">:</span>A3<span class="token operator">:</span>A9<span class="token operator">:</span>D3<span class="token operator">:</span><span class="token number">60</span><span class="token operator">:</span><span class="token number">4</span>A<span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">7</span>A<span class="token operator">:</span><span class="token number">3D</span><span class="token operator">:</span><span class="token number">4</span>E<span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">55</span>
<span class="token class-name">Valid</span> until<span class="token operator">:</span> <span class="token class-name">Saturday</span> <span class="token number">18</span> <span class="token class-name">June</span> <span class="token number">2044</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Variant</span><span class="token operator">:</span> debugUnitTest
<span class="token class-name">Config</span><span class="token operator">:</span> debug
<span class="token class-name">Store</span><span class="token operator">:</span> <span class="token operator">/</span><span class="token class-name">Users</span><span class="token operator">/</span>user<span class="token operator">/</span><span class="token punctuation">.</span>android<span class="token operator">/</span>debug<span class="token punctuation">.</span>keystore
<span class="token class-name">Alias</span><span class="token operator">:</span> <span class="token class-name">AndroidDebugKey</span>
MD5<span class="token operator">:</span> <span class="token number">25</span><span class="token operator">:</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">76</span><span class="token operator">:</span>A9<span class="token operator">:</span><span class="token number">7</span>C<span class="token operator">:</span><span class="token number">0</span>C<span class="token operator">:</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">99</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">7</span>B<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>AA<span class="token operator">:</span><span class="token number">1</span>E<span class="token operator">:</span><span class="token number">49</span><span class="token operator">:</span>CA
SHA1<span class="token operator">:</span> <span class="token number">26</span><span class="token operator">:</span>BE<span class="token operator">:</span><span class="token number">89</span><span class="token operator">:</span><span class="token number">58</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">8</span>C<span class="token operator">:</span><span class="token number">5</span>A<span class="token operator">:</span><span class="token number">7D</span><span class="token operator">:</span>A3<span class="token operator">:</span>A9<span class="token operator">:</span>D3<span class="token operator">:</span><span class="token number">60</span><span class="token operator">:</span><span class="token number">4</span>A<span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">7</span>A<span class="token operator">:</span><span class="token number">3D</span><span class="token operator">:</span><span class="token number">4</span>E<span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">55</span>
<span class="token class-name">Valid</span> until<span class="token operator">:</span> <span class="token class-name">Saturday</span> <span class="token number">18</span> <span class="token class-name">June</span> <span class="token number">2044</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Variant</span><span class="token operator">:</span> releaseUnitTest
<span class="token class-name">Config</span><span class="token operator">:</span> none
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

</code></pre></div><h2 id="executing-a-shell-script-from-gradle"><a href="#executing-a-shell-script-from-gradle" class="header-anchor">#</a> Executing a shell script from gradle</h2> <p>A shell script is a very versatile way to extend your build to basically anything you can think of.</p> <p>As an exmaple, here is a simple script to compile protobuf files and add the result java files to the source directory for further compilation:</p> <div class="language-java extra-class"><pre class="language-java"><code>def <span class="token function">compilePb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    exec <span class="token punctuation">{</span>
        <span class="token comment">// NOTICE: gradle will fail if there's an error in the protoc file...</span>
        executable <span class="token string">&quot;../pbScript.sh&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

project<span class="token punctuation">.</span>afterEvaluate <span class="token punctuation">{</span>
    <span class="token function">compilePb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The 'pbScript.sh' shell script for this example, located in the project's root folder:</p> <div class="language-java extra-class"><pre class="language-java"><code>#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env bash
pp<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>myself<span class="token operator">/</span>my<span class="token operator">/</span>proto

<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>protoc <span class="token operator">-</span><span class="token class-name">I</span><span class="token operator">=</span>$pp \
 <span class="token operator">--</span>java_out<span class="token operator">=</span><span class="token punctuation">.</span>/src<span class="token operator">/</span>main<span class="token operator">/</span>java \
  <span class="token operator">--</span>proto_path<span class="token operator">=</span>$pp \
 $pp<span class="token operator">/</span>my<span class="token punctuation">.</span>proto \
 <span class="token operator">--</span>proto_path<span class="token operator">=</span>$pp \
 $pp<span class="token operator">/</span>my_other<span class="token punctuation">.</span>proto

</code></pre></div><h2 id="disable-image-compression-for-a-smaller-apk-file-size"><a href="#disable-image-compression-for-a-smaller-apk-file-size" class="header-anchor">#</a> Disable image compression for a smaller APK file size</h2> <p>If you are optimizing all images manually, disable APT Cruncher for a smaller APK file size.</p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>
    
    aaptOptions <span class="token punctuation">{</span>
        cruncherEnabled <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="show-all-gradle-project-tasks"><a href="#show-all-gradle-project-tasks" class="header-anchor">#</a> Show all gradle project tasks</h2> <div class="language-java extra-class"><pre class="language-java"><code>gradlew tasks <span class="token operator">--</span> show all tasks

 

<span class="token class-name">Android</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
androidDependencies <span class="token operator">-</span> <span class="token class-name">Displays</span> the <span class="token class-name">Android</span> dependencies of the project<span class="token punctuation">.</span>
signingReport <span class="token operator">-</span> <span class="token class-name">Displays</span> the signing info <span class="token keyword">for</span> each variant<span class="token punctuation">.</span>
sourceSets <span class="token operator">-</span> <span class="token class-name">Prints</span> out all the source sets defined in <span class="token keyword">this</span> project<span class="token punctuation">.</span>

<span class="token class-name">Build</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
assemble <span class="token operator">-</span> <span class="token class-name">Assembles</span> all variants of all applications and secondary packages<span class="token punctuation">.</span>
assembleAndroidTest <span class="token operator">-</span> <span class="token class-name">Assembles</span> all the <span class="token class-name">Test</span> applications<span class="token punctuation">.</span>
assembleDebug <span class="token operator">-</span> <span class="token class-name">Assembles</span> all <span class="token class-name">Debug</span> builds<span class="token punctuation">.</span>
assembleRelease <span class="token operator">-</span> <span class="token class-name">Assembles</span> all <span class="token class-name">Release</span> builds<span class="token punctuation">.</span>
build <span class="token operator">-</span> <span class="token class-name">Assembles</span> and tests <span class="token keyword">this</span> project<span class="token punctuation">.</span>
buildDependents <span class="token operator">-</span> <span class="token class-name">Assembles</span> and tests <span class="token keyword">this</span> project and all projects that depend on it<span class="token punctuation">.</span>
buildNeeded <span class="token operator">-</span> <span class="token class-name">Assembles</span> and tests <span class="token keyword">this</span> project and all projects it depends on<span class="token punctuation">.</span>
classes <span class="token operator">-</span> <span class="token class-name">Assembles</span> main classes<span class="token punctuation">.</span>
clean <span class="token operator">-</span> <span class="token class-name">Deletes</span> the build directory<span class="token punctuation">.</span>
compileDebugAndroidTestSources
compileDebugSources
compileDebugUnitTestSources
compileReleaseSources
compileReleaseUnitTestSources
extractDebugAnnotations <span class="token operator">-</span> <span class="token class-name">Extracts</span> <span class="token class-name">Android</span> annotations <span class="token keyword">for</span> the debug variant into the archive file
extractReleaseAnnotations <span class="token operator">-</span> <span class="token class-name">Extracts</span> <span class="token class-name">Android</span> annotations <span class="token keyword">for</span> the release variant into the archive file
jar <span class="token operator">-</span> <span class="token class-name">Assembles</span> a jar archive containing the main classes<span class="token punctuation">.</span>
mockableAndroidJar <span class="token operator">-</span> <span class="token class-name">Creates</span> a version of android<span class="token punctuation">.</span>jar that's suitable <span class="token keyword">for</span> unit tests<span class="token punctuation">.</span>
testClasses <span class="token operator">-</span> <span class="token class-name">Assembles</span> test classes<span class="token punctuation">.</span>

<span class="token class-name">Build</span> <span class="token class-name">Setup</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
init <span class="token operator">-</span> <span class="token class-name">Initializes</span> a <span class="token keyword">new</span> <span class="token class-name">Gradle</span> build<span class="token punctuation">.</span> <span class="token punctuation">[</span>incubating<span class="token punctuation">]</span>
wrapper <span class="token operator">-</span> <span class="token class-name">Generates</span> <span class="token class-name">Gradle</span> wrapper files<span class="token punctuation">.</span> <span class="token punctuation">[</span>incubating<span class="token punctuation">]</span>

<span class="token class-name">Documentation</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
javadoc <span class="token operator">-</span> <span class="token class-name">Generates</span> <span class="token class-name">Javadoc</span> API documentation <span class="token keyword">for</span> the main source code<span class="token punctuation">.</span>

<span class="token class-name">Help</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
buildEnvironment <span class="token operator">-</span> <span class="token class-name">Displays</span> all buildscript dependencies declared in root project <span class="token string">'LeitnerBoxPro'</span><span class="token punctuation">.</span>
components <span class="token operator">-</span> <span class="token class-name">Displays</span> the components produced by root project <span class="token string">'LeitnerBoxPro'</span><span class="token punctuation">.</span> <span class="token punctuation">[</span>incubating<span class="token punctuation">]</span>
dependencies <span class="token operator">-</span> <span class="token class-name">Displays</span> all dependencies declared in root project <span class="token string">'LeitnerBoxPro'</span><span class="token punctuation">.</span>
dependencyInsight <span class="token operator">-</span> <span class="token class-name">Displays</span> the insight into a specific dependency in root project <span class="token string">'LeitnerBoxPro'</span><span class="token punctuation">.</span>
help <span class="token operator">-</span> <span class="token class-name">Displays</span> a help message<span class="token punctuation">.</span>
model <span class="token operator">-</span> <span class="token class-name">Displays</span> the configuration model of root project <span class="token string">'LeitnerBoxPro'</span><span class="token punctuation">.</span> <span class="token punctuation">[</span>incubating<span class="token punctuation">]</span>
projects <span class="token operator">-</span> <span class="token class-name">Displays</span> the sub<span class="token operator">-</span>projects of root project <span class="token string">'LeitnerBoxPro'</span><span class="token punctuation">.</span>
properties <span class="token operator">-</span> <span class="token class-name">Displays</span> the properties of root project <span class="token string">'LeitnerBoxPro'</span><span class="token punctuation">.</span>
tasks <span class="token operator">-</span> <span class="token class-name">Displays</span> the tasks runnable from root project <span class="token string">'LeitnerBoxPro'</span> <span class="token punctuation">(</span>some of the displayed tasks may belong <span class="token keyword">to</span> subprojects<span class="token punctuation">)</span>
<span class="token punctuation">.</span>

<span class="token class-name">Install</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
installDebug <span class="token operator">-</span> <span class="token class-name">Installs</span> the <span class="token class-name">Debug</span> build<span class="token punctuation">.</span>
installDebugAndroidTest <span class="token operator">-</span> <span class="token class-name">Installs</span> the android <span class="token punctuation">(</span>on device<span class="token punctuation">)</span> tests <span class="token keyword">for</span> the <span class="token class-name">Debug</span> build<span class="token punctuation">.</span>
uninstallAll <span class="token operator">-</span> <span class="token class-name">Uninstall</span> all applications<span class="token punctuation">.</span>
uninstallDebug <span class="token operator">-</span> <span class="token class-name">Uninstalls</span> the <span class="token class-name">Debug</span> build<span class="token punctuation">.</span>
uninstallDebugAndroidTest <span class="token operator">-</span> <span class="token class-name">Uninstalls</span> the android <span class="token punctuation">(</span>on device<span class="token punctuation">)</span> tests <span class="token keyword">for</span> the <span class="token class-name">Debug</span> build<span class="token punctuation">.</span>
uninstallRelease <span class="token operator">-</span> <span class="token class-name">Uninstalls</span> the <span class="token class-name">Release</span> build<span class="token punctuation">.</span>

<span class="token class-name">Verification</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
check <span class="token operator">-</span> <span class="token class-name">Runs</span> all checks<span class="token punctuation">.</span>
connectedAndroidTest <span class="token operator">-</span> <span class="token class-name">Installs</span> and runs instrumentation tests <span class="token keyword">for</span> all flavors on connected devices<span class="token punctuation">.</span>
connectedCheck <span class="token operator">-</span> <span class="token class-name">Runs</span> all device checks on currently connected devices<span class="token punctuation">.</span>
connectedDebugAndroidTest <span class="token operator">-</span> <span class="token class-name">Installs</span> and runs the tests <span class="token keyword">for</span> debug on connected devices<span class="token punctuation">.</span>
deviceAndroidTest <span class="token operator">-</span> <span class="token class-name">Installs</span> and runs instrumentation tests using all <span class="token class-name">Device</span> <span class="token class-name">Providers</span><span class="token punctuation">.</span>
deviceCheck <span class="token operator">-</span> <span class="token class-name">Runs</span> all device checks using <span class="token class-name">Device</span> <span class="token class-name">Providers</span> and <span class="token class-name">Test</span> <span class="token class-name">Servers</span><span class="token punctuation">.</span>
lint <span class="token operator">-</span> <span class="token class-name">Runs</span> lint on all variants<span class="token punctuation">.</span>
lintDebug <span class="token operator">-</span> <span class="token class-name">Runs</span> lint on the <span class="token class-name">Debug</span> build<span class="token punctuation">.</span>
lintRelease <span class="token operator">-</span> <span class="token class-name">Runs</span> lint on the <span class="token class-name">Release</span> build<span class="token punctuation">.</span>
test <span class="token operator">-</span> <span class="token class-name">Run</span> unit tests <span class="token keyword">for</span> all variants<span class="token punctuation">.</span>
testDebugUnitTest <span class="token operator">-</span> <span class="token class-name">Run</span> unit tests <span class="token keyword">for</span> the debug build<span class="token punctuation">.</span>
testReleaseUnitTest <span class="token operator">-</span> <span class="token class-name">Run</span> unit tests <span class="token keyword">for</span> the release build<span class="token punctuation">.</span>

<span class="token class-name">Other</span> tasks
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
assembleDefault
clean
jarDebugClasses
jarReleaseClasses
transformResourcesWithMergeJavaResForDebugUnitTest
transformResourcesWithMergeJavaResForReleaseUnitTest

</code></pre></div><h2 id="delete-unaligned-apk-automatically"><a href="#delete-unaligned-apk-automatically" class="header-anchor">#</a> Delete &quot;unaligned&quot; apk automatically</h2> <p>If you don't need automatically generated apk files with <code>unaligned</code> suffix (which you probably don't), you may add the following code to <code>build.gradle</code> file:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// delete unaligned files</span>
android<span class="token punctuation">.</span>applicationVariants<span class="token punctuation">.</span>all <span class="token punctuation">{</span> variant <span class="token operator">-&gt;</span>
  variant<span class="token punctuation">.</span>assemble<span class="token punctuation">.</span>doLast <span class="token punctuation">{</span>
    variant<span class="token punctuation">.</span>outputs<span class="token punctuation">.</span>each <span class="token punctuation">{</span> output <span class="token operator">-&gt;</span>
        println <span class="token string">&quot;aligned &quot;</span> <span class="token operator">+</span> output<span class="token punctuation">.</span>outputFile
        println <span class="token string">&quot;unaligned &quot;</span> <span class="token operator">+</span> output<span class="token punctuation">.</span>packageApplication<span class="token punctuation">.</span>outputFile

        <span class="token class-name">File</span> unaligned <span class="token operator">=</span> output<span class="token punctuation">.</span>packageApplication<span class="token punctuation">.</span>outputFile<span class="token punctuation">;</span>
        <span class="token class-name">File</span> aligned <span class="token operator">=</span> output<span class="token punctuation">.</span>outputFile
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>unaligned<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>aligned<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            println <span class="token string">&quot;deleting &quot;</span> <span class="token operator">+</span> unaligned<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            unaligned<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>From <a href="http://stackoverflow.com/a/30826071/4378400" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <h2 id="debugging-your-gradle-errors"><a href="#debugging-your-gradle-errors" class="header-anchor">#</a> Debugging your Gradle errors</h2> <p>The following is an excerpt from <a href="http://stackoverflow.com/questions/36698816/gradle-what-is-a-non-zero-exit-value-and-how-do-i-fix-it" target="_blank" rel="noopener noreferrer">Gradle - What is a non-zero exit value and how do I fix it?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, see it for the full discussion.</p> <p>Let's say you are developing an application and you get some Gradle error that appears that generally will look like so.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">:</span><span class="token keyword">module</span><span class="token operator">:</span>someTask FAILED
FAILURE<span class="token operator">:</span> <span class="token class-name">Build</span> failed <span class="token keyword">with</span> an exception<span class="token punctuation">.</span>
<span class="token operator">*</span> <span class="token class-name">What</span> went wrong<span class="token operator">:</span>
<span class="token class-name">Execution</span> failed <span class="token keyword">for</span> task <span class="token string">':module:someTask'</span><span class="token punctuation">.</span>
<span class="token operator">&gt;</span> some message here<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  finished <span class="token keyword">with</span> non<span class="token operator">-</span>zero exit value <span class="token class-name">X</span>
<span class="token operator">*</span> <span class="token class-name">Try</span><span class="token operator">:</span>
<span class="token class-name">Run</span> <span class="token keyword">with</span> <span class="token operator">--</span>stacktrace option <span class="token keyword">to</span> get the stack trace<span class="token punctuation">.</span> <span class="token class-name">Run</span> <span class="token keyword">with</span> <span class="token operator">--</span>info or <span class="token operator">--</span>debug option <span class="token keyword">to</span> get more log output<span class="token punctuation">.</span>
BUILD FAILED
<span class="token class-name">Total</span> time<span class="token operator">:</span> <span class="token class-name">Y</span><span class="token punctuation">.</span>ZZ secs

</code></pre></div><p>You search here on StackOverflow for your problem, and people say to clean and rebuild your project, or enable <a href="http://developer.android.com/tools/building/multidex.html" target="_blank" rel="noopener noreferrer">MultiDex<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and when you try that, it just isn't fixing the problem.</p> <p><a href="http://stackoverflow.com/questions/21674091/how-to-add-stacktrace-or-debug-option-when-building-android-studio-project" target="_blank" rel="noopener noreferrer">There are ways to get more information<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, but the Gradle output itself should point at the actual error in the few lines above that message between :<code>module:someTask FAILED</code> and the last <code>:module:someOtherTask</code> that passed. Therefore, if you ask a question about your error, please edit your questions to include more context to the error.</p> <p>So, you get a &quot;non-zero exit value.&quot; Well, that number is a good indicator of what you should try to fix. Here are a few occur most frequently.</p> <ul><li><code>1</code> is a just a general error code and the error is likely in the Gradle output</li> <li><code>2</code> seems to be related to overlapping dependencies or project misconfiguration.</li> <li><code>3</code> seems to be from including too many dependencies, or a memory issue.</li></ul> <p>The general solutions for the above (after attempting a Clean and Rebuild of the project) are:</p> <ul><li><code>1</code> - Address the error that is mentioned. Generally, this is a compile-time error, meaning some piece of code in your project is not valid. This includes both XML and Java for an Android project.</li> <li><code>2</code> &amp; <code>3</code> - Many answers here tell you to enable <a href="http://developer.android.com/tools/building/multidex.html" target="_blank" rel="noopener noreferrer">multidex<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. While it may fix the problem, it is most likely a workaround. If you don't understand why you are using it (see the link), you probably don't need it. General solutions involve cutting back your overuse of library dependencies (such as all of Google Play Services, when you only need to use one library, like Maps or Sign-In, for example).</li></ul> <h2 id="use-gradle-properties-for-central-versionnumber-buildconfigurations"><a href="#use-gradle-properties-for-central-versionnumber-buildconfigurations" class="header-anchor">#</a> Use gradle.properties for central versionnumber/buildconfigurations</h2> <p>You can define central config info's in</p> <ul><li>a separate gradle include file <a href="http://stackoverflow.com/documentation/android/95/gradle-for-android/2911/centralizing-dependencies" target="_blank" rel="noopener noreferrer">Centralizing dependencies via &quot;dependencies.gradle&quot; file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>a stand alone properties file <a href="http://stackoverflow.com/documentation/android/95/gradle-for-android/7837/versioning-your-builds" target="_blank" rel="noopener noreferrer">Versioning your builds via &quot;version.properties&quot; file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>or do it with root <code>gradle.properties</code> file</p> <p>the project structure</p> <div class="language-java extra-class"><pre class="language-java"><code>root
  <span class="token operator">+</span><span class="token operator">-</span> module1<span class="token operator">/</span>
  <span class="token operator">|</span>     build<span class="token punctuation">.</span>gradle
  <span class="token operator">+</span><span class="token operator">-</span> module2<span class="token operator">/</span>
  <span class="token operator">|</span>     build<span class="token punctuation">.</span>gradle
  <span class="token operator">+</span><span class="token operator">-</span> build<span class="token punctuation">.</span>gradle
  <span class="token operator">+</span><span class="token operator">-</span> gradle<span class="token punctuation">.</span>properties

</code></pre></div><p>global setting for all submodules in gradle.properties</p> <div class="language-java extra-class"><pre class="language-java"><code># used <span class="token keyword">for</span> manifest
# todo increment <span class="token keyword">for</span> every release
appVersionCode<span class="token operator">=</span><span class="token number">19</span>
appVersionName<span class="token operator">=</span><span class="token number">0.5</span><span class="token number">.2</span><span class="token number">.160726</span>

# android tools settings
appCompileSdkVersion<span class="token operator">=</span><span class="token number">23</span>
appBuildToolsVersion<span class="token operator">=</span><span class="token number">23.0</span><span class="token number">.2</span>

</code></pre></div><p>usage in a submodule</p> <div class="language-java extra-class"><pre class="language-java"><code>apply plugin<span class="token operator">:</span> <span class="token string">'com.android.application'</span>
android <span class="token punctuation">{</span>
    <span class="token comment">// appXXX are defined in gradle.properties</span>
    compileSdkVersion <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>appCompileSdkVersion<span class="token punctuation">)</span>
    buildToolsVersion <span class="token operator">=</span> appBuildToolsVersion

    defaultConfig <span class="token punctuation">{</span>
        <span class="token comment">// appXXX are defined in gradle.properties</span>
        versionCode <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>appVersionCode<span class="token punctuation">)</span>
        versionName <span class="token operator">=</span> appVersionName
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>Note:</strong> If you want to publish your app in the F-Droid app store you have to use magic numbers in the gradle file because else f-droid robot cannot read current versionnumner to detect/verify version changes.</p> <h2 id="defining-build-types"><a href="#defining-build-types" class="header-anchor">#</a> Defining build types</h2> <p>You can create and configure <a href="http://stackoverflow.com/documentation/android-gradle/3281/configure-build-types#t=201608060748576379678" target="_blank" rel="noopener noreferrer">build types<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in the module-level <code>build.gradle</code> file inside the <code>android {}</code> block.</p> <h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <li>
`apply plugin`: The plugins which should been used normally just `'com.android.application'` or `'com.android.library'`.
</li> <li>
`android`: The main configuration of your app
<ul>
- `compileSdkVersion`: The compile SDK version
- `buildToolsVersion`: The build tools version
<li>`defaultConfig`: The default settings which can been overwritten by flavors and build types
<ul>
- `applicationId`: The application id you use e.g. in the PlayStore mostly the same as your package name
- `minSdkVersion`: The minimal required SDK version
- `targetSdkVersion`: The SDK version you compile against (should be always the newst one)
- `versionCode`: The internal version number which needs to be bigger on each update
- `versionName`: The version number the user can see in the app details page
<p><code>dependencies</code>: The maven or local dependencies of your app</p> <ul><li><code>compile</code> a single dependency</li> <li><code>testCompile</code>: a dependency for the unit or integration tests</li></ul> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p><strong>See also</strong></p> <ul><li><a href="http://gradle.org/" target="_blank" rel="noopener noreferrer">The official gradle homepage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://developer.android.com/tools/building/configuring-gradle.html" target="_blank" rel="noopener noreferrer">How to configure gradle builds<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://developer.android.com/tools/building/plugin-for-gradle.html" target="_blank" rel="noopener noreferrer">The android plugin for gradle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://google.github.io/android-gradle-dsl/current/" target="_blank" rel="noopener noreferrer">Android Gradle DSL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="gradle-for-android-extended-documentation"><a href="#gradle-for-android-extended-documentation" class="header-anchor">#</a> Gradle for Android - Extended documentation:</h3> <p>There is another tag where you can find more topics and examples about the use of gradle in Android.<br> <a href="http://stackoverflow.com/documentation/android-gradle/topics" target="_blank" rel="noopener noreferrer">http://stackoverflow.com/documentation/android-gradle/topics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></ul></li></ul></li></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/android/gradle-for-android.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/android/the-manifest-file.html" class="prev">
        The Manifest File
      </a></span> <span class="next"><a href="/android/fileio-with-android.html">
        FileIO with Android
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/197.c0ec185a.js" defer></script>
  </body>
</html>
