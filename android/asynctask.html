<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android - AsyncTask</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Basic Usage, Pass Activity as WeakReference to avoid memory leaks, Download Image using AsyncTask in Android, Canceling AsyncTask, AsyncTask: Serial Execution and Parallel Execution of Task, Publishing progress, Order of execution">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Android - AsyncTask">
    <meta property="og:description" content="Basic Usage, Pass Activity as WeakReference to avoid memory leaks, Download Image using AsyncTask in Android, Canceling AsyncTask, AsyncTask: Serial Execution and Parallel Execution of Task, Publishing progress, Order of execution">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/android/asynctask.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Android - AsyncTask">
    <meta name="twitter:description" content="Basic Usage, Pass Activity as WeakReference to avoid memory leaks, Download Image using AsyncTask in Android, Canceling AsyncTask, AsyncTask: Serial Execution and Parallel Execution of Task, Publishing progress, Order of execution">
    <meta name="twitter:url" content="/android/asynctask.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/108.f0b20e12.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Android</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/android/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/android/getting-started-with-android.html" class="sidebar-link">Getting started with Android</a></li><li><a href="/android/android-studio.html" class="sidebar-link">Android Studio</a></li><li><a href="/android/instant-run-in-android-studio.html" class="sidebar-link">Instant Run in Android Studio</a></li><li><a href="/android/textview.html" class="sidebar-link">TextView</a></li><li><a href="/android/autocompletetextview.html" class="sidebar-link">AutoCompleteTextView</a></li><li><a href="/android/autosizing-textviews.html" class="sidebar-link">Autosizing TextViews</a></li><li><a href="/android/listview.html" class="sidebar-link">ListView</a></li><li><a href="/android/layouts.html" class="sidebar-link">Layouts</a></li><li><a href="/android/constraintlayout.html" class="sidebar-link">ConstraintLayout</a></li><li><a href="/android/textinputlayout.html" class="sidebar-link">TextInputLayout</a></li><li><a href="/android/coordinatorlayout-and-behaviors.html" class="sidebar-link">CoordinatorLayout and Behaviors</a></li><li><a href="/android/tablayout.html" class="sidebar-link">TabLayout</a></li><li><a href="/android/viewpager.html" class="sidebar-link">ViewPager</a></li><li><a href="/android/cardview.html" class="sidebar-link">CardView</a></li><li><a href="/android/navigationview.html" class="sidebar-link">NavigationView</a></li><li><a href="/android/recyclerview.html" class="sidebar-link">RecyclerView</a></li><li><a href="/android/recyclerview-decorations.html" class="sidebar-link">RecyclerView Decorations</a></li><li><a href="/android/recyclerview-onclicklisteners.html" class="sidebar-link">RecyclerView onClickListeners</a></li><li><a href="/android/recyclerview-and-layoutmanagers.html" class="sidebar-link">RecyclerView and LayoutManagers</a></li><li><a href="/android/pagination-in-recyclerview.html" class="sidebar-link">Pagination in RecyclerView</a></li><li><a href="/android/imageview.html" class="sidebar-link">ImageView</a></li><li><a href="/android/videoview.html" class="sidebar-link">VideoView</a></li><li><a href="/android/optimized-videoview.html" class="sidebar-link">Optimized VideoView</a></li><li><a href="/android/webview.html" class="sidebar-link">WebView</a></li><li><a href="/android/searchview.html" class="sidebar-link">SearchView</a></li><li><a href="/android/bottomnavigationview.html" class="sidebar-link">BottomNavigationView</a></li><li><a href="/android/canvas-drawing-using-surfaceview.html" class="sidebar-link">Canvas drawing using SurfaceView</a></li><li><a href="/android/creating-custom-views.html" class="sidebar-link">Creating Custom Views</a></li><li><a href="/android/getting-calculated-view-dimensions.html" class="sidebar-link">Getting Calculated View Dimensions</a></li><li><a href="/android/adding-a-fuseview-to-an-android-project.html" class="sidebar-link">Adding a FuseView to an Android Project</a></li><li><a href="/android/supporting-screens-with-different-resolutions-sizes.html" class="sidebar-link">Supporting Screens With Different Resolutions, Sizes</a></li><li><a href="/android/viewflipper.html" class="sidebar-link">ViewFlipper</a></li><li><a href="/android/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/android/activity.html" class="sidebar-link">Activity</a></li><li><a href="/android/activity-recognition.html" class="sidebar-link">Activity Recognition</a></li><li><a href="/android/split-screen-multi-screen-activities.html" class="sidebar-link">Split Screen / Multi-Screen Activities</a></li><li><a href="/android/material-design.html" class="sidebar-link">Material Design</a></li><li><a href="/android/resources.html" class="sidebar-link">Resources</a></li><li><a href="/android/data-binding-library.html" class="sidebar-link">Data Binding Library</a></li><li><a href="/android/context.html" class="sidebar-link">Context</a></li><li><a href="/android/sharedpreferences.html" class="sidebar-link">SharedPreferences</a></li><li><a href="/android/intent.html" class="sidebar-link">Intent</a></li><li><a href="/android/fragments.html" class="sidebar-link">Fragments</a></li><li><a href="/android/button.html" class="sidebar-link">Button</a></li><li><a href="/android/emulator.html" class="sidebar-link">Emulator</a></li><li><a href="/android/service.html" class="sidebar-link">Service</a></li><li><a href="/android/the-manifest-file.html" class="sidebar-link">The Manifest File</a></li><li><a href="/android/gradle-for-android.html" class="sidebar-link">Gradle for Android</a></li><li><a href="/android/fileio-with-android.html" class="sidebar-link">FileIO with Android</a></li><li><a href="/android/fileprovider.html" class="sidebar-link">FileProvider</a></li><li><a href="/android/storing-files-in-internal-external-storage.html" class="sidebar-link">Storing Files in Internal &amp; External Storage</a></li><li><a href="/android/zip-file-in-android.html" class="sidebar-link">Zip file in android</a></li><li><a href="/android/unzip-file-in-android.html" class="sidebar-link">Unzip File in Android</a></li><li><a href="/android/camera-and-gallery.html" class="sidebar-link">Camera and Gallery</a></li><li><a href="/android/camera-2-api.html" class="sidebar-link">Camera 2 API</a></li><li><a href="/android/fingerprint-api-in-android.html" class="sidebar-link">Fingerprint API in android</a></li><li><a href="/android/bluetooth-and-bluetooth-le-api.html" class="sidebar-link">Bluetooth and Bluetooth LE API</a></li><li><a href="/android/runtime-permissions-in-api-23.html" class="sidebar-link">Runtime Permissions in API-23 +</a></li><li><a href="/android/android-places-api.html" class="sidebar-link">Android Places API</a></li><li><a href="/android/android-ndk.html" class="sidebar-link">Android NDK</a></li><li><a href="/android/daynight-theme-appcompat-v23-2-api-14.html" class="sidebar-link">DayNight Theme (AppCompat v23.2 / API 14+)</a></li><li><a href="/android/glide.html" class="sidebar-link">Glide</a></li><li><a href="/android/dialog.html" class="sidebar-link">Dialog</a></li><li><a href="/android/enhancing-alert-dialogs.html" class="sidebar-link">Enhancing Alert Dialogs</a></li><li><a href="/android/animated-alertdialog-box.html" class="sidebar-link">Animated AlertDialog Box</a></li><li><a href="/android/greendao.html" class="sidebar-link">GreenDAO</a></li><li><a href="/android/tools-attributes.html" class="sidebar-link">Tools Attributes</a></li><li><a href="/android/formatting-strings.html" class="sidebar-link">Formatting Strings</a></li><li><a href="/android/spannablestring.html" class="sidebar-link">SpannableString</a></li><li><a href="/android/notifications.html" class="sidebar-link">Notifications</a></li><li><a href="/android/alarmmanager.html" class="sidebar-link">AlarmManager</a></li><li><a href="/android/handler.html" class="sidebar-link">Handler</a></li><li><a href="/android/broadcastreceiver.html" class="sidebar-link">BroadcastReceiver</a></li><li><a href="/android/ui-lifecycle.html" class="sidebar-link">UI Lifecycle</a></li><li><a href="/android/httpurlconnection.html" class="sidebar-link">HttpURLConnection</a></li><li><a href="/android/callback-url.html" class="sidebar-link">Callback URL</a></li><li><a href="/android/snackbar.html" class="sidebar-link">Snackbar</a></li><li><a href="/android/widgets.html" class="sidebar-link">Widgets</a></li><li><a href="/android/toast.html" class="sidebar-link">Toast</a></li><li><a href="/android/create-singleton-class-for-toast-message.html" class="sidebar-link">Create Singleton Class for Toast Message</a></li><li><a href="/android/interfaces.html" class="sidebar-link">Interfaces</a></li><li><a href="/android/animators.html" class="sidebar-link">Animators</a></li><li><a href="/android/location.html" class="sidebar-link">Location</a></li><li><a href="/android/theme-style-attribute.html" class="sidebar-link">Theme, Style, Attribute</a></li><li><a href="/android/mediaplayer.html" class="sidebar-link">MediaPlayer</a></li><li><a href="/android/android-sound-and-media.html" class="sidebar-link">Android Sound and Media</a></li><li><a href="/android/mediasession.html" class="sidebar-link">MediaSession</a></li><li><a href="/android/mediastore.html" class="sidebar-link">MediaStore</a></li><li><a href="/android/multidex-and-the-dex-method-limit.html" class="sidebar-link">Multidex and the Dex Method Limit</a></li><li><a href="/android/data-synchronization-with-sync-adapter.html" class="sidebar-link">Data Synchronization with Sync Adapter</a></li><li><a href="/android/porterduff-mode.html" class="sidebar-link">PorterDuff Mode</a></li><li><a href="/android/menu.html" class="sidebar-link">Menu</a></li><li><a href="/android/picasso.html" class="sidebar-link">Picasso</a></li><li><a href="/android/roboguice.html" class="sidebar-link">RoboGuice</a></li><li><a href="/android/acra.html" class="sidebar-link">ACRA</a></li><li><a href="/android/parcelable.html" class="sidebar-link">Parcelable</a></li><li><a href="/android/retrofit2.html" class="sidebar-link">Retrofit2</a></li><li><a href="/android/butterknife.html" class="sidebar-link">ButterKnife</a></li><li><a href="/android/volley.html" class="sidebar-link">Volley</a></li><li><a href="/android/date-and-time-pickers.html" class="sidebar-link">Date and Time Pickers</a></li><li><a href="/android/localized-date-time-in-android.html" class="sidebar-link">Localized Date/Time in Android</a></li><li><a href="/android/time-utils.html" class="sidebar-link">Time Utils</a></li><li><a href="/android/in-app-billing.html" class="sidebar-link">In-app Billing</a></li><li><a href="/android/floatingactionbutton.html" class="sidebar-link">FloatingActionButton</a></li><li><a href="/android/touch-events.html" class="sidebar-link">Touch Events</a></li><li><a href="/android/handling-touch-and-motion-events.html" class="sidebar-link">Handling touch and motion events</a></li><li><a href="/android/detect-shake-event-in-android.html" class="sidebar-link">Detect Shake Event in Android</a></li><li><a href="/android/hardware-button-events-intents-ptt-lwp-etc.html" class="sidebar-link">Hardware Button Events/Intents (PTT, LWP, etc.)</a></li><li><a href="/android/greenrobot-eventbus.html" class="sidebar-link">GreenRobot EventBus</a></li><li><a href="/android/otto-event-bus.html" class="sidebar-link">Otto Event Bus</a></li><li><a href="/android/vibration.html" class="sidebar-link">Vibration</a></li><li><a href="/android/contentprovider.html" class="sidebar-link">ContentProvider</a></li><li><a href="/android/dagger-2.html" class="sidebar-link">Dagger 2</a></li><li><a href="/android/realm.html" class="sidebar-link">Realm</a></li><li><a href="/android/android-versions.html" class="sidebar-link">Android Versions</a></li><li><a href="/android/wi-fi-connections.html" class="sidebar-link">Wi-Fi Connections</a></li><li><a href="/android/sensormanager.html" class="sidebar-link">SensorManager</a></li><li><a href="/android/progressbar.html" class="sidebar-link">ProgressBar</a></li><li><a href="/android/custom-fonts.html" class="sidebar-link">Custom Fonts</a></li><li><a href="/android/getting-system-font-names-and-using-the-fonts.html" class="sidebar-link">Getting system font names and using the fonts</a></li><li><a href="/android/text-to-speech-tts.html" class="sidebar-link">Text to Speech(TTS)</a></li><li><a href="/android/spinner.html" class="sidebar-link">Spinner</a></li><li><a href="/android/data-encryption-decryption.html" class="sidebar-link">Data Encryption/Decryption</a></li><li><a href="/android/okhttp.html" class="sidebar-link">OkHttp</a></li><li><a href="/android/handling-deep-links.html" class="sidebar-link">Handling Deep Links</a></li><li><a href="/android/crash-reporting-tools.html" class="sidebar-link">Crash Reporting Tools</a></li><li><a href="/android/check-internet-connectivity.html" class="sidebar-link">Check Internet Connectivity</a></li><li><a href="/android/creating-your-own-libraries-for-android-applications.html" class="sidebar-link">Creating your own libraries for Android applications</a></li><li><a href="/android/device-display-metrics.html" class="sidebar-link">Device Display Metrics</a></li><li><a href="/android/building-backwards-compatible-apps.html" class="sidebar-link">Building Backwards Compatible Apps</a></li><li><a href="/android/loader.html" class="sidebar-link">Loader</a></li><li><a href="/android/proguard-obfuscating-and-shrinking-your-code.html" class="sidebar-link">ProGuard - Obfuscating and Shrinking your code</a></li><li><a href="/android/typedef-annotations-intdef-stringdef.html" class="sidebar-link">Typedef Annotations: @IntDef, @StringDef</a></li><li><a href="/android/capturing-screenshots.html" class="sidebar-link">Capturing Screenshots</a></li><li><a href="/android/mvp-architecture.html" class="sidebar-link">MVP Architecture</a></li><li><a href="/android/orientation-changes.html" class="sidebar-link">Orientation Changes</a></li><li><a href="/android/xposed.html" class="sidebar-link">Xposed</a></li><li><a href="/android/packagemanager.html" class="sidebar-link">PackageManager</a></li><li><a href="/android/gesture-detection.html" class="sidebar-link">Gesture Detection</a></li><li><a href="/android/doze-mode.html" class="sidebar-link">Doze Mode</a></li><li><a href="/android/colors.html" class="sidebar-link">Colors</a></li><li><a href="/android/keyboard.html" class="sidebar-link">Keyboard</a></li><li><a href="/android/renderscript.html" class="sidebar-link">RenderScript</a></li><li><a href="/android/fresco.html" class="sidebar-link">Fresco</a></li><li><a href="/android/swipe-to-refresh.html" class="sidebar-link">Swipe to Refresh</a></li><li><a href="/android/creating-splash-screen.html" class="sidebar-link">Creating Splash screen</a></li><li><a href="/android/intentservice.html" class="sidebar-link">IntentService</a></li><li><a href="/android/implicit-intents.html" class="sidebar-link">Implicit Intents</a></li><li><a href="/android/publish-to-play-store.html" class="sidebar-link">Publish to Play Store</a></li><li><a href="/android/universal-image-loader.html" class="sidebar-link">Universal Image Loader</a></li><li><a href="/android/image-compression.html" class="sidebar-link">Image Compression</a></li><li><a href="/android/9-patch-images.html" class="sidebar-link">9-Patch Images</a></li><li><a href="/android/email-validation.html" class="sidebar-link">Email Validation</a></li><li><a href="/android/bottom-sheets.html" class="sidebar-link">Bottom Sheets</a></li><li><a href="/android/edittext.html" class="sidebar-link">EditText</a></li><li><a href="/android/speech-to-text-conversion.html" class="sidebar-link">Speech to Text Conversion</a></li><li><a href="/android/installing-apps-with-adb.html" class="sidebar-link">Installing apps with ADB</a></li><li><a href="/android/count-down-timer.html" class="sidebar-link">Count Down Timer</a></li><li><a href="/android/barcode-and-qr-code-reading.html" class="sidebar-link">Barcode and QR code reading</a></li><li><a href="/android/android-paypal-gateway-integration.html" class="sidebar-link">Android Paypal Gateway Integration</a></li><li><a href="/android/drawables.html" class="sidebar-link">Drawables</a></li><li><a href="/android/transitiondrawable.html" class="sidebar-link">TransitionDrawable</a></li><li><a href="/android/vector-drawables.html" class="sidebar-link">Vector Drawables</a></li><li><a href="/android/vectordrawable-and-animatedvectordrawable.html" class="sidebar-link">VectorDrawable and AnimatedVectorDrawable</a></li><li><a href="/android/port-mapping-using-cling-library-in-android.html" class="sidebar-link">Port Mapping using Cling library in Android</a></li><li><a href="/android/creating-overlay-always-on-top-windows.html" class="sidebar-link">Creating Overlay (always-on-top) Windows</a></li><li><a href="/android/exoplayer.html" class="sidebar-link">ExoPlayer</a></li><li><a href="/android/xmpp-register-login-and-chat-simple-example.html" class="sidebar-link">XMPP register login and chat simple example</a></li><li><a href="/android/android-authenticator.html" class="sidebar-link">Android Authenticator</a></li><li><a href="/android/audiomanager.html" class="sidebar-link">AudioManager</a></li><li><a href="/android/audiotrack.html" class="sidebar-link">AudioTrack</a></li><li><a href="/android/job-scheduling.html" class="sidebar-link">Job Scheduling</a></li><li><a href="/android/accounts-and-accountmanager.html" class="sidebar-link">Accounts and AccountManager</a></li><li><a href="/android/integrate-opencv-into-android-studio.html" class="sidebar-link">Integrate OpenCV into Android Studio</a></li><li><a href="/android/mvvm-architecture.html" class="sidebar-link">MVVM (Architecture)</a></li><li><a href="/android/ormlite-in-android.html" class="sidebar-link">ORMLite in android</a></li><li><a href="/android/retrofit2-with-rxjava.html" class="sidebar-link">Retrofit2 with RxJava</a></li><li><a href="/android/shortcutmanager.html" class="sidebar-link">ShortcutManager</a></li><li><a href="/android/lrucache.html" class="sidebar-link">LruCache</a></li><li><a href="/android/jenkins-ci-setup-for-android-projects.html" class="sidebar-link">Jenkins CI setup for Android Projects</a></li><li><a href="/android/fastlane.html" class="sidebar-link">fastlane</a></li><li><a href="/android/define-step-value-increment-for-custom-rangeseekbar.html" class="sidebar-link">Define step value (increment) for custom RangeSeekBar</a></li><li><a href="/android/getting-started-with-opengl-es-2-0.html" class="sidebar-link">Getting started with OpenGL ES 2.0+</a></li><li><a href="/android/check-data-connection.html" class="sidebar-link">Check Data Connection</a></li><li><a href="/android/java-on-android.html" class="sidebar-link">Java on Android</a></li><li><a href="/android/android-java-native-interface-jni.html" class="sidebar-link">Android Java Native Interface (JNI)</a></li><li><a href="/android/notification-channel-android-o.html" class="sidebar-link">Notification Channel Android O</a></li><li><a href="/android/robolectric.html" class="sidebar-link">Robolectric</a></li><li><a href="/android/moshi.html" class="sidebar-link">Moshi</a></li><li><a href="/android/strict-mode-policy-a-tool-to-catch-the-bug-in-the-compile-time.html" class="sidebar-link">Strict Mode Policy : A tool to catch the bug in the Compile Time.</a></li><li><a href="/android/internationalization-and-localization-i18n-and-l10n.html" class="sidebar-link">Internationalization and localization (I18N and L10N)</a></li><li><a href="/android/fast-way-to-setup-retrolambda-on-an-android-project.html" class="sidebar-link">Fast way to setup Retrolambda on an android project.</a></li><li><a href="/android/how-to-use-sparsearray.html" class="sidebar-link">How to use SparseArray</a></li><li><a href="/android/shared-element-transitions.html" class="sidebar-link">Shared Element Transitions</a></li><li><a href="/android/android-things.html" class="sidebar-link">Android Things</a></li><li><a href="/android/library-dagger-2-dependency-injection-in-applications.html" class="sidebar-link">Library Dagger 2: Dependency Injection in Applications</a></li><li><a href="/android/jcodec.html" class="sidebar-link">JCodec</a></li><li><a href="/android/formatting-phone-numbers-with-pattern.html" class="sidebar-link">Formatting phone numbers with pattern.</a></li><li><a href="/android/paint.html" class="sidebar-link">Paint</a></li><li><a href="/android/what-is-proguard-what-is-use-in-android.html" class="sidebar-link">What is ProGuard? What is use in Android?</a></li><li><a href="/android/create-android-custom-roms.html" class="sidebar-link">Create Android Custom ROMs</a></li><li><a href="/android/genymotion-for-android.html" class="sidebar-link">Genymotion for android</a></li><li><a href="/android/constraintset.html" class="sidebar-link">ConstraintSet</a></li><li><a href="/android/clevertap.html" class="sidebar-link">CleverTap</a></li><li><a href="/android/publish-a-library-to-maven-repositories.html" class="sidebar-link">Publish a library to Maven Repositories</a></li><li><a href="/android/adb-shell.html" class="sidebar-link">adb shell</a></li><li><a href="/android/ping-icmp.html" class="sidebar-link">Ping ICMP</a></li><li><a href="/android/aidl.html" class="sidebar-link">AIDL</a></li><li><a href="/android/android-game-development.html" class="sidebar-link">Android game development</a></li><li><a href="/android/android-programming-with-kotlin.html" class="sidebar-link">Android programming with Kotlin</a></li><li><a href="/android/android-x86-in-virtualbox.html" class="sidebar-link">Android-x86 in VirtualBox</a></li><li><a href="/android/leakcanary.html" class="sidebar-link">Leakcanary</a></li><li><a href="/android/okio.html" class="sidebar-link">Okio</a></li><li><a href="/android/bluetooth-low-energy.html" class="sidebar-link">Bluetooth Low Energy</a></li><li><a href="/android/looper.html" class="sidebar-link">Looper</a></li><li><a href="/android/annotation-processor.html" class="sidebar-link">Annotation Processor</a></li><li><a href="/android/syncadapter-with-periodically-do-sync-of-data.html" class="sidebar-link">SyncAdapter with periodically do sync of data</a></li><li><a href="/android/fastjson.html" class="sidebar-link">Fastjson</a></li><li><a href="/android/json-in-android-with-org-json.html" class="sidebar-link">JSON in Android with org.json</a></li><li><a href="/android/gson.html" class="sidebar-link">Gson</a></li><li><a href="/android/android-architecture-components.html" class="sidebar-link">Android Architecture Components</a></li><li><a href="/android/jackson.html" class="sidebar-link">Jackson</a></li><li><a href="/android/smartcard.html" class="sidebar-link">Smartcard</a></li><li><a href="/android/security.html" class="sidebar-link">Security</a></li><li><a href="/android/how-to-store-passwords-securely.html" class="sidebar-link">How to store passwords securely</a></li><li><a href="/android/secure-sharedpreferences.html" class="sidebar-link">Secure SharedPreferences</a></li><li><a href="/android/secure-sharedpreferences.html" class="sidebar-link">Secure SharedPreferences</a></li><li><a href="/android/sqlite.html" class="sidebar-link">SQLite</a></li><li><a href="/android/accessing-sqlite-databases-using-the-contentvalues-class.html" class="sidebar-link">Accessing SQLite databases using the ContentValues class</a></li><li><a href="/android/firebase.html" class="sidebar-link">Firebase</a></li><li><a href="/android/firebase-cloud-messaging.html" class="sidebar-link">Firebase Cloud Messaging</a></li><li><a href="/android/firebase-realtime-database.html" class="sidebar-link">Firebase Realtime DataBase</a></li><li><a href="/android/firebase-app-indexing.html" class="sidebar-link">Firebase App Indexing</a></li><li><a href="/android/firebase-crash-reporting.html" class="sidebar-link">Firebase Crash Reporting</a></li><li><a href="/android/twitter-apis.html" class="sidebar-link">Twitter APIs</a></li><li><a href="/android/youtube-api.html" class="sidebar-link">Youtube-API</a></li><li><a href="/android/integrate-google-sign-in.html" class="sidebar-link">Integrate Google Sign In</a></li><li><a href="/android/google-signin-integration-on-android.html" class="sidebar-link">Google signin integration on android</a></li><li><a href="/android/google-awareness-apis.html" class="sidebar-link">Google Awareness APIs</a></li><li><a href="/android/google-maps-api-v2-for-android.html" class="sidebar-link">Google Maps API v2 for Android</a></li><li><a href="/android/google-drive-api.html" class="sidebar-link">Google Drive API</a></li><li><a href="/android/displaying-google-ads.html" class="sidebar-link">Displaying Google Ads</a></li><li><a href="/android/admob.html" class="sidebar-link">AdMob</a></li><li><a href="/android/google-play-store.html" class="sidebar-link">Google Play Store</a></li><li><a href="/android/sign-your-android-app-for-release.html" class="sidebar-link">Sign your Android App for Release</a></li><li><a href="/android/tensorflow.html" class="sidebar-link">TensorFlow</a></li><li><a href="/android/android-vk-sdk.html" class="sidebar-link">Android Vk Sdk</a></li><li><a href="/android/project-sdk-versions.html" class="sidebar-link">Project SDK versions</a></li><li><a href="/android/facebook-sdk-for-android.html" class="sidebar-link">Facebook SDK for Android</a></li><li><a href="/android/thread.html" class="sidebar-link">Thread</a></li><li><a href="/android/asynctask.html" aria-current="page" class="active sidebar-link">AsyncTask</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/android/asynctask.html#basic-usage" class="sidebar-link">Basic Usage</a></li><li class="sidebar-sub-header"><a href="/android/asynctask.html#pass-activity-as-weakreference-to-avoid-memory-leaks" class="sidebar-link">Pass Activity as WeakReference to avoid memory leaks</a></li><li class="sidebar-sub-header"><a href="/android/asynctask.html#download-image-using-asynctask-in-android" class="sidebar-link">Download Image using AsyncTask in Android</a></li><li class="sidebar-sub-header"><a href="/android/asynctask.html#canceling-asynctask" class="sidebar-link">Canceling AsyncTask</a></li><li class="sidebar-sub-header"><a href="/android/asynctask.html#asynctask-serial-execution-and-parallel-execution-of-task" class="sidebar-link">AsyncTask: Serial Execution and Parallel Execution of Task</a></li><li class="sidebar-sub-header"><a href="/android/asynctask.html#publishing-progress" class="sidebar-link">Publishing progress</a></li><li class="sidebar-sub-header"><a href="/android/asynctask.html#order-of-execution" class="sidebar-link">Order of execution</a></li></ul></li><li><a href="/android/testing-ui-with-espresso.html" class="sidebar-link">Testing UI with Espresso</a></li><li><a href="/android/writing-ui-tests-android.html" class="sidebar-link">Writing UI tests - Android</a></li><li><a href="/android/unit-testing-in-android-with-junit.html" class="sidebar-link">Unit testing in Android with JUnit</a></li><li><a href="/android/inter-app-ui-testing-with-uiautomator.html" class="sidebar-link">Inter-app UI testing with UIAutomator</a></li><li><a href="/android/lint-warnings.html" class="sidebar-link">Lint Warnings</a></li><li><a href="/android/performance-optimization.html" class="sidebar-link">Performance Optimization</a></li><li><a href="/android/android-kernel-optimization.html" class="sidebar-link">Android Kernel Optimization</a></li><li><a href="/android/memory-leaks.html" class="sidebar-link">Memory Leaks</a></li><li><a href="/android/enhancing-android-performance-using-icon-fonts.html" class="sidebar-link">Enhancing Android Performance Using Icon Fonts</a></li><li><a href="/android/bitmap-cache.html" class="sidebar-link">Bitmap Cache</a></li><li><a href="/android/loading-bitmaps-effectively.html" class="sidebar-link">Loading Bitmaps Effectively</a></li><li><a href="/android/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/android/logging-and-using-logcat.html" class="sidebar-link">Logging and using Logcat</a></li><li><a href="/android/adb-android-debug-bridge.html" class="sidebar-link">ADB (Android Debug Bridge)</a></li><li><a href="/android/localization-with-resources-in-android.html" class="sidebar-link">Localization with resources in Android</a></li><li><a href="/android/convert-vietnamese-string-to-english-string-android.html" class="sidebar-link">Convert vietnamese string to english string Android</a></li><li><a href="/android/publish-aar-file-to-apache-archiva-with-gradle.html" class="sidebar-link">Publish .aar file to Apache Archiva with Gradle</a></li><li><a href="/android/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="asynctask"><a href="#asynctask" class="header-anchor">#</a> AsyncTask</h1> <h2 id="basic-usage"><a href="#basic-usage" class="header-anchor">#</a> Basic Usage</h2> <p>In Android <a href="https://developer.android.com/reference/android/app/Activity.html" target="_blank" rel="noopener noreferrer">Activities<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://developer.android.com/reference/android/app/Service.html" target="_blank" rel="noopener noreferrer">Services<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, most callbacks are run on the <a href="https://developer.android.com/guide/components/processes-and-threads.html#Threads" target="_blank" rel="noopener noreferrer">main thread<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This makes it simple to update the UI, but running processor- or I/O-heavy tasks on the main thread can cause your UI to pause and become unresponsive (<a href="https://developer.android.com/training/articles/perf-anr.html" target="_blank" rel="noopener noreferrer">official documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on what then happens).</p> <p>You can remedy this by putting these heavier tasks on a background thread.</p> <p>One way to do this is using an <a href="https://developer.android.com/reference/android/os/AsyncTask.html" target="_blank" rel="noopener noreferrer">AsyncTask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which provides a framework to facilitate easy usage of a background Thread, and also perform UI Thread tasks before, during, and after the background Thread has completed its work.</p> <p><strong>Methods that can be overridden when extending <code>AsyncTask</code>:</strong></p> <ul><li><code>onPreExecute()</code> : invoked on the <strong>UI thread</strong> before the task is executed</li> <li><code>doInBackground()</code>: invoked on <strong>the background thread</strong> immediately after <code>onPreExecute()</code> finishes executing.</li> <li><code>onProgressUpdate()</code>:  invoked on the <strong>UI thread</strong> after a call to <code>publishProgress(Progress...)</code>.</li> <li><code>onPostExecute()</code>: invoked on the <strong>UI thread</strong> after the background computation finishes</li></ul> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCustomAsyncTask</span> <span class="token keyword">extends</span> <span class="token class-name">AsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">File</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPreExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// This runs on the UI thread before the background thread executes.</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPreExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Do pre-thread tasks such as initializing variables. </span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;myBackgroundTask&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Starting Background Task&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> <span class="token function">doInBackground</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Disk-intensive work. This runs on a background thread.</span>
        <span class="token comment">// Search through a file for the first line that contains &quot;Hello&quot;, and return</span>
        <span class="token comment">// that line.</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">hasNextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">final</span> <span class="token class-name">String</span> line <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">publishProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// tell the UI thread we made progress</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> line<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onProgressUpdate</span><span class="token punctuation">(</span><span class="token class-name">Void</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Runs on the UI thread after publishProgress is invoked</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">&quot;Read another line!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>        

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPostExecute</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// This runs on the UI thread after complete execution of the doInBackground() method</span>
        <span class="token comment">// This function receives result(String s) returned from the doInBackground() method.</span>
        <span class="token comment">// Update UI with the found string.</span>
        <span class="token class-name">TextView</span> view <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>found_string<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            view<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            view<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;Match not found.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><h3 id="usage"><a href="#usage" class="header-anchor">#</a> Usage:</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">MyCustomAsyncTask</span> asyncTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyCustomAsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">File</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Run the task with a user supplied filename.</span>
asyncTask<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>userSuppliedFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>or simply:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">MyCustomAsyncTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>userSuppliedFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="note"><a href="#note" class="header-anchor">#</a> Note</h3> <p>When defining an <code>AsyncTask</code> we can pass three types between <code>&lt; &gt;</code> brackets.<br>
Defined as <code>&lt;Params, Progress, Result&gt;</code> (see <strong>Parameters section</strong>)</p> <p>In the previous example we've used types <code>&lt;File, Void, String&gt;</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">AsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">File</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">// Params has type File</span>
<span class="token comment">// Progress has unused type</span>
<span class="token comment">// Result has type String</span>

</code></pre></div><p><a href="https://developer.android.com/reference/java/lang/Void.html" target="_blank" rel="noopener noreferrer"><code>Void</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used when you want to mark a type as unused.</p> <p>Note that you can't pass primitive types (i.e. <code>int</code>, <code>float</code> and 6 others) as parameters. In such cases, you should pass their <a href="https://en.wikipedia.org/wiki/Primitive_wrapper_class" target="_blank" rel="noopener noreferrer">wrapper classes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, e.g. <code>Integer</code> instead of <code>int</code>, or <code>Float</code> instead of <code>float</code>.</p> <p><strong>The AsyncTask and Activity life cycle</strong></p> <p>AsyncTasks don't follow Activity instances' life cycle. If you start an AsyncTask inside an Activity and you rotate the device, the Activity will be destroyed and a new instance will be created. But the AsyncTask will not die. It will go on living until it completes.</p> <p><strong>Solution: AsyncTaskLoader</strong></p> <p>One subclass of <a href="https://developer.android.com/reference/android/content/Loader.html" target="_blank" rel="noopener noreferrer">Loaders<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is the AsyncTaskLoader. This class performs the same function as the AsyncTask, but much better. It can handle Activity configuration changes more easily, and it behaves within the life cycles of Fragments and Activities. The nice thing is that the AsyncTaskLoader can be used in any situation that the AsyncTask is being used. Anytime data needs to be loaded into memory for the Activity/Fragment to handle, The AsyncTaskLoader can do the job better.</p> <h2 id="pass-activity-as-weakreference-to-avoid-memory-leaks"><a href="#pass-activity-as-weakreference-to-avoid-memory-leaks" class="header-anchor">#</a> Pass Activity as WeakReference to avoid memory leaks</h2> <p>It is common for an AsyncTask to require a reference to the Activity that called it.</p> <p>If the AsyncTask is an inner class of the Activity, then you can reference it and any member variables/methods directly.</p> <p>If, however, the AsyncTask is not an inner class of the Activity, you will need to pass an Activity reference to the AsyncTask.
When you do this, one potential problem that may occur is that the AsyncTask will keep the reference of the Activity until the AsyncTask has completed its work in its background thread. If the Activity is finished or killed before the AsyncTask's background thread work is done, the AsyncTask will still have its reference to the Activity, and therefore it cannot be garbage collected.</p> <p>As a result, this will cause a memory leak.</p> <p>In order to prevent this from happening, make use of a <a href="https://developer.android.com/reference/java/lang/ref/WeakReference.html" target="_blank" rel="noopener noreferrer">WeakReference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in the AsyncTask instead of having a direct reference to the Activity.</p> <p>Here is an example AsyncTask that utilizes a WeakReference:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">MyAsyncTask</span> <span class="token keyword">extends</span> <span class="token class-name">AsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Activity</span><span class="token punctuation">&gt;</span></span> mActivity<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyAsyncTask</span><span class="token punctuation">(</span><span class="token class-name">Activity</span> activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mActivity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Activity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPreExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Activity</span> activity <span class="token operator">=</span> mActivity<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>activity <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Void</span> <span class="token function">doInBackground</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Do something</span>
        <span class="token class-name">String</span> param1 <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> param2 <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPostExecute</span><span class="token punctuation">(</span><span class="token class-name">Void</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Activity</span> activity <span class="token operator">=</span> mActivity<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>activity <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            activity<span class="token punctuation">.</span><span class="token function">updateUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 

</code></pre></div><p><strong>Calling the AsyncTask from an Activity:</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">MyAsyncTask</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;param2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>Calling the AsyncTask from a Fragment:</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">MyAsyncTask</span><span class="token punctuation">(</span><span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;param2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="download-image-using-asynctask-in-android"><a href="#download-image-using-asynctask-in-android" class="header-anchor">#</a> Download Image using AsyncTask in Android</h2> <p>This tutorial explains how to download Image using AsyncTask in Android. The example below download image while showing progress bar while during download.
</p><h3>Understanding Android AsyncTask</h3>
Async task enables you to implement MultiThreading without get Hands dirty into threads. AsyncTask enables proper and easy use of the UI thread. It allows performing background operations and passing the results on the UI thread.If you are doing something isolated related to UI, for example downloading data to present in a list, go ahead and use AsyncTask.<p></p> <ul><li>AsyncTasks should ideally be used for short operations (a few seconds at the most.)</li> <li>An asynchronous task is defined by 3 generic types, calledParams,ProgressandResult, and 4 steps, called<code>onPreExecute()</code>,<code>doInBackground()</code>,<code>onProgressUpdate()</code>and<code>onPostExecute()</code>.</li> <li>In <code>onPreExecute()</code> you can define code, which need to be executed before background processing starts.</li> <li>doInBackground have code which needs to be executed in background, here in <code>doInBackground()</code> we can send results to multiple times to event thread by publishProgress() method, to notify background processing has been completed we can return results simply.</li> <li><code>onProgressUpdate()</code> method receives progress updates from <code>doInBackground()</code> method, which is published via <code>publishProgress()</code> method, and this method can use this progress update to update event thread</li> <li><code>onPostExecute()</code> method handles results returned by <code>doInBackground()</code> method.
</li><li>The generic types used are</li> <li>Params, the type of the parameters sent to the task upon execution</li> <li>Progress, the type of the progress units published during the background computation.</li> <li>Result, the type of the result of the background computation.</li></ul> <h3 id="downloading-image-using-android-asynctask"><a href="#downloading-image-using-android-asynctask" class="header-anchor">#</a> Downloading image using Android AsyncTask</h3> <p><strong>your .xml layout</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token class-name">LinearLayout</span> 
    xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">&quot;fill_parent&quot;</span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">&quot;fill_parent&quot;</span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> <span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token class-name">Button</span>
    android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">&quot;@+id/downloadButton&quot;</span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">&quot;match_parent&quot;</span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">&quot;wrap_content&quot;</span>
    android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">&quot;Click Here to Download&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token class-name">ImageView</span>
    android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">&quot;@+id/imageView&quot;</span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">&quot;match_parent&quot;</span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">&quot;match_parent&quot;</span>
    android<span class="token operator">:</span>contentDescription<span class="token operator">=</span><span class="token string">&quot;Your image will appear here&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">LinearLayout</span><span class="token operator">&gt;</span>

</code></pre></div><p><strong>.java class</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javatechig<span class="token punctuation">.</span>droid</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span></span><span class="token class-name">HttpGet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">DefaultHttpClient</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Activity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">ProgressDialog</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Bitmap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">BitmapFactory</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">AsyncTask</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Button</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ImageView</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImageDownladerActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ImageView</span> downloadedImg<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ProgressDialog</span> simpleWaitDialog<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> downloadUrl <span class="token operator">=</span> <span class="token string">&quot;http://www.9ori.com/store/media/images/8ab579a656.jpg&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>asynch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Button</span> imageDownloaderBtn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>downloadButton<span class="token punctuation">)</span><span class="token punctuation">;</span>

        downloadedImg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ImageView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        imageDownloaderBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated method stub</span>
                <span class="token keyword">new</span> <span class="token class-name">ImageDownloader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>downloadUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ImageDownloader</span> <span class="token keyword">extends</span> <span class="token class-name">AsyncTask</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token class-name">Bitmap</span> <span class="token function">doInBackground</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> param<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// TODO Auto-generated method stub</span>
            <span class="token keyword">return</span> <span class="token function">downloadBitmap</span><span class="token punctuation">(</span>param<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPreExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">&quot;Async-Example&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;onPreExecute Called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            simpleWaitDialog <span class="token operator">=</span> <span class="token class-name">ProgressDialog</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">ImageDownladerActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;Wait&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Downloading Image&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPostExecute</span><span class="token punctuation">(</span><span class="token class-name">Bitmap</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">&quot;Async-Example&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;onPostExecute Called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            downloadedImg<span class="token punctuation">.</span><span class="token function">setImageBitmap</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            simpleWaitDialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">Bitmap</span> <span class="token function">downloadBitmap</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// initilize the default HTTP client object</span>
            <span class="token keyword">final</span> <span class="token class-name">DefaultHttpClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//forming a HttpGet request </span>
            <span class="token keyword">final</span> <span class="token class-name">HttpGet</span> getRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpGet</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>

                <span class="token class-name">HttpResponse</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>getRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">//check 200 OK for success</span>
                <span class="token keyword">final</span> <span class="token keyword">int</span> statusCode <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatusLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>statusCode <span class="token operator">!=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>SC_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">w</span><span class="token punctuation">(</span><span class="token string">&quot;ImageDownloader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Error &quot;</span> <span class="token operator">+</span> statusCode <span class="token operator">+</span> 
                            <span class="token string">&quot; while retrieving bitmap from &quot;</span> <span class="token operator">+</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

                <span class="token punctuation">}</span>

                <span class="token keyword">final</span> <span class="token class-name">HttpEntity</span> entity <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>entity <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token comment">// getting contents from the stream </span>
                        inputStream <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">// decoding stream data back into image Bitmap that android understands</span>
                        <span class="token keyword">final</span> <span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> <span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeStream</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token keyword">return</span> bitmap<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>inputStream <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        entity<span class="token punctuation">.</span><span class="token function">consumeContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// You Could provide a more explicit error message for IOException</span>
                getRequest<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;ImageDownloader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Something went wrong while&quot;</span> <span class="token operator">+</span>
                        <span class="token string">&quot; retrieving bitmap from &quot;</span> <span class="token operator">+</span> url <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> 

            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Since there is currently no comment field for examples (or I haven't found it or I haven't permission for it) here is some comment about this:</p> <p>This is a good example what can be done with AsyncTask.</p> <p>However the example currently has problems with</p> <ul><li>possible memory leaks</li> <li>app crash if there was a screen rotation shortly before the async task finished.</li></ul> <p>For details see:</p> <ul><li><a href="http://stackoverflow.com/documentation/android/117/asynctask/14069/pass-activity-as-weakreference-to-avoid-memory-leaks" target="_blank" rel="noopener noreferrer">Pass Activity as WeakReference to avoid memory leaks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://stackoverflow.com/documentation/android/117/asynctask/5377/possible-problems-with-inner-async-tasks" target="_blank" rel="noopener noreferrer">http://stackoverflow.com/documentation/android/117/asynctask/5377/possible-problems-with-inner-async-tasks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://stackoverflow.com/documentation/android/2687/common-memory-leaks-and-how-to-avoid-them/9248/avoid-leaking-activities-with-asynctask" target="_blank" rel="noopener noreferrer">Avoid leaking Activities with AsyncTask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="canceling-asynctask"><a href="#canceling-asynctask" class="header-anchor">#</a> Canceling AsyncTask</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">YourAsyncTask</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourAsyncTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
task<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
task<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This doesn't stop your task if it was in progress, it just sets the cancelled flag which can be checked by checking the return value of <code>isCancelled()</code> (assuming your code is currently running) by doing this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">YourAsyncTask</span> <span class="token keyword">extends</span> <span class="token class-name">AsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Void</span> <span class="token function">doInBackground</span><span class="token punctuation">(</span><span class="token class-name">Void</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isCancelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> doing <span class="token keyword">long</span> task stuff
            <span class="token comment">//Do something, you need, upload part of file, for example</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isCancelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// Task was detected as canceled</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>yourTaskCompleted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="note-2"><a href="#note-2" class="header-anchor">#</a> Note</h3> <p>If an AsyncTask is canceled while <code>doInBackground(Params... params)</code> is still executing then the method <code>onPostExecute(Result result)</code> will <strong>NOT</strong> be called after <code>doInBackground(Params... params)</code> returns. The AsyncTask will instead call the <code>onCancelled(Result result)</code> to indicate that the task was cancelled during execution.</p> <h2 id="asynctask-serial-execution-and-parallel-execution-of-task"><a href="#asynctask-serial-execution-and-parallel-execution-of-task" class="header-anchor">#</a> AsyncTask: Serial Execution and Parallel Execution of Task</h2> <p>AsyncTask is an abstract Class and does not inherit the <code>Thread</code> class. It has an <strong>abstract</strong> method <code>doInBackground(Params... params)</code>, which is overridden to perform the task. This method is called from <code>AsyncTask.call()</code>.</p> <p>Executor are part of <code>java.util.concurrent</code> package.</p> <p>Moreover, AsyncTask contains 2 <code>Executor</code>s</p> <h3 id="thread-pool-executor"><a href="#thread-pool-executor" class="header-anchor">#</a> <code>THREAD_POOL_EXECUTOR</code></h3> <p>It uses worker threads to execute the tasks parallelly.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Executor</span> THREAD_POOL_EXECUTOR <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>CORE_POOL_SIZE<span class="token punctuation">,</span> MAXIMUM_POOL_SIZE<span class="token punctuation">,</span> KEEP_ALIVE<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">,</span> sPoolWorkQueue<span class="token punctuation">,</span> sThreadFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="serial-executor"><a href="#serial-executor" class="header-anchor">#</a> <code>SERIAL_EXECUTOR</code></h3> <p>It executes the task serially, i.e. one by one.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SerialExecutor</span> <span class="token keyword">implements</span> <span class="token class-name">Executor</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

</code></pre></div><p>Both <code>Executor</code>s are <strong>static</strong>, hence only one <code>THREAD_POOL_EXECUTOR</code> and one <code>SerialExecutor</code> objects exist, but you can create several <code>AsyncTask</code> objects.</p> <p>Therefore, if you try to do multiple background task with the default Executor (<code>SerialExecutor</code>), these task will be queue and executed serially.</p> <p>If you try to do multiple background task with <code>THREAD_POOL_EXECUTOR</code>, then they will be executed parallelly.</p> <p>Example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Button</span> bt<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">CountTask</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TAG <span class="token operator">=</span> <span class="token string">&quot;AsyncTaskExample&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bt<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">BackgroundTask</span> backgroundTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BackgroundTask</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Integer</span> data<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">++</span><span class="token class-name">CountTask</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

                <span class="token comment">// Task Executed in thread pool ( 1 )</span>
                backgroundTask<span class="token punctuation">.</span><span class="token function">executeOnExecutor</span><span class="token punctuation">(</span><span class="token class-name">AsyncTask</span><span class="token punctuation">.</span>THREAD_POOL_EXECUTOR<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// Task executed Serially ( 2 )</span>
                <span class="token comment">// Uncomment the below code and comment the above code of Thread</span>
                <span class="token comment">// pool Executor and check</span>
                <span class="token comment">// backgroundTask.execute(data);</span>
                <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Task = &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">CountTask</span> <span class="token operator">+</span> <span class="token string">&quot; Task Queued&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">BackgroundTask</span> <span class="token keyword">extends</span> <span class="token class-name">AsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> taskNumber<span class="token punctuation">;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token class-name">Integer</span> <span class="token function">doInBackground</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> integers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            taskNumber <span class="token operator">=</span> integers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// TODO Auto-generated catch block</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Task = &quot;</span> <span class="token operator">+</span> taskNumber <span class="token operator">+</span> <span class="token string">&quot; Task Running in Background&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">publishProgress</span><span class="token punctuation">(</span>taskNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPreExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPreExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPostExecute</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> aLong<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPostExecute</span><span class="token punctuation">(</span>aLong<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onProgressUpdate</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onProgressUpdate</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Task = &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                    <span class="token operator">+</span> <span class="token string">&quot; Task Execution Completed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Perform Click on button several times to start a task and see the result.</p> <h3 id="task-executed-in-thread-pool-1"><a href="#task-executed-in-thread-pool-1" class="header-anchor">#</a> Task Executed in thread pool(1)</h3> <p>Each task takes 1000 ms to complete.</p> <p>At t=36s, tasks 2, 3 and 4 are queued and started executing also because they are executing parallelly.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token number">35.815</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token number">35.815</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.025</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.025</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.165</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.165</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.325</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.325</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.815</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.915</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">36.915</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token number">37.025</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">48</span><span class="token operator">:</span><span class="token number">37.165</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">11693</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

</code></pre></div><p>Comment <code>Task Executed in thread pool</code> (1) and uncomment <code>Task executed Serially</code> (2).</p> <p>Perform Click on button several times to start a task and see the result.</p> <p>It is executing the task serially hence every task is started after the current task completed execution.
Hence when Task 1's execution completes, only Task 2 starts running in background. Vice versa.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">57.505</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">57.505</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">57.675</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">57.835</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">58.005</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">58.155</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">58.505</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">58.505</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">58.755</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">6</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">59.295</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">7</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">59.505</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">42</span><span class="token operator">:</span><span class="token number">59.505</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token number">00.035</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">8</span> <span class="token class-name">Task</span> <span class="token class-name">Queued</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token number">00.505</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">00.505</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">01.505</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">01.515</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">02.515</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">02.515</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">6</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">03.515</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">7</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">03.515</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">6</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token number">04.515</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">8</span> <span class="token class-name">Task</span> <span class="token class-name">Running</span> in <span class="token class-name">Background</span>
<span class="token number">08</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">04.515</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">:</span> <span class="token class-name">D</span><span class="token operator">/</span><span class="token class-name">AsyncTaskExample</span><span class="token punctuation">(</span><span class="token number">10299</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Task</span> <span class="token operator">=</span> <span class="token number">7</span> <span class="token class-name">Task</span> <span class="token class-name">Execution</span> <span class="token class-name">Completed</span>

</code></pre></div><h2 id="publishing-progress"><a href="#publishing-progress" class="header-anchor">#</a> Publishing progress</h2> <p>Sometimes, we need to update the progress of the computation done by an <code>AsyncTask</code>. This progress could be represented by a string, an integer, etc. To do this, we have to use two functions. First, we need to set the <code>onProgressUpdate</code> function whose parameter type is the same as the second type parameter of our <code>AsyncTask</code>.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">YourAsyncTask</span> <span class="token keyword">extends</span> <span class="token class-name">AsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span>URL<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onProgressUpdate</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setProgressPercent</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Second, we have to use the function <code>publishProgress</code> necessarily on the <code>doInBackground</code> function, and that is all, the previous method will do all the job.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">Long</span> <span class="token function">doInBackground</span><span class="token punctuation">(</span>URL<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> urls<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">int</span> count <span class="token operator">=</span> urls<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
     <span class="token keyword">long</span> totalSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         totalSize <span class="token operator">+=</span> <span class="token class-name">Downloader</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span>urls<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">publishProgress</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span> count<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> totalSize<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

</code></pre></div><h2 id="order-of-execution"><a href="#order-of-execution" class="header-anchor">#</a> Order of execution</h2> <p>When first introduced, <code>AsyncTasks</code> were executed serially on a single background thread. Starting with <code>DONUT</code>, this was changed to a pool of threads allowing multiple tasks to operate in parallel. Starting with <code>HONEYCOMB</code>, tasks are executed on a single thread to avoid common application errors caused by parallel execution.</p> <p>If you truly want parallel execution, you can invoke <code>executeOnExecutor(java.util.concurrent.Executor, Object[])</code> with <code>THREAD_POOL_EXECUTOR</code>.</p> <blockquote></blockquote> <p>SERIAL_EXECUTOR -&gt; An Executor that executes tasks one at a time in
serial order.</p> <p>THREAD_POOL_EXECUTOR -&gt; An Executor that can be used to execute tasks in
parallel.</p> <p><strong>sample :</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Task</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Build</span><span class="token punctuation">.</span>VERSION<span class="token punctuation">.</span>SDK_INT <span class="token operator">&gt;=</span> <span class="token class-name">Build</span><span class="token punctuation">.</span>VERSION_CODES<span class="token punctuation">.</span>HONEYCOMB<span class="token punctuation">)</span>
    task<span class="token punctuation">.</span><span class="token function">executeOnExecutor</span><span class="token punctuation">(</span><span class="token class-name">AsyncTask</span><span class="token punctuation">.</span>SERIAL_EXECUTOR<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    task<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h4> <table><thead><tr><th>Parameter</th> <th>Details</th></tr></thead> <tbody><tr><td>Params</td> <td>the type of the parameters sent to the task upon execution.</td></tr> <tr><td>Progress</td> <td>the type of the progress units published during the background computation</td></tr> <tr><td>Result</td> <td>the type of the result of the background computation.</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/android/asynctask.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/android/thread.html" class="prev">
        Thread
      </a></span> <span class="next"><a href="/android/testing-ui-with-espresso.html">
        Testing UI with Espresso
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/108.f0b20e12.js" defer></script>
  </body>
</html>
