<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android - RenderScript</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Getting Started, Blur a View, Blur an image">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Android - RenderScript">
    <meta property="og:description" content="Getting Started, Blur a View, Blur an image">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/android/renderscript.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Android - RenderScript">
    <meta name="twitter:description" content="Getting Started, Blur a View, Blur an image">
    <meta name="twitter:url" content="/android/renderscript.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/282.084ef2b7.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Android</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/android/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/android/getting-started-with-android.html" class="sidebar-link">Getting started with Android</a></li><li><a href="/android/android-studio.html" class="sidebar-link">Android Studio</a></li><li><a href="/android/instant-run-in-android-studio.html" class="sidebar-link">Instant Run in Android Studio</a></li><li><a href="/android/textview.html" class="sidebar-link">TextView</a></li><li><a href="/android/autocompletetextview.html" class="sidebar-link">AutoCompleteTextView</a></li><li><a href="/android/autosizing-textviews.html" class="sidebar-link">Autosizing TextViews</a></li><li><a href="/android/listview.html" class="sidebar-link">ListView</a></li><li><a href="/android/layouts.html" class="sidebar-link">Layouts</a></li><li><a href="/android/constraintlayout.html" class="sidebar-link">ConstraintLayout</a></li><li><a href="/android/textinputlayout.html" class="sidebar-link">TextInputLayout</a></li><li><a href="/android/coordinatorlayout-and-behaviors.html" class="sidebar-link">CoordinatorLayout and Behaviors</a></li><li><a href="/android/tablayout.html" class="sidebar-link">TabLayout</a></li><li><a href="/android/viewpager.html" class="sidebar-link">ViewPager</a></li><li><a href="/android/cardview.html" class="sidebar-link">CardView</a></li><li><a href="/android/navigationview.html" class="sidebar-link">NavigationView</a></li><li><a href="/android/recyclerview.html" class="sidebar-link">RecyclerView</a></li><li><a href="/android/recyclerview-decorations.html" class="sidebar-link">RecyclerView Decorations</a></li><li><a href="/android/recyclerview-onclicklisteners.html" class="sidebar-link">RecyclerView onClickListeners</a></li><li><a href="/android/recyclerview-and-layoutmanagers.html" class="sidebar-link">RecyclerView and LayoutManagers</a></li><li><a href="/android/pagination-in-recyclerview.html" class="sidebar-link">Pagination in RecyclerView</a></li><li><a href="/android/imageview.html" class="sidebar-link">ImageView</a></li><li><a href="/android/videoview.html" class="sidebar-link">VideoView</a></li><li><a href="/android/optimized-videoview.html" class="sidebar-link">Optimized VideoView</a></li><li><a href="/android/webview.html" class="sidebar-link">WebView</a></li><li><a href="/android/searchview.html" class="sidebar-link">SearchView</a></li><li><a href="/android/bottomnavigationview.html" class="sidebar-link">BottomNavigationView</a></li><li><a href="/android/canvas-drawing-using-surfaceview.html" class="sidebar-link">Canvas drawing using SurfaceView</a></li><li><a href="/android/creating-custom-views.html" class="sidebar-link">Creating Custom Views</a></li><li><a href="/android/getting-calculated-view-dimensions.html" class="sidebar-link">Getting Calculated View Dimensions</a></li><li><a href="/android/adding-a-fuseview-to-an-android-project.html" class="sidebar-link">Adding a FuseView to an Android Project</a></li><li><a href="/android/supporting-screens-with-different-resolutions-sizes.html" class="sidebar-link">Supporting Screens With Different Resolutions, Sizes</a></li><li><a href="/android/viewflipper.html" class="sidebar-link">ViewFlipper</a></li><li><a href="/android/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/android/activity.html" class="sidebar-link">Activity</a></li><li><a href="/android/activity-recognition.html" class="sidebar-link">Activity Recognition</a></li><li><a href="/android/split-screen-multi-screen-activities.html" class="sidebar-link">Split Screen / Multi-Screen Activities</a></li><li><a href="/android/material-design.html" class="sidebar-link">Material Design</a></li><li><a href="/android/resources.html" class="sidebar-link">Resources</a></li><li><a href="/android/data-binding-library.html" class="sidebar-link">Data Binding Library</a></li><li><a href="/android/context.html" class="sidebar-link">Context</a></li><li><a href="/android/sharedpreferences.html" class="sidebar-link">SharedPreferences</a></li><li><a href="/android/intent.html" class="sidebar-link">Intent</a></li><li><a href="/android/fragments.html" class="sidebar-link">Fragments</a></li><li><a href="/android/button.html" class="sidebar-link">Button</a></li><li><a href="/android/emulator.html" class="sidebar-link">Emulator</a></li><li><a href="/android/service.html" class="sidebar-link">Service</a></li><li><a href="/android/the-manifest-file.html" class="sidebar-link">The Manifest File</a></li><li><a href="/android/gradle-for-android.html" class="sidebar-link">Gradle for Android</a></li><li><a href="/android/fileio-with-android.html" class="sidebar-link">FileIO with Android</a></li><li><a href="/android/fileprovider.html" class="sidebar-link">FileProvider</a></li><li><a href="/android/storing-files-in-internal-external-storage.html" class="sidebar-link">Storing Files in Internal &amp; External Storage</a></li><li><a href="/android/zip-file-in-android.html" class="sidebar-link">Zip file in android</a></li><li><a href="/android/unzip-file-in-android.html" class="sidebar-link">Unzip File in Android</a></li><li><a href="/android/camera-and-gallery.html" class="sidebar-link">Camera and Gallery</a></li><li><a href="/android/camera-2-api.html" class="sidebar-link">Camera 2 API</a></li><li><a href="/android/fingerprint-api-in-android.html" class="sidebar-link">Fingerprint API in android</a></li><li><a href="/android/bluetooth-and-bluetooth-le-api.html" class="sidebar-link">Bluetooth and Bluetooth LE API</a></li><li><a href="/android/runtime-permissions-in-api-23.html" class="sidebar-link">Runtime Permissions in API-23 +</a></li><li><a href="/android/android-places-api.html" class="sidebar-link">Android Places API</a></li><li><a href="/android/android-ndk.html" class="sidebar-link">Android NDK</a></li><li><a href="/android/daynight-theme-appcompat-v23-2-api-14.html" class="sidebar-link">DayNight Theme (AppCompat v23.2 / API 14+)</a></li><li><a href="/android/glide.html" class="sidebar-link">Glide</a></li><li><a href="/android/dialog.html" class="sidebar-link">Dialog</a></li><li><a href="/android/enhancing-alert-dialogs.html" class="sidebar-link">Enhancing Alert Dialogs</a></li><li><a href="/android/animated-alertdialog-box.html" class="sidebar-link">Animated AlertDialog Box</a></li><li><a href="/android/greendao.html" class="sidebar-link">GreenDAO</a></li><li><a href="/android/tools-attributes.html" class="sidebar-link">Tools Attributes</a></li><li><a href="/android/formatting-strings.html" class="sidebar-link">Formatting Strings</a></li><li><a href="/android/spannablestring.html" class="sidebar-link">SpannableString</a></li><li><a href="/android/notifications.html" class="sidebar-link">Notifications</a></li><li><a href="/android/alarmmanager.html" class="sidebar-link">AlarmManager</a></li><li><a href="/android/handler.html" class="sidebar-link">Handler</a></li><li><a href="/android/broadcastreceiver.html" class="sidebar-link">BroadcastReceiver</a></li><li><a href="/android/ui-lifecycle.html" class="sidebar-link">UI Lifecycle</a></li><li><a href="/android/httpurlconnection.html" class="sidebar-link">HttpURLConnection</a></li><li><a href="/android/callback-url.html" class="sidebar-link">Callback URL</a></li><li><a href="/android/snackbar.html" class="sidebar-link">Snackbar</a></li><li><a href="/android/widgets.html" class="sidebar-link">Widgets</a></li><li><a href="/android/toast.html" class="sidebar-link">Toast</a></li><li><a href="/android/create-singleton-class-for-toast-message.html" class="sidebar-link">Create Singleton Class for Toast Message</a></li><li><a href="/android/interfaces.html" class="sidebar-link">Interfaces</a></li><li><a href="/android/animators.html" class="sidebar-link">Animators</a></li><li><a href="/android/location.html" class="sidebar-link">Location</a></li><li><a href="/android/theme-style-attribute.html" class="sidebar-link">Theme, Style, Attribute</a></li><li><a href="/android/mediaplayer.html" class="sidebar-link">MediaPlayer</a></li><li><a href="/android/android-sound-and-media.html" class="sidebar-link">Android Sound and Media</a></li><li><a href="/android/mediasession.html" class="sidebar-link">MediaSession</a></li><li><a href="/android/mediastore.html" class="sidebar-link">MediaStore</a></li><li><a href="/android/multidex-and-the-dex-method-limit.html" class="sidebar-link">Multidex and the Dex Method Limit</a></li><li><a href="/android/data-synchronization-with-sync-adapter.html" class="sidebar-link">Data Synchronization with Sync Adapter</a></li><li><a href="/android/porterduff-mode.html" class="sidebar-link">PorterDuff Mode</a></li><li><a href="/android/menu.html" class="sidebar-link">Menu</a></li><li><a href="/android/picasso.html" class="sidebar-link">Picasso</a></li><li><a href="/android/roboguice.html" class="sidebar-link">RoboGuice</a></li><li><a href="/android/acra.html" class="sidebar-link">ACRA</a></li><li><a href="/android/parcelable.html" class="sidebar-link">Parcelable</a></li><li><a href="/android/retrofit2.html" class="sidebar-link">Retrofit2</a></li><li><a href="/android/butterknife.html" class="sidebar-link">ButterKnife</a></li><li><a href="/android/volley.html" class="sidebar-link">Volley</a></li><li><a href="/android/date-and-time-pickers.html" class="sidebar-link">Date and Time Pickers</a></li><li><a href="/android/localized-date-time-in-android.html" class="sidebar-link">Localized Date/Time in Android</a></li><li><a href="/android/time-utils.html" class="sidebar-link">Time Utils</a></li><li><a href="/android/in-app-billing.html" class="sidebar-link">In-app Billing</a></li><li><a href="/android/floatingactionbutton.html" class="sidebar-link">FloatingActionButton</a></li><li><a href="/android/touch-events.html" class="sidebar-link">Touch Events</a></li><li><a href="/android/handling-touch-and-motion-events.html" class="sidebar-link">Handling touch and motion events</a></li><li><a href="/android/detect-shake-event-in-android.html" class="sidebar-link">Detect Shake Event in Android</a></li><li><a href="/android/hardware-button-events-intents-ptt-lwp-etc.html" class="sidebar-link">Hardware Button Events/Intents (PTT, LWP, etc.)</a></li><li><a href="/android/greenrobot-eventbus.html" class="sidebar-link">GreenRobot EventBus</a></li><li><a href="/android/otto-event-bus.html" class="sidebar-link">Otto Event Bus</a></li><li><a href="/android/vibration.html" class="sidebar-link">Vibration</a></li><li><a href="/android/contentprovider.html" class="sidebar-link">ContentProvider</a></li><li><a href="/android/dagger-2.html" class="sidebar-link">Dagger 2</a></li><li><a href="/android/realm.html" class="sidebar-link">Realm</a></li><li><a href="/android/android-versions.html" class="sidebar-link">Android Versions</a></li><li><a href="/android/wi-fi-connections.html" class="sidebar-link">Wi-Fi Connections</a></li><li><a href="/android/sensormanager.html" class="sidebar-link">SensorManager</a></li><li><a href="/android/progressbar.html" class="sidebar-link">ProgressBar</a></li><li><a href="/android/custom-fonts.html" class="sidebar-link">Custom Fonts</a></li><li><a href="/android/getting-system-font-names-and-using-the-fonts.html" class="sidebar-link">Getting system font names and using the fonts</a></li><li><a href="/android/text-to-speech-tts.html" class="sidebar-link">Text to Speech(TTS)</a></li><li><a href="/android/spinner.html" class="sidebar-link">Spinner</a></li><li><a href="/android/data-encryption-decryption.html" class="sidebar-link">Data Encryption/Decryption</a></li><li><a href="/android/okhttp.html" class="sidebar-link">OkHttp</a></li><li><a href="/android/handling-deep-links.html" class="sidebar-link">Handling Deep Links</a></li><li><a href="/android/crash-reporting-tools.html" class="sidebar-link">Crash Reporting Tools</a></li><li><a href="/android/check-internet-connectivity.html" class="sidebar-link">Check Internet Connectivity</a></li><li><a href="/android/creating-your-own-libraries-for-android-applications.html" class="sidebar-link">Creating your own libraries for Android applications</a></li><li><a href="/android/device-display-metrics.html" class="sidebar-link">Device Display Metrics</a></li><li><a href="/android/building-backwards-compatible-apps.html" class="sidebar-link">Building Backwards Compatible Apps</a></li><li><a href="/android/loader.html" class="sidebar-link">Loader</a></li><li><a href="/android/proguard-obfuscating-and-shrinking-your-code.html" class="sidebar-link">ProGuard - Obfuscating and Shrinking your code</a></li><li><a href="/android/typedef-annotations-intdef-stringdef.html" class="sidebar-link">Typedef Annotations: @IntDef, @StringDef</a></li><li><a href="/android/capturing-screenshots.html" class="sidebar-link">Capturing Screenshots</a></li><li><a href="/android/mvp-architecture.html" class="sidebar-link">MVP Architecture</a></li><li><a href="/android/orientation-changes.html" class="sidebar-link">Orientation Changes</a></li><li><a href="/android/xposed.html" class="sidebar-link">Xposed</a></li><li><a href="/android/packagemanager.html" class="sidebar-link">PackageManager</a></li><li><a href="/android/gesture-detection.html" class="sidebar-link">Gesture Detection</a></li><li><a href="/android/doze-mode.html" class="sidebar-link">Doze Mode</a></li><li><a href="/android/colors.html" class="sidebar-link">Colors</a></li><li><a href="/android/keyboard.html" class="sidebar-link">Keyboard</a></li><li><a href="/android/renderscript.html" aria-current="page" class="active sidebar-link">RenderScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/android/renderscript.html#getting-started" class="sidebar-link">Getting Started</a></li><li class="sidebar-sub-header"><a href="/android/renderscript.html#blur-a-view" class="sidebar-link">Blur a View</a></li><li class="sidebar-sub-header"><a href="/android/renderscript.html#blur-an-image" class="sidebar-link">Blur an image</a></li></ul></li><li><a href="/android/fresco.html" class="sidebar-link">Fresco</a></li><li><a href="/android/swipe-to-refresh.html" class="sidebar-link">Swipe to Refresh</a></li><li><a href="/android/creating-splash-screen.html" class="sidebar-link">Creating Splash screen</a></li><li><a href="/android/intentservice.html" class="sidebar-link">IntentService</a></li><li><a href="/android/implicit-intents.html" class="sidebar-link">Implicit Intents</a></li><li><a href="/android/publish-to-play-store.html" class="sidebar-link">Publish to Play Store</a></li><li><a href="/android/universal-image-loader.html" class="sidebar-link">Universal Image Loader</a></li><li><a href="/android/image-compression.html" class="sidebar-link">Image Compression</a></li><li><a href="/android/9-patch-images.html" class="sidebar-link">9-Patch Images</a></li><li><a href="/android/email-validation.html" class="sidebar-link">Email Validation</a></li><li><a href="/android/bottom-sheets.html" class="sidebar-link">Bottom Sheets</a></li><li><a href="/android/edittext.html" class="sidebar-link">EditText</a></li><li><a href="/android/speech-to-text-conversion.html" class="sidebar-link">Speech to Text Conversion</a></li><li><a href="/android/installing-apps-with-adb.html" class="sidebar-link">Installing apps with ADB</a></li><li><a href="/android/count-down-timer.html" class="sidebar-link">Count Down Timer</a></li><li><a href="/android/barcode-and-qr-code-reading.html" class="sidebar-link">Barcode and QR code reading</a></li><li><a href="/android/android-paypal-gateway-integration.html" class="sidebar-link">Android Paypal Gateway Integration</a></li><li><a href="/android/drawables.html" class="sidebar-link">Drawables</a></li><li><a href="/android/transitiondrawable.html" class="sidebar-link">TransitionDrawable</a></li><li><a href="/android/vector-drawables.html" class="sidebar-link">Vector Drawables</a></li><li><a href="/android/vectordrawable-and-animatedvectordrawable.html" class="sidebar-link">VectorDrawable and AnimatedVectorDrawable</a></li><li><a href="/android/port-mapping-using-cling-library-in-android.html" class="sidebar-link">Port Mapping using Cling library in Android</a></li><li><a href="/android/creating-overlay-always-on-top-windows.html" class="sidebar-link">Creating Overlay (always-on-top) Windows</a></li><li><a href="/android/exoplayer.html" class="sidebar-link">ExoPlayer</a></li><li><a href="/android/xmpp-register-login-and-chat-simple-example.html" class="sidebar-link">XMPP register login and chat simple example</a></li><li><a href="/android/android-authenticator.html" class="sidebar-link">Android Authenticator</a></li><li><a href="/android/audiomanager.html" class="sidebar-link">AudioManager</a></li><li><a href="/android/audiotrack.html" class="sidebar-link">AudioTrack</a></li><li><a href="/android/job-scheduling.html" class="sidebar-link">Job Scheduling</a></li><li><a href="/android/accounts-and-accountmanager.html" class="sidebar-link">Accounts and AccountManager</a></li><li><a href="/android/integrate-opencv-into-android-studio.html" class="sidebar-link">Integrate OpenCV into Android Studio</a></li><li><a href="/android/mvvm-architecture.html" class="sidebar-link">MVVM (Architecture)</a></li><li><a href="/android/ormlite-in-android.html" class="sidebar-link">ORMLite in android</a></li><li><a href="/android/retrofit2-with-rxjava.html" class="sidebar-link">Retrofit2 with RxJava</a></li><li><a href="/android/shortcutmanager.html" class="sidebar-link">ShortcutManager</a></li><li><a href="/android/lrucache.html" class="sidebar-link">LruCache</a></li><li><a href="/android/jenkins-ci-setup-for-android-projects.html" class="sidebar-link">Jenkins CI setup for Android Projects</a></li><li><a href="/android/fastlane.html" class="sidebar-link">fastlane</a></li><li><a href="/android/define-step-value-increment-for-custom-rangeseekbar.html" class="sidebar-link">Define step value (increment) for custom RangeSeekBar</a></li><li><a href="/android/getting-started-with-opengl-es-2-0.html" class="sidebar-link">Getting started with OpenGL ES 2.0+</a></li><li><a href="/android/check-data-connection.html" class="sidebar-link">Check Data Connection</a></li><li><a href="/android/java-on-android.html" class="sidebar-link">Java on Android</a></li><li><a href="/android/android-java-native-interface-jni.html" class="sidebar-link">Android Java Native Interface (JNI)</a></li><li><a href="/android/notification-channel-android-o.html" class="sidebar-link">Notification Channel Android O</a></li><li><a href="/android/robolectric.html" class="sidebar-link">Robolectric</a></li><li><a href="/android/moshi.html" class="sidebar-link">Moshi</a></li><li><a href="/android/strict-mode-policy-a-tool-to-catch-the-bug-in-the-compile-time.html" class="sidebar-link">Strict Mode Policy : A tool to catch the bug in the Compile Time.</a></li><li><a href="/android/internationalization-and-localization-i18n-and-l10n.html" class="sidebar-link">Internationalization and localization (I18N and L10N)</a></li><li><a href="/android/fast-way-to-setup-retrolambda-on-an-android-project.html" class="sidebar-link">Fast way to setup Retrolambda on an android project.</a></li><li><a href="/android/how-to-use-sparsearray.html" class="sidebar-link">How to use SparseArray</a></li><li><a href="/android/shared-element-transitions.html" class="sidebar-link">Shared Element Transitions</a></li><li><a href="/android/android-things.html" class="sidebar-link">Android Things</a></li><li><a href="/android/library-dagger-2-dependency-injection-in-applications.html" class="sidebar-link">Library Dagger 2: Dependency Injection in Applications</a></li><li><a href="/android/jcodec.html" class="sidebar-link">JCodec</a></li><li><a href="/android/formatting-phone-numbers-with-pattern.html" class="sidebar-link">Formatting phone numbers with pattern.</a></li><li><a href="/android/paint.html" class="sidebar-link">Paint</a></li><li><a href="/android/what-is-proguard-what-is-use-in-android.html" class="sidebar-link">What is ProGuard? What is use in Android?</a></li><li><a href="/android/create-android-custom-roms.html" class="sidebar-link">Create Android Custom ROMs</a></li><li><a href="/android/genymotion-for-android.html" class="sidebar-link">Genymotion for android</a></li><li><a href="/android/constraintset.html" class="sidebar-link">ConstraintSet</a></li><li><a href="/android/clevertap.html" class="sidebar-link">CleverTap</a></li><li><a href="/android/publish-a-library-to-maven-repositories.html" class="sidebar-link">Publish a library to Maven Repositories</a></li><li><a href="/android/adb-shell.html" class="sidebar-link">adb shell</a></li><li><a href="/android/ping-icmp.html" class="sidebar-link">Ping ICMP</a></li><li><a href="/android/aidl.html" class="sidebar-link">AIDL</a></li><li><a href="/android/android-game-development.html" class="sidebar-link">Android game development</a></li><li><a href="/android/android-programming-with-kotlin.html" class="sidebar-link">Android programming with Kotlin</a></li><li><a href="/android/android-x86-in-virtualbox.html" class="sidebar-link">Android-x86 in VirtualBox</a></li><li><a href="/android/leakcanary.html" class="sidebar-link">Leakcanary</a></li><li><a href="/android/okio.html" class="sidebar-link">Okio</a></li><li><a href="/android/bluetooth-low-energy.html" class="sidebar-link">Bluetooth Low Energy</a></li><li><a href="/android/looper.html" class="sidebar-link">Looper</a></li><li><a href="/android/annotation-processor.html" class="sidebar-link">Annotation Processor</a></li><li><a href="/android/syncadapter-with-periodically-do-sync-of-data.html" class="sidebar-link">SyncAdapter with periodically do sync of data</a></li><li><a href="/android/fastjson.html" class="sidebar-link">Fastjson</a></li><li><a href="/android/json-in-android-with-org-json.html" class="sidebar-link">JSON in Android with org.json</a></li><li><a href="/android/gson.html" class="sidebar-link">Gson</a></li><li><a href="/android/android-architecture-components.html" class="sidebar-link">Android Architecture Components</a></li><li><a href="/android/jackson.html" class="sidebar-link">Jackson</a></li><li><a href="/android/smartcard.html" class="sidebar-link">Smartcard</a></li><li><a href="/android/security.html" class="sidebar-link">Security</a></li><li><a href="/android/how-to-store-passwords-securely.html" class="sidebar-link">How to store passwords securely</a></li><li><a href="/android/secure-sharedpreferences.html" class="sidebar-link">Secure SharedPreferences</a></li><li><a href="/android/secure-sharedpreferences.html" class="sidebar-link">Secure SharedPreferences</a></li><li><a href="/android/sqlite.html" class="sidebar-link">SQLite</a></li><li><a href="/android/accessing-sqlite-databases-using-the-contentvalues-class.html" class="sidebar-link">Accessing SQLite databases using the ContentValues class</a></li><li><a href="/android/firebase.html" class="sidebar-link">Firebase</a></li><li><a href="/android/firebase-cloud-messaging.html" class="sidebar-link">Firebase Cloud Messaging</a></li><li><a href="/android/firebase-realtime-database.html" class="sidebar-link">Firebase Realtime DataBase</a></li><li><a href="/android/firebase-app-indexing.html" class="sidebar-link">Firebase App Indexing</a></li><li><a href="/android/firebase-crash-reporting.html" class="sidebar-link">Firebase Crash Reporting</a></li><li><a href="/android/twitter-apis.html" class="sidebar-link">Twitter APIs</a></li><li><a href="/android/youtube-api.html" class="sidebar-link">Youtube-API</a></li><li><a href="/android/integrate-google-sign-in.html" class="sidebar-link">Integrate Google Sign In</a></li><li><a href="/android/google-signin-integration-on-android.html" class="sidebar-link">Google signin integration on android</a></li><li><a href="/android/google-awareness-apis.html" class="sidebar-link">Google Awareness APIs</a></li><li><a href="/android/google-maps-api-v2-for-android.html" class="sidebar-link">Google Maps API v2 for Android</a></li><li><a href="/android/google-drive-api.html" class="sidebar-link">Google Drive API</a></li><li><a href="/android/displaying-google-ads.html" class="sidebar-link">Displaying Google Ads</a></li><li><a href="/android/admob.html" class="sidebar-link">AdMob</a></li><li><a href="/android/google-play-store.html" class="sidebar-link">Google Play Store</a></li><li><a href="/android/sign-your-android-app-for-release.html" class="sidebar-link">Sign your Android App for Release</a></li><li><a href="/android/tensorflow.html" class="sidebar-link">TensorFlow</a></li><li><a href="/android/android-vk-sdk.html" class="sidebar-link">Android Vk Sdk</a></li><li><a href="/android/project-sdk-versions.html" class="sidebar-link">Project SDK versions</a></li><li><a href="/android/facebook-sdk-for-android.html" class="sidebar-link">Facebook SDK for Android</a></li><li><a href="/android/thread.html" class="sidebar-link">Thread</a></li><li><a href="/android/asynctask.html" class="sidebar-link">AsyncTask</a></li><li><a href="/android/testing-ui-with-espresso.html" class="sidebar-link">Testing UI with Espresso</a></li><li><a href="/android/writing-ui-tests-android.html" class="sidebar-link">Writing UI tests - Android</a></li><li><a href="/android/unit-testing-in-android-with-junit.html" class="sidebar-link">Unit testing in Android with JUnit</a></li><li><a href="/android/inter-app-ui-testing-with-uiautomator.html" class="sidebar-link">Inter-app UI testing with UIAutomator</a></li><li><a href="/android/lint-warnings.html" class="sidebar-link">Lint Warnings</a></li><li><a href="/android/performance-optimization.html" class="sidebar-link">Performance Optimization</a></li><li><a href="/android/android-kernel-optimization.html" class="sidebar-link">Android Kernel Optimization</a></li><li><a href="/android/memory-leaks.html" class="sidebar-link">Memory Leaks</a></li><li><a href="/android/enhancing-android-performance-using-icon-fonts.html" class="sidebar-link">Enhancing Android Performance Using Icon Fonts</a></li><li><a href="/android/bitmap-cache.html" class="sidebar-link">Bitmap Cache</a></li><li><a href="/android/loading-bitmaps-effectively.html" class="sidebar-link">Loading Bitmaps Effectively</a></li><li><a href="/android/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/android/logging-and-using-logcat.html" class="sidebar-link">Logging and using Logcat</a></li><li><a href="/android/adb-android-debug-bridge.html" class="sidebar-link">ADB (Android Debug Bridge)</a></li><li><a href="/android/localization-with-resources-in-android.html" class="sidebar-link">Localization with resources in Android</a></li><li><a href="/android/convert-vietnamese-string-to-english-string-android.html" class="sidebar-link">Convert vietnamese string to english string Android</a></li><li><a href="/android/publish-aar-file-to-apache-archiva-with-gradle.html" class="sidebar-link">Publish .aar file to Apache Archiva with Gradle</a></li><li><a href="/android/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="renderscript"><a href="#renderscript" class="header-anchor">#</a> RenderScript</h1> <p>RenderScript is a scripting language that allows you to write high performance graphic rendering and raw computational code. It provides a means of writing performance critical code that the system later compiles to native code for the processor it can run on. This could be the CPU, a multi-core CPU, or even the GPU. Which it ultimately runs on depends on many factors that aren't readily available to the developer, but also depends on what architecture the internal platform compiler supports.</p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h2> <p>RenderScript is a framework to allow high performance parallel computation on Android. Scripts you write will be executed across all available processors (e.g. CPU, GPU etc) in parallel allowing you to focus on the task you want to achieve instead of how it is scheduled and executed.</p> <p>Scripts are written in a C99 based language (C99 being an old version of the C programming language standard). For each Script a Java class is created which allows you to easily interact with RenderScript in your Java code.</p> <h3 id="setting-up-your-project"><a href="#setting-up-your-project" class="header-anchor">#</a> Setting up your project</h3> <p>There exist two different ways to access RenderScript in your app, with the Android Framework libraries or the Support Library. Even if you don't want to target devices before API level 11 you should always use the Support Library implementation because it ensures devices compatibility across many different devices. To use the support library implementation you need to use at least build tools version <code>18.1.0</code>!</p> <p>Now lets setup the build.gradle file of your application:</p> <div class="language-java extra-class"><pre class="language-java"><code>android <span class="token punctuation">{</span>
    compileSdkVersion <span class="token number">24</span>
    buildToolsVersion <span class="token string">'24.0.1'</span>

    defaultConfig <span class="token punctuation">{</span>
        minSdkVersion <span class="token number">8</span>
        targetSdkVersion <span class="token number">24</span>

        renderscriptTargetApi <span class="token number">18</span>
        renderscriptSupportModeEnabled <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li><code>renderscriptTargetApi</code>: This should be set to the version earliest API level which provides all RenderScript functionality you require.</li> <li><code>renderscriptSupportModeEnabled</code>: This enables the use of the Support Library RenderScript implementation.</li></ul> <h3 id="how-renderscript-works"><a href="#how-renderscript-works" class="header-anchor">#</a> How RenderScript works</h3> <p>A typical RenderScript consists of two things: Kernels and Functions. A function is just what it sounds like - it accepts an input, does something with that input and returns an output. A Kernel is where the real power of RenderScript comes from.</p> <p>A Kernel is a function which is executed against every element inside an <code>Allocation</code>. An <code>Allocation</code> can be used to pass data like a <code>Bitmap</code> or a <code>byte</code> array to a <code>RenderScript</code> and they are also used to get a result from a Kernel. Kernels can either take one <code>Allocation</code> as input and another as output or they can modify the data inside just one <code>Allocation</code>.</p> <p>You can write your one Kernels, but there are also many predefined Kernels which you can use to perform common operations like a Gaussian Image Blur.</p> <p>As already mentioned for every RenderScript file a class is generated to interact with it. These classes always start with the prefix <code>ScriptC_</code> followed by the name of the RenderScript file. For example if your RenderScript file is called <code>example</code> then the generated Java class will be called <code>ScriptC_example</code>. All predefined Scripts just start with the prefix <code>Script</code> - for example the Gaussian Image Blur Script is called <code>ScriptIntrinsicBlur</code>.</p> <h3 id="writing-your-first-renderscript"><a href="#writing-your-first-renderscript" class="header-anchor">#</a> Writing your first RenderScript</h3> <p>The following example is based on an example on GitHub. It performs basic image manipulation by modifying the saturation of an image. You can find the source code <a href="https://github.com/Wrdlbrnft/RenderScriptSample" target="_blank" rel="noopener noreferrer"><strong>here</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and check it out if you want to play around with it yourself. Here's a quick gif of what the result is supposed to look like:</p> <img src="https://i.stack.imgur.com/9dNTF.gif" alt="demo picture"> <h3 id="renderscript-boilerplate"><a href="#renderscript-boilerplate" class="header-anchor">#</a> RenderScript Boilerplate</h3> <p>RenderScript files reside in the folder <code>src/main/rs</code> in your project. Each file has the file extension <code>.rs</code> and has to contain two <code>#pragma</code> statements at the top:</p> <div class="language-java extra-class"><pre class="language-java"><code>#pragma <span class="token function">version</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
#pragma rs <span class="token function">java_package_name</span><span class="token punctuation">(</span>your<span class="token punctuation">.</span><span class="token keyword">package</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>

</code></pre></div><li>
`#pragma version(1)`: This can be used to set the version of RenderScript you are using. Currently there is only version 1.
</li> <li>
`#pragma rs java_package_name(your.package.name)`: This can be used to set the package name of the Java class generated to interact with this particular RenderScript.
</li> <p>There is another <code>#pragma</code> you should usually set in each of your RenderScript files and it is used to set the floating point precision. You can set the floating point precision to three different levels:</p> <ul><li><code>#pragma rs_fp_full</code>: This is the strictest setting with the highest precision and it is also the default value if don't specify anything. You should use this if you require high floating point precision.</li> <li><code>#pragma rs_fp_relaxed</code>: This is ensures not quite as high floating point precision, but on some architectures it enables a bunch of optimizations which can cause your scripts to run faster.</li> <li><code>#pragma rs_fp_imprecise</code>: This ensures even less precision and should be used if floating point precision does not really matter to your script.</li></ul> <p>Most scripts can just use <code>#pragma rs_fp_relaxed</code> unless you really need high floating point precision.</p> <h3 id="global-variables"><a href="#global-variables" class="header-anchor">#</a> Global Variables</h3> <p>Now just like in C code you can define global variables or constants:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">const</span> <span class="token keyword">static</span> float3 gMonoMult <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0.299f</span><span class="token punctuation">,</span> <span class="token number">0.587f</span><span class="token punctuation">,</span> <span class="token number">0.114f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">float</span> saturationLevel <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>

</code></pre></div><p>The variable <code>gMonoMult</code> is of type <code>float3</code>. This means it is a vector consisting of 3 float numbers. The other <code>float</code> variable called <code>saturationValue</code> is not constant, therefore you can set it at runtime to a value you like. You can use variables like this in your Kernels or functions and therefore they are another way to give input to or receive output from your RenderScripts. For each not constant variable a getter and setter method will be generated on the associated Java class.</p> <h3 id="kernels"><a href="#kernels" class="header-anchor">#</a> Kernels</h3> <p>But now lets get started implementing the Kernel. For the purposes of this example I am not going to explain the math used in the Kernel to modify the saturation of the image, but instead will focus on how to implement a Kernel and and how to use it. At the end of this chapter I will quickly explain what the code in this Kernel is actually doing.</p> <h3 id="kernels-in-general"><a href="#kernels-in-general" class="header-anchor">#</a> Kernels in general</h3> <p>Let's take a look at the source code first:</p> <div class="language-java extra-class"><pre class="language-java"><code>uchar4 <span class="token function">__attribute__</span><span class="token punctuation">(</span><span class="token punctuation">(</span>kernel<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">saturation</span><span class="token punctuation">(</span>uchar4 in<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    float4 f4 <span class="token operator">=</span> <span class="token function">rsUnpackColor8888</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
    float3 dotVector <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>f4<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> gMonoMult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    float3 newColor <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>dotVector<span class="token punctuation">,</span> f4<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> saturationLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">rsPackColorTo8888</span><span class="token punctuation">(</span>newColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>As you can see it looks like a normal C function with one exception: The <code>__attribute__((kernel))</code> between the return type and method name. This is what tells RenderScript that this method is a Kernel. Another thing you might notice is that this method accepts a <code>uchar4</code> parameter and returns another <code>uchar4</code> value. <code>uchar4</code> is - like the <code>float3</code> variable we discussed in the chapter before - a vector. It contains 4 <code>uchar</code> values which are just byte values in the range from 0 to 255.</p> <p>You can access these individual values in many different ways, for example <code>in.r</code> would return the byte which corresponds to the red channel of a pixel. We use a <code>uchar4</code> since each pixel is made up of 4 values - <code>r</code> for red, <code>g</code> for green, <code>b</code> for blue and <code>a</code> for alpha - and you can access them with this shorthand. RenderScript also allows you to take any number of values from a vector and create another vector with them. For example <code>in.rgb</code> would return a <code>uchar3</code> value which just contains the red, green and blue parts of the pixel without the alpha value.</p> <p>At runtime RenderScript will call this Kernel method for each pixel of an image which is why the return value and parameter are just one <code>uchar4</code> value. RenderScript will run many of these calls in parallel on all available processors which is why RenderScript is so powerful. This also means that you don't have to worry about threading or thread safety, you can just implement whatever you want to do to each pixel and RenderScript takes care of the rest.</p> <p>When calling a Kernel in Java you supply two <code>Allocation</code> variables, one which contains the input data and another one which will receive the output. Your Kernel method will be called for each value in the input <code>Allocation</code> and will write the result to the output <code>Allocation</code>.</p> <h3 id="renderscript-runtime-api-methods"><a href="#renderscript-runtime-api-methods" class="header-anchor">#</a> RenderScript Runtime API methods</h3> <p>In the Kernel above a few methods are used which are provided out of the box.  RenderScript provides many such methods and they are vital for almost anything you are going to do with RenderScript. Among them are methods to do math operations like <code>sin()</code> and helper methods like <code>mix()</code> which mixes two values according to another values. But there are also methods for more complex operations when dealing with vectors, quaternions and matrices.</p> <p>The official <a href="https://developer.android.com/guide/topics/renderscript/reference/overview.html" target="_blank" rel="noopener noreferrer"><strong>RenderScript Runtime API Reference</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is the best resource out there if you want to know more about a particular method or are looking for a specific method which performs a common operation like calculating the dot product of a matrix. You can find this documentation <a href="https://developer.android.com/guide/topics/renderscript/reference/overview.html" target="_blank" rel="noopener noreferrer"><strong>here</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="kernel-implementation"><a href="#kernel-implementation" class="header-anchor">#</a> Kernel Implementation</h3> <p>Now let's take a look at the specifics of what this Kernel is doing. Here's the first line in the Kernel:</p> <div class="language-java extra-class"><pre class="language-java"><code>float4 f4 <span class="token operator">=</span> <span class="token function">rsUnpackColor8888</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The first line calls the built in method <a href="https://developer.android.com/guide/topics/renderscript/reference/rs_convert.html#android_rs:rsUnpackColor8888" target="_blank" rel="noopener noreferrer"><strong><code>rsUnpackColor8888()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which transforms the <code>uchar4</code> value to a <code>float4</code> values. Each color channel is also transformed to the range <code>0.0f - 1.0f</code> where <code>0.0f</code> corresponds to a byte value of <code>0</code> and <code>1.0f</code> to <code>255</code>. The main purpose of this is to make all the math in this Kernel a lot simpler.</p> <div class="language-java extra-class"><pre class="language-java"><code>float3 dotVector <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>f4<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> gMonoMult<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This next line uses the built in method <a href="https://developer.android.com/guide/topics/renderscript/reference/rs_vector_math.html#android_rs:dot" target="_blank" rel="noopener noreferrer"><strong><code>dot()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to calculate the dot product of two vectors. <code>gMonoMult</code> is a constant value we defined a few chapters above. Since both vectors need to be of the same length to calculate the dot product and also since we just want to affect the color channels and not the alpha channel of a pixel we use the shorthand <code>.rgb</code> to get a new <code>float3</code> vector which just contains the red, green and blue color channels. Those of us who still remember from school how the dot product works will quickly notice that the dot product should return just one value and not a vector. Yet in the code above we are assigning the result to a <code>float3</code> vector. This is again a feature of RenderScript. When you assign a one dimensional number to a vector all elements in the vector will be set to this value. For example the following snippet will assign <code>2.0f</code> to each of the three values in the <code>float3</code> vector:</p> <div class="language-java extra-class"><pre class="language-java"><code>float3 example <span class="token operator">=</span> <span class="token number">2.0f</span><span class="token punctuation">;</span>

</code></pre></div><p>So the result of the dot product above is assigned to each element in the <code>float3</code> vector above.</p> <p>Now comes the part in which we actually use the global variable <code>saturationLevel</code> to modify the saturation of the image:</p> <div class="language-java extra-class"><pre class="language-java"><code>float3 newColor <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>dotVector<span class="token punctuation">,</span> f4<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> saturationLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This uses the built in method <a href="https://developer.android.com/guide/topics/renderscript/reference/rs_math.html#android_rs:mix" target="_blank" rel="noopener noreferrer"><strong><code>mix()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to mix together the original color with the dot product vector we created above. How they are mixed together is determined by the global <code>saturationLevel</code> variable. So a <code>saturationLevel</code> of <code>0.0f</code> will cause the resulting color to have no part of the original color values and will only consist of values in the <code>dotVector</code> which results in a black and white or grayed out image. A value of <code>1.0f</code> will cause the resulting color to be completely made up of the original color values and values above <code>1.0f</code> will multiply the original colors to make them more bright and intense.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">return</span> <span class="token function">rsPackColorTo8888</span><span class="token punctuation">(</span>newColor<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This is the last part in the Kernel. <a href="https://developer.android.com/guide/topics/renderscript/reference/rs_convert.html#android_rs:rsPackColorTo8888" target="_blank" rel="noopener noreferrer"><strong><code>rsPackColorTo8888()</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> transforms the <code>float3</code> vector back to a <code>uchar4</code> value which is then returned. The resulting byte values are clamped to a range between 0 and 255, so float values higher than <code>1.0f</code> will result in a byte value of 255 and values lower than <code>0.0</code> will result in a byte value of <code>0</code>.</p> <p>And that is the whole Kernel implementation. Now there is only one part remaining: How to call a Kernel in Java.</p> <h3 id="calling-renderscript-in-java"><a href="#calling-renderscript-in-java" class="header-anchor">#</a> Calling RenderScript in Java</h3> <h3 id="basics"><a href="#basics" class="header-anchor">#</a> Basics</h3> <p>As was already mentioned above for each RenderScript file a Java class is generated which allows you to interact with the your scripts. These files have the prefix <code>ScriptC_</code> followed by the name of the RenderScript file. To create an instance of these classes you first need an instance of the <code>RenderScript</code> class:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">RenderScript</span> renderScript <span class="token operator">=</span> <span class="token class-name">RenderScript</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The static method <code>create()</code> can be used to create a <code>RenderScript</code> instance from a <code>Context</code>. You can then instantiate the Java class which was generated for your script. If you called the RenderScript file <code>saturation.rs</code> then the class will be called <code>ScriptC_saturation</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">ScriptC_saturation</span> script <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScriptC_saturation</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>On this class you can now set the saturation level and call the Kernel. The setter which was generated for the <code>saturationLevel</code> variable will have the prefix <code>set_</code> followed by the name of the variable:</p> <div class="language-java extra-class"><pre class="language-java"><code>script<span class="token punctuation">.</span><span class="token function">set_saturationLevel</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>There is also a getter prefixed with <code>get_</code> which allows you to get the saturation level currently set:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">float</span> saturationLevel <span class="token operator">=</span> script<span class="token punctuation">.</span><span class="token function">get_saturationLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Kernels you define in your RenderScript are prefixed with <code>forEach_</code> followed by the name of the Kernel method. The Kernel we have written expects an input <code>Allocation</code> and an output <code>Allocation</code> as its parameters:</p> <div class="language-java extra-class"><pre class="language-java"><code>script<span class="token punctuation">.</span><span class="token function">forEach_saturation</span><span class="token punctuation">(</span>inputAllocation<span class="token punctuation">,</span> outputAllocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The input <code>Allocation</code> needs to contain the input image, and after the <code>forEach_saturation</code> method has finished the output allocation will contain the modified image data.</p> <p>Once you have an <code>Allocation</code> instance you can copy data from and to those <code>Allocations</code> by using the methods <code>copyFrom()</code> and <code>copyTo()</code>. For example you can copy a new image into your input `Allocation by calling:</p> <div class="language-java extra-class"><pre class="language-java"><code>inputAllocation<span class="token punctuation">.</span><span class="token function">copyFrom</span><span class="token punctuation">(</span>inputBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The same way you can retrieve the result image by calling <code>copyTo()</code> on the output <code>Allocation</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code>outputAllocation<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>outputBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="creating-allocation-instances"><a href="#creating-allocation-instances" class="header-anchor">#</a> Creating Allocation instances</h3> <p>There are many ways to create an <code>Allocation</code>. Once you have an <code>Allocation</code> instance you can copy new data from and to those <code>Allocations</code> with <code>copyTo()</code> and <code>copyFrom()</code> like explained above, but to create them initially you have to know with what kind of data you are exactly working with. Let's start with the input <code>Allocation</code>:</p> <p>We can use the static method <code>createFromBitmap()</code> to quickly create our input <code>Allocation</code> from a <code>Bitmap</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">Allocation</span> inputAllocation <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createFromBitmap</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>In this example the input image never changes so we never need to modify the input <code>Allocation</code> again. We can reuse it each time the <code>saturationLevel</code> changes to create a new output <code>Bitmap</code>.</p> <p>Creating the output <code>Allocation</code> is a little more complex. First we need to create what's called a <code>Type</code>. A <code>Type</code> is used to tell an <code>Allocation</code> with what kind of data it's dealing with. Usually one uses the <code>Type.Builder</code> class to quickly create an appropriate <code>Type</code>. Let's take a look at the code first:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">Type</span> outputType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Type<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> <span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token function">RGBA_8888</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span>inputBitmap<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span>inputBitmap<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>We are working with a normal 32 bit (or in other words 4 byte) per pixel <code>Bitmap</code> with 4 color channels. That's why we are choosing <code>Element.RGBA_8888</code> to create the <code>Type</code>. Then we use the methods <code>setX()</code> and <code>setY()</code> to set the width and height of the output image to the same size as the input image. The method <code>create()</code> then creates the <code>Type</code> with the parameters we specified.</p> <p>Once we have the correct <code>Type</code> we can create the output <code>Allocation</code> with the static method <code>createTyped()</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">Allocation</span> outputAllocation <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createTyped</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> outputType<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Now we are almost done. We also need an output <code>Bitmap</code> in which we can copy the data from the output <code>Allocation</code>. To do this we use the static method <code>createBitmap()</code> to create a new empty <code>Bitmap</code> with the same size and configuration as the input <code>Bitmap</code>.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">Bitmap</span> outputBitmap <span class="token operator">=</span> <span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>
        inputBitmap<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        inputBitmap<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        inputBitmap<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>And with that we have all the puzzle pieces to execute our RenderScript.</p> <h3 id="full-example"><a href="#full-example" class="header-anchor">#</a> Full example</h3> <p>Now let's put all this together in one example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Create the RenderScript instance</span>
<span class="token keyword">final</span> <span class="token class-name">RenderScript</span> renderScript <span class="token operator">=</span> <span class="token class-name">RenderScript</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the input Allocation </span>
<span class="token keyword">final</span> <span class="token class-name">Allocation</span> inputAllocation <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createFromBitmap</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> inputBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the output Type.</span>
<span class="token keyword">final</span> <span class="token class-name">Type</span> outputType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Type<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> <span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token function">RGBA_8888</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span>inputBitmap<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span>inputBitmap<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// And use the Type to create am output Allocation</span>
<span class="token keyword">final</span> <span class="token class-name">Allocation</span> outputAllocation <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createTyped</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> outputType<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create an empty output Bitmap from the input Bitmap</span>
<span class="token keyword">final</span> <span class="token class-name">Bitmap</span> outputBitmap <span class="token operator">=</span> <span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>
        inputBitmap<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        inputBitmap<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        inputBitmap<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create an instance of our script</span>
<span class="token keyword">final</span> <span class="token class-name">ScriptC_saturation</span> script <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScriptC_saturation</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set the saturation level</span>
script<span class="token punctuation">.</span><span class="token function">set_saturationLevel</span><span class="token punctuation">(</span><span class="token number">2.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Execute the Kernel</span>
script<span class="token punctuation">.</span><span class="token function">forEach_saturation</span><span class="token punctuation">(</span>inputAllocation<span class="token punctuation">,</span> outputAllocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Copy the result data to the output Bitmap</span>
outputAllocation<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>outputBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Display the result Bitmap somewhere</span>
someImageView<span class="token punctuation">.</span><span class="token function">setImageBitmap</span><span class="token punctuation">(</span>outputBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h3> <p>With this introduction you should be all set to write your own RenderScript Kernels for simple image manipulation. However there are a few things you have to keep in mind:</p> <ul><li><strong>RenderScript only works in Application projects</strong>: Currently RenderScript files cannot be part of a library project.</li> <li><strong>Watch out for memory</strong>: RenderScript is very fast, but it can also be memory intensive. There should never be more than one instance of <code>RenderScript</code> at any time. You should also reuse as much as possible. Normally you just need to create your <code>Allocation</code> instances once and can reuse them in the future. The same goes for output <code>Bitmaps</code> or your script instances. Reuse as much as possible.</li> <li><strong>Do your work in the background</strong>: Again RenderScript is very fast, but not instant in any way. Any Kernel, especially complex ones should be executed off the UI thread in an <code>AsyncTask</code> or something similar. However for the most part you don't have to worry about memory leaks. All RenderScript related classes only use the application <code>Context</code> and therefore don't cause memory leaks. But you still have to worry about the usual stuff like leaking <code>View</code>, <code>Activity</code> or any <code>Context</code> instance which you use yourself!</li> <li><strong>Use built in stuff</strong>: There are many predefined scripts which perform tasks like image blurring, blending, converting, resizing. And there are many more built in methods which help you implement your kernels. Chances are that if you want to do something there is either a script or method which already does what you are trying to do. Don't reinvent the wheel.</li></ul> <p>If you want to quickly get started and play around with actual code I recommend you take a look at the example GitHub project which implements the exact example talked about in this tutorial. You can find the project <a href="https://github.com/Wrdlbrnft/RenderScriptSample" target="_blank" rel="noopener noreferrer"><strong>here</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Have fun with RenderScript!</p> <h2 id="blur-a-view"><a href="#blur-a-view" class="header-anchor">#</a> Blur a View</h2> <h3 id="blurbitmaptask-java"><a href="#blurbitmaptask-java" class="header-anchor">#</a> BlurBitmapTask.java</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlurBitmapTask</span> <span class="token keyword">extends</span> <span class="token class-name">AsyncTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bitmap</span><span class="token punctuation">,</span> <span class="token class-name">Void</span><span class="token punctuation">,</span> <span class="token class-name">Bitmap</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ImageView</span><span class="token punctuation">&gt;</span></span> imageViewReference<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RenderScript</span> renderScript<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> shouldRecycleSource <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BlurBitmapTask</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ImageView</span> imageView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Use a WeakReference to ensure</span>
        <span class="token comment">// the ImageView can be garbage collected</span>
        imageViewReference <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        renderScript <span class="token operator">=</span> <span class="token class-name">RenderScript</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Decode image in background.</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Bitmap</span> <span class="token function">doInBackground</span><span class="token punctuation">(</span><span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">blurBitmap</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Once complete, see if ImageView is still around and set bitmap.</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPostExecute</span><span class="token punctuation">(</span><span class="token class-name">Bitmap</span> bitmap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bitmap <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">isCancelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">final</span> <span class="token class-name">ImageView</span> imageView <span class="token operator">=</span> imageViewReference<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>imageView <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        imageView<span class="token punctuation">.</span><span class="token function">setImageBitmap</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bitmap</span> <span class="token function">blurBitmap</span><span class="token punctuation">(</span><span class="token class-name">Bitmap</span> bitmap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// https://plus.google.com/+MarioViviani/posts/fhuzYkji9zz</span>

        <span class="token comment">//Let's create an empty bitmap with the same size of the bitmap we want to blur</span>
        <span class="token class-name">Bitmap</span> outBitmap <span class="token operator">=</span> <span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bitmap<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">Bitmap<span class="token punctuation">.</span>Config</span><span class="token punctuation">.</span>ARGB_8888<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Instantiate a new Renderscript</span>


        <span class="token comment">//Create an Intrinsic Blur Script using the Renderscript</span>
        <span class="token class-name">ScriptIntrinsicBlur</span> blurScript <span class="token operator">=</span> <span class="token class-name">ScriptIntrinsicBlur</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> <span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token function">U8_4</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Create the in/out Allocations with the Renderscript and the in/out bitmaps</span>
        <span class="token class-name">Allocation</span> allIn <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createFromBitmap</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Allocation</span> allOut <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createFromBitmap</span><span class="token punctuation">(</span>renderScript<span class="token punctuation">,</span> outBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Set the radius of the blur</span>
        blurScript<span class="token punctuation">.</span><span class="token function">setRadius</span><span class="token punctuation">(</span><span class="token number">25.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Perform the Renderscript</span>
        blurScript<span class="token punctuation">.</span><span class="token function">setInput</span><span class="token punctuation">(</span>allIn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        blurScript<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>allOut<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Copy the final bitmap created by the out Allocation to the outBitmap</span>
        allOut<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>outBitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// recycle the original bitmap</span>
        <span class="token comment">// nope, we are using the original bitmap as well :/</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldRecycleSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bitmap<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//After finishing everything, we destroy the Renderscript.</span>
        renderScript<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> outBitmap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isShouldRecycleSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> shouldRecycleSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setShouldRecycleSource</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> shouldRecycleSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>shouldRecycleSource <span class="token operator">=</span> shouldRecycleSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="usage"><a href="#usage" class="header-anchor">#</a> Usage:</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ImageView</span> imageViewOverlayOnViewToBeBlurred
        <span class="token punctuation">.</span><span class="token function">setImageDrawable</span><span class="token punctuation">(</span><span class="token class-name">ContextCompat</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>transparent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">View</span> viewToBeBlurred<span class="token punctuation">.</span><span class="token function">setDrawingCacheQuality</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span>DRAWING_CACHE_QUALITY_LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
viewToBeBlurred<span class="token punctuation">.</span><span class="token function">setDrawingCacheEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BlurBitmapTask</span> blurBitmapTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BlurBitmapTask</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> imageViewOverlayOnViewToBeBlurred<span class="token punctuation">)</span><span class="token punctuation">;</span>
blurBitmapTask<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>viewToBeBlurred<span class="token punctuation">.</span><span class="token function">getDrawingCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
viewToBeBlurred<span class="token punctuation">.</span><span class="token function">setDrawingCacheEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="blur-an-image"><a href="#blur-an-image" class="header-anchor">#</a> Blur an image</h2> <p>This example demonstrates how to use Renderscript API to blur an image (using Bitmap). This example uses <a href="https://developer.android.com/reference/android/renderscript/ScriptIntrinsicBlur.html" target="_blank" rel="noopener noreferrer">ScriptInstrinsicBlur<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> provided by android Renderscript API (API &gt;= 17).</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlurProcessor</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token class-name">RenderScript</span> rs<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Allocation</span> inAllocation<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Allocation</span> outAllocation<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> width<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> height<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ScriptIntrinsicBlur</span> blurScript<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BlurProcessor</span><span class="token punctuation">(</span><span class="token class-name">RenderScript</span> rs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rs <span class="token operator">=</span> rs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        blurScript <span class="token operator">=</span> <span class="token class-name">ScriptIntrinsicBlur</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>rs<span class="token punctuation">,</span> <span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token function">U8_4</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        blurScript<span class="token punctuation">.</span><span class="token function">setRadius</span><span class="token punctuation">(</span><span class="token number">7f</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set blur radius. 25 is max</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>outAllocation <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            outAllocation<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            outAllocation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// Bitmap must have ARGB_8888 config for this type</span>
        <span class="token class-name">Type</span> bitmapType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Type<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span>rs<span class="token punctuation">,</span> <span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token function">RGBA_8888</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setMipmaps</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// We are using MipmapControl.MIPMAP_NONE</span>
            <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Create output allocation</span>
        outAllocation <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createTyped</span><span class="token punctuation">(</span>rs<span class="token punctuation">,</span> bitmapType<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Create input allocation with same type as output allocation</span>
        inAllocation <span class="token operator">=</span> <span class="token class-name">Allocation</span><span class="token punctuation">.</span><span class="token function">createTyped</span><span class="token punctuation">(</span>rs<span class="token punctuation">,</span> bitmapType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>blurScript <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            blurScript<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            blurScript <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">if</span> <span class="token punctuation">(</span>inAllocation <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            inAllocation<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            inAllocation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>outAllocation <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            outAllocation<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            outAllocation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bitmap</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">Bitmap</span> bitmap<span class="token punctuation">,</span> <span class="token keyword">boolean</span> createNewBitmap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bitmap<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> width <span class="token operator">||</span> bitmap<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Throw error if required</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">// Copy data from bitmap to input allocations</span>
        inAllocation<span class="token punctuation">.</span><span class="token function">copyFrom</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Set input for blur script</span>
        blurScript<span class="token punctuation">.</span><span class="token function">setInput</span><span class="token punctuation">(</span>inAllocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// process and set data to the output allocation</span>
        blurScript<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>outAllocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>createNewBitmap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Bitmap</span> returnVal <span class="token operator">=</span> <span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> <span class="token class-name">Bitmap<span class="token punctuation">.</span>Config</span><span class="token punctuation">.</span>ARGB_8888<span class="token punctuation">)</span><span class="token punctuation">;</span>
            outAllocation<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>returnVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> returnVal<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        outAllocation<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bitmap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>    

</code></pre></div><p>Each script has a kernel which processes the data and it is generally invoked via <code>forEach</code> method.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlurActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">BlurProcessor</span> blurProcessor<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// setup layout and other stuff</span>

        
        blurProcessor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BlurProcessor</span><span class="token punctuation">(</span><span class="token class-name">Renderscript</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Load image to bitmap</span>
        <span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> <span class="token function">loadBitmapFromPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Initialize processor for this bitmap</span>
        blurProcessor<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        blurProcessor<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bitmap<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Blur image</span>
        <span class="token class-name">Bitmap</span> blurImage <span class="token operator">=</span> blurProcessor<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Use newBitamp as false if you don't want to create a new bitmap</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This concluded the example here. It is advised to do the processing in a background thread.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/android/renderscript.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/android/keyboard.html" class="prev">
        Keyboard
      </a></span> <span class="next"><a href="/android/fresco.html">
        Fresco
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/282.084ef2b7.js" defer></script>
  </body>
</html>
