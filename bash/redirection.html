<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bash - Redirection</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Append vs Truncate, Redirecting both STDOUT and STDERR, Redirecting standard output, Using named pipes, Redirecting multiple commands to the same file, Print error messages to stderr, Redirection to network addresses, Redirecting STDIN, Redirecting STDERR, STDIN, STDOUT and STDERR explained">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Bash - Redirection">
    <meta property="og:description" content="Append vs Truncate, Redirecting both STDOUT and STDERR, Redirecting standard output, Using named pipes, Redirecting multiple commands to the same file, Print error messages to stderr, Redirection to network addresses, Redirecting STDIN, Redirecting STDERR, STDIN, STDOUT and STDERR explained">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/bash/redirection.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Bash - Redirection">
    <meta name="twitter:description" content="Append vs Truncate, Redirecting both STDOUT and STDERR, Redirecting standard output, Using named pipes, Redirecting multiple commands to the same file, Print error messages to stderr, Redirection to network addresses, Redirecting STDIN, Redirecting STDERR, STDIN, STDOUT and STDERR explained">
    <meta name="twitter:url" content="/bash/redirection.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/526.77b39f4d.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Bash</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bash/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/bash/getting-started-with-bash.html" class="sidebar-link">Getting started with Bash</a></li><li><a href="/bash/script-shebang.html" class="sidebar-link">Script shebang</a></li><li><a href="/bash/navigating-directories.html" class="sidebar-link">Navigating directories</a></li><li><a href="/bash/listing-files.html" class="sidebar-link">Listing Files</a></li><li><a href="/bash/using-cat.html" class="sidebar-link">Using cat</a></li><li><a href="/bash/grep.html" class="sidebar-link">Grep</a></li><li><a href="/bash/aliasing.html" class="sidebar-link">Aliasing</a></li><li><a href="/bash/jobs-and-processes.html" class="sidebar-link">Jobs and Processes</a></li><li><a href="/bash/redirection.html" aria-current="page" class="active sidebar-link">Redirection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bash/redirection.html#append-vs-truncate" class="sidebar-link">Append vs Truncate</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#redirecting-both-stdout-and-stderr" class="sidebar-link">Redirecting both STDOUT and STDERR</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#redirecting-standard-output" class="sidebar-link">Redirecting standard output</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#using-named-pipes" class="sidebar-link">Using named pipes</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#redirecting-multiple-commands-to-the-same-file" class="sidebar-link">Redirecting multiple commands to the same file</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#print-error-messages-to-stderr" class="sidebar-link">Print error messages to stderr</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#redirection-to-network-addresses" class="sidebar-link">Redirection to network addresses</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#redirecting-stdin" class="sidebar-link">Redirecting STDIN</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#redirecting-stderr" class="sidebar-link">Redirecting STDERR</a></li><li class="sidebar-sub-header"><a href="/bash/redirection.html#stdin-stdout-and-stderr-explained" class="sidebar-link">STDIN, STDOUT and STDERR explained</a></li></ul></li><li><a href="/bash/control-structures.html" class="sidebar-link">Control Structures</a></li><li><a href="/bash/true-false-and-commands.html" class="sidebar-link">true, false and : commands</a></li><li><a href="/bash/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/bash/associative-arrays.html" class="sidebar-link">Associative arrays</a></li><li><a href="/bash/functions.html" class="sidebar-link">Functions</a></li><li><a href="/bash/bash-parameter-expansion.html" class="sidebar-link">Bash Parameter Expansion</a></li><li><a href="/bash/copying-cp.html" class="sidebar-link">Copying (cp)</a></li><li><a href="/bash/find.html" class="sidebar-link">Find</a></li><li><a href="/bash/using-sort.html" class="sidebar-link">Using sort</a></li><li><a href="/bash/sourcing.html" class="sidebar-link">Sourcing</a></li><li><a href="/bash/here-documents-and-here-strings.html" class="sidebar-link">Here documents and here strings</a></li><li><a href="/bash/quoting.html" class="sidebar-link">Quoting</a></li><li><a href="/bash/conditional-expressions.html" class="sidebar-link">Conditional Expressions</a></li><li><a href="/bash/scripting-with-parameters.html" class="sidebar-link">Scripting with Parameters</a></li><li><a href="/bash/bash-history-substitutions.html" class="sidebar-link">Bash history substitutions</a></li><li><a href="/bash/math.html" class="sidebar-link">Math</a></li><li><a href="/bash/bash-arithmetic.html" class="sidebar-link">Bash Arithmetic</a></li><li><a href="/bash/scoping.html" class="sidebar-link">Scoping</a></li><li><a href="/bash/process-substitution.html" class="sidebar-link">Process substitution</a></li><li><a href="/bash/programmable-completion.html" class="sidebar-link">Programmable completion</a></li><li><a href="/bash/customizing-ps1.html" class="sidebar-link">Customizing PS1</a></li><li><a href="/bash/brace-expansion.html" class="sidebar-link">Brace Expansion</a></li><li><a href="/bash/getopts-smart-positional-parameter-parsing.html" class="sidebar-link">getopts : smart positional-parameter parsing</a></li><li><a href="/bash/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/bash/pattern-matching-and-regular-expressions.html" class="sidebar-link">Pattern matching and regular expressions</a></li><li><a href="/bash/change-shell.html" class="sidebar-link">Change shell</a></li><li><a href="/bash/internal-variables.html" class="sidebar-link">Internal variables</a></li><li><a href="/bash/job-control.html" class="sidebar-link">Job Control</a></li><li><a href="/bash/case-statement.html" class="sidebar-link">Case statement</a></li><li><a href="/bash/read-a-file-data-stream-variable-line-by-line-and-or-field-by-field.html" class="sidebar-link">Read a file (data stream, variable) line-by-line (and/or field-by-field)?</a></li><li><a href="/bash/file-execution-sequence.html" class="sidebar-link">File execution sequence</a></li><li><a href="/bash/splitting-files.html" class="sidebar-link">Splitting Files</a></li><li><a href="/bash/file-transfer-using-scp.html" class="sidebar-link">File Transfer using scp</a></li><li><a href="/bash/pipelines.html" class="sidebar-link">Pipelines</a></li><li><a href="/bash/managing-path-environment-variable.html" class="sidebar-link">Managing PATH environment variable</a></li><li><a href="/bash/word-splitting.html" class="sidebar-link">Word splitting</a></li><li><a href="/bash/avoiding-date-using-printf.html" class="sidebar-link">Avoiding date using printf</a></li><li><a href="/bash/using-trap-to-react-to-signals-and-system-events.html" class="sidebar-link">Using &quot;trap&quot; to react to signals and system events</a></li><li><a href="/bash/chain-of-commands-and-operations.html" class="sidebar-link">Chain of commands and operations</a></li><li><a href="/bash/type-of-shells.html" class="sidebar-link">Type of Shells</a></li><li><a href="/bash/color-script-output-cross-platform.html" class="sidebar-link">Color script output (cross-platform)</a></li><li><a href="/bash/co-processes.html" class="sidebar-link">co-processes</a></li><li><a href="/bash/typing-variables.html" class="sidebar-link">Typing variables</a></li><li><a href="/bash/jobs-at-specific-times.html" class="sidebar-link">Jobs at specific times</a></li><li><a href="/bash/handling-the-system-prompt.html" class="sidebar-link">Handling the system prompt</a></li><li><a href="/bash/the-cut-command.html" class="sidebar-link">The cut command</a></li><li><a href="/bash/bash-on-windows-10.html" class="sidebar-link">Bash on Windows 10</a></li><li><a href="/bash/cut-command.html" class="sidebar-link">Cut Command</a></li><li><a href="/bash/global-and-local-variables.html" class="sidebar-link">global and local variables</a></li><li><a href="/bash/cgi-scripts.html" class="sidebar-link">CGI Scripts</a></li><li><a href="/bash/select-keyword.html" class="sidebar-link">Select keyword</a></li><li><a href="/bash/when-to-use-eval.html" class="sidebar-link">When to use eval</a></li><li><a href="/bash/networking-with-bash.html" class="sidebar-link">Networking With Bash</a></li><li><a href="/bash/parallel.html" class="sidebar-link">Parallel</a></li><li><a href="/bash/decoding-url.html" class="sidebar-link">Decoding URL</a></li><li><a href="/bash/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/bash/namespace.html" class="sidebar-link">Namespace</a></li><li><a href="/bash/creating-directories.html" class="sidebar-link">Creating directories</a></li><li><a href="/bash/strace.html" class="sidebar-link">strace</a></li><li><a href="/bash/sleep-utility.html" class="sidebar-link">Sleep utility</a></li><li><a href="/bash/pitfalls.html" class="sidebar-link">Pitfalls</a></li><li><a href="/bash/keyboard-shortcuts.html" class="sidebar-link">Keyboard shortcuts</a></li><li><a href="/bash/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="redirection"><a href="#redirection" class="header-anchor">#</a> Redirection</h1> <h2 id="append-vs-truncate"><a href="#append-vs-truncate" class="header-anchor">#</a> Append vs Truncate</h2> <h3 id="truncate"><a href="#truncate" class="header-anchor">#</a> Truncate <code>&gt;</code></h3> <ol><li>Create specified file if it does not exist.</li> <li>Truncate (remove file's content)</li> <li>Write to file</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;first line&quot;</span> <span class="token operator">&gt;</span> /tmp/lines
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;second line&quot;</span> <span class="token operator">&gt;</span> /tmp/lines

$ <span class="token function">cat</span> /tmp/lines
second line

</code></pre></div><h3 id="append"><a href="#append" class="header-anchor">#</a> Append <code>&gt;&gt;</code></h3> <ol><li>Create specified file if it does not exist.</li> <li>Append file (writing at end of file).</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Overwrite existing file</span>
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;first line&quot;</span> <span class="token operator">&gt;</span> /tmp/lines

<span class="token comment"># Append a second line</span>
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;second line&quot;</span> <span class="token operator">&gt;&gt;</span> /tmp/lines

$ <span class="token function">cat</span> /tmp/lines
first line
second line

</code></pre></div><h2 id="redirecting-both-stdout-and-stderr"><a href="#redirecting-both-stdout-and-stderr" class="header-anchor">#</a> Redirecting both STDOUT and STDERR</h2> <p>File descriptors like <code>0</code> and <code>1</code> are pointers. We change what file descriptors point to with redirection. <code>&gt;/dev/null</code> means <code>1</code> points to <code>/dev/null</code>.</p> <p>First we point <code>1</code> (<code>STDOUT</code>) to <code>/dev/null</code> then point <code>2</code> (<code>STDERR</code>) to whatever <code>1</code> points to.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># STDERR is redirect to STDOUT: redirected to /dev/null,</span>
<span class="token comment"># effectually redirecting both STDERR and STDOUT to /dev/null</span>
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>

</code></pre></div><p>This <strong>can</strong> be further shortened to the following:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token operator">&amp;&gt;</span> /dev/null

</code></pre></div><p>However, this form may be undesirable in production if shell compatibility is a concern as it conflicts with POSIX, introduces parsing ambiguity, and shells without this feature will misinterpret it:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Actual code</span>
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token operator">&amp;&gt;</span> /dev/null
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token operator">&amp;&gt;</span> /dev/null <span class="token string">'goodbye'</span>

<span class="token comment"># Desired behavior</span>
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token string">'goodbye'</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>

<span class="token comment"># Actual behavior</span>
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token operator">&amp;</span>
<span class="token builtin class-name">echo</span> <span class="token string">'hello'</span> <span class="token operator">&amp;</span> goodbye <span class="token operator">&gt;</span> /dev/null

</code></pre></div><p>NOTE: <code>&amp;&gt;</code> is known to work as desired in both Bash and Zsh.</p> <h2 id="redirecting-standard-output"><a href="#redirecting-standard-output" class="header-anchor">#</a> Redirecting standard output</h2> <p><code>&gt;</code> redirect the standard output (aka <code>STDOUT</code>) of the current command into a file or another descriptor.</p> <p>These examples write the output of the <code>ls</code> command into the file <code>file.txt</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> <span class="token operator">&gt;</span>file.txt
<span class="token operator">&gt;</span> file.txt <span class="token function">ls</span>

</code></pre></div><p>The target file is created if it doesn't exists, otherwise this file is truncated.</p> <p>The default redirection descriptor is the standard output or <code>1</code> when none is specified.
This command is equivalent to the previous examples with the standard output explicitly indicated:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>file.txt

</code></pre></div><p>Note: the redirection is initialized by the executed shell and not by the executed command, therefore it is done before the command execution.</p> <h2 id="using-named-pipes"><a href="#using-named-pipes" class="header-anchor">#</a> Using named pipes</h2> <p>Sometimes you may want to output something by one program and input it into another program, but can't use a standard pipe.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> -l <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;.log&quot;</span>

</code></pre></div><p>You could simply write to a temporary file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">touch</span> tempFile.txt
<span class="token function">ls</span> -l <span class="token operator">&gt;</span> tempFile.txt
<span class="token function">grep</span> <span class="token string">&quot;.log&quot;</span> <span class="token operator">&lt;</span> tempFile.txt

</code></pre></div><p>This works fine for most applications, however, nobody will know what <code>tempFile</code> does and someone might remove it if it contains the output of <code>ls -l</code> in that directory. This is where a named pipe comes into play:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkfifo</span> myPipe
<span class="token function">ls</span> -l <span class="token operator">&gt;</span> myPipe
<span class="token function">grep</span> <span class="token string">&quot;.log&quot;</span> <span class="token operator">&lt;</span> myPipe

</code></pre></div><p><code>myPipe</code> is technically a file (everything is in Linux), so let's do <code>ls -l</code> in an empty directory that we just created a pipe in:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> pipeFolder
<span class="token builtin class-name">cd</span> pipeFolder
<span class="token function">mkfifo</span> myPipe
<span class="token function">ls</span> -l

</code></pre></div><p>The output is:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>prw-r--r-- <span class="token number">1</span> root root <span class="token number">0</span> Jul <span class="token number">25</span> <span class="token number">11</span>:20 myPipe

</code></pre></div><p>Notice the first character in the permissions, it's listed as a pipe, not a file.</p> <p>Now let's do something cool.</p> <p>Open one terminal, and make note of the directory (or create one so that cleanup is easy), and make a pipe.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkfifo</span> myPipe

</code></pre></div><p>Now let's put something in the pipe.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello from the other side&quot;</span> <span class="token operator">&gt;</span> myPipe

</code></pre></div><p>You'll notice this hangs, the other side of the pipe is still closed. Let's open up the other side of the pipe and let that stuff through.</p> <p>Open another terminal and go to the directory that the pipe is in (or if you know it, prepend it to the pipe):</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&lt;</span> myPipe

</code></pre></div><p>You'll notice that after <code>hello from the other side</code> is output, the program in the first terminal finishes, as does that in the second terminal.</p> <p>Now run the commands in reverse. Start with <code>cat &lt; myPipe</code> and then echo something into it. It still works, because a program will wait until something is put into the pipe before terminating, because it knows it has to get something.</p> <p>Named pipes can be useful for moving information between terminals or between programs.</p> <p>Pipes are small. Once full, the writer blocks until some reader reads the contents, so you need to either run the reader and writer in different terminals or run one or the other in the background:</p> <div class="language- extra-class"><pre class="language-text"><code>
ls -l /tmp &gt; myPipe &amp;
 cat &lt; myPipe

</code></pre></div><p><strong>More examples using named pipes:</strong></p> <li>
Example 1 - all commands on the same terminal / same shell
<div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token punctuation">{</span> <span class="token function">ls</span> -l <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> file3<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span>mypipe <span class="token operator">&amp;</span>
$ <span class="token function">cat</span> <span class="token operator">&lt;</span>mypipe
<span class="token comment"># Output: Prints ls -l data and then prints file3 contents on screen</span>

</code></pre></div></li> <li>
Example 2 - all commands on the same terminal / same shell
<div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> -l <span class="token operator">&gt;</span>mypipe <span class="token operator">&amp;</span>
$ <span class="token function">cat</span> file3 <span class="token operator">&gt;</span>mypipe <span class="token operator">&amp;</span>
$ <span class="token function">cat</span> <span class="token operator">&lt;</span>mypipe
<span class="token comment">#Output: This prints on screen the contents of mypipe.</span>

</code></pre></div><p>Mind that first contents of <code>file3</code> are displayed and then the <code>ls -l</code> data is displayed (LIFO configuration).</p></li> <li>
Example 3 - all commands on the same terminal / same shell
<div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token punctuation">{</span> <span class="token assign-left variable">pipedata</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token operator">&lt;</span>mypipe<span class="token variable">)</span></span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$pipedata</span>&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span>
$ <span class="token function">ls</span> <span class="token operator">&gt;</span>mypipe
<span class="token comment"># Output: Prints the output of ls directly on screen</span>

</code></pre></div><p>Mind that the variable <code>$pipedata</code> is not available for usage in the main terminal / main shell since the use of <code>&amp;</code> invokes a subshell and <code>$pipedata</code> was only available in this subshell.</p></li> <li>
Example 4 - all commands on the same terminal / same shell
<div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">export</span> pipedata
$ <span class="token assign-left variable">pipedata</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token operator">&lt;</span>mypipe<span class="token variable">)</span></span> <span class="token operator">&amp;</span>
$ <span class="token function">ls</span> -l *.sh <span class="token operator">&gt;</span>mypipe
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$pipedata</span>&quot;</span>
<span class="token comment">#Output : Prints correctly the contents of mypipe</span>

</code></pre></div><p>This prints correctly the value of <code>$pipedata</code> variable in the main shell due to the export declaration of the variable. The main terminal/main shell is not hanging due to the invocation of a background shell (<code>&amp;</code>).</p></li> <h2 id="redirecting-multiple-commands-to-the-same-file"><a href="#redirecting-multiple-commands-to-the-same-file" class="header-anchor">#</a> Redirecting multiple commands to the same file</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;contents of home directory&quot;</span>
  <span class="token function">ls</span> ~
<span class="token punctuation">}</span> <span class="token operator">&gt;</span> output.txt

</code></pre></div><h2 id="print-error-messages-to-stderr"><a href="#print-error-messages-to-stderr" class="header-anchor">#</a> Print error messages to stderr</h2> <p>Error messages are generally included in a script for debugging purposes or for providing rich user experience. Simply writing error message like this:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cmd <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">'cmd failed'</span>

</code></pre></div><p>may work for simple cases but it's not the usual way. In this example, the error message will pollute the actual output of the script by mixing both errors and successful output in <code>stdout</code>.</p> <p>In short, error message should go to <code>stderr</code> not <code>stdout</code>. It's pretty simple:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cmd <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">'cmd failed'</span> <span class="token operator">&gt;</span>/dev/stderr

</code></pre></div><p>Another example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> cmd<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">'success'</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">'cmd failed'</span> <span class="token operator">&gt;</span>/dev/stderr
<span class="token keyword">fi</span>

</code></pre></div><p>In the above example, the success message will be printed on <code>stdout</code> while the error message will be printed on <code>stderr</code>.</p> <p>A better way to print error message is to define a function:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">err</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;E: <span class="token variable">$*</span>&quot;</span> <span class="token operator">&gt;&gt;</span>/dev/stderr
<span class="token punctuation">}</span>

</code></pre></div><p>Now, when you have to print an error:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>err <span class="token string">&quot;My error message&quot;</span>

</code></pre></div><h2 id="redirection-to-network-addresses"><a href="#redirection-to-network-addresses" class="header-anchor">#</a> Redirection to network addresses</h2> <p>Bash treats some paths as special and can do some network communication by writing to <code>/dev/{udp|tcp}/host/port</code>. Bash cannot setup a listening server, but can initiate a connection, and for TCP can read the results at least.</p> <p>For example, to send a simple web request one could do:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>/dev/tcp/www.google.com/80
<span class="token builtin class-name">printf</span> <span class="token string">'GET / HTTP/1.0\r\n\r\n'</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token function">cat</span> <span class="token operator">&lt;</span><span class="token file-descriptor important">&amp;3</span>

</code></pre></div><p>and the results of <code>www.google.com</code>'s default web page will be printed to <code>stdout</code>.</p> <p>Similarly</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">printf</span> <span class="token string">'HI\n'</span> <span class="token operator">&gt;</span>/dev/udp/192.168.1.1/6666

</code></pre></div><p>would send a UDP message containing <code>HI\n</code> to a listener on <code>192.168.1.1:6666</code></p> <h2 id="redirecting-stdin"><a href="#redirecting-stdin" class="header-anchor">#</a> Redirecting STDIN</h2> <p><code>&lt;</code> reads from its right argument and writes to its left argument.</p> <p>To write a file into <code>STDIN</code> we should <strong>read</strong> <code>/tmp/a_file</code> and <strong>write</strong> into <code>STDIN</code> i.e <code>0&lt;/tmp/a_file</code></p> <p>Note: Internal file descriptor defaults to <code>0</code> (<code>STDIN</code>) for <code>&lt;</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">&gt;</span> /tmp/list.txt
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">&gt;&gt;</span> /tmp/list.txt
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;c&quot;</span> <span class="token operator">&gt;&gt;</span> /tmp/list.txt
$ <span class="token function">sort</span> <span class="token operator">&lt;</span> /tmp/list.txt
a
b
c

</code></pre></div><h2 id="redirecting-stderr"><a href="#redirecting-stderr" class="header-anchor">#</a> Redirecting STDERR</h2> <p><code>2</code> is <code>STDERR</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ echo_to_stderr <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token comment"># echos nothing</span>

</code></pre></div><p>Definitions:</p> <p><code>echo_to_stderr</code> is a command that writes <code>&quot;stderr&quot;</code> to <code>STDERR</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">echo_to_stderr</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> stderr <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<span class="token punctuation">}</span>

$ echo_to_stderr
stderr

</code></pre></div><h2 id="stdin-stdout-and-stderr-explained"><a href="#stdin-stdout-and-stderr-explained" class="header-anchor">#</a> STDIN, STDOUT and STDERR explained</h2> <p>Commands have one input (STDIN) and two kinds of outputs, standard output (STDOUT) and standard error (STDERR).</p> <p>For example:</p> <p><strong>STDIN</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>root@server~<span class="token comment"># read</span>
Type some text here

</code></pre></div><p>Standard input is used to provide input to a program.
(Here we're using the <a href="http://stackoverflow.com/documentation/bash/5473" target="_blank" rel="noopener noreferrer"><code>read</code> builtin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to read a line from STDIN.)</p> <p><strong>STDOUT</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>root@server~<span class="token comment"># ls file</span>
<span class="token function">file</span>

</code></pre></div><p>Standard output is generally used for &quot;normal&quot; output from a command. For example, <code>ls</code> lists files, so the files are sent to STDOUT.</p> <p><strong>STDERR</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>root@server~<span class="token comment"># ls anotherfile</span>
ls: cannot access <span class="token string">'anotherfile'</span><span class="token builtin class-name">:</span> No such <span class="token function">file</span> or directory

</code></pre></div><p>Standard error is (as the name implies) used for error messages. Because this message is not a list of files, it is sent to STDERR.</p> <p>STDIN, STDOUT and STDERR are the three <strong>standard streams.</strong> They are identified to the shell by a number rather than a name:</p> <p>0 = Standard in<br>
1 = Standard out<br>
2 = Standard error</p> <p>By default, STDIN is attached to the keyboard, and both STDOUT and STDERR appear in the terminal. However, we can redirect either STDOUT or STDERR to whatever we need. For example, let's say that you only need the standard out and all error messages printed on standard error should be suppressed. That's when we use the descriptors <code>1</code> and <code>2</code>.</p> <p><strong>Redirecting STDERR to /dev/null</strong><br>
Taking the previous example,</p> <div class="language-bash extra-class"><pre class="language-bash"><code>root@server~<span class="token comment"># ls anotherfile 2&gt;/dev/null</span>
root@server~<span class="token comment">#</span>

</code></pre></div><p>In this case, if there is any STDERR, it will be redirected to /dev/null (a special file which ignores anything put into it), so you won't get any error output on the shell.</p> <h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>command &lt;/path/to/file # Redirect standard input to file</li> <li>command &gt;/path/to/file # Redirect standard output to flie</li> <li>command file_descriptor&gt;/path/to/file # Redirect output of file_descriptor to file</li> <li>command &gt;&amp;file_descriptor # Redirect output to file_descriptor</li> <li>command file_descriptor&gt;&amp;another_file_descriptor # Redirect file_descriptor to another_file_descriptor</li> <li>command &lt;&amp;file_descriptor # Redirect file_descriptor to standard input</li> <li>command &amp;&gt;/path/to/file # Redirect standard output and standard error to file</li></ul> <h4 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h4> <table><thead><tr><th>Parameter</th> <th>Details</th></tr></thead> <tbody><tr><td>internal file descriptor</td> <td>An integer.</td></tr> <tr><td>direction</td> <td>One of <code>&gt;</code>, <code>&lt;</code> or <code>&lt;&gt;</code></td></tr> <tr><td>external file descriptor or path</td> <td><code>&amp;</code> followed by an integer for file descriptor or a path.</td></tr></tbody></table> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>UNIX console programs have an input file and two output files (input and output streams, as well as devices, are treated as files by the OS.) These are typically the keyboard and screen, respectively, but any or all of them can be redirected to come from — or go to — a file or other program.</p> <p><code>STDIN</code> is standard input, and is how the program receives interactive input. <code>STDIN</code> is usually assigned file descriptor 0.</p> <p><code>STDOUT</code> is standard output. Whatever is emitted on <code>STDOUT</code> is considered the &quot;result&quot; of the program. <code>STDOUT</code> is usually assigned file descriptor 1.</p> <p><code>STDERR</code> is where error messages are displayed. Typically, when running a program from the console, <code>STDERR</code> is output on the screen and is indistinguishable from <code>STDOUT</code>. <code>STDERR</code> is usually assigned file descriptor 2.</p> <p><strong>The order of redirection is important</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">&gt;</span> <span class="token function">file</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>

</code></pre></div><p>Redirects both (<code>STDOUT</code> and <code>STDERR</code>) to the file.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&gt;</span> <span class="token function">file</span>

</code></pre></div><p>Redirects only <code>STDOUT</code>, because the file descriptor 2 is redirected to the file pointed to by file descriptor 1 (which is not the file <code>file</code> yet when the statement is evaluated).</p> <p>Each command in a pipeline has its own <code>STDERR</code> (and <code>STDOUT</code>) because each is a new process. This can create surprising results if you expect a redirect to affect the entire pipeline. For example this command (wrapped for legibility):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ python -c <span class="token string">'import sys;print &gt;&gt; sys.stderr, &quot;Python error!&quot;'</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">cut</span> -f1 <span class="token operator"><span class="token file-descriptor important">2</span>&gt;&gt;</span> error.log

</code></pre></div><p>will print &quot;Python error!&quot; to the console rather than the log file. Instead, attach the error to the command you want to capture:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ python -c <span class="token string">'import sys;print &gt;&gt; sys.stderr, &quot;Python error!&quot;'</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;&gt;</span> error.log <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">cut</span> -f1

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/bash/redirection.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bash/jobs-and-processes.html" class="prev">
        Jobs and Processes
      </a></span> <span class="next"><a href="/bash/control-structures.html">
        Control Structures
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/526.77b39f4d.js" defer></script>
  </body>
</html>
