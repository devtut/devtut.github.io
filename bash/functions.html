<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bash - Functions</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Functions with arguments, Simple Function, Handling flags and optional parameters, Return value from a function, The exit code of a function is the exit code of its last command, Print the function definition, A function that accepts named parameters">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Bash - Functions">
    <meta property="og:description" content="Functions with arguments, Simple Function, Handling flags and optional parameters, Return value from a function, The exit code of a function is the exit code of its last command, Print the function definition, A function that accepts named parameters">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/bash/functions.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Bash - Functions">
    <meta name="twitter:description" content="Functions with arguments, Simple Function, Handling flags and optional parameters, Return value from a function, The exit code of a function is the exit code of its last command, Print the function definition, A function that accepts named parameters">
    <meta name="twitter:url" content="/bash/functions.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/500.d41b8348.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Bash</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bash/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/bash/getting-started-with-bash.html" class="sidebar-link">Getting started with Bash</a></li><li><a href="/bash/script-shebang.html" class="sidebar-link">Script shebang</a></li><li><a href="/bash/navigating-directories.html" class="sidebar-link">Navigating directories</a></li><li><a href="/bash/listing-files.html" class="sidebar-link">Listing Files</a></li><li><a href="/bash/using-cat.html" class="sidebar-link">Using cat</a></li><li><a href="/bash/grep.html" class="sidebar-link">Grep</a></li><li><a href="/bash/aliasing.html" class="sidebar-link">Aliasing</a></li><li><a href="/bash/jobs-and-processes.html" class="sidebar-link">Jobs and Processes</a></li><li><a href="/bash/redirection.html" class="sidebar-link">Redirection</a></li><li><a href="/bash/control-structures.html" class="sidebar-link">Control Structures</a></li><li><a href="/bash/true-false-and-commands.html" class="sidebar-link">true, false and : commands</a></li><li><a href="/bash/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/bash/associative-arrays.html" class="sidebar-link">Associative arrays</a></li><li><a href="/bash/functions.html" aria-current="page" class="active sidebar-link">Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bash/functions.html#functions-with-arguments" class="sidebar-link">Functions with arguments</a></li><li class="sidebar-sub-header"><a href="/bash/functions.html#simple-function" class="sidebar-link">Simple Function</a></li><li class="sidebar-sub-header"><a href="/bash/functions.html#handling-flags-and-optional-parameters" class="sidebar-link">Handling flags and optional parameters</a></li><li class="sidebar-sub-header"><a href="/bash/functions.html#return-value-from-a-function" class="sidebar-link">Return value from a function</a></li><li class="sidebar-sub-header"><a href="/bash/functions.html#the-exit-code-of-a-function-is-the-exit-code-of-its-last-command" class="sidebar-link">The exit code of a function is the exit code of its last command</a></li><li class="sidebar-sub-header"><a href="/bash/functions.html#print-the-function-definition" class="sidebar-link">Print the function definition</a></li><li class="sidebar-sub-header"><a href="/bash/functions.html#a-function-that-accepts-named-parameters" class="sidebar-link">A function that accepts named parameters</a></li></ul></li><li><a href="/bash/bash-parameter-expansion.html" class="sidebar-link">Bash Parameter Expansion</a></li><li><a href="/bash/copying-cp.html" class="sidebar-link">Copying (cp)</a></li><li><a href="/bash/find.html" class="sidebar-link">Find</a></li><li><a href="/bash/using-sort.html" class="sidebar-link">Using sort</a></li><li><a href="/bash/sourcing.html" class="sidebar-link">Sourcing</a></li><li><a href="/bash/here-documents-and-here-strings.html" class="sidebar-link">Here documents and here strings</a></li><li><a href="/bash/quoting.html" class="sidebar-link">Quoting</a></li><li><a href="/bash/conditional-expressions.html" class="sidebar-link">Conditional Expressions</a></li><li><a href="/bash/scripting-with-parameters.html" class="sidebar-link">Scripting with Parameters</a></li><li><a href="/bash/bash-history-substitutions.html" class="sidebar-link">Bash history substitutions</a></li><li><a href="/bash/math.html" class="sidebar-link">Math</a></li><li><a href="/bash/bash-arithmetic.html" class="sidebar-link">Bash Arithmetic</a></li><li><a href="/bash/scoping.html" class="sidebar-link">Scoping</a></li><li><a href="/bash/process-substitution.html" class="sidebar-link">Process substitution</a></li><li><a href="/bash/programmable-completion.html" class="sidebar-link">Programmable completion</a></li><li><a href="/bash/customizing-ps1.html" class="sidebar-link">Customizing PS1</a></li><li><a href="/bash/brace-expansion.html" class="sidebar-link">Brace Expansion</a></li><li><a href="/bash/getopts-smart-positional-parameter-parsing.html" class="sidebar-link">getopts : smart positional-parameter parsing</a></li><li><a href="/bash/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/bash/pattern-matching-and-regular-expressions.html" class="sidebar-link">Pattern matching and regular expressions</a></li><li><a href="/bash/change-shell.html" class="sidebar-link">Change shell</a></li><li><a href="/bash/internal-variables.html" class="sidebar-link">Internal variables</a></li><li><a href="/bash/job-control.html" class="sidebar-link">Job Control</a></li><li><a href="/bash/case-statement.html" class="sidebar-link">Case statement</a></li><li><a href="/bash/read-a-file-data-stream-variable-line-by-line-and-or-field-by-field.html" class="sidebar-link">Read a file (data stream, variable) line-by-line (and/or field-by-field)?</a></li><li><a href="/bash/file-execution-sequence.html" class="sidebar-link">File execution sequence</a></li><li><a href="/bash/splitting-files.html" class="sidebar-link">Splitting Files</a></li><li><a href="/bash/file-transfer-using-scp.html" class="sidebar-link">File Transfer using scp</a></li><li><a href="/bash/pipelines.html" class="sidebar-link">Pipelines</a></li><li><a href="/bash/managing-path-environment-variable.html" class="sidebar-link">Managing PATH environment variable</a></li><li><a href="/bash/word-splitting.html" class="sidebar-link">Word splitting</a></li><li><a href="/bash/avoiding-date-using-printf.html" class="sidebar-link">Avoiding date using printf</a></li><li><a href="/bash/using-trap-to-react-to-signals-and-system-events.html" class="sidebar-link">Using &quot;trap&quot; to react to signals and system events</a></li><li><a href="/bash/chain-of-commands-and-operations.html" class="sidebar-link">Chain of commands and operations</a></li><li><a href="/bash/type-of-shells.html" class="sidebar-link">Type of Shells</a></li><li><a href="/bash/color-script-output-cross-platform.html" class="sidebar-link">Color script output (cross-platform)</a></li><li><a href="/bash/co-processes.html" class="sidebar-link">co-processes</a></li><li><a href="/bash/typing-variables.html" class="sidebar-link">Typing variables</a></li><li><a href="/bash/jobs-at-specific-times.html" class="sidebar-link">Jobs at specific times</a></li><li><a href="/bash/handling-the-system-prompt.html" class="sidebar-link">Handling the system prompt</a></li><li><a href="/bash/the-cut-command.html" class="sidebar-link">The cut command</a></li><li><a href="/bash/bash-on-windows-10.html" class="sidebar-link">Bash on Windows 10</a></li><li><a href="/bash/cut-command.html" class="sidebar-link">Cut Command</a></li><li><a href="/bash/global-and-local-variables.html" class="sidebar-link">global and local variables</a></li><li><a href="/bash/cgi-scripts.html" class="sidebar-link">CGI Scripts</a></li><li><a href="/bash/select-keyword.html" class="sidebar-link">Select keyword</a></li><li><a href="/bash/when-to-use-eval.html" class="sidebar-link">When to use eval</a></li><li><a href="/bash/networking-with-bash.html" class="sidebar-link">Networking With Bash</a></li><li><a href="/bash/parallel.html" class="sidebar-link">Parallel</a></li><li><a href="/bash/decoding-url.html" class="sidebar-link">Decoding URL</a></li><li><a href="/bash/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/bash/namespace.html" class="sidebar-link">Namespace</a></li><li><a href="/bash/creating-directories.html" class="sidebar-link">Creating directories</a></li><li><a href="/bash/strace.html" class="sidebar-link">strace</a></li><li><a href="/bash/sleep-utility.html" class="sidebar-link">Sleep utility</a></li><li><a href="/bash/pitfalls.html" class="sidebar-link">Pitfalls</a></li><li><a href="/bash/keyboard-shortcuts.html" class="sidebar-link">Keyboard shortcuts</a></li><li><a href="/bash/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h1> <h2 id="functions-with-arguments"><a href="#functions-with-arguments" class="header-anchor">#</a> Functions with arguments</h2> <p>In <code>helloJohn.sh</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function-name function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello, <span class="token variable">$name</span>&quot;</span>
<span class="token punctuation">}</span>

greet <span class="token string">&quot;John Doe&quot;</span>

</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># running above script</span>
$ <span class="token function">bash</span> helloJohn.sh
Hello, John Doe

</code></pre></div><li>
If you don't modify the argument in any way, there is no need to copy it to a `local` variable - simply `echo &quot;Hello, $1&quot;`.
</li> <li>
You can use `$1`, `$2`, `$3` and so on to access the arguments inside the function.
<blockquote>
**Note:** for arguments more than 9 `$10` won't work (bash will read it as **$1**0), you need to do `${10}`, `${11}` and so on.
</blockquote></li> <li>
`$@` refers to all arguments of a function:
<div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function-name function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token punctuation">}</span>

foo <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token comment"># output =&gt; 1 2 3</span>

</code></pre></div><blockquote>
**Note:** You should practically always use double quotes around `&quot;$@&quot;`, like here.
</blockquote>
Omitting the quotes will cause the shell to expand wildcards (even when the user specifically quoted them in order to avoid that) and generally introduce unwelcome behavior and potentially even security problems.
<div class="language-bash extra-class"><pre class="language-bash"><code>foo <span class="token string">&quot;string with spaces;&quot;</span> <span class="token string">'$HOME'</span> <span class="token string">&quot;*&quot;</span>
<span class="token comment"># output =&gt; string with spaces; $HOME *</span>

</code></pre></div></li> <li><p>for default arguments use `${1:-default_val}`.
Eg:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function-name function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token variable">${1<span class="token operator">:-</span>25}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$val</span>&quot;</span>
<span class="token punctuation">}</span>

foo     <span class="token comment"># output =&gt; 25</span>
foo <span class="token number">30</span>  <span class="token comment"># output =&gt; 30</span>

</code></pre></div></li> <li>
to require an argument use `${var:?error message}`
<div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token variable">${1<span class="token operator">:?</span>Must provide an argument}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$val</span>&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div></li> <blockquote></blockquote> <p><strong>Note:</strong> You should practically always use double quotes around <code>&quot;$@&quot;</code>, like here.</p> <h2 id="simple-function"><a href="#simple-function" class="header-anchor">#</a> Simple Function</h2> <p>In <code>helloWorld.sh</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Define a function greet</span>
<span class="token function-name function">greet</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># Call the function greet</span>
greet

</code></pre></div><p>In running the script, we see our message</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">bash</span> helloWorld.sh
Hello World<span class="token operator">!</span>

</code></pre></div><p><strong>Note that</strong> <a href="http://stackoverflow.com/documentation/bash/564/sourcing" target="_blank" rel="noopener noreferrer">sourcing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> a file with functions makes them available in your current bash session.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">source</span> helloWorld.sh   <span class="token comment"># or, more portably, &quot;. helloWorld.sh&quot;</span>
$ greet
Hello World<span class="token operator">!</span>

</code></pre></div><p>You can <code>export</code> a function in some shells, so that it is exposed to child processes.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">bash</span> -c <span class="token string">'greet'</span>  <span class="token comment"># fails</span>
<span class="token builtin class-name">export</span> -f greet  <span class="token comment"># export function; note -f</span>
<span class="token function">bash</span> -c <span class="token string">'greet'</span>  <span class="token comment"># success</span>

</code></pre></div><h2 id="handling-flags-and-optional-parameters"><a href="#handling-flags-and-optional-parameters" class="header-anchor">#</a> Handling flags and optional parameters</h2> <p>The <strong>getopts</strong> builtin can be used inside functions to write functions that accommodate flags and optional parameters.  This presents no special difficulty but one has to handle appropriately the values touched by <strong>getopts</strong>.  As an example, we define a <strong>failwith</strong> function that writes a message on <strong>stderr</strong> and exits with code 1 or an arbitrary code supplied as parameter to the <code>-x</code> option:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># failwith [-x STATUS] PRINTF-LIKE-ARGV</span>
<span class="token comment">#  Fail with the given diagnostic message</span>
<span class="token comment">#</span>
<span class="token comment"># The -x flag can be used to convey a custom exit status, instead of</span>
<span class="token comment"># the value 1.  A newline is automatically added to the output.</span>

<span class="token function-name function">failwith</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token environment constant">OPTIND</span> OPTION OPTARG status

    <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">1</span>
    <span class="token assign-left variable"><span class="token environment constant">OPTIND</span></span><span class="token operator">=</span><span class="token number">1</span>

    <span class="token keyword">while</span> <span class="token builtin class-name">getopts</span> <span class="token string">'x:'</span> OPTION<span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token keyword">case</span> <span class="token variable">${OPTION}</span> <span class="token keyword">in</span>
            x<span class="token punctuation">)</span>    <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${OPTARG}</span>&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
            *<span class="token punctuation">)</span>    <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token file-descriptor important">&amp;2</span> <span class="token builtin class-name">printf</span> <span class="token string">'failwith: %s: Unsupported option.\n'</span> <span class="token string">&quot;<span class="token variable">${OPTION}</span>&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token keyword">esac</span>
    <span class="token keyword">done</span>

    <span class="token builtin class-name">shift</span> <span class="token variable"><span class="token variable">$((</span> OPTIND <span class="token operator">-</span> <span class="token number">1</span> <span class="token variable">))</span></span>
    <span class="token punctuation">{</span>
        <span class="token builtin class-name">printf</span> <span class="token string">'Failure: '</span>
        <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
        <span class="token builtin class-name">printf</span> <span class="token string">'\n'</span>
    <span class="token punctuation">}</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token file-descriptor important">&amp;2</span>
    <span class="token builtin class-name">exit</span> <span class="token string">&quot;<span class="token variable">${status}</span>&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This function can be used as follows:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>failwith <span class="token string">'%s: File not found.'</span> <span class="token string">&quot;<span class="token variable">${filename}</span>&quot;</span>
failwith -x <span class="token number">70</span> <span class="token string">'General internal error.'</span>

</code></pre></div><p>and so on.</p> <p>Note that as for <strong>printf</strong>, variables should not be used as first argument.  If the message to print consists of the content of a variable, one should use the <code>%s</code> specifier to print it, like in</p> <div class="language-bash extra-class"><pre class="language-bash"><code>failwith <span class="token string">'%s'</span> <span class="token string">&quot;<span class="token variable">${message}</span>&quot;</span>

</code></pre></div><h2 id="return-value-from-a-function"><a href="#return-value-from-a-function" class="header-anchor">#</a> Return value from a function</h2> <p>The <code>return</code> statement in Bash doesn't return a value like C-functions, instead it exits the function with a return status. You can think of it as the exit status of that function.</p> <p>If you want to return a value from the function then send the value to <code>stdout</code> like this:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token string">&quot;Sample value to be returned&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span>&quot;</span>
    <span class="token comment">#printf &quot;%s\n&quot; &quot;$var&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Now, if you do:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>fun<span class="token variable">)</span></span>&quot;</span>

</code></pre></div><p>the output of <code>fun</code> will be stored in <code>$var</code>.</p> <h2 id="the-exit-code-of-a-function-is-the-exit-code-of-its-last-command"><a href="#the-exit-code-of-a-function-is-the-exit-code-of-its-last-command" class="header-anchor">#</a> The exit code of a function is the exit code of its last command</h2> <p>Consider this example function to check if a host is up:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">is_alive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">ping</span> -c1 <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">&amp;&gt;</span> /dev/null
<span class="token punctuation">}</span>

</code></pre></div><p>This function sends a single ping to the host specified by the first function parameter.
The output and error output of <code>ping</code> are both redirected to <code>/dev/null</code>,
so the function will never output anything.
But the <code>ping</code> command will have exit code 0 on success,
and non-zero on failure.
As this is the last (and in this example, the only) command of the function,
the exit code of <code>ping</code> will be reused for the exit code of the function itself.</p> <p>This fact is very useful in conditional statements.</p> <p>For example, if host <code>graucho</code> is up, then connect to it with <code>ssh</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> is_alive graucho<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">ssh</span> graucho
<span class="token keyword">fi</span>

</code></pre></div><p>Another example: repeatedly check until host <code>graucho</code> is up, and then connect to it with <code>ssh</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token operator">!</span> is_alive graucho<span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token function">sleep</span> <span class="token number">5</span>
<span class="token keyword">done</span>
<span class="token function">ssh</span> graucho

</code></pre></div><h2 id="print-the-function-definition"><a href="#print-the-function-definition" class="header-anchor">#</a> Print the function definition</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">getfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">declare</span> -f <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;I am a sample function&quot;</span>
<span class="token punctuation">}</span>

<span class="token assign-left variable">funcd</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>getfunc func<span class="token variable">)</span></span>&quot;</span> 
getfunc func <span class="token comment"># or echo &quot;$funcd&quot;</span>

</code></pre></div><p>Output:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">func</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;I am a sample function&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="a-function-that-accepts-named-parameters"><a href="#a-function-that-accepts-named-parameters" class="header-anchor">#</a> A function that accepts named parameters</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$#</span>&quot;</span> -gt <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
      -f<span class="token operator">|</span>--follow<span class="token punctuation">)</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">FOLLOW</span><span class="token operator">=</span><span class="token string">&quot;following&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
      -t<span class="token operator">|</span>--tail<span class="token punctuation">)</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">TAIL</span><span class="token operator">=</span><span class="token string">&quot;tail=<span class="token variable">$2</span>&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    <span class="token builtin class-name">shift</span>
  <span class="token keyword">done</span>

  <span class="token builtin class-name">echo</span> <span class="token string">&quot;FOLLOW: <span class="token variable">$FOLLOW</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;TAIL: <span class="token variable">$TAIL</span>&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Example usage:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>foo -f
foo -t <span class="token number">10</span>
foo -f --tail <span class="token number">10</span>
foo --follow --tail <span class="token number">10</span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <li>
Define a function with the `function` keyword:
<div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">f</span> <span class="token punctuation">{</span>

</code></pre></div><p>}
</p></li> <li>
Define a function with <code>()</code>:<p></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function-name function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

</code></pre></div><p>}
</p></li> <li>
Define a function with both the <code>function</code> keyword and <code>()</code>:<p></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

</code></pre></div><p>}
</p></li><p></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/bash/functions.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bash/associative-arrays.html" class="prev">
        Associative arrays
      </a></span> <span class="next"><a href="/bash/bash-parameter-expansion.html">
        Bash Parameter Expansion
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/500.d41b8348.js" defer></script>
  </body>
</html>
