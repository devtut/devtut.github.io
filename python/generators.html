<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python - Generators</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Introduction, Infinite sequences, Sending objects to a generator, Yielding all values from another iterable, Iteration, The next() function, Coroutines, Yield with recursion: recursively listing all files in a directory, Refactoring list-building code, Generator expressions, Using a generator to find Fibonacci Numbers, Searching, Iterating over generators in parallel">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Python - Generators">
    <meta property="og:description" content="Introduction, Infinite sequences, Sending objects to a generator, Yielding all values from another iterable, Iteration, The next() function, Coroutines, Yield with recursion: recursively listing all files in a directory, Refactoring list-building code, Generator expressions, Using a generator to find Fibonacci Numbers, Searching, Iterating over generators in parallel">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/python/generators.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Python - Generators">
    <meta name="twitter:description" content="Introduction, Infinite sequences, Sending objects to a generator, Yielding all values from another iterable, Iteration, The next() function, Coroutines, Yield with recursion: recursively listing all files in a directory, Refactoring list-building code, Generator expressions, Using a generator to find Fibonacci Numbers, Searching, Iterating over generators in parallel">
    <meta name="twitter:url" content="/python/generators.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2711.2f4bba7a.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/python/getting-started-with-python-language.html" class="sidebar-link">Getting started with Python Language</a></li><li><a href="/python/python-data-types.html" class="sidebar-link">Python Data Types</a></li><li><a href="/python/indentation.html" class="sidebar-link">Indentation</a></li><li><a href="/python/comments-and-documentation.html" class="sidebar-link">Comments and Documentation</a></li><li><a href="/python/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/python/enum.html" class="sidebar-link">Enum</a></li><li><a href="/python/set.html" class="sidebar-link">Set</a></li><li><a href="/python/simple-mathematical-operators.html" class="sidebar-link">Simple Mathematical Operators</a></li><li><a href="/python/bitwise-operators.html" class="sidebar-link">Bitwise Operators</a></li><li><a href="/python/boolean-operators.html" class="sidebar-link">Boolean Operators</a></li><li><a href="/python/operator-precedence.html" class="sidebar-link">Operator Precedence</a></li><li><a href="/python/variable-scope-and-binding.html" class="sidebar-link">Variable Scope and Binding</a></li><li><a href="/python/conditionals.html" class="sidebar-link">Conditionals</a></li><li><a href="/python/comparisons.html" class="sidebar-link">Comparisons</a></li><li><a href="/python/loops.html" class="sidebar-link">Loops</a></li><li><a href="/python/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/python/multidimensional-arrays.html" class="sidebar-link">Multidimensional arrays</a></li><li><a href="/python/dictionary.html" class="sidebar-link">Dictionary</a></li><li><a href="/python/list.html" class="sidebar-link">List</a></li><li><a href="/python/list-comprehensions.html" class="sidebar-link">List Comprehensions</a></li><li><a href="/python/list-slicing-selecting-parts-of-lists.html" class="sidebar-link">List slicing (selecting parts of lists)</a></li><li><a href="/python/groupby.html" class="sidebar-link">groupby()</a></li><li><a href="/python/linked-lists.html" class="sidebar-link">Linked lists</a></li><li><a href="/python/linked-list-node.html" class="sidebar-link">Linked List Node</a></li><li><a href="/python/filter.html" class="sidebar-link">Filter</a></li><li><a href="/python/heapq.html" class="sidebar-link">Heapq</a></li><li><a href="/python/tuple.html" class="sidebar-link">Tuple</a></li><li><a href="/python/basic-input-and-output.html" class="sidebar-link">Basic Input and Output</a></li><li><a href="/python/files-folders-i-o.html" class="sidebar-link">Files &amp; Folders I/O</a></li><li><a href="/python/os-path.html" class="sidebar-link">os.path</a></li><li><a href="/python/iterables-and-iterators.html" class="sidebar-link">Iterables and Iterators</a></li><li><a href="/python/functions.html" class="sidebar-link">Functions</a></li><li><a href="/python/defining-functions-with-list-arguments.html" class="sidebar-link">Defining functions with list arguments</a></li><li><a href="/python/functional-programming-in-python.html" class="sidebar-link">Functional Programming in Python</a></li><li><a href="/python/partial-functions.html" class="sidebar-link">Partial functions</a></li><li><a href="/python/decorators.html" class="sidebar-link">Decorators</a></li><li><a href="/python/classes.html" class="sidebar-link">Classes</a></li><li><a href="/python/metaclasses.html" class="sidebar-link">Metaclasses</a></li><li><a href="/python/string-formatting.html" class="sidebar-link">String Formatting</a></li><li><a href="/python/string-methods.html" class="sidebar-link">String Methods</a></li><li><a href="/python/using-loops-within-functions.html" class="sidebar-link">Using loops within functions</a></li><li><a href="/python/importing-modules.html" class="sidebar-link">Importing modules</a></li><li><a href="/python/difference-between-module-and-package.html" class="sidebar-link">Difference between Module and Package</a></li><li><a href="/python/math-module.html" class="sidebar-link">Math Module</a></li><li><a href="/python/complex-math.html" class="sidebar-link">Complex math</a></li><li><a href="/python/collections-module.html" class="sidebar-link">Collections module</a></li><li><a href="/python/operator-module.html" class="sidebar-link">Operator module</a></li><li><a href="/python/json-module.html" class="sidebar-link">JSON Module</a></li><li><a href="/python/sqlite3-module.html" class="sidebar-link">Sqlite3 Module</a></li><li><a href="/python/the-os-module.html" class="sidebar-link">The os Module</a></li><li><a href="/python/the-locale-module.html" class="sidebar-link">The locale Module</a></li><li><a href="/python/itertools-module.html" class="sidebar-link">Itertools Module</a></li><li><a href="/python/asyncio-module.html" class="sidebar-link">Asyncio Module</a></li><li><a href="/python/random-module.html" class="sidebar-link">Random module</a></li><li><a href="/python/functools-module.html" class="sidebar-link">Functools Module</a></li><li><a href="/python/the-dis-module.html" class="sidebar-link">The dis module</a></li><li><a href="/python/the-base64-module.html" class="sidebar-link">The base64 Module</a></li><li><a href="/python/queue-module.html" class="sidebar-link">Queue Module</a></li><li><a href="/python/deque-module.html" class="sidebar-link">Deque Module</a></li><li><a href="/python/webbrowser-module.html" class="sidebar-link">Webbrowser Module</a></li><li><a href="/python/tkinter.html" class="sidebar-link">tkinter</a></li><li><a href="/python/pyautogui-module.html" class="sidebar-link">pyautogui module</a></li><li><a href="/python/indexing-and-slicing.html" class="sidebar-link">Indexing and Slicing</a></li><li><a href="/python/plotting-with-matplotlib.html" class="sidebar-link">Plotting with Matplotlib</a></li><li><a href="/python/graph-tool.html" class="sidebar-link">graph-tool</a></li><li><a href="/python/generators.html" aria-current="page" class="active sidebar-link">Generators</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/generators.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#infinite-sequences" class="sidebar-link">Infinite sequences</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#sending-objects-to-a-generator" class="sidebar-link">Sending objects to a generator</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#yielding-all-values-from-another-iterable" class="sidebar-link">Yielding all values from another iterable</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#iteration" class="sidebar-link">Iteration</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#the-next-function" class="sidebar-link">The next() function</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#coroutines" class="sidebar-link">Coroutines</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#yield-with-recursion-recursively-listing-all-files-in-a-directory" class="sidebar-link">Yield with recursion: recursively listing all files in a directory</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#refactoring-list-building-code" class="sidebar-link">Refactoring list-building code</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#generator-expressions" class="sidebar-link">Generator expressions</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#using-a-generator-to-find-fibonacci-numbers" class="sidebar-link">Using a generator to find Fibonacci Numbers</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#searching" class="sidebar-link">Searching</a></li><li class="sidebar-sub-header"><a href="/python/generators.html#iterating-over-generators-in-parallel" class="sidebar-link">Iterating over generators in parallel</a></li></ul></li><li><a href="/python/reduce.html" class="sidebar-link">Reduce</a></li><li><a href="/python/map-function.html" class="sidebar-link">Map Function</a></li><li><a href="/python/exponentiation.html" class="sidebar-link">Exponentiation</a></li><li><a href="/python/searching.html" class="sidebar-link">Searching</a></li><li><a href="/python/sorting-minimum-and-maximum.html" class="sidebar-link">Sorting, Minimum and Maximum</a></li><li><a href="/python/counting.html" class="sidebar-link">Counting</a></li><li><a href="/python/the-print-function.html" class="sidebar-link">The Print Function</a></li><li><a href="/python/regular-expressions-regex.html" class="sidebar-link">Regular Expressions (Regex)</a></li><li><a href="/python/copying-data.html" class="sidebar-link">Copying data</a></li><li><a href="/python/context-managers-with-statement.html" class="sidebar-link">Context Managers (“with” Statement)</a></li><li><a href="/python/the-name-special-variable.html" class="sidebar-link">The _name_ special variable</a></li><li><a href="/python/checking-path-existence-and-permissions.html" class="sidebar-link">Checking Path Existence and Permissions</a></li><li><a href="/python/creating-python-packages.html" class="sidebar-link">Creating Python packages</a></li><li><a href="/python/usage-of-pip-module-pypi-package-manager.html" class="sidebar-link">Usage of &quot;pip&quot; module: PyPI Package Manager</a></li><li><a href="/python/pip-pypi-package-manager.html" class="sidebar-link">pip: PyPI Package Manager</a></li><li><a href="/python/parsing-command-line-arguments.html" class="sidebar-link">Parsing Command Line arguments</a></li><li><a href="/python/subprocess-library.html" class="sidebar-link">Subprocess Library</a></li><li><a href="/python/setup-py.html" class="sidebar-link">setup.py</a></li><li><a href="/python/recursion.html" class="sidebar-link">Recursion</a></li><li><a href="/python/type-hints.html" class="sidebar-link">Type Hints</a></li><li><a href="/python/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/python/raise-custom-errors-exceptions.html" class="sidebar-link">Raise Custom Errors / Exceptions</a></li><li><a href="/python/commonwealth-exceptions.html" class="sidebar-link">Commonwealth Exceptions</a></li><li><a href="/python/urllib.html" class="sidebar-link">urllib</a></li><li><a href="/python/web-scraping-with-python.html" class="sidebar-link">Web scraping with Python</a></li><li><a href="/python/html-parsing.html" class="sidebar-link">HTML Parsing</a></li><li><a href="/python/manipulating-xml.html" class="sidebar-link">Manipulating XML</a></li><li><a href="/python/python-requests-post.html" class="sidebar-link">Python Requests Post</a></li><li><a href="/python/distribution.html" class="sidebar-link">Distribution</a></li><li><a href="/python/property-objects.html" class="sidebar-link">Property Objects</a></li><li><a href="/python/overloading.html" class="sidebar-link">Overloading</a></li><li><a href="/python/polymorphism.html" class="sidebar-link">Polymorphism</a></li><li><a href="/python/method-overriding.html" class="sidebar-link">Method Overriding</a></li><li><a href="/python/user-defined-methods.html" class="sidebar-link">User-Defined Methods</a></li><li><a href="/python/string-representations-of-class-instances-str-and-repr-methods.html" class="sidebar-link">String representations of class instances: _str and repr_ methods</a></li><li><a href="/python/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/python/reading-and-writing-csv.html" class="sidebar-link">Reading and Writing CSV</a></li><li><a href="/python/writing-to-csv-from-string-or-list.html" class="sidebar-link">Writing to CSV from String or List</a></li><li><a href="/python/dynamic-code-execution-with-exec-and-eval.html" class="sidebar-link">Dynamic code execution with exec and eval</a></li><li><a href="/python/pyinstaller-distributing-python-code.html" class="sidebar-link">PyInstaller - Distributing Python Code</a></li><li><a href="/python/data-visualization-with-python.html" class="sidebar-link">Data Visualization with Python</a></li><li><a href="/python/the-interpreter-command-line-console.html" class="sidebar-link">The Interpreter (Command Line Console)</a></li><li><a href="/python/args-and-kwargs.html" class="sidebar-link">args and *kwargs</a></li><li><a href="/python/garbage-collection.html" class="sidebar-link">Garbage Collection</a></li><li><a href="/python/pickle-data-serialisation.html" class="sidebar-link">Pickle data serialisation</a></li><li><a href="/python/binary-data.html" class="sidebar-link">Binary Data</a></li><li><a href="/python/idioms.html" class="sidebar-link">Idioms</a></li><li><a href="/python/data-serialization.html" class="sidebar-link">Data Serialization</a></li><li><a href="/python/multiprocessing.html" class="sidebar-link">Multiprocessing</a></li><li><a href="/python/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/python/processes-and-threads.html" class="sidebar-link">Processes and Threads</a></li><li><a href="/python/python-concurrency.html" class="sidebar-link">Python concurrency</a></li><li><a href="/python/parallel-computation.html" class="sidebar-link">Parallel computation</a></li><li><a href="/python/sockets.html" class="sidebar-link">Sockets</a></li><li><a href="/python/websockets.html" class="sidebar-link">Websockets</a></li><li><a href="/python/sockets-and-message-encryption-decryption-between-client-and-server.html" class="sidebar-link">Sockets And Message Encryption/Decryption Between Client and Server</a></li><li><a href="/python/python-networking.html" class="sidebar-link">Python Networking</a></li><li><a href="/python/python-http-server.html" class="sidebar-link">Python HTTP Server</a></li><li><a href="/python/flask.html" class="sidebar-link">Flask</a></li><li><a href="/python/introduction-to-rabbitmq-using-amqpstorm.html" class="sidebar-link">Introduction to RabbitMQ using AMQPStorm</a></li><li><a href="/python/descriptor.html" class="sidebar-link">Descriptor</a></li><li><a href="/python/tempfile-namedtemporaryfile.html" class="sidebar-link">tempfile NamedTemporaryFile</a></li><li><a href="/python/input-subset-and-output-external-data-files-using-pandas.html" class="sidebar-link">Input, Subset and Output External Data Files using Pandas</a></li><li><a href="/python/unzipping-files.html" class="sidebar-link">Unzipping Files</a></li><li><a href="/python/working-with-zip-archives.html" class="sidebar-link">Working with ZIP archives</a></li><li><a href="/python/getting-start-with-gzip.html" class="sidebar-link">getting start with GZip</a></li><li><a href="/python/stack.html" class="sidebar-link">Stack</a></li><li><a href="/python/working-around-the-global-interpreter-lock-gil.html" class="sidebar-link">Working around the Global Interpreter Lock (GIL)</a></li><li><a href="/python/deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/python/logging.html" class="sidebar-link">Logging</a></li><li><a href="/python/web-server-gateway-interface-wsgi.html" class="sidebar-link">Web Server Gateway Interface (WSGI)</a></li><li><a href="/python/python-server-sent-events.html" class="sidebar-link">Python Server Sent Events</a></li><li><a href="/python/alternatives-to-switch-statement-from-other-languages.html" class="sidebar-link">Alternatives to switch statement from other languages</a></li><li><a href="/python/list-destructuring-aka-packing-and-unpacking.html" class="sidebar-link">List destructuring (aka packing and unpacking)</a></li><li><a href="/python/accessing-python-source-code-and-bytecode.html" class="sidebar-link">Accessing Python source code and bytecode</a></li><li><a href="/python/mixins.html" class="sidebar-link">Mixins</a></li><li><a href="/python/attribute-access.html" class="sidebar-link">Attribute Access</a></li><li><a href="/python/arcpy.html" class="sidebar-link">ArcPy</a></li><li><a href="/python/abstract-base-classes-abc.html" class="sidebar-link">Abstract Base Classes (abc)</a></li><li><a href="/python/plugin-and-extension-classes.html" class="sidebar-link">Plugin and Extension Classes</a></li><li><a href="/python/immutable-datatypes-int-float-str-tuple-and-frozensets.html" class="sidebar-link">Immutable datatypes(int, float, str, tuple and frozensets)</a></li><li><a href="/python/incompatibilities-moving-from-python-2-to-python-3.html" class="sidebar-link">Incompatibilities moving from Python 2 to Python 3</a></li><li><a href="/python/2to3-tool.html" class="sidebar-link">2to3 tool</a></li><li><a href="/python/non-official-python-implementations.html" class="sidebar-link">Non-official Python implementations</a></li><li><a href="/python/abstract-syntax-tree.html" class="sidebar-link">Abstract syntax tree</a></li><li><a href="/python/unicode-and-bytes.html" class="sidebar-link">Unicode and bytes</a></li><li><a href="/python/python-serial-communication-pyserial.html" class="sidebar-link">Python Serial Communication (pyserial)</a></li><li><a href="/python/neo4j-and-cypher-using-py2neo.html" class="sidebar-link">Neo4j and Cypher using Py2Neo</a></li><li><a href="/python/basic-curses-with-python.html" class="sidebar-link">Basic Curses with Python</a></li><li><a href="/python/templates-in-python.html" class="sidebar-link">Templates in python</a></li><li><a href="/python/pillow.html" class="sidebar-link">Pillow</a></li><li><a href="/python/the-pass-statement.html" class="sidebar-link">The pass statement</a></li><li><a href="/python/cli-subcommands-with-precise-help-output.html" class="sidebar-link">CLI subcommands with precise help output</a></li><li><a href="/python/database-access.html" class="sidebar-link">Database Access</a></li><li><a href="/python/connecting-python-to-sql-server.html" class="sidebar-link">Connecting Python to SQL Server</a></li><li><a href="/python/postgresql.html" class="sidebar-link">PostgreSQL</a></li><li><a href="/python/python-and-excel.html" class="sidebar-link">Python and Excel</a></li><li><a href="/python/turtle-graphics.html" class="sidebar-link">Turtle Graphics</a></li><li><a href="/python/python-persistence.html" class="sidebar-link">Python Persistence</a></li><li><a href="/python/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/python/hashlib.html" class="sidebar-link">hashlib</a></li><li><a href="/python/creating-a-windows-service-using-python.html" class="sidebar-link">Creating a Windows service using Python</a></li><li><a href="/python/mutable-vs-immutable-and-hashable-in-python.html" class="sidebar-link">Mutable vs Immutable (and Hashable) in Python</a></li><li><a href="/python/configparser.html" class="sidebar-link">configparser</a></li><li><a href="/python/optical-character-recognition.html" class="sidebar-link">Optical Character Recognition</a></li><li><a href="/python/virtual-environments.html" class="sidebar-link">Virtual environments</a></li><li><a href="/python/python-virtual-environment-virtualenv.html" class="sidebar-link">Python Virtual Environment - virtualenv</a></li><li><a href="/python/virtual-environment-with-virtualenvwrapper.html" class="sidebar-link">virtual environment with virtualenvwrapper</a></li><li><a href="/python/create-virtual-environment-with-virtualenvwrapper-in-windows.html" class="sidebar-link">Create virtual environment with virtualenvwrapper in windows</a></li><li><a href="/python/sys.html" class="sidebar-link">sys</a></li><li><a href="/python/chempy-python-package.html" class="sidebar-link">ChemPy - python package</a></li><li><a href="/python/pygame.html" class="sidebar-link">pygame</a></li><li><a href="/python/pyglet.html" class="sidebar-link">Pyglet</a></li><li><a href="/python/audio.html" class="sidebar-link">Audio</a></li><li><a href="/python/pyaudio.html" class="sidebar-link">pyaudio</a></li><li><a href="/python/shelve.html" class="sidebar-link">shelve</a></li><li><a href="/python/iot-programming-with-python-and-raspberry-pi.html" class="sidebar-link">IoT Programming with Python and Raspberry PI</a></li><li><a href="/python/kivy-cross-platform-python-framework-for-nui-development.html" class="sidebar-link">kivy - Cross-platform Python Framework for NUI Development</a></li><li><a href="/python/pandas-transform-preform-operations-on-groups-and-concatenate-the-results.html" class="sidebar-link">Pandas Transform: Preform operations on groups and concatenate the results</a></li><li><a href="/python/similarities-in-syntax-differences-in-meaning-python-vs-javascript.html" class="sidebar-link">Similarities in syntax, Differences in meaning: Python vs. JavaScript</a></li><li><a href="/python/call-python-from-c.html" class="sidebar-link">Call Python from C#</a></li><li><a href="/python/ctypes.html" class="sidebar-link">ctypes</a></li><li><a href="/python/writing-extensions.html" class="sidebar-link">Writing extensions</a></li><li><a href="/python/python-lex-yacc.html" class="sidebar-link">Python Lex-Yacc</a></li><li><a href="/python/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/python/py-test.html" class="sidebar-link">py.test</a></li><li><a href="/python/profiling.html" class="sidebar-link">Profiling</a></li><li><a href="/python/python-speed-of-program.html" class="sidebar-link">Python speed of program</a></li><li><a href="/python/performance-optimization.html" class="sidebar-link">Performance optimization</a></li><li><a href="/python/security-and-cryptography.html" class="sidebar-link">Security and Cryptography</a></li><li><a href="/python/secure-shell-connection-in-python.html" class="sidebar-link">Secure Shell Connection in Python</a></li><li><a href="/python/python-anti-patterns.html" class="sidebar-link">Python Anti-Patterns</a></li><li><a href="/python/common-pitfalls.html" class="sidebar-link">Common Pitfalls</a></li><li><a href="/python/hidden-features.html" class="sidebar-link">Hidden Features</a></li><li><a href="/python/date-formatting.html" class="sidebar-link">Date Formatting</a></li><li><a href="/python/ijson.html" class="sidebar-link">ijson</a></li><li><a href="/python/django.html" class="sidebar-link">Django</a></li><li><a href="/python/code-blocks-execution-frames-and-namespaces.html" class="sidebar-link">Code blocks, execution frames, and namespaces</a></li><li><a href="/python/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="generators"><a href="#generators" class="header-anchor">#</a> Generators</h1> <p>Generators are lazy iterators created by generator functions (using <code>yield</code>) or generator expressions (using <code>(an_expression for x in an_iterator)</code>).</p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p><strong>Generator expressions</strong> are similar to list, dictionary and set comprehensions, but are enclosed with parentheses. The parentheses do not have to be present when they are used as the sole argument for a function call.</p> <div class="language-py extra-class"><pre class="language-py"><code>expression <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">**</span><span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>This example generates the 10 first perfect squares, including 0 (in which x = 0).</p> <p><strong>Generator functions</strong> are similar to regular functions, except that they have one or more <a href="https://docs.python.org/3/reference/simple_stmts.html#yield" target="_blank" rel="noopener noreferrer"><code>yield</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> statements in their body. Such functions cannot <code>return</code> any values (however empty <code>return</code>s are allowed if you want to stop the generator early).</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> x<span class="token operator">**</span><span class="token number">2</span>

</code></pre></div><p>This generator function is equivalent to the previous generator expression, it outputs the same.</p> <p><strong>Note</strong>: all generator expressions have their own <strong>equivalent</strong> functions, but not vice versa.</p> <p>A generator expression can be used without parentheses if both parentheses would be repeated otherwise:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token builtin">sum</span><span class="token punctuation">(</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">#Output: 20</span>
<span class="token builtin">any</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> foo<span class="token punctuation">)</span>                   <span class="token comment">#Output: True or False depending on foo</span>
<span class="token builtin">type</span><span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b <span class="token keyword">for</span> a <span class="token keyword">in</span> foo <span class="token keyword">if</span> a <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment">#Output: &lt;class 'generator'&gt;</span>

</code></pre></div><p>Instead of:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> foo<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b <span class="token keyword">for</span> a <span class="token keyword">in</span> foo <span class="token keyword">if</span> a <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>But not:</p> <div class="language-py extra-class"><pre class="language-py"><code>fooFunction<span class="token punctuation">(</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">)</span>
<span class="token keyword">return</span> x <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> foo
barFunction<span class="token punctuation">(</span>baz<span class="token punctuation">,</span> a <span class="token operator">&gt;</span> b <span class="token keyword">for</span> a <span class="token keyword">in</span> foo <span class="token keyword">if</span> a <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>

</code></pre></div><p>Calling a generator function produces a <strong>generator object</strong>, which can later be iterated over. Unlike other types of iterators, generator objects may only be traversed once.</p> <div class="language-py extra-class"><pre class="language-py"><code>g1 <span class="token operator">=</span> function<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>g1<span class="token punctuation">)</span>  <span class="token comment"># Out: &lt;generator object function at 0x1012e1888&gt;</span>

</code></pre></div><p>Notice that a generator's body is <strong>not</strong> immediately executed: when you call <code>function()</code> in the example above, it immediately returns a generator object, without executing even the first print statement. This allows generators to consume less memory than functions that return a list, and it allows creating generators that produce infinitely long sequences.</p> <p>For this reason, generators are often used in data science, and other contexts involving large amounts of data. Another advantage is that other code can immediately use the values yielded by a generator, without waiting for the complete sequence to be produced.</p> <p>However, if you need to use the values produced by a generator more than once, and if generating them costs more than storing, it may be better to store the yielded values as a <code>list</code> than to re-generate the sequence. See 'Resetting a generator' below for more details.</p> <p>Typically a generator object is used in a loop, or in any function that requires an iterable:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">for</span> x <span class="token keyword">in</span> g1<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Received&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>

<span class="token comment"># Output:</span>
<span class="token comment"># Received 0</span>
<span class="token comment"># Received 1</span>
<span class="token comment"># Received 4</span>
<span class="token comment"># Received 9</span>
<span class="token comment"># Received 16</span>
<span class="token comment"># Received 25</span>
<span class="token comment"># Received 36</span>
<span class="token comment"># Received 49</span>
<span class="token comment"># Received 64</span>
<span class="token comment"># Received 81</span>

arr1 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>g1<span class="token punctuation">)</span>
<span class="token comment"># arr1 = [], because the loop above already consumed all the values.</span>
g2 <span class="token operator">=</span> function<span class="token punctuation">(</span><span class="token punctuation">)</span>
arr2 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>g2<span class="token punctuation">)</span>  <span class="token comment"># arr2 = [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span>

</code></pre></div><p>Since generator objects are iterators, one can iterate over them manually using the <a href="https://docs.python.org/3/library/functions.html#next" target="_blank" rel="noopener noreferrer"><code>next()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> function. Doing so will return the yielded values one by one on each subsequent invocation.</p> <p>Under the hood, each time you call <code>next()</code> on a generator, Python executes statements in the body of the generator function until it hits the next <code>yield</code> statement. At this point it returns the argument of the <code>yield</code> command, and remembers the point where that happened. Calling <code>next()</code> once again will resume execution from that point and continue until the next <code>yield</code> statement.</p> <p>If Python reaches the end of the generator function without encountering any more <code>yield</code>s, a <code>StopIteration</code> exception is raised (this is normal, all iterators behave in the same way).</p> <div class="language-py extra-class"><pre class="language-py"><code>g3 <span class="token operator">=</span> function<span class="token punctuation">(</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>g3<span class="token punctuation">)</span>  <span class="token comment"># a becomes 0</span>
b <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>g3<span class="token punctuation">)</span>  <span class="token comment"># b becomes 1</span>
c <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>g3<span class="token punctuation">)</span>  <span class="token comment"># c becomes 2</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
j <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>g3<span class="token punctuation">)</span>  <span class="token comment"># Raises StopIteration, j remains undefined</span>

</code></pre></div><p>Note that in Python 2 generator objects had <code>.next()</code> methods that could be used to iterate through the yielded values manually. In Python 3 this method was replaced with the <code>.__next__()</code> standard for all iterators.</p> <p><strong>Resetting a generator</strong></p> <p>Remember that you can only iterate through the objects generated by a generator <strong>once</strong>. If you have already iterated through the objects in a script, any further attempt do so will yield <code>None</code>.</p> <p>If you need to use the objects generated by a generator more than once, you can either define the generator function again and use it a second time, or, alternatively, you can store the output of the generator function in a list on first use. Re-defining the generator function will be a good option if you are dealing with large volumes of data, and storing a list of all data items would take up a lot of disc space. Conversely, if it is costly to generate the items initially, you may prefer to store the generated items in a list so that you can re-use them.</p> <h2 id="infinite-sequences"><a href="#infinite-sequences" class="header-anchor">#</a> Infinite sequences</h2> <p>Generators can be used to represent infinite sequences:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">integers_starting_from</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> n
        n <span class="token operator">+=</span> <span class="token number">1</span>

natural_numbers <span class="token operator">=</span> integers_starting_from<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

</code></pre></div><p>Infinite sequence of numbers as above can also be generated with the help of <a href="https://docs.python.org/3/library/itertools.html#itertools.count" target="_blank" rel="noopener noreferrer"><code>itertools.count</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The above code could be written as below</p> <div class="language-py extra-class"><pre class="language-py"><code>natural_numbers <span class="token operator">=</span> itertools<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

</code></pre></div><p>You can use generator comprehensions on infinite generators to produce new generators:</p> <div class="language-py extra-class"><pre class="language-py"><code>multiples_of_two <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> natural_numbers<span class="token punctuation">)</span>
multiples_of_three <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> natural_numbers <span class="token keyword">if</span> x <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>

</code></pre></div><p>Be aware that an infinite generator does not have an end, so passing it to any function that will attempt to consume the generator entirely will have <strong>dire consequences</strong>:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token builtin">list</span><span class="token punctuation">(</span>multiples_of_two<span class="token punctuation">)</span>  <span class="token comment"># will never terminate, or raise an OS-specific error</span>

</code></pre></div><p>Instead, use list/set comprehensions with <a href="https://docs.python.org/3/library/functions.html#func-range" target="_blank" rel="noopener noreferrer"><code>range</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (or <code>xrange</code> for python &lt; 3.0):</p> <div class="language-py extra-class"><pre class="language-py"><code>first_five_multiples_of_three <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">next</span><span class="token punctuation">(</span>multiples_of_three<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span> 
<span class="token comment"># [3, 6, 9, 12, 15]</span>

</code></pre></div><p>or use <a href="https://docs.python.org/3/library/itertools.html#itertools.islice" target="_blank" rel="noopener noreferrer"><code>itertools.islice()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to slice the iterator to a subset:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> islice
multiples_of_four <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">4</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> integers_starting_from<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
first_five_multiples_of_four <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>islice<span class="token punctuation">(</span>multiples_of_four<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [4, 8, 12, 16, 20]</span>

</code></pre></div><p>Note that the original generator is updated too, just like all other generators coming from the same &quot;root&quot;:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token builtin">next</span><span class="token punctuation">(</span>natural_numbers<span class="token punctuation">)</span>    <span class="token comment"># yields 16</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>multiples_of_two<span class="token punctuation">)</span>   <span class="token comment"># yields 34</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>multiples_of_four<span class="token punctuation">)</span>  <span class="token comment"># yields 24</span>

</code></pre></div><p>An infinite sequence can also be iterated with a <a href="http://stackoverflow.com/documentation/python/237/loops/862/for-loops" target="_blank" rel="noopener noreferrer"><code>for</code>-loop<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Make sure to include a conditional <code>break</code> statement so that the loop would terminate eventually:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">for</span> idx<span class="token punctuation">,</span> number <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>multiplies_of_two<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    <span class="token keyword">if</span> idx <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>  <span class="token comment"># stop after taking the first 10 multiplies of two</span>

</code></pre></div><h3 id="classic-example-fibonacci-numbers"><a href="#classic-example-fibonacci-numbers" class="header-anchor">#</a> Classic example - Fibonacci numbers</h3> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> itertools

<span class="token keyword">def</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> a
        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b

first_ten_fibs <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>itertools<span class="token punctuation">.</span>islice<span class="token punctuation">(</span>fibonacci<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]</span>

<span class="token keyword">def</span> <span class="token function">nth_fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">next</span><span class="token punctuation">(</span>itertools<span class="token punctuation">.</span>islice<span class="token punctuation">(</span>fibonacci<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>

ninety_nineth_fib <span class="token operator">=</span> nth_fib<span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span>  <span class="token comment"># 354224848179261915075</span>

</code></pre></div><h2 id="sending-objects-to-a-generator"><a href="#sending-objects-to-a-generator" class="header-anchor">#</a> Sending objects to a generator</h2> <p>In addition to receiving values from a generator, it is possible to <strong>send</strong> an object to a generator using the <code>send()</code> method.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">accumulator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    total <span class="token operator">=</span> <span class="token number">0</span>
    value <span class="token operator">=</span> <span class="token boolean">None</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token comment"># receive sent value</span>
        value <span class="token operator">=</span> <span class="token keyword">yield</span> total
        <span class="token keyword">if</span> value <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token keyword">break</span>
        <span class="token comment"># aggregate values</span>
        total <span class="token operator">+=</span> value

generator <span class="token operator">=</span> accumulator<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># advance until the first &quot;yield&quot;</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span>      <span class="token comment"># 0</span>

<span class="token comment"># from this point on, the generator aggregates values</span>
generator<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment"># 1</span>
generator<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>   <span class="token comment"># 11</span>
generator<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment"># 111</span>
<span class="token comment"># ...</span>

<span class="token comment"># Calling next(generator) is equivalent to calling generator.send(None)</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span>      <span class="token comment"># StopIteration</span>

</code></pre></div><p>What happens here is the following:</p> <ul><li>When you first call <code>next(generator)</code>, the program advances to the first <code>yield</code> statement, and returns the value of <code>total</code> at that point, which is 0. The execution of the generator suspends at this point.</li> <li>When you then call <code>generator.send(x)</code>, the interpreter takes the argument <code>x</code> and makes it the return value of the last <code>yield</code> statement, which gets assigned to <code>value</code>. The generator then proceeds as usual, until it yields the next value.</li> <li>When you finally call <code>next(generator)</code>, the program treats this as if you're sending <code>None</code> to the generator. There is nothing special about <code>None</code>, however, this example uses <code>None</code> as a special value to ask the generator to stop.</li></ul> <h2 id="yielding-all-values-from-another-iterable"><a href="#yielding-all-values-from-another-iterable" class="header-anchor">#</a> Yielding all values from another iterable</h2> <p>Use <code>yield from</code> if you want to yield all values from another iterable:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">foob</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token keyword">from</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> <span class="token keyword">from</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token builtin">list</span><span class="token punctuation">(</span>foob<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1]</span>

</code></pre></div><p>This works with generators as well.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">fibto</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> a <span class="token operator">&gt;=</span> n<span class="token punctuation">:</span> <span class="token keyword">break</span>
        <span class="token keyword">yield</span> a
        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b

<span class="token keyword">def</span> <span class="token function">usefib</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token keyword">from</span> fibto<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> <span class="token keyword">from</span> fibto<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token builtin">list</span><span class="token punctuation">(</span>usefib<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [1, 1, 2, 3, 5, 8, 1, 1, 2, 3, 5, 8, 13]</span>

</code></pre></div><h2 id="iteration"><a href="#iteration" class="header-anchor">#</a> Iteration</h2> <p>A generator object supports the <strong>iterator protocol</strong>. That is, it provides a <code>next()</code> method (<code>__next__()</code> in Python 3.x), which is used to step through its execution, and its <code>__iter__</code> method returns itself. This means that a generator can be used in any language construct which supports generic iterable objects.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># naive partial implementation of the Python 2.x xrange()</span>
<span class="token keyword">def</span> <span class="token function">xrange</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    i <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">while</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">:</span>
        <span class="token keyword">yield</span> i
        i <span class="token operator">+=</span> <span class="token number">1</span>

<span class="token comment"># looping</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>  <span class="token comment"># prints the values 0, 1, ..., 9</span>

<span class="token comment"># unpacking</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment"># 0, 1, 2</span>

<span class="token comment"># building a list</span>
l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [0, 1, ..., 9]</span>

</code></pre></div><h2 id="the-next-function"><a href="#the-next-function" class="header-anchor">#</a> The next() function</h2> <p>The <a href="https://docs.python.org/3/library/functions.html#next" target="_blank" rel="noopener noreferrer"><code>next()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> built-in is a convenient wrapper which can be used to receive a value from any iterator (including a generator iterator) and to provide a default value in case the iterator is exhausted.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">nums</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
    <span class="token keyword">yield</span> <span class="token number">3</span>
generator <span class="token operator">=</span> nums<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>  <span class="token comment"># 1</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>  <span class="token comment"># 2</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>  <span class="token comment"># 3</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>  <span class="token comment"># None</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>  <span class="token comment"># None</span>
<span class="token comment"># ...</span>

</code></pre></div><p>The syntax is <code>next(iterator[, default])</code>. If iterator ends and a default value was passed, it is returned. If no default was provided, <code>StopIteration</code> is raised.</p> <h2 id="coroutines"><a href="#coroutines" class="header-anchor">#</a> Coroutines</h2> <p>Generators can be used to implement coroutines:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># create and advance generator to the first yield</span>
<span class="token keyword">def</span> <span class="token function">coroutine</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        cr <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token builtin">next</span><span class="token punctuation">(</span>cr<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cr
    <span class="token keyword">return</span> start

<span class="token comment"># example coroutine</span>
<span class="token decorator annotation punctuation">@coroutine</span>
<span class="token keyword">def</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        x <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token builtin">sum</span>
        <span class="token builtin">sum</span> <span class="token operator">+=</span> x

<span class="token comment"># example use</span>
s <span class="token operator">=</span> adder<span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 1</span>
s<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># 3</span>

</code></pre></div><p>Coroutines are commonly used to implement state machines, as they are primarily useful for creating single-method procedures that require a state to function properly. They operate on an existing state and return the value obtained on completion of the operation.</p> <h2 id="yield-with-recursion-recursively-listing-all-files-in-a-directory"><a href="#yield-with-recursion-recursively-listing-all-files-in-a-directory" class="header-anchor">#</a> Yield with recursion: recursively listing all files in a directory</h2> <p>First, import the libraries that work with files:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> os <span class="token keyword">import</span> listdir
<span class="token keyword">from</span> os<span class="token punctuation">.</span>path <span class="token keyword">import</span> isfile<span class="token punctuation">,</span> join<span class="token punctuation">,</span> exists

</code></pre></div><p>A helper function to read only files from a directory:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">get_files</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> listdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        full_path <span class="token operator">=</span> join<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> isfile<span class="token punctuation">(</span>full_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> exists<span class="token punctuation">(</span>full_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">yield</span> full_path

</code></pre></div><p>Another helper function to get only the subdirectories:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">get_directories</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> directory <span class="token keyword">in</span> listdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        full_path <span class="token operator">=</span> join<span class="token punctuation">(</span>path<span class="token punctuation">,</span> directory<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> isfile<span class="token punctuation">(</span>full_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> exists<span class="token punctuation">(</span>full_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">yield</span> full_path

</code></pre></div><p>Now use these functions to recursively get all files within a directory and all its subdirectories (using generators):</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">get_files_recursive</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> get_files<span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> <span class="token builtin">file</span>
    <span class="token keyword">for</span> subdirectory <span class="token keyword">in</span> get_directories<span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> get_files_recursive<span class="token punctuation">(</span>subdirectory<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># here the recursive call</span>
            <span class="token keyword">yield</span> <span class="token builtin">file</span>

</code></pre></div><p>This function can be simplified using <code>yield from</code>:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">get_files_recursive</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token keyword">from</span> get_files<span class="token punctuation">(</span>directory<span class="token punctuation">)</span>
    <span class="token keyword">for</span> subdirectory <span class="token keyword">in</span> get_directories<span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> <span class="token keyword">from</span> get_files_recursive<span class="token punctuation">(</span>subdirectory<span class="token punctuation">)</span>

</code></pre></div><h2 id="refactoring-list-building-code"><a href="#refactoring-list-building-code" class="header-anchor">#</a> Refactoring list-building code</h2> <p>Suppose you have complex code that creates and returns a list by starting with a blank list and repeatedly appending to it:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment"># logic here...</span>
    result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment"># possibly in several places</span>
    <span class="token comment"># more logic...</span>
    <span class="token keyword">return</span> result <span class="token comment"># possibly in several places</span>

values <span class="token operator">=</span> create<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>When it's not practical to replace the inner logic with a list comprehension, you can turn the entire function into a generator in-place, and then collect the results:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">create_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># logic...</span>
    <span class="token keyword">yield</span> value
    <span class="token comment"># more logic</span>
    <span class="token keyword">return</span> <span class="token comment"># not needed if at the end of the function, of course</span>

values <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>create_gen<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>If the logic is recursive, use <code>yield from</code> to include all the values from the recursive call in a &quot;flattened&quot; result:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">preorder_traversal</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> node<span class="token punctuation">.</span>value
    <span class="token keyword">for</span> child <span class="token keyword">in</span> node<span class="token punctuation">.</span>children<span class="token punctuation">:</span>
        <span class="token keyword">yield</span> <span class="token keyword">from</span> preorder_traversal<span class="token punctuation">(</span>child<span class="token punctuation">)</span>

</code></pre></div><h2 id="generator-expressions"><a href="#generator-expressions" class="header-anchor">#</a> Generator expressions</h2> <p>It's possible to create generator iterators using a comprehension-like syntax.</p> <div class="language-py extra-class"><pre class="language-py"><code>generator <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">2</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span>  <span class="token comment"># 0</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span>  <span class="token comment"># 2</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span>  <span class="token comment"># 4</span>
<span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span>  <span class="token comment"># raises StopIteration</span>

</code></pre></div><p>If a function doesn't necessarily need to be passed a list, you can save on characters (and improve readability) by placing a generator expression inside a function call. The parenthesis from the function call implicitly make your expression a generator expression.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token builtin">sum</span><span class="token punctuation">(</span>i <span class="token operator">**</span> <span class="token number">2</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 0^2 + 1^2 + 2^2 + 3^2 = 0 + 1 + 4 + 9 = 14</span>

</code></pre></div><p>Additionally, you will save on memory because instead of loading the entire list you are iterating over (<code>[0, 1, 2, 3]</code> in the above example), the generator allows Python to use values as needed.</p> <h2 id="using-a-generator-to-find-fibonacci-numbers"><a href="#using-a-generator-to-find-fibonacci-numbers" class="header-anchor">#</a> Using a generator to find Fibonacci Numbers</h2> <p>A practical use case of a generator is to iterate through values of an infinite series. Here's an example of finding the first ten terms of the <a href="https://oeis.org/A000045" target="_blank" rel="noopener noreferrer">Fibonacci Sequence<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Generator that yields Fibonacci numbers. `a` and `b` are the seed values&quot;&quot;&quot;</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> a
        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b

f <span class="token operator">=</span> fib<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <p>0, 1, 1, 2, 3, 5, 8, 13, 21, 34</p> <h2 id="searching"><a href="#searching" class="header-anchor">#</a> Searching</h2> <p>The <code>next</code> function is useful even without iterating. Passing a generator expression to <code>next</code> is a quick way to search for the first occurrence of an element matching some predicate. Procedural code like</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">find_and_transform</span><span class="token punctuation">(</span>sequence<span class="token punctuation">,</span> predicate<span class="token punctuation">,</span> func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> element <span class="token keyword">in</span> sequence<span class="token punctuation">:</span>
        <span class="token keyword">if</span> predicate<span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> func<span class="token punctuation">(</span>element<span class="token punctuation">)</span>
    <span class="token keyword">raise</span> ValueError

item <span class="token operator">=</span> find_and_transform<span class="token punctuation">(</span>my_sequence<span class="token punctuation">,</span> my_predicate<span class="token punctuation">,</span> my_func<span class="token punctuation">)</span>

</code></pre></div><p>can be replaced with:</p> <div class="language-py extra-class"><pre class="language-py"><code>item <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>my_func<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> my_sequence <span class="token keyword">if</span> my_predicate<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># StopIteration will be raised if there are no matches; this exception can</span>
<span class="token comment"># be caught and transformed, if desired.</span>

</code></pre></div><p>For this purpose, it may be desirable to create an alias, such as <code>first = next</code>, or a wrapper function to convert the exception:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">first</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">next</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span>
    <span class="token keyword">except</span> StopIteration<span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError

</code></pre></div><h2 id="iterating-over-generators-in-parallel"><a href="#iterating-over-generators-in-parallel" class="header-anchor">#</a> Iterating over generators in parallel</h2> <p>To iterate over several generators in parallel, use the <code>zip</code> builtin:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>

</code></pre></div><p>Results in:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token number">1</span> x
<span class="token number">2</span> y
<span class="token number">3</span> z

</code></pre></div><p>In python 2 you should use <code>itertools.izip</code> instead. Here we can also see that the all the <code>zip</code> functions yield tuples.</p> <p>Note that zip will stop iterating as soon as one of the iterables runs out of items. If you'd like to iterate for as long as the longest iterable, use <a href="http://stackoverflow.com/documentation/python/1564/itertools-module/6943/itertools-zip-longest#t=201608100113008888583" target="_blank" rel="noopener noreferrer"><code>itertools.zip_longest()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>yield <code>&lt;expr&gt;</code></li> <li>yield from <code>&lt;expr&gt;</code></li> <li><code>&lt;var&gt;</code> = yield <code>&lt;expr&gt;</code></li> <li>next(<code>&lt;iter&gt;</code>)</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/python/generators.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/graph-tool.html" class="prev">
        graph-tool
      </a></span> <span class="next"><a href="/python/reduce.html">
        Reduce
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2711.2f4bba7a.js" defer></script>
  </body>
</html>
