<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python - Common Pitfalls</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="List multiplication and common references, Mutable default argument, Changing the sequence you are iterating over, Integer and String identity, Dictionaries are unordered, Variable leaking in list comprehensions and for loops, Chaining of or operator, Accessing int literals' attributes, sys.argv[0] is the name of the file being executed, Global Interpreter Lock (GIL) and blocking threads, Multiple return, Pythonic JSON keys">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Python - Common Pitfalls">
    <meta property="og:description" content="List multiplication and common references, Mutable default argument, Changing the sequence you are iterating over, Integer and String identity, Dictionaries are unordered, Variable leaking in list comprehensions and for loops, Chaining of or operator, Accessing int literals' attributes, sys.argv[0] is the name of the file being executed, Global Interpreter Lock (GIL) and blocking threads, Multiple return, Pythonic JSON keys">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/python/common-pitfalls.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Python - Common Pitfalls">
    <meta name="twitter:description" content="List multiplication and common references, Mutable default argument, Changing the sequence you are iterating over, Integer and String identity, Dictionaries are unordered, Variable leaking in list comprehensions and for loops, Chaining of or operator, Accessing int literals' attributes, sys.argv[0] is the name of the file being executed, Global Interpreter Lock (GIL) and blocking threads, Multiple return, Pythonic JSON keys">
    <meta name="twitter:url" content="/python/common-pitfalls.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2669.9b0a0b32.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/python/getting-started-with-python-language.html" class="sidebar-link">Getting started with Python Language</a></li><li><a href="/python/python-data-types.html" class="sidebar-link">Python Data Types</a></li><li><a href="/python/indentation.html" class="sidebar-link">Indentation</a></li><li><a href="/python/comments-and-documentation.html" class="sidebar-link">Comments and Documentation</a></li><li><a href="/python/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/python/enum.html" class="sidebar-link">Enum</a></li><li><a href="/python/set.html" class="sidebar-link">Set</a></li><li><a href="/python/simple-mathematical-operators.html" class="sidebar-link">Simple Mathematical Operators</a></li><li><a href="/python/bitwise-operators.html" class="sidebar-link">Bitwise Operators</a></li><li><a href="/python/boolean-operators.html" class="sidebar-link">Boolean Operators</a></li><li><a href="/python/operator-precedence.html" class="sidebar-link">Operator Precedence</a></li><li><a href="/python/variable-scope-and-binding.html" class="sidebar-link">Variable Scope and Binding</a></li><li><a href="/python/conditionals.html" class="sidebar-link">Conditionals</a></li><li><a href="/python/comparisons.html" class="sidebar-link">Comparisons</a></li><li><a href="/python/loops.html" class="sidebar-link">Loops</a></li><li><a href="/python/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/python/multidimensional-arrays.html" class="sidebar-link">Multidimensional arrays</a></li><li><a href="/python/dictionary.html" class="sidebar-link">Dictionary</a></li><li><a href="/python/list.html" class="sidebar-link">List</a></li><li><a href="/python/list-comprehensions.html" class="sidebar-link">List Comprehensions</a></li><li><a href="/python/list-slicing-selecting-parts-of-lists.html" class="sidebar-link">List slicing (selecting parts of lists)</a></li><li><a href="/python/groupby.html" class="sidebar-link">groupby()</a></li><li><a href="/python/linked-lists.html" class="sidebar-link">Linked lists</a></li><li><a href="/python/linked-list-node.html" class="sidebar-link">Linked List Node</a></li><li><a href="/python/filter.html" class="sidebar-link">Filter</a></li><li><a href="/python/heapq.html" class="sidebar-link">Heapq</a></li><li><a href="/python/tuple.html" class="sidebar-link">Tuple</a></li><li><a href="/python/basic-input-and-output.html" class="sidebar-link">Basic Input and Output</a></li><li><a href="/python/files-folders-i-o.html" class="sidebar-link">Files &amp; Folders I/O</a></li><li><a href="/python/os-path.html" class="sidebar-link">os.path</a></li><li><a href="/python/iterables-and-iterators.html" class="sidebar-link">Iterables and Iterators</a></li><li><a href="/python/functions.html" class="sidebar-link">Functions</a></li><li><a href="/python/defining-functions-with-list-arguments.html" class="sidebar-link">Defining functions with list arguments</a></li><li><a href="/python/functional-programming-in-python.html" class="sidebar-link">Functional Programming in Python</a></li><li><a href="/python/partial-functions.html" class="sidebar-link">Partial functions</a></li><li><a href="/python/decorators.html" class="sidebar-link">Decorators</a></li><li><a href="/python/classes.html" class="sidebar-link">Classes</a></li><li><a href="/python/metaclasses.html" class="sidebar-link">Metaclasses</a></li><li><a href="/python/string-formatting.html" class="sidebar-link">String Formatting</a></li><li><a href="/python/string-methods.html" class="sidebar-link">String Methods</a></li><li><a href="/python/using-loops-within-functions.html" class="sidebar-link">Using loops within functions</a></li><li><a href="/python/importing-modules.html" class="sidebar-link">Importing modules</a></li><li><a href="/python/difference-between-module-and-package.html" class="sidebar-link">Difference between Module and Package</a></li><li><a href="/python/math-module.html" class="sidebar-link">Math Module</a></li><li><a href="/python/complex-math.html" class="sidebar-link">Complex math</a></li><li><a href="/python/collections-module.html" class="sidebar-link">Collections module</a></li><li><a href="/python/operator-module.html" class="sidebar-link">Operator module</a></li><li><a href="/python/json-module.html" class="sidebar-link">JSON Module</a></li><li><a href="/python/sqlite3-module.html" class="sidebar-link">Sqlite3 Module</a></li><li><a href="/python/the-os-module.html" class="sidebar-link">The os Module</a></li><li><a href="/python/the-locale-module.html" class="sidebar-link">The locale Module</a></li><li><a href="/python/itertools-module.html" class="sidebar-link">Itertools Module</a></li><li><a href="/python/asyncio-module.html" class="sidebar-link">Asyncio Module</a></li><li><a href="/python/random-module.html" class="sidebar-link">Random module</a></li><li><a href="/python/functools-module.html" class="sidebar-link">Functools Module</a></li><li><a href="/python/the-dis-module.html" class="sidebar-link">The dis module</a></li><li><a href="/python/the-base64-module.html" class="sidebar-link">The base64 Module</a></li><li><a href="/python/queue-module.html" class="sidebar-link">Queue Module</a></li><li><a href="/python/deque-module.html" class="sidebar-link">Deque Module</a></li><li><a href="/python/webbrowser-module.html" class="sidebar-link">Webbrowser Module</a></li><li><a href="/python/tkinter.html" class="sidebar-link">tkinter</a></li><li><a href="/python/pyautogui-module.html" class="sidebar-link">pyautogui module</a></li><li><a href="/python/indexing-and-slicing.html" class="sidebar-link">Indexing and Slicing</a></li><li><a href="/python/plotting-with-matplotlib.html" class="sidebar-link">Plotting with Matplotlib</a></li><li><a href="/python/graph-tool.html" class="sidebar-link">graph-tool</a></li><li><a href="/python/generators.html" class="sidebar-link">Generators</a></li><li><a href="/python/reduce.html" class="sidebar-link">Reduce</a></li><li><a href="/python/map-function.html" class="sidebar-link">Map Function</a></li><li><a href="/python/exponentiation.html" class="sidebar-link">Exponentiation</a></li><li><a href="/python/searching.html" class="sidebar-link">Searching</a></li><li><a href="/python/sorting-minimum-and-maximum.html" class="sidebar-link">Sorting, Minimum and Maximum</a></li><li><a href="/python/counting.html" class="sidebar-link">Counting</a></li><li><a href="/python/the-print-function.html" class="sidebar-link">The Print Function</a></li><li><a href="/python/regular-expressions-regex.html" class="sidebar-link">Regular Expressions (Regex)</a></li><li><a href="/python/copying-data.html" class="sidebar-link">Copying data</a></li><li><a href="/python/context-managers-with-statement.html" class="sidebar-link">Context Managers (“with” Statement)</a></li><li><a href="/python/the-name-special-variable.html" class="sidebar-link">The _name_ special variable</a></li><li><a href="/python/checking-path-existence-and-permissions.html" class="sidebar-link">Checking Path Existence and Permissions</a></li><li><a href="/python/creating-python-packages.html" class="sidebar-link">Creating Python packages</a></li><li><a href="/python/usage-of-pip-module-pypi-package-manager.html" class="sidebar-link">Usage of &quot;pip&quot; module: PyPI Package Manager</a></li><li><a href="/python/pip-pypi-package-manager.html" class="sidebar-link">pip: PyPI Package Manager</a></li><li><a href="/python/parsing-command-line-arguments.html" class="sidebar-link">Parsing Command Line arguments</a></li><li><a href="/python/subprocess-library.html" class="sidebar-link">Subprocess Library</a></li><li><a href="/python/setup-py.html" class="sidebar-link">setup.py</a></li><li><a href="/python/recursion.html" class="sidebar-link">Recursion</a></li><li><a href="/python/type-hints.html" class="sidebar-link">Type Hints</a></li><li><a href="/python/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/python/raise-custom-errors-exceptions.html" class="sidebar-link">Raise Custom Errors / Exceptions</a></li><li><a href="/python/commonwealth-exceptions.html" class="sidebar-link">Commonwealth Exceptions</a></li><li><a href="/python/urllib.html" class="sidebar-link">urllib</a></li><li><a href="/python/web-scraping-with-python.html" class="sidebar-link">Web scraping with Python</a></li><li><a href="/python/html-parsing.html" class="sidebar-link">HTML Parsing</a></li><li><a href="/python/manipulating-xml.html" class="sidebar-link">Manipulating XML</a></li><li><a href="/python/python-requests-post.html" class="sidebar-link">Python Requests Post</a></li><li><a href="/python/distribution.html" class="sidebar-link">Distribution</a></li><li><a href="/python/property-objects.html" class="sidebar-link">Property Objects</a></li><li><a href="/python/overloading.html" class="sidebar-link">Overloading</a></li><li><a href="/python/polymorphism.html" class="sidebar-link">Polymorphism</a></li><li><a href="/python/method-overriding.html" class="sidebar-link">Method Overriding</a></li><li><a href="/python/user-defined-methods.html" class="sidebar-link">User-Defined Methods</a></li><li><a href="/python/string-representations-of-class-instances-str-and-repr-methods.html" class="sidebar-link">String representations of class instances: _str and repr_ methods</a></li><li><a href="/python/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/python/reading-and-writing-csv.html" class="sidebar-link">Reading and Writing CSV</a></li><li><a href="/python/writing-to-csv-from-string-or-list.html" class="sidebar-link">Writing to CSV from String or List</a></li><li><a href="/python/dynamic-code-execution-with-exec-and-eval.html" class="sidebar-link">Dynamic code execution with exec and eval</a></li><li><a href="/python/pyinstaller-distributing-python-code.html" class="sidebar-link">PyInstaller - Distributing Python Code</a></li><li><a href="/python/data-visualization-with-python.html" class="sidebar-link">Data Visualization with Python</a></li><li><a href="/python/the-interpreter-command-line-console.html" class="sidebar-link">The Interpreter (Command Line Console)</a></li><li><a href="/python/args-and-kwargs.html" class="sidebar-link">args and *kwargs</a></li><li><a href="/python/garbage-collection.html" class="sidebar-link">Garbage Collection</a></li><li><a href="/python/pickle-data-serialisation.html" class="sidebar-link">Pickle data serialisation</a></li><li><a href="/python/binary-data.html" class="sidebar-link">Binary Data</a></li><li><a href="/python/idioms.html" class="sidebar-link">Idioms</a></li><li><a href="/python/data-serialization.html" class="sidebar-link">Data Serialization</a></li><li><a href="/python/multiprocessing.html" class="sidebar-link">Multiprocessing</a></li><li><a href="/python/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/python/processes-and-threads.html" class="sidebar-link">Processes and Threads</a></li><li><a href="/python/python-concurrency.html" class="sidebar-link">Python concurrency</a></li><li><a href="/python/parallel-computation.html" class="sidebar-link">Parallel computation</a></li><li><a href="/python/sockets.html" class="sidebar-link">Sockets</a></li><li><a href="/python/websockets.html" class="sidebar-link">Websockets</a></li><li><a href="/python/sockets-and-message-encryption-decryption-between-client-and-server.html" class="sidebar-link">Sockets And Message Encryption/Decryption Between Client and Server</a></li><li><a href="/python/python-networking.html" class="sidebar-link">Python Networking</a></li><li><a href="/python/python-http-server.html" class="sidebar-link">Python HTTP Server</a></li><li><a href="/python/flask.html" class="sidebar-link">Flask</a></li><li><a href="/python/introduction-to-rabbitmq-using-amqpstorm.html" class="sidebar-link">Introduction to RabbitMQ using AMQPStorm</a></li><li><a href="/python/descriptor.html" class="sidebar-link">Descriptor</a></li><li><a href="/python/tempfile-namedtemporaryfile.html" class="sidebar-link">tempfile NamedTemporaryFile</a></li><li><a href="/python/input-subset-and-output-external-data-files-using-pandas.html" class="sidebar-link">Input, Subset and Output External Data Files using Pandas</a></li><li><a href="/python/unzipping-files.html" class="sidebar-link">Unzipping Files</a></li><li><a href="/python/working-with-zip-archives.html" class="sidebar-link">Working with ZIP archives</a></li><li><a href="/python/getting-start-with-gzip.html" class="sidebar-link">getting start with GZip</a></li><li><a href="/python/stack.html" class="sidebar-link">Stack</a></li><li><a href="/python/working-around-the-global-interpreter-lock-gil.html" class="sidebar-link">Working around the Global Interpreter Lock (GIL)</a></li><li><a href="/python/deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/python/logging.html" class="sidebar-link">Logging</a></li><li><a href="/python/web-server-gateway-interface-wsgi.html" class="sidebar-link">Web Server Gateway Interface (WSGI)</a></li><li><a href="/python/python-server-sent-events.html" class="sidebar-link">Python Server Sent Events</a></li><li><a href="/python/alternatives-to-switch-statement-from-other-languages.html" class="sidebar-link">Alternatives to switch statement from other languages</a></li><li><a href="/python/list-destructuring-aka-packing-and-unpacking.html" class="sidebar-link">List destructuring (aka packing and unpacking)</a></li><li><a href="/python/accessing-python-source-code-and-bytecode.html" class="sidebar-link">Accessing Python source code and bytecode</a></li><li><a href="/python/mixins.html" class="sidebar-link">Mixins</a></li><li><a href="/python/attribute-access.html" class="sidebar-link">Attribute Access</a></li><li><a href="/python/arcpy.html" class="sidebar-link">ArcPy</a></li><li><a href="/python/abstract-base-classes-abc.html" class="sidebar-link">Abstract Base Classes (abc)</a></li><li><a href="/python/plugin-and-extension-classes.html" class="sidebar-link">Plugin and Extension Classes</a></li><li><a href="/python/immutable-datatypes-int-float-str-tuple-and-frozensets.html" class="sidebar-link">Immutable datatypes(int, float, str, tuple and frozensets)</a></li><li><a href="/python/incompatibilities-moving-from-python-2-to-python-3.html" class="sidebar-link">Incompatibilities moving from Python 2 to Python 3</a></li><li><a href="/python/2to3-tool.html" class="sidebar-link">2to3 tool</a></li><li><a href="/python/non-official-python-implementations.html" class="sidebar-link">Non-official Python implementations</a></li><li><a href="/python/abstract-syntax-tree.html" class="sidebar-link">Abstract syntax tree</a></li><li><a href="/python/unicode-and-bytes.html" class="sidebar-link">Unicode and bytes</a></li><li><a href="/python/python-serial-communication-pyserial.html" class="sidebar-link">Python Serial Communication (pyserial)</a></li><li><a href="/python/neo4j-and-cypher-using-py2neo.html" class="sidebar-link">Neo4j and Cypher using Py2Neo</a></li><li><a href="/python/basic-curses-with-python.html" class="sidebar-link">Basic Curses with Python</a></li><li><a href="/python/templates-in-python.html" class="sidebar-link">Templates in python</a></li><li><a href="/python/pillow.html" class="sidebar-link">Pillow</a></li><li><a href="/python/the-pass-statement.html" class="sidebar-link">The pass statement</a></li><li><a href="/python/cli-subcommands-with-precise-help-output.html" class="sidebar-link">CLI subcommands with precise help output</a></li><li><a href="/python/database-access.html" class="sidebar-link">Database Access</a></li><li><a href="/python/connecting-python-to-sql-server.html" class="sidebar-link">Connecting Python to SQL Server</a></li><li><a href="/python/postgresql.html" class="sidebar-link">PostgreSQL</a></li><li><a href="/python/python-and-excel.html" class="sidebar-link">Python and Excel</a></li><li><a href="/python/turtle-graphics.html" class="sidebar-link">Turtle Graphics</a></li><li><a href="/python/python-persistence.html" class="sidebar-link">Python Persistence</a></li><li><a href="/python/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/python/hashlib.html" class="sidebar-link">hashlib</a></li><li><a href="/python/creating-a-windows-service-using-python.html" class="sidebar-link">Creating a Windows service using Python</a></li><li><a href="/python/mutable-vs-immutable-and-hashable-in-python.html" class="sidebar-link">Mutable vs Immutable (and Hashable) in Python</a></li><li><a href="/python/configparser.html" class="sidebar-link">configparser</a></li><li><a href="/python/optical-character-recognition.html" class="sidebar-link">Optical Character Recognition</a></li><li><a href="/python/virtual-environments.html" class="sidebar-link">Virtual environments</a></li><li><a href="/python/python-virtual-environment-virtualenv.html" class="sidebar-link">Python Virtual Environment - virtualenv</a></li><li><a href="/python/virtual-environment-with-virtualenvwrapper.html" class="sidebar-link">virtual environment with virtualenvwrapper</a></li><li><a href="/python/create-virtual-environment-with-virtualenvwrapper-in-windows.html" class="sidebar-link">Create virtual environment with virtualenvwrapper in windows</a></li><li><a href="/python/sys.html" class="sidebar-link">sys</a></li><li><a href="/python/chempy-python-package.html" class="sidebar-link">ChemPy - python package</a></li><li><a href="/python/pygame.html" class="sidebar-link">pygame</a></li><li><a href="/python/pyglet.html" class="sidebar-link">Pyglet</a></li><li><a href="/python/audio.html" class="sidebar-link">Audio</a></li><li><a href="/python/pyaudio.html" class="sidebar-link">pyaudio</a></li><li><a href="/python/shelve.html" class="sidebar-link">shelve</a></li><li><a href="/python/iot-programming-with-python-and-raspberry-pi.html" class="sidebar-link">IoT Programming with Python and Raspberry PI</a></li><li><a href="/python/kivy-cross-platform-python-framework-for-nui-development.html" class="sidebar-link">kivy - Cross-platform Python Framework for NUI Development</a></li><li><a href="/python/pandas-transform-preform-operations-on-groups-and-concatenate-the-results.html" class="sidebar-link">Pandas Transform: Preform operations on groups and concatenate the results</a></li><li><a href="/python/similarities-in-syntax-differences-in-meaning-python-vs-javascript.html" class="sidebar-link">Similarities in syntax, Differences in meaning: Python vs. JavaScript</a></li><li><a href="/python/call-python-from-c.html" class="sidebar-link">Call Python from C#</a></li><li><a href="/python/ctypes.html" class="sidebar-link">ctypes</a></li><li><a href="/python/writing-extensions.html" class="sidebar-link">Writing extensions</a></li><li><a href="/python/python-lex-yacc.html" class="sidebar-link">Python Lex-Yacc</a></li><li><a href="/python/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/python/py-test.html" class="sidebar-link">py.test</a></li><li><a href="/python/profiling.html" class="sidebar-link">Profiling</a></li><li><a href="/python/python-speed-of-program.html" class="sidebar-link">Python speed of program</a></li><li><a href="/python/performance-optimization.html" class="sidebar-link">Performance optimization</a></li><li><a href="/python/security-and-cryptography.html" class="sidebar-link">Security and Cryptography</a></li><li><a href="/python/secure-shell-connection-in-python.html" class="sidebar-link">Secure Shell Connection in Python</a></li><li><a href="/python/python-anti-patterns.html" class="sidebar-link">Python Anti-Patterns</a></li><li><a href="/python/common-pitfalls.html" aria-current="page" class="active sidebar-link">Common Pitfalls</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#list-multiplication-and-common-references" class="sidebar-link">List multiplication and common references</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#mutable-default-argument" class="sidebar-link">Mutable default argument</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#changing-the-sequence-you-are-iterating-over" class="sidebar-link">Changing the sequence you are iterating over</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#integer-and-string-identity" class="sidebar-link">Integer and String identity</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#dictionaries-are-unordered" class="sidebar-link">Dictionaries are unordered</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#variable-leaking-in-list-comprehensions-and-for-loops" class="sidebar-link">Variable leaking in list comprehensions and for loops</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#chaining-of-or-operator" class="sidebar-link">Chaining of or operator</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#accessing-int-literals-attributes" class="sidebar-link">Accessing int literals' attributes</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#sys-argv-0-is-the-name-of-the-file-being-executed" class="sidebar-link">sys.argv[0] is the name of the file being executed</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#global-interpreter-lock-gil-and-blocking-threads" class="sidebar-link">Global Interpreter Lock (GIL) and blocking threads</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#multiple-return" class="sidebar-link">Multiple return</a></li><li class="sidebar-sub-header"><a href="/python/common-pitfalls.html#pythonic-json-keys" class="sidebar-link">Pythonic JSON keys</a></li></ul></li><li><a href="/python/hidden-features.html" class="sidebar-link">Hidden Features</a></li><li><a href="/python/date-formatting.html" class="sidebar-link">Date Formatting</a></li><li><a href="/python/ijson.html" class="sidebar-link">ijson</a></li><li><a href="/python/django.html" class="sidebar-link">Django</a></li><li><a href="/python/code-blocks-execution-frames-and-namespaces.html" class="sidebar-link">Code blocks, execution frames, and namespaces</a></li><li><a href="/python/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="common-pitfalls"><a href="#common-pitfalls" class="header-anchor">#</a> Common Pitfalls</h1> <p>Python is a language meant to be clear and readable without any ambiguities and unexpected behaviors. Unfortunately, these goals are not achievable in all cases, and that is why Python does have a few corner cases where it might do something different than what you were expecting.</p> <p>This section will show you some issues that you might encounter when writing Python code.</p> <h2 id="list-multiplication-and-common-references"><a href="#list-multiplication-and-common-references" class="header-anchor">#</a> List multiplication and common references</h2> <p>Consider the case of creating a nested list structure by multiplying:</p> <div class="language-py extra-class"><pre class="language-py"><code>li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
<span class="token comment"># Out: [[], [], []]</span>

</code></pre></div><p>At first glance we would think we have a list of containing 3 different nested lists. Let's try to append <code>1</code> to the first one:</p> <div class="language-py extra-class"><pre class="language-py"><code>li<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
<span class="token comment"># Out: [[1], [1], [1]]</span>

</code></pre></div><p><code>1</code> got appended to all of the lists in <code>li</code>.</p> <p>The reason is that <code>[[]] * 3</code> doesn't create a <code>list</code> of 3 different <code>list</code>s. Rather, it creates a <code>list</code> holding 3 references to the same <code>list</code> object. As such, when we append to <code>li[0]</code> the change is visible in all sub-elements of <code>li</code>. This is equivalent of:</p> <div class="language-py extra-class"><pre class="language-py"><code>li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
element <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
li <span class="token operator">=</span> element <span class="token operator">+</span> element <span class="token operator">+</span> element
<span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
<span class="token comment"># Out: [[], [], []]</span>
element<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
<span class="token comment"># Out: [[1], [1], [1]]</span>

</code></pre></div><p>This can be further corroborated if we print the memory addresses of the contained <code>list</code> by using <code>id</code>:</p> <div class="language-py extra-class"><pre class="language-py"><code>li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">id</span><span class="token punctuation">(</span>inner_list<span class="token punctuation">)</span> <span class="token keyword">for</span> inner_list <span class="token keyword">in</span> li<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [6830760, 6830760, 6830760]</span>

</code></pre></div><p>The solution is to create the inner lists with a loop:</p> <div class="language-py extra-class"><pre class="language-py"><code>li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><p>Instead of creating a single <code>list</code> and then making 3 references to it, we now create 3 different distinct lists. This, again, can be verified by using the <code>id</code> function:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">id</span><span class="token punctuation">(</span>inner_list<span class="token punctuation">)</span> <span class="token keyword">for</span> inner_list <span class="token keyword">in</span> li<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [6331048, 6331528, 6331488]</span>

</code></pre></div><p>You can also do this.  It causes a new empty list to be created in each
<code>append</code> call.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> li<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> li<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> li<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> li<span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token number">4315469256</span>
<span class="token number">4315564552</span>
<span class="token number">4315564808</span>

</code></pre></div><p>Don't use index to loop over a sequence.</p> <p><strong>Don't:</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>tab<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre></div><p><strong>Do</strong>:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">for</span> elem <span class="token keyword">in</span> tab<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span>

</code></pre></div><p><code>for</code> will automate most iteration operations for you.</p> <p><strong>Use enumerate if you really need both the index and the element</strong>.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">for</span> i<span class="token punctuation">,</span> elem <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">:</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p><strong>Be careful when using &quot;==&quot; to check against True or False</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>var <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># this will execute if var is True or 1, 1.0, 1L</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>var <span class="token operator">!=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># this will execute if var is neither True nor 1</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>var <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># this will execute if var is False or 0 (or 0.0, 0L, 0j)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>var <span class="token operator">==</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># only execute if var is None</span>

<span class="token keyword">if</span> var<span class="token punctuation">:</span>
    <span class="token comment"># execute if var is a non-empty string/list/dictionary/tuple, non-0, etc</span>

<span class="token keyword">if</span> <span class="token keyword">not</span> var<span class="token punctuation">:</span>
    <span class="token comment"># execute if var is &quot;&quot;, {}, [], (), 0, None, etc.</span>

<span class="token keyword">if</span> var <span class="token keyword">is</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># only execute if var is boolean True, not 1</span>

<span class="token keyword">if</span> var <span class="token keyword">is</span> <span class="token boolean">False</span><span class="token punctuation">:</span>
    <span class="token comment"># only execute if var is boolean False, not 0</span>

<span class="token keyword">if</span> var <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    <span class="token comment"># same as var == None</span>

</code></pre></div><p><strong>Do not check if you can, just do it and handle the error</strong></p> <p>Pythonistas usually say &quot;It's easier to ask for forgiveness than permission&quot;.</p> <p><strong>Don't:</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isfile<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token comment"># do something</span>

</code></pre></div><p><strong>Do:</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>
<span class="token keyword">except</span> OSError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token comment"># do something</span>

</code></pre></div><p>Or even better with <code>Python 2.6+</code>:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>

</code></pre></div><p>It is much better because it is much more generic. You can apply <code>try/except</code> to almost anything. You don't need to care about what to do to prevent it, just care about the error you are risking.</p> <p><strong>Do not check against type</strong></p> <p>Python is dynamically typed, therefore checking for type makes you lose flexibility. Instead, use <a href="https://stackoverflow.com/questions/4205130/what-is-duck-typing" target="_blank" rel="noopener noreferrer">duck typing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by checking behavior. If you expect a string in a function, then use <code>str()</code> to convert any object to a string. If you expect a list, use <code>list()</code> to convert any iterable to a list.</p> <p><strong>Don't:</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span>listing<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>listing<span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        listing<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">&quot;, &quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>listing<span class="token punctuation">)</span>

</code></pre></div><p><strong>Do:</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span>listing<span class="token punctuation">)</span> <span class="token punctuation">:</span>
    l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>listing<span class="token punctuation">)</span>
    l<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">&quot;, &quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>l<span class="token punctuation">)</span>

</code></pre></div><p>Using the last way, <code>foo</code> will accept any object. <code>bar</code> will accept strings, tuples, sets, lists and much more. Cheap DRY.</p> <p><strong>Don't mix spaces and tabs</strong></p> <p><strong>Use <strong>object</strong> as first parent</strong></p> <p>This is tricky, but it will bite you as your program grows. There are old and new classes in <code>Python 2.x</code>. The old ones are, well, old. They lack some features, and can have awkward behavior with inheritance. To be usable, any of your class must be of the &quot;new style&quot;. To do so, make it inherit from <code>object</code>.</p> <p><strong>Don't:</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Child</span><span class="token punctuation">(</span>Father<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

</code></pre></div><p><strong>Do:</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>


<span class="token keyword">class</span> <span class="token class-name">Child</span><span class="token punctuation">(</span>Father<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

</code></pre></div><p>In <code>Python 3.x</code> all classes are new style so you don't need to do that.</p> <p><strong>Don't initialize class attributes outside the <strong>init</strong> method</strong></p> <p>People coming from other languages find it tempting because that is what you do in Java or PHP. You write the class name, then list your attributes and give them a default value. It seems to work in Python, however, this doesn't work the way you think.
Doing that will setup class attributes (static attributes), then when you will try to get the object attribute, it will gives you its value unless it's empty. In that case it will return the class attributes.
It implies two big hazards:</p> <li>
If the class attribute is changed, then the initial value is changed.
</li> <li><p>If you set a mutable object as a default value, you'll get the same
object shared across instances.</p></li> <p><strong>Don't (unless you want static):</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span>
    wheels <span class="token operator">=</span> <span class="token punctuation">[</span>Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><p><strong>Do :</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span>
        self<span class="token punctuation">.</span>wheels <span class="token operator">=</span> <span class="token punctuation">[</span>Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Wheel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="mutable-default-argument"><a href="#mutable-default-argument" class="header-anchor">#</a> Mutable default argument</h2> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>li<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    li<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>

foo<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [2, 1]</span>
foo<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [3, 1]</span>

</code></pre></div><p>This code behaves as expected, but what if we don't pass an argument?</p> <div class="language-py extra-class"><pre class="language-py"><code>foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [1] As expected...</span>

foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [1, 1]  Not as expected...</span>

</code></pre></div><p>This is because default arguments of functions and methods are evaluated at <strong>definition</strong> time rather than run time. So we only ever have a single instance of the <code>li</code> list.</p> <p>The way to get around it is to use only immutable types for default arguments:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>li<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> li<span class="token punctuation">:</span>
        li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    li<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>

foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [1]</span>

foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [1]</span>

</code></pre></div><p>While an improvement and although <code>if not li</code> correctly evaluates to <code>False</code>, many other objects do as well, such as zero-length sequences. The following example arguments can cause unintended results:</p> <div class="language-py extra-class"><pre class="language-py"><code>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
foo<span class="token punctuation">(</span>li<span class="token operator">=</span>x<span class="token punctuation">)</span>
<span class="token comment"># Out: [1]</span>

foo<span class="token punctuation">(</span>li<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [1]</span>

foo<span class="token punctuation">(</span>li<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> 
<span class="token comment"># Out: [1]</span>

</code></pre></div><p>The idiomatic approach is to directly check the argument against the <code>None</code> object:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>li<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> li <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    li<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>

foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Out: [1]</span>

</code></pre></div><h2 id="changing-the-sequence-you-are-iterating-over"><a href="#changing-the-sequence-you-are-iterating-over" class="header-anchor">#</a> Changing the sequence you are iterating over</h2> <p>A <code>for</code> loop iterates over a sequence, so <strong>altering this sequence inside the loop could lead to unexpected results</strong> (especially when adding or removing elements):</p> <div class="language-py extra-class"><pre class="language-py"><code>alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span><span class="token punctuation">:</span>
    alist<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span>
<span class="token comment"># Out: [1]</span>

</code></pre></div><p>Note: <code>list.pop()</code> is being used to remove elements from the list.</p> <p>The second element was not deleted because the iteration goes through the indices in order. The above loop iterates twice, with the following results:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># Iteration #1</span>
index <span class="token operator">=</span> <span class="token number">0</span>
alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
alist<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># removes '0'</span>

<span class="token comment"># Iteration #2</span>
index <span class="token operator">=</span> <span class="token number">1</span>
alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
alist<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># removes '2'</span>

<span class="token comment"># loop terminates, but alist is not empty:</span>
alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

</code></pre></div><p>This problem arises because the indices are changing while iterating in the direction of increasing index.  To avoid this problem, you can <strong>iterate through the loop backwards</strong>:</p> <div class="language-py extra-class"><pre class="language-py"><code>alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> item <span class="token keyword">in</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">enumerate</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># delete all even items</span>
    <span class="token keyword">if</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        alist<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span>
<span class="token comment"># Out: [1, 3, 5, 7]</span>

</code></pre></div><p>By iterating through the loop starting at the end, as items are removed (or added), it does not affect the indices of items earlier in the list. So this example will properly remove all items that are even from <code>alist</code>.</p> <p>A similar problem arises when <strong>inserting or appending elements to a list that you are iterating over</strong>, which can result in an infinite loop:</p> <div class="language-py extra-class"><pre class="language-py"><code>alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># break to avoid infinite loop:</span>
    <span class="token keyword">if</span> index <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">:</span>     
        <span class="token keyword">break</span>           
    alist<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span>
<span class="token comment"># Out (abbreviated): ['a', 'a', ..., 'a', 'a',  0,   1,   2]</span>

</code></pre></div><p>Without the <code>break</code> condition the loop would insert <code>'a'</code> as long as the computer does not run out of memory and the program is allowed to continue. In a situation like this, it is usually preferred to create a new list, and add items to the new list as you loop through the original list.</p> <p>When using a <code>for</code> loop, <strong>you cannot modify the list elements with the placeholder variable</strong>:</p> <div class="language-py extra-class"><pre class="language-py"><code>alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> alist<span class="token punctuation">:</span>
    <span class="token keyword">if</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        item <span class="token operator">=</span> <span class="token string">'even'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span>
<span class="token comment"># Out: [1,2,3,4]</span>

</code></pre></div><p>In the above example, <strong>changing <code>item</code> doesn't actually change anything in the original list</strong>. You need to use the list index (<code>alist[2]</code>), and <code>enumerate()</code> works well for this:</p> <div class="language-py extra-class"><pre class="language-py"><code>alist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> item <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        alist<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'even'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>alist<span class="token punctuation">)</span>
<span class="token comment"># Out: [1, 'even', 3, 'even']</span>

</code></pre></div><p>A <strong><code>while</code> loop</strong> might be a better choice in some cases:</p> <p>If you are going to <strong>delete all the items</strong> in the list:</p> <div class="language-py extra-class"><pre class="language-py"><code>zlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">while</span> zlist<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>zlist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    zlist<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'After: zlist ='</span><span class="token punctuation">,</span> zlist<span class="token punctuation">)</span>

<span class="token comment"># Out: 0</span>
<span class="token comment">#      1</span>
<span class="token comment">#      2</span>
<span class="token comment"># After: zlist = []</span>

</code></pre></div><p>Although simply resetting <code>zlist</code> will accomplish the same result;</p> <div class="language-py extra-class"><pre class="language-py"><code>zlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

</code></pre></div><p>The above example can also be combined with <code>len()</code> to stop after a certain point, or to delete all but <code>x</code> items in the list:</p> <div class="language-py extra-class"><pre class="language-py"><code>zlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
x <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">while</span> <span class="token builtin">len</span><span class="token punctuation">(</span>zlist<span class="token punctuation">)</span> <span class="token operator">&gt;</span> x<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>zlist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    zlist<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'After: zlist ='</span><span class="token punctuation">,</span> zlist<span class="token punctuation">)</span>

<span class="token comment"># Out: 0</span>
<span class="token comment">#      1</span>
<span class="token comment"># After: zlist = [2]</span>

</code></pre></div><p>Or to <strong>loop through a list while deleting elements that meet a certain condition</strong> (in this case deleting all even elements):</p> <div class="language-py extra-class"><pre class="language-py"><code>zlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">while</span> i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>zlist<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> zlist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        zlist<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        i <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>zlist<span class="token punctuation">)</span>
<span class="token comment"># Out: [1, 3, 5]</span>

</code></pre></div><p>Notice that you don't increment <code>i</code> after deleting an element. By deleting the element at <code>zlist[i]</code>, the index of the next item has decreased by one, so by checking <code>zlist[i]</code> with the same value for <code>i</code> on the next iteration, you will be correctly checking the next item in the list.</p> <p>A contrary way to think about removing unwanted items from a list, is to <strong>add wanted items to a new list</strong>.  The following example is an alternative to the latter <code>while</code> loop example:</p> <div class="language-py extra-class"><pre class="language-py"><code>zlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>

z_temp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> zlist<span class="token punctuation">:</span>
    <span class="token keyword">if</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        z_temp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>item<span class="token punctuation">)</span>
zlist <span class="token operator">=</span> z_temp
<span class="token keyword">print</span><span class="token punctuation">(</span>zlist<span class="token punctuation">)</span>
<span class="token comment"># Out: [1, 3, 5]</span>

</code></pre></div><p>Here we are funneling desired results into a new list.  We can then optionally reassign the temporary list to the original variable.</p> <p>With this trend of thinking, you can invoke one of Python's most elegant and powerful features, <strong>list comprehensions</strong>, which eliminates temporary lists and diverges from the previously discussed in-place list/index mutation ideology.</p> <div class="language-py extra-class"><pre class="language-py"><code>zlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> zlist <span class="token keyword">if</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token comment"># Out: [1, 3, 5]</span>

</code></pre></div><h2 id="integer-and-string-identity"><a href="#integer-and-string-identity" class="header-anchor">#</a> Integer and String identity</h2> <p>Python uses internal caching for a range of integers to reduce unnecessary overhead from their repeated creation.</p> <p>In effect, this can lead to confusing behavior when comparing integer identities:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">8</span> <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">7</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>

</code></pre></div><p>and, using another example:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">256</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token number">256</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>

</code></pre></div><p>Wait what?</p> <p>We can see that the identity operation <code>is</code> yields <code>True</code> for some integers (<code>-3</code>, <code>256</code>) but no for others (<code>-8</code>, <code>257</code>).</p> <p>To be more specific, integers in the range <code>[-5, 256]</code> are internally cached during interpreter startup and are only created once. As such, they are <strong>identical</strong> and comparing their identities with <code>is</code> yields <code>True</code>; integers outside this range are (usually) created on-the-fly and their identities compare to <code>False</code>.</p> <p>This is a common pitfall since this is a common range for testing, but often enough, the code fails in the later staging process (or worse - production) with no apparent reason after working perfectly in development.</p> <p>The solution is to <strong>always compare values using the equality</strong> (<code>==</code>) operator and <strong>not</strong> the identity (<code>is</code>) operator.</p> <p>Python also keeps references to commonly used strings and can result in similarly confusing behavior when comparing identities (i.e. using <code>is</code>) of strings.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'python'</span> <span class="token keyword">is</span> <span class="token string">'py'</span> <span class="token operator">+</span> <span class="token string">'thon'</span>
<span class="token boolean">True</span>

</code></pre></div><p>The string <code>'python'</code> is commonly used, so Python has one object that all references to the string <code>'python'</code> use.</p> <p>For uncommon strings, comparing identity fails even when the strings are equal.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'this is not a common string'</span> <span class="token keyword">is</span> <span class="token string">'this is not'</span> <span class="token operator">+</span> <span class="token string">' a common string'</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'this is not a common string'</span> <span class="token operator">==</span> <span class="token string">'this is not'</span> <span class="token operator">+</span> <span class="token string">' a common string'</span>
<span class="token boolean">True</span>

</code></pre></div><p>So, just like the rule for Integers, <strong>always compare string values using the equality</strong> (<code>==</code>) operator and <strong>not</strong> the identity (<code>is</code>) operator.</p> <h2 id="dictionaries-are-unordered"><a href="#dictionaries-are-unordered" class="header-anchor">#</a> Dictionaries are unordered</h2> <p>You might expect a Python dictionary to be sorted by keys like, for example, a C++ <code>std::map</code>, but this is not the case:</p> <div class="language-py extra-class"><pre class="language-py"><code>myDict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'first'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'second'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'third'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>myDict<span class="token punctuation">)</span>
<span class="token comment"># Out: {'first': 1, 'second': 2, 'third': 3}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">[</span>k <span class="token keyword">for</span> k <span class="token keyword">in</span> myDict<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># Out: ['second', 'third', 'first']</span>

</code></pre></div><p>Python doesn't have any built-in class that automatically sorts its elements by key.</p> <p>However, if sorting is not a must, and you just want your dictionary to remember the order of insertion of its key/value pairs, you can use <code>collections.OrderedDict</code>:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> collections <span class="token keyword">import</span> OrderedDict

oDict <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'second'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'third'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">[</span>k <span class="token keyword">for</span> k <span class="token keyword">in</span> oDict<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># Out: ['first', 'second', 'third']</span>

</code></pre></div><p>Keep in mind that initializing an <code>OrderedDict</code> with a standard dictionary won't sort in any way the dictionary for you. All that this structure does is to <strong>preserve</strong> the order of key insertion.</p> <p>The implementation of dictionaries was <a href="https://docs.python.org/3.6/whatsnew/3.6.html#new-dict-implementation" target="_blank" rel="noopener noreferrer">changed in Python 3.6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to improve their memory consumption. A side effect of this new implementation is that it also preserves the order of keyword arguments passed to a function:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>kw<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

func<span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> d<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> e<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span> 
dict_keys<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># expected order </span>

</code></pre></div><blockquote></blockquote> <p><strong>Caveat</strong>: beware that <a href="https://docs.python.org/3.6/whatsnew/3.6.html#new-dict-implementation" target="_blank" rel="noopener noreferrer">“<strong>the order-preserving aspect of this new implementation is considered an implementation detail and should not be relied upon</strong>”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, as it may change in the future.</p> <h2 id="variable-leaking-in-list-comprehensions-and-for-loops"><a href="#variable-leaking-in-list-comprehensions-and-for-loops" class="header-anchor">#</a> Variable leaking in list comprehensions and for loops</h2> <p>Consider the following list comprehension</p> <div class="language-py extra-class"><pre class="language-py"><code>i <span class="token operator">=</span> <span class="token number">0</span>
a <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment"># Outputs 2</span>

</code></pre></div><p>This occurs only in Python 2 due to the fact that the list comprehension “leaks” the loop control variable into the surrounding scope (<a href="http://python-history.blogspot.com/2010/06/from-list-comprehensions-to-generator.html" target="_blank" rel="noopener noreferrer">source<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). This behavior can lead to hard-to-find bugs and <strong><strong>it has been fixed in Python 3</strong></strong>.</p> <div class="language-py extra-class"><pre class="language-py"><code>i <span class="token operator">=</span> <span class="token number">0</span>
a <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment"># Outputs 0</span>

</code></pre></div><p>Similarly, for loops have no private scope for their iteration variable</p> <div class="language-py extra-class"><pre class="language-py"><code>i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment"># Outputs 2</span>

</code></pre></div><p>This type of behavior occurs both in Python 2 and Python 3.</p> <p>To avoid issues with leaking variables, use new variables in list comprehensions and for loops as appropriate.</p> <h2 id="chaining-of-or-operator"><a href="#chaining-of-or-operator" class="header-anchor">#</a> Chaining of or operator</h2> <p>When testing for any of several equality comparisons:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">or</span> b <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">or</span> c <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>

</code></pre></div><p>it is tempting to abbreviate this to</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> a <span class="token keyword">or</span> b <span class="token keyword">or</span> c <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token comment"># Wrong</span>

</code></pre></div><p>This is wrong; the <code>or</code> operator has <a href="https://docs.python.org/3/reference/expressions.html#operator-precedence" target="_blank" rel="noopener noreferrer">lower precedence<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> than <code>==</code>, so the expression will be evaluated as <code>if (a) or (b) or (c == 3):</code>. The correct way is explicitly checking all the conditions:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">or</span> b <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">or</span> c <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>  <span class="token comment"># Right Way</span>

</code></pre></div><p>Alternately, the built-in <code>any()</code> function may be used in place of chained <code>or</code> operators:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> <span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">,</span> c <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># Right</span>

</code></pre></div><p>Or, to make it more efficient:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> <span class="token builtin">any</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># Right</span>

</code></pre></div><p>Or, to make it shorter:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> <span class="token number">3</span> <span class="token keyword">in</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># Right</span>

</code></pre></div><p>Here, we use the <code>in</code> operator to test if the value is present in a tuple containing the values we want to compare against.</p> <p>Similarly, it is incorrect to write</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">or</span> <span class="token number">2</span> <span class="token keyword">or</span> <span class="token number">3</span><span class="token punctuation">:</span>

</code></pre></div><p>which should be written as</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> a <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

</code></pre></div><h2 id="accessing-int-literals-attributes"><a href="#accessing-int-literals-attributes" class="header-anchor">#</a> Accessing int literals' attributes</h2> <p>You might have heard that everything in Python is an object, even literals.
This means, for example, <code>7</code> is an object as well, which means it has attributes.
For example, one of these attributes is the <code>bit_length</code>. It returns the amount of bits needed to represent the value it is called upon.</p> <div class="language-py extra-class"><pre class="language-py"><code>x <span class="token operator">=</span> <span class="token number">7</span>
x<span class="token punctuation">.</span>bit_length<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Out: 3</span>

</code></pre></div><p>Seeing the above code works, you might intuitively think that <code>7.bit_length()</code> would work as well, only to find out it raises a <code>SyntaxError</code>. Why? because the interpreter needs to differentiate between an attribute access and a floating number (for example <code>7.2</code> or <code>7.bit_length()</code>). It can't, and that's why an exception is raised.</p> <p>There are a few ways to access an <code>int</code> literals' attributes:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># parenthesis</span>
<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span>bit_length<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># a space</span>
<span class="token number">7</span> <span class="token punctuation">.</span>bit_length<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>Using two dots (like this <code>7..bit_length()</code>) doesn't work in this case, because that creates a <code>float</code> literal and floats don't have the <code>bit_length()</code> method.</p> <p>This problem doesn't exist when accessing <code>float</code> literals' attributes since the interperter is &quot;smart&quot; enough to know that a <code>float</code> literal can't contain two <code>.</code>, for example:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token number">7.2</span><span class="token punctuation">.</span>as_integer_ratio<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Out: (8106479329266893, 1125899906842624)</span>

</code></pre></div><h2 id="sys-argv-0-is-the-name-of-the-file-being-executed"><a href="#sys-argv-0-is-the-name-of-the-file-being-executed" class="header-anchor">#</a> sys.argv[0] is the name of the file being executed</h2> <p>The first element of <code>sys.argv[0]</code> is the name of the python file being executed. The remaining elements are the script arguments.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># script.py</span>
<span class="token keyword">import</span> sys

<span class="token keyword">print</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>

</code></pre></div><h3 id=""><a href="#" class="header-anchor">#</a></h3> <div class="language-py extra-class"><pre class="language-py"><code>$ python script<span class="token punctuation">.</span>py
<span class="token operator">=</span><span class="token operator">&gt;</span> script<span class="token punctuation">.</span>py
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token string">'script.py'</span><span class="token punctuation">]</span>

$ python script<span class="token punctuation">.</span>py fizz
<span class="token operator">=</span><span class="token operator">&gt;</span> script<span class="token punctuation">.</span>py
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token string">'script.py'</span><span class="token punctuation">,</span> <span class="token string">'fizz'</span><span class="token punctuation">]</span>

$ python script<span class="token punctuation">.</span>py fizz buzz
<span class="token operator">=</span><span class="token operator">&gt;</span> script<span class="token punctuation">.</span>py
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token string">'script.py'</span><span class="token punctuation">,</span> <span class="token string">'fizz'</span><span class="token punctuation">,</span> <span class="token string">'buzz'</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="global-interpreter-lock-gil-and-blocking-threads"><a href="#global-interpreter-lock-gil-and-blocking-threads" class="header-anchor">#</a> Global Interpreter Lock (GIL) and blocking threads</h2> <p>Plenty has been <a href="https://en.wikipedia.org/wiki/Global_interpreter_lock" target="_blank" rel="noopener noreferrer">written<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://wiki.python.org/moin/GlobalInterpreterLock" target="_blank" rel="noopener noreferrer">about<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://docs.python.org/3/glossary.html#term-global-interpreter-lock" target="_blank" rel="noopener noreferrer">Python's<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="http://python-notes.curiousefficiency.org/en/latest/python3/multicore_python.html" target="_blank" rel="noopener noreferrer">GIL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It can sometimes cause confusion when dealing with multi-threaded (not to be confused with multiprocess) applications.</p> <p>Here's an example:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> math
<span class="token keyword">from</span> threading <span class="token keyword">import</span> Thread

<span class="token keyword">def</span> <span class="token function">calc_fact</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    math<span class="token punctuation">.</span>factorial<span class="token punctuation">(</span>num<span class="token punctuation">)</span>

num <span class="token operator">=</span> <span class="token number">600000</span>
t <span class="token operator">=</span> Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>calc_fact<span class="token punctuation">,</span> daemon<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;About to calculate: {}!&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span>
t<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Calculating...&quot;</span><span class="token punctuation">)</span>
t<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Calculated&quot;</span><span class="token punctuation">)</span>

</code></pre></div><p>You would expect to see <code>Calculating...</code> printed out immediately after the thread is started, we wanted the calculation to happen in a new thread after all! But in actuality, you see it get printed after the calculation is complete. That is because the new thread relies on a C function (<code>math.factorial</code>) which will lock the GIL while it executes.</p> <p>There are a couple ways around this. The first is to implement your factorial function in native Python. This will allow the main thread to grab control while you are inside your loop. The downside is that this solution will be <strong>a lot</strong> slower, since we're not using the C function anymore.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">calc_fact</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot; A slow version of factorial in native Python &quot;&quot;&quot;</span>
    res <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">while</span> num <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> res <span class="token operator">*</span> num
        num <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> res

</code></pre></div><p>You can also <code>sleep</code> for a period of time before starting your execution. Note: this won't actually allow your program to interrupt the computation happening inside the C function, but it will allow your main thread to continue after the spawn, which is what you may expect.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">calc_fact</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sleep<span class="token punctuation">(</span><span class="token number">0.001</span><span class="token punctuation">)</span>
    math<span class="token punctuation">.</span>factorial<span class="token punctuation">(</span>num<span class="token punctuation">)</span>

</code></pre></div><h2 id="multiple-return"><a href="#multiple-return" class="header-anchor">#</a> Multiple return</h2> <p>Function xyz returns two values a and b:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">xyz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">return</span> a<span class="token punctuation">,</span> b

</code></pre></div><p>Code calling xyz stores result into one variable assuming xyz returns only one value:</p> <div class="language-py extra-class"><pre class="language-py"><code>t <span class="token operator">=</span> xyz<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>Value of <code>t</code> is actually a tuple (a, b) so any action on <code>t</code> assuming it is not a tuple may fail <strong>deep</strong> in the code with a an unexpected <strong>error</strong> about tuples.</p> <blockquote></blockquote> <p>TypeError: type tuple doesn't define ... method</p> <p>The fix would be to do:</p> <div class="language-py extra-class"><pre class="language-py"><code>a<span class="token punctuation">,</span> b <span class="token operator">=</span> xyz<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>Beginners will have trouble finding the reason of this message by only reading the tuple error message !</p> <h2 id="pythonic-json-keys"><a href="#pythonic-json-keys" class="header-anchor">#</a> Pythonic JSON keys</h2> <div class="language-py extra-class"><pre class="language-py"><code>my_var <span class="token operator">=</span> <span class="token string">'bla'</span><span class="token punctuation">;</span>
api_key <span class="token operator">=</span> <span class="token string">'key'</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>lots of code here<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;language&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span> my_var<span class="token punctuation">:</span> api_key<span class="token punctuation">}</span>

</code></pre></div><p>If you are used to JavaScript, variable evaluation in Python dictionaries won't be what you expect it to be. This statement in JavaScript would result in the <code>params</code> object as follows:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;language&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;my_var&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;key&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>In Python, however, it would result in the following dictionary:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;language&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bla&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;key&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>my_var</code> is evaluated and its value is used as the key.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/python/common-pitfalls.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/python-anti-patterns.html" class="prev">
        Python Anti-Patterns
      </a></span> <span class="next"><a href="/python/hidden-features.html">
        Hidden Features
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2669.9b0a0b32.js" defer></script>
  </body>
</html>
