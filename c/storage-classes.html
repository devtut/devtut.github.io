<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C - Storage Classes</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="auto, register, static, typedef, extern, _Thread_local">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="C - Storage Classes">
    <meta property="og:description" content="auto, register, static, typedef, extern, _Thread_local">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/c/storage-classes.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="C - Storage Classes">
    <meta name="twitter:description" content="auto, register, static, typedef, extern, _Thread_local">
    <meta name="twitter:url" content="/c/storage-classes.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/594.852cdd33.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>C</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/c/" class="sidebar-link">Disclaimer</a></li><li><a href="/c/getting-started-with-c-language.html" class="sidebar-link">Getting started with C Language</a></li><li><a href="/c/comments.html" class="sidebar-link">Comments</a></li><li><a href="/c/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/c/operators.html" class="sidebar-link">Operators</a></li><li><a href="/c/boolean.html" class="sidebar-link">Boolean</a></li><li><a href="/c/strings.html" class="sidebar-link">Strings</a></li><li><a href="/c/literals-for-numbers-characters-and-strings.html" class="sidebar-link">Literals for numbers, characters and strings</a></li><li><a href="/c/compound-literals.html" class="sidebar-link">Compound Literals</a></li><li><a href="/c/bit-fields.html" class="sidebar-link">Bit-fields</a></li><li><a href="/c/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/c/linked-lists.html" class="sidebar-link">Linked lists</a></li><li><a href="/c/enumerations.html" class="sidebar-link">Enumerations</a></li><li><a href="/c/structs.html" class="sidebar-link">Structs</a></li><li><a href="/c/standard-math.html" class="sidebar-link">Standard Math</a></li><li><a href="/c/iteration-statements-loops-for-while-do-while.html" class="sidebar-link">Iteration Statements/Loops: for, while, do-while</a></li><li><a href="/c/selection-statements.html" class="sidebar-link">Selection Statements</a></li><li><a href="/c/initialization.html" class="sidebar-link">Initialization</a></li><li><a href="/c/declaration-vs-definition.html" class="sidebar-link">Declaration vs Definition</a></li><li><a href="/c/files-and-i-o-streams.html" class="sidebar-link">Files and I/O streams</a></li><li><a href="/c/formatted-input-output.html" class="sidebar-link">Formatted Input/Output</a></li><li><a href="/c/pointers.html" class="sidebar-link">Pointers</a></li><li><a href="/c/sequence-points.html" class="sidebar-link">Sequence points</a></li><li><a href="/c/function-pointers.html" class="sidebar-link">Function Pointers</a></li><li><a href="/c/function-parameters.html" class="sidebar-link">Function Parameters</a></li><li><a href="/c/pass-2d-arrays-to-functions.html" class="sidebar-link">Pass 2D-arrays to functions</a></li><li><a href="/c/error-handling.html" class="sidebar-link">Error handling</a></li><li><a href="/c/undefined-behavior.html" class="sidebar-link">Undefined behavior</a></li><li><a href="/c/random-number-generation.html" class="sidebar-link">Random Number Generation</a></li><li><a href="/c/preprocessor-and-macros.html" class="sidebar-link">Preprocessor and Macros</a></li><li><a href="/c/signal-handling.html" class="sidebar-link">Signal handling</a></li><li><a href="/c/variable-arguments.html" class="sidebar-link">Variable arguments</a></li><li><a href="/c/assertion.html" class="sidebar-link">Assertion</a></li><li><a href="/c/generic-selection.html" class="sidebar-link">Generic selection</a></li><li><a href="/c/x-macros.html" class="sidebar-link">X-macros</a></li><li><a href="/c/aliasing-and-effective-type.html" class="sidebar-link">Aliasing and effective type</a></li><li><a href="/c/compilation.html" class="sidebar-link">Compilation</a></li><li><a href="/c/identifier-scope.html" class="sidebar-link">Identifier Scope</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/implicit-and-explicit-conversions.html" class="sidebar-link">Implicit and Explicit Conversions</a></li><li><a href="/c/type-qualifiers.html" class="sidebar-link">Type Qualifiers</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/typedef.html" class="sidebar-link">Typedef</a></li><li><a href="/c/storage-classes.html" class="active sidebar-link">Storage Classes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/c/storage-classes.html#auto" class="sidebar-link">auto</a></li><li class="sidebar-sub-header"><a href="/c/storage-classes.html#register" class="sidebar-link">register</a></li><li class="sidebar-sub-header"><a href="/c/storage-classes.html#static" class="sidebar-link">static</a></li><li class="sidebar-sub-header"><a href="/c/storage-classes.html#typedef" class="sidebar-link">typedef</a></li><li class="sidebar-sub-header"><a href="/c/storage-classes.html#extern" class="sidebar-link">extern</a></li><li class="sidebar-sub-header"><a href="/c/storage-classes.html#thread-local" class="sidebar-link">Threadlocal</a></li></ul></li><li><a href="/c/declarations.html" class="sidebar-link">Declarations</a></li><li><a href="/c/inline-assembly.html" class="sidebar-link">Inline assembly</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/structure-padding-and-packing.html" class="sidebar-link">Structure Padding and Packing</a></li><li><a href="/c/memory-management.html" class="sidebar-link">Memory management</a></li><li><a href="/c/implementation-defined-behaviour.html" class="sidebar-link">Implementation-defined behaviour</a></li><li><a href="/c/atomics.html" class="sidebar-link">Atomics</a></li><li><a href="/c/jump-statements.html" class="sidebar-link">Jump Statements</a></li><li><a href="/c/create-and-include-header-files.html" class="sidebar-link">Create and include header files</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/ctype-h-character-classification-conversion.html" class="sidebar-link">— character classification &amp; conversion</a></li><li><a href="/c/side-effects.html" class="sidebar-link">Side Effects</a></li><li><a href="/c/multi-character-character-sequence.html" class="sidebar-link">Multi-Character Character Sequence</a></li><li><a href="/c/constraints.html" class="sidebar-link">Constraints</a></li><li><a href="/c/inlining.html" class="sidebar-link">Inlining</a></li><li><a href="/c/unions.html" class="sidebar-link">Unions</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/c/interprocess-communication-ipc.html" class="sidebar-link">Interprocess Communication (IPC)</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/common-c-programming-idioms-and-developer-practices.html" class="sidebar-link">Common C programming idioms and developer practices</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="storage-classes"><a href="#storage-classes" class="header-anchor">#</a> Storage Classes</h1> <p>A storage class is used to set the scope of a variable or function. By knowing the storage class of a variable, we can determine the life-time of that variable during the run-time of the program.</p> <h2 id="auto"><a href="#auto" class="header-anchor">#</a> auto</h2> <p>This storage class denotes that an identifier has automatic storage duration. This means once the scope in which the identifier was defined ends, the object denoted by the identifier is no longer valid.</p> <p>Since all objects, not living in global scope or being declared <code>static</code>, have automatic storage duration by default when defined, this keyword is mostly of historical interest and should not be used:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">/* An integer with automatic storage duration. */</span>
    <span class="token keyword">auto</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token comment">/* Same */</span>
    <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">/* The values of i and j are no longer able to be used. */</span>

</code></pre></div><h2 id="register"><a href="#register" class="header-anchor">#</a> register</h2> <p>Hints to the compiler that access to an object should be as fast as possible. Whether the compiler actually uses the hint is implementation-defined; it may simply treat it as equivalent to <code>auto</code>.</p> <p>The only property that is definitively different for all objects that are declared with <code>register</code> is that they cannot have their address computed. Thereby <code>register</code> can be a good tool to ensure certain optimizations:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">register</span> size_t size <span class="token operator">=</span> <span class="token number">467</span><span class="token punctuation">;</span>

</code></pre></div><p>is an object that can never <strong>alias</strong> because no code can pass its address to another function where it might be changed unexpectedly.</p> <p>This property also implies that an array</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">register</span> <span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre></div><p>cannot decay into a pointer to its first element (i.e. <code>array</code> turning into <code>&amp;array[0]</code>). This means that the elements of such an array cannot be accessed and the array itself cannot be passed to a function.</p> <p>In fact, the only legal usage of an array declared with a <code>register</code> storage class is the <code>sizeof</code> operator; any other operator would require the address of the first element of the array. For that reason, arrays generally should not be declared with the <code>register</code> keyword since it makes them useless for anything other than size computation of the entire array, which can be done just as easily without the <code>register</code> keyword.</p> <p>The <code>register</code> storage class is more appropriate for variables that are defined inside a block and are accessed with high frequency. For example,</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* prints the sum of the first 5 integers*/</span>
<span class="token comment">/* code assumed to be part of a function body*/</span> 
<span class="token punctuation">{</span> 
    <span class="token keyword">register</span> <span class="token keyword">int</span> k<span class="token punctuation">,</span> sum<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> sum <span class="token operator">+=</span> k<span class="token punctuation">,</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\t%d\n&quot;</span><span class="token punctuation">,</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <code>_Alignof</code> operator is also allowed to be used with <code>register</code> arrays.</p> <h2 id="static"><a href="#static" class="header-anchor">#</a> static</h2> <p>The <code>static</code> storage class serves different purposes, depending on the location of the declaration in the file:</p> <li>
To confine the identifier to that [translation unit](https://en.wikipedia.org/wiki/Translation_unit_(programming)) only (scope=file).
<div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* No other translation unit can use this variable. */</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

<span class="token comment">/* Same; static is attached to the function type of f, not the return type int. */</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></li> <li>
To save data for use with the next call of a function (scope=block):
<div class="language-c extra-class"><pre class="language-c"><code> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">/* has static storage duration and its lifetime is the
                        * entire execution of the program; initialized to 0 on 
                        * first function call */</span> 
     <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">/* b has block scope and has automatic storage duration and 
                 * only &quot;exists&quot; within function */</span>
     
     a <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
     b <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span> 

     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;static int a = %d, int b = %d\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     <span class="token keyword">int</span> i<span class="token punctuation">;</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

</code></pre></div><p>This code prints:</p> <div class="language-c extra-class"><pre class="language-c"><code> <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span>
 <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span>
 <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span>
 <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span>
 <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span>

</code></pre></div></li> <p>Static variables retain their value even when called from multiple different threads.</p> <li>
Used in function parameters to denote an array is expected to have a constant minimum number of elements and a non-null parameter:
<div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* a is expected to have at least 512 elements. */</span>
<span class="token keyword">void</span> <span class="token function">printInts</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token keyword">static</span> <span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    size_t i<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">512</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The required number of items (or even a non-null pointer) is not necessarily checked by the compiler, and compilers are not required to notify you in any way if you don't have enough elements. If a programmer passes fewer than 512 elements or a null pointer, undefined behavior is the result. Since it is impossible to enforce this, extra care must be used when passing a value for that parameter to such a function.
</p></li><p></p> <h2 id="typedef"><a href="#typedef" class="header-anchor">#</a> typedef</h2> <p>Defines a new type based on an existing type. Its syntax mirrors that of a variable declaration.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* Byte can be used wherever `unsigned char` is needed */</span>
<span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> Byte<span class="token punctuation">;</span>

<span class="token comment">/* Integer is the type used to declare an array consisting of a single int */</span>
<span class="token keyword">typedef</span> <span class="token keyword">int</span> Integer<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/* NodeRef is a type used for pointers to a structure type with the tag &quot;node&quot; */</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">node</span> <span class="token operator">*</span>NodeRef<span class="token punctuation">;</span>

<span class="token comment">/* SigHandler is the function pointer type that gets passed to the signal function. */</span>
<span class="token keyword">typedef</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>SigHandler<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>While not technically a storage class, a compiler will treat it as one since none of the other storage classes are allowed if the <code>typedef</code> keyword is used.</p> <p>The <code>typedef</code>s are important and should not be substituted with <code>#define</code> macro.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">int</span> newType<span class="token punctuation">;</span> 
newType <span class="token operator">*</span>ptr<span class="token punctuation">;</span>        <span class="token comment">// ptr is pointer to variable of type 'newType' aka int</span>

</code></pre></div><p>However,</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">define</span> int newType</span>
newType <span class="token operator">*</span>ptr<span class="token punctuation">;</span>        <span class="token comment">// Even though macros are exact replacements to words, this doesn't result to a pointer to variable of type 'newType' aka int</span>

</code></pre></div><h2 id="extern"><a href="#extern" class="header-anchor">#</a> extern</h2> <p>Used to <strong>declare an object or function</strong> that is defined elsewhere (and that has <strong>external linkage</strong>). In general, it is used to declare an object or function to be used in a module that is not the one in which the corresponding object or function is defined:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* file1.c */</span>
<span class="token keyword">int</span> foo <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">/* Has external linkage since it is declared at file scope. */</span>

</code></pre></div><div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* file2.c */</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">/* `extern` keyword refers to external definition of `foo`. */</span>
    <span class="token keyword">extern</span> <span class="token keyword">int</span> foo<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Things get slightly more interesting with the introduction of the <code>inline</code> keyword in C99:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* Should usually be place in a header file such that all users see the definition */</span>
<span class="token comment">/* Hints to the compiler that the function `bar` might be inlined */</span>
<span class="token comment">/* and suppresses the generation of an external symbol, unless stated otherwise. */</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token keyword">int</span> drink<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;You ordered drink no.%d\n&quot;</span><span class="token punctuation">,</span> drink<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* To be found in just one .c file.
   Creates an external function definition of `bar` for use by other files.
   The compiler is allowed to choose between the inline version and the external
   definition when `bar` is called. Without this line, `bar` would only be an inline
   function, and other files would not be able to call it. */</span>
<span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="thread-local"><a href="#thread-local" class="header-anchor">#</a> _Thread_local</h2> <p>This was a new storage specifier introduced in C11 along with multi-threading. This isn't available in earlier C standards.</p> <p>Denotes <strong>thread storage duration</strong>. A variable declared with <code>_Thread_local</code> storage specifier denotes that the object is <strong>local to that thread</strong> and its lifetime is the entire execution of the thread in which it's created. It can also appear along with <code>static</code> or <code>extern</code>.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;threads.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">define</span> SIZE 5</span>

<span class="token keyword">int</span> <span class="token function">thread_func</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>id<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">/* thread local variable i. */</span>
    <span class="token keyword">static</span> <span class="token keyword">_Thread_local</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token comment">/* Prints the ID passed from main() and the address of the i.
     * Running this program will print different addresses for i, showing
     * that they are all distinct objects. */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;From thread:[%d], Address of i (thread local): %p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    thrd_t id<span class="token punctuation">[</span>SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span>SIZE<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">/* create 5 threads. */</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">thrd_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>id<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> thread_func<span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* wait for threads to complete. */</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">thrd_join</span><span class="token punctuation">(</span>id<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <li>
[auto|register|static|extern] <Data type=""><Variable name="">[ = <Value>];
</Value></Variable></Data></li> <li>
[static _Thread_local|extern _Thread_local|_Thread_local] <Data type=""><Variable name="">[ = <Value>]; /* since &gt;=C11 */
</Value></Variable></Data></li> <li>
Examples:
</li> <li>
typedef int **foo**;
</li> <li>
extern int **foo**[2];
</li> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Storage class specifiers are the keywords which can appear next to the top-level type of a declaration. The use of these keywords affects the storage duration and linkage of the declared object, depending on whether it is declared at file scope or at block scope:</p> <table><thead><tr><th>Keyword</th> <th>Storage Duration</th> <th>Linkage</th> <th>Remarks</th></tr></thead> <tbody><tr><td><code>static</code></td> <td>Static</td> <td>Internal</td> <td>Sets internal linkage for objects at file scope; sets static storage duration for objects at block scope.</td></tr> <tr><td><code>extern</code></td> <td>Static</td> <td>External</td> <td>Implied and therefore redundant for objects defined at file scope which also have an initializer. When used in a declaration at file scope without an initializer, hints that the definition is to be found in another translation unit and will be resolved at link-time.</td></tr> <tr><td><code>auto</code></td> <td>Automatic</td> <td>Irrelevant</td> <td>Implied and therefore redundant for objects declared at block scope.</td></tr> <tr><td><code>register</code></td> <td>Automatic</td> <td>Irrelevant</td> <td>Relevant only to objects with automatic storage duration. Provides a hint that the variable should be stored in a register. An imposed constraint is that one cannot use the unary <code>&amp;</code> &quot;address of&quot; operator on such an object, and therefore the object cannot be aliased.</td></tr> <tr><td><code>typedef</code></td> <td>Irrelevant</td> <td>Irrelevant</td> <td>Not a storage class specifier in practice, but works like one from a syntactic point of view. The only difference is that the declared identifier is a type, rather than an object.</td></tr> <tr><td><code>_Thread_local</code></td> <td>Thread</td> <td>Internal/external</td> <td>Introduced in C11, to represent <strong>thread storage duration</strong>. If used at block scope, it shall also include <code>extern</code> or <code>static</code>.</td></tr></tbody></table> <p>Every object has an associated storage duration (regardless of scope) and linkage (relevant to declarations at file scope only), even when these keywords are omitted.</p> <p>The ordering of storage class specifiers with respect to top-level type specifiers (<code>int</code>, <code>unsigned</code>, <code>short</code>, etc.) and top-level type qualifiers (<code>const</code>, <code>volatile</code>) is not enforced, so both of these declarations are valid:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">unsigned</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">/* bad practice */</span>
<span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">/* good practice */</span>

</code></pre></div><p>It is, however, considered a good practice to put storage class specifiers first, then any type qualifiers, then the type specifier (<code>void</code>, <code>char</code>, <code>int</code>, <code>signed long</code>, <code>unsigned long long</code>, <code>long double</code>...).</p> <p>Not all storage class specifiers are legal at a certain scope:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">register</span> <span class="token keyword">int</span> x<span class="token punctuation">;</span> <span class="token comment">/* legal at block scope, illegal at file scope */</span>
<span class="token keyword">auto</span> <span class="token keyword">int</span> y<span class="token punctuation">;</span> <span class="token comment">/* same */</span>

<span class="token keyword">static</span> <span class="token keyword">int</span> z<span class="token punctuation">;</span> <span class="token comment">/* legal at both file and block scope */</span>
<span class="token keyword">extern</span> <span class="token keyword">int</span> a<span class="token punctuation">;</span> <span class="token comment">/* same */</span>

<span class="token keyword">extern</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">/* legal and redundant at file scope, illegal at block scope */</span>

<span class="token comment">/* legal because typedef is treated like a storage class specifier syntactically */</span>
<span class="token keyword">int</span> <span class="token keyword">typedef</span> new_type_name<span class="token punctuation">;</span>

</code></pre></div><h3 id="storage-duration"><a href="#storage-duration" class="header-anchor">#</a> Storage Duration</h3> <p>Storage duration can be either static or automatic. For a declared object, it is determined depending on its scope and the storage class specifiers.</p> <p><a name="remarks-static-storage-duration-1" class="remarks-subsection-anchor"></a></p><h3>Static Storage Duration</h3><p></p> <p>Variables with static storage duration live throughout the whole execution of the program and can be declared both at file scope (with or without <code>static</code>) and at block scope (by putting <code>static</code> explicitly). They are usually allocated and initialized by the operating system at program startup and reclaimed when the process terminates. In practice, executable formats have dedicated sections for such variables (<code>data</code>, <code>bss</code> and <code>rodata</code>) and these whole sections from the file are mapped into memory at certain ranges.</p> <p><a name="remarks-thread-storage-duration-2" class="remarks-subsection-anchor"></a></p><h3>Thread Storage Duration</h3><p></p> <p>This storage duration was introduced in C11. This wasn't available in earlier C standards. Some compilers provide a non-standard extension with similar semantics. For example, gcc supports <code>__thread</code> specifier which can be used in earlier C standards which didn't have <code>_Thread_local</code>.</p> <p>Variables with thread storage duration can be declared at both file scope and block scope. If declared at block scope, it shall also use <code>static</code> or <code>extern</code> storage specifier. Its lifetime is the entire execution the <strong>thread</strong> in which it's created. This is the only storage specifier that can appear alongside another storage specifier.</p> <p><a name="remarks-automatic-storage-duration-3" class="remarks-subsection-anchor"></a></p><h3>Automatic Storage Duration</h3><p></p> <p>Variables with automatic storage duration can only be declared at block scope (directly within a function or within a block in that function). They are usable only in the period between entering and leaving the function or block. Once the variable goes out of scope (either by returning from the function or by leaving the block), its storage is automatically deallocated. Any further references to the same variable from pointers are invalid and lead to undefined behaviour.</p> <p>In typical implementations, automatic variables are located at certain offsets in the stack frame of a function or in registers.</p> <h3 id="external-and-internal-linkage"><a href="#external-and-internal-linkage" class="header-anchor">#</a> External and Internal Linkage</h3> <p>Linkage is only relevant to objects (functions and variables) declared at file scope and affects their visibility across different translation units. Objects with external linkage are visible in every other translation unit (provided that the appropriate declaration is included). Objects with internal linkage are not exposed to other translation units and can only be used in the translation unit where they are defined.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/c/storage-classes.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/c/typedef.html" class="prev">
        Typedef
      </a></span> <span class="next"><a href="/c/declarations.html">
        Declarations
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/594.852cdd33.js" defer></script>
  </body>
</html>
