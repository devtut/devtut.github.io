<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C - Strings</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Tokenisation: strtok(), strtok_r() and strtok_s(), String literals, Calculate the Length: strlen(), Basic introduction to strings, Copying strings, Iterating Over the Characters in a String, Creating Arrays of Strings, Convert Strings to Number: atoi(), atof() (dangerous, don't use them), string formatted data read/write, Copy and Concatenation: strcpy(), strcat(), Comparsion: strcmp(), strncmp(), strcasecmp(), strncasecmp(), Find first/last occurrence of a specific character: strchr(), strrchr(), strspn and strcspn, Safely convert Strings to Number: strtoX functions, strstr, Zeroing out a string">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="C - Strings">
    <meta property="og:description" content="Tokenisation: strtok(), strtok_r() and strtok_s(), String literals, Calculate the Length: strlen(), Basic introduction to strings, Copying strings, Iterating Over the Characters in a String, Creating Arrays of Strings, Convert Strings to Number: atoi(), atof() (dangerous, don't use them), string formatted data read/write, Copy and Concatenation: strcpy(), strcat(), Comparsion: strcmp(), strncmp(), strcasecmp(), strncasecmp(), Find first/last occurrence of a specific character: strchr(), strrchr(), strspn and strcspn, Safely convert Strings to Number: strtoX functions, strstr, Zeroing out a string">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/c/strings.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="C - Strings">
    <meta name="twitter:description" content="Tokenisation: strtok(), strtok_r() and strtok_s(), String literals, Calculate the Length: strlen(), Basic introduction to strings, Copying strings, Iterating Over the Characters in a String, Creating Arrays of Strings, Convert Strings to Number: atoi(), atof() (dangerous, don't use them), string formatted data read/write, Copy and Concatenation: strcpy(), strcat(), Comparsion: strcmp(), strncmp(), strcasecmp(), strncasecmp(), Find first/last occurrence of a specific character: strchr(), strrchr(), strspn and strcspn, Safely convert Strings to Number: strtoX functions, strstr, Zeroing out a string">
    <meta name="twitter:url" content="/c/strings.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/597.7c463eb3.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>C</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/c/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/c/getting-started-with-c-language.html" class="sidebar-link">Getting started with C Language</a></li><li><a href="/c/comments.html" class="sidebar-link">Comments</a></li><li><a href="/c/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/c/operators.html" class="sidebar-link">Operators</a></li><li><a href="/c/boolean.html" class="sidebar-link">Boolean</a></li><li><a href="/c/strings.html" aria-current="page" class="active sidebar-link">Strings</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/c/strings.html#tokenisation-strtok-strtok-r-and-strtok-s" class="sidebar-link">Tokenisation: strtok(), strtokr() and strtoks()</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#string-literals" class="sidebar-link">String literals</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#calculate-the-length-strlen" class="sidebar-link">Calculate the Length: strlen()</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#basic-introduction-to-strings" class="sidebar-link">Basic introduction to strings</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#copying-strings" class="sidebar-link">Copying strings</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#iterating-over-the-characters-in-a-string" class="sidebar-link">Iterating Over the Characters in a String</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#creating-arrays-of-strings" class="sidebar-link">Creating Arrays of Strings</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#convert-strings-to-number-atoi-atof-dangerous-don-t-use-them" class="sidebar-link">Convert Strings to Number: atoi(), atof() (dangerous, don't use them)</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#string-formatted-data-read-write" class="sidebar-link">string formatted data read/write</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#copy-and-concatenation-strcpy-strcat" class="sidebar-link">Copy and Concatenation: strcpy(), strcat()</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#comparsion-strcmp-strncmp-strcasecmp-strncasecmp" class="sidebar-link">Comparsion: strcmp(), strncmp(), strcasecmp(), strncasecmp()</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#find-first-last-occurrence-of-a-specific-character-strchr-strrchr" class="sidebar-link">Find first/last occurrence of a specific character: strchr(), strrchr()</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#strspn-and-strcspn" class="sidebar-link">strspn and strcspn</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#safely-convert-strings-to-number-strtox-functions" class="sidebar-link">Safely convert Strings to Number: strtoX functions</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#strstr" class="sidebar-link">strstr</a></li><li class="sidebar-sub-header"><a href="/c/strings.html#zeroing-out-a-string" class="sidebar-link">Zeroing out a string</a></li></ul></li><li><a href="/c/literals-for-numbers-characters-and-strings.html" class="sidebar-link">Literals for numbers, characters and strings</a></li><li><a href="/c/compound-literals.html" class="sidebar-link">Compound Literals</a></li><li><a href="/c/bit-fields.html" class="sidebar-link">Bit-fields</a></li><li><a href="/c/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/c/linked-lists.html" class="sidebar-link">Linked lists</a></li><li><a href="/c/enumerations.html" class="sidebar-link">Enumerations</a></li><li><a href="/c/structs.html" class="sidebar-link">Structs</a></li><li><a href="/c/standard-math.html" class="sidebar-link">Standard Math</a></li><li><a href="/c/iteration-statements-loops-for-while-do-while.html" class="sidebar-link">Iteration Statements/Loops: for, while, do-while</a></li><li><a href="/c/selection-statements.html" class="sidebar-link">Selection Statements</a></li><li><a href="/c/initialization.html" class="sidebar-link">Initialization</a></li><li><a href="/c/declaration-vs-definition.html" class="sidebar-link">Declaration vs Definition</a></li><li><a href="/c/files-and-i-o-streams.html" class="sidebar-link">Files and I/O streams</a></li><li><a href="/c/formatted-input-output.html" class="sidebar-link">Formatted Input/Output</a></li><li><a href="/c/pointers.html" class="sidebar-link">Pointers</a></li><li><a href="/c/sequence-points.html" class="sidebar-link">Sequence points</a></li><li><a href="/c/function-pointers.html" class="sidebar-link">Function Pointers</a></li><li><a href="/c/function-parameters.html" class="sidebar-link">Function Parameters</a></li><li><a href="/c/pass-2d-arrays-to-functions.html" class="sidebar-link">Pass 2D-arrays to functions</a></li><li><a href="/c/error-handling.html" class="sidebar-link">Error handling</a></li><li><a href="/c/undefined-behavior.html" class="sidebar-link">Undefined behavior</a></li><li><a href="/c/random-number-generation.html" class="sidebar-link">Random Number Generation</a></li><li><a href="/c/preprocessor-and-macros.html" class="sidebar-link">Preprocessor and Macros</a></li><li><a href="/c/signal-handling.html" class="sidebar-link">Signal handling</a></li><li><a href="/c/variable-arguments.html" class="sidebar-link">Variable arguments</a></li><li><a href="/c/assertion.html" class="sidebar-link">Assertion</a></li><li><a href="/c/generic-selection.html" class="sidebar-link">Generic selection</a></li><li><a href="/c/x-macros.html" class="sidebar-link">X-macros</a></li><li><a href="/c/aliasing-and-effective-type.html" class="sidebar-link">Aliasing and effective type</a></li><li><a href="/c/compilation.html" class="sidebar-link">Compilation</a></li><li><a href="/c/identifier-scope.html" class="sidebar-link">Identifier Scope</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/implicit-and-explicit-conversions.html" class="sidebar-link">Implicit and Explicit Conversions</a></li><li><a href="/c/type-qualifiers.html" class="sidebar-link">Type Qualifiers</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/typedef.html" class="sidebar-link">Typedef</a></li><li><a href="/c/storage-classes.html" class="sidebar-link">Storage Classes</a></li><li><a href="/c/declarations.html" class="sidebar-link">Declarations</a></li><li><a href="/c/inline-assembly.html" class="sidebar-link">Inline assembly</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/structure-padding-and-packing.html" class="sidebar-link">Structure Padding and Packing</a></li><li><a href="/c/memory-management.html" class="sidebar-link">Memory management</a></li><li><a href="/c/implementation-defined-behaviour.html" class="sidebar-link">Implementation-defined behaviour</a></li><li><a href="/c/atomics.html" class="sidebar-link">Atomics</a></li><li><a href="/c/jump-statements.html" class="sidebar-link">Jump Statements</a></li><li><a href="/c/create-and-include-header-files.html" class="sidebar-link">Create and include header files</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/ctype-h-character-classification-conversion.html" class="sidebar-link">— character classification &amp; conversion</a></li><li><a href="/c/side-effects.html" class="sidebar-link">Side Effects</a></li><li><a href="/c/multi-character-character-sequence.html" class="sidebar-link">Multi-Character Character Sequence</a></li><li><a href="/c/constraints.html" class="sidebar-link">Constraints</a></li><li><a href="/c/inlining.html" class="sidebar-link">Inlining</a></li><li><a href="/c/unions.html" class="sidebar-link">Unions</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/c/interprocess-communication-ipc.html" class="sidebar-link">Interprocess Communication (IPC)</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/common-c-programming-idioms-and-developer-practices.html" class="sidebar-link">Common C programming idioms and developer practices</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="strings"><a href="#strings" class="header-anchor">#</a> Strings</h1> <p>In C, a string is not an intrinsic type. A C-string is the convention to have a one-dimensional array of characters which is terminated by a null-character, by a <code>'\0'</code>.</p> <p>This means that a C-string with a content of <code>&quot;abc&quot;</code> will have four characters <code>'a'</code>, <code>'b'</code>, <code>'c'</code> and <code>'\0'</code>.</p> <p>See the <a href="http://stackoverflow.com/documentation/c/1990/strings/6515/basic-introduction-to-strings#t=201701231128167229368" target="_blank" rel="noopener noreferrer">basic introduction to strings<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> example.</p> <h2 id="tokenisation-strtok-strtok-r-and-strtok-s"><a href="#tokenisation-strtok-strtok-r-and-strtok-s" class="header-anchor">#</a> Tokenisation: strtok(), strtok_r() and strtok_s()</h2> <p>The function <code>strtok</code> breaks a string into a smaller strings, or tokens, using a set of delimiters.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> toknum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> src<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Hello,, world!&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> delimiters<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;, !&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>token <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> delimiters<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>token <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d: [%s]\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">++</span>toknum<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        token <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> delimiters<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* source is now &quot;Hello\0, world\0\0&quot; */</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Output:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>Hello<span class="token punctuation">]</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>world<span class="token punctuation">]</span>

</code></pre></div><p>The string of delimiters may contain one or more delimiters and different delimiter strings may be used with each call to <code>strtok</code>.</p> <p>Calls to <code>strtok</code> to continue tokenizing the same source string should not pass the source string again, but instead pass <code>NULL</code> as the first argument. If the same source string <strong>is</strong> passed then the first token will instead be re-tokenized. That is, given the same delimiters, <code>strtok</code> would simply return the first token again.</p> <p>Note that as <code>strtok</code> does not allocate new memory for the tokens, <strong>it modifies the source string</strong>. That is, in the above example, the string <code>src</code> will be manipulated to produce the tokens that are referenced by the pointer returned by the calls to <code>strtok</code>. This means that the source string cannot be <code>const</code> (so it can't be a string literal). It also means that the identity of the delimiting byte is lost (i.e. in the example the &quot;,&quot; and &quot;!&quot; are effectively deleted from the source string and you cannot tell which delimiter character matched).</p> <p>Note also that multiple consecutive delimiters in the source string are treated as one; in the example, the second comma is ignored.</p> <p><code>strtok</code> is neither thread safe nor re-entrant because it uses a static buffer while parsing.  This means that if a function calls <code>strtok</code>, no function that it calls while it is using <code>strtok</code> can also use <code>strtok</code>, and it cannot be called by any function that is itself using <code>strtok</code>.</p> <p>An example that demonstrates the problems caused by the fact that <code>strtok</code>is not re-entrant is as follows:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> src<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;1.2,3.5,4.2&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> <span class="token operator">*</span>first <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">do</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>part<span class="token punctuation">;</span>
    <span class="token comment">/* Nested calls to strtok do not work as desired */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%s]\n&quot;</span><span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span>
    part <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>part <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; [%s]\n&quot;</span><span class="token punctuation">,</span> part<span class="token punctuation">)</span><span class="token punctuation">;</span>
        part <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>first <span class="token operator">=</span> <span class="token function">strtok</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Output:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token punctuation">[</span><span class="token number">1.2</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>

</code></pre></div><p>The expected operation is that the outer <code>do while</code> loop should create three tokens consisting of each decimal number string (<code>&quot;1.2&quot;</code>, <code>&quot;3.5&quot;</code>, <code>&quot;4.2&quot;</code>), for each of which the <code>strtok</code> calls for the inner loop should split it into separate digit strings (<code>&quot;1&quot;</code>, <code>&quot;2&quot;</code>, <code>&quot;3&quot;</code>, <code>&quot;5&quot;</code>, <code>&quot;4&quot;</code>, <code>&quot;2&quot;</code>).</p> <p>However, because <code>strtok</code> is not re-entrant, this does not occur. Instead the first <code>strtok</code> correctly creates the &quot;1.2\0&quot; token, and the inner loop correctly creates the tokens <code>&quot;1&quot;</code> and <code>&quot;2&quot;</code>. But then the <code>strtok</code> in the outer loop is at the end of the string used by the inner loop, and returns NULL immediately.  The second and third substrings of the <code>src</code> array are not analyzed at all.</p> <p>The standard C libraries do not contain a thread-safe or re-entrant version but some others do, such as POSIX' <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok_r.html" target="_blank" rel="noopener noreferrer"><code>strtok_r</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Note that on MSVC the <code>strtok</code> equivalent, <code>strtok_s</code> is thread-safe.</p> <p>C11 has an optional part, Annex K, that offers a thread-safe and re-entrant version named <code>strtok_s</code>. You can test for the feature with <code>__STDC_LIB_EXT1__</code>. This optional part is not widely supported.</p> <p>The <code>strtok_s</code> function differs from the POSIX <code>strtok_r</code> function by guarding against storing outside of the string being tokenized, and by checking runtime constraints.  On correctly written programs, though, the <code>strtok_s</code> and <code>strtok_r</code> behave the same.</p> <p>Using <code>strtok_s</code> with the example now yields the correct response, like so:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* you have to announce that you want to use Annex K */</span> 
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__STDC_WANT_LIB_EXT1__</span> <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__STDC_LIB_EXT1__</span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">error</span> <span class="token string">&quot;we need strtok_s from Annex K&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token keyword">char</span> src<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;1.2,3.5,4.2&quot;</span><span class="token punctuation">;</span>  
<span class="token keyword">char</span> <span class="token operator">*</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> <span class="token operator">*</span>first <span class="token operator">=</span> <span class="token function">strtok_s</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">do</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>part<span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>posn<span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;[%s]\n&quot;</span><span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span>
    part <span class="token operator">=</span> <span class="token function">strtok_s</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>posn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>part <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; [%s]\n&quot;</span><span class="token punctuation">,</span> part<span class="token punctuation">)</span><span class="token punctuation">;</span>
        part <span class="token operator">=</span> <span class="token function">strtok_s</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>posn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>first <span class="token operator">=</span> <span class="token function">strtok_s</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>And the output will be:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token punctuation">[</span><span class="token number">1.2</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3.5</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">4.2</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="string-literals"><a href="#string-literals" class="header-anchor">#</a> String literals</h2> <p>String literals represent null-terminated, <a href="http://stackoverflow.com/documentation/c/3597/storage-classes/12393/static" target="_blank" rel="noopener noreferrer">static-duration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> arrays of <code>char</code>.  Because they have static storage duration, a string literal or a pointer to the same underlying array can safely be used in several ways that a pointer to an automatic array cannot.  For example, returning a string literal from a function has well-defined behavior:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">get_hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">;</span>  <span class="token comment">/* safe */</span>
<span class="token punctuation">}</span>

</code></pre></div><p>For historical reasons, the elements of the array corresponding to a string literal are not formally <code>const</code>.  Nevertheless, any attempt to modify them has <a href="http://stackoverflow.com/documentation/c/364/undefined-behavior" target="_blank" rel="noopener noreferrer">undefined behavior<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  Typically, a program that attempts to modify the array corresponding to a string literal will crash or otherwise malfunction.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span>foo <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
foo<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">;</span>  <span class="token comment">/* Undefined behavior - BAD! */</span>

</code></pre></div><p>Where a pointer points to a string literal -- or where it sometimes may do -- it is advisable to declare that pointer's referent <code>const</code> to avoid engaging such undefined behavior accidentally.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>foo <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token comment">/* GOOD: can't modify the string pointed to by foo */</span>

</code></pre></div><p>On the other hand, a pointer to or into the underlying array of a string literal is not itself inherently special; its value can freely be modified to point to something else:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span>foo <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
foo <span class="token operator">=</span> <span class="token string">&quot;World!&quot;</span><span class="token punctuation">;</span> <span class="token comment">/* OK - we're just changing what foo points to */</span>

</code></pre></div><p>Furthermore, although initializers for <code>char</code> arrays can have the same form as string literals, use of such an initializer does not confer the characteristics of a string literal on the initialized array.  The initializer simply designates the length and initial contents of the array.  In particular, the elements are modifiable if not explicitly declared <code>const</code>:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> foo<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
foo<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">;</span>  <span class="token comment">/* OK! */</span>

</code></pre></div><h2 id="calculate-the-length-strlen"><a href="#calculate-the-length-strlen" class="header-anchor">#</a> Calculate the Length: strlen()</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token comment">/* Exit if no second argument is found. */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Argument missing.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> EXIT_FAILURE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">size_t</span> len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;The length of the second argument is %zu.\n&quot;</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This program computes the length of its second input argument and stores the result in <code>len</code>. It then prints that length to the terminal. For example, when run with the parameters <code>program_name &quot;Hello, world!&quot;</code>, the program will output <code>The length of the second argument is 13.</code> because the string <code>Hello, world!</code> is 13 characters long.</p> <p><code>strlen</code> counts all the <strong>bytes</strong> from the beginning of the string up to, but not including, the terminating NUL character, <code>'\0'</code>. As such, it can only be used when the string is <strong>guaranteed</strong> to be NUL-terminated.</p> <p>Also keep in mind that if the string contains any Unicode characters, <code>strlen</code> will not tell you how many characters are in the string (since some characters may be multiple bytes long). In such cases, you need to count the characters (<strong>i.e.</strong>, code units) yourself. Consider the output of the following example:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> asciiString<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> utf8String<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Γειά σου Κόσμε!&quot;</span><span class="token punctuation">;</span> <span class="token comment">/* &quot;Hello World!&quot; in Greek */</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;asciiString has %zu bytes in the array\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>asciiString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;utf8String has %zu bytes in the array\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>utf8String<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\&quot;%s\&quot; is %zu bytes\n&quot;</span><span class="token punctuation">,</span> asciiString<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>asciiString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\&quot;%s\&quot; is %zu bytes\n&quot;</span><span class="token punctuation">,</span> utf8String<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>utf8String<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Output:</p> <div class="language-c extra-class"><pre class="language-c"><code>asciiString has <span class="token number">50</span> bytes in the array
utf8String has <span class="token number">50</span> bytes in the array
<span class="token string">&quot;Hello world!&quot;</span> is <span class="token number">12</span> bytes
<span class="token string">&quot;Γειά σου Κόσμε!&quot;</span> is <span class="token number">27</span> bytes

</code></pre></div><h2 id="basic-introduction-to-strings"><a href="#basic-introduction-to-strings" class="header-anchor">#</a> Basic introduction to strings</h2> <p>In C, a <strong>string</strong> is a sequence of characters that is terminated by a null character ('\0').</p> <p>We can create strings using <strong>string literals</strong>, which are sequences of characters surrounded by double quotation marks; for example, take the string literal <code>&quot;hello world&quot;</code>. String literals are automatically null-terminated.</p> <p>We can create strings using several methods. For instance, we can declare a <code>char *</code> and initialize it to point to the first character of a string:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span> string <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p>When initializing a <code>char *</code> to a string constant as above, the string itself is usually allocated in read-only data; <code>string</code> is a pointer to the first element of the array, which is the character <code>'h'</code>.</p> <p>Since the string literal is allocated in read-only memory, it is non-modifiable<sup>1</sup>. Any attempt to modify it will lead to <a href="http://stackoverflow.com/documentation/c/364/undefined-behavior" target="_blank" rel="noopener noreferrer">undefined behaviour<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, so it's better to add <code>const</code> to get a compile-time error like this</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span> string <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p>It has similar effect<sup>2</sup> as</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token keyword">const</span> string_arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p>To create a modifiable string, you can declare a character array and initialize its contents using a string literal, like so:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> modifiable_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p>This is equivalent to the following:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> modifiable_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'\0'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>Since the second version uses brace-enclosed initializer, the string is not automatically null-terminated unless a <code>'\0'</code> character is included explicitly in the character array usually as its last element.</p> <p><sub>1 Non-modifiable implies that the characters in the string literal can't be modified, but remember that the pointer <code>string</code> can be modified (can point somewhere else or can be incremented or decremented).</sub></p> <p><sub>2 Both strings have similar effect in a sense that characters of both strings can't be modified. It should be noted that <code>string</code> is a pointer to <code>char</code> and it is a <a href="https://en.wikipedia.org/wiki/Value_(computer_science)#lrvalue" target="_blank" rel="noopener noreferrer">modifiable l-value<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> so it can be incremented or point to some other location while the array <code>string_arr</code> is a non-modifiable l-value, it can't be modified.</sub></p> <h2 id="copying-strings"><a href="#copying-strings" class="header-anchor">#</a> Copying strings</h2> <h3 id="pointer-assignments-do-not-copy-strings"><a href="#pointer-assignments-do-not-copy-strings" class="header-anchor">#</a> Pointer assignments do not copy strings</h3> <p>You can use the <code>=</code> operator to copy integers, but you cannot use the <code>=</code> operator to copy strings in C.
Strings in C are represented as arrays of characters with a terminating null-character, so using the <code>=</code> operator will only save the address (pointer) of a string.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> b<span class="token punctuation">;</span>
    <span class="token keyword">char</span> c<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>d<span class="token punctuation">;</span>

    b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">/* Integer is copied */</span>
    a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">/* Modifying a leaves b unchanged - b is a 'deep copy' of a */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d %d\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* &quot;20 10&quot; will be printed */</span>

    d <span class="token operator">=</span> c<span class="token punctuation">;</span> 
    <span class="token comment">/* Only copies the address of the string - 
    there is still only one string stored in memory */</span>
    
    c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'x'</span><span class="token punctuation">;</span>
    <span class="token comment">/* Modifies the original string - d[1] = 'x' will do exactly the same thing */</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s %s\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* &quot;axc axc&quot; will be printed */</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The above example compiled because we used <code>char *d</code> rather than <code>char d[3]</code>. Using the latter would cause a compiler error.
You cannot assign to arrays in C.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">/* compile error */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="copying-strings-using-standard-functions"><a href="#copying-strings-using-standard-functions" class="header-anchor">#</a> Copying strings using standard functions</h3> <h3 id="strcpy"><a href="#strcpy" class="header-anchor">#</a> <code>strcpy()</code></h3> <p>To actually copy strings, <a href="http://linux.die.net/man/3/strcpy" target="_blank" rel="noopener noreferrer"><code>strcpy()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> function is available in <code>string.h</code>.
Enough space must be allocated for the destination before copying.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token function">strcpy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* think &quot;b special equals a&quot; */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* &quot;abc&quot; will be printed */</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="snprintf"><a href="#snprintf" class="header-anchor">#</a> <code>snprintf()</code></h3> <p>To avoid buffer overrun, <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/snprintf.html" target="_blank" rel="noopener noreferrer"><code>snprintf()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> may be used. It is not the best solution performance-wise since it has to parse the template string, but it is the only buffer limit-safe function for copying strings readily-available in standard library, that can be used without any extra steps.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;012345678901234567890&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">0</span></span></span>
    <span class="token function">strcpy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* causes buffer overrun (undefined behavior), so do not execute this here! */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

    <span class="token function">snprintf</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* does not cause buffer overrun */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* &quot;0123456&quot; will be printed */</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="strncat"><a href="#strncat" class="header-anchor">#</a> <code>strncat()</code></h3> <p>A second option, with better performance, is to use <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/strncat.html" target="_blank" rel="noopener noreferrer"><code>strncat()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (a buffer overflow checking version of <code>strcat()</code>) - it takes a third argument that tells it the maximum number of bytes to copy:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> dest<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

dest<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
<span class="token function">strncat</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> source<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* copies up to the first (sizeof(dest) - 1) elements of source into dest,
    then puts a \0 on the end of dest */</span>

</code></pre></div><p>Note that this formulation use <code>sizeof(dest) - 1</code>; this is crucial because <code>strncat()</code> always adds a null byte (good), but doesn't count that in the size of the string (a cause of confusion and buffer overwrites).</p> <p>Also note that the alternative — concatenating after a non-empty string — is even more fraught.  Consider:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> dst<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Clownfish: &quot;</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> src<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Marvin and Nemo&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">size_t</span> len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">strncat</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> src<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span> <span class="token operator">-</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%zu: [%s]\n&quot;</span><span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The output is:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token number">23</span><span class="token operator">:</span> <span class="token punctuation">[</span>Clownfish<span class="token operator">:</span> Marvin and N<span class="token punctuation">]</span>

</code></pre></div><p>Note, though, that the size specified as the length was <strong>not</strong> the size of the destination array, but the amount of space left in it, not counting the terminal null byte.  This can cause big overwriting problems.  It is also a bit wasteful; to specify the length argument correctly, you know the length of the data in the destination, so you could instead specify the address of the null byte at the end of the existing content, saving <code>strncat()</code> from rescanning it:</p> <div class="language- extra-class"><pre class="language-text"><code>
   strcpy(dst, &quot;Clownfish: &quot;);
    assert(len &lt; sizeof(dst) - 1);
    strncat(dst + len, src, sizeof(dst) - len - 1);
    printf(&quot;%zu: [%s]\n&quot;, strlen(dst), dst);

</code></pre></div><p>This produces the same output as before, but <code>strncat()</code> doesn't have to scan over the existing content of <code>dst</code> before it starts copying.</p> <h3 id="strncpy"><a href="#strncpy" class="header-anchor">#</a> <code>strncpy()</code></h3> <p>The last option is the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/strncpy.html" target="_blank" rel="noopener noreferrer"><code>strncpy()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> function. Although you might think it should come first, it is a rather deceptive function that has two main gotchas:</p> <ol><li>If copying via <code>strncpy()</code> hits the buffer limit, a terminating null-character won't be written.</li> <li><code>strncpy()</code> always completely fills the destination, with null bytes if necessary.</li></ol> <p>(Such quirky implementation is historical and <a href="https://blogs.msdn.microsoft.com/oldnewthing/20050107-00/?p=36773/" target="_blank" rel="noopener noreferrer">was initially intended for handling UNIX file names<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p> <p>The only correct way to use it is to manually ensure null-termination:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token function">strncpy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* the third parameter is destination buffer size */</span>
b<span class="token punctuation">[</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token operator">*</span>b<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span> <span class="token comment">/* terminate the string */</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* &quot;0123456&quot; will be printed */</span>

</code></pre></div><p>Even then, if you have a big buffer it becomes very inefficient to use <code>strncpy()</code> because of additional null padding.</p> <h2 id="iterating-over-the-characters-in-a-string"><a href="#iterating-over-the-characters-in-a-string" class="header-anchor">#</a> Iterating Over the Characters in a String</h2> <p>If we know the length of the string, we can use a for loop to iterate over its characters:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span> string <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span> <span class="token comment">/* This 11 chars long, excluding the 0-terminator. */</span>
<span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">11</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> string<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* Print each character of the string. */</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Alternatively, we can use the standard function <code>strlen()</code> to get the length of a string if we don't know what the string is:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token class-name">size_t</span> length <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> string<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* Print each character of the string. */</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Finally, we can take advantage of the fact that strings in C are guaranteed to be null-terminated (which we already did when passing it to <code>strlen()</code> in the previous example 😉). We can iterate over the array regardless of its size and stop iterating once we reach a null-character:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>string<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'\0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">/* Stop looping when we reach the null-character. */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> string<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* Print each character of the string. */</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="creating-arrays-of-strings"><a href="#creating-arrays-of-strings" class="header-anchor">#</a> Creating Arrays of Strings</h2> <p>An array of strings can mean a couple of things:</p> <ol><li>An array whose elements are <code>char *</code>s</li> <li>An array whose elements are arrays of <code>char</code>s</li></ol> <p>We can create an array of character pointers like so:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span> string_array<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;baz&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>Remember: when we assign string literals to <code>char *</code>, the strings themselves are allocated in read-only memory. However, the array <code>string_array</code> is allocated in read/write memory. This means that we can modify the pointers in the array, but we cannot modify the strings they point to.</p> <p>In C, the parameter to main <code>argv</code> (the array of command-line arguments passed when the program was run) is an array of <code>char *</code>: <code>char * argv[]</code>.</p> <p>We can also create arrays of character arrays. Since strings are arrays of characters, an array of strings is simply an array whose elements are arrays of characters:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> modifiable_string_array_literals<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;baz&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>This is equivalent to:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> modifiable_string_array<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token string">'f'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'\0'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'\0'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">,</span> <span class="token string">'\0'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>Note that we specify <code>4</code> as the size of the second dimension of the array; each of the strings in our array is actually 4 bytes since we must include the null-terminating character.</p> <h2 id="convert-strings-to-number-atoi-atof-dangerous-don-t-use-them"><a href="#convert-strings-to-number-atoi-atof-dangerous-don-t-use-them" class="header-anchor">#</a> Convert Strings to Number: atoi(), atof() (dangerous, don't use them)</h2> <p>Warning: The functions <code>atoi</code>, <code>atol</code>, <code>atoll</code> and <code>atof</code> are inherently unsafe, because: <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf" target="_blank" rel="noopener noreferrer"><strong>If the value of the result cannot be represented, the behavior is undefined.</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (7.20.1p1)</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> val<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Usage: %s &lt;integer&gt;\n&quot;</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    val <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;String value = %s, Int value = %d\n&quot;</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>When the string to be converted is a valid decimal integer that is in range, the function works:</p> <div class="language-c extra-class"><pre class="language-c"><code>$ <span class="token punctuation">.</span><span class="token operator">/</span>atoi <span class="token number">100</span>
String value <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> Int value <span class="token operator">=</span> <span class="token number">100</span>
$ <span class="token punctuation">.</span><span class="token operator">/</span>atoi <span class="token number">200</span>
String value <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">,</span> Int value <span class="token operator">=</span> <span class="token number">200</span>

</code></pre></div><p>For strings that start with a number, followed by something else, only the initial number is parsed:</p> <div class="language-c extra-class"><pre class="language-c"><code>$ <span class="token punctuation">.</span><span class="token operator">/</span>atoi <span class="token number">0x200</span>
<span class="token number">0</span>
$ <span class="token punctuation">.</span><span class="token operator">/</span>atoi <span class="token number">0123</span>x300
<span class="token number">123</span>

</code></pre></div><p>In all other cases, the behavior is undefined:</p> <div class="language-c extra-class"><pre class="language-c"><code>$ <span class="token punctuation">.</span><span class="token operator">/</span>atoi hello
Formatting the hard disk<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre></div><p>Because of the ambiguities above and this undefined behavior, the <code>atoi</code> family of functions should never be used.</p> <ul><li><p>To convert to <code>long int</code>, use <code>strtol()</code> instead of <code>atol()</code>.</p></li> <li><p>To convert to <code>double</code>, use <code>strtod()</code> instead of <code>atof()</code>.</p></li> <li><p>To convert to <code>long long int</code>, use <code>strtoll()</code> instead of <code>atoll()</code>.</p></li></ul> <h2 id="string-formatted-data-read-write"><a href="#string-formatted-data-read-write" class="header-anchor">#</a> string formatted data read/write</h2> <p>Write formatted data to string</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">sprintf</span> <span class="token punctuation">(</span> <span class="token keyword">char</span> <span class="token operator">*</span> str<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> format<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>use <code>sprintf</code> function to write float data to string.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">char</span> buffer <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">double</span> PI <span class="token operator">=</span> <span class="token number">3.1415926</span><span class="token punctuation">;</span>
  <span class="token function">sprintf</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token string">&quot;PI = %.7f&quot;</span><span class="token punctuation">,</span> PI<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span> <span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Read formatted data from string</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">sscanf</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> s<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> format<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>use <code>sscanf</code>function to parse formatted data.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">char</span> sentence <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;date : 06-06-2012&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">char</span> str <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> year<span class="token punctuation">;</span>
  <span class="token keyword">int</span> month<span class="token punctuation">;</span>
  <span class="token keyword">int</span> day<span class="token punctuation">;</span>
  <span class="token function">sscanf</span> <span class="token punctuation">(</span>sentence<span class="token punctuation">,</span><span class="token string">&quot;%s : %2d-%2d-%4d&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">,</span> <span class="token operator">&amp;</span>day<span class="token punctuation">,</span> <span class="token operator">&amp;</span>month<span class="token punctuation">,</span> <span class="token operator">&amp;</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span> <span class="token punctuation">(</span><span class="token string">&quot;%s -&gt; %02d-%02d-%4d\n&quot;</span><span class="token punctuation">,</span>str<span class="token punctuation">,</span> day<span class="token punctuation">,</span> month<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="copy-and-concatenation-strcpy-strcat"><a href="#copy-and-concatenation-strcpy-strcat" class="header-anchor">#</a> Copy and Concatenation: strcpy(), strcat()</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">/* Always ensure that your string is large enough to contain the characters
   * and a terminating NUL character ('\0')!
   */</span>
  <span class="token keyword">char</span> mystring<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">/* Copy &quot;foo&quot; into `mystring`, until a NUL character is encountered. */</span>
  <span class="token function">strcpy</span><span class="token punctuation">(</span>mystring<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> mystring<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* At this point, we used 4 chars of `mystring`, the 3 characters of &quot;foo&quot;,
   * and the NUL terminating byte.
   */</span>

  <span class="token comment">/* Append &quot;bar&quot; to `mystring`. */</span>
  <span class="token function">strcat</span><span class="token punctuation">(</span>mystring<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> mystring<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* We now use 7 characters of `mystring`: &quot;foo&quot; requires 3, &quot;bar&quot; requires 3
   * and there is a terminating NUL character ('\0') at the end.
   */</span>

  <span class="token comment">/* Copy &quot;bar&quot; into `mystring`, overwriting the former contents. */</span>
  <span class="token function">strcpy</span><span class="token punctuation">(</span>mystring<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> mystring<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Outputs:</p> <div class="language-c extra-class"><pre class="language-c"><code>foo
foobar
bar

</code></pre></div><p><strong>If you append to or from or copy from an existing string, ensure it is NUL-terminated!</strong></p> <p>String literals (e.g. <code>&quot;foo&quot;</code>) will always be NUL-terminated by the compiler.</p> <h2 id="comparsion-strcmp-strncmp-strcasecmp-strncasecmp"><a href="#comparsion-strcmp-strncmp-strcasecmp-strncasecmp" class="header-anchor">#</a> Comparsion: strcmp(), strncmp(), strcasecmp(), strncasecmp()</h2> <p>The <code>strcase*</code>-functions are not Standard C, but a POSIX extension.</p> <p>The <code>strcmp</code> function lexicographically compare two null-terminated character arrays. The functions return a negative value if the first argument appears before the second in lexicographical order, zero if they compare equal, or positive if the first argument appears after the second in lexicographical order.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span>lhs<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span>rhs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// compute comparison once</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s comes before %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s equals %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// last case: result &gt; 0</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s comes after %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;BBB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CCCCC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;AAAAAA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Outputs:</p> <div class="language-c extra-class"><pre class="language-c"><code>BBB equals BBB
BBB comes before CCCCC
BBB comes after AAAAAA

</code></pre></div><p>As <code>strcmp</code>, <code>strcasecmp</code> function also compares lexicographically its arguments after translating each character to its lowercase correspondent:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span>lhs<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span>rhs<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">strcasecmp</span><span class="token punctuation">(</span>lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// compute case-insensitive comparison once</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s comes before %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s equals %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// last case: result &gt; 0</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s comes after %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bBB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ccCCC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aaaaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Outputs:</p> <div class="language-c extra-class"><pre class="language-c"><code>BBB equals bBB
BBB comes before ccCCC
BBB comes after aaaaaa

</code></pre></div><p><code>strncmp</code> and <code>strncasecmp</code> compare at most n characters:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span>lhs<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span>rhs<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">strncmp</span><span class="token punctuation">(</span>lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// compute comparison once</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s comes before %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s equals %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// last case: result &gt; 0</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s comes after %s\n&quot;</span><span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bb&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bb&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;BBB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bb&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Outputs:</p> <div class="language-c extra-class"><pre class="language-c"><code>BBB equals Bb
BBB comes before Bb
BBB comes before Bb

</code></pre></div><h2 id="find-first-last-occurrence-of-a-specific-character-strchr-strrchr"><a href="#find-first-last-occurrence-of-a-specific-character-strchr-strrchr" class="header-anchor">#</a> Find first/last occurrence of a specific character: strchr(), strrchr()</h2> <p>The <code>strchr</code> and <code>strrchr</code> functions find a character in a string, that is in a NUL-terminated character array. <code>strchr</code> return a pointer to the first occurrence and <code>strrchr</code> to the last one.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> toSearchFor <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>

    <span class="token comment">/* Exit if no second argument is found. */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Argument missing.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> EXIT_FAILURE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">{</span>
        <span class="token keyword">char</span> <span class="token operator">*</span>firstOcc <span class="token operator">=</span> <span class="token function">strchr</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> toSearchFor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>firstOcc <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;First position of %c in %s is %td.\n&quot;</span><span class="token punctuation">,</span> 
              toSearchFor<span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> firstOcc<span class="token operator">-</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* A pointer difference's result 
                                     is a signed integer and uses the length modifier 't'. */</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c is not in %s.\n&quot;</span><span class="token punctuation">,</span> toSearchFor<span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">{</span>
        <span class="token keyword">char</span> <span class="token operator">*</span>lastOcc <span class="token operator">=</span> <span class="token function">strrchr</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> toSearchFor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastOcc <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Last position of %c in %s is %td.\n&quot;</span><span class="token punctuation">,</span>
              toSearchFor<span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lastOcc<span class="token operator">-</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Outputs (after having generate an executable named <code>pos</code>):</p> <div class="language-c extra-class"><pre class="language-c"><code>$ <span class="token punctuation">.</span><span class="token operator">/</span>pos AAAAAAA
First position of A in AAAAAAA is <span class="token number">0.</span>
Last position of A in AAAAAAA is <span class="token number">6.</span>
$ <span class="token punctuation">.</span><span class="token operator">/</span>pos BAbbbbbAccccAAAAzzz
First position of A in BAbbbbbAccccAAAAzzz is <span class="token number">1.</span>
Last position of A in BAbbbbbAccccAAAAzzz is <span class="token number">15.</span>
$  <span class="token punctuation">.</span><span class="token operator">/</span>pos qwerty             
A is not in qwerty<span class="token punctuation">.</span>

</code></pre></div><p>One common use for <code>strrchr</code> is to extract a file name from a path. For example to extract <code>myfile.txt</code>  from <code>C:\Users\eak\myfile.txt</code>:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>path<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>pend<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pend <span class="token operator">=</span> <span class="token function">strrchr</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> '\'<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> pend <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="strspn-and-strcspn"><a href="#strspn-and-strcspn" class="header-anchor">#</a> strspn and strcspn</h2> <p>Given a string, <code>strspn</code> calculates the length of the initial substring (span) consisting solely of a specific list of characters. <code>strcspn</code> is similar, except it calculates the length of the initial substring consisting of any characters except those listed:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/*
  Provided a string of &quot;tokens&quot; delimited by &quot;separators&quot;, print the tokens along
  with the token separators that get skipped.
*/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> sepchars<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;,.;!?&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> foo<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;;ball call,.fall gall hall!?.,&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> foo<span class="token punctuation">;</span> <span class="token operator">*</span>s <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">/*empty*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* Get the number of token separator characters. */</span>
        n <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">strspn</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> sepchars<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;skipping separators: &lt;&lt; %.*s &gt;&gt; (length=%d)\n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> s<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/* Actually skip the separators now. */</span>
        s <span class="token operator">+=</span> n<span class="token punctuation">;</span>

        <span class="token comment">/* Get the number of token (non-separator) characters. */</span>
        n <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">strcspn</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> sepchars<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;token found: &lt;&lt; %.*s &gt;&gt; (length=%d)\n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> s<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/* Skip the token now. */</span>
        s <span class="token operator">+=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;== token list exhausted ==\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Analogous functions using wide-character strings are <code>wcsspn</code> and <code>wcscspn</code>; they're used the same way.</p> <h2 id="safely-convert-strings-to-number-strtox-functions"><a href="#safely-convert-strings-to-number-strtox-functions" class="header-anchor">#</a> Safely convert Strings to Number: strtoX functions</h2> <p>Since C99 the C library has a set of safe conversion functions that interpret a string as a number. Their names are of the form <code>strtoX</code>, where <code>X</code> is one of <code>l</code>, <code>ul</code>, <code>d</code>, etc to determine the target type of the conversion</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">double</span> <span class="token function">strtod</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> <span class="token keyword">double</span> <span class="token function">strtold</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>They provide checking that a conversion had an over- or underflow:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">double</span> ret <span class="token operator">=</span> <span class="token function">strtod</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* attempt conversion */</span>

<span class="token comment">/* check the conversion result. */</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ret <span class="token operator">==</span> HUGE_VAL <span class="token operator">||</span> ret <span class="token operator">==</span> <span class="token operator">-</span>HUGE_VAL<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> errno <span class="token operator">==</span> ERANGE<span class="token punctuation">)</span> 
    <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">/* numeric overflow in in string */</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> HUGE_VAL <span class="token operator">&amp;&amp;</span> errno <span class="token operator">==</span> ERANGE<span class="token punctuation">)</span> 
    <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">/* numeric underflow in in string */</span>

<span class="token comment">/* At this point we know that everything went fine so ret may be used */</span>

</code></pre></div><p>If the string in fact contains no number at all, this usage of <code>strtod</code> returns <code>0.0</code>.</p> <p>If this is not satisfactory, the additional parameter <code>endptr</code> can be used. It is a pointer to pointer that will be pointed to the end of the detected number in the string. If it is set to <code>0</code>, as above, or <code>NULL</code>, it is simply ignored.</p> <p>This <code>endptr</code> parameter provides indicates if there has been a successful conversion and if so, where the number ended:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">char</span> <span class="token operator">*</span>check <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> ret <span class="token operator">=</span> <span class="token function">strtod</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>check<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* attempt conversion */</span>

<span class="token comment">/* check the conversion result. */</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> check<span class="token punctuation">)</span> 
    <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">/* No number was detected in string */</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ret <span class="token operator">==</span> HUGE_VAL <span class="token operator">||</span> ret <span class="token operator">==</span> <span class="token operator">-</span>HUGE_VAL<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> errno <span class="token operator">==</span> ERANGE<span class="token punctuation">)</span> 
    <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">/* numeric overflow in in string */</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> HUGE_VAL <span class="token operator">&amp;&amp;</span> errno <span class="token operator">==</span> ERANGE<span class="token punctuation">)</span> 
    <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">/* numeric underflow in in string */</span>

<span class="token comment">/* At this point we know that everything went fine so ret may be used */</span>

</code></pre></div><p>There are analogous functions to convert to the wider integer types:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">long</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">,</span> <span class="token keyword">int</span> nbase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">strtoll</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">,</span> <span class="token keyword">int</span> nbase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token function">strtoul</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">,</span> <span class="token keyword">int</span> nbase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token function">strtoull</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token keyword">const</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">,</span> <span class="token keyword">int</span> nbase<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>These functions have a third parameter <code>nbase</code> that holds the number
base in which the number is written.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">long</span> a <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* a = 5L */</span>
<span class="token keyword">long</span> b <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* b = 65L */</span>
<span class="token keyword">long</span> c <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* c = 101L */</span>
<span class="token keyword">long</span> d <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* d = 257L */</span>
<span class="token keyword">long</span> e <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token string">&quot;101&quot;</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* e = 101L */</span>
<span class="token keyword">long</span> f <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token string">&quot;0101&quot;</span><span class="token punctuation">,</span>  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* f = 65L */</span>
<span class="token keyword">long</span> g <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span><span class="token string">&quot;0x101&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* g = 257L */</span>

</code></pre></div><p>The special value <code>0</code> for <code>nbase</code> means the string is interpreted in the same way as number literals are interpreted in a C program: a prefix of <code>0x</code> corresponds to a hexadecimal representation, otherwise a leading <code>0</code> is octal and all other numbers are seen as decimal.</p> <p>Thus the most practical way to interpret a command-line argument as a number would be</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> EXIT_FAILURE<span class="token punctuation">;</span> <span class="token comment">/* No number given. */</span>

    <span class="token comment">/* use strtoull because size_t may be wide */</span>
    <span class="token class-name">size_t</span> mySize <span class="token operator">=</span> <span class="token function">strtoull</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* then check conversion results. */</span>

     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This means that the program can be called with a parameter in octal, decimal or hexadecimal.</p> <h2 id="strstr"><a href="#strstr" class="header-anchor">#</a> strstr</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* finds the next instance of needle in haystack 
   zbpos: the zero-based position to begin searching from
   haystack: the string to search in
   needle: the string that must be found
   returns the next match of `needle` in `haystack`, or -1 if not found
*/</span>
<span class="token keyword">int</span> <span class="token function">findnext</span><span class="token punctuation">(</span><span class="token keyword">int</span> zbpos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>haystack<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>needle<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">;</span> 

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>haystack <span class="token operator">+</span> zbpos<span class="token punctuation">,</span> needle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> p <span class="token operator">-</span> haystack<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>strstr</code> searches the <code>haystack</code> (first) argument for the string pointed to by <code>needle</code>. If found, <code>strstr</code> returns the address of the occurrence. If it could not find <code>needle</code>, it returns NULL. We use <code>zbpos</code> so that we don't keep finding the same needle over and over again. In order to skip the first instance, we add an offset of <code>zbpos</code>. A Notepad clone might call <code>findnext</code> like this, in order to implement its &quot;Find Next&quot; dialogue:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/*
    Called when the user clicks &quot;Find Next&quot;
    doc: The text of the document to search
    findwhat: The string to find
*/</span>
<span class="token keyword">void</span> <span class="token function">onfindnext</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>doc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>findwhat<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token function">findnext</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> findwhat<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token comment">/* select the text starting from i and ending at i + strlen(findwhat) */</span>
    <span class="token keyword">else</span>
        <span class="token comment">/* display a message box saying &quot;end of search&quot; */</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="zeroing-out-a-string"><a href="#zeroing-out-a-string" class="header-anchor">#</a> Zeroing out a string</h2> <p>You can call <code>memset</code> to zero out a string (or any other memory block).</p> <p>Where <code>str</code> is the string to zero out, and <code>n</code> is the number of bytes in the string.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span> <span class="token comment">/* For EXIT_SUCCESS */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;fortytwo&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">size_t</span> n <span class="token operator">=</span> <span class="token keyword">sizeof</span> str<span class="token punctuation">;</span> <span class="token comment">/* Take the size not the length. */</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;'%s'\n&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">memset</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'\0'</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;'%s'\n&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Prints:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token string">'fortytwo'</span>
<span class="token string">''</span>

</code></pre></div><p>Another example:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span> <span class="token comment">/* For EXIT_SUCCESS */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>


<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FORTY_STR</span> <span class="token string">&quot;forty&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">TWO_STR</span> <span class="token string">&quot;two&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span> <span class="token operator">=</span> FORTY_STR TWO_STR<span class="token punctuation">;</span>
  <span class="token class-name">size_t</span> n <span class="token operator">=</span> <span class="token keyword">sizeof</span> str<span class="token punctuation">;</span> <span class="token comment">/* Take the size not the length. */</span>
  <span class="token keyword">char</span> <span class="token operator">*</span> point_to_two <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> TWO_STR<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;'%s'\n&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">memset</span><span class="token punctuation">(</span>point_to_two<span class="token punctuation">,</span> <span class="token string">'\0'</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;'%s'\n&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">memset</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'\0'</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;'%s'\n&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Prints:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token string">'fortytwo'</span>
<span class="token string">'forty'</span>
<span class="token string">''</span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>char str1[] = &quot;Hello, world!&quot;; /* Modifiable */</li> <li>char str2[14] = &quot;Hello, world!&quot;; /* Modifiable */</li> <li>char* str3 = &quot;Hello, world!&quot;; /* Non-modifiable*/</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/c/strings.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/c/boolean.html" class="prev">
        Boolean
      </a></span> <span class="next"><a href="/c/literals-for-numbers-characters-and-strings.html">
        Literals for numbers, characters and strings
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/597.7c463eb3.js" defer></script>
  </body>
</html>
