<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C - Preprocessor and Macros</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="#if 0 to block out code sections, Header Include Guards, Function-like macros, Source file inclusion, Conditional inclusion and conditional function signature modification, Token pasting, Predefined Macros, __cplusplus for using C externals in C++ code compiled with C++ - name mangling, Variadic arguments macro, Macro Replacement, Error directive, FOREACH implementation">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="C - Preprocessor and Macros">
    <meta property="og:description" content="#if 0 to block out code sections, Header Include Guards, Function-like macros, Source file inclusion, Conditional inclusion and conditional function signature modification, Token pasting, Predefined Macros, __cplusplus for using C externals in C++ code compiled with C++ - name mangling, Variadic arguments macro, Macro Replacement, Error directive, FOREACH implementation">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/c/preprocessor-and-macros.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="C - Preprocessor and Macros">
    <meta name="twitter:description" content="#if 0 to block out code sections, Header Include Guards, Function-like macros, Source file inclusion, Conditional inclusion and conditional function signature modification, Token pasting, Predefined Macros, __cplusplus for using C externals in C++ code compiled with C++ - name mangling, Variadic arguments macro, Macro Replacement, Error directive, FOREACH implementation">
    <meta name="twitter:url" content="/c/preprocessor-and-macros.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/589.fd49329b.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>C</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/c/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/c/getting-started-with-c-language.html" class="sidebar-link">Getting started with C Language</a></li><li><a href="/c/comments.html" class="sidebar-link">Comments</a></li><li><a href="/c/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/c/operators.html" class="sidebar-link">Operators</a></li><li><a href="/c/boolean.html" class="sidebar-link">Boolean</a></li><li><a href="/c/strings.html" class="sidebar-link">Strings</a></li><li><a href="/c/literals-for-numbers-characters-and-strings.html" class="sidebar-link">Literals for numbers, characters and strings</a></li><li><a href="/c/compound-literals.html" class="sidebar-link">Compound Literals</a></li><li><a href="/c/bit-fields.html" class="sidebar-link">Bit-fields</a></li><li><a href="/c/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/c/linked-lists.html" class="sidebar-link">Linked lists</a></li><li><a href="/c/enumerations.html" class="sidebar-link">Enumerations</a></li><li><a href="/c/structs.html" class="sidebar-link">Structs</a></li><li><a href="/c/standard-math.html" class="sidebar-link">Standard Math</a></li><li><a href="/c/iteration-statements-loops-for-while-do-while.html" class="sidebar-link">Iteration Statements/Loops: for, while, do-while</a></li><li><a href="/c/selection-statements.html" class="sidebar-link">Selection Statements</a></li><li><a href="/c/initialization.html" class="sidebar-link">Initialization</a></li><li><a href="/c/declaration-vs-definition.html" class="sidebar-link">Declaration vs Definition</a></li><li><a href="/c/files-and-i-o-streams.html" class="sidebar-link">Files and I/O streams</a></li><li><a href="/c/formatted-input-output.html" class="sidebar-link">Formatted Input/Output</a></li><li><a href="/c/pointers.html" class="sidebar-link">Pointers</a></li><li><a href="/c/sequence-points.html" class="sidebar-link">Sequence points</a></li><li><a href="/c/function-pointers.html" class="sidebar-link">Function Pointers</a></li><li><a href="/c/function-parameters.html" class="sidebar-link">Function Parameters</a></li><li><a href="/c/pass-2d-arrays-to-functions.html" class="sidebar-link">Pass 2D-arrays to functions</a></li><li><a href="/c/error-handling.html" class="sidebar-link">Error handling</a></li><li><a href="/c/undefined-behavior.html" class="sidebar-link">Undefined behavior</a></li><li><a href="/c/random-number-generation.html" class="sidebar-link">Random Number Generation</a></li><li><a href="/c/preprocessor-and-macros.html" aria-current="page" class="active sidebar-link">Preprocessor and Macros</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#if-0-to-block-out-code-sections" class="sidebar-link">#if 0 to block out code sections</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#header-include-guards" class="sidebar-link">Header Include Guards</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#function-like-macros" class="sidebar-link">Function-like macros</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#source-file-inclusion" class="sidebar-link">Source file inclusion</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#conditional-inclusion-and-conditional-function-signature-modification" class="sidebar-link">Conditional inclusion and conditional function signature modification</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#token-pasting" class="sidebar-link">Token pasting</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#predefined-macros" class="sidebar-link">Predefined Macros</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#cplusplus-for-using-c-externals-in-c-code-compiled-with-c-name-mangling" class="sidebar-link">__cplusplus for using C externals in C++ code compiled with C++ - name mangling</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#variadic-arguments-macro" class="sidebar-link">Variadic arguments macro</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#macro-replacement" class="sidebar-link">Macro Replacement</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#error-directive" class="sidebar-link">Error directive</a></li><li class="sidebar-sub-header"><a href="/c/preprocessor-and-macros.html#foreach-implementation" class="sidebar-link">FOREACH implementation</a></li></ul></li><li><a href="/c/signal-handling.html" class="sidebar-link">Signal handling</a></li><li><a href="/c/variable-arguments.html" class="sidebar-link">Variable arguments</a></li><li><a href="/c/assertion.html" class="sidebar-link">Assertion</a></li><li><a href="/c/generic-selection.html" class="sidebar-link">Generic selection</a></li><li><a href="/c/x-macros.html" class="sidebar-link">X-macros</a></li><li><a href="/c/aliasing-and-effective-type.html" class="sidebar-link">Aliasing and effective type</a></li><li><a href="/c/compilation.html" class="sidebar-link">Compilation</a></li><li><a href="/c/identifier-scope.html" class="sidebar-link">Identifier Scope</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/implicit-and-explicit-conversions.html" class="sidebar-link">Implicit and Explicit Conversions</a></li><li><a href="/c/type-qualifiers.html" class="sidebar-link">Type Qualifiers</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/typedef.html" class="sidebar-link">Typedef</a></li><li><a href="/c/storage-classes.html" class="sidebar-link">Storage Classes</a></li><li><a href="/c/declarations.html" class="sidebar-link">Declarations</a></li><li><a href="/c/inline-assembly.html" class="sidebar-link">Inline assembly</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/structure-padding-and-packing.html" class="sidebar-link">Structure Padding and Packing</a></li><li><a href="/c/memory-management.html" class="sidebar-link">Memory management</a></li><li><a href="/c/implementation-defined-behaviour.html" class="sidebar-link">Implementation-defined behaviour</a></li><li><a href="/c/atomics.html" class="sidebar-link">Atomics</a></li><li><a href="/c/jump-statements.html" class="sidebar-link">Jump Statements</a></li><li><a href="/c/create-and-include-header-files.html" class="sidebar-link">Create and include header files</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/ctype-h-character-classification-conversion.html" class="sidebar-link">— character classification &amp; conversion</a></li><li><a href="/c/side-effects.html" class="sidebar-link">Side Effects</a></li><li><a href="/c/multi-character-character-sequence.html" class="sidebar-link">Multi-Character Character Sequence</a></li><li><a href="/c/constraints.html" class="sidebar-link">Constraints</a></li><li><a href="/c/inlining.html" class="sidebar-link">Inlining</a></li><li><a href="/c/unions.html" class="sidebar-link">Unions</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/c/interprocess-communication-ipc.html" class="sidebar-link">Interprocess Communication (IPC)</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/common-c-programming-idioms-and-developer-practices.html" class="sidebar-link">Common C programming idioms and developer practices</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="preprocessor-and-macros"><a href="#preprocessor-and-macros" class="header-anchor">#</a> Preprocessor and Macros</h1> <p>All preprocessor commands begins with the hash (pound) symbol <code>#</code>.
A C macro is just a preprocessor command that is defined using the <code>#define</code> preprocessor directive. During the preprocessing stage, the C preprocessor (a part of the C compiler) simply substitutes the body of the macro wherever its name appears.</p> <h2 id="if-0-to-block-out-code-sections"><a href="#if-0-to-block-out-code-sections" class="header-anchor">#</a> #if 0 to block out code sections</h2> <p>If there are sections of code that you are considering removing or want to temporarily disable, you can comment it out with a block comment.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* Block comment around whole function to keep it from getting used.
 * What's even the purpose of this function?
int myUnusedFunction(void)
{
    int i = 5;
    return i;
}
*/</span>

</code></pre></div><p>However, if the source code you have surrounded with a block comment has block style comments in the source, the ending */ of the existing block comments can cause your new block comment to be invalid and cause compilation problems.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* Block comment around whole function to keep it from getting used.
 * What's even the purpose of this function?
int myUnusedFunction(void)
{
    int i = 5;

    /* Return 5 */</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">*</span><span class="token operator">/</span> 

</code></pre></div><p>In the previous example, the last two lines of the function and the last '*/' are seen by the compiler, so it would compile with errors.  A safer method is to use an <code>#if 0</code> directive around the code you want to block out.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token comment">/* #if 0 evaluates to false, so everything between here and the #endif are
 * removed by the preprocessor. */</span>
<span class="token keyword">int</span> <span class="token function">myUnusedFunction</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>A benefit with this is that when you want to go back and find the code, it's much easier to do a search for &quot;#if 0&quot; than searching all your comments.</p> <p>Another very important benefit is that you can nest commenting out code with <code>#if 0</code>. This cannot be done with comments.</p> <p>An alternative to using <code>#if 0</code> is to use a name that will not be <code>#defined</code> but is more descriptive of why the code is being blocked out. For instance if there is a function that seems to be useless dead code you might use <code>#if defined(POSSIBLE_DEAD_CODE)</code> or <code>#if defined(FUTURE_CODE_REL_020201)</code> for code needed once other functionality is in place or something similar. Then when going back through to remove or enable that source, those sections of source are easy to find.</p> <h2 id="header-include-guards"><a href="#header-include-guards" class="header-anchor">#</a> Header Include Guards</h2> <p>Pretty much every header file should follow the <a href="https://en.wikipedia.org/wiki/Include_guard" target="_blank" rel="noopener noreferrer">include guard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> idiom:</p> <p><strong>my-header-file.h</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">MY_HEADER_FILE_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MY_HEADER_FILE_H</span></span>

<span class="token comment">// Code body for header file</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>This ensures that when you <code>#include &quot;my-header-file.h&quot;</code> in multiple places, you don't get duplicate declarations of functions, variables, etc. Imagine the following hierarchy of files:</p> <p><strong>header-1.h</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    …
<span class="token punctuation">}</span> MyStruct<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>header-2.h</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;header-1.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">myFunction2</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>main.c</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;header-1.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;header-2.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This code has a serious problem: the detailed contents of <code>MyStruct</code> is defined twice, which is not allowed. This would result in a compilation error that can be difficult to track down, since one header file includes another. If you instead did it with header guards:</p> <p><strong>header-1.h</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEADER_1_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_1_H</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    …
<span class="token punctuation">}</span> MyStruct<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p><strong>header-2.h</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEADER_2_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_2_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;header-1.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">myFunction2</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p><strong>main.c</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;header-1.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;header-2.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This would then expand to:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEADER_1_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_1_H</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    …
<span class="token punctuation">}</span> MyStruct<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEADER_2_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_2_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEADER_1_H </span><span class="token comment">// Safe, since HEADER_1_H was #define'd before.</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_1_H</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    …
<span class="token punctuation">}</span> MyStruct<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token keyword">int</span> <span class="token function">myFunction2</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

</code></pre></div><p>When the compiler reaches the second inclusion of <strong>header-1.h</strong>, <code>HEADER_1_H</code> was already defined by the previous inclusion. Ergo, it boils down to the following:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_1_H</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    …
<span class="token punctuation">}</span> MyStruct<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_2_H</span></span>

<span class="token keyword">int</span> <span class="token function">myFunction2</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

</code></pre></div><p>And thus there is no compilation error.</p> <p>Note: There are multiple different conventions for naming the header guards. Some people like to name it <code>HEADER_2_H_</code>, some include the project name like <code>MY_PROJECT_HEADER_2_H</code>. The important thing is to ensure that the convention you follow makes it so that each file in your project has a unique header guard.</p> <p>If the structure details were not included in the header, the type declared would be incomplete or an <a href="https://en.wikipedia.org/wiki/Opaque_data_type" target="_blank" rel="noopener noreferrer">opaque type<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  Such types can be useful, hiding implementation details from users of the functions.  For many purposes, the <code>FILE</code> type in the standard C library can be regarded as an opaque type (though it usually isn't opaque so that macro implementations of the standard I/O functions can make use of the internals of the structure).  In that case, the <code>header-1.h</code> could contain:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEADER_1_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_1_H</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">MyStruct</span> MyStruct<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>MyStruct <span class="token operator">*</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>Note that the structure must have a tag name (here <code>MyStruct</code> — that's in the tags namespace, separate from the ordinary identifiers namespace of the typedef name <code>MyStruct</code>), and that the <code>{ … }</code> is omitted.  This says &quot;there is a structure type <code>struct MyStruct</code> and there is an alias for it <code>MyStruct</code>&quot;.</p> <p>In the implementation file, the details of the structure can be defined to make the type complete:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">MyStruct</span> <span class="token punctuation">{</span>
    …
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>If you are using C11, you could repeat the <code>typedef struct MyStruct MyStruct;</code> declaration without causing a compilation error, but earlier versions of C would complain.  Consequently, it is still best to use the include guard idiom, even though in this example, it would be optional if the code was only ever compiled with compilers that supported C11.</p> <p>Many compilers support the <code>#pragma once</code> directive, which has the same results:</p> <p><strong>my-header-file.h</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token comment">// Code for header file</span>

</code></pre></div><p>However, <code>#pragma once</code> is not part of the C standard, so the code is less portable if you use it.</p> <p>A few headers do not use the include guard idiom.  One specific example is the standard <code>&lt;assert.h&gt;</code> header.  It may be included multiple times in a single translation unit, and the effect of doing so depends on whether the macro <code>NDEBUG</code> is defined each time the header is included.  You may occasionally have an analogous requirement; such cases will be few and far between.  Ordinarily, your headers should be protected by the include guard idiom.</p> <h2 id="function-like-macros"><a href="#function-like-macros" class="header-anchor">#</a> Function-like macros</h2> <p>Function-like macros are similar to <code>inline</code> functions, these are useful in some cases, such as temporary debug log:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DEBUG</span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">LOGFILENAME</span> <span class="token string">&quot;/tmp/logfile.log&quot;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name function">LOG</span><span class="token expression"><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token punctuation">{</span>                            </span><span class="token punctuation">\</span>
  <span class="token expression">FILE <span class="token operator">*</span>fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span>LOGFILENAME<span class="token punctuation">,</span> </span><span class="token string">&quot;a&quot;</span><span class="token expression"><span class="token punctuation">)</span><span class="token punctuation">;</span>            </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token punctuation">)</span> <span class="token punctuation">{</span>                                       </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">fprintf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span> </span><span class="token string">&quot;%s:%d %s\n&quot;</span><span class="token expression"><span class="token punctuation">,</span> <span class="token constant">__FILE__</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span><span class="token punctuation">,</span> </span><span class="token punctuation">\</span>
                 <span class="token comment">/* don't print null pointer */</span>   <span class="token punctuation">\</span>
                 <span class="token expression">str <span class="token operator">?</span>str <span class="token operator">:</span></span><span class="token string">&quot;&lt;null&gt;&quot;</span><span class="token expression"><span class="token punctuation">)</span><span class="token punctuation">;</span>             </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>                                   </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token punctuation">}</span>                                               </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token keyword">else</span> <span class="token punctuation">{</span>                                          </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">perror</span><span class="token punctuation">(</span></span><span class="token string">&quot;Opening '&quot;</span> <span class="token expression">LOGFILENAME </span><span class="token string">&quot;' failed&quot;</span><span class="token expression"><span class="token punctuation">)</span><span class="token punctuation">;</span>   </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token punctuation">}</span>                                               </span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
  <span class="token comment">/* Make it a NOOP if DEBUG is not defined. */</span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name function">LOG</span><span class="token expression"><span class="token punctuation">(</span>LINE<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>


<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">LOG</span><span class="token punctuation">(</span><span class="token string">&quot;There are command line arguments&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token function">LOG</span><span class="token punctuation">(</span><span class="token string">&quot;No command line arguments&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Here in both cases (with <code>DEBUG</code> or not) the call behaves the same way
as a function with <code>void</code> return type. This ensures that the <code>if/else</code> conditionals are interpreted as expected.</p> <p>In the <code>DEBUG</code> case this is implemented through a <code>do { ... } while(0)</code> construct. In the other case, <code>(void)0</code> is a statement with no side effect that is just ignored.</p> <p>An alternative for the latter would be</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LOG</span><span class="token expression"><span class="token punctuation">(</span>LINE<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token punctuation">{</span> </span><span class="token comment">/* empty */</span> <span class="token expression"><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>

</code></pre></div><p>such that it is in all cases syntactically equivalent to the first.</p> <p>If you use GCC, you can also implement a function-like macro that returns result using a non-standard GNU extension — <a href="https://gcc.gnu.org/onlinedocs/gcc-7.1.0/gcc/Statement-Exprs.html#Statement-Exprs" target="_blank" rel="noopener noreferrer">statement expressions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  For example:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">POW</span><span class="token expression"><span class="token punctuation">(</span>X<span class="token punctuation">,</span> Y<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">{</span> </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">int</span> i<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Y<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>
                <span class="token expression">r <span class="token operator">*=</span> X<span class="token punctuation">;</span> </span><span class="token punctuation">\</span>
        <span class="token expression">r<span class="token punctuation">;</span> \ </span><span class="token comment">// returned value is result of last operation</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token keyword">int</span> result<span class="token punctuation">;</span>

        result <span class="token operator">=</span> <span class="token function">POW</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Result: %d\n&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="source-file-inclusion"><a href="#source-file-inclusion" class="header-anchor">#</a> Source file inclusion</h2> <p>The most common uses of <code>#include</code> preprocessing directives are as in the following:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;myheader.h&quot;</span></span>

</code></pre></div><p><code>#include</code> replaces the statement with the contents of the file referred to. Angle brackets (&lt;&gt;) refer to header files installed on the system, while quotation marks (&quot;&quot;) are for user-supplied files.</p> <p>Macros themselves can expand other macros once, as this example illustrates:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">VERSION <span class="token operator">==</span> <span class="token number">1</span></span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">INCFILE</span>  <span class="token string">&quot;vers1.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">VERSION <span class="token operator">==</span> <span class="token number">2</span></span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">INCFILE</span>  <span class="token string">&quot;vers2.h&quot;</span></span>
    <span class="token comment">/*  and so on */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">INCFILE</span>  <span class="token string">&quot;versN.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token comment">/* ... */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token expression">INCFILE</span></span>

</code></pre></div><h2 id="conditional-inclusion-and-conditional-function-signature-modification"><a href="#conditional-inclusion-and-conditional-function-signature-modification" class="header-anchor">#</a> Conditional inclusion and conditional function signature modification</h2> <p>To conditionally include a block of code, the preprocessor has several directives (e.g <code>#if</code>, <code>#ifdef</code>, <code>#else</code>, <code>#endif</code>, etc).</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* Defines a conditional `printf` macro, which only prints if `DEBUG`
 * has been defined
 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DEBUG</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">DLOG</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">printf</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">DLOG</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>Normal C relational operators may be used for the <code>#if</code> condition</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">__STDC_VERSION__ <span class="token operator">&gt;=</span> <span class="token number">201112L</span></span></span>
<span class="token comment">/* Do stuff for C11 or higher */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">__STDC_VERSION__ <span class="token operator">&gt;=</span> <span class="token number">199901L</span></span></span>
<span class="token comment">/* Do stuff for C99 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token comment">/* Do stuff for pre C99 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>The <code>#if</code> directives behaves similar to the C <code>if</code> statement, it shall only contain integral constant expressions, and no casts. It supports one additional unary operator, <code>defined( identifier )</code>, which returns <code>1</code> if the identifier is defined, and <code>0</code> otherwise.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>DEBUG<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">defined</span><span class="token punctuation">(</span>QUIET<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">DLOG</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">printf</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">DLOG</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p><strong>Conditional Function Signature Modification</strong></p> <p>In most cases a release build of an application is expected to have as little overhead as possible. However during testing of an interim build, additional logs and information about problems found can be helpful.</p> <p>For example assume there is some function <code>SHORT SerOpPluAllRead(PLUIF *pPif, USHORT usLockHnd)</code> which when doing a test build it is desired will generate a log about its use. However this function is used in multiple places and it is desired that when generating the log, part of the information is to know where is the function being called from.</p> <p>So using conditional compilation you can have something like the following in the include file declaring the function. This replaces the standard version of the function with a debug version of the function. The preprocessor is used to replace calls to the function <code>SerOpPluAllRead()</code> with calls to the function <code>SerOpPluAllRead_Debug()</code> with two additional arguments, the name of the file and the line number of where the function is used.</p> <p>Conditional compilation is used to choose whether to override the standard function with a debug version or not.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token comment">// function declaration and prototype for our debug version of the function.</span>
SHORT   <span class="token function">SerOpPluAllRead_Debug</span><span class="token punctuation">(</span>PLUIF <span class="token operator">*</span>pPif<span class="token punctuation">,</span> USHORT usLockHnd<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>aszFilePath<span class="token punctuation">,</span> <span class="token keyword">int</span> nLineNo<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// macro definition to replace function call using old name with debug function with additional arguments.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SerOpPluAllRead</span><span class="token expression"><span class="token punctuation">(</span>pPif<span class="token punctuation">,</span>usLock<span class="token punctuation">)</span> <span class="token function">SerOpPluAllRead_Debug</span><span class="token punctuation">(</span>pPif<span class="token punctuation">,</span>usLock<span class="token punctuation">,</span><span class="token constant">__FILE__</span><span class="token punctuation">,</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token comment">// standard function declaration that is normally used with builds.</span>
SHORT   <span class="token function">SerOpPluAllRead</span><span class="token punctuation">(</span>PLUIF <span class="token operator">*</span>pPif<span class="token punctuation">,</span> USHORT usLockHnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>This allows you to override the standard version of the function <code>SerOpPluAllRead()</code> with a version that will provide the name of the file and line number in the file of where the function is called.</p> <p><strong>There is one important consideration:</strong> <strong>any file using this function must include the header file where this approach is used in order for the preprocessor to modify the function. Otherwise you will see a linker error.</strong></p> <p>The definition of the function would look something like the following. What this source does is to request that the preprocessor rename the function <code>SerOpPluAllRead()</code> to be <code>SerOpPluAllRead_Debug()</code> and to modify the argument list to include two additional arguments, a pointer to the name of the file where the function was called and the line number in the file at which the function is used.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>SerOpPluAllRead<span class="token punctuation">)</span></span></span>
<span class="token comment">// forward declare the replacement function which we will call once we create our log.</span>
SHORT    <span class="token function">SerOpPluAllRead_Special</span><span class="token punctuation">(</span>PLUIF <span class="token operator">*</span>pPif<span class="token punctuation">,</span> USHORT usLockHnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

SHORT    <span class="token function">SerOpPluAllRead_Debug</span><span class="token punctuation">(</span>PLUIF <span class="token operator">*</span>pPif<span class="token punctuation">,</span> USHORT usLockHnd<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>aszFilePath<span class="token punctuation">,</span> <span class="token keyword">int</span> nLineNo<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> iLen <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span>  xBuffer<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// only print the last 30 characters of the file name to shorten the logs.</span>
    iLen <span class="token operator">=</span> <span class="token function">strlen</span> <span class="token punctuation">(</span>aszFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>iLen <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        iLen <span class="token operator">=</span> iLen <span class="token operator">-</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        iLen <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">sprintf</span> <span class="token punctuation">(</span>xBuffer<span class="token punctuation">,</span> <span class="token string">&quot;SerOpPluAllRead_Debug(): husHandle = %d, File %s, lineno = %d&quot;</span><span class="token punctuation">,</span> pPif<span class="token operator">-&gt;</span>husHandle<span class="token punctuation">,</span> aszFilePath <span class="token operator">+</span> iLen<span class="token punctuation">,</span> nLineNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">IssueDebugLog</span><span class="token punctuation">(</span>xBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// now that we have issued the log, continue with standard processing.</span>
    <span class="token keyword">return</span> <span class="token function">SerOpPluAllRead_Special</span><span class="token punctuation">(</span>pPif<span class="token punctuation">,</span> usLockHnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// our special replacement function name for when we are generating logs.</span>
SHORT    <span class="token function">SerOpPluAllRead_Special</span><span class="token punctuation">(</span>PLUIF <span class="token operator">*</span>pPif<span class="token punctuation">,</span> USHORT usLockHnd<span class="token punctuation">)</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token comment">// standard, normal function name (signature) that is replaced with our debug version.</span>
SHORT   <span class="token function">SerOpPluAllRead</span><span class="token punctuation">(</span>PLUIF <span class="token operator">*</span>pPif<span class="token punctuation">,</span> USHORT usLockHnd<span class="token punctuation">)</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>STUB_SELF <span class="token operator">==</span> <span class="token function">SstReadAsMaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">OpPluAllRead</span><span class="token punctuation">(</span>pPif<span class="token punctuation">,</span> usLockHnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> OP_NOT_MASTER<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="token-pasting"><a href="#token-pasting" class="header-anchor">#</a> Token pasting</h2> <p>Token pasting allows one to glue together two macro arguments. For example, <code>front##back</code> yields <code>frontback</code>. A famous example is Win32's <code>&lt;TCHAR.H&gt;</code> header. In standard C, one can write <code>L&quot;string&quot;</code> to declare a wide character string. However, Windows API allows one to convert between wide character strings and narrow character strings simply by <code>#define</code>ing <code>UNICODE</code>. In order to implement the string literals, <code>TCHAR.H</code> uses this</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">UNICODE</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">TEXT</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> L</span><span class="token punctuation">##</span><span class="token expression">x</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>Whenever a user writes <code>TEXT(&quot;hello, world&quot;)</code>, and UNICODE is defined, the C preprocessor concatenates <code>L</code> and the macro argument. <code>L</code> concatenated with <code>&quot;hello, world&quot;</code> gives <code>L&quot;hello, world&quot;</code>.</p> <h2 id="predefined-macros"><a href="#predefined-macros" class="header-anchor">#</a> Predefined Macros</h2> <p>A predefined macro is a macro that is already understood by the C pre processor without the program needing to define it. Examples include</p> <h3 id="mandatory-pre-defined-macros"><a href="#mandatory-pre-defined-macros" class="header-anchor">#</a> Mandatory Pre-Defined Macros</h3> <ul><li><code>__FILE__</code>, which gives the file name of the current source file (a string literal),</li> <li><code>__LINE__</code> for the current line number (an integer constant),</li> <li><code>__DATE__</code> for the compilation date (a string literal),</li> <li><code>__TIME__</code> for the compilation time (a string literal).</li></ul> <p>There's also a related predefined identifier, <code>__func__</code> (ISO/IEC 9899:2011 §6.4.2.2), which is <strong>not</strong> a macro:</p> <blockquote></blockquote> <p>The identifier `__func__` shall be implicitly declared by the translator as if,
immediately following the opening brace of each function definition, the declaration:</p> <div class="language-c extra-class"><pre class="language-c"><code> <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token constant">__func__</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;function-name&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p>appeared, where <strong>function-name</strong> is the name of the lexically-enclosing function.</p> <p><code>__FILE__</code>, <code>__LINE__</code> and <code>__func__</code> are especially useful for debugging purposes. For example:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;%s: %s: %d: Denominator is 0&quot;</span><span class="token punctuation">,</span> <span class="token constant">__FILE__</span><span class="token punctuation">,</span> <span class="token constant">__func__</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Pre-C99 compilers, may or may not support <code>__func__</code> or may have a macro that acts the same that is named differently.  For example, gcc used <code>__FUNCTION__</code> in C89 mode.</p> <p>The below macros allow to ask for detail on the implementation:</p> <ul><li><code>__STDC_VERSION__</code> The version of the C Standard implemented. This is a constant integer using the format <code>yyyymmL</code> (the value <code>201112L</code> for C11, the value <code>199901L</code> for C99; it wasn't defined for C89/C90)</li> <li><code>__STDC_HOSTED__</code> <code>1</code> if it's a hosted implementation, else <code>0</code>.</li> <li><code>__STDC__</code> If <code>1</code>, the implementation conforms to the C Standard.</li></ul> <h3 id="other-pre-defined-macros-non-mandatory"><a href="#other-pre-defined-macros-non-mandatory" class="header-anchor">#</a> Other Pre-Defined Macros (non mandatory)</h3> <p>ISO/IEC 9899:2011 §6.10.9.2 Environment macros:</p> <blockquote></blockquote> <ul><li><p>`__STDC_ISO_10646__`
An integer constant of the form `yyyymmL` (for example,
199712L). If this symbol is defined, then every character in the Unicode
required set, when stored in an object of type `wchar_t`, has the same
value as the short identifier of that character. The Unicode required set
consists of all the characters that are defined by ISO/IEC 10646, along with
all amendments and technical corrigenda, as of the specified year and
month. If some other encoding is used, the macro shall not be defined and
the actual encoding used is implementation-defined.</p></li> <li><p>`__STDC_MB_MIGHT_NEQ_WC__`
The integer constant 1, intended to indicate that, in
the encoding for `wchar_t`, a member of the basic character set need not
have a code value equal to its value when used as the lone character in an
integer character constant.</p></li> <li><p>`__STDC_UTF_16__`
The integer constant 1, intended to indicate that values of type
`char16_t` are UTF−16 encoded. If some other encoding is used, the
macro shall not be defined and the actual encoding used is implementation-defined.</p></li> <li><p>`__STDC_UTF_32__`
The integer constant 1, intended to indicate that values of type
`char32_t` are UTF−32 encoded. If some other encoding is used, the
macro shall not be defined and the actual encoding used is implementation-defined.</p></li></ul> <p>ISO/IEC 9899:2011 §6.10.8.3 Conditional feature macros</p> <blockquote></blockquote> <ul><li>`__STDC_ANALYZABLE__`
The integer constant 1, intended to indicate conformance to
the specifications in annex L (Analyzability).</li> <li>`__STDC_IEC_559__`
The integer constant 1, intended to indicate conformance to the
specifications in annex F (IEC 60559 floating-point arithmetic).</li> <li>`__STDC_IEC_559_COMPLEX__` The integer constant 1, intended to indicate
adherence to the specifications in annex G (IEC 60559 compatible complex
arithmetic).</li> <li>`__STDC_LIB_EXT1__` The integer constant `201112L`, intended to indicate support
for the extensions defined in annex K (Bounds-checking interfaces).</li> <li>`__STDC_NO_ATOMICS__`
The integer constant 1, intended to indicate that the
implementation does not support atomic types (including the `_Atomic`
type qualifier) and the `<stdatomic.h>` header.</stdatomic.h></li> <li>`__STDC_NO_COMPLEX__`
The integer constant 1, intended to indicate that the
implementation does not support complex types or the `<complex.h>`
header.</complex.h></li> <li>`__STDC_NO_THREADS__` The integer constant 1, intended to indicate that the
implementation does not support the `<threads.h>` header.</threads.h></li> <li>`__STDC_NO_VLA__`
The integer constant 1, intended to indicate that the
implementation does not support variable length arrays or variably
modified types.</li></ul> <h2 id="cplusplus-for-using-c-externals-in-c-code-compiled-with-c-name-mangling"><a href="#cplusplus-for-using-c-externals-in-c-code-compiled-with-c-name-mangling" class="header-anchor">#</a> __cplusplus for using C externals in C++ code compiled with C++ - name mangling</h2> <p>There are times when an include file has to generate different output from the preprocessor depending on whether the compiler is a C compiler or a C++ compiler due to language differences.</p> <p>For example a function or other external is defined in a C source file but is used in a C++ source file. Since C++ uses name mangling (or name decoration) in order to generate unique function names based on function argument types, a C function declaration used in a C++ source file will cause link errors. The C++ compiler will modify the specified external name for the compiler output using the name mangling rules for C++. The result is link errors due to externals not found when the C++ compiler output is linked with the C compiler output.</p> <p>Since C compilers do not do name mangling but C++ compilers do for all external labels (function names or variable names) generated by the C++ compiler, a predefined preprocessor macro, <code>__cplusplus</code>, was introduced to allow for compiler detection.</p> <p>In order to work around this problem of incompatible compiler output for external names between C and C++, the macro <code>__cplusplus</code> is defined in the C++ Preprocessor and is not defined in the C Preprocessor. This macro name can be used with the conditional preprocessor <code>#ifdef</code> directive or <code>#if</code> with the <code>defined()</code> operator to tell whether a source code or include file is being compiled as C++ or C.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__cplusplus</span></span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;C++\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;C\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>Or you could use</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>__cplusplus<span class="token punctuation">)</span></span></span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;C++\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;C\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>In order to specify the correct function name of a function from a C source file compiled with the C compiler that is being used in a C++ source file you could check for the <code>__cplusplus</code> defined constant in order to cause the <code>extern &quot;C&quot; { /* ... */ };</code> to be used to declare C externals when the header file is included in a C++ source file. However when compiled with a C compiler, the <code>extern &quot;C&quot; { */ ... */ };</code> is not used. This conditional compilation is needed because <code>extern &quot;C&quot; { /* ... */ };</code> is valid in C++ but not in C.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__cplusplus</span></span>
<span class="token comment">// if we are being compiled with a C++ compiler then declare the</span>
<span class="token comment">// following functions as C functions to prevent name mangling.</span>
<span class="token keyword">extern</span> <span class="token string">&quot;C&quot;</span> <span class="token punctuation">{</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token comment">// exported C function list.</span>
<span class="token keyword">int</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__cplusplus</span></span>
<span class="token comment">// if this is a C++ compiler, we need to close off the extern declaration.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><h2 id="variadic-arguments-macro"><a href="#variadic-arguments-macro" class="header-anchor">#</a> Variadic arguments macro</h2> <p>Macros with variadic args:</p> <p>Let's say you want to create some print-macro for debugging your code, let's take this macro as an example:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">debug_print</span><span class="token expression"><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">&quot;%s:%d %s&quot;</span><span class="token expression"><span class="token punctuation">,</span> <span class="token constant">__FILE__</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span></span></span>

</code></pre></div><p>Some examples of usage:</p> <p>The function <code>somefunc()</code> returns -1 if failed and 0 if succeeded, and it is called from plenty different places within the code:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> retVal <span class="token operator">=</span> <span class="token function">somefunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>retVal <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">debug_printf</span><span class="token punctuation">(</span><span class="token string">&quot;somefunc() has failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* some other code */</span>

 retVal <span class="token operator">=</span> <span class="token function">somefunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>retVal <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">debug_printf</span><span class="token punctuation">(</span><span class="token string">&quot;somefunc() has failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>What happens if the implementation of <code>somefunc()</code> changes, and it now returns different values matching different possible error types? You still want use the debug macro and print the error value.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token function">debug_printf</span><span class="token punctuation">(</span>retVal<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">/* this would obviously fail */</span>
<span class="token function">debug_printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span>retVal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* this would also fail */</span>

</code></pre></div><p>To solve this problem the <code>__VA_ARGS__</code> macro was introduced. This macro allows multiple parameters X-macro's:</p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>
#define debug_print(msg, ...) printf(msg, __VA_ARGS__) \
                               printf(&quot;\nError occurred in file:line (%s:%d)\n&quot;, __FILE__, __LINE)

</code></pre></div><p>Usage:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> retVal <span class="token operator">=</span> <span class="token function">somefunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">debug_print</span><span class="token punctuation">(</span><span class="token string">&quot;retVal of somefunc() is-&gt; %d&quot;</span><span class="token punctuation">,</span> retVal<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This macro allows you to pass multiple parameters and print them, but now it forbids you from sending any parameters at all.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token function">debug_print</span><span class="token punctuation">(</span><span class="token string">&quot;Hey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This would raise some syntax error as the macro expects at least one more argument and the pre-processor would not ignore the lack of comma in the <code>debug_print()</code> macro.
Also <code>debug_print(&quot;Hey&quot;,);</code> would raise a syntax error as you cant keep the argument passed to macro empty.</p> <p>To solve this, <code>##__VA_ARGS__</code> macro was introduced, this macro states that if no variable arguments exist, the comma is deleted by the pre-processor from code.</p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>
#define debug_print(msg, ...) printf(msg, ##__VA_ARGS__) \
                               printf(&quot;\nError occured in file:line (%s:%d)\n&quot;, __FILE__, __LINE)

</code></pre></div><p>Usage:</p> <div class="language- extra-class"><pre class="language-text"><code>
debug_print(&quot;Ret val of somefunc()?&quot;);
 debug_print(&quot;%d&quot;,somefunc());

</code></pre></div><h2 id="macro-replacement"><a href="#macro-replacement" class="header-anchor">#</a> Macro Replacement</h2> <p>The simplest form of macro replacement is to define a <code>manifest constant</code>, as in</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ARRSIZE</span> <span class="token expression"><span class="token number">100</span></span></span>
<span class="token keyword">int</span> array<span class="token punctuation">[</span>ARRSIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre></div><p>This defines a <strong>function-like</strong> macro that multiplies a variable by <code>10</code> and stores the new value:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">TIMES10</span><span class="token expression"><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token operator">*=</span> <span class="token number">10</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">double</span> b <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">;</span>

<span class="token function">TIMES10</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// good: ((b) *= 10);</span>
<span class="token function">TIMES10</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// good: ((c) *= 10);</span>
<span class="token function">TIMES10</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// bad:  ((5) *= 10);</span>

</code></pre></div><p>The replacement is done before any other interpretation of the program text. In the first call to <code>TIMES10</code> the name <code>A</code> from the definition is replaced by <code>b</code> and the so expanded text is then put in place of the call. Note that this definition of <code>TIMES10</code> is not equivalent to</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">TIMES10</span><span class="token expression"><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span></span></span>

</code></pre></div><p>because this could evaluate the replacement of <code>A</code>, twice, which can have unwanted side effects.</p> <p>The following defines a function-like macro which value is the maximum of its arguments. It has the advantages of working for any compatible types of the arguments and of generating in-line code without the overhead of function calling. It has the disadvantages of evaluating one or the other of its arguments a second time (including side effects) and of generating more code than a function if invoked several times.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">max</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">int</span> maxVal <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">/* 43 */</span>
<span class="token keyword">int</span> maxValExpr <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">11</span> <span class="token operator">+</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">51</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 47 */</span>

<span class="token comment">/* Should not be done, due to expression being evaluated twice */</span>
<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> sideEffect <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">++</span>i<span class="token punctuation">,</span> <span class="token operator">++</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">/* i == 4 */</span>

</code></pre></div><p>Because of this, such macros that evaluate their arguments multiple times are usually avoided in production code. Since C11 there is the <code>_Generic</code> feature that allows to avoid such multiple invocations.</p> <p>The abundant parentheses in the macro expansions (right hand side of the definition) ensure that the arguments and the resulting expression are bound properly and fit well into the context in which the macro is called.</p> <h2 id="error-directive"><a href="#error-directive" class="header-anchor">#</a> Error directive</h2> <p>If the preprocessor encounters an <code>#error</code> directive, compilation is halted and the diagnostic message included is printed.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DEBUG</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DEBUG</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">error</span> <span class="token string">&quot;Debug Builds Not Supported&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Possible output:</p> <div class="language-c extra-class"><pre class="language-c"><code>$ gcc error<span class="token punctuation">.</span>c
error<span class="token punctuation">.</span>c<span class="token operator">:</span> error<span class="token operator">:</span> #error <span class="token string">&quot;Debug Builds Not Supported&quot;</span>

</code></pre></div><h2 id="foreach-implementation"><a href="#foreach-implementation" class="header-anchor">#</a> FOREACH implementation</h2> <p>We can also use macros for making code easier to read and write. For example we can implement macros for implementing the <code>foreach</code> construct  in C for some data structures like singly- and doubly-linked lists, queues, etc.</p> <p>Here is a small example.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">LinkedListNode</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> data<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">LinkedListNode</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">FOREACH_LIST</span><span class="token expression"><span class="token punctuation">(</span>node<span class="token punctuation">,</span> list<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>
     <span class="token expression"><span class="token keyword">for</span> <span class="token punctuation">(</span>node<span class="token operator">=</span>list<span class="token punctuation">;</span> node<span class="token punctuation">;</span> node<span class="token operator">=</span>node<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span></span></span>

<span class="token comment">/* Usage */</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">LinkedListNode</span> <span class="token operator">*</span>list<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>plist <span class="token operator">=</span> <span class="token operator">&amp;</span>list<span class="token punctuation">,</span> <span class="token operator">*</span>node<span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
         <span class="token operator">*</span>plist <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">LinkedListNode</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">(</span><span class="token operator">*</span>plist<span class="token punctuation">)</span><span class="token operator">-&gt;</span>data <span class="token operator">=</span> i<span class="token punctuation">;</span>
         <span class="token punctuation">(</span><span class="token operator">*</span>plist<span class="token punctuation">)</span><span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
         plist          <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>plist<span class="token punctuation">)</span><span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* printing the elements here */</span>
    <span class="token function">FOREACH_LIST</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> node<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>You can make a standard interface for such data-structures and write a generic implementation of <code>FOREACH</code> as:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">CollectionItem_</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> data<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">CollectionItem_</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>
<span class="token punctuation">}</span> CollectionItem<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Collection_</span>
<span class="token punctuation">{</span>
    <span class="token comment">/* interface functions */</span>
    <span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>last<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>next<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">,</span> CollectionItem <span class="token operator">*</span>currItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

    CollectionItem <span class="token operator">*</span>collectionHead<span class="token punctuation">;</span>
    <span class="token comment">/* Other fields */</span>
<span class="token punctuation">}</span> Collection<span class="token punctuation">;</span>

<span class="token comment">/* must implement */</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Collection<span class="token operator">*</span><span class="token punctuation">)</span>coll<span class="token punctuation">)</span><span class="token operator">-&gt;</span>collectionHead<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* must implement */</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* must implement */</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">,</span> CollectionItem <span class="token operator">*</span>curr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> curr<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CollectionItem <span class="token operator">*</span><span class="token function">new_CollectionItem</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CollectionItem <span class="token operator">*</span>item <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>CollectionItem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    item<span class="token operator">-&gt;</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    item<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Add_Collection</span><span class="token punctuation">(</span>Collection <span class="token operator">*</span>coll<span class="token punctuation">,</span> <span class="token keyword">int</span> data<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CollectionItem <span class="token operator">*</span><span class="token operator">*</span>item <span class="token operator">=</span> <span class="token operator">&amp;</span>coll<span class="token operator">-&gt;</span>collectionHead<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">*</span>item<span class="token punctuation">)</span>
        item <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>item<span class="token punctuation">)</span><span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">(</span><span class="token operator">*</span>item<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">new_CollectionItem</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Collection <span class="token operator">*</span><span class="token function">new_Collection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Collection <span class="token operator">*</span>nc <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>Collection<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nc<span class="token operator">-&gt;</span>first <span class="token operator">=</span> first<span class="token punctuation">;</span>
    nc<span class="token operator">-&gt;</span>last  <span class="token operator">=</span> last<span class="token punctuation">;</span>
    nc<span class="token operator">-&gt;</span>next  <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token keyword">return</span> nc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* generic implementation */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">FOREACH</span><span class="token expression"><span class="token punctuation">(</span>node<span class="token punctuation">,</span> collection<span class="token punctuation">)</span>                      </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token keyword">for</span> <span class="token punctuation">(</span>node  <span class="token operator">=</span> <span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">;</span>      </span><span class="token punctuation">\</span>
         <span class="token expression">node <span class="token operator">!=</span> <span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">last</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">;</span>       </span><span class="token punctuation">\</span>
         <span class="token expression">node  <span class="token operator">=</span> <span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">next</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Collection <span class="token operator">*</span>coll <span class="token operator">=</span> <span class="token function">new_Collection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CollectionItem <span class="token operator">*</span>node<span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
         <span class="token function">Add_Collection</span><span class="token punctuation">(</span>coll<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* printing the elements here */</span>
    <span class="token function">FOREACH</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> coll<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> node<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>To use this generic implementation just implement these functions for your data structure.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token number">1.</span>  <span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2.</span>  <span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>last<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">3.</span>  <span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>next<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>coll<span class="token punctuation">,</span> CollectionItem <span class="token operator">*</span>currItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>When a compiler encounters a macro in the code, it performs simple string replacement, no additional operations are performed.   Because of this, changes by the preprocessor do not respect scope of C programs - for example, a macro definition is not limited to being within a block, so is unaffected by a <code>'}'</code> that ends a block statement.</p> <p>The preprocessor is, by design, not turing complete - there are several types of computation that cannot be done by the preprocessor alone.</p> <p>Usually compilers have a command line flag (or configuration setting) that allows us to stop compilation after the preprocessing phase and to inspect the result. On POSIX platforms this flag is <code>-E</code>. So, running gcc with this flag  prints the expanded source to stdout:</p> <div class="language-c extra-class"><pre class="language-c"><code>$ gcc <span class="token operator">-</span>E cprog<span class="token punctuation">.</span>c

</code></pre></div><p>Often the preprocessor is implemented as a separate program, which is invoked by the compiler, common name for that program is <code>cpp</code>.  A number of preprocessors emit supporting information, such as information about line numbers - which is used by subsequent phases of compilation to generate debugging information.   In the case the preprocessor is based on gcc, the -P option suppresses such information.</p> <div class="language-c extra-class"><pre class="language-c"><code>$ cpp <span class="token operator">-</span>P cprog<span class="token punctuation">.</span>c

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/c/preprocessor-and-macros.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/c/random-number-generation.html" class="prev">
        Random Number Generation
      </a></span> <span class="next"><a href="/c/signal-handling.html">
        Signal handling
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/589.fd49329b.js" defer></script>
  </body>
</html>
