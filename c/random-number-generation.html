<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C - Random Number Generation</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Basic Random Number Generation, Permuted Congruential Generator, Restrict generation to a given range, Xorshift Generation">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="C - Random Number Generation">
    <meta property="og:description" content="Basic Random Number Generation, Permuted Congruential Generator, Restrict generation to a given range, Xorshift Generation">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/c/random-number-generation.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="C - Random Number Generation">
    <meta name="twitter:description" content="Basic Random Number Generation, Permuted Congruential Generator, Restrict generation to a given range, Xorshift Generation">
    <meta name="twitter:url" content="/c/random-number-generation.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/590.a3c10927.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>C</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/c/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/c/getting-started-with-c-language.html" class="sidebar-link">Getting started with C Language</a></li><li><a href="/c/comments.html" class="sidebar-link">Comments</a></li><li><a href="/c/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/c/operators.html" class="sidebar-link">Operators</a></li><li><a href="/c/boolean.html" class="sidebar-link">Boolean</a></li><li><a href="/c/strings.html" class="sidebar-link">Strings</a></li><li><a href="/c/literals-for-numbers-characters-and-strings.html" class="sidebar-link">Literals for numbers, characters and strings</a></li><li><a href="/c/compound-literals.html" class="sidebar-link">Compound Literals</a></li><li><a href="/c/bit-fields.html" class="sidebar-link">Bit-fields</a></li><li><a href="/c/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/c/linked-lists.html" class="sidebar-link">Linked lists</a></li><li><a href="/c/enumerations.html" class="sidebar-link">Enumerations</a></li><li><a href="/c/structs.html" class="sidebar-link">Structs</a></li><li><a href="/c/standard-math.html" class="sidebar-link">Standard Math</a></li><li><a href="/c/iteration-statements-loops-for-while-do-while.html" class="sidebar-link">Iteration Statements/Loops: for, while, do-while</a></li><li><a href="/c/selection-statements.html" class="sidebar-link">Selection Statements</a></li><li><a href="/c/initialization.html" class="sidebar-link">Initialization</a></li><li><a href="/c/declaration-vs-definition.html" class="sidebar-link">Declaration vs Definition</a></li><li><a href="/c/files-and-i-o-streams.html" class="sidebar-link">Files and I/O streams</a></li><li><a href="/c/formatted-input-output.html" class="sidebar-link">Formatted Input/Output</a></li><li><a href="/c/pointers.html" class="sidebar-link">Pointers</a></li><li><a href="/c/sequence-points.html" class="sidebar-link">Sequence points</a></li><li><a href="/c/function-pointers.html" class="sidebar-link">Function Pointers</a></li><li><a href="/c/function-parameters.html" class="sidebar-link">Function Parameters</a></li><li><a href="/c/pass-2d-arrays-to-functions.html" class="sidebar-link">Pass 2D-arrays to functions</a></li><li><a href="/c/error-handling.html" class="sidebar-link">Error handling</a></li><li><a href="/c/undefined-behavior.html" class="sidebar-link">Undefined behavior</a></li><li><a href="/c/random-number-generation.html" aria-current="page" class="active sidebar-link">Random Number Generation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/c/random-number-generation.html#basic-random-number-generation" class="sidebar-link">Basic Random Number Generation</a></li><li class="sidebar-sub-header"><a href="/c/random-number-generation.html#permuted-congruential-generator" class="sidebar-link">Permuted Congruential Generator</a></li><li class="sidebar-sub-header"><a href="/c/random-number-generation.html#restrict-generation-to-a-given-range" class="sidebar-link">Restrict generation to a given range</a></li><li class="sidebar-sub-header"><a href="/c/random-number-generation.html#xorshift-generation" class="sidebar-link">Xorshift Generation</a></li></ul></li><li><a href="/c/preprocessor-and-macros.html" class="sidebar-link">Preprocessor and Macros</a></li><li><a href="/c/signal-handling.html" class="sidebar-link">Signal handling</a></li><li><a href="/c/variable-arguments.html" class="sidebar-link">Variable arguments</a></li><li><a href="/c/assertion.html" class="sidebar-link">Assertion</a></li><li><a href="/c/generic-selection.html" class="sidebar-link">Generic selection</a></li><li><a href="/c/x-macros.html" class="sidebar-link">X-macros</a></li><li><a href="/c/aliasing-and-effective-type.html" class="sidebar-link">Aliasing and effective type</a></li><li><a href="/c/compilation.html" class="sidebar-link">Compilation</a></li><li><a href="/c/identifier-scope.html" class="sidebar-link">Identifier Scope</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/implicit-and-explicit-conversions.html" class="sidebar-link">Implicit and Explicit Conversions</a></li><li><a href="/c/type-qualifiers.html" class="sidebar-link">Type Qualifiers</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/typedef.html" class="sidebar-link">Typedef</a></li><li><a href="/c/storage-classes.html" class="sidebar-link">Storage Classes</a></li><li><a href="/c/declarations.html" class="sidebar-link">Declarations</a></li><li><a href="/c/inline-assembly.html" class="sidebar-link">Inline assembly</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/structure-padding-and-packing.html" class="sidebar-link">Structure Padding and Packing</a></li><li><a href="/c/memory-management.html" class="sidebar-link">Memory management</a></li><li><a href="/c/implementation-defined-behaviour.html" class="sidebar-link">Implementation-defined behaviour</a></li><li><a href="/c/atomics.html" class="sidebar-link">Atomics</a></li><li><a href="/c/jump-statements.html" class="sidebar-link">Jump Statements</a></li><li><a href="/c/create-and-include-header-files.html" class="sidebar-link">Create and include header files</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/ctype-h-character-classification-conversion.html" class="sidebar-link">— character classification &amp; conversion</a></li><li><a href="/c/side-effects.html" class="sidebar-link">Side Effects</a></li><li><a href="/c/multi-character-character-sequence.html" class="sidebar-link">Multi-Character Character Sequence</a></li><li><a href="/c/constraints.html" class="sidebar-link">Constraints</a></li><li><a href="/c/inlining.html" class="sidebar-link">Inlining</a></li><li><a href="/c/unions.html" class="sidebar-link">Unions</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/c/interprocess-communication-ipc.html" class="sidebar-link">Interprocess Communication (IPC)</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/common-c-programming-idioms-and-developer-practices.html" class="sidebar-link">Common C programming idioms and developer practices</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="random-number-generation"><a href="#random-number-generation" class="header-anchor">#</a> Random Number Generation</h1> <h2 id="basic-random-number-generation"><a href="#basic-random-number-generation" class="header-anchor">#</a> Basic Random Number Generation</h2> <p>The function <code>rand()</code> can be used to generate a pseudo-random integer value between <code>0</code> and <code>RAND_MAX</code> (<code>0</code> and <code>RAND_MAX</code> included).</p> <p><code>srand(int)</code> is used to seed the pseudo-random number generator. Each time <code>rand()</code> is seeded wih the same seed, it must produce the same sequence of values. It should only be seeded once before calling <code>rand()</code>. It should not be repeatedly seeded, or reseeded every time you wish to generate a new batch of pseudo-random numbers.</p> <p>Standard practice is to use the result of <code>time(NULL)</code> as a seed. If your random number generator requires to have a deterministic sequence, you can seed the generator with the same value on each program start. This is generally not required for release code, but is useful in debug runs to make bugs reproducible.</p> <p>It is advised to always seed the generator, if not seeded, it behaves as if it was seeded with <code>srand(1)</code>.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Random value between [0, %d]: %d\n&quot;</span><span class="token punctuation">,</span> RAND_MAX<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Possible output:</p> <div class="language-c extra-class"><pre class="language-c"><code>Random value between <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2147483647</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">823321433</span>

</code></pre></div><p><strong>Notes:</strong></p> <p>The C Standard does not guarantee the quality of the random sequence produced. In the past, some implementations of <code>rand()</code> had serious issues in distribution and randomness of the generated numbers. <strong>The usage of <code>rand()</code> is not recommended for serious random number generation needs, like cryptography.</strong></p> <h2 id="permuted-congruential-generator"><a href="#permuted-congruential-generator" class="header-anchor">#</a> Permuted Congruential Generator</h2> <p>Here's a standalone random number generator that doesn't rely on <code>rand()</code> or similar library functions.</p> <p>Why would you want such a thing?  Maybe you don't trust your platform's builtin random number generator, or maybe you want a reproducible source of randomness independent of any particular library implementation.</p> <p>This code is PCG32 from <a href="http://www.pcg-random.org" target="_blank" rel="noopener noreferrer">pcg-random.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, a modern, fast, general-purpose RNG with excellent statistical properties.  It's not cryptographically secure, so don't use it for cryptography.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdint.h&gt;</span></span>

<span class="token comment">/* *Really* minimal PCG32 code / (c) 2014 M.E. O'Neill / pcg-random.org
 * Licensed under Apache License 2.0 (NO WARRANTY, etc. see website) */</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span> <span class="token class-name">uint64_t</span> state<span class="token punctuation">;</span>  <span class="token class-name">uint64_t</span> inc<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token class-name">pcg32_random_t</span><span class="token punctuation">;</span>

<span class="token class-name">uint32_t</span> <span class="token function">pcg32_random_r</span><span class="token punctuation">(</span><span class="token class-name">pcg32_random_t</span><span class="token operator">*</span> rng<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">uint64_t</span> oldstate <span class="token operator">=</span> rng<span class="token operator">-&gt;</span>state<span class="token punctuation">;</span>
    <span class="token comment">/* Advance internal state */</span>
    rng<span class="token operator">-&gt;</span>state <span class="token operator">=</span> oldstate <span class="token operator">*</span> <span class="token number">6364136223846793005ULL</span> <span class="token operator">+</span> <span class="token punctuation">(</span>rng<span class="token operator">-&gt;</span>inc <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* Calculate output function (XSH RR), uses old state for max ILP */</span>
    <span class="token class-name">uint32_t</span> xorshifted <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>oldstate <span class="token operator">&gt;&gt;</span> <span class="token number">18u</span><span class="token punctuation">)</span> <span class="token operator">^</span> oldstate<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">27u</span><span class="token punctuation">;</span>
    <span class="token class-name">uint32_t</span> rot <span class="token operator">=</span> oldstate <span class="token operator">&gt;&gt;</span> <span class="token number">59u</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>xorshifted <span class="token operator">&gt;&gt;</span> rot<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>xorshifted <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>rot<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">pcg32_srandom_r</span><span class="token punctuation">(</span><span class="token class-name">pcg32_random_t</span><span class="token operator">*</span> rng<span class="token punctuation">,</span> <span class="token class-name">uint64_t</span> initstate<span class="token punctuation">,</span> <span class="token class-name">uint64_t</span> initseq<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rng<span class="token operator">-&gt;</span>state <span class="token operator">=</span> <span class="token number">0U</span><span class="token punctuation">;</span>
    rng<span class="token operator">-&gt;</span>inc <span class="token operator">=</span> <span class="token punctuation">(</span>initseq <span class="token operator">&lt;&lt;</span> <span class="token number">1u</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">1u</span><span class="token punctuation">;</span>
    <span class="token function">pcg32_random_r</span><span class="token punctuation">(</span>rng<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rng<span class="token operator">-&gt;</span>state <span class="token operator">+=</span> initstate<span class="token punctuation">;</span>
    <span class="token function">pcg32_random_r</span><span class="token punctuation">(</span>rng<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>And here's how to call it:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">pcg32_random_t</span> rng<span class="token punctuation">;</span> <span class="token comment">/* RNG state */</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token comment">/* Seed the RNG */</span>
    <span class="token function">pcg32_srandom_r</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">,</span> <span class="token number">42u</span><span class="token punctuation">,</span> <span class="token number">54u</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* Print some random 32-bit integers */</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x%08x\n&quot;</span><span class="token punctuation">,</span> <span class="token function">pcg32_random_r</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rng<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="restrict-generation-to-a-given-range"><a href="#restrict-generation-to-a-given-range" class="header-anchor">#</a> Restrict generation to a given range</h2> <p>Usually when generating random numbers it is useful to generate integers within a range, or a p value between 0.0 and 1.0. Whilst modulus operation can be used to reduce the seed to a low integer this uses the low bits, which often go through a short cycle, resulting in a slight skewing of distribution if N is large in proportion to RAND_MAX.</p> <p>The macro</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">uniform</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>

</code></pre></div><p>produces a p value on 0.0 to 1.0 - epsilon, so</p> <div class="language-c extra-class"><pre class="language-c"><code>i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">uniform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> N<span class="token punctuation">)</span>

</code></pre></div><p>will set <code>i</code> to a uniform random number within the range 0 to N - 1.</p> <p>Unfortunately there is a technical flaw, in that RAND_MAX is permitted to be larger than a variable of type <code>double</code> can accurately represent. This means that <code>RAND_MAX + 1.0</code> evaluates to RAND_MAX and the function occasionally returns unity. This is unlikely however.</p> <h2 id="xorshift-generation"><a href="#xorshift-generation" class="header-anchor">#</a> Xorshift Generation</h2> <p>A good and easy alternative to the flawed <code>rand()</code> procedures, is <strong>xorshift</strong>, a class of pseudo-random number generators discovered by <a href="https://en.wikipedia.org/wiki/George_Marsaglia" target="_blank" rel="noopener noreferrer">George Marsaglia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The xorshift generator is among the fastest non-cryptographically-secure random number generators. More information and other example implementaions are available on the <a href="https://en.wikipedia.org/wiki/xorshift" target="_blank" rel="noopener noreferrer">xorshift Wikipedia page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Example implementation</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdint.h&gt;</span></span>

<span class="token comment">/* These state variables must be initialised so that they are not all zero. */</span>
<span class="token class-name">uint32_t</span> w<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">;</span>

<span class="token class-name">uint32_t</span> <span class="token function">xorshift128</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token class-name">uint32_t</span> t <span class="token operator">=</span> x<span class="token punctuation">;</span>
    t <span class="token operator">^=</span> t <span class="token operator">&lt;&lt;</span> <span class="token number">11U</span><span class="token punctuation">;</span>
    t <span class="token operator">^=</span> t <span class="token operator">&gt;&gt;</span> <span class="token number">8U</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> y<span class="token punctuation">;</span> y <span class="token operator">=</span> z<span class="token punctuation">;</span> z <span class="token operator">=</span> w<span class="token punctuation">;</span>
    w <span class="token operator">^=</span> w <span class="token operator">&gt;&gt;</span> <span class="token number">19U</span><span class="token punctuation">;</span>
    w <span class="token operator">^=</span> t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> w<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Due to the flaws of <code>rand()</code>, many other default implementations have emerged over the years. Among those are:</p> <ul><li><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/arc4random.3.html" target="_blank" rel="noopener noreferrer"><code>arc4random()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (available on OS X and BSD)</li> <li><a href="http://linux.die.net/man/3/random" target="_blank" rel="noopener noreferrer"><code>random()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (available on Linux)</li> <li><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/drand48.html" target="_blank" rel="noopener noreferrer"><code>drand48()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (available on POSIX)</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/c/random-number-generation.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/c/undefined-behavior.html" class="prev">
        Undefined behavior
      </a></span> <span class="next"><a href="/c/preprocessor-and-macros.html">
        Preprocessor and Macros
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/590.a3c10927.js" defer></script>
  </body>
</html>
