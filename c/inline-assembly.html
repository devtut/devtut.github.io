<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C - Inline assembly</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="gcc Basic asm support, gcc Extended asm support, gcc Inline assembly in macros">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="C - Inline assembly">
    <meta property="og:description" content="gcc Basic asm support, gcc Extended asm support, gcc Inline assembly in macros">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/c/inline-assembly.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="C - Inline assembly">
    <meta name="twitter:description" content="gcc Basic asm support, gcc Extended asm support, gcc Inline assembly in macros">
    <meta name="twitter:url" content="/c/inline-assembly.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/576.63508a8a.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>C</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/c/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/c/getting-started-with-c-language.html" class="sidebar-link">Getting started with C Language</a></li><li><a href="/c/comments.html" class="sidebar-link">Comments</a></li><li><a href="/c/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/c/operators.html" class="sidebar-link">Operators</a></li><li><a href="/c/boolean.html" class="sidebar-link">Boolean</a></li><li><a href="/c/strings.html" class="sidebar-link">Strings</a></li><li><a href="/c/literals-for-numbers-characters-and-strings.html" class="sidebar-link">Literals for numbers, characters and strings</a></li><li><a href="/c/compound-literals.html" class="sidebar-link">Compound Literals</a></li><li><a href="/c/bit-fields.html" class="sidebar-link">Bit-fields</a></li><li><a href="/c/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/c/linked-lists.html" class="sidebar-link">Linked lists</a></li><li><a href="/c/enumerations.html" class="sidebar-link">Enumerations</a></li><li><a href="/c/structs.html" class="sidebar-link">Structs</a></li><li><a href="/c/standard-math.html" class="sidebar-link">Standard Math</a></li><li><a href="/c/iteration-statements-loops-for-while-do-while.html" class="sidebar-link">Iteration Statements/Loops: for, while, do-while</a></li><li><a href="/c/selection-statements.html" class="sidebar-link">Selection Statements</a></li><li><a href="/c/initialization.html" class="sidebar-link">Initialization</a></li><li><a href="/c/declaration-vs-definition.html" class="sidebar-link">Declaration vs Definition</a></li><li><a href="/c/files-and-i-o-streams.html" class="sidebar-link">Files and I/O streams</a></li><li><a href="/c/formatted-input-output.html" class="sidebar-link">Formatted Input/Output</a></li><li><a href="/c/pointers.html" class="sidebar-link">Pointers</a></li><li><a href="/c/sequence-points.html" class="sidebar-link">Sequence points</a></li><li><a href="/c/function-pointers.html" class="sidebar-link">Function Pointers</a></li><li><a href="/c/function-parameters.html" class="sidebar-link">Function Parameters</a></li><li><a href="/c/pass-2d-arrays-to-functions.html" class="sidebar-link">Pass 2D-arrays to functions</a></li><li><a href="/c/error-handling.html" class="sidebar-link">Error handling</a></li><li><a href="/c/undefined-behavior.html" class="sidebar-link">Undefined behavior</a></li><li><a href="/c/random-number-generation.html" class="sidebar-link">Random Number Generation</a></li><li><a href="/c/preprocessor-and-macros.html" class="sidebar-link">Preprocessor and Macros</a></li><li><a href="/c/signal-handling.html" class="sidebar-link">Signal handling</a></li><li><a href="/c/variable-arguments.html" class="sidebar-link">Variable arguments</a></li><li><a href="/c/assertion.html" class="sidebar-link">Assertion</a></li><li><a href="/c/generic-selection.html" class="sidebar-link">Generic selection</a></li><li><a href="/c/x-macros.html" class="sidebar-link">X-macros</a></li><li><a href="/c/aliasing-and-effective-type.html" class="sidebar-link">Aliasing and effective type</a></li><li><a href="/c/compilation.html" class="sidebar-link">Compilation</a></li><li><a href="/c/identifier-scope.html" class="sidebar-link">Identifier Scope</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/implicit-and-explicit-conversions.html" class="sidebar-link">Implicit and Explicit Conversions</a></li><li><a href="/c/type-qualifiers.html" class="sidebar-link">Type Qualifiers</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/typedef.html" class="sidebar-link">Typedef</a></li><li><a href="/c/storage-classes.html" class="sidebar-link">Storage Classes</a></li><li><a href="/c/declarations.html" class="sidebar-link">Declarations</a></li><li><a href="/c/inline-assembly.html" aria-current="page" class="active sidebar-link">Inline assembly</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/c/inline-assembly.html#gcc-basic-asm-support" class="sidebar-link">gcc Basic asm support</a></li><li class="sidebar-sub-header"><a href="/c/inline-assembly.html#gcc-extended-asm-support" class="sidebar-link">gcc Extended asm support</a></li><li class="sidebar-sub-header"><a href="/c/inline-assembly.html#gcc-inline-assembly-in-macros" class="sidebar-link">gcc Inline assembly in macros</a></li></ul></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/structure-padding-and-packing.html" class="sidebar-link">Structure Padding and Packing</a></li><li><a href="/c/memory-management.html" class="sidebar-link">Memory management</a></li><li><a href="/c/implementation-defined-behaviour.html" class="sidebar-link">Implementation-defined behaviour</a></li><li><a href="/c/atomics.html" class="sidebar-link">Atomics</a></li><li><a href="/c/jump-statements.html" class="sidebar-link">Jump Statements</a></li><li><a href="/c/create-and-include-header-files.html" class="sidebar-link">Create and include header files</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/ctype-h-character-classification-conversion.html" class="sidebar-link">— character classification &amp; conversion</a></li><li><a href="/c/side-effects.html" class="sidebar-link">Side Effects</a></li><li><a href="/c/multi-character-character-sequence.html" class="sidebar-link">Multi-Character Character Sequence</a></li><li><a href="/c/constraints.html" class="sidebar-link">Constraints</a></li><li><a href="/c/inlining.html" class="sidebar-link">Inlining</a></li><li><a href="/c/unions.html" class="sidebar-link">Unions</a></li><li><a href="/c/threads-native.html" class="sidebar-link">Threads (native)</a></li><li><a href="/c/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/c/interprocess-communication-ipc.html" class="sidebar-link">Interprocess Communication (IPC)</a></li><li><a href="/c/testing-frameworks.html" class="sidebar-link">Testing frameworks</a></li><li><a href="/c/valgrind.html" class="sidebar-link">Valgrind</a></li><li><a href="/c/common-c-programming-idioms-and-developer-practices.html" class="sidebar-link">Common C programming idioms and developer practices</a></li><li><a href="/c/common-pitfalls.html" class="sidebar-link">Common pitfalls</a></li><li><a href="/c/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="inline-assembly"><a href="#inline-assembly" class="header-anchor">#</a> Inline assembly</h1> <h2 id="gcc-basic-asm-support"><a href="#gcc-basic-asm-support" class="header-anchor">#</a> gcc Basic asm support</h2> <p>Basic assembly support with gcc has the following syntax:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">asm</span> <span class="token punctuation">[</span> <span class="token keyword">volatile</span> <span class="token punctuation">]</span> <span class="token punctuation">(</span> AssemblerInstructions <span class="token punctuation">)</span>

</code></pre></div><p>where <code>AssemblerInstructions</code> is the direct assembly code for the given processor.  The volatile keyword is optional and has no effect as gcc does not optimize code within a basic asm statement.  <code>AssemblerInstructions</code> can contain multiple assembly instructions.  A basic asm statement is used if you have an asm routine that must exist outside of a C function.  The following example is from the GCC manual:</p> <div class="language- extra-class"><pre class="language-text"><code>
/* Note that this code will not compile with -masm=intel */
 #define DebugBreak() asm(&quot;int $3&quot;)

</code></pre></div><p>In this example, you could then use <code>DebugBreak()</code> in other places in your code and it will execute the assembly instruction <code>int $3</code>.  Note that even though gcc will not modify any code in a basic asm statement, the optimizer may still move consecutive asm statements around.  If you have multiple assembly instructions that must occur in a specific order, include them in one asm statement.</p> <h2 id="gcc-extended-asm-support"><a href="#gcc-extended-asm-support" class="header-anchor">#</a> gcc Extended asm support</h2> <p>Extended asm support in gcc has the following syntax:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">asm</span> <span class="token punctuation">[</span><span class="token keyword">volatile</span><span class="token punctuation">]</span> <span class="token punctuation">(</span> AssemblerTemplate
                  <span class="token operator">:</span> OutputOperands
                  <span class="token punctuation">[</span> <span class="token operator">:</span> InputOperands
                  <span class="token punctuation">[</span> <span class="token operator">:</span> Clobbers <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
 
 <span class="token keyword">asm</span> <span class="token punctuation">[</span><span class="token keyword">volatile</span><span class="token punctuation">]</span> <span class="token keyword">goto</span> <span class="token punctuation">(</span> AssemblerTemplate
                       <span class="token operator">:</span>
                       <span class="token operator">:</span> InputOperands
                       <span class="token operator">:</span> Clobbers
                       <span class="token operator">:</span> GotoLabels<span class="token punctuation">)</span>

</code></pre></div><p>where <code>AssemblerTemplate</code> is the template for the assembler instruction, <code>OutputOperands</code> are any C variables that can be modified by the assembly code, <code>InputOperands</code> are any C variables used as input parameters, <code>Clobbers</code> are a list or registers that are modified by the assembly code, and <code>GotoLabels</code> are any goto statement labels that may be used in the assembly code.</p> <p>The extended format is used within C functions and is the more typical usage of inline assembly.  Below is an example from the Linux kernel for byte swapping 16-bit and 32-bit numbers for an ARM processor:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* From arch/arm/include/asm/swab.h in Linux kernel version 4.6.4 */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">__LINUX_ARM_ARCH__ <span class="token operator">&gt;=</span> <span class="token number">6</span></span></span>

<span class="token keyword">static</span> <span class="token keyword">inline</span> __attribute_const__ __u32 <span class="token function">__arch_swahb32</span><span class="token punctuation">(</span>__u32 x<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">__asm__</span> <span class="token punctuation">(</span><span class="token string">&quot;rev16 %0, %1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;=r&quot;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;r&quot;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__arch_swahb32</span> <span class="token expression">__arch_swahb32</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">__arch_swab16</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__u16<span class="token punctuation">)</span><span class="token function">__arch_swahb32</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">static</span> <span class="token keyword">inline</span> __attribute_const__ __u32 <span class="token function">__arch_swab32</span><span class="token punctuation">(</span>__u32 x<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">__asm__</span> <span class="token punctuation">(</span><span class="token string">&quot;rev %0, %1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;=r&quot;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;r&quot;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__arch_swab32</span> <span class="token expression">__arch_swab32</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre></div><p>Each asm section uses the variable <code>x</code> as its input and output parameter.  The C function then returns the manipulated result.</p> <p>With the extended asm format, gcc may optimize the assembly instructions in an asm block following the same rules it uses for optimizing C code.  If you want your asm section to remain untouched, use the <code>volatile</code> keyword for the asm section.</p> <h2 id="gcc-inline-assembly-in-macros"><a href="#gcc-inline-assembly-in-macros" class="header-anchor">#</a> gcc Inline assembly in macros</h2> <p>We can put assembly instructions inside a macro
and use the macro like you would call a function.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">mov</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">{</span> </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">__asm__</span> <span class="token punctuation">(</span></span><span class="token string">&quot;l.cmov %0,%1,%2&quot;</span> <span class="token expression"><span class="token operator">:</span> </span><span class="token string">&quot;=r&quot;</span> <span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">:</span> </span><span class="token string">&quot;r&quot;</span> <span class="token expression"><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> </span><span class="token string">&quot;r&quot;</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">0x0000000F</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">}</span></span></span>

<span class="token comment">/// some definition and assignment</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> sbox<span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> sbox<span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">///Using</span>
<span class="token function">mov</span><span class="token punctuation">(</span>state<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sbox<span class="token punctuation">[</span>si<span class="token punctuation">]</span><span class="token punctuation">[</span>sj<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Using inline assembly instructions embedded in C code can improve the run time
of a program. This is very helpful in time critical situations like cryptographic algorithms such as AES. For example, for a simple shift operation that is needed in the AES algorithm, we can substitute a direct <code>Rotate Right</code> assembly instruction with C shift operator <code>&gt;&gt;</code>.</p> <p>In an implementation of 'AES256', in 'AddRoundKey()' function we have some statements like this:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">unsigned</span> <span class="token keyword">int</span> w<span class="token punctuation">;</span>          <span class="token comment">// 32-bit</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> subkey<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 8-bit, 4*8 = 32 </span>

subkey<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> w <span class="token operator">&gt;&gt;</span> <span class="token number">24</span><span class="token punctuation">;</span>     <span class="token comment">// hold 8 bit, MSB, leftmost group of 8-bits </span>
subkey<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> w <span class="token operator">&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">;</span>     <span class="token comment">// hold 8 bit, second group of 8-bit from left    </span>
subkey<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> w <span class="token operator">&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">;</span>      <span class="token comment">// hold 8 bit, second group of 8-bit from right</span>
subkey<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">;</span>           <span class="token comment">// hold 8 bit, LSB, rightmost group of 8-bits</span>

<span class="token comment">/// subkey &lt;- w</span>

</code></pre></div><p>They simply assign the bit value of <code>w</code> to <code>subkey</code> array.</p> <p>We can change three shift + assign and one assign C expression with only
one assembly <code>Rotate Right</code> operation.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token function">__asm__</span> <span class="token punctuation">(</span><span class="token string">&quot;l.ror  %0,%1,%2&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;=r&quot;</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> subkey<span class="token punctuation">)</span>  <span class="token operator">:</span> <span class="token string">&quot;r&quot;</span> <span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span> <span class="token punctuation">(</span><span class="token number">0x10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The final result is exactly same.</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Inline assembly is the practice of adding assembly instructions in the middle of C source code.  No ISO C standard requires support of inline assembly.  Since it is not required, the syntax for inline assembly varies from compiler to compiler.  Even though it is typically supported there are very few reasons to use inline assembly and many reasons not to.</p> <h3 id="pros"><a href="#pros" class="header-anchor">#</a> Pros</h3> <ol><li><strong>Performance</strong> By writing the specific assembly instructions for an operation, you can achieve better performance than the assembly code generated by the compiler.  Note that these performance gains are rare.  In most cases you can achieve better performance gains just by rearranging your C code so the optimizer can do its job.</li> <li><strong>Hardware interface</strong>  Device driver or processor startup code may need some assembly code to access the correct registers and to guarantee certain operations occur in a specific order with a specific delay between operations.</li></ol> <h3 id="cons"><a href="#cons" class="header-anchor">#</a> Cons</h3> <ol><li><strong>Compiler Portability</strong> Syntax for inline assembly is not guaranteed to be the same from one compiler to another.  If you are writing code with inline assembly that should be supported by different compilers, use preprocessor macros (<code>#ifdef</code>) to check which compiler is being used.  Then, write a separate inline assembly section for each supported compiler.</li> <li><strong>Processor Portability</strong> You can't write inline assembly for an x86 processor and expect it to work on an ARM processor.  Inline assembly is intended to be written for a specific processor or processor family.  If you have inline assembly that you want supported on different processors, use preprocessor macros to check which processor the code is being compiled for and to select the appropriate assembly code section.</li> <li><strong>Future Performance Changes</strong> Inline assembly may be written expecting delays based upon a certain processor clock speed.  If the program is compiled for a processor with a faster clock, the assembly code may not perform as expected.</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/c/inline-assembly.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/c/declarations.html" class="prev">
        Declarations
      </a></span> <span class="next"><a href="/c/threads-native.html">
        Threads (native)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/576.63508a8a.js" defer></script>
  </body>
</html>
