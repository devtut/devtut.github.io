<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux - Secure Shell (SSH)</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Connecting to a remote server, Installing OpenSSH suite, Generate public and private key, Configuring an SSH server to accept connections, Passwordless connection (using a key pair), Disable ssh service">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Linux - Secure Shell (SSH)">
    <meta property="og:description" content="Connecting to a remote server, Installing OpenSSH suite, Generate public and private key, Configuring an SSH server to accept connections, Passwordless connection (using a key pair), Disable ssh service">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/linux/secure-shell-ssh.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Linux - Secure Shell (SSH)">
    <meta name="twitter:description" content="Connecting to a remote server, Installing OpenSSH suite, Generate public and private key, Configuring an SSH server to accept connections, Passwordless connection (using a key pair), Disable ssh service">
    <meta name="twitter:url" content="/linux/secure-shell-ssh.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1904.540d7bc4.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/linux/getting-started-with-gnu-linux.html" class="sidebar-link">Getting started with GNU/Linux</a></li><li><a href="/linux/detecting-linux-distribution-name-and-version.html" class="sidebar-link">Detecting Linux distribution name and version</a></li><li><a href="/linux/getting-information-on-a-running-linux-kernel.html" class="sidebar-link">Getting information on a running Linux kernel</a></li><li><a href="/linux/shell.html" class="sidebar-link">Shell</a></li><li><a href="/linux/check-disk-space.html" class="sidebar-link">Check Disk Space</a></li><li><a href="/linux/getting-system-information.html" class="sidebar-link">Getting System Information</a></li><li><a href="/linux/ls-command.html" class="sidebar-link">ls command</a></li><li><a href="/linux/file-compression-with-tar-command.html" class="sidebar-link">File Compression with 'tar' command</a></li><li><a href="/linux/services.html" class="sidebar-link">Services</a></li><li><a href="/linux/managing-services.html" class="sidebar-link">Managing Services</a></li><li><a href="/linux/modifying-users.html" class="sidebar-link">Modifying Users</a></li><li><a href="/linux/lamp-stack.html" class="sidebar-link">LAMP Stack</a></li><li><a href="/linux/tee-command.html" class="sidebar-link">tee command</a></li><li><a href="/linux/secure-shell-ssh.html" aria-current="page" class="active sidebar-link">Secure Shell (SSH)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux/secure-shell-ssh.html#connecting-to-a-remote-server" class="sidebar-link">Connecting to a remote server</a></li><li class="sidebar-sub-header"><a href="/linux/secure-shell-ssh.html#installing-openssh-suite" class="sidebar-link">Installing OpenSSH suite</a></li><li class="sidebar-sub-header"><a href="/linux/secure-shell-ssh.html#generate-public-and-private-key" class="sidebar-link">Generate public and private key</a></li><li class="sidebar-sub-header"><a href="/linux/secure-shell-ssh.html#configuring-an-ssh-server-to-accept-connections" class="sidebar-link">Configuring an SSH server to accept connections</a></li><li class="sidebar-sub-header"><a href="/linux/secure-shell-ssh.html#passwordless-connection-using-a-key-pair" class="sidebar-link">Passwordless connection (using a key pair)</a></li><li class="sidebar-sub-header"><a href="/linux/secure-shell-ssh.html#disable-ssh-service" class="sidebar-link">Disable ssh service</a></li></ul></li><li><a href="/linux/scp.html" class="sidebar-link">SCP</a></li><li><a href="/linux/gnupg-gpg.html" class="sidebar-link">GnuPG (GPG)</a></li><li><a href="/linux/network-configuration.html" class="sidebar-link">Network Configuration</a></li><li><a href="/linux/midnight-commander.html" class="sidebar-link">Midnight Commander</a></li><li><a href="/linux/change-root-chroot.html" class="sidebar-link">Change root (chroot)</a></li><li><a href="/linux/package-managers.html" class="sidebar-link">Package Managers</a></li><li><a href="/linux/compiling-the-linux-kernel.html" class="sidebar-link">Compiling the Linux kernel</a></li><li><a href="/linux/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="secure-shell-ssh"><a href="#secure-shell-ssh" class="header-anchor">#</a> Secure Shell (SSH)</h1> <p>A secure <a href="https://stackoverflow.com/documentation/linux/2731/shell" target="_blank" rel="noopener noreferrer">shell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used to remotely access a server from a client over an encrypted connection. OpenSSH is used as an alternative to Telnet connections that achieve remote shell access but are unencrypted. The OpenSSH Client is installed on most GNU/Linux distributions by default and is used to connect to a server. These examples show use how to use the SSH suite to for accept SSH connections and connecting to another host.</p> <h2 id="connecting-to-a-remote-server"><a href="#connecting-to-a-remote-server" class="header-anchor">#</a> Connecting to a remote server</h2> <p>To connect to a server we must use SSH on the client as follows,</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># ssh -p port user@server-address</span>

</code></pre></div><ul><li><strong>port</strong> - The listening ssh port of the server (default port 22).</li> <li><strong>user</strong> - Must be an existing user on the server with SSH privileges.</li> <li><strong>server address</strong> - The IP/Domain of the server.</li></ul> <p>For a real world example lets pretend that you're making a website. The company you chose to host your site tells you that the server is located at <strong>web-servers.com</strong> on a custom port of <strong>2020</strong> and your account name <strong>usr1</strong> has been chosen to create a user on the server with SSH privileges. In this case the SSH command used would be as such</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># ssh -p 2020 usr1@web-servers.com</span>

</code></pre></div><p>If account name on the remote system is the same as the one one the local client you may leave the user name off. So if you are <code>usr1</code> on both systems then you my simply use <code>web-servers.com</code> instead of <code>usr1@web-servers.com</code>.</p> <p>When a server you want to connect to is not directly accessible to you, you can try using ProxyJump switch to connect to it through another server which is accessible to you and can connect to the desired server.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># ssh -J usr1@10.0.0.1:2020 usr2@10.0.0.2 -p 2222</span>

</code></pre></div><p>This will let you connect to the server 10.0.0.2 (running ssh on port 2222) through server at 10.0.0.1 (running ssh on port 2020). You will need to have accounts on both servers of course. Also note that the -J switch is introduced in OpenSSH version 7.3.</p> <h2 id="installing-openssh-suite"><a href="#installing-openssh-suite" class="header-anchor">#</a> Installing OpenSSH suite</h2> <p>Both connecting to a remove SSH server and accepting SSH connections require installation of <code>openssh</code></p> <p><strong>Debian:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># apt-get install openssh</span>

</code></pre></div><p><strong>Arch Linux:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># pacman -S openssh</span>

</code></pre></div><p><strong>Yum:</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># yum install openssh</span>

</code></pre></div><h2 id="generate-public-and-private-key"><a href="#generate-public-and-private-key" class="header-anchor">#</a> Generate public and private key</h2> <p>To generate keys for SSH client:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ssh-keygen <span class="token punctuation">[</span>-t rsa <span class="token operator">|</span> rsa1 <span class="token operator">|</span> dsa <span class="token punctuation">]</span> <span class="token punctuation">[</span>-C <span class="token operator">&lt;</span>comment<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-b bits<span class="token punctuation">]</span>

</code></pre></div><p>For example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ssh-keygen -t rsa -b <span class="token number">4096</span> - C myemail@email.com

</code></pre></div><p>Default location is <code>~/.ssh/id_rsa</code> for private and <code>~/.ssh/id_rsa.pub</code> for public key.</p> <p>For more info, please visit <a href="http://man.openbsd.org/OpenBSD-current/man1/ssh-keygen.1" target="_blank" rel="noopener noreferrer">man.openbsd.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="configuring-an-ssh-server-to-accept-connections"><a href="#configuring-an-ssh-server-to-accept-connections" class="header-anchor">#</a> Configuring an SSH server to accept connections</h2> <p>First we must edit the SSH daemon config file. Though under different Linux distributions this may be located in different directories, usually it is stored under <code>/etc/ssh/sshd_config</code></p> <p>Use your text editor to change the values set in this file, all lines starting with # are commented out and must have this character removed to take any effect. A list of recommendations follow as such.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Port <span class="token punctuation">(</span>chose a number between <span class="token number">0</span> - <span class="token number">65535</span>, normaly greater than four digits<span class="token punctuation">)</span>
PasswordAuthentication <span class="token function">yes</span>
AllowUsers    user1 user2 <span class="token punctuation">..</span>.etc

</code></pre></div><p><strong>Note that it is preferable to disable password logins all together and use SSH Keys for improved security as explained in this document.</strong></p> <h2 id="passwordless-connection-using-a-key-pair"><a href="#passwordless-connection-using-a-key-pair" class="header-anchor">#</a> Passwordless connection (using a key pair)</h2> <p>First of all you'll need to have a key pair. If you don't have one yet, take a look at the 'Generate public and private key topic'.</p> <p>Your key pair is composed by a private key (id_rsa) and a public key (id_rsa.pub). All you need to do is to copy the public key to the remote host and add its contents to the <code>~/.ssh/authorized_keys</code> file.</p> <p>One simple way to do that is:</p> <p><code>ssh &lt;user&gt;@&lt;ssh-server&gt; 'cat &gt;&gt; ~/.ssh/authorized_keys' &lt; id_rsa.pub</code></p> <p>Once the public key is properly placed in your user's home directory, you just need to login using the respective private key:</p> <p><code>ssh &lt;user&gt;@&lt;ssh-server&gt; -i id_rsa</code></p> <h2 id="disable-ssh-service"><a href="#disable-ssh-service" class="header-anchor">#</a> Disable ssh service</h2> <p>This will disable the SSH server side service, as if needed this will insure that clients cannot connect via ssh</p> <p><strong>Ubuntu</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">ssh</span> stop

</code></pre></div><p><strong>Debian</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> /etc/init.d/ssh stop

</code></pre></div><p><strong>Arch Linux</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">killall</span> sshd

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/linux/secure-shell-ssh.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linux/tee-command.html" class="prev">
        tee command
      </a></span> <span class="next"><a href="/linux/scp.html">
        SCP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1904.540d7bc4.js" defer></script>
  </body>
</html>
