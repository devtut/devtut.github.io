<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kotlin - Java 8 Stream Equivalents</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Accumulate names in a List, Collect example #5 - find people of legal age, output formatted string, Collect example #6 - group people by age, print age and names together, Different Kinds of Streams #7 - lazily iterate Doubles, map to Int, map to String, print each, Counting items in a list after filter is applied, Convert elements to strings and concatenate them, separated by commas, Compute sum of salaries of employee, Group employees by department, Compute sum of salaries by department, Partition students into passing and failing, Names of male members, Group names of members in roster by gender, Filter a list to another list, Finding shortest string a list, Different Kinds of Streams #2 - lazily using first item if exists, Different Kinds of Streams #3 - iterate a range of Integers, Different Kinds of Streams #4 - iterate an array, map the values, calculate the average, Different Kinds of Streams #5 - lazily iterate a list of strings, map the values, convert to Int, find max, Different Kinds of Streams #6 - lazily iterate a stream of Ints, map the values, print results, How streams work - filter, upper case, then sort a list, Different Kinds of Streams #1 - eager using first item if it exists, Collect example #7a - Map names, join together with delimiter, Collect example #7b - Collect with SummarizingInt">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Kotlin - Java 8 Stream Equivalents">
    <meta property="og:description" content="Accumulate names in a List, Collect example #5 - find people of legal age, output formatted string, Collect example #6 - group people by age, print age and names together, Different Kinds of Streams #7 - lazily iterate Doubles, map to Int, map to String, print each, Counting items in a list after filter is applied, Convert elements to strings and concatenate them, separated by commas, Compute sum of salaries of employee, Group employees by department, Compute sum of salaries by department, Partition students into passing and failing, Names of male members, Group names of members in roster by gender, Filter a list to another list, Finding shortest string a list, Different Kinds of Streams #2 - lazily using first item if exists, Different Kinds of Streams #3 - iterate a range of Integers, Different Kinds of Streams #4 - iterate an array, map the values, calculate the average, Different Kinds of Streams #5 - lazily iterate a list of strings, map the values, convert to Int, find max, Different Kinds of Streams #6 - lazily iterate a stream of Ints, map the values, print results, How streams work - filter, upper case, then sort a list, Different Kinds of Streams #1 - eager using first item if it exists, Collect example #7a - Map names, join together with delimiter, Collect example #7b - Collect with SummarizingInt">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/kotlin/java-8-stream-equivalents.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Kotlin - Java 8 Stream Equivalents">
    <meta name="twitter:description" content="Accumulate names in a List, Collect example #5 - find people of legal age, output formatted string, Collect example #6 - group people by age, print age and names together, Different Kinds of Streams #7 - lazily iterate Doubles, map to Int, map to String, print each, Counting items in a list after filter is applied, Convert elements to strings and concatenate them, separated by commas, Compute sum of salaries of employee, Group employees by department, Compute sum of salaries by department, Partition students into passing and failing, Names of male members, Group names of members in roster by gender, Filter a list to another list, Finding shortest string a list, Different Kinds of Streams #2 - lazily using first item if exists, Different Kinds of Streams #3 - iterate a range of Integers, Different Kinds of Streams #4 - iterate an array, map the values, calculate the average, Different Kinds of Streams #5 - lazily iterate a list of strings, map the values, convert to Int, find max, Different Kinds of Streams #6 - lazily iterate a stream of Ints, map the values, print results, How streams work - filter, upper case, then sort a list, Different Kinds of Streams #1 - eager using first item if it exists, Collect example #7a - Map names, join together with delimiter, Collect example #7b - Collect with SummarizingInt">
    <meta name="twitter:url" content="/kotlin/java-8-stream-equivalents.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1848.3e6bec7a.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Kotlin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kotlin/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/kotlin/getting-started-with-kotlin.html" class="sidebar-link">Getting started with Kotlin</a></li><li><a href="/kotlin/basics-of-kotlin.html" class="sidebar-link">Basics of Kotlin</a></li><li><a href="/kotlin/strings.html" class="sidebar-link">Strings</a></li><li><a href="/kotlin/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/kotlin/collections.html" class="sidebar-link">Collections</a></li><li><a href="/kotlin/enum.html" class="sidebar-link">Enum</a></li><li><a href="/kotlin/functions.html" class="sidebar-link">Functions</a></li><li><a href="/kotlin/vararg-parameters-in-functions.html" class="sidebar-link">Vararg Parameters in Functions</a></li><li><a href="/kotlin/conditional-statements.html" class="sidebar-link">Conditional Statements</a></li><li><a href="/kotlin/loops-in-kotlin.html" class="sidebar-link">Loops in Kotlin</a></li><li><a href="/kotlin/ranges.html" class="sidebar-link">Ranges</a></li><li><a href="/kotlin/regex.html" class="sidebar-link">Regex</a></li><li><a href="/kotlin/basic-lambdas.html" class="sidebar-link">Basic Lambdas</a></li><li><a href="/kotlin/null-safety.html" class="sidebar-link">Null Safety</a></li><li><a href="/kotlin/class-delegation.html" class="sidebar-link">Class Delegation</a></li><li><a href="/kotlin/class-inheritance.html" class="sidebar-link">Class Inheritance</a></li><li><a href="/kotlin/visibility-modifiers.html" class="sidebar-link">Visibility Modifiers</a></li><li><a href="/kotlin/generics.html" class="sidebar-link">Generics</a></li><li><a href="/kotlin/interfaces.html" class="sidebar-link">Interfaces</a></li><li><a href="/kotlin/singleton-objects.html" class="sidebar-link">Singleton objects</a></li><li><a href="/kotlin/coroutines.html" class="sidebar-link">coroutines</a></li><li><a href="/kotlin/annotations.html" class="sidebar-link">Annotations</a></li><li><a href="/kotlin/type-aliases.html" class="sidebar-link">Type aliases</a></li><li><a href="/kotlin/type-safe-builders.html" class="sidebar-link">Type-Safe Builders</a></li><li><a href="/kotlin/delegated-properties.html" class="sidebar-link">Delegated properties</a></li><li><a href="/kotlin/reflection.html" class="sidebar-link">Reflection</a></li><li><a href="/kotlin/extension-methods.html" class="sidebar-link">Extension Methods</a></li><li><a href="/kotlin/dsl-building.html" class="sidebar-link">DSL Building</a></li><li><a href="/kotlin/idioms.html" class="sidebar-link">Idioms</a></li><li><a href="/kotlin/recyclerview-in-kotlin.html" class="sidebar-link">RecyclerView in Kotlin</a></li><li><a href="/kotlin/logging-in-kotlin.html" class="sidebar-link">logging in kotlin</a></li><li><a href="/kotlin/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/kotlin/junit.html" class="sidebar-link">JUnit</a></li><li><a href="/kotlin/kotlin-android-extensions.html" class="sidebar-link">Kotlin Android Extensions</a></li><li><a href="/kotlin/kotlin-for-java-developers.html" class="sidebar-link">Kotlin for Java Developers</a></li><li><a href="/kotlin/java-8-stream-equivalents.html" aria-current="page" class="active sidebar-link">Java 8 Stream Equivalents</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#accumulate-names-in-a-list" class="sidebar-link">Accumulate names in a List</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#collect-example-5-find-people-of-legal-age-output-formatted-string" class="sidebar-link">Collect example #5 - find people of legal age, output formatted string</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#collect-example-6-group-people-by-age-print-age-and-names-together" class="sidebar-link">Collect example #6 - group people by age, print age and names together</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#different-kinds-of-streams-7-lazily-iterate-doubles-map-to-int-map-to-string-print-each" class="sidebar-link">Different Kinds of Streams #7 - lazily iterate Doubles, map to Int, map to String, print each</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#counting-items-in-a-list-after-filter-is-applied" class="sidebar-link">Counting items in a list after filter is applied</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#convert-elements-to-strings-and-concatenate-them-separated-by-commas" class="sidebar-link">Convert elements to strings and concatenate them, separated by commas</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#compute-sum-of-salaries-of-employee" class="sidebar-link">Compute sum of salaries of employee</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#group-employees-by-department" class="sidebar-link">Group employees by department</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#compute-sum-of-salaries-by-department" class="sidebar-link">Compute sum of salaries by department</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#partition-students-into-passing-and-failing" class="sidebar-link">Partition students into passing and failing</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#names-of-male-members" class="sidebar-link">Names of male members</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#group-names-of-members-in-roster-by-gender" class="sidebar-link">Group names of members in roster by gender</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#filter-a-list-to-another-list" class="sidebar-link">Filter a list to another list</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#finding-shortest-string-a-list" class="sidebar-link">Finding shortest string a list</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#different-kinds-of-streams-2-lazily-using-first-item-if-exists" class="sidebar-link">Different Kinds of Streams #2 - lazily using first item if exists</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#different-kinds-of-streams-3-iterate-a-range-of-integers" class="sidebar-link">Different Kinds of Streams #3 - iterate a range of Integers</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#different-kinds-of-streams-4-iterate-an-array-map-the-values-calculate-the-average" class="sidebar-link">Different Kinds of Streams #4 - iterate an array, map the values, calculate the average</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#different-kinds-of-streams-5-lazily-iterate-a-list-of-strings-map-the-values-convert-to-int-find-max" class="sidebar-link">Different Kinds of Streams #5 - lazily iterate a list of strings, map the values, convert to Int, find max</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#different-kinds-of-streams-6-lazily-iterate-a-stream-of-ints-map-the-values-print-results" class="sidebar-link">Different Kinds of Streams #6 - lazily iterate a stream of Ints, map the values, print results</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#how-streams-work-filter-upper-case-then-sort-a-list" class="sidebar-link">How streams work - filter, upper case, then sort a list</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#different-kinds-of-streams-1-eager-using-first-item-if-it-exists" class="sidebar-link">Different Kinds of Streams #1 - eager using first item if it exists</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#collect-example-7a-map-names-join-together-with-delimiter" class="sidebar-link">Collect example #7a - Map names, join together with delimiter</a></li><li class="sidebar-sub-header"><a href="/kotlin/java-8-stream-equivalents.html#collect-example-7b-collect-with-summarizingint" class="sidebar-link">Collect example #7b - Collect with SummarizingInt</a></li></ul></li><li><a href="/kotlin/kotlin-caveats.html" class="sidebar-link">Kotlin Caveats</a></li><li><a href="/kotlin/configuring-kotlin-build.html" class="sidebar-link">Configuring Kotlin build</a></li><li><a href="/kotlin/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-8-stream-equivalents"><a href="#java-8-stream-equivalents" class="header-anchor">#</a> Java 8 Stream Equivalents</h1> <p>Kotlin provides many extension methods on collections and iterables for applying functional-style operations. A dedicated <code>Sequence</code> type allows for lazy composition of several such operations.</p> <h2 id="accumulate-names-in-a-list"><a href="#accumulate-names-in-a-list" class="header-anchor">#</a> Accumulate names in a List</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:  </span>
List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Person<span class="token operator">::</span>getName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> list <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span>  <span class="token comment">// toList() not needed</span>

</code></pre></div><h2 id="collect-example-5-find-people-of-legal-age-output-formatted-string"><a href="#collect-example-5-find-people-of-legal-age-output-formatted-string" class="header-anchor">#</a> Collect example #5 - find people of legal age, output formatted string</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
String phrase <span class="token operator">=</span> persons
        <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>age <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; and &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;In Germany &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; are of legal age.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phrase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// In Germany Max and Peter and Pamela are of legal age.    </span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> phrase <span class="token operator">=</span> persons
        <span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token string">&quot; and &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;In Germany &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; are of legal age.&quot;</span><span class="token punctuation">)</span>

<span class="token function">println</span><span class="token punctuation">(</span>phrase<span class="token punctuation">)</span>
<span class="token comment">// In Germany Max and Peter and Pamela are of legal age.</span>

</code></pre></div><p>And as a side note, in Kotlin we can create simple <a href="https://kotlinlang.org/docs/reference/data-classes.html" target="_blank" rel="noopener noreferrer">data classes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and instantiate the test data as follows:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token comment">// data class has equals, hashcode, toString, and copy methods automagically</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> age<span class="token operator">:</span> Int<span class="token punctuation">)</span> 

<span class="token keyword">val</span> persons <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Tod&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Max&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                     <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Frank&quot;</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Peter&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                     <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Pamela&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="collect-example-6-group-people-by-age-print-age-and-names-together"><a href="#collect-example-6-group-people-by-age-print-age-and-names-together" class="header-anchor">#</a> Collect example #6 - group people by age, print age and names together</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> String<span class="token operator">&gt;</span> map <span class="token operator">=</span> persons
        <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>
                p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>age<span class="token punctuation">,</span>
                p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
                <span class="token punctuation">(</span>name1<span class="token punctuation">,</span> name2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> name1 <span class="token operator">+</span> <span class="token string">&quot;;&quot;</span> <span class="token operator">+</span> name2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {18=Max, 23=Peter;Pamela, 12=David}    </span>

</code></pre></div><p>Ok, a more interest case here for Kotlin.  First the wrong answers to explore variations of creating a <code>Map</code> from a collection/sequence:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> map1 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token keyword">to</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>map1<span class="token punctuation">)</span>
<span class="token comment">// output: {18=Max, 23=Pamela, 12=David} </span>
<span class="token comment">// Result: duplicates overridden, no exception similar to Java 8</span>

<span class="token keyword">val</span> map2 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>map2<span class="token punctuation">)</span>
<span class="token comment">// output: {18=Max, 23=Pamela, 12=David} </span>
<span class="token comment">// Result: same as above, more verbose, duplicates overridden</span>

<span class="token keyword">val</span> map3 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">toMapBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>map3<span class="token punctuation">)</span>
<span class="token comment">// output: {18=Person(name=Max, age=18), 23=Person(name=Pamela, age=23), 12=Person(name=David, age=12)}</span>
<span class="token comment">// Result: duplicates overridden again</span>

<span class="token keyword">val</span> map4 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>map4<span class="token punctuation">)</span>
<span class="token comment">// output: {18=[Person(name=Max, age=18)], 23=[Person(name=Peter, age=23), Person(name=Pamela, age=23)], 12=[Person(name=David, age=12)]}</span>
<span class="token comment">// Result: closer, but now have a Map&lt;Int, List&lt;Person&gt;&gt; instead of Map&lt;Int, String&gt;</span>

<span class="token keyword">val</span> map5 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">mapValues</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>map5<span class="token punctuation">)</span>
<span class="token comment">// output: {18=[Max], 23=[Peter, Pamela], 12=[David]}</span>
<span class="token comment">// Result: closer, but now have a Map&lt;Int, List&lt;String&gt;&gt; instead of Map&lt;Int, String&gt;</span>

</code></pre></div><p>And now for the correct answer:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> map6 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">mapValues</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">}</span>

<span class="token function">println</span><span class="token punctuation">(</span>map6<span class="token punctuation">)</span>
<span class="token comment">// output: {18=Max, 23=Peter;Pamela, 12=David}</span>
<span class="token comment">// Result: YAY!!</span>

</code></pre></div><p>We just needed to join the matching values to collapse the lists and provide a transformer to <code>joinToString</code> to move from <code>Person</code> instance to the <code>Person.name</code>.</p> <h2 id="different-kinds-of-streams-7-lazily-iterate-doubles-map-to-int-map-to-string-print-each"><a href="#different-kinds-of-streams-7-lazily-iterate-doubles-map-to-int-map-to-string-print-each" class="header-anchor">#</a> Different Kinds of Streams #7 - lazily iterate Doubles, map to Int, map to String, print each</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span>Double<span class="token operator">::</span>intValue<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// a1</span>
<span class="token comment">// a2</span>
<span class="token comment">// a3</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token function">sequenceOf</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Double<span class="token operator">::</span>toInt<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> <span class="token string">&quot;a<span class="token interpolation variable">$it</span>&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><h2 id="counting-items-in-a-list-after-filter-is-applied"><a href="#counting-items-in-a-list-after-filter-is-applied" class="header-anchor">#</a> Counting items in a list after filter is applied</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
long count <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> item <span class="token operator">-&gt;</span> item<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> count <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'t'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>size
<span class="token comment">// but better to not filter, but count with a predicate</span>
<span class="token keyword">val</span> count <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">count</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'t'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

</code></pre></div><h2 id="convert-elements-to-strings-and-concatenate-them-separated-by-commas"><a href="#convert-elements-to-strings-and-concatenate-them-separated-by-commas" class="header-anchor">#</a> Convert elements to strings and concatenate them, separated by commas</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
String joined <span class="token operator">=</span> things<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                       <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Object<span class="token operator">::</span>toString<span class="token punctuation">)</span>
                       <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> joined <span class="token operator">=</span> things<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;, &quot; is used as separator, by default</span>

</code></pre></div><h2 id="compute-sum-of-salaries-of-employee"><a href="#compute-sum-of-salaries-of-employee" class="header-anchor">#</a> Compute sum of salaries of employee</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
int total <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">summingInt</span><span class="token punctuation">(</span>Employee<span class="token operator">::</span>getSalary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> total <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">sumBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>salary <span class="token punctuation">}</span>

</code></pre></div><h2 id="group-employees-by-department"><a href="#group-employees-by-department" class="header-anchor">#</a> Group employees by department</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Map<span class="token operator">&lt;</span>Department<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Employee<span class="token operator">&gt;</span><span class="token operator">&gt;</span> byDept
     <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>Employee<span class="token operator">::</span>getDepartment<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> byDept <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>department <span class="token punctuation">}</span>

</code></pre></div><h2 id="compute-sum-of-salaries-by-department"><a href="#compute-sum-of-salaries-by-department" class="header-anchor">#</a> Compute sum of salaries by department</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Map<span class="token operator">&lt;</span>Department<span class="token punctuation">,</span> Integer<span class="token operator">&gt;</span> totalByDept
     <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>Employee<span class="token operator">::</span>getDepartment<span class="token punctuation">,</span>
                     Collectors<span class="token punctuation">.</span><span class="token function">summingInt</span><span class="token punctuation">(</span>Employee<span class="token operator">::</span>getSalary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> totalByDept <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>dept <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">mapValues</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">sumBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>salary <span class="token punctuation">}</span><span class="token punctuation">}</span>

</code></pre></div><h2 id="partition-students-into-passing-and-failing"><a href="#partition-students-into-passing-and-failing" class="header-anchor">#</a> Partition students into passing and failing</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Map<span class="token operator">&lt;</span>Boolean<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Student<span class="token operator">&gt;</span><span class="token operator">&gt;</span> passingFailing <span class="token operator">=</span>
     students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">partitioningBy</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">getGrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> PASS_THRESHOLD<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> passingFailing <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">partition</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>grade <span class="token operator">&gt;=</span> PASS_THRESHOLD <span class="token punctuation">}</span>

</code></pre></div><h2 id="names-of-male-members"><a href="#names-of-male-members" class="header-anchor">#</a> Names of male members</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> namesOfMaleMembersCollect <span class="token operator">=</span> roster
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Person<span class="token punctuation">.</span>Sex<span class="token punctuation">.</span>MALE<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> namesOfMaleMembers <span class="token operator">=</span> roster<span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>gender <span class="token operator">==</span> Person<span class="token punctuation">.</span>Sex<span class="token punctuation">.</span>MALE <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span>

</code></pre></div><h2 id="group-names-of-members-in-roster-by-gender"><a href="#group-names-of-members-in-roster-by-gender" class="header-anchor">#</a> Group names of members in roster by gender</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Map<span class="token operator">&lt;</span>Person<span class="token punctuation">.</span>Sex<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token operator">&gt;</span> namesByGender <span class="token operator">=</span>
      roster<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>
        Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>
            Person<span class="token operator">::</span>getGender<span class="token punctuation">,</span>                      
            Collectors<span class="token punctuation">.</span><span class="token function">mapping</span><span class="token punctuation">(</span>
                Person<span class="token operator">::</span>getName<span class="token punctuation">,</span>
                Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> namesByGender <span class="token operator">=</span> roster<span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>gender <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">mapValues</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">}</span>   

</code></pre></div><h2 id="filter-a-list-to-another-list"><a href="#filter-a-list-to-another-list" class="header-anchor">#</a> Filter a list to another list</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> filtered <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> item <span class="token operator">-&gt;</span> item<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> filtered <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> item<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> 

</code></pre></div><h2 id="finding-shortest-string-a-list"><a href="#finding-shortest-string-a-list" class="header-anchor">#</a> Finding shortest string a list</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
String shortest <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>Comparator<span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> item<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> shortest <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">minBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>length <span class="token punctuation">}</span>

</code></pre></div><h2 id="different-kinds-of-streams-2-lazily-using-first-item-if-exists"><a href="#different-kinds-of-streams-2-lazily-using-first-item-if-exists" class="header-anchor">#</a> Different Kinds of Streams #2 - lazily using first item if exists</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a3&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>    

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token function">sequenceOf</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">firstOrNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><h2 id="different-kinds-of-streams-3-iterate-a-range-of-integers"><a href="#different-kinds-of-streams-3-iterate-a-range-of-integers" class="header-anchor">#</a> Different Kinds of Streams #3 - iterate a range of Integers</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:  (inclusive range)</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><h2 id="different-kinds-of-streams-4-iterate-an-array-map-the-values-calculate-the-average"><a href="#different-kinds-of-streams-4-iterate-an-array-map-the-values-calculate-the-average" class="header-anchor">#</a> Different Kinds of Streams #4 - iterate an array, map the values, calculate the average</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Arrays<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>new int<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token number">2</span> <span class="token operator">*</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5.0    </span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> <span class="token number">2</span> <span class="token operator">*</span> it <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><h2 id="different-kinds-of-streams-5-lazily-iterate-a-list-of-strings-map-the-values-convert-to-int-find-max"><a href="#different-kinds-of-streams-5-lazily-iterate-a-list-of-strings-map-the-values-convert-to-int-find-max" class="header-anchor">#</a> Different Kinds of Streams #5 - lazily iterate a list of strings, map the values, convert to Int, find max</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a3&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span>Integer<span class="token operator">::</span>parseInt<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token function">sequenceOf</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a3&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>String<span class="token operator">::</span>toInt<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><h2 id="different-kinds-of-streams-6-lazily-iterate-a-stream-of-ints-map-the-values-print-results"><a href="#different-kinds-of-streams-6-lazily-iterate-a-stream-of-ints-map-the-values-print-results" class="header-anchor">#</a> Different Kinds of Streams #6 - lazily iterate a stream of Ints, map the values, print results</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// a1</span>
<span class="token comment">// a2</span>
<span class="token comment">// a3    </span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:  (inclusive range)</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> <span class="token string">&quot;a<span class="token interpolation variable">$it</span>&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><h2 id="how-streams-work-filter-upper-case-then-sort-a-list"><a href="#how-streams-work-filter-upper-case-then-sort-a-list" class="header-anchor">#</a> How streams work - filter, upper case, then sort a list</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> myList <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>String<span class="token operator">::</span>toUpperCase<span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// C1</span>
<span class="token comment">// C2</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c1&quot;</span><span class="token punctuation">)</span>
list<span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">(</span>String<span class="token operator">::</span>toUpperCase<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><h2 id="different-kinds-of-streams-1-eager-using-first-item-if-it-exists"><a href="#different-kinds-of-streams-1-eager-using-first-item-if-it-exists" class="header-anchor">#</a> Different Kinds of Streams #1 - eager using first item if it exists</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a3&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">::</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>    

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">firstOrNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><p>or, create an extension function on String called ifPresent:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">inline</span> <span class="token keyword">fun</span> String<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>thenDo<span class="token operator">:</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Unit<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span> <span class="token function">thenDo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token comment">// now use the new extension function:</span>
<span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">firstOrNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span>

</code></pre></div><p>See also: <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html" target="_blank" rel="noopener noreferrer"><code>apply()</code> function<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>See also: <a href="https://kotlinlang.org/docs/reference/extensions.html" target="_blank" rel="noopener noreferrer">Extension Functions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>See also:  <a href="https://kotlinlang.org/docs/reference/null-safety.html#safe-calls" target="_blank" rel="noopener noreferrer"><code>?.</code> Safe Call operator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and in general nullability: <a href="http://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o/34498563#34498563" target="_blank" rel="noopener noreferrer">http://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o/34498563#34498563<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="collect-example-7a-map-names-join-together-with-delimiter"><a href="#collect-example-7a-map-names-join-together-with-delimiter" class="header-anchor">#</a> Collect example #7a - Map names, join together with delimiter</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java (verbose):</span>
Collector<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> StringJoiner<span class="token punctuation">,</span> String<span class="token operator">&gt;</span> personNameCollector <span class="token operator">=</span>
Collector<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> new <span class="token function">StringJoiner</span><span class="token punctuation">(</span><span class="token string">&quot; | &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>          <span class="token comment">// supplier</span>
        <span class="token punctuation">(</span>j<span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> j<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// accumulator</span>
        <span class="token punctuation">(</span>j1<span class="token punctuation">,</span> j2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> j1<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>j2<span class="token punctuation">)</span><span class="token punctuation">,</span>               <span class="token comment">// combiner</span>
        StringJoiner<span class="token operator">::</span>toString<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// finisher</span>

String names <span class="token operator">=</span> persons
        <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>personNameCollector<span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// MAX | PETER | PAMELA | DAVID    </span>

<span class="token comment">// Java (concise)</span>
String names <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; | &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">val</span> names <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token string">&quot; | &quot;</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="collect-example-7b-collect-with-summarizingint"><a href="#collect-example-7b-collect-with-summarizingint" class="header-anchor">#</a> Collect example #7b - Collect with SummarizingInt</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
IntSummaryStatistics ageSummary <span class="token operator">=</span>
    persons<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">summarizingInt</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ageSummary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// IntSummaryStatistics{count=4, sum=76, min=12, average=19.000000, max=23}    </span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>

<span class="token comment">// something to hold the stats...</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">SummaryStatisticsInt</span><span class="token punctuation">(</span><span class="token keyword">var</span> count<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>  
                                <span class="token keyword">var</span> sum<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> 
                                <span class="token keyword">var</span> min<span class="token operator">:</span> Int <span class="token operator">=</span> Int<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span> 
                                <span class="token keyword">var</span> max<span class="token operator">:</span> Int <span class="token operator">=</span> Int<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">,</span> 
                                <span class="token keyword">var</span> avg<span class="token operator">:</span> Double <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>newInt<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> SummaryStatisticsInt <span class="token punctuation">{</span>
        count<span class="token operator">++</span>
        sum <span class="token operator">+=</span> newInt
        min <span class="token operator">=</span> min<span class="token punctuation">.</span><span class="token function">coerceAtMost</span><span class="token punctuation">(</span>newInt<span class="token punctuation">)</span>
        max <span class="token operator">=</span> max<span class="token punctuation">.</span><span class="token function">coerceAtLeast</span><span class="token punctuation">(</span>newInt<span class="token punctuation">)</span>
        avg <span class="token operator">=</span> sum<span class="token punctuation">.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> count
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Now manually doing a fold, since Stream.collect is really just a fold</span>
<span class="token keyword">val</span> stats <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">fold</span><span class="token punctuation">(</span><span class="token function">SummaryStatisticsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> stats<span class="token punctuation">,</span> person <span class="token operator">-&gt;</span> stats<span class="token punctuation">.</span><span class="token function">accumulate</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token function">println</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span>
<span class="token comment">// output: SummaryStatisticsInt(count=4, sum=76, min=12, max=23, avg=19.0)</span>

</code></pre></div><p>But it is better to create an extension function, 2 actually to match styles in Kotlin stdlib:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:</span>
<span class="token keyword">inline</span> <span class="token keyword">fun</span> Collection<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">summarizingInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> SummaryStatisticsInt
        <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fold</span><span class="token punctuation">(</span><span class="token function">SummaryStatisticsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> stats<span class="token punctuation">,</span> num <span class="token operator">-&gt;</span> stats<span class="token punctuation">.</span><span class="token function">accumulate</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">:</span> Any<span class="token operator">&gt;</span> Collection<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">summarizingInt</span><span class="token punctuation">(</span>transform<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Int<span class="token punctuation">)</span><span class="token operator">:</span> SummaryStatisticsInt <span class="token operator">=</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fold</span><span class="token punctuation">(</span><span class="token function">SummaryStatisticsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> stats<span class="token punctuation">,</span> item <span class="token operator">-&gt;</span> stats<span class="token punctuation">.</span><span class="token function">accumulate</span><span class="token punctuation">(</span><span class="token function">transform</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

</code></pre></div><p>Now you have two ways to use the new <code>summarizingInt</code> functions:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">val</span> stats2 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">summarizingInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// or</span>

<span class="token keyword">val</span> stats3 <span class="token operator">=</span> persons<span class="token punctuation">.</span><span class="token function">summarizingInt</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token punctuation">}</span>

</code></pre></div><p>And all of these produce the same results.  We can also create this extension to work on <code>Sequence</code> and for appropriate primitive types.</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <h3 id="about-laziness"><a href="#about-laziness" class="header-anchor">#</a> About laziness</h3> <p>If you want to lazy process a chain, you can convert to a <code>Sequence</code> using <code>asSequence()</code> before the chain.  At the end of the chain of functions, you usually end up with a <code>Sequence</code> as well.  Then you can use <code>toList()</code>, <code>toSet()</code>, <code>toMap()</code> or some other function to materialize the <code>Sequence</code> at the end.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// switch to and from lazy</span>
<span class="token keyword">val</span> someList <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">asSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// switch to lazy, but sorted() brings us out again at the end</span>
<span class="token keyword">val</span> someList <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">asSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="why-are-there-no-types"><a href="#why-are-there-no-types" class="header-anchor">#</a> Why are there no Types?!?</h3> <p>You will notice the Kotlin examples do not specify the types.  This is because Kotlin has full type inference and is completely type safe at compile time.  More so than Java because it also has nullable types and can help prevent the dreaded NPE.  So this in Kotlin:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">val</span> someList <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token operator">&lt;=</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span>

</code></pre></div><p>is the same as:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">val</span> someList<span class="token operator">:</span> List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token operator">&lt;=</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span>

</code></pre></div><p>Because Kotlin knows what <code>people</code> is, and that <code>people.age</code> is <code>Int</code> therefore the filter expression only allows comparison to an <code>Int</code>, and that <code>people.name</code> is a <code>String</code> therefore the <code>map</code> step produces a <code>List&lt;String&gt;</code> (readonly <code>List</code> of <code>String</code>).</p> <p>Now, if <code>people</code> were possibly <code>null</code>, as-in a <code>List&lt;People&gt;?</code> then:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">val</span> someList <span class="token operator">=</span> people<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>age <span class="token operator">&lt;=</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span>

</code></pre></div><p>Returns a <code>List&lt;String&gt;?</code> that would need to be null checked (<strong>or use one of the other Kotlin operators for nullable values, see this <a href="http://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o" target="_blank" rel="noopener noreferrer">Kotlin idiomatic way to deal with nullable values<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and also <a href="http://stackoverflow.com/questions/26341225/idiomatic-way-of-handling-nullable-or-empty-list-in-kotlin" target="_blank" rel="noopener noreferrer">Idiomatic way of handling nullable or empty list in Kotlin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>)</p> <h3 id="reusing-streams"><a href="#reusing-streams" class="header-anchor">#</a> Reusing Streams</h3> <p>In Kotlin, it depends on the type of collection whether it can be consumed more than once.  A <code>Sequence</code> generates a new iterator every time, and unless it asserts &quot;use only once&quot; it can reset to the start each time it is acted upon.  Therefore while the following fails in Java 8 stream, but works in Kotlin:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> stream <span class="token operator">=</span>
Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;d2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stream<span class="token punctuation">.</span><span class="token function">anyMatch</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ok</span>
stream<span class="token punctuation">.</span><span class="token function">noneMatch</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// exception</span>

</code></pre></div><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Kotlin:  </span>
<span class="token keyword">val</span> stream <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">&quot;d2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'b'</span> <span class="token punctuation">)</span> <span class="token punctuation">}</span>

stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span> <span class="token comment">// b1, b2</span>

<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Any B <span class="token interpolation"><span class="token delimiter variable">${</span>stream<span class="token punctuation">.</span><span class="token function">any</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span> <span class="token delimiter variable">}</span></span>}&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Any B true</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Any C <span class="token interpolation"><span class="token delimiter variable">${</span>stream<span class="token punctuation">.</span><span class="token function">any</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span> <span class="token delimiter variable">}</span></span>}&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Any C false</span>

stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span> <span class="token comment">// b1, b2</span>

</code></pre></div><p>And in Java to get the same behavior:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// Java:</span>
Supplier<span class="token operator">&lt;</span>Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token operator">&gt;</span> streamSupplier <span class="token operator">=</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Stream<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;d2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

streamSupplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyMatch</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ok</span>
streamSupplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">noneMatch</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ok</span>

</code></pre></div><p>Therefore in Kotlin the provider of the data decides if it can reset back and provide a new iterator or not.  But if you want to intentionally constrain a <code>Sequence</code> to one time iteration, you can use <code>constrainOnce()</code> function for <code>Sequence</code> as follows:</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">val</span> stream <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">&quot;d2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'b'</span> <span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">constrainOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span> <span class="token comment">// b1, b2</span>
stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token operator">::</span>println<span class="token punctuation">)</span> <span class="token comment">// Error:java.lang.IllegalStateException: This sequence can be consumed only once. </span>

</code></pre></div><h3 id="see-also"><a href="#see-also" class="header-anchor">#</a> See also:</h3> <ul><li>API Reference for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-iterable/index.html" target="_blank" rel="noopener noreferrer">extension functions for Iterable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>API reference for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-array/index.html" target="_blank" rel="noopener noreferrer">extension functions for Array<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>API reference for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-list/index.html" target="_blank" rel="noopener noreferrer">extension functions for List<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>API reference for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-map/index.html" target="_blank" rel="noopener noreferrer">extension functions to Map<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/kotlin/java-8-stream-equivalents.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kotlin/kotlin-for-java-developers.html" class="prev">
        Kotlin for Java Developers
      </a></span> <span class="next"><a href="/kotlin/kotlin-caveats.html">
        Kotlin Caveats
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1848.3e6bec7a.js" defer></script>
  </body>
</html>
