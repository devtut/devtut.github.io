<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C# | C# 6.0 Features</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Exception filters, String interpolation, Auto-property initializers, Null propagation, Expression-bodied function members, Operator nameof, Using static type, Index initializers, Improved overload resolution, Await in catch and finally, Minor changes and bugfixes, Using an extension method for collection initialization, Disable Warnings Enhancements">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="C# | C# 6.0 Features">
    <meta property="og:description" content="Exception filters, String interpolation, Auto-property initializers, Null propagation, Expression-bodied function members, Operator nameof, Using static type, Index initializers, Improved overload resolution, Await in catch and finally, Minor changes and bugfixes, Using an extension method for collection initialization, Disable Warnings Enhancements">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/csharp/c-6-0-features.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="C# | C# 6.0 Features">
    <meta name="twitter:description" content="Exception filters, String interpolation, Auto-property initializers, Null propagation, Expression-bodied function members, Operator nameof, Using static type, Index initializers, Improved overload resolution, Await in catch and finally, Minor changes and bugfixes, Using an extension method for collection initialization, Disable Warnings Enhancements">
    <meta name="twitter:url" content="/csharp/c-6-0-features.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/781.4203a71f.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>C#</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/csharp/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/csharp/getting-started-with-c-language.html" class="sidebar-link">Getting started with C# Language</a></li><li><a href="/csharp/literals.html" class="sidebar-link">Literals</a></li><li><a href="/csharp/operators.html" class="sidebar-link">Operators</a></li><li><a href="/csharp/conditional-statements.html" class="sidebar-link">Conditional Statements</a></li><li><a href="/csharp/equality-operator.html" class="sidebar-link">Equality Operator</a></li><li><a href="/csharp/equals-and-gethashcode.html" class="sidebar-link">Equals and GetHashCode</a></li><li><a href="/csharp/null-coalescing-operator.html" class="sidebar-link">Null-Coalescing Operator</a></li><li><a href="/csharp/null-conditional-operators.html" class="sidebar-link">Null-conditional Operators</a></li><li><a href="/csharp/nameof-operator.html" class="sidebar-link">nameof Operator</a></li><li><a href="/csharp/verbatim-strings.html" class="sidebar-link">Verbatim Strings</a></li><li><a href="/csharp/common-string-operations.html" class="sidebar-link">Common String Operations</a></li><li><a href="/csharp/string-format.html" class="sidebar-link">String.Format</a></li><li><a href="/csharp/string-concatenate.html" class="sidebar-link">String Concatenate</a></li><li><a href="/csharp/string-manipulation.html" class="sidebar-link">String Manipulation</a></li><li><a href="/csharp/string-interpolation.html" class="sidebar-link">String Interpolation</a></li><li><a href="/csharp/string-escape-sequences.html" class="sidebar-link">String Escape Sequences</a></li><li><a href="/csharp/stringbuilder.html" class="sidebar-link">StringBuilder</a></li><li><a href="/csharp/regex-parsing.html" class="sidebar-link">Regex Parsing</a></li><li><a href="/csharp/datetime-methods.html" class="sidebar-link">DateTime Methods</a></li><li><a href="/csharp/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/csharp/o-n-algorithm-for-circular-rotation-of-an-array.html" class="sidebar-link">O(n) Algorithm for circular rotation of an array</a></li><li><a href="/csharp/enum.html" class="sidebar-link">Enum</a></li><li><a href="/csharp/tuples.html" class="sidebar-link">Tuples</a></li><li><a href="/csharp/guid.html" class="sidebar-link">Guid</a></li><li><a href="/csharp/biginteger.html" class="sidebar-link">BigInteger</a></li><li><a href="/csharp/collection-initializers.html" class="sidebar-link">Collection Initializers</a></li><li><a href="/csharp/an-overview-of-c-collections.html" class="sidebar-link">An overview of c# collections</a></li><li><a href="/csharp/looping.html" class="sidebar-link">Looping</a></li><li><a href="/csharp/iterators.html" class="sidebar-link">Iterators</a></li><li><a href="/csharp/ienumerable.html" class="sidebar-link">IEnumerable</a></li><li><a href="/csharp/value-type-vs-reference-type.html" class="sidebar-link">Value type vs Reference type</a></li><li><a href="/csharp/built-in-types.html" class="sidebar-link">Built-in Types</a></li><li><a href="/csharp/aliases-of-built-in-types.html" class="sidebar-link">Aliases of built-in types</a></li><li><a href="/csharp/anonymous-types.html" class="sidebar-link">Anonymous types</a></li><li><a href="/csharp/dynamic-type.html" class="sidebar-link">Dynamic type</a></li><li><a href="/csharp/type-conversion.html" class="sidebar-link">Type Conversion</a></li><li><a href="/csharp/casting.html" class="sidebar-link">Casting</a></li><li><a href="/csharp/nullable-types.html" class="sidebar-link">Nullable types</a></li><li><a href="/csharp/constructors-and-finalizers.html" class="sidebar-link">Constructors and Finalizers</a></li><li><a href="/csharp/access-modifiers.html" class="sidebar-link">Access Modifiers</a></li><li><a href="/csharp/interfaces.html" class="sidebar-link">Interfaces</a></li><li><a href="/csharp/static-classes.html" class="sidebar-link">Static Classes</a></li><li><a href="/csharp/singleton-implementation.html" class="sidebar-link">Singleton Implementation</a></li><li><a href="/csharp/dependency-injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/csharp/partial-class-and-methods.html" class="sidebar-link">Partial class and methods</a></li><li><a href="/csharp/object-initializers.html" class="sidebar-link">Object initializers</a></li><li><a href="/csharp/methods.html" class="sidebar-link">Methods</a></li><li><a href="/csharp/extension-methods.html" class="sidebar-link">Extension Methods</a></li><li><a href="/csharp/named-arguments.html" class="sidebar-link">Named Arguments</a></li><li><a href="/csharp/named-and-optional-arguments.html" class="sidebar-link">Named and Optional Arguments</a></li><li><a href="/csharp/data-annotation.html" class="sidebar-link">Data Annotation</a></li><li><a href="/csharp/keywords.html" class="sidebar-link">Keywords</a></li><li><a href="/csharp/object-oriented-programming-in-c.html" class="sidebar-link">Object Oriented Programming In C#</a></li><li><a href="/csharp/recursion.html" class="sidebar-link">Recursion</a></li><li><a href="/csharp/naming-conventions.html" class="sidebar-link">Naming Conventions</a></li><li><a href="/csharp/xml-documentation-comments.html" class="sidebar-link">XML Documentation Comments</a></li><li><a href="/csharp/comments-and-regions.html" class="sidebar-link">Comments and regions</a></li><li><a href="/csharp/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/csharp/generics.html" class="sidebar-link">Generics</a></li><li><a href="/csharp/using-statement.html" class="sidebar-link">Using Statement</a></li><li><a href="/csharp/using-directive.html" class="sidebar-link">Using Directive</a></li><li><a href="/csharp/idisposable-interface.html" class="sidebar-link">IDisposable interface</a></li><li><a href="/csharp/reflection.html" class="sidebar-link">Reflection</a></li><li><a href="/csharp/iqueryable-interface.html" class="sidebar-link">IQueryable interface</a></li><li><a href="/csharp/linq-to-objects.html" class="sidebar-link">Linq to Objects</a></li><li><a href="/csharp/linq-queries.html" class="sidebar-link">LINQ Queries</a></li><li><a href="/csharp/linq-to-xml.html" class="sidebar-link">LINQ to XML</a></li><li><a href="/csharp/parallel-linq-plinq.html" class="sidebar-link">Parallel LINQ (PLINQ)</a></li><li><a href="/csharp/xmldocument-and-the-system-xml-namespace.html" class="sidebar-link">XmlDocument and the System.Xml namespace</a></li><li><a href="/csharp/xdocument-and-the-system-xml-linq-namespace.html" class="sidebar-link">XDocument and the System.Xml.Linq namespace</a></li><li><a href="/csharp/c-7-0-features.html" class="sidebar-link">C# 7.0 Features</a></li><li><a href="/csharp/c-6-0-features.html" aria-current="page" class="active sidebar-link">C# 6.0 Features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#exception-filters" class="sidebar-link">Exception filters</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#string-interpolation" class="sidebar-link">String interpolation</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#auto-property-initializers" class="sidebar-link">Auto-property initializers</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#null-propagation" class="sidebar-link">Null propagation</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#expression-bodied-function-members" class="sidebar-link">Expression-bodied function members</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#operator-nameof" class="sidebar-link">Operator nameof</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#using-static-type" class="sidebar-link">Using static type</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#index-initializers" class="sidebar-link">Index initializers</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#improved-overload-resolution" class="sidebar-link">Improved overload resolution</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#await-in-catch-and-finally" class="sidebar-link">Await in catch and finally</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#minor-changes-and-bugfixes" class="sidebar-link">Minor changes and bugfixes</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#using-an-extension-method-for-collection-initialization" class="sidebar-link">Using an extension method for collection initialization</a></li><li class="sidebar-sub-header"><a href="/csharp/c-6-0-features.html#disable-warnings-enhancements" class="sidebar-link">Disable Warnings Enhancements</a></li></ul></li><li><a href="/csharp/c-5-0-features.html" class="sidebar-link">C# 5.0 Features</a></li><li><a href="/csharp/c-4-0-features.html" class="sidebar-link">C# 4.0 Features</a></li><li><a href="/csharp/c-3-0-features.html" class="sidebar-link">C# 3.0 Features</a></li><li><a href="/csharp/exception-handling.html" class="sidebar-link">Exception Handling</a></li><li><a href="/csharp/nullreferenceexception.html" class="sidebar-link">NullReferenceException</a></li><li><a href="/csharp/handling-formatexception-when-converting-string-to-other-types.html" class="sidebar-link">Handling FormatException when converting string to other types</a></li><li><a href="/csharp/read-understand-stacktraces.html" class="sidebar-link">Read &amp; Understand Stacktraces</a></li><li><a href="/csharp/diagnostics.html" class="sidebar-link">Diagnostics</a></li><li><a href="/csharp/overflow.html" class="sidebar-link">Overflow</a></li><li><a href="/csharp/getting-started-json-with-c.html" class="sidebar-link">Getting Started: Json with C#</a></li><li><a href="/csharp/using-json-net.html" class="sidebar-link">Using json.net</a></li><li><a href="/csharp/lambda-expressions.html" class="sidebar-link">Lambda Expressions</a></li><li><a href="/csharp/generic-lambda-query-builder.html" class="sidebar-link">Generic Lambda Query Builder</a></li><li><a href="/csharp/properties.html" class="sidebar-link">Properties</a></li><li><a href="/csharp/initializing-properties.html" class="sidebar-link">Initializing Properties</a></li><li><a href="/csharp/inotifypropertychanged-interface.html" class="sidebar-link">INotifyPropertyChanged interface</a></li><li><a href="/csharp/events.html" class="sidebar-link">Events</a></li><li><a href="/csharp/expression-trees.html" class="sidebar-link">Expression Trees</a></li><li><a href="/csharp/overload-resolution.html" class="sidebar-link">Overload Resolution</a></li><li><a href="/csharp/bindinglist-t.html" class="sidebar-link">BindingList</a></li><li><a href="/csharp/preprocessor-directives.html" class="sidebar-link">Preprocessor directives</a></li><li><a href="/csharp/structs.html" class="sidebar-link">Structs</a></li><li><a href="/csharp/attributes.html" class="sidebar-link">Attributes</a></li><li><a href="/csharp/delegates.html" class="sidebar-link">Delegates</a></li><li><a href="/csharp/file-and-stream-i-o.html" class="sidebar-link">File and Stream I/O</a></li><li><a href="/csharp/networking.html" class="sidebar-link">Networking</a></li><li><a href="/csharp/performing-http-requests.html" class="sidebar-link">Performing HTTP requests</a></li><li><a href="/csharp/reading-and-writing-zip-files.html" class="sidebar-link">Reading and writing .zip files</a></li><li><a href="/csharp/filesystemwatcher.html" class="sidebar-link">FileSystemWatcher</a></li><li><a href="/csharp/access-network-shared-folder-with-username-and-password.html" class="sidebar-link">Access network shared folder with username and password</a></li><li><a href="/csharp/asynchronous-socket.html" class="sidebar-link">Asynchronous Socket</a></li><li><a href="/csharp/action-filters.html" class="sidebar-link">Action Filters</a></li><li><a href="/csharp/polymorphism.html" class="sidebar-link">Polymorphism</a></li><li><a href="/csharp/immutability.html" class="sidebar-link">Immutability</a></li><li><a href="/csharp/indexer.html" class="sidebar-link">Indexer</a></li><li><a href="/csharp/checked-and-unchecked.html" class="sidebar-link">Checked and Unchecked</a></li><li><a href="/csharp/stream.html" class="sidebar-link">Stream</a></li><li><a href="/csharp/timers.html" class="sidebar-link">Timers</a></li><li><a href="/csharp/stopwatches.html" class="sidebar-link">Stopwatches</a></li><li><a href="/csharp/threading.html" class="sidebar-link">Threading</a></li><li><a href="/csharp/async-await-backgroundworker-task-and-thread-examples.html" class="sidebar-link">Async/await, Backgroundworker, Task and Thread Examples</a></li><li><a href="/csharp/async-await.html" class="sidebar-link">Async-Await</a></li><li><a href="/csharp/synchronization-context-in-async-await.html" class="sidebar-link">Synchronization Context in Async-Await</a></li><li><a href="/csharp/backgroundworker.html" class="sidebar-link">BackgroundWorker</a></li><li><a href="/csharp/task-parallel-library.html" class="sidebar-link">Task Parallel Library</a></li><li><a href="/csharp/making-a-variable-thread-safe.html" class="sidebar-link">Making a variable thread safe</a></li><li><a href="/csharp/lock-statement.html" class="sidebar-link">Lock Statement</a></li><li><a href="/csharp/yield-keyword.html" class="sidebar-link">Yield Keyword</a></li><li><a href="/csharp/task-parallel-library-tpl-dataflow-constructs.html" class="sidebar-link">Task Parallel Library (TPL) Dataflow Constructs</a></li><li><a href="/csharp/functional-programming.html" class="sidebar-link">Functional Programming</a></li><li><a href="/csharp/func-delegates.html" class="sidebar-link">Func delegates</a></li><li><a href="/csharp/function-with-multiple-return-values.html" class="sidebar-link">Function with multiple return values</a></li><li><a href="/csharp/binary-serialization.html" class="sidebar-link">Binary Serialization</a></li><li><a href="/csharp/icloneable.html" class="sidebar-link">ICloneable</a></li><li><a href="/csharp/icomparable.html" class="sidebar-link">IComparable</a></li><li><a href="/csharp/accessing-databases.html" class="sidebar-link">Accessing Databases</a></li><li><a href="/csharp/using-sqlite-in-c.html" class="sidebar-link">Using SQLite in C#</a></li><li><a href="/csharp/caching.html" class="sidebar-link">Caching</a></li><li><a href="/csharp/code-contracts.html" class="sidebar-link">Code Contracts</a></li><li><a href="/csharp/code-contracts-and-assertions.html" class="sidebar-link">Code Contracts and Assertions</a></li><li><a href="/csharp/structural-design-patterns.html" class="sidebar-link">Structural Design Patterns</a></li><li><a href="/csharp/creational-design-patterns.html" class="sidebar-link">Creational Design Patterns</a></li><li><a href="/csharp/implementing-decorator-design-pattern.html" class="sidebar-link">Implementing Decorator Design Pattern</a></li><li><a href="/csharp/implementing-flyweight-design-pattern.html" class="sidebar-link">Implementing Flyweight Design Pattern</a></li><li><a href="/csharp/system-management-automation.html" class="sidebar-link">System.Management.Automation</a></li><li><a href="/csharp/system-directoryservices-protocols-ldapconnection.html" class="sidebar-link">System.DirectoryServices.Protocols.LdapConnection</a></li><li><a href="/csharp/c-authentication-handler.html" class="sidebar-link">C# Authentication handler</a></li><li><a href="/csharp/pointers.html" class="sidebar-link">Pointers</a></li><li><a href="/csharp/pointers-unsafe-code.html" class="sidebar-link">Pointers &amp; Unsafe Code</a></li><li><a href="/csharp/how-to-use-c-structs-to-create-a-union-type-similar-to-c-unions.html" class="sidebar-link">How to use C# Structs to create a Union type  (Similar to C Unions)</a></li><li><a href="/csharp/reactive-extensions-rx.html" class="sidebar-link">Reactive Extensions (Rx)</a></li><li><a href="/csharp/assemblyinfo-cs-examples.html" class="sidebar-link">AssemblyInfo.cs Examples</a></li><li><a href="/csharp/creating-a-console-application-using-a-plain-text-editor-and-the-c-compiler-csc-exe.html" class="sidebar-link">Creating a Console Application using a Plain-Text Editor and the C# Compiler (csc.exe)</a></li><li><a href="/csharp/clscompliantattribute.html" class="sidebar-link">CLSCompliantAttribute</a></li><li><a href="/csharp/observablecollection-t.html" class="sidebar-link">ObservableCollection</a></li><li><a href="/csharp/hash-functions.html" class="sidebar-link">Hash Functions</a></li><li><a href="/csharp/generating-random-numbers-in-c.html" class="sidebar-link">Generating Random Numbers in C#</a></li><li><a href="/csharp/cryptography-system-security-cryptography.html" class="sidebar-link">Cryptography (System.Security.Cryptography)</a></li><li><a href="/csharp/asp-net-identity.html" class="sidebar-link">ASP.NET Identity</a></li><li><a href="/csharp/unsafe-code-in-net.html" class="sidebar-link">Unsafe Code in .NET</a></li><li><a href="/csharp/c-script.html" class="sidebar-link">C# Script</a></li><li><a href="/csharp/runtime-compile.html" class="sidebar-link">Runtime Compile</a></li><li><a href="/csharp/interoperability.html" class="sidebar-link">Interoperability</a></li><li><a href="/csharp/net-compiler-platform-roslyn.html" class="sidebar-link">.NET Compiler Platform (Roslyn)</a></li><li><a href="/csharp/ilgenerator.html" class="sidebar-link">ILGenerator</a></li><li><a href="/csharp/t4-code-generation.html" class="sidebar-link">T4 Code Generation</a></li><li><a href="/csharp/creating-own-messagebox-in-windows-form-application.html" class="sidebar-link">Creating Own MessageBox in Windows Form Application</a></li><li><a href="/csharp/including-font-resources.html" class="sidebar-link">Including Font Resources</a></li><li><a href="/csharp/import-google-contacts.html" class="sidebar-link">Import Google Contacts</a></li><li><a href="/csharp/garbage-collector-in-net.html" class="sidebar-link">Garbage Collector in .Net</a></li><li><a href="/csharp/microsoft-exchange-webservices.html" class="sidebar-link">Microsoft.Exchange.WebServices</a></li><li><a href="/csharp/windows-communication-foundation.html" class="sidebar-link">Windows Communication Foundation</a></li><li><a href="/csharp/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="c-6-0-features"><a href="#c-6-0-features" class="header-anchor">#</a> C# 6.0 Features</h1> <p>This sixth iteration of the C# language is provided by the Roslyn compiler.  This compiler came out with version 4.6 of the .NET Framework, however it can generate code in a backward compatible manner to allow targeting earlier framework versions.  C# version 6 code can be compiled in a fully backwards compatible manner to .NET 4.0.  It can also be used for earlier frameworks, however some features that require additional framework support may not function correctly.</p> <h2 id="exception-filters"><a href="#exception-filters" class="header-anchor">#</a> Exception filters</h2> <p><a href="https://github.com/dotnet/roslyn/wiki/New-Language-Features-in-C%23-6#exception-filters" target="_blank" rel="noopener noreferrer">Exception filters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> give developers the ability to add a condition (in the form of a <code>boolean</code> expression) to a <a href="http://stackoverflow.com/documentation/c%23/26/keywords/148/try-catch-finally-throw" target="_blank" rel="noopener noreferrer">catch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> block, allowing the <code>catch</code> to execute only if the condition evaluates to <code>true</code>.</p> <p>Exception filters allow the propagation of debug information in the original exception, where as using an <code>if</code> statement inside a <code>catch</code> block and re-throwing the exception stops the propagation of debug information in the original exception. With exception filters, the exception continues to propagate upwards in the call stack <strong>unless</strong> the condition is met. As a result, exception filters make the debugging experience much easier. Instead of stopping on the <code>throw</code> statement, the debugger will stop on the statement throwing the exception, with the current state and all local variables preserved. Crash dumps are affected in a similar way.</p> <blockquote></blockquote> <p>Exception filters have been supported by the <a href="https://msdn.microsoft.com/en-us/library/8bs2ecf4(v=vs.110).aspx" target="_blank" rel="noopener noreferrer"><strong>CLR</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> since the beginning and they've been accessible from VB.NET and F# for over a decade by exposing a part of the CLR's exception handling model. Only after the release of C# 6.0 has the functionality also been available for C# developers.</p> <h3 id="using-exception-filters"><a href="#using-exception-filters" class="header-anchor">#</a> Using exception filters</h3> <p>Exception filters are utilized by appending a <code>when</code> clause to the <code>catch</code> expression. It is possible to use any expression returning a <code>bool</code> in a <code>when</code> clause (except <a href="http://stackoverflow.com/documentation/c%23/26/keywords/5993/async-await" target="_blank" rel="noopener noreferrer">await<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). The declared Exception variable <code>ex</code> is accessible from within the <code>when</code> clause:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> SqlErrorToIgnore <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token function">DoSQLOperations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SqlException</span> ex<span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span>Number <span class="token operator">!=</span> SqlErrorToIgnore<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;An error occurred accessing the database&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Multiple <code>catch</code> blocks with <code>when</code> clauses may be combined. The first <code>when</code> clause returning <code>true</code> will cause the exception to be caught. Its <code>catch</code> block will be entered, while the other <code>catch</code> clauses will be ignored (their <code>when</code> clauses won't be evaluated). For example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">try</span>
<span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>someCondition<span class="token punctuation">)</span> <span class="token comment">//If someCondition evaluates to true,</span>
                                          <span class="token comment">//the rest of the catches are ignored.</span>
<span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NotImplementedException</span> ex<span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token punctuation">(</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//someMethod() will only run if</span>
                                                       <span class="token comment">//someCondition evaluates to false</span>
<span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token comment">// If both when clauses evaluate to false</span>
<span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

</code></pre></div><h3 id="risky-when-clause"><a href="#risky-when-clause" class="header-anchor">#</a> Risky when clause</h3> <blockquote></blockquote> <p><strong>Caution</strong>
It can be risky to use exception filters: when an <code>Exception</code> is thrown from within the <code>when</code> clause, the <code>Exception</code> from the <code>when</code> clause is ignored and is treated as <code>false</code>. This approach allows developers to write <code>when</code> clause without taking care of invalid cases.</p> <p>The following example illustrates such a scenario:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token function">DoSomethingThatMightFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>a <span class="token operator">/</span> b <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// This block is never reached because a / b throws an ignored</span>
        <span class="token comment">// DivideByZeroException which is treated as false.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// This block is reached since the DivideByZeroException in the </span>
        <span class="token comment">// previous when clause is ignored.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoSomethingThatMightFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// This will always throw an ArgumentNullException.</span>
    Type<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p><a href="https://dotnetfiddle.net/Iex6DP" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Note that exception filters avoid the confusing line number problems associated with using <code>throw</code> when failing code is within the same function. For example in this case the line number is reported as 6 instead of 3:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token number">1</span><span class="token punctuation">.</span> <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">2</span><span class="token punctuation">.</span> <span class="token keyword">try</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token punctuation">.</span>     <span class="token class-name"><span class="token keyword">int</span></span> c <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
<span class="token number">4</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
<span class="token number">5</span><span class="token punctuation">.</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">6</span><span class="token punctuation">.</span>     <span class="token keyword">throw</span><span class="token punctuation">;</span>
<span class="token number">7</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

</code></pre></div><p>The exception line number is reported as 6 because the error was caught and re-thrown with the <code>throw</code> statement on line 6.</p> <p>The same does not happen with exception filters:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token number">1</span><span class="token punctuation">.</span> <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">2</span><span class="token punctuation">.</span> <span class="token keyword">try</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token punctuation">.</span>     <span class="token class-name"><span class="token keyword">int</span></span> c <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
<span class="token number">4</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
<span class="token number">5</span><span class="token punctuation">.</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>a <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">6</span><span class="token punctuation">.</span>     <span class="token keyword">throw</span><span class="token punctuation">;</span>
<span class="token number">7</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

</code></pre></div><p>In this example <code>a</code> is 0 then <code>catch</code> clause is ignored but 3 is reported as line number. This is because they <strong>do not unwind the stack</strong>. More specifically, the exception <strong>is not caught</strong> on line 5 because <code>a</code> in fact does equal <code>0</code> and thus there is no opportunity for the exception to be re-thrown on line 6 because line 6 does not execute.</p> <h3 id="logging-as-a-side-effect"><a href="#logging-as-a-side-effect" class="header-anchor">#</a> Logging as a side effect</h3> <p>Method calls in the condition can cause side effects, so exception filters can be used to run code on exceptions without catching them. A common example that takes advantage of this is a <code>Log</code> method that always returns <code>false</code>. This allows tracing log information while debugging without the need to re-throw the exception.</p> <blockquote></blockquote> <p><strong>Be aware that</strong> while this seems to be a comfortable way of logging, it can be risky, especially if 3rd party logging assemblies are used. These might throw exceptions while logging in non-obvious situations that may not be detected easily (see <strong>Risky <code>when(...)</code> clause</strong> above).</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token function">DoSomethingThatMightFail</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token keyword">when</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">Log</span><span class="token punctuation">(</span>ex<span class="token punctuation">,</span> <span class="token string">&quot;An error occurred&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// This catch block will never be reached</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>

<span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> message<span class="token punctuation">,</span> <span class="token keyword">params</span> <span class="token class-name"><span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://dotnetfiddle.net/pqPc7B" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The common approach in previous versions of C# was to log and re-throw the exception.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token function">DoSomethingThatMightFail</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
     <span class="token function">Log</span><span class="token punctuation">(</span>ex<span class="token punctuation">,</span> <span class="token string">&quot;An error occurred&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">throw</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>

<span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> message<span class="token punctuation">,</span> <span class="token keyword">params</span> <span class="token class-name"><span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p><a href="https://dotnetfiddle.net/kEWLue" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="the-finally-block"><a href="#the-finally-block" class="header-anchor">#</a> The <code>finally</code> block</h3> <p>The <a href="https://stackoverflow.com/documentation/c%23/40/exception-handling/172/finally-block" target="_blank" rel="noopener noreferrer"><code>finally</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> block executes every time whether the exception is thrown or not. One subtlety with expressions in <code>when</code> is exception filters are executed further up the stack <strong>before</strong> entering the inner <code>finally</code> blocks. This can cause unexpected results and behaviors when code attempts to modify global state (like the current thread's user or culture) and set it back in a <code>finally</code> block.</p> <h3 id="example-finally-block"><a href="#example-finally-block" class="header-anchor">#</a> Example: <code>finally</code> block</h3> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">bool</span></span> Flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token function">SomeOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token punctuation">(</span><span class="token function">EvaluatesTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Catch&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Outer Finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">EvaluatesTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;EvaluatesTo: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Flag</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SomeOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        Flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span>
    <span class="token punctuation">{</span>
        Flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Inner Finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Produced Output:</p> <blockquote></blockquote> <p>Start<br>
EvaluatesTo: True<br>
Inner Finally<br>
Catch<br>
Outer Finally</p> <p><a href="https://ideone.com/gxfBA8" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>In the example above, if the method <code>SomeOperation</code> does not wish to &quot;leak&quot; the global state changes to caller's <code>when</code> clauses, it should also contain a <code>catch</code> block to modify the state. For example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SomeOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        Flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span>
    <span class="token punctuation">{</span>
       Flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
       <span class="token keyword">throw</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span>
    <span class="token punctuation">{</span>
        Flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Inner Finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>It is also common to see <a href="https://stackoverflow.com/documentation/c%23/1795/idisposable-interface" target="_blank" rel="noopener noreferrer"><code>IDisposable</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> helper classes leveraging the semantics of <a href="http://stackoverflow.com/documentation/c%23/26/keywords/5062/using" target="_blank" rel="noopener noreferrer">using<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> blocks to achieve the same goal, as <code>IDisposable.Dispose</code> will always be called before an exception called within a <code>using</code> block starts bubbling up the stack.</p> <h2 id="string-interpolation"><a href="#string-interpolation" class="header-anchor">#</a> String interpolation</h2> <p>String interpolation allows the developer to combine <code>variables</code> and text to form a string.</p> <h3 id="basic-example"><a href="#basic-example" class="header-anchor">#</a> Basic Example</h3> <p>Two <code>int</code> variables are created: <code>foo</code> and <code>bar</code>.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">int</span></span> foo <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> bar <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">string</span></span> resultString <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;The foo is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">foo</span><span class="token punctuation">}</span></span><span class="token string">, and the bar is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">bar</span><span class="token punctuation">}</span></span><span class="token string">.&quot;</span></span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>resultString<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>Output</strong>:</p> <blockquote></blockquote> <p>The foo is 34, and the bar is 42.</p> <p><a href="https://ideone.com/bRFOaV" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Braces within strings can still be used, like this:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> foo <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> bar <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token comment">// String interpolation notation (new style)</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;The foo is **{{foo}}**, and the bar is **{{bar}}**.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This produces the following output:</p> <blockquote></blockquote> <p>The foo is {foo}, and the bar is {bar}.</p> <h3 id="using-interpolation-with-verbatim-string-literals"><a href="#using-interpolation-with-verbatim-string-literals" class="header-anchor">#</a> Using interpolation with verbatim string literals</h3> <p>Using <code>@</code> before the string will cause the string to be interpreted verbatim. So, e.g. Unicode characters or line breaks will stay exactly as they've been typed. However, this will not effect the expressions in an interpolated string as shown in the following example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$@&quot;In case it wasn't clear:
\u00B9
The foo
is **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">foo</span><span class="token punctuation">}</span></span><span class="token string">**,
and the bar
is **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">bar</span><span class="token punctuation">}</span></span><span class="token string">**.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Output:</p> <blockquote></blockquote> <p>In case it wasn't clear:<br>
\u00B9<br>
The foo<br>
is 34,<br>
and the bar<br>
is 42.</p> <p><a href="https://dotnetfiddle.net/FLs4Ae" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="expressions"><a href="#expressions" class="header-anchor">#</a> Expressions</h3> <p>With string interpolation, <strong>expressions</strong> within curly braces <code>{}</code> can also be evaluated. The result will be inserted at the corresponding location within the string. For example, to calculate the maximum of <code>foo</code> and <code>bar</code> and insert it, use <code>Math.Max</code> within the curly braces:<pre><code>Console.WriteLine($&quot;And the greater one is: **{ Math.Max(foo, bar) }**&quot;);</code></pre></p> <p>Output:</p> <blockquote></blockquote> <p>And the greater one is: 42</p> <p><strong>Note: Any leading or trailing whitespace (including space, tab and CRLF/newline) between the curly brace and the expression is completely ignored and not included in the output</strong></p> <p><a href="https://ideone.com/qY1Y4B" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>As another example, variables can be formatted as a currency:<pre><code>Console.WriteLine($&quot;Foo formatted as a currency to 4 decimal places: **{foo:c4}**&quot;);</code></pre></p> <p>Output:</p> <blockquote></blockquote> <p>Foo formatted as a currency to 4 decimal places: $34.0000</p> <p><a href="https://ideone.com/CPB8UJ" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Or they can be formatted as dates:<pre><code>Console.WriteLine($&quot;Today is: **{DateTime.Today:dddd, MMMM dd - yyyy}**&quot;);</code></pre></p> <p>Output:</p> <blockquote></blockquote> <p>Today is: Monday, July, 20 - 2015</p> <p><a href="https://ideone.com/PkjA6k" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Statements with a <a href="https://msdn.microsoft.com/en-us/library/ty67wk28.aspx" target="_blank" rel="noopener noreferrer">Conditional (Ternary) Operator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can also be evaluated within the interpolation. However, these must be wrapped in parentheses, since the colon is otherwise used to indicate formatting as shown above:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token punctuation">(</span>foo <span class="token operator">&gt;</span> bar <span class="token punctuation">?</span> <span class="token string">&quot;Foo is larger than bar!&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;Bar is larger than foo!&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Output:</p> <blockquote></blockquote> <p>Bar is larger than foo!</p> <p><a href="https://ideone.com/sX6tO3" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Conditional expressions and format specifiers can be mixed:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Environment: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token punctuation">(</span>Environment<span class="token punctuation">.</span>Is64BitProcess <span class="token punctuation">?</span> <span class="token number">64</span> <span class="token punctuation">:</span> <span class="token number">32</span><span class="token punctuation">)</span></span><span class="token format-string"><span class="token punctuation">:</span>00'-bit'</span><span class="token punctuation">}</span></span><span class="token string"> process&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Output:</p> <blockquote></blockquote> <p>Environment: 32-bit process</p> <h3 id="escape-sequences"><a href="#escape-sequences" class="header-anchor">#</a> Escape sequences</h3> <p>Escaping backslash (<code>\</code>) and quote (<code>&quot;</code>) characters works exactly the same in interpolated strings as in non-interpolated strings, for both verbatim and non-verbatim string literals:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Foo is: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">foo</span><span class="token punctuation">}</span></span><span class="token string">**. In a non-verbatim string, we need to escape \&quot; and \\ with backslashes.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$@&quot;Foo is: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">foo</span><span class="token punctuation">}</span></span><span class="token string">**. In a verbatim string, we need to escape &quot;</span></span>&quot; with an <span class="token class-name">extra</span> quote<span class="token punctuation">,</span> but we don't need to escape \&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Output:</p> <blockquote></blockquote> <p>Foo is 34. In a non-verbatim string, we need to escape &quot; and \ with backslashes.<br>
Foo is 34. In a verbatim string, we need to escape &quot; with an extra quote, but we don't need to escape \</p> <p>To include a curly brace <code>{</code> or <code>}</code> in an interpolated string, use two curly braces <code>{{</code> or <code>}}</code>:<pre><code>$&quot; is: **{foo}**&quot;</code></pre></p> <p>Output:</p> <blockquote></blockquote> <p>{foo} is: 34</p> <p><a href="https://dotnetfiddle.net/BuudHP" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="formattablestring-type"><a href="#formattablestring-type" class="header-anchor">#</a> FormattableString type</h3> <p>The type of a <code>$&quot;...&quot;</code> string interpolation expression <a href="http://stackoverflow.com/questions/38119074" target="_blank" rel="noopener noreferrer">is not always<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> a simple string. The compiler decides which type to assign depending on the context:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;hello, **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
<span class="token class-name">System<span class="token punctuation">.</span>FormattableString</span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
<span class="token class-name">System<span class="token punctuation">.</span>IFormattable</span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
</code></pre></div><p>This is also the order of type preference when the compiler needs to choose which overloaded method is going to be called.</p> <p>A <a href="https://msdn.microsoft.com/en-us/library/system.formattablestring(v=vs.110).aspx" target="_blank" rel="noopener noreferrer">new type<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <code>System.FormattableString</code>, represents a composite format string, along with the arguments to be formatted. Use this to write applications that handle the interpolation arguments specifically:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AddLogItem</span><span class="token punctuation">(</span><span class="token class-name">FormattableString</span> formattableString<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> arg <span class="token keyword">in</span> formattableString<span class="token punctuation">.</span><span class="token function">GetArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// do something to interpolation argument 'arg'</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// use the standard interpolation and the current culture info</span>
    <span class="token comment">// to get an ordinary String:</span>
    <span class="token class-name"><span class="token keyword">var</span></span> formatted <span class="token operator">=</span> formattableString<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Call the above method with:<pre><code>AddLogItem($&quot;The foo is **{foo}**, and the bar is **{bar}**.&quot;);</code></pre>
For example, one could choose not to incur the performance cost of formatting the string if the logging level was already going to filter out the log item.</p><hr><p></p> <h3 id="implicit-conversions"><a href="#implicit-conversions" class="header-anchor">#</a> Implicit conversions</h3> <p>There are implicit type conversions from an interpolated string:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Foo: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">foo</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
<span class="token class-name">System<span class="token punctuation">.</span>IFormattable</span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Foo: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">foo</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
</code></pre></div><p>You can also produce an <code>IFormattable</code> variable that allows you to convert the string with invariant context:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Bar: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">bar</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
<span class="token class-name">System<span class="token punctuation">.</span>FormattableString</span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Bar: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">bar</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
</code></pre></div><hr> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Bar: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">bar</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
<span class="token class-name">System<span class="token punctuation">.</span>FormattableString</span> s <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Bar: **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">bar</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
</code></pre></div><h3 id="current-and-invariant-culture-methods"><a href="#current-and-invariant-culture-methods" class="header-anchor">#</a> Current and Invariant Culture Methods</h3> <p>If code analysis is turned on, interpolated strings will all produce warning <a href="https://msdn.microsoft.com/en-us/library/ms182190.aspx" target="_blank" rel="noopener noreferrer">CA1305<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (Specify <code>IFormatProvider</code>).
A static method may be used to apply current culture.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Culture</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Current</span><span class="token punctuation">(</span><span class="token class-name">FormattableString</span> formattableString<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> formattableString<span class="token punctuation">?.</span><span class="token function">ToString</span><span class="token punctuation">(</span>CultureInfo<span class="token punctuation">.</span>CurrentCulture<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Invariant</span><span class="token punctuation">(</span><span class="token class-name">FormattableString</span> formattableString<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> formattableString<span class="token punctuation">?.</span><span class="token function">ToString</span><span class="token punctuation">(</span>CultureInfo<span class="token punctuation">.</span>InvariantCulture<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Then, to produce a correct string for the current culture, just use the expression:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Culture<span class="token punctuation">.</span><span class="token function">Current</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;interpolated **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">** string.&quot;</span></span><span class="token punctuation">)</span>
Culture<span class="token punctuation">.</span><span class="token function">Invariant</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;interpolated **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">** string.&quot;</span></span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Note</strong>: <code>Current</code> and <code>Invariant</code> cannot be created as extension methods because, by default, the compiler assigns type <code>String</code> to <strong>interpolated string expression</strong> which causes the following code to fail to compile:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token interpolation-string"><span class="token string">$&quot;interpolated </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string"> string.&quot;</span></span><span class="token punctuation">.</span><span class="token function">Current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><code>FormattableString</code> class already contains <code>Invariant()</code> method, so the simplest way of switching to invariant culture is by relying on <code>using static</code>:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">System<span class="token punctuation">.</span>FormattableString</span><span class="token punctuation">;</span>

```cs
<span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">System<span class="token punctuation">.</span>FormattableString</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token class-name"><span class="token keyword">string</span></span> invariant <span class="token operator">=</span> <span class="token function">Invariant</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Now = **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">DateTime<span class="token punctuation">.</span>Now</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> current <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Now = **</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">DateTime<span class="token punctuation">.</span>Now</span><span class="token punctuation">}</span></span><span class="token string">**&quot;</span></span><span class="token punctuation">;</span>
</code></pre></div><p>string invariant = Invariant($&quot;Now = <strong>{DateTime.Now}</strong>&quot;);
string current = $&quot;Now = <strong>{DateTime.Now}</strong>&quot;;</p> <div class="language- extra-class"><pre class="language-text"><code>
&lt;hr&gt;

### Behind the scenes

Interpolated strings are just a syntactic sugar for `String.Format()`. The compiler ([Roslyn](https://github.com/dotnet/roslyn)) will turn it into a `String.Format` behind the scenes:

```cs
var text = $&quot;Hello {name + lastName}&quot;;

</code></pre></div><p>The above will be converted to something like this:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">string</span></span> text <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;Hello {0}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
    name <span class="token operator">+</span> lastName
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="string-interpolation-and-linq"><a href="#string-interpolation-and-linq" class="header-anchor">#</a> String Interpolation and Linq</h3> <p>It's possible to use interpolated strings in Linq statements to increase readability further.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> fooBar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">from</span> <span class="token class-name">DataRow</span> x <span class="token keyword">in</span> fooBarTable<span class="token punctuation">.</span>Rows
          <span class="token keyword">select</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;{0}{1}&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Can be re-written as:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> fooBar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">from</span> <span class="token class-name">DataRow</span> x <span class="token keyword">in</span> fooBarTable<span class="token punctuation">.</span>Rows
          <span class="token keyword">select</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">x<span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span></span><span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">x<span class="token punctuation">[</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="reusable-interpolated-strings"><a href="#reusable-interpolated-strings" class="header-anchor">#</a> Reusable Interpolated Strings</h3> <p>With <code>string.Format</code>, you can create reusable format strings:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> ErrorFormat <span class="token operator">=</span> <span class="token string">&quot;Exception caught:\r\n{0}&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

Logger<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span>ErrorFormat<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Interpolated strings, however, will not compile with placeholders referring to non-existent variables. The following will not compile:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> ErrorFormat <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Exception caught:\r\n</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">error</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
<span class="token comment">// CS0103: The name 'error' does not exist in the current context</span>

</code></pre></div><p>Instead, create a <code>Func&lt;&gt;</code> which consumes variables and returns a <code>String</code>:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Func<span class="token punctuation">&lt;</span>Exception<span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> FormatError <span class="token operator">=</span>
    error <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Exception caught:\r\n</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">error</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

Logger<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token function">FormatError</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="string-interpolation-and-localization"><a href="#string-interpolation-and-localization" class="header-anchor">#</a> String interpolation and localization</h3> <p>If you’re localizing your application you may wonder if it is possible to use string interpolation along with localization. Indeed, it would be nice to have the possibility to store in resource files <code>String</code>s like:<pre><code>&quot;My name is **{name} {middlename} {surname}**&quot;</code></pre>
instead of the much less readable:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token string">&quot;My name is {0} {1} {2}&quot;</span>

</code></pre></div><p><code>String</code> interpolation process occurs <strong>at compile time</strong>, unlike formatting string with <code>string.Format</code> which occurs <strong>at runtime</strong>. Expressions in an interpolated string must reference names in the current context and need to be stored in resource files. That means that if you want to use localization you have to do it like:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> FirstName <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// method using different resource file &quot;strings&quot;</span>
<span class="token comment">// for French (&quot;strings.fr.resx&quot;), German (&quot;strings.de.resx&quot;), </span>
<span class="token comment">// and English (&quot;strings.en.resx&quot;)</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowMyNameLocalized</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> middlename <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> surname <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// get localized string</span>
    <span class="token class-name"><span class="token keyword">var</span></span> localizedMyNameIs <span class="token operator">=</span> Properties<span class="token punctuation">.</span>strings<span class="token punctuation">.</span>Hello<span class="token punctuation">;</span>
    <span class="token comment">// insert spaces where necessary</span>
    name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">:</span> name <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    middlename <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>middlename<span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">:</span> middlename <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    surname <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">:</span> surname <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// display it</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">localizedMyNameIs</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">middlename</span><span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">surname</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// switch to French and greet John</span>
Thread<span class="token punctuation">.</span>CurrentThread<span class="token punctuation">.</span>CurrentUICulture <span class="token operator">=</span> CultureInfo<span class="token punctuation">.</span><span class="token function">GetCultureInfo</span><span class="token punctuation">(</span><span class="token string">&quot;fr-FR&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ShowMyNameLocalized</span><span class="token punctuation">(</span>FirstName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// switch to German and greet John</span>
Thread<span class="token punctuation">.</span>CurrentThread<span class="token punctuation">.</span>CurrentUICulture <span class="token operator">=</span> CultureInfo<span class="token punctuation">.</span><span class="token function">GetCultureInfo</span><span class="token punctuation">(</span><span class="token string">&quot;de-DE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ShowMyNameLocalized</span><span class="token punctuation">(</span>FirstName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// switch to US English and greet John</span>
Thread<span class="token punctuation">.</span>CurrentThread<span class="token punctuation">.</span>CurrentUICulture <span class="token operator">=</span> CultureInfo<span class="token punctuation">.</span><span class="token function">GetCultureInfo</span><span class="token punctuation">(</span><span class="token string">&quot;en-US&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ShowMyNameLocalized</span><span class="token punctuation">(</span>FirstName<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>If the resource strings for the languages used above are correctly stored in the individual resource files, you should get the following output:</p> <blockquote></blockquote> <p>Bonjour, mon nom est John<br>
Hallo, mein Name ist John<br>
Hello, my name is John<br></p> <p><strong>Note</strong> that this implies that the name follows the localized string in every language. If that is not the case, you need to add placeholders to the resource strings and modify the function above or you need to query the culture info in the function and provide a switch case statement containing the different cases.
For more details about resource files, see <a href="https://stackoverflow.com/a/1142840/1016343" target="_blank" rel="noopener noreferrer">How to use localization in C#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>It is a good practice to use a default fallback language most people will understand, in case a translation is not available. I suggest to use English as default fallback language.</p> <h3 id="recursive-interpolation"><a href="#recursive-interpolation" class="header-anchor">#</a> Recursive interpolation</h3> <p>Although not very useful, it is allowed to use an interpolated <code>string</code> recursively inside another's curly brackets:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;String has </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token interpolation-string"><span class="token string">$&quot;My class is called </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">nameof</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">.&quot;</span></span><span class="token punctuation">.</span>Length</span><span class="token punctuation">}</span></span><span class="token string"> chars:&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;My class is called </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">nameof</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Output:</p> <blockquote></blockquote> <p>String has 27 chars:</p> <blockquote></blockquote> <p>My class is called MyClass.</p> <h2 id="auto-property-initializers"><a href="#auto-property-initializers" class="header-anchor">#</a> Auto-property initializers</h2> <h3 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h3> <p>Properties can be initialized with the <code>=</code> operator after the closing <code>}</code>. The <code>Coordinate</code> class below shows the available options for initializing a property:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Coordinate</span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> X <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span> <span class="token comment">// get or set auto-property with initializer</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Y <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">89</span><span class="token punctuation">;</span>      <span class="token comment">// read-only auto-property with initializer              </span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="accessors-with-different-visibility"><a href="#accessors-with-different-visibility" class="header-anchor">#</a> Accessors With Different Visibility</h3> <p>You can initialize auto-properties that have different visibility on their accessors. Here’s an example with a protected setter:</p> <div class="language- extra-class"><pre class="language-text"><code>
   public string Name { get; protected set; } = &quot;Cheeze&quot;;

</code></pre></div><p>The accessor can also be <code>internal</code>, <code>internal protected</code>, or <code>private</code>.</p> <h3 id="read-only-properties"><a href="#read-only-properties" class="header-anchor">#</a> Read-Only Properties</h3> <p>In addition to flexibility with visibility, you can also initialize read-only auto-properties. Here’s an example:</p> <div class="language- extra-class"><pre class="language-text"><code>
   public List&lt;string&gt; Ingredients { get; } = 
        new List&lt;string&gt; { &quot;dough&quot;, &quot;sauce&quot;, &quot;cheese&quot; };

</code></pre></div><p>This example also shows how to initialize a property with a complex type. Also, auto-properties can’t be write-only, so that also precludes write-only initialization.</p> <h3 id="old-style-pre-c-6-0"><a href="#old-style-pre-c-6-0" class="header-anchor">#</a> Old style (pre C# 6.0)</h3> <p>Before C# 6, this required much more verbose code. We were using one extra variable called backing property for the property to give default value or to initialize the public property like below,</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Coordinate</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">int</span></span> _x <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> X <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _x<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{</span> _x <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span> _y <span class="token operator">=</span> <span class="token number">89</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Y <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _y<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span> _z<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Z <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _z<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">Coordinate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _z <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong><strong>Note:</strong> Before C# 6.0, you could still initialize read and write <a href="http://stackoverflow.com/documentation/c%23/49/properties/3365/auto-implemented-properties#t=201608062134378589394" target="_blank" rel="noopener noreferrer"><strong>auto implemented properties</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (properties with a getter and a setter) from within the constructor, but you could not initialize the property inline with its declaration</strong></p> <p><a href="http://ideone.com/2OgrPQ" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h3> <p>Initializers must evaluate to static expressions, just like field initializers. If you need to reference non-static members, you can either initialize properties in constructors like before, or use expression-bodied properties. Non-static expressions, like the one below (commented out), will generate a compiler error:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token comment">// public decimal X { get; set; } = InitMe();  // generates compiler error</span>

<span class="token return-type class-name"><span class="token keyword">decimal</span></span> <span class="token function">InitMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">4m</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

</code></pre></div><p>But static methods <strong>can</strong> be used to initialize auto-properties:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Length <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Width <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Area <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">CalculateArea</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">CalculateArea</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This method can also be applied to properties with different level of accessors:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">short</span></span> Type <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>

</code></pre></div><p>The auto-property initializer allows assignment of properties directly within their declaration. For read-only properties, it takes care of all the requirements required to ensure the property is immutable. Consider, for example, the <code>FingerPrint</code> class in the following example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FingerPrint</span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> TimeStamp <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> User <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span>
    System<span class="token punctuation">.</span>Security<span class="token punctuation">.</span>Principal<span class="token punctuation">.</span>WindowsPrincipal<span class="token punctuation">.</span>Current<span class="token punctuation">.</span>Identity<span class="token punctuation">.</span>Name<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Process <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span>
    System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Process<span class="token punctuation">.</span><span class="token function">GetCurrentProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ProcessName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p><a href="http://ideone.com/qjDRmx" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="cautionary-notes"><a href="#cautionary-notes" class="header-anchor">#</a> Cautionary notes</h3> <p>Take care to not confuse auto-property or field initializers with similar-looking <a href="http://stackoverflow.com/documentation/c%23/24/c-sharp-6-0-features/44/expression-bodied-function-members" target="_blank" rel="noopener noreferrer">expression-body methods<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which make use of <code>=&gt;</code> as opposed to <code>=</code>, and fields which do not include <code>{ get; }</code>.</p> <p>For example, each of the following declarations are different.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserGroupDto</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Read-only auto-property with initializer:       </span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> Users1 <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Read-write field with initializer:</span>
    <span class="token keyword">public</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> Users2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Read-only auto-property with expression body:</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> Users3 <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Missing <code>{ get; }</code> in the property declaration results in a public field. Both read-only auto-property <code>Users1</code> and read-write field <code>Users2</code> are initialized only once, but a public field allows changing collection instance from outside the class, which is usually undesirable. Changing a read-only auto-property with expression body to read-only property with initializer requires not only removing <code>&gt;</code> from <code>=&gt;</code>, but adding <code>{ get; }</code>.</p> <p>The different symbol (<code>=&gt;</code> instead of <code>=</code>) in <code>Users3</code> results in each access to the property returning a new instance of the <code>HashSet&lt;UserDto&gt;</code> which, while valid C# (from the compiler's point of view) is unlikely to be the desired behavior when used for a collection member.</p> <p>The above code is equivalent to:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserGroupDto</span>
<span class="token punctuation">{</span>
    <span class="token comment">// This is a property returning the same instance</span>
    <span class="token comment">// which was created when the UserGroupDto was instantiated.</span>
    <span class="token keyword">private</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> _users1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> Users1 <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _users1<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

    <span class="token comment">// This is a field returning the same instance</span>
    <span class="token comment">// which was created when the UserGroupDto was instantiated.</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> Users2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This is a property which returns a new HashSet&lt;UserDto&gt; as</span>
    <span class="token comment">// an ICollection&lt;UserDto&gt; on each call to it.</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> Users3 <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="null-propagation"><a href="#null-propagation" class="header-anchor">#</a> Null propagation</h2> <p>The <code>?.</code> operator and <code>?[...]</code> operator are called the <a href="https://msdn.microsoft.com/en-us/library/dn986595.aspx" target="_blank" rel="noopener noreferrer">null-conditional operator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It is also sometimes referred to by other names such as the <a href="https://en.wikipedia.org/wiki/Safe_navigation_operator" target="_blank" rel="noopener noreferrer">safe navigation operator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>This is useful, because if the <code>.</code> (member accessor) operator is applied to an expression that evaluates to <code>null</code>, the program will throw a <code>NullReferenceException</code>.  If the developer instead uses the <code>?.</code> (null-conditional) operator, the expression will evaluate to null instead of throwing an exception.</p> <p>Note that if the <code>?.</code> operator is used and the expression is non-null, <code>?.</code> and <code>.</code> are equivalent.</p> <h3 id="basics"><a href="#basics" class="header-anchor">#</a> Basics</h3> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> teacherName <span class="token operator">=</span> classroom<span class="token punctuation">.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">;</span>
<span class="token comment">// throws NullReferenceException if GetTeacher() returns null</span>

</code></pre></div><p><a href="http://ideone.com/p8OGBB" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>If the <code>classroom</code> does not have a teacher, <code>GetTeacher()</code> may return <code>null</code>. When it is <code>null</code> and the <code>Name</code> property is accessed, a <code>NullReferenceException</code> will be thrown.</p> <p>If we modify this statement to use the <code>?.</code> syntax, the result of the entire expression will be <code>null</code>:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> teacherName <span class="token operator">=</span> classroom<span class="token punctuation">.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>Name<span class="token punctuation">;</span>
<span class="token comment">// teacherName is null if GetTeacher() returns null</span>

</code></pre></div><p><a href="http://ideone.com/3aqGlE" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Subsequently, if <code>classroom</code> could also be <code>null</code>, we could also write this statement as:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> teacherName <span class="token operator">=</span> classroom<span class="token punctuation">?.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>Name<span class="token punctuation">;</span>
<span class="token comment">// teacherName is null if GetTeacher() returns null OR classroom is null</span>

</code></pre></div><p><a href="http://ideone.com/voljZh" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>This is an example of short-circuiting: When any conditional access operation using the null-conditional operator evaluates to null, the entire expression evaluates to null immediately, without processing the rest of the chain.</p> <p>When the terminal member of an expression containing the null-conditional operator is of a value type, the expression evaluates to a <code>Nullable&lt;T&gt;</code> of that type and so cannot be used as a direct replacement for the expression without <code>?.</code>.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">bool</span></span> hasCertification <span class="token operator">=</span> classroom<span class="token punctuation">.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>HasCertification<span class="token punctuation">;</span>
<span class="token comment">// compiles without error but may throw a NullReferenceException at runtime</span>

<span class="token class-name"><span class="token keyword">bool</span></span> hasCertification <span class="token operator">=</span> classroom<span class="token punctuation">?.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>HasCertification<span class="token punctuation">;</span>
<span class="token comment">// compile time error: implicit conversion from bool? to bool not allowed</span>

<span class="token class-name"><span class="token keyword">bool</span><span class="token punctuation">?</span></span> hasCertification <span class="token operator">=</span> classroom<span class="token punctuation">?.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>HasCertification<span class="token punctuation">;</span>
<span class="token comment">// works just fine, hasCertification will be null if any part of the chain is null</span>

<span class="token class-name"><span class="token keyword">bool</span></span> hasCertification <span class="token operator">=</span> classroom<span class="token punctuation">?.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>HasCertification<span class="token punctuation">.</span><span class="token function">GetValueOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// must extract value from nullable to assign to a value type variable</span>

</code></pre></div><h3 id="use-with-the-null-coalescing-operator"><a href="#use-with-the-null-coalescing-operator" class="header-anchor">#</a> Use with the Null-Coalescing Operator (??)</h3> <p>You can combine the null-conditional operator with the <a href="https://msdn.microsoft.com/en-us/library/ms173224.aspx" target="_blank" rel="noopener noreferrer">Null-coalescing Operator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (<code>??</code>) to return a default value if the expression resolves to <code>null</code>. Using our example above:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> teacherName <span class="token operator">=</span> classroom<span class="token punctuation">?.</span><span class="token function">GetTeacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>Name <span class="token operator">??</span> <span class="token string">&quot;No Name&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// teacherName will be &quot;No Name&quot; when GetTeacher() </span>
<span class="token comment">// returns null OR classroom is null OR Name is null</span>

</code></pre></div><h3 id="use-with-indexers"><a href="#use-with-indexers" class="header-anchor">#</a> Use with Indexers</h3> <p>The null-conditional operator can be used with <a href="https://msdn.microsoft.com/en-us/library/6x16t2tx.aspx" target="_blank" rel="noopener noreferrer">indexers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> firstStudentName <span class="token operator">=</span> classroom<span class="token punctuation">?.</span>Students<span class="token punctuation">?</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">?.</span>Name<span class="token punctuation">;</span>

</code></pre></div><p>In the above example:</p> <ul><li>The first <code>?.</code> ensures that <code>classroom</code> is not <code>null</code>.</li> <li>The second <code>?</code> ensures that the entire <code>Students</code> collection is not <code>null</code>.</li> <li>The third <code>?.</code> after the indexer ensures that the <code>[0]</code> indexer did not return a <code>null</code> object. It should be noted that this operation can <strong>still</strong> throw an <code>IndexOutOfRangeException</code>.</li></ul> <h3 id="use-with-void-functions"><a href="#use-with-void-functions" class="header-anchor">#</a> Use with void Functions</h3> <p>Null-conditional operator can also be used with <code>void</code> functions. However in this case, the statement will not evaluate to <code>null</code>. It will just prevent a <code>NullReferenceException</code>.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
list<span class="token punctuation">?.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Does not evaluate to null</span>

</code></pre></div><h3 id="use-with-event-invocation"><a href="#use-with-event-invocation" class="header-anchor">#</a> Use with Event Invocation</h3> <p>Assuming the following event definition:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">private</span> <span class="token keyword">event</span> <span class="token class-name">EventArgs</span> OnCompleted<span class="token punctuation">;</span>

</code></pre></div><p>When invoking an event, traditionally, it is best practice to check if the event is <code>null</code> in case no subscribers are present:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> handler <span class="token operator">=</span> OnCompleted<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span>EventArgs<span class="token punctuation">.</span>Empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Since the null-conditional operator has been introduced, the invocation can be reduced to a single line:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>OnCompleted<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>EventArgs<span class="token punctuation">.</span>Empty<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="limitations"><a href="#limitations" class="header-anchor">#</a> Limitations</h3> <p>Null-conditional operator produces rvalue, not lvalue, that is, it cannot be used for property assignment, event subscription etc. For example, the following code will not work:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token comment">// Error: The left-hand side of an assignment must be a variable, property or indexer</span>
Process<span class="token punctuation">.</span><span class="token function">GetProcessById</span><span class="token punctuation">(</span><span class="token number">1337</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>EnableRaisingEvents <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">// Error: The event can only appear on the left hand side of += or -=</span>
Process<span class="token punctuation">.</span><span class="token function">GetProcessById</span><span class="token punctuation">(</span><span class="token number">1337</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>Exited <span class="token operator">+=</span> OnProcessExited<span class="token punctuation">;</span>

</code></pre></div><h3 id="gotchas"><a href="#gotchas" class="header-anchor">#</a> Gotchas</h3> <p>Note that:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> nameLength <span class="token operator">=</span> person<span class="token punctuation">?.</span>Name<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>    <span class="token comment">// safe if 'person' is null</span>

</code></pre></div><p>is <strong>not</strong> the same as:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> nameLength <span class="token operator">=</span> <span class="token punctuation">(</span>person<span class="token punctuation">?.</span>Name<span class="token punctuation">)</span><span class="token punctuation">.</span>Length<span class="token punctuation">;</span>  <span class="token comment">// avoid this</span>

</code></pre></div><p>because the former corresponds to:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> nameLength <span class="token operator">=</span> person <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">?</span><span class="token punctuation">)</span>person<span class="token punctuation">.</span>Name<span class="token punctuation">.</span>Length <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

</code></pre></div><p>and the latter corresponds to:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> nameLength <span class="token operator">=</span> <span class="token punctuation">(</span>person <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> person<span class="token punctuation">.</span>Name <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length<span class="token punctuation">;</span>

</code></pre></div><p>Despite ternary operator <code>?:</code> is used here for explaining the difference between two cases, these operators are not equivalent. This can be easily demonstrated with the following example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Null propagation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>Bar<span class="token punctuation">?.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>

    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Ternary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>Bar <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> foo<span class="token punctuation">.</span>Bar<span class="token punctuation">.</span>Length <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">?</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Bar
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;I was read&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Which outputs:</p> <blockquote></blockquote> <p>Null propagation<br>
I was read<br>
0<br>
Ternary<br>
I was read<br>
I was read<br>
0</p> <p><a href="https://dotnetfiddle.net/BytXEz" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>To avoid multiple invocations equivalent would be:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> interimResult <span class="token operator">=</span> foo<span class="token punctuation">.</span>Bar<span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>interimResult <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> interimResult<span class="token punctuation">.</span>Length <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">?</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>And this difference somewhat explains why null propagation operator is <a href="https://roslyn.codeplex.com/discussions/571077" target="_blank" rel="noopener noreferrer">not yet supported<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in expression trees.</p> <h2 id="expression-bodied-function-members"><a href="#expression-bodied-function-members" class="header-anchor">#</a> Expression-bodied function members</h2> <p>Expression-bodied function members allow the use of lambda expressions as member bodies. For simple members, it can result in cleaner and more readable code.</p> <p>Expression-bodied functions can be used for properties, indexers, methods, and operators.</p> <h3 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h3> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> TotalPrice <span class="token operator">=&gt;</span> BasePrice <span class="token operator">+</span> Taxes<span class="token punctuation">;</span>

</code></pre></div><p>Is equivalent to:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> TotalPrice
<span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> BasePrice <span class="token operator">+</span> Taxes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>When an expression-bodied function is used with a property, the property is implemented as a getter-only property.</p> <p><a href="https://dotnetfiddle.net/djFd7O" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="indexers"><a href="#indexers" class="header-anchor">#</a> Indexers</h3> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">string</span></span> key<span class="token punctuation">]</span> <span class="token operator">=&gt;</span> dictionary<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre></div><p>Is equivalent to:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">string</span></span> key<span class="token punctuation">]</span>
<span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dictionary<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="methods"><a href="#methods" class="header-anchor">#</a> Methods</h3> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Multiply</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>

</code></pre></div><p>Is equivalent to:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Multiply</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Which can also be used with <code>void</code> methods:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> resource<span class="token punctuation">?.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>An override of <code>ToString</code> could be added to the <code>Pair&lt;T&gt;</code> class:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">First</span><span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Second</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>

</code></pre></div><p>Additionally, this simplistic approach works with the <code>override</code> keyword:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Bar <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">string</span> <span class="token keyword">override</span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Bar: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Bar</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="operators"><a href="#operators" class="header-anchor">#</a> Operators</h3> <p>This also can be used by operators:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Land</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Area <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> Land <span class="token keyword">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Land</span> first<span class="token punctuation">,</span> <span class="token class-name">Land</span> second<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Land</span> <span class="token punctuation">{</span> Area <span class="token operator">=</span> first<span class="token punctuation">.</span>Area <span class="token operator">+</span> second<span class="token punctuation">.</span>Area <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="limitations-2"><a href="#limitations-2" class="header-anchor">#</a> Limitations</h3> <p>Expression-bodied function members have some limitations. They can't contain block statements and any other statements that contain blocks: <code>if</code>, <code>switch</code>, <code>for</code>, <code>foreach</code>, <code>while</code>, <code>do</code>, <code>try</code>, etc.</p> <p>Some <code>if</code> statements can be replaced with ternary operators. Some <code>for</code> and <code>foreach</code> statements can be converted to LINQ queries, for example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Digits
<span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">yield</span> <span class="token keyword">return</span> i<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-cs extra-class"><pre class="language-cs"><code><span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Digits <span class="token operator">=&gt;</span> Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>i <span class="token operator">=&gt;</span> i<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>In all other cases, the old syntax for function members can be used.</p> <p>Expression-bodied function members can contain <code>async</code>/<code>await</code>, but it's often redundant:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> <span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

</code></pre></div><p>Can be replaced with:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="operator-nameof"><a href="#operator-nameof" class="header-anchor">#</a> Operator nameof</h2> <p>The <code>nameof</code> operator returns the name of a code element as a <code>string</code>. This is useful when throwing exceptions related to method arguments and also when implementing <code>INotifyPropertyChanged</code>.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> greeted<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>greeted <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>greeted<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> greeted<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <code>nameof</code> operator is evaluated at compile time and changes the expression into a string literal. This is also useful for strings that are named after their member that exposes them. Consider the following:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Strings</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> Foo <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Rather than Foo = &quot;Foo&quot;</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> Bar <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>Bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Rather than Bar = &quot;Bar&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Since <code>nameof</code> expressions are compile-time constants, they can be used in attributes, <code>case</code> labels, <code>switch</code> statements, and so on.</p> <hr> <p>It is convenient to use <code>nameof</code> with <code>Enum</code>s. Instead of:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span>One<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>it is possible to use:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Enum<span class="token punctuation">.</span>One<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>The output will be <code>One</code> in both cases.</p> <hr> <p>The <code>nameof</code> operator can access non-static members using static-like syntax. Instead of doing:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">string</span></span> foo <span class="token operator">=</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> lengthName <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Can be replaced with:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">string</span></span> lengthName <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The output will be <code>Length</code> in both examples. However, the latter prevents the creation of unnecessary instances.</p> <hr> <p>Although the <code>nameof</code> operator works with most language constructs, there are some limitations. For example, you cannot use the <code>nameof</code> operator on open generic types or method return values:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>   
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Compile-time error</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span><span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Compile-time error</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Furthermore, if you apply it to a generic type, the generic type parameter will be ignored:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;List&quot;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;List&quot;</span>

</code></pre></div><p>For more examples, see <a href="https://stackoverflow.com/documentation/c%23/80/nameof-operator#t=201608031424500177545" target="_blank" rel="noopener noreferrer">this topic<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> dedicated to <code>nameof</code>.</p> <hr> <h3 id="workaround-for-previous-versions-more-detail"><a href="#workaround-for-previous-versions-more-detail" class="header-anchor">#</a> Workaround for previous versions (<a href="http://stackoverflow.com/documentation/c%23/80/nameof-operator/26157/name-of-extension-support-added-for-before-c-sharp-6-version#t=201612071107472552734" target="_blank" rel="noopener noreferrer">more detail<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</h3> <p>Although the <code>nameof</code> operator does not exist in C# for versions prior to 6.0, similar functionality can be had by using <code>MemberExpression</code> as in the following:</p> <p>Expression:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token generic-method"><span class="token function">NameOf</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">Expression<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> propExp<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> memberExpression <span class="token operator">=</span> propExp<span class="token punctuation">.</span>Body <span class="token keyword">as</span> <span class="token class-name">MemberExpression</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> memberExpression <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> memberExpression<span class="token punctuation">.</span>Member<span class="token punctuation">.</span>Name <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token generic-method"><span class="token function">NameOf</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TObj<span class="token punctuation">,</span> T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">Expression<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span>TObj<span class="token punctuation">,</span> T<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> propExp<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> memberExpression <span class="token operator">=</span> propExp<span class="token punctuation">.</span>Body <span class="token keyword">as</span> <span class="token class-name">MemberExpression</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> memberExpression <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> memberExpression<span class="token punctuation">.</span>Member<span class="token punctuation">.</span>Name <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Usage:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">string</span></span> variableName <span class="token operator">=</span> <span class="token function">NameOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> variable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> propertyName <span class="token operator">=</span> <span class="token function">NameOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Foo</span> o<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>Bar<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Note that this approach causes an expression tree to be created on every call, so the performance is much worse compared to <code>nameof</code> operator which is evaluated at compile time and has zero overhead at runtime.</p> <h2 id="using-static-type"><a href="#using-static-type" class="header-anchor">#</a> Using static type</h2> <p>The <code>using static [Namespace.Type]</code> directive allows the importing of static members of types and enumeration values. Extension methods are imported as extension methods (from just one type), not into top-level scope.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">System<span class="token punctuation">.</span>Console</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">System<span class="token punctuation">.</span>ConsoleColor</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">System<span class="token punctuation">.</span>Math</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        BackgroundColor <span class="token operator">=</span> DarkBlue<span class="token punctuation">;</span>
        <span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">Sqrt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><a href="https://dotnetfiddle.net/7Ll3XN" target="_blank" rel="noopener noreferrer">Live Demo Fiddle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span>BackgroundColor <span class="token operator">=</span> ConsoleColor<span class="token punctuation">.</span>DarkBlue<span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="index-initializers"><a href="#index-initializers" class="header-anchor">#</a> Index initializers</h2> <p>Index initializers make it possible to create and initialize objects with indexes at the same time.</p> <p>This makes initializing Dictionaries very easy:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> dict <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>Any object that has an indexed getter or setter can be used with this syntax:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClassWithIndexer</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">string</span></span> index<span class="token punctuation">]</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Index: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">index</span><span class="token punctuation">}</span></span><span class="token string">, value: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">value</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClassWithIndexer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Output:</p> <blockquote></blockquote> <p>Index: foo, value: 34<br>
Index: bar, value: 42</p> <p><a href="https://dotnetfiddle.net/Evs4Qx" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>If the class has multiple indexers it is possible to assign them all in a single group of statements:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClassWithIndexer</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">string</span></span> index<span class="token punctuation">]</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Index: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">index</span><span class="token punctuation">}</span></span><span class="token string">, value: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">value</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">]</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Index: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">index</span><span class="token punctuation">}</span></span><span class="token string">, value: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">value</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClassWithIndexer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Ten&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Meaning of life&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Output:</p> <blockquote></blockquote> <p>Index: foo, value: 34<br>
Index: bar, value: 42<br>
Index: 10, value: Ten<br>
Index: 42, value: Meaning of life</p> <p>It should be noted that the indexer <code>set</code> accessor might behave differently compared to an <code>Add</code> method (used in collection initializers).</p> <p>For example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// does not throw, second value overwrites the first one</span>

</code></pre></div><p>versus:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">{</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// run-time ArgumentException: An item with the same key has already been added.</span>

</code></pre></div><h2 id="improved-overload-resolution"><a href="#improved-overload-resolution" class="header-anchor">#</a> Improved overload resolution</h2> <p>Following snippet shows an example of passing a method group (as opposed to a lambda) when a delegate is expected. Overload resolution will now resolve this instead of raising an ambiguous overload error due to the ability of <strong>C# 6</strong> to check the return type of the method that was passed.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">Overloaded</span><span class="token punctuation">(</span>DoSomething<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Overloaded</span><span class="token punctuation">(</span><span class="token class-name">Action</span> action<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
       Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;overload with action called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Overloaded</span><span class="token punctuation">(</span><span class="token class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
       Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;overload with Func&lt;int&gt; called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Results:</p> <p><strong>Output</strong></p> <blockquote></blockquote> <p>overload with Func<int> called</int></p> <p><a href="https://dotnetfiddle.net/Vnudqy" target="_blank" rel="noopener noreferrer">View Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Error</strong></p> <blockquote></blockquote> <p>error CS0121: The call is ambiguous between the following methods or properties:
'Program.Overloaded(System.Action)' and 'Program.Overloaded(System.Func)'</p> <p><strong>C# 6</strong> can also handle well the following case of exact matching for lambda expressions which would have resulted in an error in <strong>C# 5</strong>.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token class-name">Func<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token class-name">Func<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="await-in-catch-and-finally"><a href="#await-in-catch-and-finally" class="header-anchor">#</a> Await in catch and finally</h2> <p>It is possible to use <code>await</code> expression to apply <a href="https://msdn.microsoft.com/en-us/library/hh156528.aspx" target="_blank" rel="noopener noreferrer">await operator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to <a href="https://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx" target="_blank" rel="noopener noreferrer">Tasks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://msdn.microsoft.com/en-us/library/dd321424.aspx" target="_blank" rel="noopener noreferrer">Task(Of TResult)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in the <code>catch</code> and <code>finally</code> blocks in C#6.</p> <p>It was not possible to use the <code>await</code> expression in the <code>catch</code> and <code>finally</code> blocks in earlier versions due to compiler limitations. C#6 makes awaiting async tasks a lot easier by allowing the <code>await</code> expression.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">//since C#5</span>
    <span class="token keyword">await</span> service<span class="token punctuation">.</span><span class="token function">InitializeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//since C#6</span>
    <span class="token keyword">await</span> logger<span class="token punctuation">.</span><span class="token function">LogAsync</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">finally</span>
<span class="token punctuation">{</span>
    <span class="token comment">//since C#6</span>
    <span class="token keyword">await</span> service<span class="token punctuation">.</span><span class="token function">CloseAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>It was required in C# 5 to use a <code>bool</code> or declare an <code>Exception</code> outside the try catch to perform async operations. This method is shown in the following example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">bool</span></span> error <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token class-name">Exception</span> ex <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Since C#5</span>
    <span class="token keyword">await</span> service<span class="token punctuation">.</span><span class="token function">InitializeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Declare bool or place exception inside variable</span>
    error <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    ex <span class="token operator">=</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// If you don't use the exception</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Handle async task</span>
<span class="token punctuation">}</span>

<span class="token comment">// If want to use information from the exception</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> logger<span class="token punctuation">.</span><span class="token function">LogAsync</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>    

<span class="token comment">// Close the service, since this isn't possible in the finally</span>
<span class="token keyword">await</span> service<span class="token punctuation">.</span><span class="token function">CloseAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="minor-changes-and-bugfixes"><a href="#minor-changes-and-bugfixes" class="header-anchor">#</a> Minor changes and bugfixes</h2> <p>Parentheses are now forbidden around named parameters. The following compiles in C#5, but not C#6</p> <div class="language-cs extra-class"><pre class="language-cs"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Operands of <code>is</code> and <code>as</code> are no longer allowed to be method groups. The following compiles in C#5, but not C#6</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span>Any <span class="token keyword">is</span> <span class="token class-name"><span class="token keyword">byte</span></span><span class="token punctuation">;</span>

</code></pre></div><blockquote></blockquote> <p>The native compiler allowed this (although it did show a warning), and in fact didn’t even check extension method compatibility, allowing crazy things like <code>1.Any is string</code> or <code>IDisposable.Dispose is object</code>.</p> <p>See <a href="http://blog.slaks.net/2014-05-28/exploring-roslyn-part-3-breaking-changes/" target="_blank" rel="noopener noreferrer">this reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for updates on changes.</p> <h2 id="using-an-extension-method-for-collection-initialization"><a href="#using-an-extension-method-for-collection-initialization" class="header-anchor">#</a> Using an extension method for collection initialization</h2> <p>Collection initialization syntax can be used when instantiating any class which implements <code>IEnumerable</code> and has a method named <code>Add</code> which takes a single parameter.</p> <p>In previous versions, this <code>Add</code> method had to be an <strong>instance</strong> method on the class being initialized. In C#6, it can also be an extension method.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollectionWithAdd</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEnumerable</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">Add</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">T</span> item<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Item added with instance add method: &quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IEnumerator</span> <span class="token function">GetEnumerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Some implementation here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollectionWithoutAdd</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEnumerable</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IEnumerator</span> <span class="token function">GetEnumerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Some implementation here</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Extensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">Add</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">CollectionWithoutAdd</span> collection<span class="token punctuation">,</span> <span class="token class-name">T</span> item<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Item added with extension add method: &quot;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> collection1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CollectionWithAdd</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// Valid in all C# versions</span>
        <span class="token class-name"><span class="token keyword">var</span></span> collection2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CollectionWithoutAdd</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// Valid only since C# 6</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This will output:</p> <blockquote></blockquote> <p>Item added with instance add method: 1<br>
Item added with instance add method: 2<br>
Item added with instance add method: 3<br>
Item added with extension add method: 4<br>
Item added with extension add method: 5<br>
Item added with extension add method: 6</p> <h2 id="disable-warnings-enhancements"><a href="#disable-warnings-enhancements" class="header-anchor">#</a> Disable Warnings Enhancements</h2> <p>In C# 5.0 and earlier the developer could only suppress warnings by number. With the introduction of Roslyn Analyzers, C# needs a way to disable warnings issued from specific libraries. With C# 6.0 the pragma directive can suppress warnings by name.</p> <p>Before:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token preprocessor property">#<span class="token directive keyword">pragma</span> warning disable 0501</span>

</code></pre></div><p>C# 6.0:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token preprocessor property">#<span class="token directive keyword">pragma</span> warning disable CS0501</span>

</code></pre></div><h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>The sixth version of C# was released July 2015 alongside Visual Studio 2015 and .NET 4.6.</p> <p>As well as adding some new language features it includes a complete rewrite of the compiler. Previously <code>csc.exe</code> was a native Win32 application written in C++, with C# 6 it is now a .NET managed application written in C#. This rewrite was known as project &quot;Roslyn&quot; and the code is now open source and available on <a href="https://github.com/dotnet/roslyn" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/csharp/c-6-0-features.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/csharp/c-7-0-features.html" class="prev">
        C# 7.0 Features
      </a></span> <span class="next"><a href="/csharp/c-5-0-features.html">
        C# 5.0 Features
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/781.4203a71f.js" defer></script>
  </body>
</html>
