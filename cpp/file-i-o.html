<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C++ | File I/O</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Writing to a file, Opening a file, Reading from a file, Opening modes, Reading an ASCII file into a std::string, Writing files with non-standard locale settings, Flushing a stream, Reading a file into a container, Checking end of file inside a loop condition, bad practice?, Closing a file, Reading a `struct` from a formatted text file., Copying a file">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="C++ | File I/O">
    <meta property="og:description" content="Writing to a file, Opening a file, Reading from a file, Opening modes, Reading an ASCII file into a std::string, Writing files with non-standard locale settings, Flushing a stream, Reading a file into a container, Checking end of file inside a loop condition, bad practice?, Closing a file, Reading a `struct` from a formatted text file., Copying a file">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/cpp/file-i-o.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="C++ | File I/O">
    <meta name="twitter:description" content="Writing to a file, Opening a file, Reading from a file, Opening modes, Reading an ASCII file into a std::string, Writing files with non-standard locale settings, Flushing a stream, Reading a file into a container, Checking end of file inside a loop condition, bad practice?, Closing a file, Reading a `struct` from a formatted text file., Copying a file">
    <meta name="twitter:url" content="/cpp/file-i-o.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/652.1f8a4d52.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>C++</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cpp/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/cpp/getting-started-with-cpp.html" class="sidebar-link">Getting started with C++</a></li><li><a href="/cpp/literals.html" class="sidebar-link">Literals</a></li><li><a href="/cpp/operator-precedence.html" class="sidebar-link">operator precedence</a></li><li><a href="/cpp/floating-point-arithmetic.html" class="sidebar-link">Floating Point Arithmetic</a></li><li><a href="/cpp/bit-operators.html" class="sidebar-link">Bit Operators</a></li><li><a href="/cpp/bit-manipulation.html" class="sidebar-link">Bit Manipulation</a></li><li><a href="/cpp/bit-fields.html" class="sidebar-link">Bit fields</a></li><li><a href="/cpp/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/cpp/iterators.html" class="sidebar-link">Iterators</a></li><li><a href="/cpp/basic-input-output-in-c.html" class="sidebar-link">Basic input/output in c++</a></li><li><a href="/cpp/loops.html" class="sidebar-link">Loops</a></li><li><a href="/cpp/file-i-o.html" aria-current="page" class="active sidebar-link">File I/O</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#writing-to-a-file" class="sidebar-link">Writing to a file</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#opening-a-file" class="sidebar-link">Opening a file</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#reading-from-a-file" class="sidebar-link">Reading from a file</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#opening-modes" class="sidebar-link">Opening modes</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#reading-an-ascii-file-into-a-std-string" class="sidebar-link">Reading an ASCII file into a std::string</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#writing-files-with-non-standard-locale-settings" class="sidebar-link">Writing files with non-standard locale settings</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#flushing-a-stream" class="sidebar-link">Flushing a stream</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#reading-a-file-into-a-container" class="sidebar-link">Reading a file into a container</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#checking-end-of-file-inside-a-loop-condition-bad-practice" class="sidebar-link">Checking end of file inside a loop condition, bad practice?</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#closing-a-file" class="sidebar-link">Closing a file</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#reading-a-struct-from-a-formatted-text-file" class="sidebar-link">Reading a struct from a formatted text file.</a></li><li class="sidebar-sub-header"><a href="/cpp/file-i-o.html#copying-a-file" class="sidebar-link">Copying a file</a></li></ul></li><li><a href="/cpp/cpp-streams.html" class="sidebar-link">C++ Streams</a></li><li><a href="/cpp/stream-manipulators.html" class="sidebar-link">Stream manipulators</a></li><li><a href="/cpp/flow-control.html" class="sidebar-link">Flow Control</a></li><li><a href="/cpp/metaprogramming.html" class="sidebar-link">Metaprogramming</a></li><li><a href="/cpp/const-keyword.html" class="sidebar-link">const keyword</a></li><li><a href="/cpp/mutable-keyword.html" class="sidebar-link">mutable keyword</a></li><li><a href="/cpp/friend-keyword.html" class="sidebar-link">Friend keyword</a></li><li><a href="/cpp/type-keywords.html" class="sidebar-link">Type Keywords</a></li><li><a href="/cpp/basic-type-keywords.html" class="sidebar-link">Basic Type Keywords</a></li><li><a href="/cpp/variable-declaration-keywords.html" class="sidebar-link">Variable Declaration Keywords</a></li><li><a href="/cpp/keywords.html" class="sidebar-link">Keywords</a></li><li><a href="/cpp/returning-several-values-from-a-function.html" class="sidebar-link">Returning several values from a function</a></li><li><a href="/cpp/polymorphism.html" class="sidebar-link">Polymorphism</a></li><li><a href="/cpp/references.html" class="sidebar-link">References</a></li><li><a href="/cpp/value-and-reference-semantics.html" class="sidebar-link">Value and Reference Semantics</a></li><li><a href="/cpp/c-function-call-by-value-vs-call-by-reference.html" class="sidebar-link">C++ function &quot;call by value&quot; vs. &quot;call by reference&quot;</a></li><li><a href="/cpp/copying-vs-assignment.html" class="sidebar-link">Copying vs Assignment</a></li><li><a href="/cpp/pointers.html" class="sidebar-link">Pointers</a></li><li><a href="/cpp/pointers-to-members.html" class="sidebar-link">Pointers to members</a></li><li><a href="/cpp/the-this-pointer.html" class="sidebar-link">The This Pointer</a></li><li><a href="/cpp/smart-pointers.html" class="sidebar-link">Smart Pointers</a></li><li><a href="/cpp/classes-structures.html" class="sidebar-link">Classes/Structures</a></li><li><a href="/cpp/function-overloading.html" class="sidebar-link">Function Overloading</a></li><li><a href="/cpp/operator-overloading.html" class="sidebar-link">Operator Overloading</a></li><li><a href="/cpp/function-template-overloading.html" class="sidebar-link">Function Template Overloading</a></li><li><a href="/cpp/virtual-member-functions.html" class="sidebar-link">Virtual Member Functions</a></li><li><a href="/cpp/inline-functions.html" class="sidebar-link">Inline functions</a></li><li><a href="/cpp/special-member-functions.html" class="sidebar-link">Special Member Functions</a></li><li><a href="/cpp/non-static-member-functions.html" class="sidebar-link">Non-Static Member Functions</a></li><li><a href="/cpp/constant-class-member-functions.html" class="sidebar-link">Constant class member functions</a></li><li><a href="/cpp/c-containers.html" class="sidebar-link">C++ Containers</a></li><li><a href="/cpp/namespaces.html" class="sidebar-link">Namespaces</a></li><li><a href="/cpp/header-files.html" class="sidebar-link">Header Files</a></li><li><a href="/cpp/using-declaration.html" class="sidebar-link">Using declaration</a></li><li><a href="/cpp/std-string.html" class="sidebar-link">std::string</a></li><li><a href="/cpp/std-array.html" class="sidebar-link">std::array</a></li><li><a href="/cpp/std-vector.html" class="sidebar-link">std::vector</a></li><li><a href="/cpp/std-map.html" class="sidebar-link">std::map</a></li><li><a href="/cpp/std-optional.html" class="sidebar-link">std::optional</a></li><li><a href="/cpp/std-function-to-wrap-any-element-that-is-callable.html" class="sidebar-link">std::function: To wrap any element that is callable</a></li><li><a href="/cpp/std-forward-list.html" class="sidebar-link">std::forward_list</a></li><li><a href="/cpp/std-pair.html" class="sidebar-link">std::pair</a></li><li><a href="/cpp/std-atomics.html" class="sidebar-link">std::atomics</a></li><li><a href="/cpp/std-variant.html" class="sidebar-link">std::variant</a></li><li><a href="/cpp/std-iomanip.html" class="sidebar-link">std::iomanip</a></li><li><a href="/cpp/std-any.html" class="sidebar-link">std::any</a></li><li><a href="/cpp/std-set-and-std-multiset.html" class="sidebar-link">std::set and std::multiset</a></li><li><a href="/cpp/std-integer-sequence.html" class="sidebar-link">std::integer_sequence</a></li><li><a href="/cpp/using-std-unordered-map.html" class="sidebar-link">Using std::unordered_map</a></li><li><a href="/cpp/standard-library-algorithms.html" class="sidebar-link">Standard Library Algorithms</a></li><li><a href="/cpp/the-iso-c-standard.html" class="sidebar-link">The ISO C++ Standard</a></li><li><a href="/cpp/inline-variables.html" class="sidebar-link">Inline variables</a></li><li><a href="/cpp/random-number-generation.html" class="sidebar-link">Random number generation</a></li><li><a href="/cpp/date-and-time-using-chrono-header.html" class="sidebar-link">Date and time using  header</a></li><li><a href="/cpp/sorting.html" class="sidebar-link">Sorting</a></li><li><a href="/cpp/enumeration.html" class="sidebar-link">Enumeration</a></li><li><a href="/cpp/iteration.html" class="sidebar-link">Iteration</a></li><li><a href="/cpp/regular-expressions.html" class="sidebar-link">Regular expressions</a></li><li><a href="/cpp/implementation-defined-behavior.html" class="sidebar-link">Implementation-defined behavior</a></li><li><a href="/cpp/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/cpp/lambdas.html" class="sidebar-link">Lambdas</a></li><li><a href="/cpp/value-categories.html" class="sidebar-link">Value Categories</a></li><li><a href="/cpp/preprocessor.html" class="sidebar-link">Preprocessor</a></li><li><a href="/cpp/data-structures-in-c.html" class="sidebar-link">Data Structures in C++</a></li><li><a href="/cpp/templates.html" class="sidebar-link">Templates</a></li><li><a href="/cpp/expression-templates.html" class="sidebar-link">Expression templates</a></li><li><a href="/cpp/curiously-recurring-template-pattern-crtp.html" class="sidebar-link">Curiously Recurring Template Pattern (CRTP)</a></li><li><a href="/cpp/threading.html" class="sidebar-link">Threading</a></li><li><a href="/cpp/thread-synchronization-structures.html" class="sidebar-link">Thread synchronization structures</a></li><li><a href="/cpp/the-rule-of-three-five-and-zero.html" class="sidebar-link">The Rule of Three, Five, And Zero</a></li><li><a href="/cpp/raii-resource-acquisition-is-initialization.html" class="sidebar-link">RAII: Resource Acquisition Is Initialization</a></li><li><a href="/cpp/rtti-run-time-type-information.html" class="sidebar-link">RTTI: Run-Time Type Information</a></li><li><a href="/cpp/mutexes.html" class="sidebar-link">Mutexes</a></li><li><a href="/cpp/recursive-mutex.html" class="sidebar-link">Recursive Mutex</a></li><li><a href="/cpp/semaphore.html" class="sidebar-link">Semaphore</a></li><li><a href="/cpp/futures-and-promises.html" class="sidebar-link">Futures and Promises</a></li><li><a href="/cpp/atomic-types.html" class="sidebar-link">Atomic Types</a></li><li><a href="/cpp/type-erasure.html" class="sidebar-link">Type Erasure</a></li><li><a href="/cpp/explicit-type-conversions.html" class="sidebar-link">Explicit type conversions</a></li><li><a href="/cpp/unnamed-types.html" class="sidebar-link">Unnamed types</a></li><li><a href="/cpp/type-traits.html" class="sidebar-link">Type Traits</a></li><li><a href="/cpp/return-type-covariance.html" class="sidebar-link">Return Type Covariance</a></li><li><a href="/cpp/layout-of-object-types.html" class="sidebar-link">Layout of object types</a></li><li><a href="/cpp/type-inference.html" class="sidebar-link">Type Inference</a></li><li><a href="/cpp/typedef-and-type-aliases.html" class="sidebar-link">Typedef and type aliases</a></li><li><a href="/cpp/type-deduction.html" class="sidebar-link">type deduction</a></li><li><a href="/cpp/trailing-return-type.html" class="sidebar-link">Trailing return type</a></li><li><a href="/cpp/alignment.html" class="sidebar-link">Alignment</a></li><li><a href="/cpp/perfect-forwarding.html" class="sidebar-link">Perfect Forwarding</a></li><li><a href="/cpp/decltype.html" class="sidebar-link">decltype</a></li><li><a href="/cpp/sfinae-substitution-failure-is-not-an-error.html" class="sidebar-link">SFINAE (Substitution Failure Is Not An Error)</a></li><li><a href="/cpp/undefined-behavior.html" class="sidebar-link">Undefined Behavior</a></li><li><a href="/cpp/overload-resolution.html" class="sidebar-link">Overload resolution</a></li><li><a href="/cpp/move-semantics.html" class="sidebar-link">Move Semantics</a></li><li><a href="/cpp/pimpl-idiom.html" class="sidebar-link">Pimpl Idiom</a></li><li><a href="/cpp/auto.html" class="sidebar-link">auto</a></li><li><a href="/cpp/copy-elision.html" class="sidebar-link">Copy Elision</a></li><li><a href="/cpp/fold-expressions.html" class="sidebar-link">Fold Expressions</a></li><li><a href="/cpp/unions.html" class="sidebar-link">Unions</a></li><li><a href="/cpp/design-pattern-implementation-in-c.html" class="sidebar-link">Design pattern implementation in C++</a></li><li><a href="/cpp/singleton-design-pattern.html" class="sidebar-link">Singleton Design Pattern</a></li><li><a href="/cpp/user-defined-literals.html" class="sidebar-link">User-Defined Literals</a></li><li><a href="/cpp/memory-management.html" class="sidebar-link">Memory management</a></li><li><a href="/cpp/c-11-memory-model.html" class="sidebar-link">C++11 Memory Model</a></li><li><a href="/cpp/scopes.html" class="sidebar-link">Scopes</a></li><li><a href="/cpp/static-assert.html" class="sidebar-link">static_assert</a></li><li><a href="/cpp/constexpr.html" class="sidebar-link">constexpr</a></li><li><a href="/cpp/one-definition-rule-odr.html" class="sidebar-link">One Definition Rule (ODR)</a></li><li><a href="/cpp/unspecified-behavior.html" class="sidebar-link">Unspecified behavior</a></li><li><a href="/cpp/argument-dependent-name-lookup.html" class="sidebar-link">Argument Dependent Name Lookup</a></li><li><a href="/cpp/attributes.html" class="sidebar-link">Attributes</a></li><li><a href="/cpp/recursion-in-c.html" class="sidebar-link">Recursion in C++</a></li><li><a href="/cpp/arithmitic-metaprogramming.html" class="sidebar-link">Arithmitic Metaprogramming</a></li><li><a href="/cpp/callable-objects.html" class="sidebar-link">Callable Objects</a></li><li><a href="/cpp/client-server-examples.html" class="sidebar-link">Client server examples</a></li><li><a href="/cpp/const-correctness.html" class="sidebar-link">Const Correctness</a></li><li><a href="/cpp/parameter-packs.html" class="sidebar-link">Parameter packs</a></li><li><a href="/cpp/build-systems.html" class="sidebar-link">Build Systems</a></li><li><a href="/cpp/concurrency-with-openmp.html" class="sidebar-link">Concurrency With OpenMP</a></li><li><a href="/cpp/resource-management.html" class="sidebar-link">Resource Management</a></li><li><a href="/cpp/storage-class-specifiers.html" class="sidebar-link">Storage class specifiers</a></li><li><a href="/cpp/linkage-specifications.html" class="sidebar-link">Linkage specifications</a></li><li><a href="/cpp/digit-separators.html" class="sidebar-link">Digit separators</a></li><li><a href="/cpp/c-incompatibilities.html" class="sidebar-link">C incompatibilities</a></li><li><a href="/cpp/side-by-side-comparisons-of-classic-c-examples-solved-via-c-vs-c-11-vs-c-14-vs-c-17.html" class="sidebar-link">Side by Side Comparisons of classic C++ examples solved via C++ vs C++11 vs C++14 vs C++17</a></li><li><a href="/cpp/compiling-and-building.html" class="sidebar-link">Compiling and Building</a></li><li><a href="/cpp/common-compile-linker-errors-gcc.html" class="sidebar-link">Common compile/linker errors (GCC)</a></li><li><a href="/cpp/more-undefined-behaviors-in-c.html" class="sidebar-link">More undefined behaviors in C++</a></li><li><a href="/cpp/unit-testing-in-c.html" class="sidebar-link">Unit Testing in C++</a></li><li><a href="/cpp/c-debugging-and-debug-prevention-tools-techniques.html" class="sidebar-link">C++ Debugging and Debug-prevention Tools &amp; Techniques</a></li><li><a href="/cpp/optimization-in-c.html" class="sidebar-link">Optimization in C++</a></li><li><a href="/cpp/optimization.html" class="sidebar-link">Optimization</a></li><li><a href="/cpp/profiling.html" class="sidebar-link">Profiling</a></li><li><a href="/cpp/refactoring-techniques.html" class="sidebar-link">Refactoring Techniques</a></li><li><a href="/cpp/internationalization-in-c.html" class="sidebar-link">Internationalization in C++</a></li><li><a href="/cpp/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="file-i-o"><a href="#file-i-o" class="header-anchor">#</a> File I/O</h1> <p>C++ file I/O is done via <strong>streams</strong>. The key abstractions are:</p> <p><code>std::istream</code> for reading text.</p> <p><code>std::ostream</code> for writing text.</p> <p><code>std::streambuf</code> for reading or writing characters.</p> <p><strong>Formatted input</strong> uses <code>operator&gt;&gt;</code>.</p> <p><strong>Formatted output</strong> uses <code>operator&lt;&lt;</code>.</p> <p>Streams use <code>std::locale</code>, e.g., for details of the formatting and for translation between external encodings and the internal encoding.</p> <p>More on streams: <a href="http://stackoverflow.com/documentation/c%2b%2b/7660/iostream-library" target="_blank" rel="noopener noreferrer"><iostream> Library<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></iostream></a></p> <h2 id="writing-to-a-file"><a href="#writing-to-a-file" class="header-anchor">#</a> Writing to a file</h2> <p>There are several ways to write to a file. The easiest way is to use an output file stream (<code>ofstream</code>) together with the stream insertion operator (<code>&lt;&lt;</code>):</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">os</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    os <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Instead of <code>&lt;&lt;</code>, you can also use the output file stream's member function <code>write()</code>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">os</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">char</span> data<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// Writes 3 characters from data -&gt; &quot;Foo&quot;.</span>
    os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>After writing to a stream, you should always check if error state flag <code>badbit</code> has been set, as it indicates whether the operation failed or not. This can be done by calling the output file stream's member function <code>bad()</code>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>os <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello Badbit!&quot;</span><span class="token punctuation">;</span> <span class="token comment">// This operation might fail for any reason.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// Failed to write!</span>

</code></pre></div><h2 id="opening-a-file"><a href="#opening-a-file" class="header-anchor">#</a> Opening a file</h2> <p>Opening a file is done in the same way for all 3 file streams (<code>ifstream</code>, <code>ofstream</code>, and <code>fstream</code>).</p> <p>You can open the file directly in the constructor:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ifstream: Opens file &quot;foo.txt&quot; for reading only.</span>

std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">ofs</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ofstream: Opens file &quot;foo.txt&quot; for writing only.</span>

std<span class="token double-colon punctuation">::</span>fstream <span class="token function">iofs</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// fstream:  Opens file &quot;foo.txt&quot; for reading and writing.</span>

</code></pre></div><p>Alternatively, you can use the file stream's member function <code>open()</code>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream ifs<span class="token punctuation">;</span>
ifs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;bar.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// ifstream: Opens file &quot;bar.txt&quot; for reading only.</span>

std<span class="token double-colon punctuation">::</span>ofstream ofs<span class="token punctuation">;</span>
ofs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;bar.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// ofstream: Opens file &quot;bar.txt&quot; for writing only.</span>

std<span class="token double-colon punctuation">::</span>fstream iofs<span class="token punctuation">;</span>
iofs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;bar.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// fstream:  Opens file &quot;bar.txt&quot; for reading and writing.</span>

</code></pre></div><p>You should <strong>always</strong> check if a file has been opened successfully (even when writing). Failures can include: the file doesn't exist, file hasn't the right access rights, file is already in use, disk errors occurred, drive disconnected ...
Checking can be done as follows:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Try to read the file 'foo.txt'.</span>
std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token string">&quot;fooo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Note the typo; the file can't be opened.</span>

<span class="token comment">// Check if the file has been opened successfully.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ifs<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The file hasn't been opened; take appropriate actions here.</span>
    <span class="token keyword">throw</span> <span class="token function">CustomException</span><span class="token punctuation">(</span>ifs<span class="token punctuation">,</span> <span class="token string">&quot;File could not be opened&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>When file path contains backslashes (for example, on Windows system) you should properly escape them:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Open the file 'c:\folder\foo.txt' on Windows.</span>
std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token string">&quot;c:\\folder\\foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// using escaped backslashes</span>

</code></pre></div><p>or use raw literal:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Open the file 'c:\folder\foo.txt' on Windows.</span>
std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token raw-string string">R&quot;(c:\folder\foo.txt)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// using raw literal</span>

</code></pre></div><p>or use forward slashes instead:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Open the file 'c:\folder\foo.txt' on Windows.</span>
std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token string">&quot;c:/folder/foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>If you want to open file with non-ASCII characters in path on Windows currently you can use <strong>non-standard</strong> wide character path argument:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Open the file 'пример\foo.txt' on Windows.</span>
std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">ifs</span><span class="token punctuation">(</span>L<span class="token raw-string string">R&quot;(пример\foo.txt)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// using wide characters with raw literal</span>

</code></pre></div><h2 id="reading-from-a-file"><a href="#reading-from-a-file" class="header-anchor">#</a> Reading from a file</h2> <p>There are several ways to read data from a file.</p> <p>If you know how the data is formatted, you can use the stream extraction operator (<code>&gt;&gt;</code>). Let's assume you have a file named <strong>foo.txt</strong> which contains the following data:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>John Doe <span class="token number">25</span> <span class="token number">4</span> <span class="token number">6</span> <span class="token number">1987</span>
Jane Doe <span class="token number">15</span> <span class="token number">5</span> <span class="token number">24</span> <span class="token number">1976</span>

</code></pre></div><p>Then you can use the following code to read that data from the file:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Define variables.</span>
std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">is</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>string firstname<span class="token punctuation">,</span> lastname<span class="token punctuation">;</span>
<span class="token keyword">int</span> age<span class="token punctuation">,</span> bmonth<span class="token punctuation">,</span> bday<span class="token punctuation">,</span> byear<span class="token punctuation">;</span>

<span class="token comment">// Extract firstname, lastname, age, bday month, bday day, and bday year in that order.</span>
<span class="token comment">// Note: '&gt;&gt;' returns false if it reached EOF (end of file) or if the input data doesn't</span>
<span class="token comment">// correspond to the type of the input variable (for example, the string &quot;foo&quot; can't be</span>
<span class="token comment">// extracted into an 'int' variable).</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>is <span class="token operator">&gt;&gt;</span> firstname <span class="token operator">&gt;&gt;</span> lastname <span class="token operator">&gt;&gt;</span> age <span class="token operator">&gt;&gt;</span> bmonth <span class="token operator">&gt;&gt;</span> bday <span class="token operator">&gt;&gt;</span> byear<span class="token punctuation">)</span>
    <span class="token comment">// Process the data that has been read.</span>

</code></pre></div><p>The stream extraction operator <code>&gt;&gt;</code> extracts every character and stops if it finds a character that can't be stored or if it is a special character:</p> <ul><li>For string types, the operator stops at a whitespace (``) or at a newline (<code>\n</code>).</li> <li>For numbers, the operator stops at a non-number character.</li></ul> <p>This means that the following version of the file <strong>foo.txt</strong> will also be successfully read by the previous code:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>John 
Doe <span class="token number">25</span>
<span class="token number">4</span> <span class="token number">6</span> <span class="token number">1987</span>


Jane
Doe 
<span class="token number">15</span> <span class="token number">5</span>
<span class="token number">24</span>
<span class="token number">1976</span>

</code></pre></div><p>The stream extraction operator <code>&gt;&gt;</code> always returns the stream given to it. Therefore, multiple operators can be chained together in order to read data consecutively. However, a stream can also be used as a Boolean expression (as shown in the <code>while</code> loop in the previous code). This is because the stream classes have a conversion operator for the type <code>bool</code>. This <code>bool()</code> operator will return <code>true</code> as long as the stream has no errors. If a stream goes into an error state (for example, because no more data can be extracted), then the <code>bool()</code> operator will return <code>false</code>. Therefore, the <code>while</code> loop in the previous code will be exited after the input file has been read to its end.</p> <p>If you wish to read an entire file as a string, you may use the following code:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Opens 'foo.txt'.</span>
std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">is</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>string whole_file<span class="token punctuation">;</span>

<span class="token comment">// Sets position to the end of the file.</span>
is<span class="token punctuation">.</span><span class="token function">seekg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Reserves memory for the file.</span>
whole_file<span class="token punctuation">.</span><span class="token function">reserve</span><span class="token punctuation">(</span>is<span class="token punctuation">.</span><span class="token function">tellg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Sets position to the start of the file.</span>
is<span class="token punctuation">.</span><span class="token function">seekg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>beg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Sets contents of 'whole_file' to all characters in the file.</span>
whole_file<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">istreambuf_iterator</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">,</span>
  std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">istreambuf_iterator</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This code reserves space for the <code>string</code> in order to cut down on unneeded memory allocations.</p> <p>If you want to read a file line by line, you can use the function <a href="http://en.cppreference.com/w/cpp/string/basic_string/getline" target="_blank" rel="noopener noreferrer"><code>getline()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">is</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   

<span class="token comment">// The function getline returns false if there are no more lines.</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string str<span class="token punctuation">;</span> std<span class="token double-colon punctuation">::</span><span class="token function">getline</span><span class="token punctuation">(</span>is<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Process the line that has been read.</span>
<span class="token punctuation">}</span>

</code></pre></div><p>If you want to read a fixed number of characters, you can use the stream's member function <code>read()</code>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">is</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Read 4 characters from the file.</span>
is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>After executing a read command, you should always check if the error state flag <code>failbit</code> has been set, as it indicates whether the operation failed or not. This can be done by calling the file stream's member function <code>fail()</code>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// This operation might fail for any reason.</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// Failed to read!</span>

</code></pre></div><h2 id="opening-modes"><a href="#opening-modes" class="header-anchor">#</a> Opening modes</h2> <p>When creating a file stream, you can specify an opening mode. An opening mode is basically a setting to control how the stream opens the file.</p> <p>(All modes can be found in the <code>std::ios</code> namespace.)</p> <p>An opening mode can be provided as second parameter to the constructor of a file stream or to its <code>open()</code> member function:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">os</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>out <span class="token operator">|</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>trunc<span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token double-colon punctuation">::</span>ifstream is<span class="token punctuation">;</span>
is<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>in <span class="token operator">|</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>It is to be noted that you have to set <code>ios::in</code> or <code>ios::out</code> if you want to set other flags as they are not implicitly set by the iostream members although they have a correct default value.</p> <p>If you don't specify an opening mode, then the following default modes are used:</p> <ul><li><code>ifstream</code> - <code>in</code></li> <li><code>ofstream</code> - <code>out</code></li> <li><code>fstream</code> - <code>in</code> and <code>out</code></li></ul> <p><strong>The file opening modes that you may specify by design are:</strong></p> <table><thead><tr><th>Mode</th> <th>Meaning</th> <th>For</th> <th>Description</th></tr></thead> <tbody><tr><td><code>app</code></td> <td>append</td> <td>Output</td> <td>Appends data at the end of the file.</td></tr> <tr><td><code>binary</code></td> <td>binary</td> <td>Input/Output</td> <td>Input and output is done in binary.</td></tr> <tr><td><code>in</code></td> <td>input</td> <td>Input</td> <td>Opens the file for reading.</td></tr> <tr><td><code>out</code></td> <td>output</td> <td>Output</td> <td>Opens the file for writing.</td></tr> <tr><td><code>trunc</code></td> <td>truncate</td> <td>Input/Output</td> <td>Removes contents of the file when opening.</td></tr> <tr><td><code>ate</code></td> <td>at end</td> <td>Input</td> <td>Goes to the end of the file when opening.</td></tr></tbody></table> <p><strong>Note:</strong> Setting the <code>binary</code> mode lets the data be read/written exactly as-is; not setting it enables the translation of the newline <code>'\n'</code> character to/from a platform specific end of line sequence.</p> <p>For example on Windows the end of line sequence is CRLF (<code>&quot;\r\n&quot;</code>).<br>
Write: <code>&quot;\n&quot;</code>  =&gt; <code>&quot;\r\n&quot;</code><br>
Read: <code>&quot;\r\n&quot;</code> =&gt; <code>&quot;\n&quot;</code></p> <h2 id="reading-an-ascii-file-into-a-std-string"><a href="#reading-an-ascii-file-into-a-std-string" class="header-anchor">#</a> Reading an ASCII file into a std::string</h2> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  std<span class="token double-colon punctuation">::</span>stringstream buffer<span class="token punctuation">;</span>
  buffer <span class="token operator">&lt;&lt;</span> f<span class="token punctuation">.</span><span class="token function">rdbuf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The content of &quot;file.txt&quot; is available in the string `buffer.str()`</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <a href="http://en.cppreference.com/w/cpp/io/basic_ios/rdbuf" target="_blank" rel="noopener noreferrer"><code>rdbuf()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> method returns a pointer to a <a href="http://en.cppreference.com/w/cpp/io/basic_streambuf" target="_blank" rel="noopener noreferrer"><code>streambuf</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that can be pushed  into <code>buffer</code> via the <a href="http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt" target="_blank" rel="noopener noreferrer"><code>stringstream::operator&lt;&lt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> member function.</p> <p>Another possibility (popularized in <a href="http://rads.stackoverflow.com/amzn/click/0201749629" target="_blank" rel="noopener noreferrer">Effective STL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by <a href="http://www.aristeia.com/" target="_blank" rel="noopener noreferrer">Scott Meyers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) is:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  std<span class="token double-colon punctuation">::</span>string <span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">istreambuf_iterator</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">istreambuf_iterator</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Operations on `str`...</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This is nice because requires little code (and allows reading a file directly into any STL container, not only strings) but can be slow for big files.</p> <p><strong>NOTE</strong>: the extra parentheses around the first argument to the string constructor are essential to prevent the <strong>most vexing parse</strong> problem.</p> <p>Last but not least:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  f<span class="token punctuation">.</span><span class="token function">seekg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token keyword">auto</span> size <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">tellg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>string <span class="token function">str</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">seekg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  f<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Operations on `str`...</span>
<span class="token punctuation">}</span>

</code></pre></div><p>which is probably the fastest option (among the three proposed).</p> <h2 id="writing-files-with-non-standard-locale-settings"><a href="#writing-files-with-non-standard-locale-settings" class="header-anchor">#</a> Writing files with non-standard locale settings</h2> <p>If you need to write a file using different locale settings to the default, you can use <a href="http://en.cppreference.com/w/cpp/locale/locale" target="_blank" rel="noopener noreferrer"><code>std::locale</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="http://en.cppreference.com/w/cpp/io/basic_ios/imbue" target="_blank" rel="noopener noreferrer"><code>std::basic_ios::imbue()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to do that for a specific file stream:</p> <p><strong>Guidance for use:</strong></p> <ul><li>You should always apply a local to a stream before opening the file.</li> <li>Once the stream has been imbued you should not change the locale.</li></ul> <p><strong>Reasons for Restrictions:</strong>
Imbuing a file stream with a locale has undefined behavior if the current locale is not state independent or not pointing at the beginning of the file.</p> <p>UTF-8 streams (and others) are not state independent.
Also a file stream with a UTF-8 locale may try and read the BOM marker from the file when it is opened; so just opening the file may read characters from the file and it will not be at the beginning.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;locale&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;User-preferred locale setting is &quot;</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

  <span class="token comment">// Write a floating-point value using the user's preferred locale.</span>
  std<span class="token double-colon punctuation">::</span>ofstream ofs1<span class="token punctuation">;</span>
  ofs1<span class="token punctuation">.</span><span class="token function">imbue</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ofs1<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;file1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ofs1 <span class="token operator">&lt;&lt;</span> <span class="token number">78123.456</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

  <span class="token comment">// Use a specific locale (names are system-dependent)</span>
  std<span class="token double-colon punctuation">::</span>ofstream ofs2<span class="token punctuation">;</span>
  ofs2<span class="token punctuation">.</span><span class="token function">imbue</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&quot;en_US.UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ofs2<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;file2.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ofs2 <span class="token operator">&lt;&lt;</span> <span class="token number">78123.456</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

  <span class="token comment">// Switch to the classic &quot;C&quot; locale</span>
  std<span class="token double-colon punctuation">::</span>ofstream ofs3<span class="token punctuation">;</span>
  ofs3<span class="token punctuation">.</span><span class="token function">imbue</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>locale<span class="token double-colon punctuation">::</span><span class="token function">classic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ofs3<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;file3.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ofs3 <span class="token operator">&lt;&lt;</span> <span class="token number">78123.456</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Explicitly switching to the classic &quot;C&quot; locale is useful if your program uses a different default locale and you want to ensure a fixed standard for reading and writing files.  With a &quot;C&quot; preferred locale, the example writes</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">123.456</span>
<span class="token number">78</span><span class="token punctuation">,</span><span class="token number">123.456</span>
<span class="token number">78123.456</span>

</code></pre></div><p>If, for example, the preferred locale is German and hence uses a different number format, the example writes</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token number">78</span> <span class="token number">123</span><span class="token punctuation">,</span><span class="token number">456</span>
<span class="token number">78</span><span class="token punctuation">,</span><span class="token number">123.456</span>
<span class="token number">78123.456</span>

</code></pre></div><p>(note the decimal comma in the first line).</p> <h2 id="flushing-a-stream"><a href="#flushing-a-stream" class="header-anchor">#</a> Flushing a stream</h2> <p>File streams are buffered by default, as are many other types of streams. This means that writes to the stream may not cause the underlying file to change immediately. In oder to force all buffered writes to take place immediately, you can <strong>flush</strong> the stream. You can do this either directly by invoking the <code>flush()</code> method or through the <code>std::flush</code> stream manipulator:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">os</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
os <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello World!&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>flush<span class="token punctuation">;</span>

<span class="token keyword">char</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">;</span>
os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
os<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>There is a stream manipulator <code>std::endl</code> that combines writing a newline with flushing the stream:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Both following lines do the same thing</span>
os <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello World!\n&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>flush<span class="token punctuation">;</span>
os <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello world!&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

</code></pre></div><p>Buffering can improve the performance of writing to a stream. Therefore, applications that do a lot of writing should avoid flushing unnecessarily. Contrary, if I/O is done infrequently, applications should consider flushing frequently in order to avoid data getting stuck in the stream object.</p> <h2 id="reading-a-file-into-a-container"><a href="#reading-a-file-into-a-container" class="header-anchor">#</a> Reading a file into a container</h2> <p>In the example below we use <code>std::string</code> and <code>operator&gt;&gt;</code> to read items from the file.</p> <div class="language- extra-class"><pre class="language-text"><code>
   std::ifstream file(&quot;file3.txt&quot;);

    std::vector&lt;std::string&gt;  v;

    std::string s;
    while(file &gt;&gt; s) // keep reading until we run out
    {
        v.push_back(s);
    }

</code></pre></div><p>In the above example we are simply iterating through the file reading one &quot;item&quot; at a time using <code>operator&gt;&gt;</code>. This same affect can be achieved using the <code>std::istream_iterator</code> which is an input iterator that reads one &quot;item&quot; at a time from the stream. Also most containers can be constructed using two iterators so we can simplify the above code to:</p> <div class="language- extra-class"><pre class="language-text"><code>
   std::ifstream file(&quot;file3.txt&quot;);

    std::vector&lt;std::string&gt;  v(std::istream_iterator&lt;std::string&gt;{file},
                                std::istream_iterator&lt;std::string&gt;{});

</code></pre></div><p>We can extend this to read any object types we like by simply specifying the object we want to read as the template parameter to the <code>std::istream_iterator</code>. Thus we can simply extend the above to read lines (rather than words) like this:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Unfortunately there is  no built in type that reads line using &gt;&gt;</span>
<span class="token comment">// So here we build a simple helper class to do it. That will convert</span>
<span class="token comment">// back to a string when used in string context.</span>
<span class="token keyword">struct</span> <span class="token class-name">Line</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Store data here</span>
    std<span class="token double-colon punctuation">::</span>string data<span class="token punctuation">;</span>
    <span class="token comment">// Convert object to string</span>
    <span class="token keyword">operator</span> std<span class="token double-colon punctuation">::</span>string <span class="token keyword">const</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> data<span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token comment">// Read a line from a stream.</span>
    <span class="token keyword">friend</span> std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> stream<span class="token punctuation">,</span> Line<span class="token operator">&amp;</span> line<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">getline</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> line<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


    std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;file3.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Read the lines of a file into a container.</span>
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span>  <span class="token function">v</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>istream_iterator<span class="token operator">&lt;</span>Line<span class="token operator">&gt;</span><span class="token punctuation">{</span>file<span class="token punctuation">}</span><span class="token punctuation">,</span>
                                std<span class="token double-colon punctuation">::</span>istream_iterator<span class="token operator">&lt;</span>Line<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="checking-end-of-file-inside-a-loop-condition-bad-practice"><a href="#checking-end-of-file-inside-a-loop-condition-bad-practice" class="header-anchor">#</a> Checking end of file inside a loop condition, bad practice?</h2> <p><a href="http://en.cppreference.com/w/cpp/io/basic_ios/eof" target="_blank" rel="noopener noreferrer"><code>eof</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> returns <code>true</code> only <strong>after</strong> reading the end of file. It does NOT indicate that the next read will be the end of stream.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>f<span class="token punctuation">.</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">// Everything is OK</span>

  f <span class="token operator">&gt;&gt;</span> buffer<span class="token punctuation">;</span>

  <span class="token comment">// What if *only* now the eof / fail bit is set?</span>

  <span class="token comment">/* Use `buffer` */</span>
<span class="token punctuation">}</span>

</code></pre></div><p>You could correctly write:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>f<span class="token punctuation">.</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>  
  f <span class="token operator">&gt;&gt;</span> buffer <span class="token operator">&gt;&gt;</span> std<span class="token double-colon punctuation">::</span>ws<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token comment">/* Use `buffer` */</span>
<span class="token punctuation">}</span>

</code></pre></div><p>but</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">while</span> <span class="token punctuation">(</span>f <span class="token operator">&gt;&gt;</span> buffer<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">/* Use `buffer` */</span>
<span class="token punctuation">}</span>

</code></pre></div><p>is simpler and less error prone.</p> <p>Further references:</p> <ul><li><a href="http://en.cppreference.com/w/cpp/io/manip/ws" target="_blank" rel="noopener noreferrer"><code>std::ws</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: discards leading whitespace from an input stream</li> <li><a href="http://en.cppreference.com/w/cpp/io/basic_ios/fail" target="_blank" rel="noopener noreferrer"><code>std::basic_ios::fail</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: returns <code>true</code> if an error has occurred on the associated stream</li></ul> <h2 id="closing-a-file"><a href="#closing-a-file" class="header-anchor">#</a> Closing a file</h2> <p>Explicitly closing a file is rarely necessary in C++, as a file stream will automatically close its associated file in its destructor. However, you should try to limit the lifetime of a file stream object, so that it does not keep the file handle open longer than necessary. For example, this can be done by putting all file operations into an own scope (<code>{}</code>):</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>string <span class="token keyword">const</span> prepared_data <span class="token operator">=</span> <span class="token function">prepare_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Open a file for writing.</span>
    std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">output</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Write data.</span>
    output <span class="token operator">&lt;&lt;</span> prepared_data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>  <span class="token comment">// The ofstream will go out of scope here.</span>
   <span class="token comment">// Its destructor will take care of closing the file properly.</span>

</code></pre></div><p>Calling <code>close()</code> explicitly is only necessary if you want to reuse the same <code>fstream</code> object later, but don't want to keep the file open in between:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Open the file &quot;foo.txt&quot; for the first time.</span>
std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">output</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get some data to write from somewhere.</span>
std<span class="token double-colon punctuation">::</span>string <span class="token keyword">const</span> prepared_data <span class="token operator">=</span> <span class="token function">prepare_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Write data to the file &quot;foo.txt&quot;.</span>
output <span class="token operator">&lt;&lt;</span> prepared_data<span class="token punctuation">;</span>

<span class="token comment">// Close the file &quot;foo.txt&quot;.</span>
output<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Preparing data might take a long time. Therefore, we don't open the output file stream</span>
<span class="token comment">// before we actually can write some data to it.</span>
std<span class="token double-colon punctuation">::</span>string <span class="token keyword">const</span> more_prepared_data <span class="token operator">=</span> <span class="token function">prepare_complex_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Open the file &quot;foo.txt&quot; for the second time once we are ready for writing.</span>
output<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;foo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Write the data to the file &quot;foo.txt&quot;.</span>
output <span class="token operator">&lt;&lt;</span> more_prepared_data<span class="token punctuation">;</span>

<span class="token comment">// Close the file &quot;foo.txt&quot; once again.</span>
output<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="reading-a-struct-from-a-formatted-text-file"><a href="#reading-a-struct-from-a-formatted-text-file" class="header-anchor">#</a> Reading a <code>struct</code> from a formatted text file.</h2> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">info_type</span>
<span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation">;</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">float</span> height<span class="token punctuation">;</span>
    
    <span class="token comment">// we define an overload of operator&gt;&gt; as a friend function which</span>
    <span class="token comment">// gives in privileged access to private data members </span>
    <span class="token keyword">friend</span> std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> info_type<span class="token operator">&amp;</span> info<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// skip whitespace</span>
        is <span class="token operator">&gt;&gt;</span> std<span class="token double-colon punctuation">::</span>ws<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span><span class="token function">getline</span><span class="token punctuation">(</span>is<span class="token punctuation">,</span> info<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        is <span class="token operator">&gt;&gt;</span> info<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
        is <span class="token operator">&gt;&gt;</span> info<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">return</span> is<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">func4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">auto</span> file <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">ifstream</span><span class="token punctuation">(</span><span class="token string">&quot;file4.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>info_type<span class="token operator">&gt;</span> v<span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span>info_type info<span class="token punctuation">;</span> file <span class="token operator">&gt;&gt;</span> info<span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token comment">// keep reading until we run out</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// we only get here if the read succeeded</span>
        v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token keyword">const</span><span class="token operator">&amp;</span> info<span class="token operator">:</span> v<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;  name: &quot;</span> <span class="token operator">&lt;&lt;</span> info<span class="token punctuation">.</span>name <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;   age: &quot;</span> <span class="token operator">&lt;&lt;</span> info<span class="token punctuation">.</span>age <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; years&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;height: &quot;</span> <span class="token operator">&lt;&lt;</span> info<span class="token punctuation">.</span>height <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;lbs&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>file4.txt</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Wogger Wabbit
<span class="token number">2</span>
<span class="token number">6.2</span>
Bilbo Baggins
<span class="token number">111</span>
<span class="token number">81.3</span>
Mary Poppins
<span class="token number">29</span>
<span class="token number">154.8</span>

</code></pre></div><p><strong>Output:</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>name<span class="token operator">:</span> Wogger Wabbit
 age<span class="token operator">:</span> <span class="token number">2</span> years
height<span class="token operator">:</span> <span class="token number">6.2l</span>bs

name<span class="token operator">:</span> Bilbo Baggins
 age<span class="token operator">:</span> <span class="token number">111</span> years
height<span class="token operator">:</span> <span class="token number">81.3l</span>bs

name<span class="token operator">:</span> Mary Poppins
 age<span class="token operator">:</span> <span class="token number">29</span> years
height<span class="token operator">:</span> <span class="token number">154.8l</span>bs

</code></pre></div><h2 id="copying-a-file"><a href="#copying-a-file" class="header-anchor">#</a> Copying a file</h2> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>ifstream  <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;source_filename&quot;</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>ofstream  <span class="token function">dst</span><span class="token punctuation">(</span><span class="token string">&quot;dest_filename&quot;</span><span class="token punctuation">,</span>   std<span class="token double-colon punctuation">::</span>ios<span class="token double-colon punctuation">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
dst <span class="token operator">&lt;&lt;</span> src<span class="token punctuation">.</span><span class="token function">rdbuf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>With C++17 the standard way to copy a file is including the <a href="http://en.cppreference.com/w/cpp/filesystem" target="_blank" rel="noopener noreferrer"><code>&lt;filesystem&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> header and using <a href="http://en.cppreference.com/w/cpp/filesystem/copy_file" target="_blank" rel="noopener noreferrer"><code>copy_file</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>fileystem<span class="token double-colon punctuation">::</span><span class="token function">copy_file</span><span class="token punctuation">(</span><span class="token string">&quot;source_filename&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dest_filename&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The filesystem library was originally developed as <code>boost.filesystem</code> and finally merged to ISO C++ as of C++17.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/cpp/file-i-o.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cpp/loops.html" class="prev">
        Loops
      </a></span> <span class="next"><a href="/cpp/cpp-streams.html">
        C++ Streams
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/652.1f8a4d52.js" defer></script>
  </body>
</html>
