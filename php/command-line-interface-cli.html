<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP - Command Line Interface (CLI)</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Handling Program Options, Argument Handling, Input and Output Handling, Return Codes, Restrict script execution to command line, Behavioural differences on the command line, Running your script, Running built-in web server, Edge Cases of getopt()">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="PHP - Command Line Interface (CLI)">
    <meta property="og:description" content="Handling Program Options, Argument Handling, Input and Output Handling, Return Codes, Restrict script execution to command line, Behavioural differences on the command line, Running your script, Running built-in web server, Edge Cases of getopt()">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/php/command-line-interface-cli.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="PHP - Command Line Interface (CLI)">
    <meta name="twitter:description" content="Handling Program Options, Argument Handling, Input and Output Handling, Return Codes, Restrict script execution to command line, Behavioural differences on the command line, Running your script, Running built-in web server, Edge Cases of getopt()">
    <meta name="twitter:url" content="/php/command-line-interface-cli.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2431.88f59817.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PHP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/php/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/php/installing-a-php-environment-on-windows.html" class="sidebar-link">Installing a PHP environment on Windows</a></li><li><a href="/php/installing-on-linux-unix-environments.html" class="sidebar-link">Installing on Linux/Unix Environments</a></li><li><a href="/php/getting-started-with-php.html" class="sidebar-link">Getting started with PHP</a></li><li><a href="/php/variables.html" class="sidebar-link">Variables</a></li><li><a href="/php/variable-scope.html" class="sidebar-link">Variable Scope</a></li><li><a href="/php/superglobal-variables-php.html" class="sidebar-link">Superglobal Variables PHP</a></li><li><a href="/php/outputting-the-value-of-a-variable.html" class="sidebar-link">Outputting the Value of a Variable</a></li><li><a href="/php/constants.html" class="sidebar-link">Constants</a></li><li><a href="/php/magic-constants.html" class="sidebar-link">Magic Constants</a></li><li><a href="/php/comments.html" class="sidebar-link">Comments</a></li><li><a href="/php/types.html" class="sidebar-link">Types</a></li><li><a href="/php/operators.html" class="sidebar-link">Operators</a></li><li><a href="/php/references.html" class="sidebar-link">References</a></li><li><a href="/php/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/php/array-iteration.html" class="sidebar-link">Array iteration</a></li><li><a href="/php/executing-upon-an-array.html" class="sidebar-link">Executing Upon an Array</a></li><li><a href="/php/manipulating-an-array.html" class="sidebar-link">Manipulating an Array</a></li><li><a href="/php/processing-multiple-arrays-together.html" class="sidebar-link">Processing Multiple Arrays Together</a></li><li><a href="/php/datetime-class.html" class="sidebar-link">Datetime Class</a></li><li><a href="/php/working-with-dates-and-time.html" class="sidebar-link">Working with Dates and Time</a></li><li><a href="/php/control-structures.html" class="sidebar-link">Control Structures</a></li><li><a href="/php/loops.html" class="sidebar-link">Loops</a></li><li><a href="/php/functions.html" class="sidebar-link">Functions</a></li><li><a href="/php/functional-programming.html" class="sidebar-link">Functional Programming</a></li><li><a href="/php/alternative-syntax-for-control-structures.html" class="sidebar-link">Alternative Syntax for Control Structures</a></li><li><a href="/php/string-formatting.html" class="sidebar-link">String formatting</a></li><li><a href="/php/string-parsing.html" class="sidebar-link">String Parsing</a></li><li><a href="/php/classes-and-objects.html" class="sidebar-link">Classes and Objects</a></li><li><a href="/php/namespaces.html" class="sidebar-link">Namespaces</a></li><li><a href="/php/sessions.html" class="sidebar-link">Sessions</a></li><li><a href="/php/cookies.html" class="sidebar-link">Cookies</a></li><li><a href="/php/output-buffering.html" class="sidebar-link">Output Buffering</a></li><li><a href="/php/json.html" class="sidebar-link">JSON</a></li><li><a href="/php/soap-client.html" class="sidebar-link">SOAP Client</a></li><li><a href="/php/using-curl-in-php.html" class="sidebar-link">Using cURL in PHP</a></li><li><a href="/php/reflection.html" class="sidebar-link">Reflection</a></li><li><a href="/php/dependency-injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/php/xml.html" class="sidebar-link">XML</a></li><li><a href="/php/simplexml.html" class="sidebar-link">SimpleXML</a></li><li><a href="/php/parsing-html.html" class="sidebar-link">Parsing HTML</a></li><li><a href="/php/regular-expressions-regexp-pcre.html" class="sidebar-link">Regular Expressions (regexp/PCRE)</a></li><li><a href="/php/traits.html" class="sidebar-link">Traits</a></li><li><a href="/php/composer-dependency-manager.html" class="sidebar-link">Composer Dependency Manager</a></li><li><a href="/php/magic-methods.html" class="sidebar-link">Magic Methods</a></li><li><a href="/php/file-handling.html" class="sidebar-link">File handling</a></li><li><a href="/php/streams.html" class="sidebar-link">Streams</a></li><li><a href="/php/type-hinting.html" class="sidebar-link">Type hinting</a></li><li><a href="/php/filters-filter-functions.html" class="sidebar-link">Filters &amp; Filter Functions</a></li><li><a href="/php/generators.html" class="sidebar-link">Generators</a></li><li><a href="/php/utf-8.html" class="sidebar-link">UTF-8</a></li><li><a href="/php/how-to-break-down-an-url.html" class="sidebar-link">How to break down an URL</a></li><li><a href="/php/object-serialization.html" class="sidebar-link">Object Serialization</a></li><li><a href="/php/serialization.html" class="sidebar-link">Serialization</a></li><li><a href="/php/closure.html" class="sidebar-link">Closure</a></li><li><a href="/php/reading-request-data.html" class="sidebar-link">Reading Request Data</a></li><li><a href="/php/type-juggling-and-non-strict-comparison-issues.html" class="sidebar-link">Type juggling and Non-Strict Comparison Issues</a></li><li><a href="/php/sockets.html" class="sidebar-link">Sockets</a></li><li><a href="/php/pdo.html" class="sidebar-link">PDO</a></li><li><a href="/php/php-mysqli.html" class="sidebar-link">PHP MySQLi</a></li><li><a href="/php/sqlite3.html" class="sidebar-link">SQLite3</a></li><li><a href="/php/using-mongodb.html" class="sidebar-link">Using MongoDB</a></li><li><a href="/php/mongo-php.html" class="sidebar-link">mongo-php</a></li><li><a href="/php/using-redis-with-php.html" class="sidebar-link">Using Redis with PHP</a></li><li><a href="/php/sending-email.html" class="sidebar-link">Sending Email</a></li><li><a href="/php/using-sqlsrv.html" class="sidebar-link">Using SQLSRV</a></li><li><a href="/php/command-line-interface-cli.html" aria-current="page" class="active sidebar-link">Command Line Interface (CLI)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#handling-program-options" class="sidebar-link">Handling Program Options</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#argument-handling" class="sidebar-link">Argument Handling</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#input-and-output-handling" class="sidebar-link">Input and Output Handling</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#return-codes" class="sidebar-link">Return Codes</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#restrict-script-execution-to-command-line" class="sidebar-link">Restrict script execution to command line</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#behavioural-differences-on-the-command-line" class="sidebar-link">Behavioural differences on the command line</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#running-your-script" class="sidebar-link">Running your script</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#running-built-in-web-server" class="sidebar-link">Running built-in web server</a></li><li class="sidebar-sub-header"><a href="/php/command-line-interface-cli.html#edge-cases-of-getopt" class="sidebar-link">Edge Cases of getopt()</a></li></ul></li><li><a href="/php/localization.html" class="sidebar-link">Localization</a></li><li><a href="/php/headers-manipulation.html" class="sidebar-link">Headers Manipulation</a></li><li><a href="/php/coding-conventions.html" class="sidebar-link">Coding Conventions</a></li><li><a href="/php/asynchronous-programming.html" class="sidebar-link">Asynchronous programming</a></li><li><a href="/php/how-to-detect-client-ip-address.html" class="sidebar-link">How to Detect Client IP Address</a></li><li><a href="/php/create-pdf-files-in-php.html" class="sidebar-link">Create PDF files in PHP</a></li><li><a href="/php/yaml-in-php.html" class="sidebar-link">YAML in PHP</a></li><li><a href="/php/image-processing-with-gd.html" class="sidebar-link">Image Processing with GD</a></li><li><a href="/php/imagick.html" class="sidebar-link">Imagick</a></li><li><a href="/php/soap-server.html" class="sidebar-link">SOAP Server</a></li><li><a href="/php/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/php/cache.html" class="sidebar-link">Cache</a></li><li><a href="/php/autoloading-primer.html" class="sidebar-link">Autoloading Primer</a></li><li><a href="/php/spl-data-structures.html" class="sidebar-link">SPL data structures</a></li><li><a href="/php/imap.html" class="sidebar-link">IMAP</a></li><li><a href="/php/http-authentication.html" class="sidebar-link">HTTP Authentication</a></li><li><a href="/php/websockets.html" class="sidebar-link">WebSockets</a></li><li><a href="/php/bc-math-binary-calculator.html" class="sidebar-link">BC Math (Binary Calculator)</a></li><li><a href="/php/docker-deployment.html" class="sidebar-link">Docker deployment</a></li><li><a href="/php/apcu.html" class="sidebar-link">APCu</a></li><li><a href="/php/php-built-in-server.html" class="sidebar-link">PHP Built in server</a></li><li><a href="/php/psr.html" class="sidebar-link">PSR</a></li><li><a href="/php/phpdoc.html" class="sidebar-link">PHPDoc</a></li><li><a href="/php/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/php/compile-php-extensions.html" class="sidebar-link">Compile PHP Extensions</a></li><li><a href="/php/common-errors.html" class="sidebar-link">Common Errors</a></li><li><a href="/php/compilation-of-errors-and-warnings.html" class="sidebar-link">Compilation of Errors and Warnings</a></li><li><a href="/php/exception-handling-and-error-reporting.html" class="sidebar-link">Exception Handling and Error Reporting</a></li><li><a href="/php/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/php/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/php/performance.html" class="sidebar-link">Performance</a></li><li><a href="/php/multiprocessing.html" class="sidebar-link">Multiprocessing</a></li><li><a href="/php/multi-threading-extension.html" class="sidebar-link">Multi Threading Extension</a></li><li><a href="/php/secure-remeber-me.html" class="sidebar-link">Secure Remeber Me</a></li><li><a href="/php/security.html" class="sidebar-link">Security</a></li><li><a href="/php/cryptography.html" class="sidebar-link">Cryptography</a></li><li><a href="/php/password-hashing-functions.html" class="sidebar-link">Password Hashing Functions</a></li><li><a href="/php/urls.html" class="sidebar-link">URLs</a></li><li><a href="/php/unicode-support-in-php.html" class="sidebar-link">Unicode Support in PHP</a></li><li><a href="/php/getting-started-with-php-7.html" class="sidebar-link">Getting started with php-7</a></li><li><a href="/php/null-coalesce-operator.html" class="sidebar-link">Null Coalesce Operator</a></li><li><a href="/php/spaceship-operator.html" class="sidebar-link">Spaceship operator</a></li><li><a href="/php/anonymous-class.html" class="sidebar-link">Anonymous class</a></li><li><a href="/php/contributing-to-the-php-manual.html" class="sidebar-link">Contributing to the PHP Manual</a></li><li><a href="/php/contributing-to-the-php-core.html" class="sidebar-link">Contributing to the PHP Core</a></li><li><a href="/php/getting-started-with-composer-php.html" class="sidebar-link">Getting started with composer-php</a></li><li><a href="/php/auto-loading-with-composer.html" class="sidebar-link">Auto loading with composer</a></li><li><a href="/php/how-to-use-private-repositories-with-composer.html" class="sidebar-link">How to use private repositories with Composer</a></li><li><a href="/php/getting-started-with-phpunit.html" class="sidebar-link">Getting Started with PHPUnit</a></li><li><a href="/php/assertions.html" class="sidebar-link">Assertions</a></li><li><a href="/php/test-doubles-mocks-and-stubs.html" class="sidebar-link">Test Doubles (Mocks and Stubs)</a></li><li><a href="/php/recipes.html" class="sidebar-link">Recipes</a></li><li><a href="/php/php-mysqli-affected-rows-returns-0-when-it-should-return-a-positive-integer.html" class="sidebar-link">php mysqli affected rows returns 0 when it should return a positive integer</a></li><li><a href="/php/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="command-line-interface-cli"><a href="#command-line-interface-cli" class="header-anchor">#</a> Command Line Interface (CLI)</h1> <h2 id="handling-program-options"><a href="#handling-program-options" class="header-anchor">#</a> Handling Program Options</h2> <p>Program options can be handled with the <code>getopt()</code> function. It operates with a similar syntax to the POSIX <code>getopt</code> command, with additional support for GNU-style long options.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">#!/usr/bin/php</span>

<span class="token comment">// a single colon indicates the option takes a value</span>
<span class="token comment">// a double colon indicates the value may be omitted</span>
<span class="token variable">$shortopts</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;hf:v::d&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// GNU-style long options are not required</span>
<span class="token variable">$longopts</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;help&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;version&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$opts</span> <span class="token operator">=</span> <span class="token function">getopt</span><span class="token punctuation">(</span><span class="token variable">$shortopts</span><span class="token punctuation">,</span> <span class="token variable">$longopts</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// options without values are assigned a value of boolean false</span>
<span class="token comment">// you must check their existence, not their truthiness</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;h&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;help&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDERR</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Here is some help!\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">exit</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// long options are called with two hyphens: &quot;--version&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;version&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDERR</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;%s Version 223.45&quot;</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">,</span> <span class="token variable">$argv</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">exit</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// options with values can be called like &quot;-f foo&quot;, &quot;-ffoo&quot;, or &quot;-f=foo&quot;</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;f&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;f&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDERR</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;We wanted a file!&quot;</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDOUT</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;File is %s&quot;</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">,</span> <span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// options with optional values must be called like &quot;-v5&quot; or &quot;-v=5&quot;</span>
<span class="token variable">$verbosity</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;v&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$verbosity</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;v&quot;</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword type-casting">int</span><span class="token punctuation">)</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;v&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDOUT</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Verbosity is %d&quot;</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">,</span> <span class="token variable">$verbosity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// options called multiple times are passed as an array</span>
<span class="token variable">$debug</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$debug</span> <span class="token operator">=</span> <span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDOUT</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Debug is %d&quot;</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">,</span> <span class="token variable">$debug</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// there is no automated way for getopt to handle unexpected options</span>

</code></pre></div><p>This script can be tested like so:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">.</span><span class="token operator">/</span>test<span class="token operator">.</span>php <span class="token operator">--</span>help
<span class="token operator">.</span><span class="token operator">/</span>test<span class="token operator">.</span>php <span class="token operator">--</span>version
<span class="token operator">.</span><span class="token operator">/</span>test<span class="token operator">.</span>php <span class="token operator">-</span>f foo <span class="token operator">-</span>ddd
<span class="token operator">.</span><span class="token operator">/</span>test<span class="token operator">.</span>php <span class="token operator">-</span>v <span class="token operator">-</span>d <span class="token operator">-</span>ffoo
<span class="token operator">.</span><span class="token operator">/</span>test<span class="token operator">.</span>php <span class="token operator">-</span>v5 <span class="token operator">-</span>f<span class="token operator">=</span>foo
<span class="token operator">.</span><span class="token operator">/</span>test<span class="token operator">.</span>php <span class="token operator">-</span>f foo <span class="token operator">-</span>v <span class="token number">5</span> <span class="token operator">-</span>d

</code></pre></div><p>Note the last method will not work because <code>-v 5</code> is not valid.</p> <blockquote></blockquote> <p><strong>Note:</strong> As of PHP 5.3.0, <code>getopt</code> is OS independent, working also on Windows.</p> <h2 id="argument-handling"><a href="#argument-handling" class="header-anchor">#</a> Argument Handling</h2> <p>Arguments are passed to the program in a manner similar to most C-style languages. <code>$argc</code> is an integer containing the number of arguments including the program name, and <code>$argv</code> is an array containing arguments to the program. The first element of <code>$argv</code> is the name of the program.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">#!/usr/bin/php</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;You called the program %s with %d arguments\n&quot;</span><span class="token punctuation">,</span> <span class="token variable">$argv</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$argc</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">unset</span><span class="token punctuation">(</span><span class="token variable">$argv</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$argv</span> <span class="token keyword">as</span> <span class="token variable">$i</span> <span class="token operator">=&gt;</span> <span class="token variable">$arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Argument %d is %s\n&quot;</span><span class="token punctuation">,</span> <span class="token variable">$i</span><span class="token punctuation">,</span> <span class="token variable">$arg</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Calling the above application with <code>php example.php foo bar</code> (where example.php contains the above code) will result in the following output:</p> <blockquote></blockquote> <p>You called the program example.php with 2 arguments<br>
Argument 1 is foo<br>
Argument 2 is bar</p> <p>Note that <code>$argc</code> and <code>$argv</code> are global variables, not superglobal variables. They must be imported into the local scope using the <code>global</code> keyword if they are needed in a function.</p> <p>This example shows the how arguments are grouped when escapes such as <code>&quot;&quot;</code> or <code>\</code> are used.</p> <p><strong>Example script</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$argc</span><span class="token punctuation">,</span> <span class="token variable">$argv</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>Command line</strong></p> <div class="language-php extra-class"><pre class="language-php"><code>$ php argc<span class="token operator">.</span>argv<span class="token operator">.</span>php <span class="token operator">--</span>this<span class="token operator">-</span>is<span class="token operator">-</span>an<span class="token operator">-</span>option three\ words\ together <span class="token keyword">or</span> <span class="token string double-quoted-string">&quot;in one quote&quot;</span>     but\ multiple\ spaces\ counted\ <span class="token keyword">as</span>\ one
<span class="token keyword type-declaration">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;argc.argv.php&quot;</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;--this-is-an-option&quot;</span>
  <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;three words together&quot;</span>
  <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;or&quot;</span>
  <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;in one quote&quot;</span>
  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;but multiple spaces counted as one&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>If the PHP script is run using <code>-r</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>$ php <span class="token operator">-</span>r <span class="token string single-quoted-string">'var_dump($argv);'</span>
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;-&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Or code piped into STDIN of <code>php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>$ echo '&lt;?php var_dump($argv);' | php
array(1) {
  [0]=&gt;
  string(1) &quot;-&quot;
}

</code></pre></div><h2 id="input-and-output-handling"><a href="#input-and-output-handling" class="header-anchor">#</a> Input and Output Handling</h2> <p>When run from the CLI, the constants <strong>STDIN</strong>, <strong>STDOUT</strong>, and <strong>STDERR</strong> are predefined. These constants are file handles, and can be considered equivalent to the results of running the following commands:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token constant">STDIN</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;php://stdin&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;r&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">STDOUT</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;php://stdout&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;w&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">STDERR</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;php://stderr&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;w&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The constants can be used anywhere a standard file handle would be:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">#!/usr/bin/php</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$line</span> <span class="token operator">=</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token constant">STDIN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$line</span> <span class="token operator">=</span> <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$line</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$line</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;bad&quot;</span><span class="token punctuation">:</span>
            <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDERR</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;%s is bad&quot;</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">,</span> <span class="token variable">$line</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;quit&quot;</span><span class="token punctuation">:</span>
            <span class="token keyword">exit</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDOUT</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;%s is good&quot;</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">,</span> <span class="token variable">$line</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The builtin stream addresses referenced earlier (<code>php://stdin</code>, <code>php://stdout</code>, and <code>php://stderr</code>) can be used in place of filenames in most contexts:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'php://stdout'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'This is stdout content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'php://stderr'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'This is stderr content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Open handle and write multiple times.</span>
<span class="token variable">$stdout</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'php://stdout'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$stdout</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Hello world from stdout'</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$stdout</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Hello again'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>As an alternative, you can also use <a href="http://php.net/manual/en/function.readline.php" target="_blank" rel="noopener noreferrer">readline()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for input, and you can also use <strong>echo</strong> or <strong>print</strong> or any other string printing functions for output.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">readline</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Please enter your name:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string double-quoted-string">&quot;Hello, <span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$name</span><span class="token punctuation">}</span></span>.&quot;</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="return-codes"><a href="#return-codes" class="header-anchor">#</a> Return Codes</h2> <p>The <strong>exit</strong> construct can be used to pass a return code to the executing environment.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">#!/usr/bin/php</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$argv</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string double-quoted-string">&quot;bad&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>By default an exit code of <code>0</code> will be returned if none is provided, i.e. <code>exit</code> is the same as <code>exit(0)</code>. As <code>exit</code> is not a function, parentheses are not required if no return code is being passed.</p> <p>Return codes must be in the range of 0 to 254 (255 is reserved by PHP and should not be used). By convention, exiting with a return code of <code>0</code> tells the calling program that the PHP script ran successfully. Use a non-zero return code to tell the calling program that a specific error condition occurred.</p> <h2 id="restrict-script-execution-to-command-line"><a href="#restrict-script-execution-to-command-line" class="header-anchor">#</a> Restrict script execution to command line</h2> <p>The function <a href="http://php.net/php_sapi_name" target="_blank" rel="noopener noreferrer"><code>php_sapi_name()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the constant <code>PHP_SAPI</code> both return the type of interface (<strong>S</strong>erver <strong>API</strong>) that is being used by PHP. They can be used to restrict the execution of a script to the command line, by checking whether the output of the function is equal to <code>cli</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">php_sapi_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string single-quoted-string">'cli'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Executed from command line\n&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Executed from web browser\n&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <a href="https://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_is_cli/7.x" target="_blank" rel="noopener noreferrer"><code>drupal_is_cli()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> function is an example of a function that detects whether a script has been executed from the command line:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function-definition function">drupal_is_cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'SERVER_SOFTWARE'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">php_sapi_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'cli'</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'argc'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'argc'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="behavioural-differences-on-the-command-line"><a href="#behavioural-differences-on-the-command-line" class="header-anchor">#</a> Behavioural differences on the command line</h2> <p>When running from the CLI, PHP exhibits some different behaviours than when run from a web server. These differences should be kept in mind, especially in the case where the same script might be run from both environments.</p> <ul><li><strong>No directory change</strong> When running a script from a web server, the current working directory is always that of the script itself. The code <code>require(&quot;./stuff.inc&quot;);</code> assumes the file is in the same directory as the script. On the command line, the current working directory is the directory you're in when you call the script. Scripts that are going to be called from the command line should always use absolute paths. (Note the magic constants <code>__DIR__</code> and <code>__FILE__</code> continue to work as expected, and return the location of the script.)</li> <li><strong>No output buffering</strong> The <code>php.ini</code> directives <code>output_buffering</code> and <code>implicit_flush</code> default to <code>false</code> and <code>true</code>, respectively. Buffering is still available, but must be explicitly enabled, otherwise output will always be displayed in real time.</li> <li><strong>No time limit</strong> The <code>php.ini</code> directive <code>max_execution_time</code> is set to zero, so scripts will not time out by default.</li> <li><strong>No HTML errors</strong> In the event you have enabled the <code>php.ini</code> directive <code>html_errors</code>, it will be ignored on the command line.</li> <li><strong>Different <code>php.ini</code> can be loaded</strong>. When you are using php from cli it can use different <code>php.ini</code> than web server do. You can know what file is using by running <code>php --ini</code>.</li></ul> <h2 id="running-your-script"><a href="#running-your-script" class="header-anchor">#</a> Running your script</h2> <p>On either Linux/UNIX or Windows, a script can be passed as an argument to the PHP executable, with that script's options and arguments following:</p> <div class="language-php extra-class"><pre class="language-php"><code>php <span class="token operator">~</span><span class="token operator">/</span>example<span class="token operator">.</span>php foo bar
c<span class="token punctuation">:</span>\php\php<span class="token operator">.</span>exe c<span class="token punctuation">:</span>\example<span class="token operator">.</span>php foo bar

</code></pre></div><p>This passes <code>foo</code> and <code>bar</code> as arguments to <code>example.php</code>.</p> <p>On Linux/UNIX, the preferred method of running scripts is to use a <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)" target="_blank" rel="noopener noreferrer">shebang<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (e.g. <code>#!/usr/bin/env php</code>) as the first line of a file, and set the executable bit on the file. Assuming the script is in your path, you can then call it directly:</p> <div class="language-php extra-class"><pre class="language-php"><code>example<span class="token operator">.</span>php foo bar

</code></pre></div><p>Using <code>/usr/bin/env php</code> makes the PHP executable to be found using the PATH. Following how PHP is installed, it might not be located at the same place (such as <code>/usr/bin/php</code> or <code>/usr/local/bin/php</code>), unlike <code>env</code> which is commonly available from <code>/usr/bin/env</code>.</p> <p>On Windows, you could have the same result by adding the PHP's directory and your script to the PATH and editing PATHEXT to allow <code>.php</code> to be detected using the PATH. Another possibility is to add a file named <code>example.bat</code> or <code>example.cmd</code> in the same directory as your PHP script and write this line into it:</p> <div class="language-php extra-class"><pre class="language-php"><code>c<span class="token punctuation">:</span>\php\php<span class="token operator">.</span>exe <span class="token string double-quoted-string">&quot;%~dp0example.php&quot;</span> <span class="token operator">%</span><span class="token operator">*</span>

</code></pre></div><p>Or, if you added PHP's directory into the PATH, for convenient use:</p> <div class="language-php extra-class"><pre class="language-php"><code>php <span class="token string double-quoted-string">&quot;%~dp0example.php&quot;</span> <span class="token operator">%</span><span class="token operator">*</span>

</code></pre></div><h2 id="running-built-in-web-server"><a href="#running-built-in-web-server" class="header-anchor">#</a> Running built-in web server</h2> <p>As from version 5.4, PHP comes with built-in server. It can be used to run application without need to install other http server like nginx or apache. Built-in server is designed only in controller environment for development and testing purposes.</p> <p>It can be run with command
php -S :</p> <p>To test it create <code>index.php</code> file containing</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Hello World from built-in PHP server&quot;</span><span class="token punctuation">;</span>

</span></code></pre></div><p>and run command <code>php -S localhost:8080</code></p> <p>Now yout should be able to see content in browser. To check this, navigate to <code>http://localhost:8080</code></p> <p>Every access should result in log entry written to terminal</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token punctuation">[</span>Mon Aug <span class="token number">15</span> <span class="token number">18</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">:</span><span class="token number">19</span> <span class="token number">2016</span><span class="token punctuation">]</span> <span class="token operator">::</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">52455</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token operator">/</span>

</code></pre></div><h2 id="edge-cases-of-getopt"><a href="#edge-cases-of-getopt" class="header-anchor">#</a> Edge Cases of getopt()</h2> <p>This example shows the behaviour of <code>getopt</code> when the user input is uncommon:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">var_dump</span><span class="token punctuation">(</span>
    <span class="token function">getopt</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;ab:c::&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;delta&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;epsilon:&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;zeta::&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code>$ php getopt<span class="token operator">.</span>php <span class="token operator">-</span>a <span class="token operator">-</span>a <span class="token operator">-</span>bbeta <span class="token operator">-</span>b beta <span class="token operator">-</span>cgamma <span class="token operator">--</span>delta <span class="token operator">--</span>epsilon <span class="token operator">--</span>zeta <span class="token operator">--</span>zeta<span class="token operator">=</span>f  <span class="token operator">-</span>c gamma
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;a&quot;</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;beta&quot;</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;beta&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;gamma&quot;</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;delta&quot;</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;epsilon&quot;</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;--zeta&quot;</span>
  <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;zeta&quot;</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;f&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>From this example, it can be seen that:</p> <ul><li>Individual options (no colon) always carry a boolean value of <code>false</code> if enabled.</li> <li>If an option is repeated, the respective value in the output of <code>getopt</code> will become an array.</li> <li>Required argument options (one colon) accept one space or no space (like optional argument options) as separator</li> <li>After one argument that cannot be mapped into any options, the options behind will not be mapped either.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/php/command-line-interface-cli.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/php/using-sqlsrv.html" class="prev">
        Using SQLSRV
      </a></span> <span class="next"><a href="/php/localization.html">
        Localization
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2431.88f59817.js" defer></script>
  </body>
</html>
