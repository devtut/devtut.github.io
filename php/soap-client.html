<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP - SOAP Client</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="WSDL Mode, Non-WSDL Mode, Classmaps, Tracing SOAP request and response">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="PHP - SOAP Client">
    <meta property="og:description" content="WSDL Mode, Non-WSDL Mode, Classmaps, Tracing SOAP request and response">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/php/soap-client.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="PHP - SOAP Client">
    <meta name="twitter:description" content="WSDL Mode, Non-WSDL Mode, Classmaps, Tracing SOAP request and response">
    <meta name="twitter:url" content="/php/soap-client.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2508.61e2295a.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PHP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/php/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/php/installing-a-php-environment-on-windows.html" class="sidebar-link">Installing a PHP environment on Windows</a></li><li><a href="/php/installing-on-linux-unix-environments.html" class="sidebar-link">Installing on Linux/Unix Environments</a></li><li><a href="/php/getting-started-with-php.html" class="sidebar-link">Getting started with PHP</a></li><li><a href="/php/variables.html" class="sidebar-link">Variables</a></li><li><a href="/php/variable-scope.html" class="sidebar-link">Variable Scope</a></li><li><a href="/php/superglobal-variables-php.html" class="sidebar-link">Superglobal Variables PHP</a></li><li><a href="/php/outputting-the-value-of-a-variable.html" class="sidebar-link">Outputting the Value of a Variable</a></li><li><a href="/php/constants.html" class="sidebar-link">Constants</a></li><li><a href="/php/magic-constants.html" class="sidebar-link">Magic Constants</a></li><li><a href="/php/comments.html" class="sidebar-link">Comments</a></li><li><a href="/php/types.html" class="sidebar-link">Types</a></li><li><a href="/php/operators.html" class="sidebar-link">Operators</a></li><li><a href="/php/references.html" class="sidebar-link">References</a></li><li><a href="/php/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/php/array-iteration.html" class="sidebar-link">Array iteration</a></li><li><a href="/php/executing-upon-an-array.html" class="sidebar-link">Executing Upon an Array</a></li><li><a href="/php/manipulating-an-array.html" class="sidebar-link">Manipulating an Array</a></li><li><a href="/php/processing-multiple-arrays-together.html" class="sidebar-link">Processing Multiple Arrays Together</a></li><li><a href="/php/datetime-class.html" class="sidebar-link">Datetime Class</a></li><li><a href="/php/working-with-dates-and-time.html" class="sidebar-link">Working with Dates and Time</a></li><li><a href="/php/control-structures.html" class="sidebar-link">Control Structures</a></li><li><a href="/php/loops.html" class="sidebar-link">Loops</a></li><li><a href="/php/functions.html" class="sidebar-link">Functions</a></li><li><a href="/php/functional-programming.html" class="sidebar-link">Functional Programming</a></li><li><a href="/php/alternative-syntax-for-control-structures.html" class="sidebar-link">Alternative Syntax for Control Structures</a></li><li><a href="/php/string-formatting.html" class="sidebar-link">String formatting</a></li><li><a href="/php/string-parsing.html" class="sidebar-link">String Parsing</a></li><li><a href="/php/classes-and-objects.html" class="sidebar-link">Classes and Objects</a></li><li><a href="/php/namespaces.html" class="sidebar-link">Namespaces</a></li><li><a href="/php/sessions.html" class="sidebar-link">Sessions</a></li><li><a href="/php/cookies.html" class="sidebar-link">Cookies</a></li><li><a href="/php/output-buffering.html" class="sidebar-link">Output Buffering</a></li><li><a href="/php/json.html" class="sidebar-link">JSON</a></li><li><a href="/php/soap-client.html" aria-current="page" class="active sidebar-link">SOAP Client</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/soap-client.html#wsdl-mode" class="sidebar-link">WSDL Mode</a></li><li class="sidebar-sub-header"><a href="/php/soap-client.html#non-wsdl-mode" class="sidebar-link">Non-WSDL Mode</a></li><li class="sidebar-sub-header"><a href="/php/soap-client.html#classmaps" class="sidebar-link">Classmaps</a></li><li class="sidebar-sub-header"><a href="/php/soap-client.html#tracing-soap-request-and-response" class="sidebar-link">Tracing SOAP request and response</a></li></ul></li><li><a href="/php/using-curl-in-php.html" class="sidebar-link">Using cURL in PHP</a></li><li><a href="/php/reflection.html" class="sidebar-link">Reflection</a></li><li><a href="/php/dependency-injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/php/xml.html" class="sidebar-link">XML</a></li><li><a href="/php/simplexml.html" class="sidebar-link">SimpleXML</a></li><li><a href="/php/parsing-html.html" class="sidebar-link">Parsing HTML</a></li><li><a href="/php/regular-expressions-regexp-pcre.html" class="sidebar-link">Regular Expressions (regexp/PCRE)</a></li><li><a href="/php/traits.html" class="sidebar-link">Traits</a></li><li><a href="/php/composer-dependency-manager.html" class="sidebar-link">Composer Dependency Manager</a></li><li><a href="/php/magic-methods.html" class="sidebar-link">Magic Methods</a></li><li><a href="/php/file-handling.html" class="sidebar-link">File handling</a></li><li><a href="/php/streams.html" class="sidebar-link">Streams</a></li><li><a href="/php/type-hinting.html" class="sidebar-link">Type hinting</a></li><li><a href="/php/filters-filter-functions.html" class="sidebar-link">Filters &amp; Filter Functions</a></li><li><a href="/php/generators.html" class="sidebar-link">Generators</a></li><li><a href="/php/utf-8.html" class="sidebar-link">UTF-8</a></li><li><a href="/php/how-to-break-down-an-url.html" class="sidebar-link">How to break down an URL</a></li><li><a href="/php/object-serialization.html" class="sidebar-link">Object Serialization</a></li><li><a href="/php/serialization.html" class="sidebar-link">Serialization</a></li><li><a href="/php/closure.html" class="sidebar-link">Closure</a></li><li><a href="/php/reading-request-data.html" class="sidebar-link">Reading Request Data</a></li><li><a href="/php/type-juggling-and-non-strict-comparison-issues.html" class="sidebar-link">Type juggling and Non-Strict Comparison Issues</a></li><li><a href="/php/sockets.html" class="sidebar-link">Sockets</a></li><li><a href="/php/pdo.html" class="sidebar-link">PDO</a></li><li><a href="/php/php-mysqli.html" class="sidebar-link">PHP MySQLi</a></li><li><a href="/php/sqlite3.html" class="sidebar-link">SQLite3</a></li><li><a href="/php/using-mongodb.html" class="sidebar-link">Using MongoDB</a></li><li><a href="/php/mongo-php.html" class="sidebar-link">mongo-php</a></li><li><a href="/php/using-redis-with-php.html" class="sidebar-link">Using Redis with PHP</a></li><li><a href="/php/sending-email.html" class="sidebar-link">Sending Email</a></li><li><a href="/php/using-sqlsrv.html" class="sidebar-link">Using SQLSRV</a></li><li><a href="/php/command-line-interface-cli.html" class="sidebar-link">Command Line Interface (CLI)</a></li><li><a href="/php/localization.html" class="sidebar-link">Localization</a></li><li><a href="/php/headers-manipulation.html" class="sidebar-link">Headers Manipulation</a></li><li><a href="/php/coding-conventions.html" class="sidebar-link">Coding Conventions</a></li><li><a href="/php/asynchronous-programming.html" class="sidebar-link">Asynchronous programming</a></li><li><a href="/php/how-to-detect-client-ip-address.html" class="sidebar-link">How to Detect Client IP Address</a></li><li><a href="/php/create-pdf-files-in-php.html" class="sidebar-link">Create PDF files in PHP</a></li><li><a href="/php/yaml-in-php.html" class="sidebar-link">YAML in PHP</a></li><li><a href="/php/image-processing-with-gd.html" class="sidebar-link">Image Processing with GD</a></li><li><a href="/php/imagick.html" class="sidebar-link">Imagick</a></li><li><a href="/php/soap-server.html" class="sidebar-link">SOAP Server</a></li><li><a href="/php/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/php/cache.html" class="sidebar-link">Cache</a></li><li><a href="/php/autoloading-primer.html" class="sidebar-link">Autoloading Primer</a></li><li><a href="/php/spl-data-structures.html" class="sidebar-link">SPL data structures</a></li><li><a href="/php/imap.html" class="sidebar-link">IMAP</a></li><li><a href="/php/http-authentication.html" class="sidebar-link">HTTP Authentication</a></li><li><a href="/php/websockets.html" class="sidebar-link">WebSockets</a></li><li><a href="/php/bc-math-binary-calculator.html" class="sidebar-link">BC Math (Binary Calculator)</a></li><li><a href="/php/docker-deployment.html" class="sidebar-link">Docker deployment</a></li><li><a href="/php/apcu.html" class="sidebar-link">APCu</a></li><li><a href="/php/php-built-in-server.html" class="sidebar-link">PHP Built in server</a></li><li><a href="/php/psr.html" class="sidebar-link">PSR</a></li><li><a href="/php/phpdoc.html" class="sidebar-link">PHPDoc</a></li><li><a href="/php/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/php/compile-php-extensions.html" class="sidebar-link">Compile PHP Extensions</a></li><li><a href="/php/common-errors.html" class="sidebar-link">Common Errors</a></li><li><a href="/php/compilation-of-errors-and-warnings.html" class="sidebar-link">Compilation of Errors and Warnings</a></li><li><a href="/php/exception-handling-and-error-reporting.html" class="sidebar-link">Exception Handling and Error Reporting</a></li><li><a href="/php/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/php/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/php/performance.html" class="sidebar-link">Performance</a></li><li><a href="/php/multiprocessing.html" class="sidebar-link">Multiprocessing</a></li><li><a href="/php/multi-threading-extension.html" class="sidebar-link">Multi Threading Extension</a></li><li><a href="/php/secure-remeber-me.html" class="sidebar-link">Secure Remeber Me</a></li><li><a href="/php/security.html" class="sidebar-link">Security</a></li><li><a href="/php/cryptography.html" class="sidebar-link">Cryptography</a></li><li><a href="/php/password-hashing-functions.html" class="sidebar-link">Password Hashing Functions</a></li><li><a href="/php/urls.html" class="sidebar-link">URLs</a></li><li><a href="/php/unicode-support-in-php.html" class="sidebar-link">Unicode Support in PHP</a></li><li><a href="/php/getting-started-with-php-7.html" class="sidebar-link">Getting started with php-7</a></li><li><a href="/php/null-coalesce-operator.html" class="sidebar-link">Null Coalesce Operator</a></li><li><a href="/php/spaceship-operator.html" class="sidebar-link">Spaceship operator</a></li><li><a href="/php/anonymous-class.html" class="sidebar-link">Anonymous class</a></li><li><a href="/php/contributing-to-the-php-manual.html" class="sidebar-link">Contributing to the PHP Manual</a></li><li><a href="/php/contributing-to-the-php-core.html" class="sidebar-link">Contributing to the PHP Core</a></li><li><a href="/php/getting-started-with-composer-php.html" class="sidebar-link">Getting started with composer-php</a></li><li><a href="/php/auto-loading-with-composer.html" class="sidebar-link">Auto loading with composer</a></li><li><a href="/php/how-to-use-private-repositories-with-composer.html" class="sidebar-link">How to use private repositories with Composer</a></li><li><a href="/php/getting-started-with-phpunit.html" class="sidebar-link">Getting Started with PHPUnit</a></li><li><a href="/php/assertions.html" class="sidebar-link">Assertions</a></li><li><a href="/php/test-doubles-mocks-and-stubs.html" class="sidebar-link">Test Doubles (Mocks and Stubs)</a></li><li><a href="/php/recipes.html" class="sidebar-link">Recipes</a></li><li><a href="/php/php-mysqli-affected-rows-returns-0-when-it-should-return-a-positive-integer.html" class="sidebar-link">php mysqli affected rows returns 0 when it should return a positive integer</a></li><li><a href="/php/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="soap-client"><a href="#soap-client" class="header-anchor">#</a> SOAP Client</h1> <h2 id="wsdl-mode"><a href="#wsdl-mode" class="header-anchor">#</a> WSDL Mode</h2> <p>First, create a new <code>SoapClient</code> object, passing the URL to the WSDL file and optionally, an array of options.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Create a new client object using a WSDL URL</span>
<span class="token variable">$soap</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SoapClient</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'https://example.com/soap.wsdl'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token comment"># This array and its values are optional</span>
    <span class="token string single-quoted-string">'soap_version'</span> <span class="token operator">=&gt;</span> <span class="token constant">SOAP_1_2</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'compression'</span> <span class="token operator">=&gt;</span> <span class="token class-name">SOAP_COMPRESSION_ACCEPT</span> <span class="token operator">|</span> <span class="token class-name">SOAP_COMPRESSION_GZIP</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'cache_wsdl'</span> <span class="token operator">=&gt;</span> <span class="token constant">WSDL_CACHE_BOTH</span><span class="token punctuation">,</span>
    <span class="token comment"># Helps with debugging</span>
    <span class="token string single-quoted-string">'trace'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">TRUE</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'exceptions'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">TRUE</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Then use the <code>$soap</code> object to call your SOAP methods.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$soap</span><span class="token operator">-&gt;</span><span class="token function">requestData</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'b'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="non-wsdl-mode"><a href="#non-wsdl-mode" class="header-anchor">#</a> Non-WSDL Mode</h2> <p>This is similar to WSDL mode, except we pass <code>NULL</code> as the WSDL file and make sure to set the <code>location</code> and <code>uri</code> options.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$soap</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SoapClient</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'location'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'https://example.com/soap/endpoint'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'uri'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'namespace'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="classmaps"><a href="#classmaps" class="header-anchor">#</a> Classmaps</h2> <p>When creating a SOAP Client in PHP, you can also set a <code>classmap</code> key in the configuration array. This <code>classmap</code> defines which types defined in the WSDL should be mapped to actual classes, instead of the default <code>StdClass</code>. The reason you would want to do this is because you can get auto-completion of fields and method calls on these classes, instead of having to guess which fields are set on the regular <code>StdClass</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">MyAddress</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token variable">$country</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$city</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$full_name</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$postal_code</span><span class="token punctuation">;</span> <span class="token comment">// or zip_code</span>
    <span class="token keyword">public</span> <span class="token variable">$house_number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">MyBook</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$author</span><span class="token punctuation">;</span>

    <span class="token comment">// The classmap also allows us to add useful functions to the objects</span>
    <span class="token comment">// that are returned from the SOAP operations.</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getShortDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string double-quoted-string">&quot;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">}</span></span>, written by <span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">author</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$soap_client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SoapClient</span><span class="token punctuation">(</span><span class="token variable">$link_to_wsdl</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token comment">// Other parameters</span>
    <span class="token string double-quoted-string">&quot;classmap&quot;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string double-quoted-string">&quot;Address&quot;</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">MyAddress</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// ::class simple returns class as string</span>
        <span class="token string double-quoted-string">&quot;Book&quot;</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">MyBook</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>After configuring the classmap, whenever you perform a certain operation that returns a type <code>Address</code> or <code>Book</code>, the SoapClient will instantiate that class, fill the fields with the data and return it from the operation call.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Lets assume 'getAddress(1234)' returns an Address by ID in the database</span>
<span class="token variable">$address</span> <span class="token operator">=</span> <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// $address is now of type MyAddress due to the classmap</span>
<span class="token keyword">echo</span> <span class="token variable">$address</span><span class="token operator">-&gt;</span><span class="token property">country</span><span class="token punctuation">;</span>

<span class="token comment">// Lets assume the same for 'getBook(1234)'</span>
<span class="token variable">$book</span> <span class="token operator">=</span> <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">getBook</span><span class="token punctuation">(</span><span class="token number">124</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// We can not use other functions defined on the MyBook class</span>
<span class="token keyword">echo</span> <span class="token variable">$book</span><span class="token operator">-&gt;</span><span class="token function">getShortDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Any type defined in the WSDL that is not defined in the classmap</span>
<span class="token comment">// will become a regular StdClass object</span>
<span class="token variable">$author</span> <span class="token operator">=</span> <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// No classmap for Author type, $author is regular StdClass.</span>
<span class="token comment">// We can still access fields, but no auto-completion and no custom functions</span>
<span class="token comment">// to define for the objects.</span>
<span class="token keyword">echo</span> <span class="token variable">$author</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="tracing-soap-request-and-response"><a href="#tracing-soap-request-and-response" class="header-anchor">#</a> Tracing SOAP request and response</h2> <p>Sometimes we want to look at what is sent and received in the SOAP request. The following methods will return the XML in the request and response:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">SoapClient</span><span class="token operator">::</span><span class="token function">__getLastRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name static-context">SoapClient</span><span class="token operator">::</span><span class="token function">__getLastRequestHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name static-context">SoapClient</span><span class="token operator">::</span><span class="token function">__getLastResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name static-context">SoapClient</span><span class="token operator">::</span><span class="token function">__getLastResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>For example, suppose we have an <code>ENVIRONMENT</code> constant and when this constant's value is set to <code>DEVELOPMENT</code> we want to echo all information when the call to <code>getAddress</code> throws an error. One solution could be:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token variable">$address</span> <span class="token operator">=</span> <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SoapFault</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">ENVIRONMENT</span> <span class="token operator">===</span> <span class="token string single-quoted-string">'DEVELOPMENT'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">var_dump</span><span class="token punctuation">(</span>
            <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">__getLastRequestHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">__getLastRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">__getLastResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token variable">$soap_client</span><span class="token operator">-&gt;</span><span class="token function">__getLastResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li><a href="http://php.net/manual/en/soapclient.getfunctions.php" target="_blank" rel="noopener noreferrer">__getFunctions()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> // Returns array of functions for service (WSDL mode only)</li> <li><a href="http://php.net/manual/en/soapclient.gettypes.php" target="_blank" rel="noopener noreferrer">__getTypes()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> // Returns array of types for service (WSDL mode only)</li> <li><a href="http://php.net/manual/en/soapclient.getlastrequest.php" target="_blank" rel="noopener noreferrer">__getLastRequest()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> // Returns XML from last request (Requires <code>trace</code> option)</li> <li><a href="http://php.net/manual/en/soapclient.getlastrequestheaders.php" target="_blank" rel="noopener noreferrer">__getLastRequestHeaders()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> // Returns headers from last request (Requires <code>trace</code> option)</li> <li><a href="http://php.net/manual/en/soapclient.getlastresponse.php" target="_blank" rel="noopener noreferrer">__getLastResponse()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> // Returns XML from last response (Requires <code>trace</code> option)</li> <li><a href="http://php.net/manual/en/soapclient.getlastresponseheaders.php" target="_blank" rel="noopener noreferrer">__getLastResponseHeaders()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> // Returns headers from last response (Requires <code>trace</code> option)</li></ul> <h4 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h4> <table><thead><tr><th>Parameter</th> <th>Details</th></tr></thead> <tbody><tr><td>$wsdl</td> <td>URI of WSDL or <code>NULL</code> if using non-WSDL mode</td></tr> <tr><td>$options</td> <td>Array of options for SoapClient.  Non-WSDL mode requires <code>location</code> and <code>uri</code> to set, all other options are optional.  See table below for possible values.</td></tr></tbody></table> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>The <code>SoapClient</code> class is equipped with a <code>__call</code> method.  This is <strong>not</strong> to be called directly.  Instead this allows you to do:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$soap</span><span class="token operator">-&gt;</span><span class="token function">requestInfo</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'b'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This will call the <code>requestInfo</code> SOAP method.</p> <p>Table of possible <code>$options</code> values (<strong>Array of key/value pairs</strong>):</p> <table><thead><tr><th>Option</th> <th>Details</th></tr></thead> <tbody><tr><td>location</td> <td>URL of SOAP server.  <strong>Required</strong> in non-WSDL mode.  Can be used in WSDL mode to override the URL.</td></tr> <tr><td>uri</td> <td>Target namespace of SOAP service.  <strong>Required</strong> in non-WSDL mode.</td></tr> <tr><td>style</td> <td>Possible values are <code>SOAP_RPC</code> or <code>SOAP_DOCUMENT</code>.  Only valid in non-WSDL mode.</td></tr> <tr><td>use</td> <td>Possible values are <code>SOAP_ENCODED</code> or <code>SOAP_LITERAL</code>.  Only valid in non-WSDL mode.</td></tr> <tr><td>soap_version</td> <td>Possible values are <code>SOAP_1_1</code> (<strong>default</strong>) or <code>SOAP_1_2</code>.</td></tr> <tr><td>authentication</td> <td>Enable HTTP authentication.  Possible values are <code>SOAP_AUTHENTICATION_BASIC</code> (<strong>default</strong>) or <code>SOAP_AUTHENTICATION_DIGEST</code>.</td></tr> <tr><td>login</td> <td>Username for HTTP authentication</td></tr> <tr><td>password</td> <td>Password for HTTP authentication</td></tr> <tr><td>proxy_host</td> <td>URL of proxy server</td></tr> <tr><td>proxy_port</td> <td>Proxy server port</td></tr> <tr><td>proxy_login</td> <td>Username for proxy</td></tr> <tr><td>proxy_password</td> <td>Password for proxy</td></tr> <tr><td>local_cert</td> <td>Path to HTTPS client cert (for authentication)</td></tr> <tr><td>passphrase</td> <td>Passphrase for HTTPS client cert</td></tr> <tr><td>compression</td> <td>Compress request / response.  Value is a bitmask of <code>SOAP_COMPRESSION_ACCEPT</code> with either <code>SOAP_COMPRESSION_GZIP</code> or <code>SOAP_COMPRESSION_DEFLATE</code>.  For example: <code>SOAP_COMPRESSION_ACCEPT \| SOAP_COMPRESSION_GZIP</code>.</td></tr> <tr><td>encoding</td> <td>Internal character encoding (TODO: possible values)</td></tr> <tr><td>trace</td> <td><strong>Boolean</strong>, defaults to <code>FALSE</code>. Enables tracing of requests so faults can be backtraced. Enables use of <code>__getLastRequest()</code>, <code>__getLastRequestHeaders()</code>, <code>__getLastResponse()</code> and <code>__getLastResponseHeaders()</code>.</td></tr> <tr><td>classmap</td> <td>Map WSDL types to PHP classes.  Value should be an array with WSDL types as keys and PHP class names as values.</td></tr> <tr><td>exceptions</td> <td><strong>Boolean</strong> value.  Should SOAP errors exceptions (of type `SoapFault).</td></tr> <tr><td>connection_timeout</td> <td>Timeout (in seconds) for the connection to the SOAP service.</td></tr> <tr><td>typemap</td> <td>Array of type mappings.  Array should be key/value pairs with the following keys: <code>type_name</code>, <code>type_ns</code> (namespace URI), <code>from_xml</code> (callback accepting one string parameter) and <code>to_xml</code> (callback accepting one object parameter).</td></tr> <tr><td>cache_wsdl</td> <td>How (if at all) should the WSDL file be cached.  Possible values are <code>WSDL_CACHE_NONE</code>, <code>WSDL_CACHE_DISK</code>, <code>WSDL_CACHE_MEMORY</code> or <code>WSDL_CACHE_BOTH</code>.</td></tr> <tr><td>user_agent</td> <td>String to use in the <code>User-Agent</code> header.</td></tr> <tr><td>stream_context</td> <td>A resource for a context.</td></tr> <tr><td>features</td> <td>Bitmask of <code>SOAP_SINGLE_ELEMENT_ARRAYS</code>, <code>SOAP_USE_XSI_ARRAY_TYPE</code>, <code>SOAP_WAIT_ONE_WAY_CALLS</code>.</td></tr> <tr><td>keep_alive</td> <td>(<strong>PHP version &gt;= 5.4 only</strong>) <strong>Boolean</strong> value.  Send either <code>Connection: Keep-Alive</code> header (<code>TRUE</code>) or <code>Connection: Close</code> header (<code>FALSE</code>).</td></tr> <tr><td>ssl_method</td> <td>(<strong>PHP version &gt;= 5.5 only</strong>) Which SSL/TLS version to use.  Possible values are <code>SOAP_SSL_METHOD_TLS</code>, <code>SOAP_SSL_METHOD_SSLv2</code>, <code>SOAP_SSL_METHOD_SSLv3</code> or <code>SOAP_SSL_METHOD_SSLv23</code>.</td></tr></tbody></table> <blockquote></blockquote> <p><strong><a href="http://stackoverflow.com/questions/19228213/php-soapclient-soap-request-with-long-integer" target="_blank" rel="noopener noreferrer">Issue with 32 bit PHP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</strong> In 32 bit PHP, numeric strings greater than 32 bits which are automatically cast to integer by <code>xs:long</code> will result in it hitting the 32 bit limit, casting it to <code>2147483647</code>. To work around this, cast the strings to float before passing it in to <code>__soapCall()</code>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/php/soap-client.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/php/json.html" class="prev">
        JSON
      </a></span> <span class="next"><a href="/php/using-curl-in-php.html">
        Using cURL in PHP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2508.61e2295a.js" defer></script>
  </body>
</html>
