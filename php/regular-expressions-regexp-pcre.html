<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP - Regular Expressions (regexp/PCRE)</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Global RegExp match, String matching with regular expressions, Split string into array by a regular expression, String replacing with regular expression, String replace with callback">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="PHP - Regular Expressions (regexp/PCRE)">
    <meta property="og:description" content="Global RegExp match, String matching with regular expressions, Split string into array by a regular expression, String replacing with regular expression, String replace with callback">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/php/regular-expressions-regexp-pcre.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="PHP - Regular Expressions (regexp/PCRE)">
    <meta name="twitter:description" content="Global RegExp match, String matching with regular expressions, Split string into array by a regular expression, String replacing with regular expression, String replace with callback">
    <meta name="twitter:url" content="/php/regular-expressions-regexp-pcre.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2501.bb73b933.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PHP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/php/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/php/installing-a-php-environment-on-windows.html" class="sidebar-link">Installing a PHP environment on Windows</a></li><li><a href="/php/installing-on-linux-unix-environments.html" class="sidebar-link">Installing on Linux/Unix Environments</a></li><li><a href="/php/getting-started-with-php.html" class="sidebar-link">Getting started with PHP</a></li><li><a href="/php/variables.html" class="sidebar-link">Variables</a></li><li><a href="/php/variable-scope.html" class="sidebar-link">Variable Scope</a></li><li><a href="/php/superglobal-variables-php.html" class="sidebar-link">Superglobal Variables PHP</a></li><li><a href="/php/outputting-the-value-of-a-variable.html" class="sidebar-link">Outputting the Value of a Variable</a></li><li><a href="/php/constants.html" class="sidebar-link">Constants</a></li><li><a href="/php/magic-constants.html" class="sidebar-link">Magic Constants</a></li><li><a href="/php/comments.html" class="sidebar-link">Comments</a></li><li><a href="/php/types.html" class="sidebar-link">Types</a></li><li><a href="/php/operators.html" class="sidebar-link">Operators</a></li><li><a href="/php/references.html" class="sidebar-link">References</a></li><li><a href="/php/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/php/array-iteration.html" class="sidebar-link">Array iteration</a></li><li><a href="/php/executing-upon-an-array.html" class="sidebar-link">Executing Upon an Array</a></li><li><a href="/php/manipulating-an-array.html" class="sidebar-link">Manipulating an Array</a></li><li><a href="/php/processing-multiple-arrays-together.html" class="sidebar-link">Processing Multiple Arrays Together</a></li><li><a href="/php/datetime-class.html" class="sidebar-link">Datetime Class</a></li><li><a href="/php/working-with-dates-and-time.html" class="sidebar-link">Working with Dates and Time</a></li><li><a href="/php/control-structures.html" class="sidebar-link">Control Structures</a></li><li><a href="/php/loops.html" class="sidebar-link">Loops</a></li><li><a href="/php/functions.html" class="sidebar-link">Functions</a></li><li><a href="/php/functional-programming.html" class="sidebar-link">Functional Programming</a></li><li><a href="/php/alternative-syntax-for-control-structures.html" class="sidebar-link">Alternative Syntax for Control Structures</a></li><li><a href="/php/string-formatting.html" class="sidebar-link">String formatting</a></li><li><a href="/php/string-parsing.html" class="sidebar-link">String Parsing</a></li><li><a href="/php/classes-and-objects.html" class="sidebar-link">Classes and Objects</a></li><li><a href="/php/namespaces.html" class="sidebar-link">Namespaces</a></li><li><a href="/php/sessions.html" class="sidebar-link">Sessions</a></li><li><a href="/php/cookies.html" class="sidebar-link">Cookies</a></li><li><a href="/php/output-buffering.html" class="sidebar-link">Output Buffering</a></li><li><a href="/php/json.html" class="sidebar-link">JSON</a></li><li><a href="/php/soap-client.html" class="sidebar-link">SOAP Client</a></li><li><a href="/php/using-curl-in-php.html" class="sidebar-link">Using cURL in PHP</a></li><li><a href="/php/reflection.html" class="sidebar-link">Reflection</a></li><li><a href="/php/dependency-injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/php/xml.html" class="sidebar-link">XML</a></li><li><a href="/php/simplexml.html" class="sidebar-link">SimpleXML</a></li><li><a href="/php/parsing-html.html" class="sidebar-link">Parsing HTML</a></li><li><a href="/php/regular-expressions-regexp-pcre.html" aria-current="page" class="active sidebar-link">Regular Expressions (regexp/PCRE)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/regular-expressions-regexp-pcre.html#global-regexp-match" class="sidebar-link">Global RegExp match</a></li><li class="sidebar-sub-header"><a href="/php/regular-expressions-regexp-pcre.html#string-matching-with-regular-expressions" class="sidebar-link">String matching with regular expressions</a></li><li class="sidebar-sub-header"><a href="/php/regular-expressions-regexp-pcre.html#split-string-into-array-by-a-regular-expression" class="sidebar-link">Split string into array by a regular expression</a></li><li class="sidebar-sub-header"><a href="/php/regular-expressions-regexp-pcre.html#string-replacing-with-regular-expression" class="sidebar-link">String replacing with regular expression</a></li><li class="sidebar-sub-header"><a href="/php/regular-expressions-regexp-pcre.html#string-replace-with-callback" class="sidebar-link">String replace with callback</a></li></ul></li><li><a href="/php/traits.html" class="sidebar-link">Traits</a></li><li><a href="/php/composer-dependency-manager.html" class="sidebar-link">Composer Dependency Manager</a></li><li><a href="/php/magic-methods.html" class="sidebar-link">Magic Methods</a></li><li><a href="/php/file-handling.html" class="sidebar-link">File handling</a></li><li><a href="/php/streams.html" class="sidebar-link">Streams</a></li><li><a href="/php/type-hinting.html" class="sidebar-link">Type hinting</a></li><li><a href="/php/filters-filter-functions.html" class="sidebar-link">Filters &amp; Filter Functions</a></li><li><a href="/php/generators.html" class="sidebar-link">Generators</a></li><li><a href="/php/utf-8.html" class="sidebar-link">UTF-8</a></li><li><a href="/php/how-to-break-down-an-url.html" class="sidebar-link">How to break down an URL</a></li><li><a href="/php/object-serialization.html" class="sidebar-link">Object Serialization</a></li><li><a href="/php/serialization.html" class="sidebar-link">Serialization</a></li><li><a href="/php/closure.html" class="sidebar-link">Closure</a></li><li><a href="/php/reading-request-data.html" class="sidebar-link">Reading Request Data</a></li><li><a href="/php/type-juggling-and-non-strict-comparison-issues.html" class="sidebar-link">Type juggling and Non-Strict Comparison Issues</a></li><li><a href="/php/sockets.html" class="sidebar-link">Sockets</a></li><li><a href="/php/pdo.html" class="sidebar-link">PDO</a></li><li><a href="/php/php-mysqli.html" class="sidebar-link">PHP MySQLi</a></li><li><a href="/php/sqlite3.html" class="sidebar-link">SQLite3</a></li><li><a href="/php/using-mongodb.html" class="sidebar-link">Using MongoDB</a></li><li><a href="/php/mongo-php.html" class="sidebar-link">mongo-php</a></li><li><a href="/php/using-redis-with-php.html" class="sidebar-link">Using Redis with PHP</a></li><li><a href="/php/sending-email.html" class="sidebar-link">Sending Email</a></li><li><a href="/php/using-sqlsrv.html" class="sidebar-link">Using SQLSRV</a></li><li><a href="/php/command-line-interface-cli.html" class="sidebar-link">Command Line Interface (CLI)</a></li><li><a href="/php/localization.html" class="sidebar-link">Localization</a></li><li><a href="/php/headers-manipulation.html" class="sidebar-link">Headers Manipulation</a></li><li><a href="/php/coding-conventions.html" class="sidebar-link">Coding Conventions</a></li><li><a href="/php/asynchronous-programming.html" class="sidebar-link">Asynchronous programming</a></li><li><a href="/php/how-to-detect-client-ip-address.html" class="sidebar-link">How to Detect Client IP Address</a></li><li><a href="/php/create-pdf-files-in-php.html" class="sidebar-link">Create PDF files in PHP</a></li><li><a href="/php/yaml-in-php.html" class="sidebar-link">YAML in PHP</a></li><li><a href="/php/image-processing-with-gd.html" class="sidebar-link">Image Processing with GD</a></li><li><a href="/php/imagick.html" class="sidebar-link">Imagick</a></li><li><a href="/php/soap-server.html" class="sidebar-link">SOAP Server</a></li><li><a href="/php/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/php/cache.html" class="sidebar-link">Cache</a></li><li><a href="/php/autoloading-primer.html" class="sidebar-link">Autoloading Primer</a></li><li><a href="/php/spl-data-structures.html" class="sidebar-link">SPL data structures</a></li><li><a href="/php/imap.html" class="sidebar-link">IMAP</a></li><li><a href="/php/http-authentication.html" class="sidebar-link">HTTP Authentication</a></li><li><a href="/php/websockets.html" class="sidebar-link">WebSockets</a></li><li><a href="/php/bc-math-binary-calculator.html" class="sidebar-link">BC Math (Binary Calculator)</a></li><li><a href="/php/docker-deployment.html" class="sidebar-link">Docker deployment</a></li><li><a href="/php/apcu.html" class="sidebar-link">APCu</a></li><li><a href="/php/php-built-in-server.html" class="sidebar-link">PHP Built in server</a></li><li><a href="/php/psr.html" class="sidebar-link">PSR</a></li><li><a href="/php/phpdoc.html" class="sidebar-link">PHPDoc</a></li><li><a href="/php/design-patterns.html" class="sidebar-link">Design Patterns</a></li><li><a href="/php/compile-php-extensions.html" class="sidebar-link">Compile PHP Extensions</a></li><li><a href="/php/common-errors.html" class="sidebar-link">Common Errors</a></li><li><a href="/php/compilation-of-errors-and-warnings.html" class="sidebar-link">Compilation of Errors and Warnings</a></li><li><a href="/php/exception-handling-and-error-reporting.html" class="sidebar-link">Exception Handling and Error Reporting</a></li><li><a href="/php/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/php/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/php/performance.html" class="sidebar-link">Performance</a></li><li><a href="/php/multiprocessing.html" class="sidebar-link">Multiprocessing</a></li><li><a href="/php/multi-threading-extension.html" class="sidebar-link">Multi Threading Extension</a></li><li><a href="/php/secure-remeber-me.html" class="sidebar-link">Secure Remeber Me</a></li><li><a href="/php/security.html" class="sidebar-link">Security</a></li><li><a href="/php/cryptography.html" class="sidebar-link">Cryptography</a></li><li><a href="/php/password-hashing-functions.html" class="sidebar-link">Password Hashing Functions</a></li><li><a href="/php/urls.html" class="sidebar-link">URLs</a></li><li><a href="/php/unicode-support-in-php.html" class="sidebar-link">Unicode Support in PHP</a></li><li><a href="/php/getting-started-with-php-7.html" class="sidebar-link">Getting started with php-7</a></li><li><a href="/php/null-coalesce-operator.html" class="sidebar-link">Null Coalesce Operator</a></li><li><a href="/php/spaceship-operator.html" class="sidebar-link">Spaceship operator</a></li><li><a href="/php/anonymous-class.html" class="sidebar-link">Anonymous class</a></li><li><a href="/php/contributing-to-the-php-manual.html" class="sidebar-link">Contributing to the PHP Manual</a></li><li><a href="/php/contributing-to-the-php-core.html" class="sidebar-link">Contributing to the PHP Core</a></li><li><a href="/php/getting-started-with-composer-php.html" class="sidebar-link">Getting started with composer-php</a></li><li><a href="/php/auto-loading-with-composer.html" class="sidebar-link">Auto loading with composer</a></li><li><a href="/php/how-to-use-private-repositories-with-composer.html" class="sidebar-link">How to use private repositories with Composer</a></li><li><a href="/php/getting-started-with-phpunit.html" class="sidebar-link">Getting Started with PHPUnit</a></li><li><a href="/php/assertions.html" class="sidebar-link">Assertions</a></li><li><a href="/php/test-doubles-mocks-and-stubs.html" class="sidebar-link">Test Doubles (Mocks and Stubs)</a></li><li><a href="/php/recipes.html" class="sidebar-link">Recipes</a></li><li><a href="/php/php-mysqli-affected-rows-returns-0-when-it-should-return-a-positive-integer.html" class="sidebar-link">php mysqli affected rows returns 0 when it should return a positive integer</a></li><li><a href="/php/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="regular-expressions-regexp-pcre"><a href="#regular-expressions-regexp-pcre" class="header-anchor">#</a> Regular Expressions (regexp/PCRE)</h1> <h2 id="global-regexp-match"><a href="#global-regexp-match" class="header-anchor">#</a> Global RegExp match</h2> <p>A <strong>global</strong> RegExp match can be performed using <code>preg_match_all</code>. <code>preg_match_all</code> returns all matching results in the subject string (in contrast to <code>preg_match</code>, which only returns the first one).</p> <p>The <code>preg_match_all</code> function returns the number of matches. Third parameter <code>$matches</code> will contain matches in format controlled by flags that can be given in fourth parameter.</p> <p>If given an array, <code>$matches</code> will contain array in similar format you’d get with <code>preg_match</code>, except that <code>preg_match</code> stops at first match, where <code>preg_match_all</code> iterates over the string until the string is wholly consumed and returns result of each iteration in a multidimensional array, which format can be controlled by the flag in fourth argument.</p> <p>The fourth argument, <code>$flags</code>, controls structure of <code>$matches</code> array. Default mode is <code>PREG_PATTERN_ORDER</code> and possible flags are <code>PREG_SET_ORDER</code> and <code>PREG_PATTERN_ORDER</code>.</p> <p>Following code demonstrates usage of <code>preg_match_all</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$subject</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;a1b c2d3e f4g&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$pattern</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'/[a-z]([0-9])[a-z]/'</span><span class="token punctuation">;</span>

<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">preg_match_all</span><span class="token punctuation">(</span><span class="token variable">$pattern</span><span class="token punctuation">,</span> <span class="token variable">$subject</span><span class="token punctuation">,</span> <span class="token variable">$matches</span><span class="token punctuation">,</span> <span class="token constant">PREG_SET_ORDER</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// int(3)</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">preg_match_all</span><span class="token punctuation">(</span><span class="token variable">$pattern</span><span class="token punctuation">,</span> <span class="token variable">$subject</span><span class="token punctuation">,</span> <span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the flag is PREG_PATTERN_ORDER by default</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// And for reference, same regexp run through preg_match()</span>
<span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token variable">$pattern</span><span class="token punctuation">,</span> <span class="token variable">$subject</span><span class="token punctuation">,</span> <span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The first var_dump from <code>PREG_SET_ORDER</code> gives this output:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;a1b&quot;</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;1&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;c2d&quot;</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;2&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;f4g&quot;</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;4&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>$matches</code> has three nested arrays. Each array represents one match, which has the same format as the return result of <code>preg_match</code>.</p> <p>The second var_dump (<code>PREG_PATTERN_ORDER</code>) gives this output:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;a1b&quot;</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;c2d&quot;</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;f4g&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
  <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;1&quot;</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;2&quot;</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=&gt;</span>
    <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;4&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>When the same regexp is run through <code>preg_match</code>, following array is returned:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;a1b&quot;</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span>
  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">&quot;1&quot;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="string-matching-with-regular-expressions"><a href="#string-matching-with-regular-expressions" class="header-anchor">#</a> String matching with regular expressions</h2> <p><code>preg_match</code> checks whether a string matches the regular expression.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$string</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'This is a string which contains numbers: 12345'</span><span class="token punctuation">;</span>

<span class="token variable">$isMatched</span> <span class="token operator">=</span> <span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'%^[a-zA-Z]+: [0-9]+$%'</span><span class="token punctuation">,</span> <span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$isMatched</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bool(true)</span>

</code></pre></div><p>If you pass in a third parameter, it will be populated with the matching data of the regular expression:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'%^([a-zA-Z]+): ([0-9]+)$%'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'This is a string which contains numbers: 12345'</span><span class="token punctuation">,</span> <span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// $matches now contains results of the regular expression matches in an array.</span>
<span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;numbers: 12345&quot;, &quot;numbers&quot;, &quot;12345&quot;]</span>

</code></pre></div><p><code>$matches</code> contains an array of the whole match then substrings in the regular expression bounded by parentheses, in the order of open parenthesis's offset. That means, if you have <code>/z(a(b))/</code> as the regular expression, index 0 contains the whole substring <code>zab</code>, index 1 contains the substring bounded by the outer parentheses <code>ab</code> and index 2 contains the inner parentheses <code>b</code>.</p> <h2 id="split-string-into-array-by-a-regular-expression"><a href="#split-string-into-array-by-a-regular-expression" class="header-anchor">#</a> Split string into array by a regular expression</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$string</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;0| PHP 1| CSS 2| HTML 3| AJAX 4| JSON&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//[0-9]: Any single character in the range 0 to 9</span>
<span class="token comment">// +   : One or more of 0 to 9</span>
<span class="token variable">$array</span> <span class="token operator">=</span> <span class="token function">preg_split</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/[0-9]+\|/&quot;</span><span class="token punctuation">,</span> <span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">PREG_SPLIT_NO_EMPTY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Or</span>
<span class="token comment">// []  : Character class</span>
<span class="token comment">// \d  : Any digit</span>
<span class="token comment">//  +  : One or more of Any digit</span>
<span class="token variable">$array</span> <span class="token operator">=</span> <span class="token function">preg_split</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/[\d]+\|/&quot;</span><span class="token punctuation">,</span> <span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">PREG_SPLIT_NO_EMPTY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Output:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">Array</span>
<span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span>  <span class="token constant">PHP</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span>  <span class="token constant">CSS</span> 
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span>  <span class="token constant">HTML</span> 
    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span>  <span class="token constant">AJAX</span> 
    <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span>  <span class="token constant">JSON</span>
<span class="token punctuation">)</span>

</code></pre></div><p>To split a string into a array simply pass the string and a regexp for <code>preg_split();</code> to match and search, adding a third parameter (<code>limit</code>) allows you to set the number of &quot;matches&quot; to perform, the remaining string will be added to the end of the array.</p> <p>The fourth parameter is (<code>flags</code>) here we use the <code>PREG_SPLIT_NO_EMPTY</code> which prevents our array from containing any empty keys / values.</p> <h2 id="string-replacing-with-regular-expression"><a href="#string-replacing-with-regular-expression" class="header-anchor">#</a> String replacing with regular expression</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$string</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;a;b;c\nd;e;f&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// $1, $2 and $3 represent the first, second and third capturing groups</span>
<span class="token keyword">echo</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;(^([^;]+);([^;]+);([^;]+)$)m&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;<span class="token interpolation"><span class="token variable">$3</span></span>;<span class="token interpolation"><span class="token variable">$2</span></span>;<span class="token interpolation"><span class="token variable">$1</span></span>&quot;</span><span class="token punctuation">,</span> <span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Outputs</p> <div class="language-php extra-class"><pre class="language-php"><code>c<span class="token punctuation">;</span>b<span class="token punctuation">;</span>a
f<span class="token punctuation">;</span>e<span class="token punctuation">;</span>d

</code></pre></div><p>Searches for everything between semicolons and reverses the order.</p> <h2 id="string-replace-with-callback"><a href="#string-replace-with-callback" class="header-anchor">#</a> String replace with callback</h2> <p><code>preg_replace_callback</code> works by sending every matched capturing group to the defined callback and replaces it with the return value of the callback.
This allows us to replace strings based on any kind of logic.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$subject</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;He said 123abc, I said 456efg, then she said 789hij&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$regex</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;/\b(\d+)\w+/&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// This function replaces the matched entries conditionally </span>
<span class="token comment">// depending upon the first character of the capturing group</span>
<span class="token keyword">function</span> <span class="token function-definition function">regex_replace</span><span class="token punctuation">(</span><span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token variable">$matches</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'7'</span><span class="token punctuation">:</span>
            <span class="token variable">$replacement</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;b&gt;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$matches</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>&lt;/b&gt;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token variable">$replacement</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;i&gt;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$matches</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>&lt;/i&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token variable">$replacement</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$replaced_str</span> <span class="token operator">=</span> <span class="token function">preg_replace_callback</span><span class="token punctuation">(</span><span class="token variable">$regex</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;regex_replace&quot;</span><span class="token punctuation">,</span> <span class="token variable">$subject</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$replaced_str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># He said &lt;i&gt;123abc&lt;/i&gt;, I said &lt;i&gt;456efg&lt;/i&gt;, then she said &lt;b&gt;789hij&lt;/b&gt; </span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li><code>preg_replace($pattern, $replacement, $subject, $limit = -1, $count = 0);</code></li> <li><code>preg_replace_callback($pattern, $callback, $subject, $limit = -1, $count = 0);</code></li> <li><code>preg_match($pattern, $subject, &amp;$matches, $flags = 0, $offset = 0);</code></li> <li><code>preg_match_all($pattern, $subject, &amp;$matches, $flags = PREG_PATTERN_ORDER, $offset = 0);</code></li> <li><code>preg_split($pattern, $subject, $limit = -1, $flags = 0)</code></li></ul> <h4 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h4> <table><thead><tr><th>Parameter</th> <th>Details</th></tr></thead> <tbody><tr><td><code>$pattern</code></td> <td>a string with a regular expression (PCRE pattern)</td></tr></tbody></table> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>PHP regular expressions follow PCRE pattern standards, which are derived from Perl regular expressions.</p> <p>All PCRE strings in PHP must be enclosed with delimiters. A delimiter can be any non-alphanumeric, non-backslash, non-whitespace character. Popular delimiters are <code>~</code>, <code>/</code>, <code>%</code> for instance.</p> <p>PCRE patterns can contain groups, character classes, character groups, look-ahead/look-behind assertions and escaped characters.</p> <p>It is possible to use PCRE modifiers in the <code>$pattern</code> string. Some common ones are <code>i</code> (case insensitive), <code>m</code> (multiline) and <code>s</code> (the dot metacharacter includes newlines). The <code>g</code> (global) modifier is not allowed, you will use the <code>preg_match_all</code> function instead.</p> <p>Matches to PCRE strings are done with <code>$</code> prefixed numbered strings:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token variable">$replaced</span> <span class="token operator">=</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'%hello ([a-z]+) world%'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'goodbye $1 world'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'hello awesome world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token variable">$replaced</span><span class="token punctuation">;</span> <span class="token comment">// 'goodbye awesome world'</span>

</span></code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/php/regular-expressions-regexp-pcre.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/php/parsing-html.html" class="prev">
        Parsing HTML
      </a></span> <span class="next"><a href="/php/traits.html">
        Traits
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2501.bb73b933.js" defer></script>
  </body>
</html>
