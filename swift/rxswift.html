<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Swift - RxSwift</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Disposing, RxSwift basics, Creating observables, Bindings, RxCocoa and ControlEvents">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Swift - RxSwift">
    <meta property="og:description" content="Disposing, RxSwift basics, Creating observables, Bindings, RxCocoa and ControlEvents">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/swift/rxswift.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Swift - RxSwift">
    <meta name="twitter:description" content="Disposing, RxSwift basics, Creating observables, Bindings, RxCocoa and ControlEvents">
    <meta name="twitter:url" content="/swift/rxswift.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/3353.f8126cdc.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Swift</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/swift/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/swift/getting-started-with-swift-language.html" class="sidebar-link">Getting started with Swift Language</a></li><li><a href="/swift/variables-properties.html" class="sidebar-link">Variables &amp; Properties</a></li><li><a href="/swift/numbers.html" class="sidebar-link">Numbers</a></li><li><a href="/swift/strings-and-characters.html" class="sidebar-link">Strings and Characters</a></li><li><a href="/swift/booleans.html" class="sidebar-link">Booleans</a></li><li><a href="/swift/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/swift/tuples.html" class="sidebar-link">Tuples</a></li><li><a href="/swift/enums.html" class="sidebar-link">Enums</a></li><li><a href="/swift/structs.html" class="sidebar-link">Structs</a></li><li><a href="/swift/sets.html" class="sidebar-link">Sets</a></li><li><a href="/swift/dictionaries.html" class="sidebar-link">Dictionaries</a></li><li><a href="/swift/switch.html" class="sidebar-link">Switch</a></li><li><a href="/swift/optionals.html" class="sidebar-link">Optionals</a></li><li><a href="/swift/conditionals.html" class="sidebar-link">Conditionals</a></li><li><a href="/swift/error-handling.html" class="sidebar-link">Error Handling</a></li><li><a href="/swift/loops.html" class="sidebar-link">Loops</a></li><li><a href="/swift/protocols.html" class="sidebar-link">Protocols</a></li><li><a href="/swift/functions.html" class="sidebar-link">Functions</a></li><li><a href="/swift/extensions.html" class="sidebar-link">Extensions</a></li><li><a href="/swift/classes.html" class="sidebar-link">Classes</a></li><li><a href="/swift/type-casting.html" class="sidebar-link">Type Casting</a></li><li><a href="/swift/generics.html" class="sidebar-link">Generics</a></li><li><a href="/swift/optionset.html" class="sidebar-link">OptionSet</a></li><li><a href="/swift/reading-writing-json.html" class="sidebar-link">Reading &amp; Writing JSON</a></li><li><a href="/swift/advanced-operators.html" class="sidebar-link">Advanced Operators</a></li><li><a href="/swift/method-swizzling.html" class="sidebar-link">Method Swizzling</a></li><li><a href="/swift/reflection.html" class="sidebar-link">Reflection</a></li><li><a href="/swift/access-control.html" class="sidebar-link">Access Control</a></li><li><a href="/swift/closures.html" class="sidebar-link">Closures</a></li><li><a href="/swift/initializers.html" class="sidebar-link">Initializers</a></li><li><a href="/swift/associated-objects.html" class="sidebar-link">Associated Objects</a></li><li><a href="/swift/concurrency.html" class="sidebar-link">Concurrency</a></li><li><a href="/swift/getting-started-with-protocol-oriented-programming.html" class="sidebar-link">Getting Started with Protocol Oriented Programming</a></li><li><a href="/swift/functional-programming-in-swift.html" class="sidebar-link">Functional Programming in Swift</a></li><li><a href="/swift/function-as-first-class-citizens-in-swift.html" class="sidebar-link">Function as first class citizens in Swift</a></li><li><a href="/swift/blocks.html" class="sidebar-link">Blocks</a></li><li><a href="/swift/the-defer-statement.html" class="sidebar-link">The Defer Statement</a></li><li><a href="/swift/style-conventions.html" class="sidebar-link">Style Conventions</a></li><li><a href="/swift/nsregularexpression-in-swift.html" class="sidebar-link">NSRegularExpression in Swift</a></li><li><a href="/swift/rxswift.html" aria-current="page" class="active sidebar-link">RxSwift</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/swift/rxswift.html#disposing" class="sidebar-link">Disposing</a></li><li class="sidebar-sub-header"><a href="/swift/rxswift.html#rxswift-basics" class="sidebar-link">RxSwift basics</a></li><li class="sidebar-sub-header"><a href="/swift/rxswift.html#creating-observables" class="sidebar-link">Creating observables</a></li><li class="sidebar-sub-header"><a href="/swift/rxswift.html#bindings" class="sidebar-link">Bindings</a></li><li class="sidebar-sub-header"><a href="/swift/rxswift.html#rxcocoa-and-controlevents" class="sidebar-link">RxCocoa and ControlEvents</a></li></ul></li><li><a href="/swift/swift-package-manager.html" class="sidebar-link">Swift Package Manager</a></li><li><a href="/swift/working-with-c-and-objective-c.html" class="sidebar-link">Working with C and Objective-C</a></li><li><a href="/swift/documentation-markup.html" class="sidebar-link">Documentation markup</a></li><li><a href="/swift/typealias.html" class="sidebar-link">Typealias</a></li><li><a href="/swift/dependency-injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/swift/caching-on-disk-space.html" class="sidebar-link">Caching on disk space</a></li><li><a href="/swift/algorithms-with-swift.html" class="sidebar-link">Algorithms with Swift</a></li><li><a href="/swift/swift-advance-functions.html" class="sidebar-link">Swift Advance functions</a></li><li><a href="/swift/completion-handler.html" class="sidebar-link">Completion Handler</a></li><li><a href="/swift/swift-http-server-by-kitura.html" class="sidebar-link">Swift HTTP server by Kitura</a></li><li><a href="/swift/generate-uiimage-of-initials-from-string.html" class="sidebar-link">Generate UIImage of Initials from String</a></li><li><a href="/swift/design-patterns-creational.html" class="sidebar-link">Design Patterns - Creational</a></li><li><a href="/swift/design-patterns-structural.html" class="sidebar-link">Design Patterns - Structural</a></li><li><a href="/swift/unsafe-buffer-pointers.html" class="sidebar-link">(Unsafe) Buffer Pointers</a></li><li><a href="/swift/cryptographic-hashing.html" class="sidebar-link">Cryptographic Hashing</a></li><li><a href="/swift/aes-encryption.html" class="sidebar-link">AES encryption</a></li><li><a href="/swift/pbkdf2-key-derivation.html" class="sidebar-link">PBKDF2 Key Derivation</a></li><li><a href="/swift/logging-in-swift.html" class="sidebar-link">Logging in Swift</a></li><li><a href="/swift/memory-management.html" class="sidebar-link">Memory Management</a></li><li><a href="/swift/performance.html" class="sidebar-link">Performance</a></li><li><a href="/swift/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rxswift"><a href="#rxswift" class="header-anchor">#</a> RxSwift</h1> <h2 id="disposing"><a href="#disposing" class="header-anchor">#</a> Disposing</h2> <p>After the subscription was created, it is important to manage its correct deallocation.</p> <p>The docs told us that</p> <blockquote></blockquote> <p>If a sequence terminates in finite time, not calling dispose or not using addDisposableTo(disposeBag) won't cause any permanent resource leaks. However, those resources will be used until the sequence completes, either by finishing production of elements or returning an error.</p> <p>There are two ways of deallocate resources.</p> <ol><li>Using <code>disposeBag</code>s and <code>addDisposableTo</code> operator.</li> <li>Using <code>takeUntil</code> operator.</li></ol> <p>In the first case you manually pass the subscription to the <code>DisposeBag</code> object, which correctly clears all taken memory.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> bag <span class="token operator">=</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>subscribeNext <span class="token punctuation">{</span> 
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">addDisposableTo</span><span class="token punctuation">(</span>bag<span class="token punctuation">)</span>

</code></pre></div><p>You don't actually need to create <code>DisposeBag</code>s in every class that you create, just take a look at <strong>RxSwift Community</strong>'s project named <a href="https://github.com/RxSwiftCommunity/NSObject-Rx" target="_blank" rel="noopener noreferrer">NSObject+Rx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Using the framework the code above can be rewritten as follows:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>subscribeNext <span class="token punctuation">{</span> 
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">addDisposableTo</span><span class="token punctuation">(</span>rx_disposeBag<span class="token punctuation">)</span>

</code></pre></div><p>In the second case, if the subscription time coincides with the <code>self</code> object lifetime, it is possible to implement disposing using <code>takeUntil(rx_deallocated)</code>:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> <span class="token omit keyword">_</span> <span class="token operator">=</span> sequence
    <span class="token punctuation">.</span><span class="token function">takeUntil</span><span class="token punctuation">(</span>rx_deallocated<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>subscribe <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

</code></pre></div><h2 id="rxswift-basics"><a href="#rxswift-basics" class="header-anchor">#</a> RxSwift basics</h2> <p>FRP, or Functional Reactive Programming, has some basic terms which you need to know.</p> <p>Every piece of data can be represented as <code>Observable</code>, which is an asynchronous data stream. The power of FRP is in representation synchronous and asynchronous events as streams, <code>Observable</code>s, and providing the same interface to work with it.</p> <p>Usually <code>Observable</code> holds several (or none) events that holds the date - <code>.Next</code> events, and then it can be terminated successfully (<code>.Success</code>) or with an error (<code>.Error</code>).</p> <p>Let's take a look at following marble diagram:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">--</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">|--&gt;</span>

</code></pre></div><p>In this example there is a stream of <code>Int</code> values. As time moves forward, three <code>.Next</code> events occurred, and then the stream terminated successfully.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">--</span><span class="token class-name">X</span><span class="token operator">-&gt;</span>

</code></pre></div><p>The diagram above shows a case where no data was emitted and <code>.Error</code> event terminates the <code>Observable</code>.</p> <p>Before we move on, there are some useful resources:</p> <ol><li><a href="https://github.com/ReactiveX/RxSwift" target="_blank" rel="noopener noreferrer">RxSwift<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Look at examples, read docs and getting started.</li> <li><a href="http://rxswift.slack.com" target="_blank" rel="noopener noreferrer">RxSwift Slack room<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> has a few channels for education problem solving.</li> <li>Play around with <a href="http://rxmarbles.com/" target="_blank" rel="noopener noreferrer">RxMarbles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to know what operator does, and which is the most useful in your case.</li> <li>Take a look <a href="https://github.com/scotteg/RxSwiftPlayer" target="_blank" rel="noopener noreferrer">on this example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, explore the code by yourself.</li></ol> <h2 id="creating-observables"><a href="#creating-observables" class="header-anchor">#</a> Creating observables</h2> <p><strong>RxSwift</strong> offers many ways to create an <code>Observable</code>, let's take a look:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">RxSwift</span>

<span class="token keyword">let</span> intObservale <span class="token operator">=</span> <span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// Observable&lt;Int&gt;</span>
<span class="token keyword">let</span> stringObservale <span class="token operator">=</span> <span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;RxSwift&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// Observable&lt;String&gt;</span>
<span class="token keyword">let</span> doubleObservale <span class="token operator">=</span> <span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span> <span class="token comment">// Observable&lt;Double&gt;</span>

</code></pre></div><p>So, the observables are created. They holds just one value and then terminates with success. Nevertheless, nothing happening after it was created. Why?</p> <p>There are two steps in working with <code>Observable</code>s: you <strong>observe</strong> something to <strong>create</strong> a stream and then you <strong>subscribe</strong> to the stream or <strong>bind</strong> it to something to <strong>interact</strong> with it.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">.</span>subscribe <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The console will print:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token punctuation">.</span><span class="token class-name">Next</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token class-name">Completed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>And if I interested only in working with data, which take place in <code>.Next</code> events, I'd use <code>subscribeNext</code> operator:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">.</span>subscribeNext <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span> <span class="token comment">// prints &quot;12&quot; now</span>
<span class="token punctuation">}</span>

</code></pre></div><p>If I want create an observable of many values, I use different operators:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>subscribeNext <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// 2</span>
<span class="token comment">// 3</span>
<span class="token comment">// 4</span>
<span class="token comment">// 5</span>

<span class="token comment">// I can represent existing data types as Observables also:</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>subscribeNext <span class="token punctuation">{</span> 
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token comment">// result is the same as before.</span>

</code></pre></div><p>And finally, maybe I want an <code>Observable</code> that does some work. For example, it is convenient to wrap a network operation into <code>Observable&lt;SomeResultType&gt;</code>. Let's take a look of do one can achieve this:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token class-name">Observable</span><span class="token punctuation">.</span>create <span class="token punctuation">{</span> observer <span class="token keyword">in</span>    <span class="token comment">// create an Observable ...</span>
    <span class="token class-name">MyNetworkService</span><span class="token punctuation">.</span>doSomeWorkWithCompletion <span class="token punctuation">{</span> <span class="token punctuation">(</span>result<span class="token punctuation">,</span> error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>    <span class="token comment">// ..that either holds an error</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">onNext</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// ..or emits the data</span>
            observer<span class="token punctuation">.</span><span class="token function">onCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// ..and terminates successfully.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">NopDisposable</span><span class="token punctuation">.</span>instance <span class="token comment">// here you can manually free any resources</span>
                                <span class="token comment">//in case if this observable is being disposed.</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="bindings"><a href="#bindings" class="header-anchor">#</a> Bindings</h2> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">combineLatest</span><span class="token punctuation">(</span>firstName<span class="token punctuation">.</span>rx_text<span class="token punctuation">,</span> lastName<span class="token punctuation">.</span>rx_text<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">+</span> <span class="token string-literal"><span class="token string">&quot; &quot;</span></span> <span class="token operator">+</span> <span class="token short-argument">$1</span> <span class="token punctuation">}</span>
<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">&quot;Greetings, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token short-argument">$0</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span> <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>greetingLabel<span class="token punctuation">.</span>rx_text<span class="token punctuation">)</span>

</code></pre></div><p>Using the <code>combineLatest</code> operator every time an item is emitted by either of two <code>Observables</code>, combine the latest item emitted by each <code>Observable</code>. So in this way we combine the result of the two <code>UITextField</code>'s creating a new message with the text <code>&quot;Greetings, \($0)&quot;</code> using string interpolation to later bind to the text of a  <code>UILabel</code>.</p> <p>We can bind data to any <code>UITableView</code> and <code>UICollectionView</code> in an very easy way:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>viewModel
<span class="token punctuation">.</span>rows
<span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>resultsTableView<span class="token punctuation">.</span><span class="token function">rx_itemsWithCellIdentifier</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;WikipediaSearchCell&quot;</span></span><span class="token punctuation">,</span> cellType<span class="token punctuation">:</span> <span class="token class-name">WikipediaSearchCell</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span><span class="token punctuation">,</span> viewModel<span class="token punctuation">,</span> cell<span class="token punctuation">)</span> <span class="token keyword">in</span>
    cell<span class="token punctuation">.</span>title <span class="token operator">=</span> viewModel<span class="token punctuation">.</span>title
    cell<span class="token punctuation">.</span>url <span class="token operator">=</span> viewModel<span class="token punctuation">.</span>url
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">addDisposableTo</span><span class="token punctuation">(</span>disposeBag<span class="token punctuation">)</span>

</code></pre></div><p>That’s an Rx wrapper around the <code>cellForRowAtIndexPath</code> data source method. And also Rx takes care of the implementation of the <code>numberOfRowsAtIndexPath</code>, which is a required method in a traditional sense, but you don’t have to implement it here, it’s taken care of.</p> <h2 id="rxcocoa-and-controlevents"><a href="#rxcocoa-and-controlevents" class="header-anchor">#</a> RxCocoa and ControlEvents</h2> <p>RxSwift provides not only the ways to control your data, but to represent user actions in a reactive way also.</p> <p>RxCocoa contains everything you need. It wraps most of the UI components' properties into <code>Observable</code>s, but not really. There are some upgraded <code>Observable</code>s called <code>ControlEvent</code>s (which represent events) and <code>ControlProperties</code> (which represent properties, surprise!). These things holds <code>Observable</code> streams under the hood, but also have some nuances:</p> <ul><li>It never fails, so no errors.</li> <li>It will <code>Complete</code> sequence on control being deallocated.</li> <li>It delivers events on the main thread (<code>MainScheduler.instance</code>).</li></ul> <p>Basically, you can work with them as usual:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>button<span class="token punctuation">.</span>rx_tap<span class="token punctuation">.</span>subscribeNext <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span>   <span class="token comment">// control event</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;User tapped the button!&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">addDisposableTo</span><span class="token punctuation">(</span>bag<span class="token punctuation">)</span>

textField<span class="token punctuation">.</span>rx_text<span class="token punctuation">.</span>subscribeNext <span class="token punctuation">{</span> text <span class="token keyword">in</span> <span class="token comment">// control property</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;The textfield contains: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">text</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">addDisposableTo</span><span class="token punctuation">(</span>bag<span class="token punctuation">)</span>
<span class="token comment">// notice that ControlProperty generates .Next event on subscription</span>
<span class="token comment">// In this case, the log will display </span>
<span class="token comment">// &quot;The textfield contains: &quot;</span>
<span class="token comment">// at the very start of the app.</span>

</code></pre></div><p>This is very important to use: as long as you use Rx, forget about the <code>@IBAction</code> stuff, everything you need you can bind and configure at once. For example, <code>viewDidLoad</code> method of your view controller is a good candidate to describe how the UI-components work.</p> <p>Ok, another example: suppose we have a textfield, a button, and a label. We want to <strong>validate text</strong> in the textfield when we <strong>tap</strong> the button, and <strong>display</strong> the results in the label. Yep, seems like an another validate-email task, huh?</p> <p>First of all, we grab the <code>button.rx_tap</code> ControlEvent:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">----</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-----------------------</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-----&gt;</span>

</code></pre></div><p>Here empty parenthesis show user taps. Next, we take what's written in the textField with <code>withLatestFrom</code> operator (take a look at it <a href="http://rxmarbles.com/#withLatestFrom" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, imagine that upper stream represents user taps, bottom one represents text in the text field).</p> <div class="language-swift extra-class"><pre class="language-swift"><code>button<span class="token punctuation">.</span>rx_tap<span class="token punctuation">.</span><span class="token function">withLatestFrom</span><span class="token punctuation">(</span>textField<span class="token punctuation">.</span>rx_text<span class="token punctuation">)</span>

<span class="token operator">----</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span><span class="token operator">--------------------</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;123&quot;</span></span><span class="token punctuation">)</span><span class="token operator">---&gt;</span>
<span class="token comment">//  ^ tap   ^ i wrote 123    ^ tap</span>

</code></pre></div><p>Nice, we have a stream of strings to validate, emitted only when we need to validate.</p> <p>Any <code>Observable</code> has such familiar operators as <code>map</code> or <code>filter</code>, we'll take <code>map</code> to validate the text. Create <code>validateEmail</code> function yourself, use any regex you want.</p> <div class="language-swift extra-class"><pre class="language-swift"><code>button<span class="token punctuation">.</span>rx_tap                                <span class="token comment">// ControlEvent&lt;Void&gt;</span>
        <span class="token punctuation">.</span><span class="token function">withLatestFrom</span><span class="token punctuation">(</span>textField<span class="token punctuation">.</span>rx_text<span class="token punctuation">)</span>   <span class="token comment">// Observable&lt;String&gt;</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>validateEmail<span class="token punctuation">)</span>                  <span class="token comment">// Observable&lt;Bool&gt;</span>
        <span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token punctuation">(</span>isCorrect<span class="token punctuation">)</span> <span class="token keyword">in</span>
            <span class="token keyword">return</span> isCorrect <span class="token operator">?</span> <span class="token string-literal"><span class="token string">&quot;Email is correct&quot;</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Input the correct one, please&quot;</span></span>
        <span class="token punctuation">}</span>                                    <span class="token comment">// Observable&lt;String&gt;</span>
        <span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>label<span class="token punctuation">.</span>rx_text<span class="token punctuation">)</span>              
        <span class="token punctuation">.</span><span class="token function">addDisposableTo</span><span class="token punctuation">(</span>bag<span class="token punctuation">)</span> 

</code></pre></div><p>Done! If you need more custom logic (like showing error views in case of error, making a transition to another screen on success...), just subscribe to the final <code>Bool</code> stream and write it there.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/swift/rxswift.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/swift/nsregularexpression-in-swift.html" class="prev">
        NSRegularExpression in Swift
      </a></span> <span class="next"><a href="/swift/swift-package-manager.html">
        Swift Package Manager
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/3353.f8126cdc.js" defer></script>
  </body>
</html>
