<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB - CRUD Operation</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Create, Update, Delete, Read, More update operators, multi Parameter while updating multiple documents, Update of embedded documents.">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MongoDB - CRUD Operation">
    <meta property="og:description" content="Create, Update, Delete, Read, More update operators, multi Parameter while updating multiple documents, Update of embedded documents.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/mongodb/crud-operation.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MongoDB - CRUD Operation">
    <meta name="twitter:description" content="Create, Update, Delete, Read, More update operators, multi Parameter while updating multiple documents, Update of embedded documents.">
    <meta name="twitter:url" content="/mongodb/crud-operation.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/1951.a952a230.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MongoDB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mongodb/" class="sidebar-link">Disclaimer</a></li><li><a href="/mongodb/getting-started-with-mongodb.html" class="sidebar-link">Getting started with MongoDB</a></li><li><a href="/mongodb/crud-operation.html" class="active sidebar-link">CRUD Operation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mongodb/crud-operation.html#create" class="sidebar-link">Create</a></li><li class="sidebar-sub-header"><a href="/mongodb/crud-operation.html#update" class="sidebar-link">Update</a></li><li class="sidebar-sub-header"><a href="/mongodb/crud-operation.html#delete" class="sidebar-link">Delete</a></li><li class="sidebar-sub-header"><a href="/mongodb/crud-operation.html#read" class="sidebar-link">Read</a></li><li class="sidebar-sub-header"><a href="/mongodb/crud-operation.html#more-update-operators" class="sidebar-link">More update operators</a></li><li class="sidebar-sub-header"><a href="/mongodb/crud-operation.html#multi-parameter-while-updating-multiple-documents" class="sidebar-link">&quot;multi&quot; Parameter while updating multiple documents</a></li><li class="sidebar-sub-header"><a href="/mongodb/crud-operation.html#update-of-embedded-documents" class="sidebar-link">Update of embedded documents.</a></li></ul></li><li><a href="/mongodb/getting-database-information.html" class="sidebar-link">Getting database information</a></li><li><a href="/mongodb/querying-for-data-getting-started.html" class="sidebar-link">Querying for Data ( Getting Started )</a></li><li><a href="/mongodb/update-operators.html" class="sidebar-link">Update Operators</a></li><li><a href="/mongodb/upserts-and-inserts.html" class="sidebar-link">Upserts and Inserts</a></li><li><a href="/mongodb/collections.html" class="sidebar-link">Collections</a></li><li><a href="/mongodb/mongodb-aggregation.html" class="sidebar-link">MongoDB Aggregation</a></li><li><a href="/mongodb/aggregation.html" class="sidebar-link">Aggregation</a></li><li><a href="/mongodb/indexes.html" class="sidebar-link">Indexes</a></li><li><a href="/mongodb/bulk-operations.html" class="sidebar-link">Bulk Operations</a></li><li><a href="/mongodb/2dsphere-index.html" class="sidebar-link">2dsphere Index</a></li><li><a href="/mongodb/pluggable-storage-engines.html" class="sidebar-link">Pluggable Storage Engines</a></li><li><a href="/mongodb/java-driver.html" class="sidebar-link">Java Driver</a></li><li><a href="/mongodb/python-driver.html" class="sidebar-link">Python Driver</a></li><li><a href="/mongodb/mongo-as-shards.html" class="sidebar-link">Mongo as Shards</a></li><li><a href="/mongodb/replication.html" class="sidebar-link">Replication</a></li><li><a href="/mongodb/mongo-as-a-replica-set.html" class="sidebar-link">Mongo as a Replica Set</a></li><li><a href="/mongodb/mongodb-configure-a-replicaset-to-support-tls-ssl.html" class="sidebar-link">MongoDB - Configure a ReplicaSet to support TLS/SSL</a></li><li><a href="/mongodb/authentication-mechanisms-in-mongodb.html" class="sidebar-link">Authentication Mechanisms in MongoDB</a></li><li><a href="/mongodb/mongodb-authorization-model.html" class="sidebar-link">MongoDB Authorization Model</a></li><li><a href="/mongodb/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/mongodb/backing-up-and-restoring-data.html" class="sidebar-link">Backing up and Restoring Data</a></li><li><a href="/mongodb/upgrading-mongodb-version.html" class="sidebar-link">Upgrading MongoDB version</a></li><li><a href="/mongodb/backing-up-and-restoring-data.html" class="sidebar-link">Backing up and Restoring Data</a></li><li><a href="/mongodb/mongo-as-a-replica-set.html" class="sidebar-link">Mongo as a Replica Set</a></li><li><a href="/mongodb/managing-mongodb.html" class="sidebar-link">Managing MongoDB</a></li><li><a href="/mongodb/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="crud-operation"><a href="#crud-operation" class="header-anchor">#</a> CRUD Operation</h1> <h2 id="create"><a href="#create" class="header-anchor">#</a> Create</h2> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Or</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The difference with <a href="https://docs.mongodb.com/manual/reference/method/db.collection.save/#db.collection.save" target="_blank" rel="noopener noreferrer"><code>save</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is that if the passed document contains an <code>_id</code> field, if a document already exists with that <code>_id</code> it will be updated instead of being added as new.</p> <p>Two new methods to insert documents into a collection, in MongoDB 3.2.x:-</p> <p>Use <code>insertOne</code> to insert only one record:-</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Use <code>insertMany</code> to insert multiple records:-</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Kathy'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre></div><p>Note that  <code>insert</code> is highlighted as deprecated in every official language driver since version 3.0. The full distinction being that the shell methods actually lagged behind the other drivers in implementing the method. The same thing applies for all other CRUD methods</p> <h2 id="update"><a href="#update" class="header-anchor">#</a> Update</h2> <p>Update the <strong>entire</strong> object:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// New in MongoDB 3.2</span>
db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//Will replace only first matching document.</span>

db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//Will replace all matching documents.</span>

</code></pre></div><p>Or just update a single field of a document. In this case <code>age</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>$<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>You can also update multiple documents simultaneously by adding a third parameter. This query will update all documents where the name equals <code>Tom</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>$<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>multi<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// New in MongoDB 3.2</span>
db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>$<span class="token keyword">set</span><span class="token operator">:</span><span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//Will update only first matching document.</span>

db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>$<span class="token keyword">set</span><span class="token operator">:</span><span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//Will update all matching documents.</span>

</code></pre></div><p>If a new field is coming for update, that field will be added to the document.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>$<span class="token keyword">set</span><span class="token operator">:</span><span class="token punctuation">{</span>age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> salary<span class="token operator">:</span><span class="token number">50000</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// Document will have `salary` field as well.</span>

</code></pre></div><p>If a document is needed to be replaced,</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>collection<span class="token punctuation">.</span><span class="token function">replaceOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'Lakmal'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span>address<span class="token operator">:</span><span class="token string">'Sri Lanka'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>can be used.</p> <p><strong>Note</strong>: Fields you use to identify the object will be saved in the updated document. Field that are not defined in the update section will be removed from the document.</p> <h2 id="delete"><a href="#delete" class="header-anchor">#</a> Delete</h2> <p>Deletes all documents matching the query parameter:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// New in MongoDB 3.2</span>
db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// All versions</span>
db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Or just one</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// New in MongoDB 3.2</span>
db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">deleteOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// All versions</span>
db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

</code></pre></div><p>MongoDB's <code>remove()</code> method. If you execute this command without any argument or without empty argument it will remove all documents from the collection.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>or</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="read"><a href="#read" class="header-anchor">#</a> Read</h2> <p>Query for all the docs in the <code>people</code> collection that have a <code>name</code> field with a value of <code>'Tom'</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Or just the first one:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>You can also specify which fields to return by passing a field selection parameter. The following will exclude the <code>_id</code> field and only include the <code>age</code> field:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>_id<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Note: by default, the <code>_id</code> field will be returned, even if you don't ask for it. If you would like not to get the <code>_id</code> back, you can just follow the previous example and ask for the <code>_id</code> to be excluded by specifying <code>_id: 0</code> (or <code>_id: false</code>).If you want to find sub record like address object contains country, city, etc.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'address.country'</span><span class="token operator">:</span> <span class="token string">'US'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>&amp; specify field too if required</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'address.country'</span><span class="token operator">:</span> <span class="token string">'US'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'address.city'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>Remember that the result has a <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.pretty()</span><span class="token template-punctuation string">`</span></span> method that pretty<span class="token operator">-</span>prints resulting <span class="token constant">JSON</span><span class="token operator">:</span>

db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="more-update-operators"><a href="#more-update-operators" class="header-anchor">#</a> More update operators</h2> <p>You can use other operators besides <code>$set</code> when updating a document.
The <code>$push</code> operator allows you to push a value into an array, in this case we will add a new nickname to the <code>nicknames</code> array.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>$push<span class="token operator">:</span> <span class="token punctuation">{</span>nicknames<span class="token operator">:</span> <span class="token string">'Tommy'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// This adds the string 'Tommy' into the nicknames array in Tom's document.</span>

</code></pre></div><p>The <code>$pull</code> operator is the opposite of <code>$push</code>, you can pull specific items from arrays.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>$pull<span class="token operator">:</span> <span class="token punctuation">{</span>nicknames<span class="token operator">:</span> <span class="token string">'Tommy'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// This removes the string 'Tommy' from the nicknames array in Tom's document.</span>

</code></pre></div><p>The <code>$pop</code> operator allows you to remove the first or the last value from an array. Let's say Tom's document has a property called siblings that has the value <code>['Marie', 'Bob', 'Kevin', 'Alex']</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>$pop<span class="token operator">:</span> <span class="token punctuation">{</span>siblings<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// This will remove the first value from the siblings array, which is 'Marie' in this case.</span>


db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>$pop<span class="token operator">:</span> <span class="token punctuation">{</span>siblings<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// This will remove the last value from the siblings array, which is 'Alex' in this case.</span>

</code></pre></div><h2 id="multi-parameter-while-updating-multiple-documents"><a href="#multi-parameter-while-updating-multiple-documents" class="header-anchor">#</a> &quot;multi&quot; Parameter while updating multiple documents</h2> <p>To update multiple documents in a collection, set the multi option to true.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>collection<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
   query<span class="token punctuation">,</span>
   update<span class="token punctuation">,</span>
   <span class="token punctuation">{</span>
     upsert<span class="token operator">:</span> boolean<span class="token punctuation">,</span>
     multi<span class="token operator">:</span> boolean<span class="token punctuation">,</span>
     writeConcern<span class="token operator">:</span> document
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

</code></pre></div><p>multi is optional. If set to true, updates multiple documents that meet the query criteria. If set to false, updates one document. The default value is false.</p> <blockquote></blockquote> <p>db.mycol.find()
{ &quot;_id&quot; : ObjectId(598354878df45ec5), &quot;title&quot;:&quot;MongoDB Overview&quot;}
{ &quot;_id&quot; : ObjectId(59835487adf45ec6), &quot;title&quot;:&quot;NoSQL Overview&quot;}
{ &quot;_id&quot; : ObjectId(59835487adf45ec7), &quot;title&quot;:&quot;Tutorials Point Overview&quot;}</p> <blockquote></blockquote> <p>db.mycol.update({'title':'MongoDB Overview'},
{$set:{'title':'New MongoDB Tutorial'}},{multi:true})</p> <h2 id="update-of-embedded-documents"><a href="#update-of-embedded-documents" class="header-anchor">#</a> Update of embedded documents.</h2> <p>For the following schema:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> marks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">}</span>

</code></pre></div><p>Update Tom's marks to 55 where marks are 50 (Use the positional operator $):</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span> marks<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;$set&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;marks.$&quot;</span><span class="token operator">:</span> <span class="token number">55</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>For the following schema:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> marks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>subject<span class="token operator">:</span> <span class="token string">&quot;English&quot;</span><span class="token punctuation">,</span> marks<span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>subject<span class="token operator">:</span> <span class="token string">&quot;Maths&quot;</span><span class="token punctuation">,</span> marks<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>subject<span class="token operator">:</span> <span class="token string">&quot;Computes&quot;</span><span class="token punctuation">,</span> marks<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>

</code></pre></div><p>Update Tom's English marks to 85 :</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;marks.subject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;English&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;$set&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;marks.$.marks&quot;</span><span class="token operator">:</span> <span class="token number">85</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Explaining above example:</p> <p>By using {name: &quot;Tom&quot;, &quot;marks.subject&quot;: &quot;English&quot;} you will get the position of the object in the marks array, where subject is English. In &quot;marks.$.marks&quot;, $ is used to update in that position of the marks array</p> <p><strong>Update Values in an Array</strong></p> <p>The positional $ operator identifies an element in an array to update without explicitly specifying the position of the element in the array.</p> <p>Consider a collection students with the following documents:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">90</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">92</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">90</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>

</code></pre></div><p>To update 80 to 82 in the grades array in the first document, use the positional $ operator if you do not know the position of the element in the array:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
   <span class="token punctuation">{</span> _id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> grades<span class="token operator">:</span> <span class="token number">80</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> $<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;grades.$&quot;</span> <span class="token operator">:</span> <span class="token number">82</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>insert(<strong>document or array of documents</strong>)
</li><li>insertOne(
'document',
{
writeConcern: 'document'
}
)</li> <li>insertMany(
{ [ document 1 , document 2, ... ] },
{
writeConcern: document,
ordered: boolean
}
)</li> <li>find(<strong>query</strong>, <strong>projection</strong>)</li> <li>findOne(<strong>query</strong>, <strong>projection</strong>)</li> <li>update(<strong>query</strong>, <strong>update</strong>)
</li><li>updateOne(
<strong>query</strong>,
<strong>update</strong>,
{
upsert: boolean,
writeConcern: document
}
)</li> <li>updateMany(
<strong>query</strong>,
<strong>update</strong>,
{
upsert: boolean,
writeConcern: document
}
)</li> <li>replaceOne(
<strong>query</strong>,
<strong>replacement</strong>,
{
upsert: boolean,
writeConcern: document
}
)</li> <li>remove(<strong>query</strong>, <strong>justOne</strong>)</li> <li>findAndModify(<strong>query</strong>, <strong>sort</strong>, <strong>update</strong>, <strong>options[optional]</strong>)</li></ul> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Updating and Deleting a document should be done carefully. Since operation may affect for multiple documents.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/mongodb/crud-operation.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mongodb/getting-started-with-mongodb.html" class="prev">
        Getting started with MongoDB
      </a></span> <span class="next"><a href="/mongodb/getting-database-information.html">
        Getting database information
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/1951.a952a230.js" defer></script>
  </body>
</html>
