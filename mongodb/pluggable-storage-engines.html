<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB - Pluggable Storage Engines</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="WiredTiger, MMAP, In-memory, mongo-rocks, Fusion-io, TokuMX">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MongoDB - Pluggable Storage Engines">
    <meta property="og:description" content="WiredTiger, MMAP, In-memory, mongo-rocks, Fusion-io, TokuMX">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/mongodb/pluggable-storage-engines.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MongoDB - Pluggable Storage Engines">
    <meta name="twitter:description" content="WiredTiger, MMAP, In-memory, mongo-rocks, Fusion-io, TokuMX">
    <meta name="twitter:url" content="/mongodb/pluggable-storage-engines.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1964.539d690f.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MongoDB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mongodb/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/mongodb/getting-started-with-mongodb.html" class="sidebar-link">Getting started with MongoDB</a></li><li><a href="/mongodb/crud-operation.html" class="sidebar-link">CRUD Operation</a></li><li><a href="/mongodb/getting-database-information.html" class="sidebar-link">Getting database information</a></li><li><a href="/mongodb/querying-for-data-getting-started.html" class="sidebar-link">Querying for Data ( Getting Started )</a></li><li><a href="/mongodb/update-operators.html" class="sidebar-link">Update Operators</a></li><li><a href="/mongodb/upserts-and-inserts.html" class="sidebar-link">Upserts and Inserts</a></li><li><a href="/mongodb/collections.html" class="sidebar-link">Collections</a></li><li><a href="/mongodb/mongodb-aggregation.html" class="sidebar-link">MongoDB Aggregation</a></li><li><a href="/mongodb/aggregation.html" class="sidebar-link">Aggregation</a></li><li><a href="/mongodb/indexes.html" class="sidebar-link">Indexes</a></li><li><a href="/mongodb/bulk-operations.html" class="sidebar-link">Bulk Operations</a></li><li><a href="/mongodb/2dsphere-index.html" class="sidebar-link">2dsphere Index</a></li><li><a href="/mongodb/pluggable-storage-engines.html" aria-current="page" class="active sidebar-link">Pluggable Storage Engines</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mongodb/pluggable-storage-engines.html#wiredtiger" class="sidebar-link">WiredTiger</a></li><li class="sidebar-sub-header"><a href="/mongodb/pluggable-storage-engines.html#mmap" class="sidebar-link">MMAP</a></li><li class="sidebar-sub-header"><a href="/mongodb/pluggable-storage-engines.html#in-memory" class="sidebar-link">In-memory</a></li><li class="sidebar-sub-header"><a href="/mongodb/pluggable-storage-engines.html#mongo-rocks" class="sidebar-link">mongo-rocks</a></li><li class="sidebar-sub-header"><a href="/mongodb/pluggable-storage-engines.html#fusion-io" class="sidebar-link">Fusion-io</a></li><li class="sidebar-sub-header"><a href="/mongodb/pluggable-storage-engines.html#tokumx" class="sidebar-link">TokuMX</a></li></ul></li><li><a href="/mongodb/java-driver.html" class="sidebar-link">Java Driver</a></li><li><a href="/mongodb/python-driver.html" class="sidebar-link">Python Driver</a></li><li><a href="/mongodb/mongo-as-shards.html" class="sidebar-link">Mongo as Shards</a></li><li><a href="/mongodb/replication.html" class="sidebar-link">Replication</a></li><li><a href="/mongodb/mongo-as-a-replica-set.html" class="sidebar-link">Mongo as a Replica Set</a></li><li><a href="/mongodb/mongodb-configure-a-replicaset-to-support-tls-ssl.html" class="sidebar-link">MongoDB - Configure a ReplicaSet to support TLS/SSL</a></li><li><a href="/mongodb/authentication-mechanisms-in-mongodb.html" class="sidebar-link">Authentication Mechanisms in MongoDB</a></li><li><a href="/mongodb/mongodb-authorization-model.html" class="sidebar-link">MongoDB Authorization Model</a></li><li><a href="/mongodb/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/mongodb/backing-up-and-restoring-data.html" class="sidebar-link">Backing up and Restoring Data</a></li><li><a href="/mongodb/upgrading-mongodb-version.html" class="sidebar-link">Upgrading MongoDB version</a></li><li><a href="/mongodb/backing-up-and-restoring-data.html" class="sidebar-link">Backing up and Restoring Data</a></li><li><a href="/mongodb/mongo-as-a-replica-set.html" class="sidebar-link">Mongo as a Replica Set</a></li><li><a href="/mongodb/managing-mongodb.html" class="sidebar-link">Managing MongoDB</a></li><li><a href="/mongodb/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pluggable-storage-engines"><a href="#pluggable-storage-engines" class="header-anchor">#</a> Pluggable Storage Engines</h1> <h2 id="wiredtiger"><a href="#wiredtiger" class="header-anchor">#</a> WiredTiger</h2> <p>WiredTiger supports <strong>LSM trees to store indexes</strong>. LSM trees are faster for write operations when you need to write huge workloads of random inserts.</p> <p>In WiredTiger, there is <strong>no in-place updates</strong>. If you need to update an element of a document, a new document will be inserted while the old document will be deleted.</p> <p>WiredTiger also offers <strong>document-level concurrency</strong>. It assumes that two write operations will not affect the same document, but if it does, one operation will be rewind and executed later. That's a great performance boost if rewinds are rare.</p> <p>WiredTiger supports <strong>Snappy and zLib algorithms for compression</strong> of data and indexes in the file system. Snappy is the default. It is less CPU-intensive but have a lower compression rate than zLib.</p> <h3 id="how-to-use-wiredtiger-engine"><a href="#how-to-use-wiredtiger-engine" class="header-anchor">#</a> How to use WiredTiger Engine</h3> <div class="language-js extra-class"><pre class="language-js"><code>mongod <span class="token operator">--</span>storageEngine wiredTiger <span class="token operator">--</span>dbpath <span class="token operator">&lt;</span>newWiredTigerDBPath<span class="token operator">&gt;</span>

</code></pre></div><p><strong>Note:</strong></p> <ol><li>After mongodb 3.2, the default engine is WiredTiger.</li> <li><code>newWiredTigerDBPath</code> should not contain data of another storage engine. To migrate your data, you have to dump them, and re-import them in the new storage engine.</li></ol> <div class="language- extra-class"><pre class="language-text"><code>
   mongodump --out &lt;exportDataDestination&gt;
    mongod --storageEngine wiredTiger --dbpath &lt;newWiredTigerDBPath&gt;
    mongorestore &lt;exportDataDestination&gt;

</code></pre></div><h2 id="mmap"><a href="#mmap" class="header-anchor">#</a> MMAP</h2> <p>MMAP is a pluggable storage engine that was named after the <code>mmap()</code> Linux command. It maps files to the virtual memory and optimizes read calls. If you have a large file but needs to read just a small part of it, <code>mmap()</code> is much faster then a <code>read()</code> call that would bring the entire file to the memory.</p> <p>One disadvantage is that you can't have two write calls being processed in parallel for the same collection. So, MMAP has collection-level locking (and not document-level locking as WiredTiger offers). This collection-locking is necessary because one MMAP index can reference multiples documents and if those docs could be updated simultaneously, the index would be inconsistent.</p> <h2 id="in-memory"><a href="#in-memory" class="header-anchor">#</a> In-memory</h2> <p>All data is stored in-memory (RAM) for faster read/access.</p> <h2 id="mongo-rocks"><a href="#mongo-rocks" class="header-anchor">#</a> mongo-rocks</h2> <p>A key-value engine created to integrate with Facebook's RocksDB.</p> <h2 id="fusion-io"><a href="#fusion-io" class="header-anchor">#</a> Fusion-io</h2> <p>A storage engine created by SanDisk that makes it possible to bypass the OS file system layer and write directly to the storage device.</p> <h2 id="tokumx"><a href="#tokumx" class="header-anchor">#</a> TokuMX</h2> <p>A storage engine created by Percona that uses fractal tree indexes.</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>In MongoDB 3.0, MMAP (default) and WiredTiger are the stable storage engines. Usually, if your app is read-heavy, use MMAP. If its write-heavy, use WiredTiger.</p> <p>Your solution may also have a mixed replica set members where you can have one node configured with MMAP and another with WiredTiger. You can use one to insert massive data and the other to read with analytical tools.</p> <p>After MongoDB 3.2, WiredTiger becomes the default engine.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/mongodb/pluggable-storage-engines.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mongodb/2dsphere-index.html" class="prev">
        2dsphere Index
      </a></span> <span class="next"><a href="/mongodb/java-driver.html">
        Java Driver
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1964.539d690f.js" defer></script>
  </body>
</html>
