(window.webpackJsonp=window.webpackJsonp||[]).push([[3272],{3620:function(e,s,a){"use strict";a.r(s);var t=a(19),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"indexes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#indexes"}},[e._v("#")]),e._v(" Indexes")]),e._v(" "),a("p",[e._v("Indexes are a data structure that contains pointers to the contents of a table arranged in a specific order, to help the database optimize queries. They are similar to the index of book, where the pages (rows of the table) are indexed by their page number.")]),e._v(" "),a("p",[e._v("Several types of indexes exist, and can be created on a table. When an index exists on the columns used in a query's WHERE clause, JOIN clause, or ORDER BY clause, it can substantially improve query performance.")]),e._v(" "),a("h2",{attrs:{id:"creating-an-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-an-index"}},[e._v("#")]),e._v(" Creating an Index")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_cars_employee_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Cars "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("EmployeeId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("This will create an index for the column "),a("strong",[e._v("EmployeeId")]),e._v(" in the table "),a("strong",[e._v("Cars")]),e._v(". This index will improve the speed of queries asking the server to sort or select by values in "),a("strong",[e._v("EmployeeId")]),e._v(", such as the following:")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" Cars "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" EmployeeId "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n\n")])])]),a("p",[e._v("The index can contain more than 1 column, as in the following;")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_cars_e_c_o_ids "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Cars "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("EmployeeId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" CarId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" OwnerId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("In this case, the index would be useful for queries asking to sort or select by all included columns, if the set of conditions is ordered in the same way. That means that when retrieving the data, it can find the rows to retrieve using the index, instead of looking through the full table.")]),e._v(" "),a("p",[e._v("For example, the following case would utilize the second index;")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" Cars "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" EmployeeId "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Order")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" CarId "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DESC")]),e._v("\n\n")])])]),a("p",[e._v("If the order differs, however, the index does not have the same advantages, as in the following;")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" Cars "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" OwnerId "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("17")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Order")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("by")]),e._v(" CarId "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DESC")]),e._v("\n\n")])])]),a("p",[e._v("The index is not as helpful because the database must retrieve the entire index, across all values of EmployeeId and CarID, in order to find which items have "),a("code",[e._v("OwnerId = 17")]),e._v(".")]),e._v(" "),a("p",[e._v("(The index may still be used; it may be the case that the query optimizer finds that retrieving the index and filtering on the "),a("code",[e._v("OwnerId")]),e._v(", then retrieving only the needed rows is faster than retrieving the full table, especially if the table is large.)")]),e._v(" "),a("h2",{attrs:{id:"clustered-unique-and-sorted-indexes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clustered-unique-and-sorted-indexes"}},[e._v("#")]),e._v(" Clustered, Unique, and Sorted Indexes")]),e._v(" "),a("p",[e._v("Indexes can have several characteristics that can be set either at creation, or by altering existing indexes.")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CLUSTERED")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_clust_employee_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Employees"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("EmployeeId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" Email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("  \n\n")])])]),a("p",[e._v("The above SQL statement creates a new clustered index on Employees. Clustered indexes are indexes that dictate the actual structure of the table; the table itself is sorted to match the structure of the index. That means there can be at most one clustered index on a table. If a clustered index already exists on the table, the above statement will fail. (Tables with no clustered indexes are also called heaps.)")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("UNIQUE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" uq_customers_email "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("This will create an unique index for the column "),a("strong",[e._v("Email")]),e._v(" in the table "),a("strong",[e._v("Customers")]),e._v(". This index, along with speeding up queries like a normal index, will also force every email address in that column to be unique. If a row is inserted or updated with a non-unique "),a("strong",[e._v("Email")]),e._v(" value, the insertion or update will, by default, fail.")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("UNIQUE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_eid_desc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("EmployeeID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("This creates an index on Customers which also creates a table constraint that the EmployeeID must be unique. (This will fail if the column is not currently unique - in this case, if there are employees who share an ID.)")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_eid_desc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("EmployeeID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Desc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("This creates an index that is sorted in descending order. By default, indexes (in MSSQL server, at least) are ascending, but that can be changed.")]),e._v(" "),a("h2",{attrs:{id:"sorted-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sorted-index"}},[e._v("#")]),e._v(" Sorted Index")]),e._v(" "),a("p",[e._v("If you use an index that is sorted the way you would retrieve it, the "),a("code",[e._v("SELECT")]),e._v(" statement would not do additional sorting when in retrieval.")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_scoreboard_score "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" scoreboard "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("score "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("When you execute the query")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" scoreboard "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ORDER")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("BY")]),e._v(" score "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("The database system would not do additional sorting, since it can do an index-lookup in that order.")]),e._v(" "),a("h2",{attrs:{id:"dropping-an-index-or-disabling-and-rebuilding-it"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dropping-an-index-or-disabling-and-rebuilding-it"}},[e._v("#")]),e._v(" Dropping an Index, or Disabling and Rebuilding it")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DROP")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_cars_employee_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Cars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("  \n\n")])])]),a("p",[e._v("We can use command "),a("code",[e._v("DROP")]),e._v(" to delete our index. In this example we will "),a("code",[e._v("DROP")]),e._v(" the index called "),a("strong",[e._v("ix_cars_employee_id")]),e._v(" on the table "),a("strong",[e._v("Cars")]),e._v(".")]),e._v(" "),a("p",[e._v("This deletes the index entirely, and if the index is clustered, will remove any clustering. It cannot be rebuilt without recreating the index, which can be slow and computationally expensive. As an alternative, the index can be disabled:")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALTER")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_cars_employee_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Cars "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DISABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" \n\n")])])]),a("p",[e._v("This allows the table to retain the structure, along with the metadata about the index.")]),e._v(" "),a("p",[e._v("Critically, this retains the index statistics, so that it is possible to easily evaluate the change. If warranted, the index can then later be rebuilt, instead of being recreated completely;")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALTER")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_cars_employee_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Cars REBUILD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("h2",{attrs:{id:"partial-or-filtered-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#partial-or-filtered-index"}},[e._v("#")]),e._v(" Partial or Filtered Index")]),e._v(" "),a("p",[e._v("SQL Server and SQLite allow to create indexes that contain not only a subset of columns, but also a subset of rows.")]),e._v(" "),a("p",[e._v("Consider a constant growing amount of orders with "),a("code",[e._v("order_state_id")]),e._v(" equal to finished (2), and a stable amount of orders with "),a("code",[e._v("order_state_id equal")]),e._v(" to started (1).")]),e._v(" "),a("p",[e._v("If your business make use of queries like this:")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("comment")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" orders\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" order_state_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("AND")]),e._v(" product_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("@some_value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("Partial indexing allows you to limit the index, including only the unfinished orders:")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" Started_Orders\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" orders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("product_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" order_state_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("This index will be smaller than an unfiltered index, which saves space and reduces the cost of updating the index.")]),e._v(" "),a("h2",{attrs:{id:"inserting-with-a-unique-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inserting-with-a-unique-index"}},[e._v("#")]),e._v(" Inserting with a Unique Index")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("UPDATE")]),e._v(" Customers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SET")]),e._v(" Email "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"richard0123@example.com"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),a("p",[e._v("This will fail if an unique index is set on the "),a("strong",[e._v("Email")]),e._v(" column of "),a("strong",[e._v("Customers")]),e._v(". However, alternate behavior can be defined for this case:")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("UPDATE")]),e._v(" Customers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SET")]),e._v(" Email "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"richard0123@example.com"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DUPLICATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("KEY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" \n\n")])])]),a("h2",{attrs:{id:"rebuild-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rebuild-index"}},[e._v("#")]),e._v(" Rebuild index")]),e._v(" "),a("p",[e._v("Over the course of time B-Tree indexes may become fragmented because of updating/deleting/inserting data. In SQLServer terminology we can have internal (index page which is half empty ) and external (logical page order doesn't correspond physical order).\nRebuilding index is very similar to dropping and re-creating it.")]),e._v(" "),a("p",[e._v("We can re-build an index with")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALTER")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" index_name REBUILD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" \n\n")])])]),a("p",[e._v("By default rebuilding index is offline operation which locks the table and prevents DML against it , but many RDBMS allow online rebuilding.\nAlso, some DB vendors offer alternatives to index rebuilding such as "),a("code",[e._v("REORGANIZE")]),e._v(" (SQLServer) or "),a("code",[e._v("COALESCE")]),e._v("/"),a("code",[e._v("SHRINK SPACE")]),e._v("(Oracle).")]),e._v(" "),a("h2",{attrs:{id:"sap-ase-drop-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sap-ase-drop-index"}},[e._v("#")]),e._v(" SAP ASE: Drop index")]),e._v(" "),a("p",[e._v("This command will drop index in the table. It works on "),a("code",[e._v("SAP ASE")]),e._v(" server.")]),e._v(" "),a("p",[a("strong",[e._v("Syntax:")])]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DROP")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("table")]),e._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("index")]),e._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n\n")])])]),a("p",[a("strong",[e._v("Example:")])]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DROP")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" Cars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("index_1\n\n")])])]),a("h2",{attrs:{id:"unique-index-that-allows-nulls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unique-index-that-allows-nulls"}},[e._v("#")]),e._v(" Unique Index that Allows NULLS")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("UNIQUE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" idx_license_id \n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Person"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("DrivingLicenseID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" DrivingLicenseID "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("IS")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("NOT")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("NULL")]),e._v("\nGO\n\n")])])]),a("p",[e._v("This schema allows for a 0..1 relationship - people can have zero or one driving licenses and each license can only belong to one person")]),e._v(" "),a("h2",{attrs:{id:"clustered-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clustered-index"}},[e._v("#")]),e._v(" Clustered index")]),e._v(" "),a("p",[e._v("When using clustered index, the rows of the table are sorted by the column to which the clustered index is applied. Therefore, there can be only one clustered index on the table because you can't order the table by two different columns.")]),e._v(" "),a("p",[e._v("Generally, it is best to use clustered index when performing reads on big data tables. The donwside of clustered index is when writing to table and data need to be reorganized (resorted).")]),e._v(" "),a("p",[e._v("An example of creating a clustered index on a table Employees on column Employee_Surname:")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CLUSTERED")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_employees_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Employees"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Employee_Surname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("  \n\n")])])]),a("h2",{attrs:{id:"non-clustered-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#non-clustered-index"}},[e._v("#")]),e._v(" Non clustered index")]),e._v(" "),a("p",[e._v("Nonclustered indexes are stored separately from the table. Each index in this structure contains a pointer to the row in the table which it represents.")]),e._v(" "),a("p",[e._v("This pointers are called a row locators. The structure of the row locator depends on whether the data pages are stored in a heap or a clustered table. For a heap, a row locator is a pointer to the row. For a clustered table, the row locator is the clustered index key.")]),e._v(" "),a("p",[e._v("An example of creating a non clustered index on table Employees and column Employee_Surname:")]),e._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("NONCLUSTERED")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("INDEX")]),e._v(" ix_employees_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ON")]),e._v(" Employees"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Employee_Surname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("  \n\n")])])]),a("p",[e._v("There can be multiple nonclustered indexes on the table.\nThe read operations are generally slower with non clustered indexes than with clustered indexes as you have to go first to index and than to the table. There are no restrictions in write operations however.")]),e._v(" "),a("h4",{attrs:{id:"remarks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[e._v("#")]),e._v(" Remarks")]),e._v(" "),a("p",[e._v("Indexes are a way of speeding up read queries by sorting the rows of a table according to a column.")]),e._v(" "),a("p",[e._v("The effect of an index is not noticeable for small databases like the example, but if there are a large number of rows, it can greatly improve performance. Instead of checking every row of the table, the server can do a binary search on the index.")]),e._v(" "),a("p",[e._v("The tradeoff for creating an index is write speed and database size. Storing the index takes space. Also, every time an INSERT is done or the column is updated, the index must be updated. This is not as expensive an operation as scanning the entire table on a SELECT query, but it is still something to keep in mind.")])])}),[],!1,null,null,null);s.default=n.exports}}]);