(window.webpackJsonp=window.webpackJsonp||[]).push([[3185],{3596:function(t,e,s){"use strict";s.r(e);var a=s(31),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"securely-storing-authentication-keys"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#securely-storing-authentication-keys"}},[t._v("#")]),t._v(" Securely storing authentication keys")]),t._v(" "),s("p",[t._v("Many third-party APIs require a key, allowing them to prevent abuse. If they issue you a key, it's very important that you not commit the key into a public repository, as this will allow others to steal your key.")]),t._v(" "),s("h2",{attrs:{id:"storing-authentication-keys-with-figaro"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storing-authentication-keys-with-figaro"}},[t._v("#")]),t._v(" Storing authentication keys with Figaro")]),t._v(" "),s("p",[t._v("Add "),s("code",[t._v("gem 'figaro'")]),t._v(" to your Gemfile and run "),s("code",[t._v("bundle install")]),t._v(". Then run "),s("code",[t._v("bundle exec figaro install")]),t._v("; this will create config/application.yml and add it to your .gitignore file, preventing it from being added to version control.")]),t._v(" "),s("p",[t._v("You can store your keys in application.yml in this format:")]),t._v(" "),s("div",{staticClass:"language-ruby extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SECRET_NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" secret_value\n\n")])])]),s("p",[t._v("where SECRET_NAME and secret_value are the name and value of your API key.")]),t._v(" "),s("p",[t._v("You also need to name these secrets in config/secrets.yml. You can have different secrets in each environment. The file should look like this:")]),t._v(" "),s("div",{staticClass:"language-ruby extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[t._v("development"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  secret_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('%= ENV["SECRET_NAME"] %>\ntest:\n  secret_name: <%=')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENV")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SECRET_NAME"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('%>\nproduction:\n  secret_name: <%= ENV["SECRET_NAME"] %>')]),t._v("\n\n")])])]),s("p",[t._v("How you use these keys varies, but say for example "),s("code",[t._v("some_component")]),t._v(" in the development environment needs access to "),s("code",[t._v("secret_name")]),t._v(". In config/environments/development.rb, you'd put:")]),t._v(" "),s("div",{staticClass:"language-ruby extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("application"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("configure "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("some_component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("configuration_hash "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":secret")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("application"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secrets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secret_name\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),s("p",[t._v("Finally, let's say you want to spin up a production environment on Heroku. This command will upload the values in config/environments/production.rb to Heroku:")]),t._v(" "),s("div",{staticClass:"language-ruby extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[t._v("$ figaro heroku"),s("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e production\n\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);