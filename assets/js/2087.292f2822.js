(window.webpackJsonp=window.webpackJsonp||[]).push([[2087],{2495:function(a,t,e){"use strict";e.r(t);var s=e(31),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"alter-table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#alter-table"}},[a._v("#")]),a._v(" ALTER TABLE")]),a._v(" "),e("h2",{attrs:{id:"changing-storage-engine-rebuild-table-change-file-per-table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#changing-storage-engine-rebuild-table-change-file-per-table"}},[a._v("#")]),a._v(" Changing storage engine; rebuild table; change file_per_table")]),a._v(" "),e("p",[a._v("For example, if "),e("code",[a._v("t1")]),a._v(" is currently not an InnoDB table, this statement changes its storage engine to InnoDB:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" t1 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ENGINE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("InnoDB")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v("If the table is already InnoDB, this will rebuild the table and its indexes and have an effect similar to "),e("code",[a._v("OPTIMIZE TABLE")]),a._v(".  You may gain some disk space improvement.")]),a._v(" "),e("p",[a._v("If the value of "),e("code",[a._v("innodb_file_per_table")]),a._v(" is currently different than the value in effect when "),e("code",[a._v("t1")]),a._v(" was built, this will convert to (or from) file_per_table.")]),a._v(" "),e("h2",{attrs:{id:"alter-column-of-table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#alter-column-of-table"}},[a._v("#")]),a._v(" ALTER COLUMN OF TABLE")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DATABASE")]),a._v(" stackoverflow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("USE")]),a._v(" stackoverflow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("Create")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("table")]),a._v(" stack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    id_user "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    username "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    password "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" stack "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ADD")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COLUMN")]),a._v(" submit "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- add new column")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" stack "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DROP")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COLUMN")]),a._v(" submit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- drop column")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" stack "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("MODIFY")]),a._v(" submit "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DATETIME")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- modify type column")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" stack CHANGE submit submit_date "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DATETIME")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- change type and name of column")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" stack "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ADD")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COLUMN")]),a._v(" mod_id "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("INT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("AFTER")]),a._v(" id_user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- add new column after existing column")]),a._v("\n\n")])])]),e("h2",{attrs:{id:"change-auto-increment-value"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#change-auto-increment-value"}},[a._v("#")]),a._v(" Change auto-increment value")]),a._v(" "),e("p",[a._v("Changing an auto-increment value is useful when you don't want a gap in an AUTO_INCREMENT column after a massive deletion.")]),a._v(" "),e("p",[a._v("For example, you got a lot of unwanted (advertisement) rows posted in your table, you deleted them, and you want to fix the gap in auto-increment values. Assume the MAX value of AUTO_INCREMENT column is 100 now. You can use the following to fix the auto-increment value.")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" your_table_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("AUTO_INCREMENT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("101")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("h2",{attrs:{id:"renaming-a-mysql-table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#renaming-a-mysql-table"}},[a._v("#")]),a._v(" Renaming a MySQL table")]),a._v(" "),e("p",[a._v("Renaming a table can be done in a single command:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RENAME")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("old name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("new name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v("The following syntax does exactly the same:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("old name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RENAME")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("new name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v("If renaming a temporary table, the "),e("code",[a._v("ALTER TABLE")]),a._v(" version of the syntax must be used.")]),a._v(" "),e("p",[e("strong",[a._v("Steps:")])]),a._v(" "),e("ol",[e("li",[a._v("Replace "),e("code",[a._v("<old name>")]),a._v(" and "),e("code",[a._v("<new name>")]),a._v(" in the line above with the relevant values. "),e("strong",[a._v("Note: If the table is being moved to a different database, the "),e("code",[a._v("dbname")]),a._v("."),e("code",[a._v("tablename")]),a._v(" syntax can be used for "),e("code",[a._v("<old name>")]),a._v(" and/or "),e("code",[a._v("<new name>")]),a._v(".")])]),a._v(" "),e("li",[a._v("Execute it on the relevant database in the MySQL command line or a client such as MySQL Workbench. "),e("strong",[a._v("Note: The user must have ALTER and DROP privileges on the old table and CREATE and INSERT on the new one.")])])]),a._v(" "),e("h2",{attrs:{id:"alter-table-add-index"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#alter-table-add-index"}},[a._v("#")]),a._v(" ALTER table add INDEX")]),a._v(" "),e("p",[a._v("To improve performance one might want to add indexes to columns")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" TABLE_NAME "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ADD")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("INDEX")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v("index_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v("column_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n")])])]),e("p",[a._v("altering to add composite (multiple column) indexes")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" TABLE_NAME "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ADD")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("INDEX")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v("index_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v("col1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v("col2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n")])])]),e("h2",{attrs:{id:"changing-the-type-of-a-primary-key-column"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#changing-the-type-of-a-primary-key-column"}},[a._v("#")]),a._v(" Changing the type of a primary key column")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" fish_data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("fish "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DROP")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("PRIMARY")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" fish_data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("fish "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("MODIFY")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COLUMN")]),a._v(" fish_id "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DECIMAL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("PRIMARY")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v("An attempt to modify the type of this column without first dropping the primary key would result in an error.")]),a._v(" "),e("h2",{attrs:{id:"change-column-definition"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#change-column-definition"}},[a._v("#")]),a._v(" Change column definition")]),a._v(" "),e("p",[a._v("The change the definition of a db column, the query below can be used for example, if we have this db schema")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[a._v("users "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    firstname "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    lastname "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    age "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n")])])]),e("p",[a._v("To change the type of "),e("code",[a._v("age")]),a._v(" column from "),e("code",[a._v("char")]),a._v(" to "),e("code",[a._v("int")]),a._v(", we use the query below:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" users CHANGE age age "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("tinyint")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("UNSIGNED")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v("General format is:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" table_name CHANGE column_name new_column_definition\n\n")])])]),e("h2",{attrs:{id:"renaming-a-mysql-database"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#renaming-a-mysql-database"}},[a._v("#")]),a._v(" Renaming a MySQL database")]),a._v(" "),e("p",[a._v("There is no single command to rename a MySQL database but a simple workaround can be used to achieve this by backing up and restoring:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[a._v("mysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("new name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\nmysqldump "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--routines <old name> | mysql -uroot -pmypassword <new name>")]),a._v("\nmysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("drop")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("old name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n")])])]),e("p",[e("strong",[a._v("Steps:")])]),a._v(" "),e("ol",[e("li",[a._v("Copy the lines above into a text editor.")]),a._v(" "),e("li",[a._v("Replace all references to "),e("code",[a._v("<old name>")]),a._v(", "),e("code",[a._v("<new name>")]),a._v(" and "),e("code",[a._v("<password>")]),a._v(" (+ optionally "),e("code",[a._v("root")]),a._v(" to use a different user) with the relevant values.")]),a._v(" "),e("li",[a._v('Execute one by one on the command line (assuming the MySQL "bin" folder is in the path and entering "y" when prompted).')])]),a._v(" "),e("p",[e("strong",[a._v("Alternative Steps:")])]),a._v(" "),e("p",[a._v("Rename (move) each table from one db to the other.  Do this for each table:")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RENAME")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("old db"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TO")]),a._v("  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("new db"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v("You can create those statements by doing something like")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" CONCAT"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'RENAME TABLE old_db.'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" table_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("' TO '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                           "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'new_db.'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" table_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" information_schema"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLES")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" table_schema "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'old_db'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[a._v('Warning. Do not attempt to do any sort of table or database by simply moving files around on the filesystem.  This worked fine in the old days of just MyISAM, but in the new days of InnoDB and tablespaces, it won\'t work.  Especially when the "Data Dictionary" is moved from the filesystem into system InnoDB tables, probably in the next major release.  Moving (as opposed to just '),e("code",[a._v("DROPping")]),a._v(") a "),e("code",[a._v("PARTITION")]),a._v(' of an InnoDB table requires using "transportable tablespaces".  In the near future, there won\'t even be a file to reach for.')]),a._v(" "),e("h2",{attrs:{id:"swapping-the-names-of-two-mysql-databases"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swapping-the-names-of-two-mysql-databases"}},[a._v("#")]),a._v(" Swapping the names of two MySQL databases")]),a._v(" "),e("p",[a._v("The following commands can be used to swap the names of two MySQL databases ("),e("code",[a._v("<db1>")]),a._v(" and "),e("code",[a._v("<db2>")]),a._v("):")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[a._v("mysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" swaptemp\nmysqldump "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--routines <db1> | mysql -uroot -p<password> swaptemp")]),a._v("\nmysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("drop")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db1"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\nmysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db1"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\nmysqldump "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--routines <db2> | mysql -uroot -p<password> <db1>")]),a._v("\nmysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("drop")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db2"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\nmysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db2"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\nmysqldump "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--routines swaptemp | mysql -uroot -p<password> <db2>")]),a._v("\nmysqladmin "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("drop")]),a._v(" swaptemp\n\n")])])]),e("p",[e("strong",[a._v("Steps:")])]),a._v(" "),e("ol",[e("li",[a._v("Copy the lines above into a text editor.")]),a._v(" "),e("li",[a._v("Replace all references to "),e("code",[a._v("<db1>")]),a._v(", "),e("code",[a._v("<db2>")]),a._v(" and "),e("code",[a._v("<password>")]),a._v(" (+ optionally "),e("code",[a._v("root")]),a._v(" to use a different user) with the relevant values.")]),a._v(" "),e("li",[a._v('Execute one by one on the command line (assuming the MySQL "bin" folder is in the path and entering "y" when prompted).')])]),a._v(" "),e("h2",{attrs:{id:"renaming-a-column-in-a-mysql-table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#renaming-a-column-in-a-mysql-table"}},[a._v("#")]),a._v(" Renaming a column in a MySQL table")]),a._v(" "),e("p",[a._v('Renaming a column can be done in a single statement but as well as the new name, the "column definition" (i.e. its data type and other optional properties such as nullability, auto incrementing etc.) must also be specified.')]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("table")]),a._v(" name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" CHANGE "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("old name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("new name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("`")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("column")]),a._v(" definition"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),e("p",[e("strong",[a._v("Steps:")])]),a._v(" "),e("ol",[e("li",[a._v("Open the MySQL command line or a client such as MySQL Workbench.")]),a._v(" "),e("li",[a._v("Run the following statement: "),e("code",[a._v("SHOW CREATE TABLE <table name>;")]),a._v(" (replacing "),e("code",[a._v("<table name>")]),a._v(" with the relevant value).")]),a._v(" "),e("li",[a._v("Make a note of the entire column definition for the column to be renamed "),e("strong",[a._v("(i.e. everything that appears after the name of the column but before the comma separating it from the next column name)")]),a._v(".")]),a._v(" "),e("li",[a._v("Replace "),e("code",[a._v("<old name>")]),a._v(", "),e("code",[a._v("<new name>")]),a._v(" and "),e("code",[a._v("<column definition>")]),a._v(" in the line above with the relevant values and then execute it.")])]),a._v(" "),e("h4",{attrs:{id:"syntax"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#syntax"}},[a._v("#")]),a._v(" Syntax")]),a._v(" "),e("ul",[e("li",[a._v("ALTER [IGNORE] TABLE tbl_name ["),e("strong",[a._v("alter_specification")]),a._v(" [, alter_specification] ...] [partition_options]")])]),a._v(" "),e("h4",{attrs:{id:"remarks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[a._v("#")]),a._v(" Remarks")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("\n   alter_specification: table_options\n      | ADD [COLUMN] col_name column_definition [FIRST | AFTER col_name ]\n      | ADD [COLUMN] (col_name column_definition,...)\n      | ADD {INDEX|KEY} [index_name] [index_type] (index_col_name,...) [index_option] ...\n      | ADD [CONSTRAINT [symbol]] PRIMARY KEY [index_type] (index_col_name,...) [index_option] ...\n      | ADD [CONSTRAINT [symbol]] UNIQUE [INDEX|KEY] [index_name] [index_type] (index_col_name,...) [index_option] ...\n      | ADD FULLTEXT [INDEX|KEY] [index_name] (index_col_name,...) [index_option] ...\n      | ADD SPATIAL [INDEX|KEY] [index_name] (index_col_name,...) [index_option] ...\n      | ADD [CONSTRAINT [symbol]] FOREIGN KEY [index_name] (index_col_name,...) reference_definition\n      | ALGORITHM [=] {DEFAULT|INPLACE|COPY}\n      | ALTER [COLUMN] col_name {SET DEFAULT literal | DROP DEFAULT}\n      | CHANGE [COLUMN] old_col_name new_col_name column_definition [FIRST|AFTER col_name]\n      | LOCK [=] {DEFAULT|NONE|SHARED|EXCLUSIVE}\n      | MODIFY [COLUMN] col_name column_definition [FIRST | AFTER col_name]\n      | DROP [COLUMN] col_name\n      | DROP PRIMARY KEY\n      | DROP {INDEX|KEY} index_name\n      | DROP FOREIGN KEY fk_symbol\n      | DISABLE KEYS\n      | ENABLE KEYS\n      | RENAME [TO|AS] new_tbl_name\n      | RENAME {INDEX|KEY} old_index_name TO new_index_name\n      | ORDER BY col_name [, col_name] ...\n      | CONVERT TO CHARACTER SET charset_name [COLLATE collation_name]\n      | [DEFAULT] CHARACTER SET [=] charset_name [COLLATE [=] collation_name]\n      | DISCARD TABLESPACE\n      | IMPORT TABLESPACE\n      | FORCE\n      | {WITHOUT|WITH} VALIDATION\n      | ADD PARTITION (partition_definition)\n      | DROP PARTITION partition_names\n      | DISCARD PARTITION {partition_names | ALL} TABLESPACE\n      | IMPORT PARTITION {partition_names | ALL} TABLESPACE\n      | TRUNCATE PARTITION {partition_names | ALL}\n      | COALESCE PARTITION number\n      | REORGANIZE PARTITION partition_names INTO (partition_definitions)\n      | EXCHANGE PARTITION partition_name WITH TABLE tbl_name [{WITH|WITHOUT} VALIDATION]\n      | ANALYZE PARTITION {partition_names | ALL}\n      | CHECK PARTITION {partition_names | ALL}\n      | OPTIMIZE PARTITION {partition_names | ALL}\n      | REBUILD PARTITION {partition_names | ALL}\n      | REPAIR PARTITION {partition_names | ALL}\n      | REMOVE PARTITIONING\n      | UPGRADE PARTITIONING\n   index_col_name: col_name [(length)] [ASC | DESC]\n   index_type: USING {BTREE | HASH}\n   index_option: KEY_BLOCK_SIZE [=] value\n      | index_type\n      | WITH PARSER parser_name\n      | COMMENT 'string'\n\n")])])]),e("p",[e("code",[a._v("table_options: table_option [[,] table_option] ... (see")]),a._v(" "),e("a",{attrs:{href:"http://dev.mysql.com/doc/refman/5.7/en/create-table.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("CREATE TABLE"),e("OutboundLink")],1),a._v(" "),e("code",[a._v("options)")])]),a._v(" "),e("p",[e("code",[a._v("partition_options: (see")]),a._v(" "),e("a",{attrs:{href:"http://dev.mysql.com/doc/refman/5.7/en/create-table.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("CREATE TABLE"),e("OutboundLink")],1),a._v(" "),e("code",[a._v("options)")])]),a._v(" "),e("p",[a._v("Ref: "),e("a",{attrs:{href:"http://dev.mysql.com/doc/refman/5.7/en/alter-table.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("MySQL 5.7 Reference Manual  /  ...  /  ALTER TABLE Syntax / 14.1.8 ALTER TABLE Syntax"),e("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);