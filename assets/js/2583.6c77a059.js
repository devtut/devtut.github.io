(window.webpackJsonp=window.webpackJsonp||[]).push([[2583],{2991:function(s,t,a){"use strict";a.r(t);var e=a(31),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"communicating-with-restful-apis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#communicating-with-restful-apis"}},[s._v("#")]),s._v(" Communicating with RESTful APIs")]),s._v(" "),a("p",[s._v('REST stands for Representational State Transfer (sometimes spelled "ReST"). It relies on a stateless, client-server, cacheable communications protocol and mostly HTTP protocol is used. It is primarily used to build Web services that are lightweight, maintainable, and scalable. A service based on REST is called a RESTful service and the APIs which are being used for it are RESTful APIs. In PowerShell, '),a("strong",[a("code",[s._v("Invoke-RestMethod")])]),s._v(" is used to deal with them.")]),s._v(" "),a("h2",{attrs:{id:"post-message-to-hipchat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#post-message-to-hipchat"}},[s._v("#")]),s._v(" Post Message to hipChat")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$params")]),s._v(" = @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    Uri = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://your.hipchat.com/v2/room/934419/notification?auth_token=???"')]),s._v("\n    Method = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"POST"')]),s._v("\n    Body = @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        color = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yellow'")]),s._v("\n        message = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This is a test message!"')]),s._v("\n        notify = "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("$false")]),s._v(" \n        message_format = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ConvertTo-Json")]),s._v("\n    ContentType = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'application/json'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-RestMethod")]),s._v(" @params \n\n")])])]),a("h2",{attrs:{id:"using-rest-with-powershell-objects-to-get-and-post-many-items"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-rest-with-powershell-objects-to-get-and-post-many-items"}},[s._v("#")]),s._v(" Using REST with PowerShell Objects to GET and POST many items")]),s._v(" "),a("p",[s._v("GET your REST data and store in a PowerShell object:")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Users")]),s._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-RestMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Uri "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://jsonplaceholder.typicode.com/users"')]),s._v("\n\n")])])]),a("p",[s._v("Modify many items in your data:")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Users")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"John Smith"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Users")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("email = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"John.Smith@example.com"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Users")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jane Smith"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Users")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("email = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jane.Smith@example.com"')]),s._v("\n\n")])])]),a("p",[s._v("POST all of the REST data back:")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Json")]),s._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Users")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ConvertTo-Json")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-RestMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Method Post "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Uri "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://jsonplaceholder.typicode.com/users"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Body "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Json")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ContentType "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'application/json'")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"use-slack-com-incoming-webhooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-slack-com-incoming-webhooks"}},[s._v("#")]),s._v(" Use Slack.com Incoming Webhooks")]),s._v(" "),a("p",[s._v("Define your payload to send for possible more complex data")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Payload")]),s._v(" = @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" text="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test string"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" username="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"testuser"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("p",[s._v("Use "),a("code",[s._v("ConvertTo-Json")]),s._v(" cmdlet and "),a("code",[s._v("Invoke-RestMethod")]),s._v(" to execute the call")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-RestMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Uri "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://hooks.slack.com/services/yourwebhookstring"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Method Post "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Body "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ConvertTo-Json")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Payload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n")])])]),a("h2",{attrs:{id:"using-rest-with-powershell-objects-to-get-and-put-individual-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-rest-with-powershell-objects-to-get-and-put-individual-data"}},[s._v("#")]),s._v(" Using REST with PowerShell Objects to Get and Put individual data")]),s._v(" "),a("p",[s._v("GET your REST data and store in a PowerShell object:")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Post")]),s._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-RestMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Uri "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://jsonplaceholder.typicode.com/posts/1"')]),s._v("\n\n")])])]),a("p",[s._v("Modify your data:")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title = "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"New Title"')]),s._v("\n\n")])])]),a("p",[s._v("PUT the REST data back")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Json")]),s._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Post")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ConvertTo-Json")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-RestMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Method Put "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Uri "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://jsonplaceholder.typicode.com/posts/1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Body "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Json")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ContentType "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'application/json'")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"using-rest-with-powershell-to-delete-items"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-rest-with-powershell-to-delete-items"}},[s._v("#")]),s._v(" Using REST with PowerShell to Delete items")]),s._v(" "),a("p",[s._v("Identify the item that is to be deleted and delete it:")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Invoke-RestMethod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Method Delete "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Uri "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://jsonplaceholder.typicode.com/posts/1"')]),s._v("\n\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);