(window.webpackJsonp=window.webpackJsonp||[]).push([[2141],{2549:function(s,t,e){"use strict";e.r(t);var a=e(31),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"recover-and-reset-the-default-root-password-for-mysql-5-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recover-and-reset-the-default-root-password-for-mysql-5-7"}},[s._v("#")]),s._v(" Recover and reset the default root password for MySQL 5.7+")]),s._v(" "),e("p",[s._v("After MySQL 5.7, when we install MySQL sometimes we don't need to create a root account or give a root password. By default when we start the server, the default password is stored in the "),e("code",[s._v("mysqld.log")]),s._v(" file. We need to login in to the system using that password and we need to change it.")]),s._v(" "),e("h2",{attrs:{id:"what-happens-when-the-initial-start-up-of-the-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-happens-when-the-initial-start-up-of-the-server"}},[s._v("#")]),s._v(" What happens when the initial start up of the server")]),s._v(" "),e("p",[s._v("Given that the data directory of the server is empty:")]),s._v(" "),e("ul",[e("li",[s._v("The server is initialized.")]),s._v(" "),e("li",[s._v("SSL certificate and key files are generated in the data directory.")]),s._v(" "),e("li",[s._v("The validate_password plugin is installed and enabled.")]),s._v(" "),e("li",[s._v("The superuser account 'root'@'localhost' is created. The password for the superuser is set and stored in the error log file.")])]),s._v(" "),e("h2",{attrs:{id:"how-to-change-the-root-password-by-using-the-default-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-change-the-root-password-by-using-the-default-password"}},[s._v("#")]),s._v(" How to change the root password by using the default password")]),s._v(" "),e("p",[s._v('To reveal the default "root" password:')]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("shell"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" sudo grep "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'temporary password'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\n")])])]),e("p",[s._v("Change the root password as soon as possible by logging in with the generated temporary password and set a custom password for the superuser account:")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("shell"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p \n\nmysql"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" IDENTIFIED "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MyNewPass5!'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\n")])])]),e("p",[e("strong",[s._v("Note:")]),s._v(" MySQL's validate_password plugin is installed by default. This will require that passwords contain at least one upper case letter, one lower case letter, one digit, and one special character, and that the total password length is at least 8 characters.")]),s._v(" "),e("h2",{attrs:{id:"reset-root-password-when-var-run-mysqld-for-unix-socket-file-don-t-exists"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reset-root-password-when-var-run-mysqld-for-unix-socket-file-don-t-exists"}},[s._v("#")]),s._v(" reset root password when \" /var/run/mysqld' for UNIX socket file don't exists\"")]),s._v(" "),e("p",[s._v("if I forget the password then I'll get error.")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("$ mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u root "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p    \n\n")])])]),e("p",[s._v("Enter password:")]),s._v(" "),e("p",[s._v("ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)")]),s._v(" "),e("p",[s._v("I tried to solve the issue by first knowing the status:")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("$ systemctl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" mysql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n\n")])])]),e("p",[s._v("mysql.service - MySQL Community Server\nLoaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: en\nActive: active (running) since Thu 2017-06-08 14:31:33 IST; 38s ago")]),s._v(" "),e("p",[s._v("Then I used the code "),e("code",[s._v("mysqld_safe --skip-grant-tables &")]),s._v(" but I get the error:")]),s._v(" "),e("blockquote"),s._v(" "),e("p",[s._v("mysqld_safe Directory '/var/run/mysqld' for UNIX socket file don't exists.")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("$ systemctl stop  mysql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n$ ps "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("eaf"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("grep mysql\n$ mysqld_safe "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--skip-grant-tables &")]),s._v("\n\n")])])]),e("blockquote"),s._v(" "),e("p",[s._v("I solved:")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("$ mkdir "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld\n$ chown mysql:mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld\n\n")])])]),e("p",[s._v("Now I use the same code "),e("code",[s._v("mysqld_safe --skip-grant-tables &")]),s._v(" and get")]),s._v(" "),e("blockquote"),s._v(" "),e("p",[s._v("mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql")]),s._v(" "),e("p",[s._v("If I use "),e("code",[s._v("$ mysql -u root")]),s._v(" I'll get :")]),s._v(" "),e("p",[s._v("Server version: 5.7.18-0ubuntu0.16.04.1 (Ubuntu)")]),s._v(" "),e("p",[s._v("Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.")]),s._v(" "),e("p",[s._v("Oracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.")]),s._v(" "),e("p",[s._v("Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.")]),s._v(" "),e("p",[s._v("mysql>")]),s._v(" "),e("blockquote"),s._v(" "),e("p",[s._v("Now time to change password:")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("mysql"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql\nmysql"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("describe")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),e("p",[s._v("Reading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A")]),s._v(" "),e("p",[s._v("Database changed")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("mysql"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" FLUSH "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" PASSWORD "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" root"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PASSWORD"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'newpwd'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),e("p",[s._v("or If you have a mysql root account that can connect from everywhere, you should also do:")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" mysql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" Password"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PASSWORD"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'newpwd'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("User")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),e("p",[s._v("Alternate Method:")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\n  USE mysql\n   UPDATE user SET Password = PASSWORD('newpwd')\n   WHERE Host = 'localhost' AND User = 'root';\n\n")])])]),e("p",[s._v("And if you have a root account that can access from everywhere:")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\nUSE mysql\n UPDATE user SET Password = PASSWORD('newpwd')\n WHERE Host = '%' AND User = 'root';`enter code here\n\n")])])]),e("p",[s._v("now need to "),e("code",[s._v("quit")]),s._v(" from mysql and stop/start")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("FLUSH "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsudo "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("init"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql stop\nsudo "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("init"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("start")]),s._v("\n\n")])])]),e("p",[s._v("now again ` mysql -u root -p' and use the new password to get")]),s._v(" "),e("blockquote"),s._v(" "),e("p",[s._v("mysql>")]),s._v(" "),e("h4",{attrs:{id:"remarks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[s._v("#")]),s._v(" Remarks")]),s._v(" "),e("p",[s._v("Recovering and resetting the default root password using this method is applicable only for MySQL 5.7+")])])}),[],!1,null,null,null);t.default=r.exports}}]);