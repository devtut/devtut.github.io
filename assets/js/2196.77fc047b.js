(window.webpackJsonp=window.webpackJsonp||[]).push([[2196],{2603:function(e,t,o){"use strict";o.r(t);var r=o(31),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"getting-started-with-nodes-profiling"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-with-nodes-profiling"}},[e._v("#")]),e._v(" Getting started with Nodes profiling")]),e._v(" "),o("p",[e._v("The aim of this post is to get started with profiling nodejs application and how to make sense of this results to capture a bug or a memory leak.\nA nodejs running application is nothing but a v8 engine processes which is in many terms similar to a website running on a browser and we can basically capture all the metrics which are related to a website process for a node application.")]),e._v(" "),o("p",[e._v("The tool of my preference is chrome devtools or chrome inspector coupled with the node-inspector.")]),e._v(" "),o("h2",{attrs:{id:"profiling-a-simple-node-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#profiling-a-simple-node-application"}},[e._v("#")]),e._v(" Profiling a simple node application")]),e._v(" "),o("p",[o("strong",[e._v("Step 1")]),e._v(" : Install the node-inspector package using npm globally on you machine")]),e._v(" "),o("div",{staticClass:"language-js extra-class"},[o("pre",{pre:!0,attrs:{class:"language-js"}},[o("code",[e._v("$ npm install "),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("g node"),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("inspector\n\n")])])]),o("p",[o("strong",[e._v("Step 2")]),e._v(" : Start the node-inspector server")]),e._v(" "),o("div",{staticClass:"language-js extra-class"},[o("pre",{pre:!0,attrs:{class:"language-js"}},[o("code",[e._v("$ node"),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("inspector\n\n")])])]),o("p",[o("strong",[e._v("Step 3")]),e._v(" :  Start debugging your node application")]),e._v(" "),o("div",{staticClass:"language-js extra-class"},[o("pre",{pre:!0,attrs:{class:"language-js"}},[o("code",[e._v("$ node "),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("--")]),e._v("debug"),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("brk your"),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("short"),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("node"),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("script"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("js\n\n")])])]),o("p",[o("strong",[e._v("Step 4")]),e._v(" : Open "),o("a",{attrs:{href:"http://127.0.0.1:8080/?port=5858",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:8080/?port=5858"),o("OutboundLink")],1),e._v(" in the Chrome browser. And you will see a chrom-dev tools interface with your nodejs application source code in left panel . And since we have used debug break option while debugging the application the code execution will stop at the first line of code.")]),e._v(" "),o("p",[o("a",{attrs:{href:"https://i.stack.imgur.com/jzeJH.png",target:"_blank",rel:"noopener noreferrer"}},[o("img",{attrs:{src:"https://i.stack.imgur.com/jzeJH.png",alt:"enter image description here"}}),o("OutboundLink")],1)]),e._v(" "),o("p",[o("strong",[e._v("Step 5")]),e._v(" : This is the easy part where you switch to the profiling tab and start profiling the application . In case you want get the profile for a particular method or flow make sure the code execution is break-pointed just before that piece of code is executed.")]),e._v(" "),o("p",[o("a",{attrs:{href:"https://i.stack.imgur.com/QKnPh.png",target:"_blank",rel:"noopener noreferrer"}},[o("img",{attrs:{src:"https://i.stack.imgur.com/QKnPh.png",alt:"enter image description here"}}),o("OutboundLink")],1)]),e._v(" "),o("p",[o("strong",[e._v("Step 6")]),e._v(" : Once you have recorded your CPU profile or heap dump/snapshot or heap allocation you can then view the results in the same window or save them to local drive for later analysis or comparison with other profiles.")]),e._v(" "),o("p",[e._v("You can use this articles to know how to read the profiles :")]),e._v(" "),o("li",[e._v("\n[Reading CPU Profiles](http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art037)\n")]),e._v(" "),o("li",[e._v("\n[Chrome CPU profiler and Heap profiler](https://developer.chrome.com/devtools/docs/profiles)\n")]),e._v(" "),o("h4",{attrs:{id:"remarks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[e._v("#")]),e._v(" Remarks")]),e._v(" "),o("p",[e._v("The node-inspector fails to attach to the node bebug process sometimes in which case you will not be able to get the debug breakpoint in devtools .Try refreshing the devtools tab multiple times and wait for some seconds to see if it is in debug mode.")]),e._v(" "),o("p",[e._v("If not restart the node-inspector from command line.")])])}),[],!1,null,null,null);t.default=a.exports}}]);