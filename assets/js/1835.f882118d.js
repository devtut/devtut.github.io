(window.webpackJsonp=window.webpackJsonp||[]).push([[1835],{2245:function(t,e,r){"use strict";r.r(e);var n=r(31),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"configuring-kotlin-build"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configuring-kotlin-build"}},[t._v("#")]),t._v(" Configuring Kotlin build")]),t._v(" "),r("h2",{attrs:{id:"gradle-configuration"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gradle-configuration"}},[t._v("#")]),t._v(" Gradle configuration")]),t._v(" "),r("p",[r("code",[t._v("kotlin-gradle-plugin")]),t._v(" is used to compile Kotlin code with Gradle. Basically, its version should correspond to the Kotlin version you want to use. E.g. if you want to use Kotlin "),r("code",[t._v("1.0.3")]),t._v(", then you need to aplly "),r("code",[t._v("kotlin-gradle-plugin")]),t._v(" version "),r("code",[t._v("1.0.3")]),t._v(" too.")]),t._v(" "),r("p",[t._v("It's a good idea to externalize this version in "),r("a",{attrs:{href:"https://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_configuration_properties",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("gradle.properties")]),r("OutboundLink")],1),t._v(" or in "),r("a",{attrs:{href:"https://docs.gradle.org/current/dsl/org.gradle.api.plugins.ExtraPropertiesExtension.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("ExtraPropertiesExtension")]),r("OutboundLink")],1),t._v(":")]),t._v(" "),r("div",{staticClass:"language-kotlin extra-class"},[r("pre",{pre:!0,attrs:{class:"language-kotlin"}},[r("code",[t._v("buildscript "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   ext"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kotlin_version "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.0.3'")]),t._v("\n\n   repositories "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenCentral")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n   dependencies "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     classpath "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.jetbrains.kotlin:kotlin-gradle-plugin:'),r("span",{pre:!0,attrs:{class:"token interpolation variable"}},[t._v("$kotlin_version")]),t._v('"')]),t._v("\n   "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),r("p",[t._v("Then you need to apply this plugin to your project. The way you do this differs when targeting different platforms:")]),t._v(" "),r("h3",{attrs:{id:"targeting-jvm"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#targeting-jvm"}},[t._v("#")]),t._v(" Targeting JVM")]),t._v(" "),r("div",{staticClass:"language-kotlin extra-class"},[r("pre",{pre:!0,attrs:{class:"language-kotlin"}},[r("code",[t._v("apply plugin"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kotlin'")]),t._v("\n\n")])])]),r("h3",{attrs:{id:"targeting-android"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#targeting-android"}},[t._v("#")]),t._v(" Targeting Android")]),t._v(" "),r("div",{staticClass:"language-kotlin extra-class"},[r("pre",{pre:!0,attrs:{class:"language-kotlin"}},[r("code",[t._v("apply plugin"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kotlin-android'")]),t._v("\n\n")])])]),r("h3",{attrs:{id:"targeting-js"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#targeting-js"}},[t._v("#")]),t._v(" Targeting JS")]),t._v(" "),r("div",{staticClass:"language-kotlin extra-class"},[r("pre",{pre:!0,attrs:{class:"language-kotlin"}},[r("code",[t._v("apply plugin"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kotlin2js'")]),t._v("\n\n")])])]),r("p",[t._v("These are the default paths:")]),t._v(" "),r("ul",[r("li",[t._v("kotlin sources: "),r("code",[t._v("src/main/kotlin")])]),t._v(" "),r("li",[t._v("java sources: "),r("code",[t._v("src/main/java")])]),t._v(" "),r("li",[t._v("kotlin tests: "),r("code",[t._v("src/test/kotlin")])]),t._v(" "),r("li",[t._v("java tests: "),r("code",[t._v("src/test/java")])]),t._v(" "),r("li",[t._v("runtime resources: "),r("code",[t._v("src/main/resources")])]),t._v(" "),r("li",[t._v("test resources: "),r("code",[t._v("src/test/resources")])])]),t._v(" "),r("p",[t._v("You may need to configure "),r("a",{attrs:{href:"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSet.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("SourceSets")]),r("OutboundLink")],1),t._v(" if you're using custom project layout.")]),t._v(" "),r("p",[t._v("Finally, you'll need to add Kotlin standard library dependency to your project:")]),t._v(" "),r("div",{staticClass:"language-kotlin extra-class"},[r("pre",{pre:!0,attrs:{class:"language-kotlin"}},[r("code",[t._v("dependencies "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compile "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.jetbrains.kotlin:kotlin-stdlib:'),r("span",{pre:!0,attrs:{class:"token interpolation variable"}},[t._v("$kotlin_version")]),t._v('"')]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),r("p",[t._v("If you want to use Kotlin Reflection you'll also need to add "),r("code",[t._v('compile "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"')])]),t._v(" "),r("h2",{attrs:{id:"using-android-studio"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#using-android-studio"}},[t._v("#")]),t._v(" Using Android Studio")]),t._v(" "),r("p",[t._v("Android Studio can configure Kotlin automatically in an Android project.")]),t._v(" "),r("h3",{attrs:{id:"install-the-plugin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#install-the-plugin"}},[t._v("#")]),t._v(" Install the plugin")]),t._v(" "),r("p",[t._v("To install the Kotlin plugin, go to File > Settings > Editor > Plugins > Install JetBrains Plugin... > Kotlin > Install, then restart Android Studio when prompted.")]),t._v(" "),r("h3",{attrs:{id:"configure-a-project"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configure-a-project"}},[t._v("#")]),t._v(" Configure a project")]),t._v(" "),r("p",[t._v("Create an Android Studio project as normal, then press "),r("kbd",[t._v("Ctrl")]),t._v(" + "),r("kbd",[t._v("Shift")]),t._v(" + "),r("kbd",[t._v("A")]),t._v('. In the search box, type "Configure Kotlin in Project" and press Enter.')]),t._v(" "),r("p",[r("a",{attrs:{href:"http://i.stack.imgur.com/w8LnT.png",target:"_blank",rel:"noopener noreferrer"}},[t._v('<img src="http://i.stack.imgur.com/w8LnT.png" alt="Dialog of "Configure Kotlin" search result" />'),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("Android Studio will alter your Gradle files to add all the necessary dependencies.")]),t._v(" "),r("h3",{attrs:{id:"converting-java"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#converting-java"}},[t._v("#")]),t._v(" Converting Java")]),t._v(" "),r("p",[t._v("To convert your Java files to Kotlin files, press "),r("kbd",[t._v("Ctrl")]),t._v(" + "),r("kbd",[t._v("Shift")]),t._v(" + "),r("kbd",[t._v("A")]),t._v(' and find "Convert Java File to Kotlin File". This will change the current file\'s extension to '),r("code",[t._v(".kt")]),t._v(" and convert the code to Kotlin.")]),t._v(" "),r("p",[r("a",{attrs:{href:"http://i.imgur.com/mIwlMyp.gif",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"http://i.imgur.com/mIwlMyp.gif",alt:"Convert Java file to Kotlin file"}}),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"migrating-from-gradle-using-groovy-script-to-kotlin-script"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#migrating-from-gradle-using-groovy-script-to-kotlin-script"}},[t._v("#")]),t._v(" Migrating from Gradle using Groovy script to Kotlin script")]),t._v(" "),r("p",[t._v("Steps:")]),t._v(" "),r("li",[t._v("\nclone the [gradle-script-kotlin](https://github.com/gradle/gradle-script-kotlin) project\n")]),t._v(" "),r("li",[t._v("\ncopy/paste from the cloned project to your project:\n"),r("ul",[t._v("\n- `build.gradle.kts`\n- `gradlew`\n- `gradlew.bat`\n- `settings.gradle`\n"),r("p",[t._v("update the content of the "),r("code",[t._v("build.gradle.kts")]),t._v(" based on your needs, you can use as inspiration the scripts in the project just cloned or in one of its samples")]),t._v(" "),r("p",[t._v("now open Intellij and open your project, in the explorer window, it should be recognized as a Gradle project, if not, expand it first.")]),t._v(" "),r("p",[t._v("after opening, let Intellij works, open "),r("code",[t._v("build.gradle.kts")]),t._v(" and check if there are any error. If the highlighting is not working and/or is everything marked red, then close and reopen Intellij")]),t._v(" "),r("p",[t._v("open the Gradle window and refresh it")]),t._v(" "),r("p",[t._v("If you are on Windows, you may encounter this "),r("a",{attrs:{href:"https://github.com/gradle/gradle-script-kotlin/issues/220",target:"_blank",rel:"noopener noreferrer"}},[t._v("bug"),r("OutboundLink")],1),t._v(", download the full Gradle 3.3 distribution and use that instead the one provided. "),r("a",{attrs:{href:"https://github.com/gradle/gradle-script-kotlin/issues/220",target:"_blank",rel:"noopener noreferrer"}},[t._v("Related"),r("OutboundLink")],1),t._v(".")]),t._v(" "),r("p",[t._v("OSX and Ubuntu work out of the box.")]),t._v(" "),r("p",[t._v("Small bonus, if you want to avoid all the hassle of publicing on Maven and similar, use "),r("a",{attrs:{href:"https://github.com/elect86/glm/blob/master/build.gradle.kts",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jitpack"),r("OutboundLink")],1),t._v(", the lines to add are almost identical compared to Groovy. You can take inspiration from this "),r("a",{attrs:{href:"https://github.com/elect86/glm/blob/master/build.gradle.kts",target:"_blank",rel:"noopener noreferrer"}},[t._v("project"),r("OutboundLink")],1),t._v(" of mine.")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);