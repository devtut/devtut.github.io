(window.webpackJsonp=window.webpackJsonp||[]).push([[3191],{3599:function(a,e,t){"use strict";t.r(e);var s=t(31),n=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"upgrading-rails"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-rails"}},[a._v("#")]),a._v(" Upgrading Rails")]),a._v(" "),t("h2",{attrs:{id:"upgrading-from-rails-4-2-to-rails-5-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-from-rails-4-2-to-rails-5-0"}},[a._v("#")]),a._v(" Upgrading from Rails 4.2 to Rails 5.0")]),a._v(" "),t("p",[t("strong",[a._v("Note: Before upgrading your Rails app, always make sure to save your code on a version control system, such as Git.")])]),a._v(" "),t("p",[a._v("To upgrade from Rails 4.2 to Rails 5.0, you must be using Ruby 2.2.2 or newer. After upgrading your Ruby version if required, go to your Gemfile and change the line:")]),a._v(" "),t("div",{staticClass:"language-ruby extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[a._v("gem "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'rails'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'4.2.X'")]),a._v("\n\n")])])]),t("p",[a._v("to:")]),a._v(" "),t("div",{staticClass:"language-ruby extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[a._v("gem "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'rails'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'~> 5.0.0'")]),a._v("\n\n")])])]),t("p",[a._v("and on the command line run:")]),a._v(" "),t("div",{staticClass:"language-ruby extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[a._v("$ bundle update\n\n")])])]),t("p",[a._v("Now run the update task using the command:")]),a._v(" "),t("div",{staticClass:"language-ruby extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[a._v("$ rake rails"),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":update")]),a._v("\n\n")])])]),t("p",[a._v("This will help you to update configuration files. You will be prompted to overwrite files and you have several options to input:")]),a._v(" "),t("ul",[t("li",[a._v("Y – yes, overwrite")]),a._v(" "),t("li",[a._v("n – no, do not overwrite")]),a._v(" "),t("li",[a._v("a – all, overwrite this and all others")]),a._v(" "),t("li",[a._v("q – quit, abort")]),a._v(" "),t("li",[a._v("d – diff, show the differences between the old and the new")]),a._v(" "),t("li",[a._v("h – help")])]),a._v(" "),t("p",[a._v("Typically, you should check the differences between the old and new files to make sure you aren't getting any unwanted changes.")]),a._v(" "),t("p",[a._v("Rails 5.0 "),t("code",[a._v("ActiveRecord")]),a._v(" models inherit from "),t("code",[a._v("ApplicationRecord")]),a._v(", rather than "),t("code",[a._v("ActiveRecord::Base")]),a._v(". "),t("code",[a._v("ApplicationRecord")]),a._v(" is the superclass for all models, similar to how "),t("code",[a._v("ApplicationController")]),a._v(" is the superclass for controllers. To account for this new way in which models are handled, you must create a file in your "),t("code",[a._v("app/models/")]),a._v(" folder called "),t("code",[a._v("application_record.rb")]),a._v(" and then edit that file's contents to be:")]),a._v(" "),t("div",{staticClass:"language-ruby extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ApplicationRecord")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("ActiveRecord")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("Base")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("abstract_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n\n")])])]),t("p",[a._v("Rails 5.0 also handles callbacks slightly different. Callbacks that return "),t("code",[a._v("false")]),a._v(" won't halt the callback chain, which means subsequent callbacks will still run, unlike Rails 4.2. When you upgrade, the Rails 4.2 behavior will remain, though you can switch to the Rails 5.0 behavior by adding:")]),a._v(" "),t("div",{staticClass:"language-ruby extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("ActiveSupport")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("halt_callback_chains_on_return_false "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n\n")])])]),t("p",[a._v("to the "),t("code",[a._v("config/application.rb")]),a._v(" file. You can explicitly halt the callback chain by calling "),t("code",[a._v("throw(:abort)")]),a._v(".")]),a._v(" "),t("p",[a._v("In Rails 5.0, "),t("code",[a._v("ActiveJob")]),a._v(" will inherit from "),t("code",[a._v("ApplicationJob")]),a._v(", rather than "),t("code",[a._v("ActiveJob::Base")]),a._v(" like in Rails 4.2. To upgrade to Rails 5.0, create a file called "),t("code",[a._v("application_job.rb")]),a._v(" in the "),t("code",[a._v("app/jobs/")]),a._v(" folder. Edit that file's contents to be:")]),a._v(" "),t("div",{staticClass:"language-ruby extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ApplicationJob")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("ActiveJob")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("Base")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n\n")])])]),t("p",[a._v("Then, you must change all of your jobs to inherit from "),t("code",[a._v("ApplicationJob")]),a._v(" rather than "),t("code",[a._v("ActiveJob::Base")]),a._v(".")]),a._v(" "),t("p",[a._v("One of the other biggest changes of Rails 5.0 doesn't require any code changes, but will change the way you use the command line with your Rails apps. You will be able to use "),t("code",[a._v("bin/rails")]),a._v(", or just "),t("code",[a._v("rails")]),a._v(", to run tasks and tests. For example, instead of using "),t("code",[a._v("$ rake db:migrate")]),a._v(", you can now do "),t("code",[a._v("$ rails db:migrate")]),a._v(". If you run "),t("code",[a._v("$ bin/rails")]),a._v(", you can view all the available commands. Note that many of the tasks that can now be run with "),t("code",[a._v("bin/rails")]),a._v(" still work using "),t("code",[a._v("rake")]),a._v(".")])])}),[],!1,null,null,null);e.default=n.exports}}]);