(window.webpackJsonp=window.webpackJsonp||[]).push([[3083],{3491:function(t,e,a){"use strict";a.r(e);var s=a(31),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"instance-eval"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#instance-eval"}},[t._v("#")]),t._v(" instance_eval")]),t._v(" "),a("h2",{attrs:{id:"instance-evaluation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#instance-evaluation"}},[t._v("#")]),t._v(" Instance evaluation")]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"http://ruby-doc.org/core/BasicObject.html#method-i-instance_eval",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("instance_eval")]),a("OutboundLink")],1),t._v(" method is available on all objects. It evaluates code in the context of the receiver:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("object "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v("\n\nobject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance_eval "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@variable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":value")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\nobject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance_variable_get "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@variable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => :value")]),t._v("\n\n")])])]),a("p",[a("code",[t._v("instance_eval")]),t._v(" sets "),a("code",[t._v("self")]),t._v(" to "),a("code",[t._v("object")]),t._v(" for the duration of the code block:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance_eval "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" object "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => true")]),t._v("\n\n")])])]),a("p",[t._v("The receiver is also passed to the block as its only argument:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance_eval "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("argument"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" argument "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" object "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => true")]),t._v("\n\n")])])]),a("p",[t._v("The "),a("a",{attrs:{href:"http://ruby-doc.org/core/BasicObject.html#method-i-instance_exec",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("instance_exec")]),a("OutboundLink")],1),t._v(" method differs in this regard: it passes its arguments to the block instead.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance_exec "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@variable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  instance_variable_get name "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => :value")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"implementing-with"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementing-with"}},[t._v("#")]),t._v(" Implementing with")]),t._v(" "),a("p",[t._v("Many languages feature a "),a("code",[t._v("with")]),t._v(" statement that allows programmers to omit the receiver of method calls.")]),t._v(" "),a("p",[a("code",[t._v("with")]),t._v(" can be easily emulated in Ruby using "),a("a",{attrs:{href:"http://ruby-doc.org/core/BasicObject.html#method-i-instance_eval",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("instance_eval")]),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("with")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("block"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance_eval "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("block\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("p",[t._v("The "),a("code",[t._v("with")]),t._v(" method can be used to seamlessly execute methods on objects:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v("\n\nwith hash "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  store "),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":value")]),t._v("\n  has_key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":key")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => true")]),t._v("\n  values              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => [:value]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("h4",{attrs:{id:"syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#syntax"}},[t._v("#")]),t._v(" Syntax")]),t._v(" "),a("ul",[a("li",[t._v("object.instance_eval 'code'")]),t._v(" "),a("li",[t._v("object.instance_eval 'code', 'filename'")]),t._v(" "),a("li",[t._v("object.instance_eval 'code', 'filename', 'line number'")]),t._v(" "),a("li",[t._v("object.instance_eval { code }")]),t._v(" "),a("li",[t._v("object.instance_eval { |receiver| code }")])]),t._v(" "),a("h4",{attrs:{id:"parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Parameter")]),t._v(" "),a("th",[t._v("Details")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("string")])]),t._v(" "),a("td",[t._v("Contains the Ruby source code to be evaluated.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("filename")])]),t._v(" "),a("td",[t._v("File name to use for error reporting.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("lineno")])]),t._v(" "),a("td",[t._v("Line number to use for error reporting.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("block")])]),t._v(" "),a("td",[t._v("The block of code to be evaluated.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("obj")])]),t._v(" "),a("td",[t._v("The receiver is passed to the block as its only argument.")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);