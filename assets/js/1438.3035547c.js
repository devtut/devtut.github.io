(window.webpackJsonp=window.webpackJsonp||[]).push([[1438],{1846:function(t,n,e){"use strict";e.r(n);var a=e(31),s=Object(a.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"rich-notifications"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rich-notifications"}},[t._v("#")]),t._v(" Rich Notifications")]),t._v(" "),e("p",[t._v("The Rich Notifications lets you customize the appearance of local and remote notifications when they appear on the user’s device.Rich notification mostly includes UNNotificationServiceExtension and UNNotificationContentExtension ie displaying the normal notification in an extended manner")]),t._v(" "),e("h2",{attrs:{id:"creating-a-simple-unnotificationcontentextension"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-simple-unnotificationcontentextension"}},[t._v("#")]),t._v(" Creating a simple UNNotificationContentExtension")]),t._v(" "),e("p",[e("strong",[t._v("Step 1")])]),t._v(" "),e("p",[t._v("Making the environment suitable for Notification. Make sure you enabled "),e("strong",[t._v("Background Modes")]),t._v(" and "),e("strong",[t._v("Push Notification")]),t._v(" "),e("a",{attrs:{href:"https://i.stack.imgur.com/Y6JlQ.png",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://i.stack.imgur.com/Y6JlQ.png",alt:"Enabling Background Modes"}}),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://i.stack.imgur.com/6pvyj.png",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://i.stack.imgur.com/6pvyj.png",alt:"Enabling Push Notifications"}}),e("OutboundLink")],1)]),t._v(" "),e("p",[e("strong",[t._v("Step 2: Creating an UNNotificationContentExtension")])]),t._v(" "),e("p",[t._v("Click on the "),e("strong",[t._v("+")]),t._v(" icon in the bottom which creates a target template and select Notification Content Extention -> next -> create a name for the content extension -> finish "),e("a",{attrs:{href:"https://i.stack.imgur.com/bpCjg.png",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://i.stack.imgur.com/bpCjg.png",alt:"Creating UNNotificationContentExtension"}}),e("OutboundLink")],1)]),t._v(" "),e("p",[e("strong",[t._v("Step 3:Configuring the info.plist file of the created extension")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://i.stack.imgur.com/CDSun.png",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://i.stack.imgur.com/CDSun.png",alt:"enter image description here"}}),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("The dictionary in NSExtension signifies how the notification content is displayed, these are performed on long pressing the received notification")]),t._v(" "),e("ul",[e("li",[t._v("UNNotificationExtensionOverridesDefaultTitle: We can give custom title for our notification by default it displays the name of the application "),e("code",[t._v("self.title = myTitle")])]),t._v(" "),e("li",[t._v("UNNotificationDefaultContentHidden: This boolean determines whether the default body of the notification is to be hidden or not")]),t._v(" "),e("li",[t._v("UNNotificationCategory: Category is created in "),e("code",[t._v("UNUserNotificationCenter")]),t._v(" in your application. Here it can be either a string or an array of strings, so each category can gave different types of data from which we can create different UI's. The payload we send must contain the category name in order to display this particular extension")]),t._v(" "),e("li",[t._v("UNNotificationExtensionInitialContentSizeRatio: The size of the initial content ie when displaying the ContentExtension for the first time the initial size with respect to width of the device. here 1 denotes the height will be equal to the width")])]),t._v(" "),e("p",[e("strong",[t._v("Step 4: Creating "),e("code",[t._v("UNNotificationAction")]),t._v(" and "),e("code",[t._v("UNNotificationCategory")]),t._v(" in our application")])]),t._v(" "),e("p",[t._v("In your app's AppDelegate.swift "),e("code",[t._v("didFinishLaunchingWithOptions")]),t._v(" function add")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('\n   let userNotificationAction:UNNotificationAction = UNNotificationAction.init(identifier: "ID1", title: "வணக்கம்", options: .destructive)\n    let userNotificationAction2:UNNotificationAction = UNNotificationAction.init(identifier: "ID2", title: "Success", options: .destructive)\n    \n    let notifCategory:UNNotificationCategory = UNNotificationCategory.init(identifier: "CATID1", actions: [userNotificationAction,userNotificationAction2], intentIdentifiers: ["ID1","ID2"] , options:.customDismissAction)\n    \n    UNUserNotificationCenter.current().delegate = self\n    UNUserNotificationCenter.current().setNotificationCategories([notifCategory])\n    UIApplication.shared.registerForRemoteNotifications()\n\n')])])]),e("p",[t._v("We created two "),e("code",[t._v("UNNotificationAction")]),t._v(" with identifiers "),e("code",[t._v("ID1")]),t._v(" and "),e("code",[t._v("ID2")]),t._v(" and added those actions to a "),e("code",[t._v("UNNotificationCategory")]),t._v(" with identifier "),e("code",[t._v("CATID1")]),t._v(" (the categoryID in ContentExtension's info.plist file are same, what we created here should be used in payload and the plist file). We set the category to our application's "),e("code",[t._v("UNUserNotificationCenter")]),t._v(" and in next line we are registering for the notification which calls the "),e("code",[t._v("didRegisterForRemoteNotificationsWithDeviceToken")]),t._v(" function where we get the device token")]),t._v(" "),e("p",[t._v("Note: dont forget to "),e("code",[t._v("import UserNotifications")]),t._v(" in your AppDelegate.swift and add "),e("code",[t._v("UNUserNotificationCenterDelegate")])]),t._v(" "),e("p",[e("strong",[t._v("Step 5: Sample payload for the NotificationContent")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("\n'aps': {\n    'badge': 0,\n    'alert': {\n        'title': \"Rich Notification\",\n        'body': \"Body of RICH NOTIFICATION\",\n        },\n    'sound' : \"default\",\n    'category': \"CATID1\",\n    'mutable-content':\"1\",\n    },\n'attachment': \"2\"\n\n")])])]),e("p",[e("strong",[t._v("Step 6: Configuring the ContentExtension")])]),t._v(" "),e("p",[t._v("The corresponding actions for the category is automatically displayed while the notification action is performed. Lets us see the code how its being performed")]),t._v(" "),e("div",{staticClass:"language-swift extra-class"},[e("pre",{pre:!0,attrs:{class:"language-swift"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIKit")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserNotifications")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserNotificationsUI")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NotificationViewController")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIViewController")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UNNotificationContentExtension")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@IBOutlet")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" imageView"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIImageView")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("viewDidLoad")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewDidLoad")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("didReceive")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token omit keyword"}},[t._v("_")]),t._v(" notification"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UNNotification")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Koushik"')])]),t._v("\n    imageView"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIColor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clear\n    imageView"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal constant"}},[t._v("#imageLiteral")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resourceName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"welcome.jpeg"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("didReceive")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token omit keyword"}},[t._v("_")]),t._v(" response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UNNotificationResponse")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" completionHandler completion"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@escaping")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UNNotificationContentExtensionResponseOption")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Koushik"')])]),t._v("\n    imageView"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIImage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("init")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("named"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Success.jpeg"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("actionIdentifier "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ID1"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       imageView"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIImage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("init")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("named"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Success.jpeg"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        imageView"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIImage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("init")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("named"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"welcome.jpeg"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),e("p",[e("strong",[t._v("Step 7: Result")])]),t._v(" "),e("p",[t._v("After receiving and long press/Clicking View notification, the notification looks like this "),e("a",{attrs:{href:"https://i.stack.imgur.com/BOkQC.jpg",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://i.stack.imgur.com/BOkQC.jpg",alt:"enter image description here"}}),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v('The title is "Koushik" since we gave '),e("code",[t._v('self.title = "Koushik"')]),t._v(" and "),e("code",[t._v("UNNotificationExtensionOverrideDefaultTitle")]),t._v(" as YES. In step 3 we gave "),e("code",[t._v("UNNotificationExtensionDefaultContentHidden")]),t._v(" as NO if its YES then the notification will look like images 3 and 4.")])])}),[],!1,null,null,null);n.default=s.exports}}]);