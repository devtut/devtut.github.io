(window.webpackJsonp=window.webpackJsonp||[]).push([[2931],{3339:function(s,t,a){"use strict";a.r(t);var n=a(31),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"r-code-vectorization-best-practices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#r-code-vectorization-best-practices"}},[s._v("#")]),s._v(" R code vectorization best practices")]),s._v(" "),a("h2",{attrs:{id:"by-row-operations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#by-row-operations"}},[s._v("#")]),s._v(" By row operations")]),s._v(" "),a("p",[s._v('The key in vectorizing R code, is to reduce or eliminate "by row operations" or method dispatching of R functions.')]),s._v(" "),a("p",[s._v('That means that when approaching a problem that at first glance requires "by row operations", such as calculating the means of each row, one needs to ask themselves:')]),s._v(" "),a("ul",[a("li",[s._v("What are the classes of the data sets I'm dealing with?")]),s._v(" "),a("li",[s._v("Is there an existing compiled code that can achieve this without the need of repetitive evaluation of R functions?")]),s._v(" "),a("li",[s._v("If not, can I do these operation by columns instead by row?")]),s._v(" "),a("li",[s._v("Finally, is it worth spending a lot of time on developing complicated vectorized code instead of just running a simple "),a("code",[s._v("apply")]),s._v(" loop? In other words, is the data big/sophisticated enough that R can't handle it efficiently using a simple loop?")])]),s._v(" "),a("p",[s._v("Putting aside the memory pre-allocation issue and growing object in loops, we will focus in this example on how to possibly avoid "),a("code",[s._v("apply")]),s._v(" loops, method dispatching or re-evaluating R functions within loops.")]),s._v(" "),a("p",[s._v("A standard/easy way of calculating mean by row would be:")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("apply"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtcars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          Mazda RX4       Mazda RX4 Wag          Datsun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("710")]),s._v("      Hornet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" Drive   Hornet Sportabout             Valiant          Duster "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("360")]),s._v(" \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.90727")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.98136")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23.59818")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.73955")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53.66455")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35.04909")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.72000")]),s._v(" \n          Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("240")]),s._v("D            Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("230")]),s._v("            Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("280")]),s._v("           Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("280")]),s._v("C          Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("450")]),s._v("SE          Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("450")]),s._v("SL         Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("450")]),s._v("SLC \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.63455")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.23364")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.86000")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.78727")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.43091")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.50000")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.35000")]),s._v(" \n Cadillac Fleetwood Lincoln Continental   Chrysler Imperial            Fiat "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("         Honda Civic      Toyota Corolla       Toyota Corona \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66.23273")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66.05855")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65.97227")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.44091")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.74227")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.81409")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.88864")]),s._v(" \n   Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird           Fiat X1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("       Porsche "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("914")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("        Lotus Europa \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47.24091")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.00773")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58.75273")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("57.37955")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.92864")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.77909")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.88027")]),s._v(" \n     Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("142")]),s._v("E \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60.97182")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34.50818")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("63.15545")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.26273")]),s._v(" \n\n")])])]),a("p",[s._v("But can we do better? Lets's see what happened here:")]),s._v(" "),a("ol",[a("li",[s._v("First, we converted a "),a("code",[s._v("data.frame")]),s._v(" to a "),a("code",[s._v("matrix")]),s._v(". (Note that his happens within the "),a("code",[s._v("apply")]),s._v(" function.) This is both inefficient and dangerous. a "),a("code",[s._v("matrix")]),s._v(" can't hold several column types at a time. Hence, such conversion will probably lead to loss of information and some times to misleading results (compare "),a("code",[s._v("apply(iris, 2, class)")]),s._v(" with "),a("code",[s._v("str(iris)")]),s._v(" or with "),a("code",[s._v("sapply(iris, class)")]),s._v(").")]),s._v(" "),a("li",[s._v("Second of all, we performed an operation repetitively, one time for each row. Meaning, we had to evaluate some R function "),a("code",[s._v("nrow(mtcars)")]),s._v(" times. In this specific case, "),a("code",[s._v("mean")]),s._v(" is not a computationally expensive function, hence R could likely easily handle it even for a big data set, but what would happen if we need to calculate the standard deviation by row (which involves an expensive square root operation)? Which brings us to the next point:")]),s._v(" "),a("li",[s._v("We evaluated the R function many times, but maybe there already is a compiled version of this operation?")])]),s._v(" "),a("p",[s._v("Indeed we could simply do:")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("rowMeans"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtcars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          Mazda RX4       Mazda RX4 Wag          Datsun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("710")]),s._v("      Hornet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" Drive   Hornet Sportabout             Valiant          Duster "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("360")]),s._v(" \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.90727")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.98136")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23.59818")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.73955")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53.66455")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35.04909")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.72000")]),s._v(" \n          Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("240")]),s._v("D            Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("230")]),s._v("            Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("280")]),s._v("           Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("280")]),s._v("C          Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("450")]),s._v("SE          Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("450")]),s._v("SL         Merc "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("450")]),s._v("SLC \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.63455")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.23364")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.86000")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.78727")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.43091")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.50000")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.35000")]),s._v(" \n Cadillac Fleetwood Lincoln Continental   Chrysler Imperial            Fiat "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("         Honda Civic      Toyota Corolla       Toyota Corona \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66.23273")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66.05855")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65.97227")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.44091")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.74227")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.81409")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.88864")]),s._v(" \n   Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird           Fiat X1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("       Porsche "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("914")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("        Lotus Europa \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47.24091")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.00773")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58.75273")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("57.37955")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.92864")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.77909")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.88027")]),s._v(" \n     Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("142")]),s._v("E \n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60.97182")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34.50818")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("63.15545")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.26273")]),s._v(" \n\n")])])]),a("p",[s._v("This involves no by row operations and therefore no repetitive evaluation of R functions. "),a("strong",[s._v("However")]),s._v(", we still converted a "),a("code",[s._v("data.frame")]),s._v(" to a "),a("code",[s._v("matrix")]),s._v(". Though "),a("code",[s._v("rowMeans")]),s._v(" has an error handling mechanism and it won't run on a data set that it can't handle, it's still has an efficiency cost.")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("rowMeans"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("iris"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nError "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" rowMeans"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("iris"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'x'")]),s._v(" must be numeric\n\n")])])]),a("p",[s._v("But still, can we do better? We could try instead of a matrix conversion with error handling, a different method that will allow us to use "),a("code",[s._v("mtcars")]),s._v(" as a vector (because a "),a("code",[s._v("data.frame")]),s._v(" is essentially a "),a("code",[s._v("list")]),s._v(" and a "),a("code",[s._v("list")]),s._v(" is a "),a("code",[s._v("vector")]),s._v(").")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("Reduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("`"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("`"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mtcars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ncol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtcars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.90727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.98136")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23.59818")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.73955")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53.66455")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35.04909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.72000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.63455")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.23364")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.86000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.78727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.43091")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.50000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.35000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66.23273")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66.05855")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65.97227")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.44091")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.74227")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.81409")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.88864")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47.24091")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.00773")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58.75273")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("57.37955")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.92864")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.77909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.88027")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60.97182")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34.50818")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("63.15545")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.26273")]),s._v("\n\n")])])]),a("p",[s._v("Now for possible speed gain, we lost column names and error handling (including "),a("code",[s._v("NA")]),s._v(" handling).")]),s._v(" "),a("p",[s._v("Another example would be calculating mean by group, using base R we could try")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("aggregate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" cyl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mtcars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ncyl      mpg     disp        hp     drat       wt     qsec        vs        am     gear     carb\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.66364")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("105.1364")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("82.63636")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.070909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.285727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.13727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9090909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7272727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.090909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.545455")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.74286")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("183.3143")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("122.28571")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.585714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.117143")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.97714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5714286")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4285714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.857143")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.428571")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.10000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("353.1000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("209.21429")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.229286")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.999214")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.77214")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0000000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1428571")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.285714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.500000")]),s._v("\n\n")])])]),a("p",[s._v("Still, we are basically evaluating an R function in a loop, but the loop is now hidden in an internal C function (it matters little whether it is a C or an R loop).")]),s._v(" "),a("p",[s._v("Could we avoid it? Well there is a compiled function in R called "),a("code",[s._v("rowsum")]),s._v(", hence we could do:")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("rowsum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtcars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mtcars"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("cyl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mtcars"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("cyl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmpg     disp        hp     drat       wt     qsec        vs        am     gear     carb\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.66364")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("105.1364")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("82.63636")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.070909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.285727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.13727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9090909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7272727")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.090909")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.545455")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.74286")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("183.3143")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("122.28571")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.585714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.117143")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.97714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5714286")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4285714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.857143")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.428571")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.10000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("353.1000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("209.21429")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.229286")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.999214")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.77214")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0000000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1428571")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.285714")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.500000")]),s._v("\n\n")])])]),a("p",[s._v("Though we had to convert to a matrix first too.")]),s._v(" "),a("p",[s._v("A this point we may question whether our current data structure is the most appropriate one. Is a "),a("code",[s._v("data.frame")]),s._v(" is the best practice? Or should one just switch to a "),a("code",[s._v("matrix")]),s._v(" data structure in order to gain efficiency?")]),s._v(" "),a("p",[s._v("By row operations will get more and more expensive (even in matrices) as we start to evaluate expensive functions each time. Lets us consider a variance calculation by row example.")]),s._v(" "),a("p",[s._v("Lets say we have a matrix "),a("code",[s._v("m")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("set.seed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<-")]),s._v(" matrix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sample"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1e2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nm\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("86")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("71")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("81")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("89")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("57")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("82")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("62")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("79")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("94")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("67")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("63")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("76")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("48")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("85")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("75")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("95")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("74")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("77")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("54")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("78")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("61")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("73")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("93")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("87")]),s._v("\n\n")])])]),a("p",[s._v("One could simply do:")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("apply"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" var"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("871.6556")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("957.5111")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("699.2111")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("941.4333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1237.3333")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("641.8222")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("539.7889")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("759.4333")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500.4889")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1255.6111")]),s._v("\n\n")])])]),a("p",[s._v("On the other hand, one could also completely vectorize this operation by following the formula of variance")]),s._v(" "),a("div",{staticClass:"language-r extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[s._v("RowVar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  rowSums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" rowMeans"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nRowVar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("871.6556")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("957.5111")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("699.2111")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("941.4333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1237.3333")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("641.8222")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("539.7889")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("759.4333")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500.4889")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1255.6111")]),s._v("\n\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);