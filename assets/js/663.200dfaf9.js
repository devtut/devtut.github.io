(window.webpackJsonp=window.webpackJsonp||[]).push([[663],{1071:function(n,t,e){"use strict";e.r(t);var a=e(31),s=Object(a.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"inline-functions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#inline-functions"}},[n._v("#")]),n._v(" Inline functions")]),n._v(" "),e("p",[n._v("A function defined with the "),e("code",[n._v("inline")]),n._v(" specifier is an inline function. An inline function can be multiply defined without violating the "),e("a",{attrs:{href:"http://stackoverflow.com/documentation/c%2b%2b/4907/one-definition-rule-odr",target:"_blank",rel:"noopener noreferrer"}},[n._v("One Definition Rule"),e("OutboundLink")],1),n._v(", and can therefore be defined in a header with external linkage. Declaring a function inline hints to the compiler that the function should be inlined during code generation, but does not provide a guarantee.")]),n._v(" "),e("h2",{attrs:{id:"non-member-inline-function-declaration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#non-member-inline-function-declaration"}},[n._v("#")]),n._v(" Non-member inline function declaration")]),n._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("inline")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n")])])]),e("h2",{attrs:{id:"non-member-inline-function-definition"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#non-member-inline-function-definition"}},[n._v("#")]),n._v(" Non-member inline function definition")]),n._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("inline")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("return")]),n._v(" x "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("+")]),n._v(" y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n")])])]),e("h2",{attrs:{id:"member-inline-functions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#member-inline-functions"}},[n._v("#")]),n._v(" Member inline functions")]),n._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[n._v("// header (.hpp)    ")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("struct")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("A")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("void")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("i_am_inlined")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("struct")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("B")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("void")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("i_am_NOT_inlined")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[n._v("// source (.cpp)    ")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("void")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("B")]),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[n._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("i_am_NOT_inlined")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n")])])]),e("h2",{attrs:{id:"what-is-function-inlining"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-is-function-inlining"}},[n._v("#")]),n._v(" What is function inlining?")]),n._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("inline")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("return")]),n._v(" x "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("+")]),n._v(" y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("main")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" b "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" c "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n")])])]),e("p",[n._v("In the above code, when "),e("code",[n._v("add")]),n._v(" is inlined, the resulting code would become something like this")]),n._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("main")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" b "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("int")]),n._v(" c "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v("+")]),n._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n")])])]),e("p",[n._v("The inline function is nowhere to be seen, its body gets "),e("strong",[n._v("inlined")]),n._v(" into the caller's body. Had "),e("code",[n._v("add")]),n._v(" not been inlined, a function would be called. The overhead of calling a function -- such as creating a new "),e("a",{attrs:{href:"http://stackoverflow.com/q/10057443/183120",target:"_blank",rel:"noopener noreferrer"}},[n._v("stack frame"),e("OutboundLink")],1),n._v(", copying arguments, making local variables, jump (losing locality of reference and there by cache misses), etc. -- has to be incurred.")]),n._v(" "),e("h4",{attrs:{id:"syntax"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#syntax"}},[n._v("#")]),n._v(" Syntax")]),n._v(" "),e("ul",[e("li",[e("strong",[e("code",[n._v("inline")])]),n._v(" "),e("strong",[n._v("function_declaration")])]),n._v(" "),e("li",[e("strong",[e("code",[n._v("inline")])]),n._v(" "),e("strong",[n._v("function_definition")])]),n._v(" "),e("li",[e("strong",[n._v("class { function_definition };")])])]),n._v(" "),e("h4",{attrs:{id:"remarks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[n._v("#")]),n._v(" Remarks")]),n._v(" "),e("p",[n._v("Usually if code generated for a function is "),e("strong",[n._v("sufficiently")]),n._v(" small then it's a good candidate to be inlined. Why so? If a function is large and is inlined in a loop, for all the calls made, the large function's code would be duplicated leading to the generated binary size bloat. But, how small is sufficient?")]),n._v(" "),e("p",[n._v("While inline functions seem to be great way to avoid function calling overhead, it's to be noted that not all functions that are marked "),e("code",[n._v("inline")]),n._v(" are inlined. In other words, when you say "),e("code",[n._v("inline")]),n._v(", it is only a hint to the compiler, not an order: the compiler isn't obliged to inline the function, it's free to ignore it - most of them do. Modern compilers are better at making such optimisations that this keyword is now a vestige of the past, when this suggestion of function inlining by the programmer\nwas taken seriously by the compilers. Even functions not marked "),e("code",[n._v("inline")]),n._v(" are inlined by the compiler when it sees benefit in doing so.")]),n._v(" "),e("h3",{attrs:{id:"inline-as-a-linkage-directive"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#inline-as-a-linkage-directive"}},[n._v("#")]),n._v(" Inline as a linkage directive")]),n._v(" "),e("p",[n._v("The more practical use of "),e("code",[n._v("inline")]),n._v(" in modern C++ comes from using it as a linkage directive. When "),e("strong",[n._v("defining")]),n._v(", not declaring, a function in a header which is going to be included in multiple sources, then each translation unit will have its own copy of this function leading to a "),e("a",{attrs:{href:"http://stackoverflow.com/q/4192170/183120",target:"_blank",rel:"noopener noreferrer"}},[n._v("ODR"),e("OutboundLink")],1),n._v(" (One Definition Rule) violation; this rule roughly says that there can be only one definition of a function, variable, etc. To circumvent this violation, marking the function definition "),e("code",[n._v("inline")]),n._v(" implicitly makes the function linkage internal.")]),n._v(" "),e("h3",{attrs:{id:"faqs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#faqs"}},[n._v("#")]),n._v(" FAQs")]),n._v(" "),e("p",[e("strong",[n._v("When should I write the keyword 'inline' for a function/method in C++?")])]),n._v(" "),e("p",[n._v("Only when you want the function to be defined in a header. More exactly only when the function's definition can show up in multiple compilation units. It's a good idea to define small (as in one liner) functions in the header file as it gives the compiler more information to work with while optimizing your code. It also increases compilation time.")]),n._v(" "),e("p",[e("strong",[n._v("When should I not write the keyword 'inline' for a function/method in C++?")])]),n._v(" "),e("p",[n._v("Don't add "),e("code",[n._v("inline")]),n._v(" when you think your code will run faster if the compiler inlines it.")]),n._v(" "),e("p",[e("strong",[n._v("When will the the compiler not know when to make a function/method inline?")])]),n._v(" "),e("p",[n._v("Generally, the compiler will be able to do this better than you. However, the compiler doesn't have the option to inline code if it doesn't have the function definition. In maximally optimized code usually all private methods are inlined whether you ask for it or not.")]),n._v(" "),e("h3",{attrs:{id:"see-also"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#see-also"}},[n._v("#")]),n._v(" See Also")]),n._v(" "),e("li",[n._v("\n[When should I write the keyword 'inline' for a function/method?](http://stackoverflow.com/q/1759300/183120)\n")]),n._v(" "),e("li",[n._v("\n[Is there still a use for inline?](http://stackoverflow.com/q/29796264/183120)\n")])])}),[],!1,null,null,null);t.default=s.exports}}]);