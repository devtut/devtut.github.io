(window.webpackJsonp=window.webpackJsonp||[]).push([[3193],{3601:function(t,s,a){"use strict";a.r(s);var e=a(31),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"using-googlemaps-with-rails"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-googlemaps-with-rails"}},[t._v("#")]),t._v(" Using GoogleMaps with Rails")]),t._v(" "),a("h2",{attrs:{id:"add-the-google-maps-javascript-tag-to-the-layout-header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-google-maps-javascript-tag-to-the-layout-header"}},[t._v("#")]),t._v(" Add the google maps javascript tag to the layout header")]),t._v(" "),a("p",[t._v("In order to have google maps work properly with "),a("a",{attrs:{href:"https://github.com/turbolinks/turbolinks",target:"_blank",rel:"noopener noreferrer"}},[t._v("turbolinks"),a("OutboundLink")],1),t._v(", add the javascript tag directly to the layout header rather than including it in a view.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/views/layouts/my_layout.html.haml")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":lang")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'en'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("head\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" google_maps_api_script_tag\n\n")])])]),a("p",[t._v("The "),a("code",[t._v("google_maps_api_script_tag")]),t._v(" is best defined in a helper.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/helpers/google_maps_helper.rb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GoogleMapsHelper")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("google_maps_api_script_tag")])]),t._v("\n    javascript_include_tag google_maps_api_source\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("google_maps_api_source")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://maps.googleapis.com/maps/api/js?key='),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),t._v("google_maps_api_key"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("google_maps_api_key")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("application"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secrets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("google_maps_api_key\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("p",[t._v("You can register your application with google and get your api key in the "),a("a",{attrs:{href:"https://console.developers.google.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("google api console"),a("OutboundLink")],1),t._v(". Google has a short "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/get-api-key?hl=de",target:"_blank",rel:"noopener noreferrer"}},[t._v("guide how to request an api key for the google maps javascript api"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("The api key is stored in the "),a("code",[t._v("secrets.yml")]),t._v("file:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# config/secrets.yml")]),t._v("\ndevelopment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  google_maps_api_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\nproduction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  google_maps_api_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n\n")])])]),a("p",[t._v("Don't forget to add "),a("code",[t._v("config/secrets.yml")]),t._v(" to your "),a("code",[t._v(".gitignore")]),t._v(" file and makre sure you don't commit the api key to the repository.")]),t._v(" "),a("h2",{attrs:{id:"geocode-the-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geocode-the-model"}},[t._v("#")]),t._v(" Geocode the model")]),t._v(" "),a("p",[t._v("Suppose, your users and/or groups have profiles and you want to display address profile fields on a google map.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/models/profile_fields/address.rb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Base")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Attributes: ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# label, e.g. "Work address"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# value, e.g. "Willy-Brandt-Straße 1\\n10557 Berlin"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("p",[t._v("A great way to geocode the addresses, i.e. provide "),a("code",[t._v("longitude")]),t._v(" and "),a("code",[t._v("latitude")]),t._v(" is the "),a("a",{attrs:{href:"https://github.com/alexreisner/geocoder",target:"_blank",rel:"noopener noreferrer"}},[t._v("geocoder gem"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("Add geocoder to your "),a("code",[t._v("Gemfile")]),t._v(" and run "),a("code",[t._v("bundle")]),t._v(" to install it.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Gemfile")]),t._v("\ngem "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'geocoder'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'~> 1.3'")]),t._v("\n\n")])])]),a("p",[t._v("Add database columns for "),a("code",[t._v("latitude")]),t._v(" and "),a("code",[t._v("longitude")]),t._v(" in order to save the location in the database. This is more efficient than querying the geocoding service every time you need the location. It's faster and you're not hitting the query limit so quickly.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("➜ bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rails generate migration add_latitude_and_longitude_to_profile_fields \\\n    latitude"),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":float")]),t._v(" longitude"),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":float")]),t._v("\n➜ bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rails db"),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":migrate")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Rails 5, or:")]),t._v("\n➜ rake db"),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":migrate")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Rails 3, 4")]),t._v("\n\n")])])]),a("p",[t._v("Add the geocoding mechanism to your model. In this example, the address string is stored in the "),a("code",[t._v("value")]),t._v(" attribute. Configure the geocoding to perform when the record has changed, and only whan a value is present:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/models/profile_fields/address.rb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Base")]),t._v("\n  geocoded_by "),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":value")]),t._v("\n  after_validation "),a("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":geocode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("present"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value_changed"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("p",[t._v("By default, geocoder uses google as lookup service. It has lots of interesting features like distance calculations or proximity search. Fore more information, have a look at the "),a("a",{attrs:{href:"https://github.com/alexreisner/geocoder",target:"_blank",rel:"noopener noreferrer"}},[t._v("geocoder README"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"show-addresses-on-a-google-map-in-the-profile-view"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#show-addresses-on-a-google-map-in-the-profile-view"}},[t._v("#")]),t._v(" Show addresses on a google map in the profile view")]),t._v(" "),a("p",[t._v("On the profile view, show the profile fields of a user or group in a list as well as the address fields on a google map.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/views/profiles/show.html.haml")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("h1 "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Contact")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Information")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("profile_fields\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" render "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@profile_fields")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("google_map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" address_fields"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@address_fields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("The appropriate "),a("code",[t._v("@profile_fields")]),t._v(" and "),a("code",[t._v("@address_fields")]),t._v(" are set in the controller:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/profiles_controller.rb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProfilesController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationController")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@profile_fields")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@user_or_group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("profile_fields\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@address_fields")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@profile_fields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("where"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ProfileFields::Address'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("p",[t._v("Initialize the map, place the markers, set the zoom and other map settings with javascript.")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://i.stack.imgur.com/2n8le.png",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"http://i.stack.imgur.com/2n8le.png",alt:"Example profile view"}}),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"set-the-markers-on-the-map-with-javascript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-the-markers-on-the-map-with-javascript"}},[t._v("#")]),t._v(" Set the markers on the map with javascript")]),t._v(" "),a("p",[t._v("Suppose, there is a "),a("code",[t._v(".google_map")]),t._v(" div, which will become the map, and which has the address fields to show as markers as "),a("code",[t._v("data")]),t._v(" attribute.")]),t._v(" "),a("p",[t._v("For example:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("profiles"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"google_map"')]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("fields"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Work address'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Willy-Brandt-Straße 1\\n10557 Berlin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("lng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n")])])]),a("p",[t._v("To make use of the "),a("code",[t._v("$(document).ready")]),t._v(" event with "),a("a",{attrs:{href:"https://github.com/turbolinks/turbolinks",target:"_blank",rel:"noopener noreferrer"}},[t._v("turbolinks"),a("OutboundLink")],1),t._v(" without managing the turbolinks events by hand, use the "),a("a",{attrs:{href:"https://github.com/kossnocorp/jquery.turbolinks",target:"_blank",rel:"noopener noreferrer"}},[t._v("jquery.turbolinks gem"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("If you want to perform some other operations with the map, later, for example filtering or info windows, it's convenient to have the map managed by a "),a("a",{attrs:{href:"http://coffeescript.org/#classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("coffee script class"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/assets/javascripts/google_maps.js.coffee")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("App")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unless")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("App?")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GoogleMap")]),t._v("\n  constructor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map_div"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TODO: initialize the map")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TODO: set the markers")]),t._v("\n\n")])])]),a("p",[t._v("When using several coffee script files, which are namespaced by default, it's convenient to define a global "),a("code",[t._v("App")]),t._v(" namespace, which is shared by all coffee script files.")]),t._v(" "),a("p",[t._v("Then, loop through (possibly several) "),a("code",[t._v(".google_map")]),t._v(" divs and create one instance of the "),a("code",[t._v("App.GoogleMap")]),t._v(" class for each of them.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/assets/javascripts/google_maps.js.coffee")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ready "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("google_maps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.google_map'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    map_div "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    map "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GoogleMap")]),t._v(" map_div\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("google_maps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push map\n\n")])])]),a("h2",{attrs:{id:"initialize-the-map-using-a-coffee-script-class"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initialize-the-map-using-a-coffee-script-class"}},[t._v("#")]),t._v(" Initialize the map using a coffee script class.")]),t._v(" "),a("p",[t._v("Provided an "),a("code",[t._v("App.GoogleMap")]),t._v(" "),a("a",{attrs:{href:"http://coffeescript.org/#classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("coffee script class"),a("OutboundLink")],1),t._v(", the google map can be initialized like this:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/assets/javascripts/google_maps.js.coffee")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GoogleMap")]),t._v("\n  map_div"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  constructor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map_div"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map_div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" map_div\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@init_map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@reference_the_map_as_data_attribute")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# To access the GoogleMap object or the map object itself")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# later via the DOM, for example ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     $('.google_map').data('GoogleMap')")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# store references as data attribute of the map_div.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  reference_the_map_as_data_attribute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map_div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GoogleMap'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" this\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map_div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'map'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map")]),t._v("\n\n  init_map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" google"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@dom_element")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map_configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" google"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `@map_div` is the jquery object. But google maps needs")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the real DOM element.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  dom_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map_div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  map_configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    scrollWheel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("To learn more about the possible "),a("code",[t._v("map_configuration")]),t._v(" options, have a look at google's "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/3.exp/reference#MapOptions",target:"_blank",rel:"noopener noreferrer"}},[t._v("MapOptions documentation"),a("OutboundLink")],1),t._v(" and their "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/controls",target:"_blank",rel:"noopener noreferrer"}},[t._v("guide to adding control elements"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("For reference, the class "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("google.maps.Map")]),t._v("is extensively documented here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"initialize-the-map-markers-using-a-coffee-script-class"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initialize-the-map-markers-using-a-coffee-script-class"}},[t._v("#")]),t._v(" Initialize the map markers using a coffee script class")]),t._v(" "),a("p",[t._v("Provided an "),a("code",[t._v("App.GoogleMap")]),t._v(" "),a("a",{attrs:{href:"http://coffeescript.org/#classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("coffee script class"),a("OutboundLink")],1),t._v(" and the marker information being stored in the "),a("code",[t._v("data-address-fields")]),t._v(" attribute of the "),a("code",[t._v(".google_map")]),t._v(" div, the map markers can be initialized on the map like this:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/assets/javascripts/google_maps.js.coffee")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GoogleMap")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n  markers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n  constructor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map_div"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@init_markers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  address_fields"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map_div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'address-fields'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  init_markers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" this  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# to reference the instance as `self` when `this` is redefined.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("markers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" address_field "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address_fields"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      marker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" google"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Marker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          lng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("longitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          lat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("latitude\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# # or, if `position` is defined in `ProfileFields::Address#as_json`:")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# position: address_field.position,")]),t._v("\n        title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("markers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push marker\n\n")])])]),a("p",[t._v("To learn more about marker options, have a look at google's "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/3.exp/reference#MarkerOptions",target:"_blank",rel:"noopener noreferrer"}},[t._v("MarkerOptions documentation"),a("OutboundLink")],1),t._v(" and their "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/markers",target:"_blank",rel:"noopener noreferrer"}},[t._v("guide to markers"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"auto-zoom-a-map-using-a-coffee-script-class"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#auto-zoom-a-map-using-a-coffee-script-class"}},[t._v("#")]),t._v(" Auto-zoom a map using a coffee script class")]),t._v(" "),a("p",[t._v("Provided an "),a("code",[t._v("App.GoogleMap")]),t._v(" "),a("a",{attrs:{href:"http://coffeescript.org/#classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("coffee script class"),a("OutboundLink")],1),t._v("  with the "),a("code",[t._v("google.maps.Map")]),t._v(" stored as "),a("code",[t._v("@map")]),t._v(" and the "),a("code",[t._v("google.maps.Marker")]),t._v("s stored as "),a("code",[t._v("@markers")]),t._v(", the map can be auto-zoomed, i.e. adjusted that all markers are visible, like this:\non the map like this:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/assets/javascripts/google_maps.js.coffee")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GoogleMap")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n  bounds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  constructor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map_div"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@auto_zoom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  auto_zoom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@init_bounds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TODO: Maybe, adjust the zoom to have a maximum or ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# minimum zoom level, here.")]),t._v("\n\n  init_bounds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@bounds")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" google"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LatLngBounds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" marker "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@markers")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@bounds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extend")]),t._v(" marker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fitBounds "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@bounds")]),t._v("\n\n")])])]),a("p",[t._v("To learn more about bounds, have a look at google's "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/3.exp/reference#LatLngBounds",target:"_blank",rel:"noopener noreferrer"}},[t._v("LatLngBounds documentation"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"exposing-the-model-properties-as-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exposing-the-model-properties-as-json"}},[t._v("#")]),t._v(" Exposing the model properties as json")]),t._v(" "),a("p",[t._v("To display address profile fields as markers on a google map, the address field objects need to be passed as json objects to javascript.")]),t._v(" "),a("h3",{attrs:{id:"regular-database-attributes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#regular-database-attributes"}},[t._v("#")]),t._v(" Regular database attributes")]),t._v(" "),a("p",[t._v("When calling "),a("code",[t._v("to_json")]),t._v(" on an "),a("a",{attrs:{href:"http://guides.rubyonrails.org/active_record_basics.html#creating-active-record-models",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("ApplicationRecord")]),a("OutboundLink")],1),t._v(" object, the database attributes are automatically exposed.")]),t._v(" "),a("p",[t._v("Given a "),a("code",[t._v("ProfileFields::Address")]),t._v(" model with "),a("code",[t._v("label")]),t._v(", "),a("code",[t._v("value")]),t._v(", "),a("code",[t._v("longitude")]),t._v(" and "),a("code",[t._v("latitude")]),t._v(" attributes, "),a("code",[t._v("address_field.as_json")]),t._v(" results in a "),a("code",[t._v("Hash")]),t._v(", e.g. representation,")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("as_json  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# =>")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Work address"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Willy-Brandt-Straße 1\\n10557 Berlin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    longitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" latitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("which is converted to a json string by "),a("code",[t._v("to_json")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[t._v("address_field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_json  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# =>")]),t._v('\n  "'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v('\\"label\\"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v('\\"'),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Work")]),t._v(' address\\"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v('\\"value\\"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v('\\"'),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Willy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Brandt")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Stra")]),t._v("ße "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\\\\n\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10557")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Berlin")]),t._v("\\"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('",\\"longitude\\":...,\\"latitude\\":...}"')]),t._v("\n\n")])])]),a("p",[t._v("This is useful because it allows to use "),a("code",[t._v("label")]),t._v(" and "),a("code",[t._v("value")]),t._v(" later in javascript, for example to show tool tips for the map markers.")]),t._v(" "),a("h3",{attrs:{id:"other-attributes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#other-attributes"}},[t._v("#")]),t._v(" Other attributes")]),t._v(" "),a("p",[t._v("Other virtual attributes can be exposed by overriding the "),a("code",[t._v("as_json")]),t._v(" method.")]),t._v(" "),a("p",[t._v("For example, to expose a "),a("code",[t._v("title")]),t._v(" attribute, include it in the merged "),a("code",[t._v("as_json")]),t._v(" hash:")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/models/profile_fields/address.rb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Base")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# For example: "John Doe, Work address"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("title")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v(", "),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("as_json")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("merge "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])]),a("p",[t._v("The above example uses "),a("a",{attrs:{href:"http://rubylearning.com/satishtalim/ruby_overriding_methods.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("super")]),a("OutboundLink")],1),t._v(" to call the original "),a("code",[t._v("as_json")]),t._v(" method, which returns the original attribute hash of the object, and merges it with the required position hash.")]),t._v(" "),a("p",[t._v("To understand the difference between "),a("code",[t._v("as_json")]),t._v(" and "),a("code",[t._v("to_json")]),t._v(", have a look at "),a("a",{attrs:{href:"http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/",target:"_blank",rel:"noopener noreferrer"}},[t._v("this blog post by jjulian"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"position"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#position"}},[t._v("#")]),t._v(" Position")]),t._v(" "),a("p",[t._v("To render markers, the google maps api, by default, requires a "),a("code",[t._v("position")]),t._v(" hash which has longitude and latitude stored as "),a("code",[t._v("lng")]),t._v(" and "),a("code",[t._v("lat")]),t._v(" respectively.")]),t._v(" "),a("p",[t._v("This position hash can be created in javascript, later, or here when defining the json representation of the address field:")]),t._v(" "),a("p",[t._v("To provide this "),a("code",[t._v("position")]),t._v(" as json attribute of the address field, just override the "),a("code",[t._v("as_json")]),t._v(" method on the model.")]),t._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/models/profile_fields/address.rb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ProfileFields")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Base")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("as_json")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("merge "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n      position"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        lng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("longitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        lat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("latitude\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);