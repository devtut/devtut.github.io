(window.webpackJsonp=window.webpackJsonp||[]).push([[2588],{2996:function(e,t,a){"use strict";a.r(t);var s=a(31),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"desired-state-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#desired-state-configuration"}},[e._v("#")]),e._v(" Desired State Configuration")]),e._v(" "),a("h2",{attrs:{id:"simple-example-enabling-windowsfeature"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-example-enabling-windowsfeature"}},[e._v("#")]),e._v(" Simple example - Enabling WindowsFeature")]),e._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[e._v("configuration EnableIISFeature\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    node localhost\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        WindowsFeature IIS\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            Ensure = “Present”\n            Name = “Web"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Server”                      \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),a("p",[e._v('If you run this configuration in Powershell (EnableIISFeature), it will produce a localhost.mof file. This is the "compiled" configuration you can run on a machine.')]),e._v(" "),a("p",[e._v("To test the DSC configuration on your localhost, you can simply invoke the following:")]),e._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Start-DscConfiguration")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ComputerName localhost "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Wait \n\n")])])]),a("h2",{attrs:{id:"starting-dsc-mof-on-remote-machine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#starting-dsc-mof-on-remote-machine"}},[e._v("#")]),e._v(" Starting DSC (mof) on remote machine")]),e._v(" "),a("p",[e._v("Starting a DSC on a remote machine is almost just as simple. Assuming you've already set up Powershell remoting (or enabled WSMAN).")]),e._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$remoteComputer")]),e._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"myserver.somedomain.com"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$cred")]),e._v(" = "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get-Credential")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Start-DSCConfiguration")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ServerName "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$remoteComputer")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Credential "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$cred")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Verbose\n\n")])])]),a("p",[a("strong",[e._v("Nb:")]),e._v(" Assuming you have compiled a configuration for your node on your localmachine (and that the file myserver.somedomain.com.mof is present prior to starting the configuration)")]),e._v(" "),a("h2",{attrs:{id:"importing-psd1-data-file-into-local-variable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#importing-psd1-data-file-into-local-variable"}},[e._v("#")]),e._v(" Importing psd1 (data file) into local variable")]),e._v(" "),a("p",[e._v("Sometimes it can be useful to test your Powershell data files and iterate through the nodes and servers.")]),e._v(" "),a("p",[e._v("Powershell 5 (WMF5) added this neat little feature for doing this called Import-PowerShellDataFile .")]),e._v(" "),a("p",[e._v("Example:")]),e._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$data")]),e._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Import-PowerShellDataFile")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("path "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("\\MydataFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("psd1\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("AllNodes\n\n")])])]),a("h2",{attrs:{id:"list-available-dsc-resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list-available-dsc-resources"}},[e._v("#")]),e._v(" List available DSC Resources")]),e._v(" "),a("p",[e._v("To list available DSC resources on your authoring node:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\nGet-DscResource \n\n")])])]),a("p",[e._v("This will list all resources for all installed modules (that are in your PSModulePath) on your authoring node.")]),e._v(" "),a("p",[e._v("To list all available DSC resources that can be found in the online sources (PSGallery ++) on WMF 5 :")]),e._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Find-DSCResource")]),e._v("\n\n")])])]),a("h2",{attrs:{id:"importing-resources-for-use-in-dsc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#importing-resources-for-use-in-dsc"}},[e._v("#")]),e._v(" Importing resources for use in DSC")]),e._v(" "),a("p",[e._v("Before you can use a resource in a configuration, you must explicitly import it. Just having it installed on your computer, will not let you use the resource implicitly.")]),e._v(" "),a("p",[e._v("Import a resource by using Import-DscResource .")]),e._v(" "),a("p",[e._v("Example showing how to import the PSDesiredStateConfiguration resource and the File resource.")]),e._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[e._v("Configuration InstallPreReqs\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("param")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# params to DSC goes here.")]),e._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Import-DscResource")]),e._v(" PSDesiredStateConfiguration \n\n   File CheckForTmpFolder "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Type")]),e._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Directory'")]),e._v("\n        DestinationPath = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'C:\\Tmp'")]),e._v("\n        Ensure = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Present"')]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),a("p",[a("strong",[e._v("Note")]),e._v(": In order for DSC Resources to work, you must have the modules installed on the target machines when running the configuration. If you don't have them installed, the configuration will fail.")])])}),[],!1,null,null,null);t.default=n.exports}}]);