(window.webpackJsonp=window.webpackJsonp||[]).push([[1567],{1973:function(e,t,s){"use strict";s.r(t);var a=s(31),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"expressions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expressions"}},[e._v("#")]),e._v(" Expressions")]),e._v(" "),s("h2",{attrs:{id:"operator-precedence"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#operator-precedence"}},[e._v("#")]),e._v(" Operator Precedence")]),e._v(" "),s("p",[e._v("When an expression contains multiple operators, it can potentially be read in different ways.  For example, the mathematical expression "),s("code",[e._v("1 + 2 x 3")]),e._v(" could be read in two ways:")]),e._v(" "),s("ol",[s("li",[e._v("Add "),s("code",[e._v("1")]),e._v(" and "),s("code",[e._v("2")]),e._v(" and multiply the result by "),s("code",[e._v("3")]),e._v(".  This gives the answer "),s("code",[e._v("9")]),e._v(".  If we added parentheses, this would look like "),s("code",[e._v("( 1 + 2 ) x 3")]),e._v(".")]),e._v(" "),s("li",[e._v("Add "),s("code",[e._v("1")]),e._v(" to the result of multiplying "),s("code",[e._v("2")]),e._v(" and "),s("code",[e._v("3")]),e._v(".  This gives the answer "),s("code",[e._v("7")]),e._v(".  If we added parentheses, this would look like "),s("code",[e._v("1 + ( 2 x 3 )")]),e._v(".")])]),e._v(" "),s("p",[e._v('In mathematics, the convention is to read the expression the second way.  The general rule is that multiplication and division are done before addition and subtraction.  When more advanced mathematical notation is used, either the meaning is either "self-evident" (to a trained mathematician!), or parentheses are added to disambiguate. In either case, the effectiveness of the notation to convey meaning depends on the intelligence and shared knowledge of the mathematicians.')]),e._v(" "),s("p",[e._v("Java has the same clear rules on how to read an expression, based on the "),s("strong",[e._v("precedence")]),e._v(" of the operators that are used.")]),e._v(" "),s("p",[e._v("In general, each operator is ascribed a "),s("strong",[e._v("precedence")]),e._v(" value; see the table below.")]),e._v(" "),s("p",[e._v("For example:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n 1 + 2 * 3\n\n")])])]),s("p",[e._v("The precedence of "),s("code",[e._v("+")]),e._v(" is lower than the precedence of "),s("code",[e._v("*")]),e._v(", so the result of the expression is 7, not 9.")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Description")]),e._v(" "),s("th",[e._v("Operators / constructs (primary)")]),e._v(" "),s("th",[e._v("Precedence")]),e._v(" "),s("th",[e._v("Associativity")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("Qualifier"),s("br"),e._v("Parentheses"),s("br"),e._v("Instance creation"),s("br"),e._v("Field access"),s("br"),e._v("Array access"),s("br"),e._v("Method invocation"),s("br"),e._v("Method reference")]),e._v(" "),s("td",[e._v("name"),s("code",[e._v(".")]),e._v("name"),s("br"),s("code",[e._v("(")]),e._v("expr"),s("code",[e._v(")")]),s("br"),s("code",[e._v("new")]),s("br"),e._v("primary"),s("code",[e._v(".")]),e._v("name"),s("br"),e._v("primary"),s("code",[e._v("[")]),e._v("expr"),s("code",[e._v("]")]),s("br"),e._v("primary"),s("code",[e._v("(")]),e._v("expr, ..."),s("code",[e._v(")")]),s("br"),e._v("primary"),s("code",[e._v("::")]),e._v("name")]),e._v(" "),s("td",[e._v("15")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Post increment")]),e._v(" "),s("td",[e._v("expr"),s("code",[e._v("++")]),e._v(", expr"),s("code",[e._v("--")])]),e._v(" "),s("td",[e._v("14")]),e._v(" "),s("td",[e._v("-")])]),e._v(" "),s("tr",[s("td",[e._v("Pre increment"),s("br"),e._v("Unary"),s("br"),e._v("Cast"),s("sup",[e._v("1")])]),e._v(" "),s("td",[s("code",[e._v("++")]),e._v("expr, "),s("code",[e._v("--")]),e._v("expr,"),s("br"),s("code",[e._v("+")]),e._v("expr, "),s("code",[e._v("-")]),e._v("expr, "),s("code",[e._v("~")]),e._v("expr, "),s("code",[e._v("!")]),e._v("expr,"),s("br"),s("code",[e._v("(")]),e._v("type"),s("code",[e._v(")")]),e._v("expr")]),e._v(" "),s("td",[e._v("13")]),e._v(" "),s("td",[e._v("-"),s("br"),e._v("Right to left"),s("br"),e._v("Right to left")])]),e._v(" "),s("tr",[s("td",[e._v("Multiplicative")]),e._v(" "),s("td",[e._v("* / %")]),e._v(" "),s("td",[e._v("12")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Additive")]),e._v(" "),s("td",[e._v("+ -")]),e._v(" "),s("td",[e._v("11")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Shift")]),e._v(" "),s("td",[e._v("<< >> >>>")]),e._v(" "),s("td",[e._v("10")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Relational")]),e._v(" "),s("td",[e._v("< > <= >= "),s("code",[e._v("instanceof")])]),e._v(" "),s("td",[e._v("9")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Equality")]),e._v(" "),s("td",[e._v("== !=")]),e._v(" "),s("td",[e._v("8")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Bitwise AND")]),e._v(" "),s("td",[e._v("&")]),e._v(" "),s("td",[e._v("7")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Bitwise exclusive OR")]),e._v(" "),s("td",[e._v("^")]),e._v(" "),s("td",[e._v("6")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Bitwise inclusive OR")]),e._v(" "),s("td"),e._v(" "),s("td"),e._v(" "),s("td",[e._v("5")])]),e._v(" "),s("tr",[s("td",[e._v("Logical AND")]),e._v(" "),s("td",[e._v("&&")]),e._v(" "),s("td",[e._v("4")]),e._v(" "),s("td",[e._v("Left to right")])]),e._v(" "),s("tr",[s("td",[e._v("Logical OR")]),e._v(" "),s("td"),e._v(" "),s("td"),e._v(" "),s("td")]),e._v(" "),s("tr",[s("td",[e._v("Conditional"),s("sup",[e._v("1")])]),e._v(" "),s("td",[e._v("? :")]),e._v(" "),s("td",[e._v("2")]),e._v(" "),s("td",[e._v("Right to left")])]),e._v(" "),s("tr",[s("td",[e._v("Assignment"),s("br"),e._v("Lambda"),s("sup",[e._v("1")])]),e._v(" "),s("td",[e._v("= *= /= %= += -= <<= >>= >>>= &= ^=")]),e._v(" "),s("td",[e._v("="),s("br"),e._v("->")]),e._v(" "),s("td",[e._v("1")])])])]),e._v(" "),s("p",[s("sup",[e._v("1")]),e._v(" Lambda expression precedence is complex, as it can also occur after a cast, or as the third part of the conditional ternary operator.")]),e._v(" "),s("h2",{attrs:{id:"expression-evaluation-order"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expression-evaluation-order"}},[e._v("#")]),e._v(" Expression evaluation order")]),e._v(" "),s("p",[e._v("Java expressions are evaluated following the following rules:")]),e._v(" "),s("ul",[s("li",[e._v("Operands are evaluated from left to right.")]),e._v(" "),s("li",[e._v("The operands of an operator are evaluated before the operator.")]),e._v(" "),s("li",[e._v("Operators are evaluated according to operator precedence")]),e._v(" "),s("li",[e._v("Argument lists are evaluated from left to right.")])]),e._v(" "),s("h3",{attrs:{id:"simple-example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#simple-example"}},[e._v("#")]),e._v(" Simple Example")]),e._v(" "),s("p",[e._v("In the following example:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("int")]),e._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("method1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("method2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),s("p",[e._v("the order of evaluation is:")]),e._v(" "),s("ol",[s("li",[e._v("The left operand of "),s("code",[e._v("=")]),e._v(" operator is evaluated to the address of "),s("code",[e._v("i")]),e._v(".")]),e._v(" "),s("li",[e._v("The left operand of the "),s("code",[e._v("+")]),e._v(" operator ("),s("code",[e._v("method1()")]),e._v(") is evaluated.")]),e._v(" "),s("li",[e._v("The right operand of the "),s("code",[e._v("+")]),e._v(" operator ("),s("code",[e._v("method2()")]),e._v(") is evaluated.")]),e._v(" "),s("li",[e._v("The "),s("code",[e._v("+")]),e._v(" operation is evaluated.")]),e._v(" "),s("li",[e._v("The "),s("code",[e._v("=")]),e._v(" operation is evaluated, assigning the result of the addition to "),s("code",[e._v("i")]),e._v(".")])]),e._v(" "),s("p",[e._v("Note that if the effects of the calls are observable, you will be able to observe that the call to "),s("code",[e._v("method1")]),e._v(" occurs before the call to "),s("code",[e._v("method2")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"example-with-an-operator-which-has-a-side-effect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-with-an-operator-which-has-a-side-effect"}},[e._v("#")]),e._v(" Example with an operator which has a side-effect")]),e._v(" "),s("p",[e._v("In the following example:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("int")]),e._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nintArray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("++")]),e._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n")])])]),s("p",[e._v("the order of evaluation is:")]),e._v(" "),s("ol",[s("li",[e._v("The left operand of "),s("code",[e._v("=")]),e._v(" operator is evaluated.  This gives the address of "),s("code",[e._v("intArray[1]")]),e._v(".")]),e._v(" "),s("li",[e._v("The pre-increment is evaluated.  This adds "),s("code",[e._v("1")]),e._v(" to "),s("code",[e._v("i")]),e._v(", and evaluates to "),s("code",[e._v("2")]),e._v(".")]),e._v(" "),s("li",[e._v("The right hand operand of the "),s("code",[e._v("+")]),e._v(" is evaluated.")]),e._v(" "),s("li",[e._v("The "),s("code",[e._v("+")]),e._v(" operation is evaluated to: "),s("code",[e._v("2 + 1")]),e._v(" -> "),s("code",[e._v("3")]),e._v(".")]),e._v(" "),s("li",[e._v("The "),s("code",[e._v("=")]),e._v(" operation is evaluated, assigning "),s("code",[e._v("3")]),e._v(" to "),s("code",[e._v("intArray[1]")]),e._v(".")])]),e._v(" "),s("p",[e._v("Note that since the left-hand operand of the "),s("code",[e._v("=")]),e._v(" is evaluated first, it is not influenced by the side-effect of the "),s("code",[e._v("++i")]),e._v(" subexpression.")]),e._v(" "),s("p",[e._v("Reference:")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.7",target:"_blank",rel:"noopener noreferrer"}},[e._v("JLS 15.7 - Evaluation Order"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"expression-basics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expression-basics"}},[e._v("#")]),e._v(" Expression Basics")]),e._v(" "),s("p",[e._v("Expressions in Java are the primary construct for doing calculations.  Here are some examples:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// A simple literal is an expression")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("             "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// A simple expression that adds two numbers")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v(" k       "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// An expression with multiple operations")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" d    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('// An expression using the "conditional" operator')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" s        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// A type-cast is an expression")]),e._v("\nobj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// A method call is an expression")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Creation of an object is an expression")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("         "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Creation of an object is an expression")]),e._v("\n\n")])])]),s("p",[e._v("In general, an expression consists of the following forms:")]),e._v(" "),s("li",[e._v("Expression names which consist of:\n"),s("ul",[e._v("\n- Simple identifiers; e.g. `someIdentifier`\n- Qualified identifiers; e.g. `MyClass.someField`\n"),s("ul",[s("li",[e._v("Literals; e.g. "),s("code",[e._v("1")]),e._v(", "),s("code",[e._v("1.0")]),e._v(", "),s("code",[e._v("'X'")]),e._v(", "),s("code",[e._v('"hello"')]),e._v(", "),s("code",[e._v("false")]),e._v(" and "),s("code",[e._v("null")])]),e._v(" "),s("li",[e._v("Class literal expressions; e.g. "),s("code",[e._v("MyClass.class")])]),e._v(" "),s("li",[s("code",[e._v("this")]),e._v(" and "),s("code",[e._v("<TypeName> . this")])]),e._v(" "),s("li",[e._v("Parenthesized expressions; e.g. "),s("code",[e._v("( a + b )")])]),e._v(" "),s("li",[e._v("Class instance creation expressions; e.g. "),s("code",[e._v("new MyClass(1, 2, 3)")])]),e._v(" "),s("li",[e._v("Array instance creation expressions; e.g. "),s("code",[e._v("new int[3]")])]),e._v(" "),s("li",[e._v("Field access expressions; e.g. "),s("code",[e._v("obj.someField")]),e._v(" or "),s("code",[e._v("this.someField")])]),e._v(" "),s("li",[e._v("Array access expressions; e.g. "),s("code",[e._v("vector[21]")])]),e._v(" "),s("li",[e._v("Method invocations; e.g. "),s("code",[e._v("obj.doIt(1, 2, 3)")])]),e._v(" "),s("li",[e._v("Method references (Java 8 and later); e.g. "),s("code",[e._v("MyClass::doIt")])])]),e._v(" "),s("p",[e._v("The details of the different forms of expressions may be found in other Topics.")]),e._v(" "),s("ul",[s("li",[e._v("The "),s("a",{attrs:{href:"http://stackoverflow.com/documentation/java/176/operators",target:"_blank",rel:"noopener noreferrer"}},[e._v("Operators"),s("OutboundLink")],1),e._v(" topic covers unary, binary and ternary operator expressions.")]),e._v(" "),s("li",[e._v("The "),s("a",{attrs:{href:"http://stackoverflow.com/documentation/java/91/lambda-expressions#t=20161216024035664514",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lambda expressions"),s("OutboundLink")],1),e._v(" topic covers lambda expressions and method reference expressions.")]),e._v(" "),s("li",[e._v("The "),s("a",{attrs:{href:"http://stackoverflow.com/documentation/java/114/classes-and-objects#t=201612160817408962117",target:"_blank",rel:"noopener noreferrer"}},[e._v("Classes and Objects"),s("OutboundLink")],1),e._v(" topic covers class instance creation expressions.")]),e._v(" "),s("li",[e._v("The "),s("a",{attrs:{href:"http://stackoverflow.com/documentation/java/99/arrays#t=201612160241346240996",target:"_blank",rel:"noopener noreferrer"}},[e._v("Arrays"),s("OutboundLink")],1),e._v(" topic covers array access expressions and array instance creation expressions.")]),e._v(" "),s("li",[e._v("The "),s("a",{attrs:{href:"http://stackoverflow.com/documentation/java/8250/literals#t=201612190020004937953",target:"_blank",rel:"noopener noreferrer"}},[e._v("Literals"),s("OutboundLink")],1),e._v(" topic covers the different kinds of literals expressions.")])]),e._v(" "),s("h3",{attrs:{id:"the-type-of-an-expression"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-type-of-an-expression"}},[e._v("#")]),e._v(" The Type of an Expression")]),e._v(" "),s("p",[e._v("In most cases, an expression has a static type that can be determined at compile time by examining and its subexpressions.  These are referred to as "),s("strong",[e._v("stand-alone")]),e._v(" expressions.")]),e._v(" "),s("p",[e._v("However, (in Java 8 and later) the following kinds of expressions may be "),s("strong",[e._v("poly expressions")]),e._v(":")]),e._v(" "),s("ul",[s("li",[e._v("Parenthesized expressions")]),e._v(" "),s("li",[e._v("Class instance creation expressions")]),e._v(" "),s("li",[e._v("Method invocation expressions")]),e._v(" "),s("li",[e._v("Method reference expressions")]),e._v(" "),s("li",[e._v("Conditional expressions")]),e._v(" "),s("li",[e._v("Lambda expressions")])]),e._v(" "),s("p",[e._v("When an expression is a poly expression, its type may be influenced by the expression's "),s("strong",[e._v("target type")]),e._v("; i.e. what it is being used for.")]),e._v(" "),s("h3",{attrs:{id:"the-value-of-an-expression"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-value-of-an-expression"}},[e._v("#")]),e._v(" The value of an Expression")]),e._v(" "),s("p",[e._v("The value of an expression is assignment compatible with its type.  The exception to this is when "),s("strong",[e._v("heap pollution")]),e._v(' has occurred; e.g. because "unsafe conversion" warnings have been (inappropriately) suppressed or ignored.')]),e._v(" "),s("h3",{attrs:{id:"expression-statements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expression-statements"}},[e._v("#")]),e._v(" Expression Statements")]),e._v(" "),s("p",[e._v("Unlike many other languages, Java does not generally allow expressions to be used as statements.  For example:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("compute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("int")]),e._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("int")]),e._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    i "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ERROR")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),s("p",[e._v("Since the result of evaluating an expression like cannot be use, and since it cannot affect the execution of the program in any other way, the Java designers took the position that such usage is either a mistake, or misguided.")]),e._v(" "),s("p",[e._v("However, this does not apply to all expressions.  A subset of expressions are (in fact) legal as statements.  The set comprises:")]),e._v(" "),s("ul",[s("li",[e._v("Assignment expression, including "),s("strong",[e._v("operation-and-becomes")]),e._v(" assignments.")]),e._v(" "),s("li",[e._v("Pre and post increment and decrement expressions.")]),e._v(" "),s("li",[e._v("Method calls ("),s("code",[e._v("void")]),e._v(" or non-"),s("code",[e._v("void")]),e._v(").")]),e._v(" "),s("li",[e._v("Class instance creation expressions.")])]),e._v(" "),s("h2",{attrs:{id:"constant-expressions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#constant-expressions"}},[e._v("#")]),e._v(" Constant Expressions")]),e._v(" "),s("p",[e._v("A constant expression is an expression that yields a primitive type or a String, and whose value can be evaluated at compile time to a literal.  The expression must evaluate without throwing an exception, and it must be composed of only the following:")]),e._v(" "),s("li",[e._v("\nPrimitive and String literals.\n")]),e._v(" "),s("li",[e._v("\nType casts to primitive types or `String`.\n")]),e._v(" "),s("li",[e._v("\nThe following unary operators: `+`, `-`, `~` and `!`.\n")]),e._v(" "),s("li",[e._v("\nThe following binary operators: `*`, `/`, `%`, `+`, `-`, `<<`, `>>`, `>>>`, `<`, `<=`, `>`, `>=`, `==`, `!=`, `&`, `^`, `|`, `&&` and `||`.\n")]),e._v(" "),s("li",[e._v("\nThe ternary conditional operator `?` `:`.\n")]),e._v(" "),s("li",[e._v("\nParenthesized constant expressions.\n")]),e._v(" "),s("li",[e._v("\nSimple names that refer to constant variables. (A constant variable is a variable declared as `final` where the initializer expression is itself a constant expression.)\n")]),e._v(" "),s("li",[e._v("\nQualified names of the form `"),s("TypeName",[e._v(" . "),s("Identifier",[e._v("` that refer to constant variables.\n")])],1)],1),e._v(" "),s("p",[e._v("Note that the above list "),s("strong",[e._v("excludes")]),e._v(" "),s("code",[e._v("++")]),e._v(" and "),s("code",[e._v("--")]),e._v(", the assignment operators, "),s("code",[e._v("class")]),e._v(" and "),s("code",[e._v("instanceof")]),e._v(", method calls and references to general variables or fields.")]),e._v(" "),s("p",[e._v("Constant expressions of type "),s("code",[e._v("String")]),e._v(' result in an "interned" '),s("code",[e._v("String")]),e._v(", and floating point operations in constant expressions are evaluated with FP-strict semantics.")]),e._v(" "),s("h3",{attrs:{id:"uses-for-constant-expressions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uses-for-constant-expressions"}},[e._v("#")]),e._v(" Uses for Constant Expressions")]),e._v(" "),s("p",[e._v("Constant expressions can be used (just about) anywhere that a normal expression can be used. However, they have a special significance in the following contexts.")]),e._v(" "),s("p",[e._v("Constant expressions are required for case labels in switch statements. For example:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("switch")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("someValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("case")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("            "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// OK")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("case")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Math")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("min")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Error - not a constant expression")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("doSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),s("p",[e._v("When the expression on the right hand side of an assignment is a constant expression, then the assignment can perform a primitive narrowing conversion. This is allowed provided that the value of the constant expression is within the range of the type on the left hand side. (See "),s("a",{attrs:{href:"https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.1.3",target:"_blank",rel:"noopener noreferrer"}},[e._v("JLS 5.1.3"),s("OutboundLink")],1),e._v(" and "),s("a",{attrs:{href:"https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.2",target:"_blank",rel:"noopener noreferrer"}},[e._v("5.2"),s("OutboundLink")],1),e._v(") For example:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("byte")]),e._v(" b1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("             "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// OK - primitive narrowing conversion.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("byte")]),e._v(" b2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Error - out of range")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("byte")]),e._v(" b3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" b1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("            "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Error - not a constant expession")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("byte")]),e._v(" b4 "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("byte")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("b1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// OK")]),e._v("\n\n")])])]),s("p",[e._v("When a constant expression is used as the condition in a "),s("code",[e._v("do")]),e._v(", "),s("code",[e._v("while")]),e._v(" or "),s("code",[e._v("for")]),e._v(", then it affects the readability analysis. For example:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("while")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("doSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Error - statenent not reachable")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("boolean")]),e._v(" flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("while")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("doSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// OK")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),s("p",[e._v("(Note that this does not apply "),s("code",[e._v("if")]),e._v(" statements.  The Java compiler allows the "),s("code",[e._v("then")]),e._v(" or "),s("code",[e._v("else")]),e._v(" block of an "),s("code",[e._v("if")]),e._v(" statement to be unreachable.  This is the Java analog of conditional compilation in C and C++.)")]),e._v(" "),s("p",[e._v("Finally, "),s("code",[e._v("static final")]),e._v(" fields in an class or interface with constant expression initializers are initialized eagerly.  Thus, it is guaranteed that these constants will be observed in the initialized state, even when there is a cycle in the class initialization dependency graph.")]),e._v(" "),s("p",[e._v("For more information, refer to "),s("a",{attrs:{href:"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.27.3",target:"_blank",rel:"noopener noreferrer"}},[e._v("JLS 15.28. Constant Expressions"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h4",{attrs:{id:"remarks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[e._v("#")]),e._v(" Remarks")]),e._v(" "),s("p",[e._v("For a reference on the operators that can be used in expressions, see "),s("a",{attrs:{href:"http://stackoverflow.com/documentation/java/176/operators",target:"_blank",rel:"noopener noreferrer"}},[e._v("Operators"),s("OutboundLink")],1),e._v(".")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);