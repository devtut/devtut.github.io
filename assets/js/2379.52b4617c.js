(window.webpackJsonp=window.webpackJsonp||[]).push([[2379],{2787:function(t,a,s){"use strict";s.r(a);var r=s(31),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"compile-perl-cpan-module-sapnwrfc-from-source-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compile-perl-cpan-module-sapnwrfc-from-source-code"}},[t._v("#")]),t._v(" Compile Perl cpan module sapnwrfc from source code")]),t._v(" "),s("p",[t._v("I'd like to describe the prerequisites and the steps how to build the Perl CPAN module sapnwrfc with the Strawberry Perl environment under Windows 7 x64. It should work also for all later Windows versions like 8, 8.1 and 10.")]),t._v(" "),s("p",[t._v("I use Strawberry Perl 5.24.1.1 64 bit but it should also work with older versions.")]),t._v(" "),s("p",[t._v("It took me some hourse to succeed with several tries (32 vs. 64 bit installation of Perl, SAP NW RFC SDK, MinGW vs. Microsoft C compiler). So I hope some will benefit from my findings.")]),t._v(" "),s("h2",{attrs:{id:"simple-example-to-test-the-rfc-connection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#simple-example-to-test-the-rfc-connection"}},[t._v("#")]),t._v(" Simple example to test the RFC connection")]),t._v(" "),s("p",[t._v("Simple example from "),s("a",{attrs:{href:"http://search.cpan.org/dist/sapnwrfc/sapnwrfc-cookbook.pod",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://search.cpan.org/dist/sapnwrfc/sapnwrfc-cookbook.pod"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-perl extra-class"},[s("pre",{pre:!0,attrs:{class:"language-perl"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" strict"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" warnings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" utf8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" sapnwrfc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nSAPNW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Rfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("load_config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sap.yml'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("my")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$conn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SAPNW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("Rfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("rfc_connect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("my")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$rd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$conn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("function_lookup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RPY_PROGRAM_READ"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("my")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$rc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$rd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("create_function_call"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$rc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("PROGRAM_NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SAPLGRFC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("eval")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$rc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("die")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RFC Error: $@\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Program name: "')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$rc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("PROG_INF"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PROGNAME'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("my")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$cnt_lines_with_text")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" scalar grep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/LGRFCUXX/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("LINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$rc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("SOURCE_EXTENDED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$conn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("disconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h4",{attrs:{id:"remarks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[t._v("#")]),t._v(" Remarks")]),t._v(" "),s("p",[t._v("Install a current Strawberry Perl 64 bit package from "),s("a",{attrs:{href:"http://strawberryperl.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://strawberryperl.com"),s("OutboundLink")],1),t._v(". In my case it was 5.24.1.1.")]),t._v(" "),s("p",[t._v("Download the current version of the SAP NW RFC SDK x64 bit from "),s("a",{attrs:{href:"https://launchpad.support.sap.com/#/softwarecenter",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://launchpad.support.sap.com/#/softwarecenter"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("You can find it with the following trace:\n"),s("strong",[t._v("Support Packages and Patches => By Category => Additional Components => SAP NW RFC SDK => SAP NW RFC SDK 7.20")])]),t._v(" "),s("p",[t._v("In my case the current version was 7.20 PL42 x64.")]),t._v(" "),s("p",[t._v("Extract the downloaded file with\n"),s("code",[t._v("sapcar -xvf NWRFC_42-20004568.SAR")])]),t._v(" "),s("p",[t._v("I renamed the folder to "),s("code",[t._v("C:\\nwrfcsdk_x64")])]),t._v(" "),s("p",[t._v("Create .def and .a files for the MinGW compiler / linker with the following commands in the directory C:\\nwrfcsdk_x64:")]),t._v(" "),s("div",{staticClass:"language-perl extra-class"},[s("pre",{pre:!0,attrs:{class:"language-perl"}},[s("code",[t._v("gendef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll\ndlltool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("dllname icuin34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("def icuin34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib icuin34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a\ndlltool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("dllname icudt34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("def icudt34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib icudt34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a\ndlltool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("dllname icuuc34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("def icuuc34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib icuuc34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a\ndlltool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("dllname libsapucum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("def libsapucum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib libsapucum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a\ndlltool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("dllname libicudecnumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("def libicudecnumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib libicudecnumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a\ndlltool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("dllname sapnwrfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("def sapnwrfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib sapnwrfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a\n\n")])])]),s("p",[t._v("In the dircectory C:\\nwrfcsdk_x64\\lib the following files should exist:")]),t._v(" "),s("div",{staticClass:"language-perl extra-class"},[s("pre",{pre:!0,attrs:{class:"language-perl"}},[s("code",[t._v("icudt34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a          \nicudt34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def        \nicudt34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll        \nicuin34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a          \nicuin34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def        \nicuin34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll        \nicuuc34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a          \nicuuc34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def        \nicuuc34"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll        \nlibicudecnumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a  \nlibicudecnumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def\nlibicudecnumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll\nlibsapucum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a       \nlibsapucum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def     \nlibsapucum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll     \nlibsapucum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("lib     \nsapdecfICUlib"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("lib  \nsapnwrfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("a         \nsapnwrfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("def       \nsapnwrfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("dll       \nsapnwrfc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("lib       \n\n")])])]),s("p",[t._v("Start command prompt with "),s("code",[t._v("cmd.exe")]),t._v(" and start the program "),s("code",[t._v("cpan")]),t._v(".")]),t._v(" "),s("p",[t._v("Start the command "),s("code",[t._v("get sapnwrfc")]),t._v(" to download the Perl module sapnwrfc from CPAN.")]),t._v(" "),s("p",[t._v("Leave the cpan environment with the "),s("code",[t._v("exit")]),t._v(" command.\nChange directory to "),s("code",[t._v("C:\\Strawberry\\cpan\\build\\sapnwrfc-0.37-0")]),t._v(".")]),t._v(" "),s("p",[t._v("Build the Makefile(s) with the following command. Adapt the folder names according to your setup.")]),t._v(" "),s("div",{staticClass:"language-perl extra-class"},[s("pre",{pre:!0,attrs:{class:"language-perl"}},[s("code",[t._v("perl Makefile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("PL "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("C"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("nwrfcsdk_x64 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("addlibs "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\nwrfcsdk_x64\\lib\\sapnwrfc.a C:\\nwrfcsdk_x64\\lib\\libsapucum.a"')]),t._v("\n\n")])])]),s("p",[t._v("Run the commands "),s("code",[t._v("dmake")]),t._v(" and "),s("code",[t._v("dmake install")]),t._v(" to build and install the module.")]),t._v(" "),s("p",[t._v("Copy the files from "),s("code",[t._v("C:\\nwrfcsdk_x64\\lib")]),t._v(" to "),s("code",[t._v("C:\\Strawberry\\perl\\site\\lib\\auto\\SAPNW\\Connection")]),t._v(".")])])}),[],!1,null,null,null);a.default=e.exports}}]);