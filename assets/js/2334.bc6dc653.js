(window.webpackJsonp=window.webpackJsonp||[]).push([[2334],{2680:function(s,t,a){"use strict";a.r(t);var e=a(19),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"cursors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cursors"}},[s._v("#")]),s._v(" Cursors")]),s._v(" "),a("h2",{attrs:{id:"parameterized-for-loop-cursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameterized-for-loop-cursor"}},[s._v("#")]),s._v(' Parameterized "FOR loop" Cursor')]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" c_emp_to_be_raised"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("p_sal emp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TYPE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" emp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("  sal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" p_sal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" cRowEmp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" c_emp_to_be_raised"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),s._v("\n    dbms_Output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Put_Line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cRowEmp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eName "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("cRowEmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'... should be raised ;)'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"implicit-for-loop-cursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implicit-for-loop-cursor"}},[s._v("#")]),s._v(' Implicit "FOR loop" cursor')]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" emp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" sal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),s._v("\n    dbms_Output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Put_Line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eName "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'... should REALLY be raised :D'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n")])])]),a("ul",[a("li",[s._v('First advantage is there is no tedious declaration to do (think of this horrible "CURSOR" thing you had in previous versions)')]),s._v(" "),a("li",[s._v("second advantage is you first build your select query, then when you have what you want, you immediately can access the fields of your query ("),a("code",[s._v("x.<myfield>")]),s._v(") in your PL/SQL loop")]),s._v(" "),a("li",[s._v("The loop opens the cursor and fetches one record at a time for every loop. At the end of the loop the cursor is closed.")]),s._v(" "),a("li",[s._v("Implicit cursors are faster because the interpreter's work grows as the code gets longer. The less code the less work the interpreter has to do.")])]),s._v(" "),a("h2",{attrs:{id:"handling-a-cursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-a-cursor"}},[s._v("#")]),s._v(" Handling a CURSOR")]),s._v(" "),a("ul",[a("li",[s._v("Declare the cursor to scan a list of records")]),s._v(" "),a("li",[s._v("Open it")]),s._v(" "),a("li",[s._v("Fetch current record into variables (this increments position)")]),s._v(" "),a("li",[s._v("Use "),a("code",[s._v("%notfound")]),s._v(" to detect end of list")]),s._v(" "),a("li",[s._v("Don't forget to close the cursor to limit resources consumption in current context")])]),s._v(" "),a("p",[s._v("--")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" curCols "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- select column name and type from a given table")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" column_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data_type "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" all_tab_columns "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" table_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MY_TABLE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  v_tab_column all_tab_columns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TYPE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  v_data_type all_tab_columns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data_type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TYPE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  v_ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTEGER")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" curCols"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" curCols "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" v_tab_column"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" v_data_type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" curCols"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("notfound "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" v_ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXIT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     dbms_output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put_line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v_"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("':Column '")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("v_tab_column"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' is of '")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" v_data_type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' Type.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     v_:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" v_ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- Close in any case")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" curCols"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("ISOPEN "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("  \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" curCols"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"working-with-sys-refcursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#working-with-sys-refcursor"}},[s._v("#")]),s._v(" Working with SYS_REFCURSOR")]),s._v(" "),a("p",[a("code",[s._v("SYS_REFCURSOR")]),s._v(" can be used as a return type when you need to easily handle a list returned not from a table, but more specifically from a function:")]),s._v(" "),a("h3",{attrs:{id:"function-returning-a-cursor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-returning-a-cursor"}},[s._v("#")]),s._v(" function returning a cursor")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FUNCTION")]),s._v(" list_of "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("required_type_in "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" VARCHAR2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RETURN")]),s._v(" SYS_REFCURSOR\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v("\n   v_ SYS_REFCURSOR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),s._v(" required_type_in\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CATS'")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" v_ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" nickname "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minou'")]),s._v(" nickname "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minÃ¢'")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minon'")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual         \n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DOGS'")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" v_ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" dog_call "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bill'")]),s._v("   dog_call "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nestor'")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'raoul'")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual         \n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- Whit this use, you must not close the cursor.")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RETURN")]),s._v(" v_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" list_of"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n")])])]),a("h3",{attrs:{id:"and-how-to-use-it"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#and-how-to-use-it"}},[s._v("#")]),s._v(" and how to use it:")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v("\n   v_names   SYS_REFCURSOR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   v_        VARCHAR2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32767")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n   v_names :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" list_of"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CATS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" v_names "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" v_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" v_names"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("NOTFOUND"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      DBMS_OUTPUT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put_line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- here you close it")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" v_names"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n")])])]),a("h4",{attrs:{id:"syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#syntax"}},[s._v("#")]),s._v(" Syntax")]),s._v(" "),a("ul",[a("li",[s._v("Cursor "),a("strong",[s._v("cursor_name")]),s._v(" Is "),a("strong",[s._v("your_select_statement")])]),s._v(" "),a("li",[s._v("Cursor "),a("strong",[s._v("cursor_name")]),s._v("(param TYPE) Is "),a("strong",[s._v("your_select_statement_using_param")])]),s._v(" "),a("li",[s._v("FOR x in ("),a("strong",[s._v("your_select_statement")]),s._v(") LOOP ...")])]),s._v(" "),a("h4",{attrs:{id:"remarks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[s._v("#")]),s._v(" Remarks")]),s._v(" "),a("p",[a("strong",[s._v("Declared Cursors")]),s._v(" are difficult to use, and you should prefer "),a("code",[s._v("FOR")]),s._v(" loops in most cases. What's very interesting in cursors compared to simple "),a("code",[s._v("FOR")]),s._v(" loops, is that you can parameterize them.")]),s._v(" "),a("p",[s._v("It's better to avoid doing loops with PL/SQL and cursors instead of using Oracle SQL anyway. However, For people accustomed to procedural language, it can be far easier to understand.")]),s._v(" "),a("p",[s._v("If you want to check if a record exists, and then do different things depending on whether the record exists or not, then it makes sense to "),a("a",{attrs:{href:"http://stackoverflow.com/documentation/oracle/4193/different-ways-to-update-records/14689/update-using-merge#t=20160803063310475484",target:"_blank",rel:"noopener noreferrer"}},[s._v("use "),a("code",[s._v("MERGE")]),s._v(" statements"),a("OutboundLink")],1),s._v(" in pure ORACLE SQL queries instead of using cursor loops.\n(Please note that "),a("code",[s._v("MERGE")]),s._v(" is only available in Oracle releases >= 9i).")])])}),[],!1,null,null,null);t.default=r.exports}}]);