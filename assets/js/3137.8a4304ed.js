(window.webpackJsonp=window.webpackJsonp||[]).push([[3137],{3481:function(e,s,a){"use strict";a.r(s);var t=a(19),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"asset-pipeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#asset-pipeline"}},[e._v("#")]),e._v(" Asset Pipeline")]),e._v(" "),a("p",[e._v("The asset pipeline provides a framework to concatenate and minify or compress JavaScript and CSS assets. It also adds the ability to write these assets in other languages and pre-processors such as CoffeeScript, Sass and ERB. It allows assets in your application to be automatically combined with assets from other gems. For example, jquery-rails includes a copy of jquery.js and enables AJAX features in Rails.")]),e._v(" "),a("h2",{attrs:{id:"manifest-files-and-directives"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manifest-files-and-directives"}},[e._v("#")]),e._v(" Manifest Files and Directives")]),e._v(" "),a("p",[e._v("In the "),a("code",[e._v("assets")]),e._v(" initalizer ("),a("code",[e._v("config/initializers/assets.rb")]),e._v(") are a few files explicitly defined to be precompiled.")]),e._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Precompile additional assets.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# application.coffee, application.scss, and all non-JS/CSS in app/assets folder are already added.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Rails.application.config.assets.precompile += %w( search.js )")]),e._v("\n\n")])])]),a("p",[e._v("In this example the "),a("code",[e._v("application.coffee")]),e._v(" and "),a("code",[e._v("application.scss")]),e._v(" are so called 'Manifest Files'. This files should be used to include other JavaScript or CSS assets. The following command are available:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("require <path>")]),e._v(": The "),a("code",[e._v("require")]),e._v(" directive functions similar to Ruby's own "),a("code",[e._v("require")]),e._v(". It provides a way to declare a dependency on a file in your path and ensures it's only loaded once before the source file.")]),e._v(" "),a("li",[a("code",[e._v("require_directory <path>")]),e._v(": requires all the files inside a single directory. It's similar to "),a("code",[e._v("path/*")]),e._v(" since it does not follow nested directories.")]),e._v(" "),a("li",[a("code",[e._v("require_tree <path>")]),e._v(": requires all the nested files in a directory. Its glob equivalent is "),a("code",[e._v("path/**/*")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("require_self")]),e._v(": causes the body of the current file to be inserted before any subsequent "),a("code",[e._v("require")]),e._v(" directives. Useful in CSS files, where it's common for the index file to contain global styles that need to be defined before other dependencies are loaded.")]),e._v(" "),a("li",[a("code",[e._v("stub <path>")]),e._v(": remove a file from being included\n")]),a("li",[a("code",[e._v("depend_on <path>")]),e._v(": Allows you to state a dependency on a file without including it.\nThis is used for caching purposes. Any changes made to the dependency file will invalidate the cache of the source file.")])]),e._v(" "),a("p",[e._v("An "),a("code",[e._v("application.scss")]),e._v(" file could look like:")]),e._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("require")]),e._v(" bootstrap\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" require_directory "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" require_self\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("\n\n")])])]),a("p",[e._v("Another example is the "),a("code",[e._v("application.coffee")]),e._v(" file. Here with including "),a("code",[e._v("jquery")]),e._v(" and "),a("code",[e._v("Turbolinks")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#= require jquery2")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#= require jquery_ujs")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#= require turbolinks")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#= require_tree .")]),e._v("\n\n")])])]),a("p",[e._v("If you don't use CoffeeScript, but plain JavaScript, the syntax would be:")]),e._v(" "),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("require")]),e._v(" jquery2\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("require")]),e._v(" jquery_ujs\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("require")]),e._v(" turbolinks\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" require_tree "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("\n\n")])])]),a("h2",{attrs:{id:"rake-tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rake-tasks"}},[e._v("#")]),e._v(" Rake tasks")]),e._v(" "),a("p",[e._v("By default "),a("code",[e._v("sprockets-rails")]),e._v(" is shipped with the following rake tasks:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("assets:clean[keep]")]),e._v(": Remove old compiled assets")]),e._v(" "),a("li",[a("code",[e._v("assets:clobber")]),e._v(": Remove compiled assets")]),e._v(" "),a("li",[a("code",[e._v("assets:environment")]),e._v(": Load asset compile environment")]),e._v(" "),a("li",[a("code",[e._v("assets:precompile")]),e._v(": Compile all the assets named in "),a("code",[e._v("config.assets.precompile")])])]),e._v(" "),a("h2",{attrs:{id:"basic-usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basic-usage"}},[e._v("#")]),e._v(" Basic Usage")]),e._v(" "),a("p",[e._v("There are two basic ways that the asset pipeline is used:")]),e._v(" "),a("li",[e._v("\nWhen running a server in development mode, it automatically pre-processes and prepares your assets on-the-fly.\n")]),e._v(" "),a("li",[e._v("\nIn production mode, youâ€™ll probably use it to pre-process, versionize, and compress and compile your assets. You can do so by running the following command:\n`bundle exec rake assets:precompile`\n")])])}),[],!1,null,null,null);s.default=r.exports}}]);