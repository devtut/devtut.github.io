(window.webpackJsonp=window.webpackJsonp||[]).push([[1425],{1832:function(t,e,a){"use strict";a.r(e);var s=a(31),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nsuseractivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nsuseractivity"}},[t._v("#")]),t._v(" NSUserActivity")]),t._v(" "),a("p",[t._v("An NSUserActivity object can be used to coordinate significant events in an app with the system. It is the basis for "),a("a",{attrs:{href:"https://developer.apple.com/handoff/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Handoff"),a("OutboundLink")],1),t._v(" between different devices running iOS and macOS. Additionally, it may also be used to improve public-indexing and augment or create Spotlight Search results for an app. As of iOS 10, it may also be used to coordinate interactions between your app and Siri using SiriKit.")]),t._v(" "),a("h2",{attrs:{id:"creating-a-nsuseractivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-nsuseractivity"}},[t._v("#")]),t._v(" Creating a NSUserActivity")]),t._v(" "),a("p",[t._v("To create a "),a("code",[t._v("NSUserActivity")]),t._v(" object, your app must declare the types of activities it supports in its "),a("code",[t._v("Info.plist")]),t._v(' file. Supported activities are defined by your application and should be unique. An activity is defined using a reverse-domain style naming scheme (i.e. "com.companyName.productName.activityName"). Here is what an entry in your Info.plist might look like:')]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Key")]),t._v(" "),a("th",[t._v("Value")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("NSUserActivityTypes")]),t._v(" "),a("td",[t._v("[Array]")])]),t._v(" "),a("tr",[a("td",[t._v("- item0")]),t._v(" "),a("td",[t._v("com.companyName.productName.activityName01")])]),t._v(" "),a("tr",[a("td",[t._v("- item1")]),t._v(" "),a("td",[t._v("com.companyName.productName.activityName02")])])])]),t._v(" "),a("p",[t._v("Once you have defined all supported activity types, you may begin to access and use them in your application's code.")]),t._v(" "),a("p",[t._v("To create a "),a("code",[t._v("NSUserActivity")]),t._v(" object you must do the following")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Initialize the activity object and set its type from one of the ones specified in your app's plist")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSUserActivity")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("currentActivity "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSUserActivity")]),t._v(" alloc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" initWithActivityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("@"),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.companyName.productName.activityName01"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Set the title of the activity.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This title may be displayed to the user, so make sure it is localized and human-readable")]),t._v("\ncurrentActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Current Activity"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Configure additional properties like userInfo which will be included in the activity")]),t._v("\ncurrentActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("@"),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"informationKey"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Configure the activity so the system knows what may be done with it")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// It is important that you only set YES to tasks that your application supports")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// In this example, we will only enable the activity for use with Handoff")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("currentActivity setEligibleForHandoff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("YES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("currentActivity setEligibleForSearch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Defaults to NO")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("currentActivity setEligibleForPublicIndexing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Defaults to NO")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Set this activity as the current user activity")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Only one activity may be current at a time on a device. Calling this method invalidates any other current activities.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("currentActivity becomeCurrent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("p",[t._v('After this, the activity above should be available for Handoff (although more work is required to properly handle the "Handoff").')]),t._v(" "),a("h4",{attrs:{id:"remarks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[t._v("#")]),t._v(" Remarks")]),t._v(" "),a("h3",{attrs:{id:"activity-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activity-types"}},[t._v("#")]),t._v(" Activity Types")]),t._v(" "),a("p",[t._v("Supported activity types must be defined in your app's "),a("code",[t._v("Info.plist")]),t._v(" file under the "),a("code",[t._v("NSUserActivityTypes")]),t._v(' key. Activities are tied to your Developer Team ID, meaning that activity coordination is restricted between apps that have the same Team ID (e.g. "Safari" could not accept a Handoff activity from "Chrome" or vice versa).')]),t._v(" "),a("h3",{attrs:{id:"becoming-resigning-the-current-activity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#becoming-resigning-the-current-activity"}},[t._v("#")]),t._v(" Becoming / Resigning the Current Activity")]),t._v(" "),a("p",[t._v("Marking an activity as current using "),a("code",[t._v("becomeCurrent")]),t._v(" makes it available for Handoff or Spotlight Indexing. Only one activity may be current at a time. You may mark an activity as inactive without invalidating by calling "),a("code",[t._v("resignCurrent")]),t._v(".")]),t._v(" "),a("p",[t._v("If you "),a("code",[t._v("invalidate")]),t._v(" an activity, the same instance may not be made current again.")]),t._v(" "),a("p",[t._v("Do not mark an activity as current when providing it for "),a("a",{attrs:{href:"https://developer.apple.com/sirikit/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SiriKit"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"search-indexing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#search-indexing"}},[t._v("#")]),t._v(" Search Indexing")]),t._v(" "),a("p",[t._v("Activities are "),a("strong",[t._v("not")]),t._v(" to be used as a general-purpose indexing mechanism within your app. Instead, they should only be used in response to user-initiated actions. To index all content in your app, use CoreSpotlight.")])])}),[],!1,null,null,null);e.default=n.exports}}]);