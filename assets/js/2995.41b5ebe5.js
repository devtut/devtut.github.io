(window.webpackJsonp=window.webpackJsonp||[]).push([[2995],{3342:function(e,t,r){"use strict";r.r(t);var o=r(19),a=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"performance"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#performance"}},[e._v("#")]),e._v(" Performance")]),e._v(" "),r("h2",{attrs:{id:"performance-measurement-with-reactjs"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#performance-measurement-with-reactjs"}},[e._v("#")]),e._v(" Performance measurement with ReactJS")]),e._v(" "),r("p",[r("strong",[e._v("You can't improve something you can't measure")]),e._v(". To improve the performance of React components, you should be able to measure it. ReactJS provides with "),r("strong",[e._v("addon")]),e._v(" tools to measure performance. Import the "),r("code",[e._v("react-addons-perf")]),e._v(" module to measure the performance")]),e._v(" "),r("p",[e._v("You can use below methods from the imported "),r("code",[e._v("Perf")]),e._v(" module:")]),e._v(" "),r("ul",[r("li",[e._v("Perf.printInclusive()")]),e._v(" "),r("li",[e._v("Perf.printExclusive()")]),e._v(" "),r("li",[e._v("Perf.printWasted()")]),e._v(" "),r("li",[e._v("Perf.printOperations()")]),e._v(" "),r("li",[e._v("Perf.printDOM()")])]),e._v(" "),r("p",[e._v("The most important one which you will need most of the time is "),r("code",[e._v("Perf.printWasted()")]),e._v(" which gives you the tabular representation of your individual component's wasted time")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://i.stack.imgur.com/rCKLY.png",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://i.stack.imgur.com/rCKLY.png",alt:"enter image description here"}}),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("You can note the "),r("strong",[e._v("Wasted time")]),e._v(" column in the table and improve Component's performance using "),r("strong",[e._v("Tips & Tricks")]),e._v(" section above")]),e._v(" "),r("p",[e._v("Refer the "),r("a",{attrs:{href:"https://facebook.github.io/react/docs/perf.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Official Guide"),r("OutboundLink")],1),e._v(" and excellent article by "),r("a",{attrs:{href:"http://benchling.engineering/deep-dive-react-perf-debugging/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Benchling Engg. on React Performance"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"react-s-diff-algorithm"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react-s-diff-algorithm"}},[e._v("#")]),e._v(" React's diff algorithm")]),e._v(" "),r("p",[e._v("Generating the minimum number of operations to transform one tree into another have a complexity in the order of O(n^3) where n is the number of nodes in the tree.\nReact relies on two assumptions to solve this problem in a linear time - O(n)")]),e._v(" "),r("li",[r("blockquote",[e._v("\nTwo components of the same class will generate similar trees and tw components of different classes will generate different trees.\n")])]),e._v(" "),r("li",[r("blockquote",[e._v("\nIt is possible to provide a unique key for elements that is stable across different renders.\n")])]),e._v(" "),r("blockquote"),e._v(" "),r("p",[e._v("It is possible to provide a unique key for elements that is stable across different renders.")]),e._v(" "),r("p",[e._v("In order to decide if two nodes are different, React differentiates 3 cases")]),e._v(" "),r("ol",[r("li",[e._v("Two nodes are different, if they have different types.")])]),e._v(" "),r("ul",[r("li",[e._v("for example, "),r("code",[e._v("<div>...</div>")]),e._v(" is different from "),r("code",[e._v("<span>...</span>")])])]),e._v(" "),r("ol",[r("li",[e._v("Whenever two nodes have different keys")])]),e._v(" "),r("ul",[r("li",[e._v("for example, "),r("code",[e._v('<div key="1">...</div>')]),e._v(" is different from "),r("code",[e._v('<div key="2">...</div>')])])]),e._v(" "),r("p",[e._v("Moreover, "),r("strong",[e._v("what follows is crucial and extremely important to understand")]),e._v(" if you want to optimise performance")]),e._v(" "),r("blockquote"),e._v(" "),r("p",[e._v("If they [two nodes] are not of the same type, React is not going to\neven try at matching what they render. It is just going to remove the\nfirst one from the DOM and insert the second one.")]),e._v(" "),r("p",[e._v("Here's why")]),e._v(" "),r("blockquote"),e._v(" "),r("p",[e._v("It is very unlikely that a  element is going to generate a DOM\nthat is going to look like what a  would generate. Instead of\nspending time trying to match those two structures, React just\nre-builds the tree from scratch.")]),e._v(" "),r("h2",{attrs:{id:"the-basics-html-dom-vs-virtual-dom"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#the-basics-html-dom-vs-virtual-dom"}},[e._v("#")]),e._v(" The Basics - HTML DOM vs Virtual DOM")]),e._v(" "),r("p",[r("strong",[e._v("HTML DOM is Expensive")])]),e._v(" "),r("p",[e._v("Each web page is represented internally as a tree of objects. This representation is called "),r("strong",[e._v("Document Object Model")]),e._v(". Moreover, it is a language-neutral interface that allows programming languages (such as JavaScript) to access the HTML elements.")]),e._v(" "),r("p",[e._v("In other words")]),e._v(" "),r("blockquote"),e._v(" "),r("p",[e._v("The HTML DOM is a standard for how to get, change, add, or delete HTML\nelements.")]),e._v(" "),r("p",[e._v("However, those "),r("strong",[e._v("DOM operations")]),e._v(" are extremely "),r("strong",[e._v("expensive")]),e._v(".")]),e._v(" "),r("p",[r("strong",[e._v("Virtual DOM is a Solution")])]),e._v(" "),r("p",[e._v("So React's team came up with the idea to abstract the "),r("strong",[e._v("HTML DOM")]),e._v(" and create its own "),r("strong",[e._v("Virtual DOM")]),e._v(" in order to compute the minimum number of operations we need to apply on the "),r("strong",[e._v("HTML DOM")]),e._v(" to replicate current state of our application.")]),e._v(" "),r("p",[r("strong",[e._v("The Virtual DOM saves time from unnecessary DOM modifications.")])]),e._v(" "),r("p",[r("strong",[e._v("How Exactly?")])]),e._v(" "),r("p",[e._v("At each point of time, React has the application state represented as a "),r("code",[e._v("Virtual DOM")]),e._v(". Whenever application state changes, these are the steps that React performs in order to optimise performance")]),e._v(" "),r("li",[e._v("\nGenerate a new **Virtual DOM** that represents the new state of our application\n")]),e._v(" "),r("li",[e._v("\nCompare the old Virtual DOM (which represents the current HTML DOM) vs the new Virtual DOM\n")]),e._v(" "),r("li",[e._v("\nBased on 2. find the minimum number of operations to transform the old Virtual DOM (which represents the current HTML DOM) into the new Virtual DOM\n")]),e._v(" "),r("ul",[r("li",[e._v("to learn more about that - read React's Diff Algorithm")])]),e._v(" "),r("ol",[r("li",[e._v("After those operations are found, they are mapped into their equivalent "),r("strong",[e._v("HTML DOM")]),e._v(" operations")])]),e._v(" "),r("ul",[r("li",[e._v("remember, the "),r("strong",[e._v("Virtual DOM")]),e._v(" is only an abstraction of the "),r("strong",[e._v("HTML DOM")]),e._v(" and there is a isomorphic relation between them")])]),e._v(" "),r("ol",[r("li",[e._v("Now the minimum number of operations that have been found and transferred to their equivalent "),r("strong",[e._v("HTML DOM")]),e._v(" operations are now applied directly onto the application's "),r("strong",[e._v("HTML DOM")]),e._v(", which saves time from modifying the "),r("strong",[e._v("HTML DOM")]),e._v(" unnecessarily.")])]),e._v(" "),r("p",[e._v("Note:\nOperations applied on the Virtual DOM are cheap, because the Virtual DOM is a JavaScript Object.")]),e._v(" "),r("h2",{attrs:{id:"tips-tricks"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tips-tricks"}},[e._v("#")]),e._v(" Tips & Tricks")]),e._v(" "),r("p",[e._v("When two nodes are not of the same type, React doesn't try to match them - it just removes the first node from the DOM and inserts the second one. This is why the first tip says")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("If you see yourself alternating between two components classes with very similar output, you may want to make it the same class.")])]),e._v(" "),r("li",[r("p",[e._v("Use shouldComponentUpdate to prevent component from rerender, if you know it is not going to change, for example")])])]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("shouldComponentUpdate")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("nextProps"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" nextState")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" nextProps"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("id "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!==")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("props"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" \n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);