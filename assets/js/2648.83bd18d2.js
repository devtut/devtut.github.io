(window.webpackJsonp=window.webpackJsonp||[]).push([[2648],{3056:function(t,s,n){"use strict";n.r(s);var a=n(31),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"accessing-python-source-code-and-bytecode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#accessing-python-source-code-and-bytecode"}},[t._v("#")]),t._v(" Accessing Python source code and bytecode")]),t._v(" "),n("h2",{attrs:{id:"display-the-bytecode-of-a-function"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#display-the-bytecode-of-a-function"}},[t._v("#")]),t._v(" Display the bytecode of a function")]),t._v(" "),n("p",[t._v("The Python interpreter compiles code to bytecode before executing it on the Python's virtual machine (see also "),n("a",{attrs:{href:"http://stackoverflow.com/documentation/python/1763/the-dis-module/5729/what-is-python-bytecode#t=201609280954269606205",target:"_blank",rel:"noopener noreferrer"}},[t._v("What is python bytecode?"),n("OutboundLink")],1),t._v(").")]),t._v(" "),n("p",[t._v("Here's how to view the bytecode of a Python function")]),t._v(" "),n("div",{staticClass:"language-py extra-class"},[n("pre",{pre:!0,attrs:{class:"language-py"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" dis\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fib")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Display the disassembled bytecode of the function.")]),t._v("\ndis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),n("p",[t._v("The function "),n("a",{attrs:{href:"https://docs.python.org/2/library/dis.html#dis.dis",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("dis.dis")]),n("OutboundLink")],1),t._v(" in the "),n("a",{attrs:{href:"http://stackoverflow.com/documentation/python/1763/the-dis-module",target:"_blank",rel:"noopener noreferrer"}},[t._v("dis module"),n("OutboundLink")],1),t._v(" will return a decompiled bytecode of the function passed to it.")]),t._v(" "),n("h2",{attrs:{id:"display-the-source-code-of-an-object"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#display-the-source-code-of-an-object"}},[t._v("#")]),t._v(" Display the source code of an object")]),t._v(" "),n("h3",{attrs:{id:"objects-that-are-not-built-in"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#objects-that-are-not-built-in"}},[t._v("#")]),t._v(" Objects that are not built-in")]),t._v(" "),n("p",[t._v("To print the source code of a Python object use "),n("code",[t._v("inspect")]),t._v(". Note that this won't work for built-in objects nor for objects defined interactively. For these you will need other methods explained later.")]),t._v(" "),n("p",[t._v("Here's how to print the source code of the method "),n("code",[t._v("randint")]),t._v(" from the "),n("code",[t._v("random")]),t._v(" module:")]),t._v(" "),n("div",{staticClass:"language-py extra-class"},[n("pre",{pre:!0,attrs:{class:"language-py"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" random\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" inspect\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inspect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getsource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("random"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Output:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    def randint(self, a, b):")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#        """Return random integer in range [a, b], including both end points.')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#        """')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#        return self.randrange(a, b+1)")]),t._v("\n\n")])])]),n("p",[t._v("To just print the documentation string")]),t._v(" "),n("div",{staticClass:"language-py extra-class"},[n("pre",{pre:!0,attrs:{class:"language-py"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inspect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getdoc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("random"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Output:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Return random integer in range [a, b], including both end points.")]),t._v("\n\n")])])]),n("p",[t._v("Print full path of the file where the method "),n("code",[t._v("random.randint")]),t._v(" is defined:")]),t._v(" "),n("div",{staticClass:"language-py extra-class"},[n("pre",{pre:!0,attrs:{class:"language-py"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inspect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getfile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("random"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# c:\\Python35\\lib\\random.py")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("random"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("randint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__code__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("co_filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# equivalent to the above")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# c:\\Python35\\lib\\random.py")]),t._v("\n\n")])])]),n("h3",{attrs:{id:"objects-defined-interactively"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#objects-defined-interactively"}},[t._v("#")]),t._v(" Objects defined interactively")]),t._v(" "),n("p",[t._v("If an object is defined interactively "),n("code",[t._v("inspect")]),t._v(" cannot provide the source code but you can use "),n("code",[t._v("dill.source.getsource")]),t._v(" instead")]),t._v(" "),n("div",{staticClass:"language-py extra-class"},[n("pre",{pre:!0,attrs:{class:"language-py"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# define a new function in the interactive shell")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("add"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__code__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("co_filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Output: <stdin> ")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" dill\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),t._v(" dill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getsource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("add"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# def add(a, b):")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n\n\n")])])]),n("h3",{attrs:{id:"built-in-objects"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#built-in-objects"}},[t._v("#")]),t._v(" Built-in objects")]),t._v(" "),n("p",[t._v("The source code for Python's built-in functions is written in "),n("strong",[t._v("c")]),t._v(" and can only be accessed by looking at the Python's source code (hosted on "),n("a",{attrs:{href:"https://hg.python.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mercurial"),n("OutboundLink")],1),t._v(" or downloadable from "),n("a",{attrs:{href:"https://www.python.org/downloads/source/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.python.org/downloads/source/)"),n("OutboundLink")],1),t._v(").")]),t._v(" "),n("div",{staticClass:"language-py extra-class"},[n("pre",{pre:!0,attrs:{class:"language-py"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inspect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getsource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("sorted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# raises a TypeError")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("sorted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <class 'builtin_function_or_method'>")]),t._v("\n\n")])])]),n("h2",{attrs:{id:"exploring-the-code-object-of-a-function"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#exploring-the-code-object-of-a-function"}},[t._v("#")]),t._v(" Exploring the code object of a function")]),t._v(" "),n("p",[t._v("CPython allows access to the code object for a function object.")]),t._v(" "),n("p",[t._v("The "),n("code",[t._v("__code__")]),t._v("object contains the raw bytecode ("),n("code",[t._v("co_code")]),t._v(") of the function as well as other information such as constants and variable names.")]),t._v(" "),n("div",{staticClass:"language-py extra-class"},[n("pre",{pre:!0,attrs:{class:"language-py"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fib")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("dir")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__code__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fib")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("dir")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__code__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);