(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{571:function(e,t,o){"use strict";o.r(t);var n=o(19),i=Object(n.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"jenkins-ci-setup-for-android-projects"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-ci-setup-for-android-projects"}},[e._v("#")]),e._v(" Jenkins CI setup for Android Projects")]),e._v(" "),o("h2",{attrs:{id:"step-by-step-approach-to-set-up-jenkins-for-android"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#step-by-step-approach-to-set-up-jenkins-for-android"}},[e._v("#")]),e._v(" Step by step approach to set up Jenkins for Android")]),e._v(" "),o("p",[e._v("This is a step by step guide to set up the automated build process using Jenkins CI for your Android projects. The following steps assume that you have new hardware with just any flavor of Linux installed. It is also taken into account that you might have a remote machine.")]),e._v(" "),o("h3",{attrs:{id:"part-i-initial-setup-on-your-machine"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#part-i-initial-setup-on-your-machine"}},[e._v("#")]),e._v(" PART I: Initial setup on your machine")]),e._v(" "),o("li",[e._v("\nLog in via **ssh** to your Ubuntu machine:\n"),o("blockquote",[e._v("\nssh username@xxx.xxx.xxx\n")])]),e._v(" "),o("li",[e._v("\nDownload a version of the Android SDK on your machine:\n"),o("blockquote",[e._v("\nwget [https://dl.google.com/android/android-sdk_r24.4.1-linux.tgz](https://dl.google.com/android/android-sdk_r24.4.1-linux.tgz)\n")])]),e._v(" "),o("li",[e._v("\nUnzip the downloaded **tar** file:\n"),o("blockquote",[o("p",[e._v("sudo apt-get install tar"),o("br"),e._v("\ntar -xvf android-sdk_r24.4.1-linux.tgz")])])]),e._v(" "),o("li",[e._v("\nNow you need to install Java 8 on your Ubuntu machine, which is a requirement for Android builds on Nougat. Jenkins would require you to install JDK and JRE 7 using the steps below:\n"),o("blockquote",[o("p",[e._v("sudo apt-get install python-software-properties"),o("br"),e._v("\nsudo add-apt-repository ppa:webupd8team/java"),o("br"),e._v("\nsudo apt-get update"),o("br"),e._v("\napt-get install openjdk-8-jdk")])])]),e._v(" "),o("li",[e._v("\nNow install Jenkins on your Ubuntu machine:\n"),o("blockquote",[o("p",[e._v("wget -q -O - [https://pkg.jenkins.io/debian/jenkins-ci.org.key](https://pkg.jenkins.io/debian/jenkins-ci.org.key) | sudo apt-key add -"),o("br"),e._v("\nsudo sh -c 'echo deb [http://pkg.jenkins.io/debian-stable](http://pkg.jenkins.io/debian-stable) binary/ > /etc/apt/sources.list.d/jenkins.list'"),o("br"),e._v("\nsudo apt-get update"),o("br"),e._v("\nsudo apt-get install jenkins")])])]),e._v(" "),o("li",[e._v("\nDownload the latest supported Gradle version for your Android setup:\n"),o("blockquote",[o("p",[e._v("wget [https://services.gradle.org/distributions/gradle-2.14.1-all.zip](https://services.gradle.org/distributions/gradle-2.14.1-all.zip)"),o("br"),e._v("\nunzip gradle-2.14.1-all.zip")])])]),e._v(" "),o("li",[e._v("\nSet up Android on your Ubuntu machine. First move to the **tools** folder in the Android SDK folder downloaded in step 2:\n"),o("blockquote",[o("p",[e._v("cd android-sdk-linux/tools **// lists available SDK**"),o("br"),e._v("\nandroid update sdk --no-ui **// Updates SDK version**"),o("br"),e._v('\nandroid list sdk -a | grep "SDK Build-tools" **// lists available build tools**'),o("br"),e._v("\nandroid update sdk -a -u -t 4   **// updates build tools version to one listed as 4 by prev. cmd.**"),o("br"),e._v("\nupdate java")])])]),e._v(" "),o("li",[e._v("\nInstall **Git** or any other VCS on your machine:\n"),o("blockquote",[e._v("\nsudo apt-get install git\n")])]),e._v(" "),o("li",[e._v("\nNow log in to Jenkins using your internet browser. Type **`ipAddress:8080`** into the address bar.\n")]),e._v(" "),o("li",[e._v("\nIn order to receive the password for the first-time login, please check the corresponding file as follows (you will need su permissions to access this file):\n"),o("blockquote",[e._v("\ncat /var/lib/jenkins/secrets/initialAdminPassword\n")])]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("wget "),o("a",{attrs:{href:"https://dl.google.com/android/android-sdk_r24.4.1-linux.tgz",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://dl.google.com/android/android-sdk_r24.4.1-linux.tgz"),o("OutboundLink")],1)]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("sudo apt-get install python-software-properties"),o("br"),e._v("\nsudo add-apt-repository ppa:webupd8team/java"),o("br"),e._v("\nsudo apt-get update"),o("br"),e._v("\napt-get install openjdk-8-jdk")]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("wget [https://services.gradle.org/distributions/gradle-2.14.1-all.zip](https://services.gradle.org/distributions/gradle-2.14.1-all.zip)"),o("br"),e._v("\nunzip gradle-2.14.1-all.zip")]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("sudo apt-get install git")]),e._v(" "),o("h3",{attrs:{id:"part-ii-set-up-jenkins-to-build-android-jobs"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#part-ii-set-up-jenkins-to-build-android-jobs"}},[e._v("#")]),e._v(" PART II: Set up Jenkins to build Android Jobs")]),e._v(" "),o("li",[e._v("\nOnce logged in, go to the following path:\n"),o("blockquote",[e._v("\nJenkins > Manage Jenkins > Global Tool Configuration\n")])]),e._v(" "),o("li",[e._v("\nAt this location, add `JAVA_HOME` with the following entries:\n"),o("blockquote",[o("p",[e._v("Name = JAVA_HOME"),o("br"),e._v("\nJAVA_HOME = /usr/lib/jvm/java-8-openjdk-amd64")])])]),e._v(" "),o("li",[e._v("\nAlso add the following values to **Git** and save the environment variables:\n"),o("blockquote",[o("p",[e._v("Name = Default"),o("br"),e._v("\n/usr/bin/git")])])]),e._v(" "),o("li",[e._v("\nNow go to the following path:\n"),o("blockquote",[e._v("\nJenkins > Manage Jenkins > Configuration\n")])]),e._v(" "),o("li",[e._v('\nAt this location, add `ANDROID_HOME` to the "global properties":\n'),o("blockquote",[o("p",[e._v("Name = ANDROID_HOME"),o("br"),e._v("\nValue = /home/username/android-sdk-linux")])])]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("Name = JAVA_HOME"),o("br"),e._v("\nJAVA_HOME = /usr/lib/jvm/java-8-openjdk-amd64")]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("Jenkins > Manage Jenkins > Configuration")]),e._v(" "),o("h3",{attrs:{id:"part-iii-create-a-jenkins-job-for-your-android-project"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#part-iii-create-a-jenkins-job-for-your-android-project"}},[e._v("#")]),e._v(" Part III: Create a Jenkins Job for your Android project")]),e._v(" "),o("li",[e._v("\nClick on **New Item** in the Jenkins home screen.\n")]),e._v(" "),o("li",[e._v("\nAdd a **Project Name** and **Description**.\n")]),e._v(" "),o("li",[e._v("\nIn the **General** tab, select **Advanced**. Then select **Use custom workspace**:\n"),o("blockquote",[e._v("\nDirectory /home/user/Code/ProjectFolder\n")])]),e._v(" "),o("li",[e._v("\nIn the source code management select **Git**. I am using **Bitbucket** for the purpose of this example:\n"),o("blockquote",[e._v("\nRepository URL = [https://username:password@bitbucket.org/project/projectname.git](https://username:password@bitbucket.org/project/projectname.git)\n")])]),e._v(" "),o("li",[e._v("\nSelect additional behaviors for your repository:\n"),o("blockquote",[o("p",[e._v("Clean Before Checkout"),o("br"),e._v("\nCheckout to a sub-directory. Local subdirectory for repo /home/user/Code/ProjectFolder")])])]),e._v(" "),o("li",[e._v("\nSelect a branch you want to build:\n"),o("blockquote",[e._v("\n*/master\n")])]),e._v(" "),o("li",[e._v("\nIn the **Build** tab, select **Execute Shell** in **Add build step**.\n")]),e._v(" "),o("li",[e._v("\nIn the **Execute shell**, add the following command:\n"),o("blockquote",[e._v("\ncd /home/user/Code/ProjectFolder && gradle clean assemble --no-daemon\n")])]),e._v(" "),o("li",[e._v("\nIf you want to run Lint on the project, then add another build step into the **Execute shell**:\n"),o("blockquote",[e._v("\n/home/user/gradle/gradle-2.14.1/bin/gradle lint\n")])]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("Repository URL = "),o("a",{attrs:{href:"https://username:password@bitbucket.org/project/projectname.git",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://username:password@bitbucket.org/project/projectname.git"),o("OutboundLink")],1)]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("*/master")]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("/home/user/gradle/gradle-2.14.1/bin/gradle lint")]),e._v(" "),o("p",[e._v("Now your system is finally set up to build Android projects using Jenkins. This setup makes your life so much easier for releasing builds to QA and UAT teams.")]),e._v(" "),o("p",[e._v("PS: Since Jenkins is a different user on your Ubuntu machine, you should give it rights to create folders in your workspace by executing the following command:")]),e._v(" "),o("blockquote"),e._v(" "),o("p",[e._v("chown -R jenkins .git")])])}),[],!1,null,null,null);t.default=i.exports}}]);