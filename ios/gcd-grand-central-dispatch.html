<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>iOS - GCD (Grand Central Dispatch)</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Dispatch Semaphore, Dispatch Group, Create a dispatch queue, Getting the Main Queue, Serial vs Concurrent Dispatch Queues">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="iOS - GCD (Grand Central Dispatch)">
    <meta property="og:description" content="Dispatch Semaphore, Dispatch Group, Create a dispatch queue, Getting the Main Queue, Serial vs Concurrent Dispatch Queues">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/ios/gcd-grand-central-dispatch.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="iOS - GCD (Grand Central Dispatch)">
    <meta name="twitter:description" content="Dispatch Semaphore, Dispatch Group, Create a dispatch queue, Getting the Main Queue, Serial vs Concurrent Dispatch Queues">
    <meta name="twitter:url" content="/ios/gcd-grand-central-dispatch.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/1379.54d43c22.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>iOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ios/" class="sidebar-link">Disclaimer</a></li><li><a href="/ios/getting-started-with-ios.html" class="sidebar-link">Getting started with iOS</a></li><li><a href="/ios/uilabel.html" class="sidebar-link">UILabel</a></li><li><a href="/ios/uilabel-text-underlining.html" class="sidebar-link">UILabel text underlining</a></li><li><a href="/ios/attributedtext-in-uilabel.html" class="sidebar-link">attributedText in UILabel</a></li><li><a href="/ios/uibutton.html" class="sidebar-link">UIButton</a></li><li><a href="/ios/uidatepicker.html" class="sidebar-link">UIDatePicker</a></li><li><a href="/ios/uilocalnotification.html" class="sidebar-link">UILocalNotification</a></li><li><a href="/ios/uiimage.html" class="sidebar-link">UIImage</a></li><li><a href="/ios/convert-nsattributedstring-to-uiimage.html" class="sidebar-link">Convert NSAttributedString to UIImage</a></li><li><a href="/ios/uiimagepickercontroller.html" class="sidebar-link">UIImagePickerController</a></li><li><a href="/ios/uiimageview.html" class="sidebar-link">UIImageView</a></li><li><a href="/ios/resizing-uiimage.html" class="sidebar-link">Resizing UIImage</a></li><li><a href="/ios/cut-a-uiimage-into-a-circle.html" class="sidebar-link">Cut a UIImage into a circle</a></li><li><a href="/ios/uitableview.html" class="sidebar-link">UITableView</a></li><li><a href="/ios/uitableviewcontroller.html" class="sidebar-link">UITableViewController</a></li><li><a href="/ios/uirefreshcontrol-tableview.html" class="sidebar-link">UIRefreshControl TableView</a></li><li><a href="/ios/uitableviewcell.html" class="sidebar-link">UITableViewCell</a></li><li><a href="/ios/custom-methods-of-selection-of-uitableviewcells.html" class="sidebar-link">Custom methods of selection of UITableViewCells</a></li><li><a href="/ios/custom-methods-of-selection-of-uitableviewcells.html" class="sidebar-link">Custom methods of selection of UITableViewCells</a></li><li><a href="/ios/uiview.html" class="sidebar-link">UIView</a></li><li><a href="/ios/snapshot-of-uiview.html" class="sidebar-link">Snapshot of UIView</a></li><li><a href="/ios/uialertcontroller.html" class="sidebar-link">UIAlertController</a></li><li><a href="/ios/uicolor.html" class="sidebar-link">UIColor</a></li><li><a href="/ios/uitextview.html" class="sidebar-link">UITextView</a></li><li><a href="/ios/uitextfield-delegate.html" class="sidebar-link">UITextField Delegate</a></li><li><a href="/ios/uinavigationcontroller.html" class="sidebar-link">UINavigationController</a></li><li><a href="/ios/uigesturerecognizer.html" class="sidebar-link">UIGestureRecognizer</a></li><li><a href="/ios/uibarbuttonitem.html" class="sidebar-link">UIBarButtonItem</a></li><li><a href="/ios/uiscrollview.html" class="sidebar-link">UIScrollView</a></li><li><a href="/ios/uistackview.html" class="sidebar-link">UIStackView</a></li><li><a href="/ios/dynamically-updating-a-uistackview.html" class="sidebar-link">Dynamically updating a UIStackView</a></li><li><a href="/ios/uiscrollview-with-stackview-child.html" class="sidebar-link">UIScrollView with StackView child</a></li><li><a href="/ios/uiscrollview-autolayout.html" class="sidebar-link">UIScrollView AutoLayout</a></li><li><a href="/ios/uitextfield.html" class="sidebar-link">UITextField</a></li><li><a href="/ios/custom-uitextfield.html" class="sidebar-link">Custom UITextField</a></li><li><a href="/ios/uiviewcontroller.html" class="sidebar-link">UIViewController</a></li><li><a href="/ios/uiswitch.html" class="sidebar-link">UISwitch</a></li><li><a href="/ios/uicollectionview.html" class="sidebar-link">UICollectionView</a></li><li><a href="/ios/uisearchcontroller.html" class="sidebar-link">UISearchController</a></li><li><a href="/ios/uitabbarcontroller.html" class="sidebar-link">UITabBarController</a></li><li><a href="/ios/uiwebview.html" class="sidebar-link">UIWebView</a></li><li><a href="/ios/uiactivityviewcontroller.html" class="sidebar-link">UIActivityViewController</a></li><li><a href="/ios/uicontrol-event-handling-with-blocks.html" class="sidebar-link">UIControl - Event Handling with Blocks</a></li><li><a href="/ios/uisplitviewcontroller.html" class="sidebar-link">UISplitViewController</a></li><li><a href="/ios/uislider.html" class="sidebar-link">UISlider</a></li><li><a href="/ios/uistoryboard.html" class="sidebar-link">UIStoryboard</a></li><li><a href="/ios/uipageviewcontroller.html" class="sidebar-link">UIPageViewController</a></li><li><a href="/ios/uisplitviewcontroller.html" class="sidebar-link">UISplitViewController</a></li><li><a href="/ios/uifont.html" class="sidebar-link">UIFont</a></li><li><a href="/ios/uidevice.html" class="sidebar-link">UIDevice</a></li><li><a href="/ios/make-selective-uiview-corners-rounded.html" class="sidebar-link">Make selective UIView corners rounded</a></li><li><a href="/ios/custom-uiviews-from-xib-files.html" class="sidebar-link">Custom UIViews from XIB files</a></li><li><a href="/ios/uibezierpath.html" class="sidebar-link">UIBezierPath</a></li><li><a href="/ios/uipickerview.html" class="sidebar-link">UIPickerView</a></li><li><a href="/ios/uifeedbackgenerator.html" class="sidebar-link">UIFeedbackGenerator</a></li><li><a href="/ios/uiappearance.html" class="sidebar-link">UIAppearance</a></li><li><a href="/ios/uikit-dynamics-with-uicollectionview.html" class="sidebar-link">UIKit Dynamics with UICollectionView</a></li><li><a href="/ios/uipheonix-easy-flexible-dynamic-highly-scalable-ui-framework.html" class="sidebar-link">UIPheonix - easy, flexible, dynamic &amp; highly scalable UI framework</a></li><li><a href="/ios/uikit-dynamics.html" class="sidebar-link">UIKit Dynamics</a></li><li><a href="/ios/ui-testing.html" class="sidebar-link">UI Testing</a></li><li><a href="/ios/change-status-bar-color.html" class="sidebar-link">Change Status Bar Color</a></li><li><a href="/ios/uisegmentedcontrol.html" class="sidebar-link">UISegmentedControl</a></li><li><a href="/ios/passing-data-between-view-controllers.html" class="sidebar-link">Passing Data between View Controllers</a></li><li><a href="/ios/managing-the-keyboard.html" class="sidebar-link">Managing the Keyboard</a></li><li><a href="/ios/checking-for-network-connectivity.html" class="sidebar-link">Checking for Network Connectivity</a></li><li><a href="/ios/accessibility.html" class="sidebar-link">Accessibility</a></li><li><a href="/ios/auto-layout.html" class="sidebar-link">Auto Layout</a></li><li><a href="/ios/mkmapview.html" class="sidebar-link">MKMapView</a></li><li><a href="/ios/nsarray.html" class="sidebar-link">NSArray</a></li><li><a href="/ios/nsattributedstring.html" class="sidebar-link">NSAttributedString</a></li><li><a href="/ios/convert-html-to-nsattributed-string-and-vice-verse.html" class="sidebar-link">Convert HTML to NSAttributed string and vice verse</a></li><li><a href="/ios/nstimer.html" class="sidebar-link">NSTimer</a></li><li><a href="/ios/nsdate.html" class="sidebar-link">NSDate</a></li><li><a href="/ios/nsnotificationcenter.html" class="sidebar-link">NSNotificationCenter</a></li><li><a href="/ios/nsurlsession.html" class="sidebar-link">NSURLSession</a></li><li><a href="/ios/nsuserdefaults.html" class="sidebar-link">NSUserDefaults</a></li><li><a href="/ios/nshttpcookiestorage.html" class="sidebar-link">NSHTTPCookieStorage</a></li><li><a href="/ios/nsurlconnection.html" class="sidebar-link">NSURLConnection</a></li><li><a href="/ios/nsurl.html" class="sidebar-link">NSURL</a></li><li><a href="/ios/nsdata.html" class="sidebar-link">NSData</a></li><li><a href="/ios/nsinvocation.html" class="sidebar-link">NSInvocation</a></li><li><a href="/ios/nsuseractivity.html" class="sidebar-link">NSUserActivity</a></li><li><a href="/ios/nspredicate.html" class="sidebar-link">NSPredicate</a></li><li><a href="/ios/nsbundle.html" class="sidebar-link">NSBundle</a></li><li><a href="/ios/caanimation.html" class="sidebar-link">CAAnimation</a></li><li><a href="/ios/concurrency.html" class="sidebar-link">Concurrency</a></li><li><a href="/ios/cagradientlayer.html" class="sidebar-link">CAGradientLayer</a></li><li><a href="/ios/safari-services.html" class="sidebar-link">Safari Services</a></li><li><a href="/ios/calayer.html" class="sidebar-link">CALayer</a></li><li><a href="/ios/ios-implementation-of-xmpp-with-robbie-hanson-framework.html" class="sidebar-link">iOS - Implementation of XMPP with Robbie Hanson framework</a></li><li><a href="/ios/swift-and-objective-c-interoperability.html" class="sidebar-link">Swift and Objective-C interoperability</a></li><li><a href="/ios/custom-fonts.html" class="sidebar-link">Custom fonts</a></li><li><a href="/ios/avspeechsynthesizer.html" class="sidebar-link">AVSpeechSynthesizer</a></li><li><a href="/ios/localization.html" class="sidebar-link">Localization</a></li><li><a href="/ios/alamofire.html" class="sidebar-link">Alamofire</a></li><li><a href="/ios/ibeacon.html" class="sidebar-link">iBeacon</a></li><li><a href="/ios/cllocation.html" class="sidebar-link">CLLocation</a></li><li><a href="/ios/checking-ios-version.html" class="sidebar-link">Checking iOS version</a></li><li><a href="/ios/universal-links.html" class="sidebar-link">Universal Links</a></li><li><a href="/ios/pdf-creation-in-ios.html" class="sidebar-link">PDF Creation in iOS</a></li><li><a href="/ios/in-app-purchase.html" class="sidebar-link">In-App Purchase</a></li><li><a href="/ios/cgcontext-reference.html" class="sidebar-link">CGContext Reference</a></li><li><a href="/ios/core-location.html" class="sidebar-link">Core Location</a></li><li><a href="/ios/facebooksdk.html" class="sidebar-link">FacebookSDK</a></li><li><a href="/ios/afnetworking.html" class="sidebar-link">AFNetworking</a></li><li><a href="/ios/ctcallcenter.html" class="sidebar-link">CTCallCenter</a></li><li><a href="/ios/push-notifications.html" class="sidebar-link">Push Notifications</a></li><li><a href="/ios/extension-for-rich-push-notification-ios-10.html" class="sidebar-link">Extension for rich Push Notification - iOS 10.</a></li><li><a href="/ios/rich-notifications.html" class="sidebar-link">Rich Notifications</a></li><li><a href="/ios/key-value-coding-key-value-observation.html" class="sidebar-link">Key Value Coding-Key Value Observation</a></li><li><a href="/ios/initialization-idioms.html" class="sidebar-link">Initialization idioms</a></li><li><a href="/ios/storyboard.html" class="sidebar-link">Storyboard</a></li><li><a href="/ios/background-modes-and-events.html" class="sidebar-link">Background Modes and Events</a></li><li><a href="/ios/fastlane.html" class="sidebar-link">Fastlane</a></li><li><a href="/ios/cashapelayer.html" class="sidebar-link">CAShapeLayer</a></li><li><a href="/ios/wkwebview.html" class="sidebar-link">WKWebView</a></li><li><a href="/ios/uuid-universally-unique-identifier.html" class="sidebar-link">UUID (Universally Unique Identifier)</a></li><li><a href="/ios/categories.html" class="sidebar-link">Categories</a></li><li><a href="/ios/handling-url-schemes.html" class="sidebar-link">Handling URL Schemes</a></li><li><a href="/ios/realm.html" class="sidebar-link">Realm</a></li><li><a href="/ios/arc-automatic-reference-counting.html" class="sidebar-link">ARC (Automatic Reference Counting)</a></li><li><a href="/ios/dynamic-type.html" class="sidebar-link">Dynamic Type</a></li><li><a href="/ios/swrevealviewcontroller.html" class="sidebar-link">SWRevealViewController</a></li><li><a href="/ios/dispatchgroup.html" class="sidebar-link">DispatchGroup</a></li><li><a href="/ios/gcd-grand-central-dispatch.html" class="active sidebar-link">GCD (Grand Central Dispatch)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ios/gcd-grand-central-dispatch.html#dispatch-semaphore" class="sidebar-link">Dispatch Semaphore</a></li><li class="sidebar-sub-header"><a href="/ios/gcd-grand-central-dispatch.html#dispatch-group" class="sidebar-link">Dispatch Group</a></li><li class="sidebar-sub-header"><a href="/ios/gcd-grand-central-dispatch.html#create-a-dispatch-queue" class="sidebar-link">Create a dispatch queue</a></li><li class="sidebar-sub-header"><a href="/ios/gcd-grand-central-dispatch.html#getting-the-main-queue" class="sidebar-link">Getting the Main Queue</a></li><li class="sidebar-sub-header"><a href="/ios/gcd-grand-central-dispatch.html#serial-vs-concurrent-dispatch-queues" class="sidebar-link">Serial vs Concurrent Dispatch Queues</a></li></ul></li><li><a href="/ios/size-classes-and-adaptivity.html" class="sidebar-link">Size Classes and Adaptivity</a></li><li><a href="/ios/iboutlets.html" class="sidebar-link">IBOutlets</a></li><li><a href="/ios/aws-sdk.html" class="sidebar-link">AWS SDK</a></li><li><a href="/ios/debugging-crashes.html" class="sidebar-link">Debugging Crashes</a></li><li><a href="/ios/cloudkit.html" class="sidebar-link">CloudKit</a></li><li><a href="/ios/gameplaykit.html" class="sidebar-link">GameplayKit</a></li><li><a href="/ios/xcode-build-archive-from-command-line.html" class="sidebar-link">Xcode Build &amp; Archive From Command Line</a></li><li><a href="/ios/xctest-framework-unit-testing.html" class="sidebar-link">XCTest framework - Unit Testing</a></li><li><a href="/ios/avplayer-and-avplayerviewcontroller.html" class="sidebar-link">AVPlayer and AVPlayerViewController</a></li><li><a href="/ios/deep-linking-in-ios.html" class="sidebar-link">Deep Linking in iOS</a></li><li><a href="/ios/core-graphics.html" class="sidebar-link">Core Graphics</a></li><li><a href="/ios/segues.html" class="sidebar-link">Segues</a></li><li><a href="/ios/eventkit.html" class="sidebar-link">EventKit</a></li><li><a href="/ios/sirikit.html" class="sidebar-link">SiriKit</a></li><li><a href="/ios/contacts-framework.html" class="sidebar-link">Contacts Framework</a></li><li><a href="/ios/ios-10-speech-recognition-api.html" class="sidebar-link">iOS 10 Speech Recognition API</a></li><li><a href="/ios/storekit.html" class="sidebar-link">StoreKit</a></li><li><a href="/ios/code-signing.html" class="sidebar-link">Code signing</a></li><li><a href="/ios/create-ipa-file-to-upload-on-appstore-with-applicationloader.html" class="sidebar-link">Create .ipa File to upload on appstore with Applicationloader</a></li><li><a href="/ios/size-classes-and-adaptivity.html" class="sidebar-link">Size Classes and Adaptivity</a></li><li><a href="/ios/mkdistanceformatter.html" class="sidebar-link">MKDistanceFormatter</a></li><li><a href="/ios/3d-touch.html" class="sidebar-link">3D Touch</a></li><li><a href="/ios/gamecenter-leaderboards.html" class="sidebar-link">GameCenter Leaderboards</a></li><li><a href="/ios/keychain.html" class="sidebar-link">Keychain</a></li><li><a href="/ios/handle-multiple-environment-using-macro.html" class="sidebar-link">Handle Multiple Environment using Macro</a></li><li><a href="/ios/set-view-background.html" class="sidebar-link">Set View Background</a></li><li><a href="/ios/block.html" class="sidebar-link">Block</a></li><li><a href="/ios/content-hugging-content-compression-in-autolayout.html" class="sidebar-link">Content Hugging/Content Compression in Autolayout</a></li><li><a href="/ios/ios-google-places-api.html" class="sidebar-link">iOS Google Places API</a></li><li><a href="/ios/navigation-bar.html" class="sidebar-link">Navigation Bar</a></li><li><a href="/ios/app-wide-operations.html" class="sidebar-link">App wide operations</a></li><li><a href="/ios/coreimage-filters.html" class="sidebar-link">CoreImage Filters</a></li><li><a href="/ios/face-detection-using-coreimage-opencv.html" class="sidebar-link">Face Detection Using CoreImage/OpenCV</a></li><li><a href="/ios/mpmediapickerdelegate.html" class="sidebar-link">MPMediaPickerDelegate</a></li><li><a href="/ios/graph-coreplot.html" class="sidebar-link">Graph (Coreplot)</a></li><li><a href="/ios/fcm-messaging-in-swift.html" class="sidebar-link">FCM Messaging in Swift</a></li><li><a href="/ios/create-a-custom-framework-in-ios.html" class="sidebar-link">Create a Custom framework in iOS</a></li><li><a href="/ios/custom-keyboard.html" class="sidebar-link">Custom Keyboard</a></li><li><a href="/ios/airdrop.html" class="sidebar-link">AirDrop</a></li><li><a href="/ios/slcomposeviewcontroller.html" class="sidebar-link">SLComposeViewController</a></li><li><a href="/ios/airprint-tutorial-in-ios.html" class="sidebar-link">AirPrint tutorial in iOS</a></li><li><a href="/ios/carthage-ios-setup.html" class="sidebar-link">Carthage iOS Setup</a></li><li><a href="/ios/healthkit.html" class="sidebar-link">Healthkit</a></li><li><a href="/ios/core-spotlight-in-ios.html" class="sidebar-link">Core SpotLight in iOS</a></li><li><a href="/ios/core-motion.html" class="sidebar-link">Core Motion</a></li><li><a href="/ios/qr-code-scanner.html" class="sidebar-link">QR Code Scanner</a></li><li><a href="/ios/plist-ios.html" class="sidebar-link">plist iOS</a></li><li><a href="/ios/wcsessiondelegate.html" class="sidebar-link">WCSessionDelegate</a></li><li><a href="/ios/appdelegate.html" class="sidebar-link">AppDelegate</a></li><li><a href="/ios/app-submission-process.html" class="sidebar-link">App Submission Process</a></li><li><a href="/ios/filehandle.html" class="sidebar-link">FileHandle</a></li><li><a href="/ios/basic-text-file-i-o.html" class="sidebar-link">Basic text file I/O</a></li><li><a href="/ios/ios-tts.html" class="sidebar-link">iOS TTS</a></li><li><a href="/ios/mpvolumeview.html" class="sidebar-link">MPVolumeView</a></li><li><a href="/ios/objective-c-associated-objects.html" class="sidebar-link">Objective-C Associated Objects</a></li><li><a href="/ios/passing-data-between-view-controllers-with-messagebox-concept.html" class="sidebar-link">Passing Data between View Controllers (with MessageBox-Concept)</a></li><li><a href="/ios/mvvm.html" class="sidebar-link">MVVM</a></li><li><a href="/ios/cache-online-images.html" class="sidebar-link">Cache online images</a></li><li><a href="/ios/chain-blocks-in-a-queue-with-mkblockqueue.html" class="sidebar-link">Chain Blocks in a Queue (with MKBlockQueue)</a></li><li><a href="/ios/simulator.html" class="sidebar-link">Simulator</a></li><li><a href="/ios/background-modes.html" class="sidebar-link">Background Modes</a></li><li><a href="/ios/opengl.html" class="sidebar-link">OpenGL</a></li><li><a href="/ios/mvp-architecture.html" class="sidebar-link">MVP Architecture</a></li><li><a href="/ios/configure-beacons-with-corebluetooth.html" class="sidebar-link">Configure Beacons with CoreBluetooth</a></li><li><a href="/ios/core-data.html" class="sidebar-link">Core Data</a></li><li><a href="/ios/profile-with-instruments.html" class="sidebar-link">Profile with Instruments</a></li><li><a href="/ios/application-rating-review-request.html" class="sidebar-link">Application rating/review request</a></li><li><a href="/ios/mylayout.html" class="sidebar-link">MyLayout</a></li><li><a href="/ios/simulator-builds.html" class="sidebar-link">Simulator Builds</a></li><li><a href="/ios/simulating-location-using-gpx-files-ios.html" class="sidebar-link">Simulating Location Using GPX files iOS</a></li><li><a href="/ios/sqlcipher-integration.html" class="sidebar-link">SqlCipher integration</a></li><li><a href="/ios/security.html" class="sidebar-link">Security</a></li><li><a href="/ios/app-transport-security-ats.html" class="sidebar-link">App Transport Security (ATS)</a></li><li><a href="/ios/guideline-to-choose-best-ios-architecture-patterns.html" class="sidebar-link">Guideline to choose best iOS Architecture Patterns</a></li><li><a href="/ios/multicast-delegates.html" class="sidebar-link">Multicast Delegates</a></li><li><a href="/ios/using-image-aseets.html" class="sidebar-link">Using Image Aseets</a></li><li><a href="/ios/runtime-in-objective-c.html" class="sidebar-link">Runtime in Objective-C</a></li><li><a href="/ios/modelpresentationstyles.html" class="sidebar-link">ModelPresentationStyles</a></li><li><a href="/ios/cydiasubstrate-tweak.html" class="sidebar-link">CydiaSubstrate tweak</a></li><li><a href="/ios/create-a-video-from-images.html" class="sidebar-link">Create a video from images</a></li><li><a href="/ios/codable.html" class="sidebar-link">Codable</a></li><li><a href="/ios/load-images-async.html" class="sidebar-link">Load images async</a></li><li><a href="/ios/adding-a-swift-bridging-header.html" class="sidebar-link">ADDING A SWIFT BRIDGING HEADER</a></li><li><a href="/ios/creating-an-app-id.html" class="sidebar-link">Creating an App ID</a></li><li><a href="/ios/swift-changing-the-rootviewcontroller-in-appdelegate-to-present-main-or-login-onboarding-flow.html" class="sidebar-link">Swift: Changing the rootViewController in AppDelegate to present main or login/onboarding flow</a></li><li><a href="/ios/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gcd-grand-central-dispatch"><a href="#gcd-grand-central-dispatch" class="header-anchor">#</a> GCD (Grand Central Dispatch)</h1> <p>Grand Central Dispatch (GCD) is Apple's answer to multithreading. It is a lightweight framework for performing tasks synchronously or asynchronously in queues and handles CPU threads for you behind the scenes.</p> <p>Related Topic: <a href="https://stackoverflow.com/documentation/ios/1090/concurrency#t=201702170245593002465" target="_blank" rel="noopener noreferrer">Concurrency<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="dispatch-semaphore"><a href="#dispatch-semaphore" class="header-anchor">#</a> Dispatch Semaphore</h2> <blockquote></blockquote> <p>DispatchSemaphore provides an efficient implementation of a
traditional counting semaphore, which can be used to control access to
a resource across multiple execution contexts.</p> <p>A scenario for when to use a semaphore could be if you are doing some file reading/writing, if multiple tasks are trying to read and write from file at the same time, it could increase your performance to make each task wait its turn so as to not overburden the I/O controller.</p> <p><strong>Swift 3</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> do2TasksAtATime <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;starting long running tasks (2 at a time)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> sem <span class="token operator">=</span> <span class="token function">DispatchSemaphore</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span>            <span class="token comment">//this semaphore only allows 2 tasks to run at the same time (the resource count)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">7</span> <span class="token punctuation">{</span>                                 <span class="token comment">//launch a bunch of tasks</span>
        <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>async <span class="token punctuation">{</span>               <span class="token comment">//run tasks on a background thread</span>
            sem<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                               <span class="token comment">//wait here if no resources available</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>                                 <span class="token comment">//do some long task eg file access (here we are just sleeping for a 2 seconds for demonstration purposes)</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;long task <span class="token interpolation"><span class="token delimiter variable">\(</span>i<span class="token delimiter variable">)</span></span> done! \(Date())&quot;</span><span class="token punctuation">)</span>
            sem<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                             <span class="token comment">//let the semaphore know this resource is now available</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Example output: (notice the time stamps)</p> <div class="language-swift extra-class"><pre class="language-swift"><code>starting long running tasks <span class="token punctuation">(</span><span class="token number">2</span> at a time<span class="token punctuation">)</span>
long task <span class="token number">0</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">53</span> <span class="token operator">+</span><span class="token number">0000</span>
long task <span class="token number">1</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">53</span> <span class="token operator">+</span><span class="token number">0000</span>
long task <span class="token number">2</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">55</span> <span class="token operator">+</span><span class="token number">0000</span>
long task <span class="token number">3</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">55</span> <span class="token operator">+</span><span class="token number">0000</span>
long task <span class="token number">5</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">57</span> <span class="token operator">+</span><span class="token number">0000</span>
long task <span class="token number">4</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">57</span> <span class="token operator">+</span><span class="token number">0000</span>
long task <span class="token number">6</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">59</span> <span class="token operator">+</span><span class="token number">0000</span>
long task <span class="token number">7</span> done<span class="token operator">!</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">07</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">59</span> <span class="token operator">+</span><span class="token number">0000</span>

</code></pre></div><p>For more info, refer to the <a href="https://developer.apple.com/reference/dispatch/dispatchsemaphore" target="_blank" rel="noopener noreferrer">Apple Docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="dispatch-group"><a href="#dispatch-group" class="header-anchor">#</a> Dispatch Group</h2> <blockquote></blockquote> <p>DispatchGroup allows for aggregate synchronization of work. You can
use them to submit multiple different work items and track when they
all complete, even though they might run on different queues. This
behavior can be helpful when progress canâ€™t be made until all of the
specified tasks are complete.</p> <p>A Scenario when this could be useful is if you have multiple webservice calls that all need to finish before continuing. For example, you need to download multiple sets of data that needs to be processed by some function. You have to wait for all webservices to complete before calling the function to process all the received data.</p> <p><strong>Swift 3</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> doLongTasksAndWait <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;starting long running tasks&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> group <span class="token operator">=</span> <span class="token function">DispatchGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment">//create a group for a bunch of tasks we are about to do</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">3</span> <span class="token punctuation">{</span>                     <span class="token comment">//launch a bunch of tasks (eg a bunch of webservice calls that all need to be finished before proceeding to the next ViewController)</span>
        group<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment">//let the group know that something is being added</span>
        <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>async <span class="token punctuation">{</span>   <span class="token comment">//run tasks on a background thread</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span>      <span class="token comment">//do some long task eg webservice or database lookup (here we are just sleeping for a random amount of time for demonstration purposes)</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;long task <span class="token interpolation"><span class="token delimiter variable">\(</span>i<span class="token delimiter variable">)</span></span> done!&quot;</span><span class="token punctuation">)</span>
            group<span class="token punctuation">.</span><span class="token function">leave</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment">//let group know that the task is finished</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    group<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                         <span class="token comment">//will block whatever thread we are on here until all the above tasks have finished (so maybe dont use this function on your main thread)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;all tasks done!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Alternatively, if you do not want to wait for the groups to finish, but instead want to run a function once all the tasks have completed, use the <code>notify</code> function in place of the <code>group.wait()</code></p> <div class="language-swift extra-class"><pre class="language-swift"><code>group<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>queue<span class="token punctuation">:</span> <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//the queue: parameter is which queue this block will run on, if you need to do UI updates, use the main queue</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;all tasks done!&quot;</span><span class="token punctuation">)</span>              <span class="token comment">//this will execute when all tasks have left the group</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Example output:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>starting long running tasks
long task <span class="token number">0</span> done<span class="token operator">!</span>
long task <span class="token number">3</span> done<span class="token operator">!</span>
long task <span class="token number">1</span> done<span class="token operator">!</span>
long task <span class="token number">2</span> done<span class="token operator">!</span>
all tasks done<span class="token operator">!</span>

</code></pre></div><p>For more info, refer to the <a href="https://developer.apple.com/reference/dispatch/dispatchgroup" target="_blank" rel="noopener noreferrer">Apple Docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or the related <a href="https://stackoverflow.com/documentation/ios/4624/dispatchgroup#t=201702170254423773445" target="_blank" rel="noopener noreferrer">topic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="create-a-dispatch-queue"><a href="#create-a-dispatch-queue" class="header-anchor">#</a> Create a dispatch queue</h2> <p>You can create your own queue using <code>dispatch_queue_create</code></p> <p><strong>Objective-C</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code>dispatch_queue_t queue <span class="token operator">=</span> <span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.myqueue&quot;</span><span class="token punctuation">,</span>  <span class="token constant">DISPATCH_QUEUE_SERIAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>Swift</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Before Swift 3</span>
<span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.myqueue&quot;</span><span class="token punctuation">,</span> <span class="token constant">DISPATCH_QUEUE_SERIAL</span><span class="token punctuation">)</span>
<span class="token comment">// Swift 3</span>
<span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token function">DispatchQueue</span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> <span class="token string">&quot;com.example.myqueue&quot;</span><span class="token punctuation">)</span> <span class="token comment">//default is serial queue, unless .concurrent is specified as an attribute otherwise</span>

</code></pre></div><h2 id="getting-the-main-queue"><a href="#getting-the-main-queue" class="header-anchor">#</a> Getting the Main Queue</h2> <p>The main queue is the dispatch queue in which all the UI updates take place and the code involving UI changes are placed.</p> <p>You need to get to the main queue in order to update UI on completion of an asynchronous process like <code>NSURLSession</code></p> <p>There are two types of main queue calls <code>synchronous</code> and <code>asynchronous</code>.
When you invoke something <code>synchronously</code>, it means that the thread that initiated that operation will wait for the task to finish before continuing. <code>Asynchronous</code> means that it will not wait.</p> <p><strong>Code Objective-C</strong></p> <p><strong><code>Synchronous</code> Main Queue call</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code>dispatch_queue_t queue <span class="token operator">=</span> <span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span><span class="token constant">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong><code>Asynchronous</code> Main Queue call</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token function">dispatch_async</span><span class="token punctuation">(</span><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
   <span class="token comment">// do work here to Usually to update the User Interface</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>SWIFT 3</strong></p> <p><strong><code>Asynchronous</code> Main Queue call</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>async <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

</code></pre></div><p><strong><code>Synchronous</code> Main Queue call</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>sync <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

</code></pre></div><h2 id="serial-vs-concurrent-dispatch-queues"><a href="#serial-vs-concurrent-dispatch-queues" class="header-anchor">#</a> Serial vs Concurrent Dispatch Queues</h2> <p><strong>Swift 3</strong></p> <p><strong>Serial Queue</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> serialQueues <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> serialQueue <span class="token operator">=</span> <span class="token function">DispatchQueue</span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> <span class="token string">&quot;com.example.serial&quot;</span><span class="token punctuation">)</span> <span class="token comment">//default queue type is a serial queue</span>
    <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token builtin">Date</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">3</span> <span class="token punctuation">{</span>                                             <span class="token comment">//launch a bunch of tasks</span>
        serialQueue<span class="token punctuation">.</span>async <span class="token punctuation">{</span>                                      <span class="token comment">//run tasks on a background thread, using our serial queue</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>                                             <span class="token comment">//do some long task eg webservice or database lookup</span>
            <span class="token keyword">let</span> timeTaken <span class="token operator">=</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">timeIntervalSince</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;serial long task <span class="token interpolation"><span class="token delimiter variable">\(</span>i<span class="token delimiter variable">)</span></span> done! total time taken: <span class="token interpolation"><span class="token delimiter variable">\(</span>timeTaken<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Example output:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>serial long task <span class="token number">0</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">2.07241100072861</span>
serial long task <span class="token number">1</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">4.16347700357437</span>
serial long task <span class="token number">2</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">6.23209798336029</span>
serial long task <span class="token number">3</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">8.30682599544525</span>

</code></pre></div><p><strong>Concurrent Queue</strong></p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> concurrentQueues <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> concurrentQueue <span class="token operator">=</span> <span class="token function">DispatchQueue</span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> <span class="token string">&quot;com.example.concurrent&quot;</span><span class="token punctuation">,</span> attributes<span class="token punctuation">:</span> <span class="token punctuation">.</span>concurrent<span class="token punctuation">)</span> <span class="token comment">//explicitly specify the queue to be a concurrent queue</span>
    <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token builtin">Date</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">3</span> <span class="token punctuation">{</span>            <span class="token comment">//launch a bunch of tasks</span>
        concurrentQueue<span class="token punctuation">.</span>async <span class="token punctuation">{</span> <span class="token comment">//run tasks on a background thread, using our concurrent queue</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>            <span class="token comment">//do some long task eg webservice or database lookup</span>
            <span class="token keyword">let</span> timeTaken <span class="token operator">=</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">timeIntervalSince</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;concurrent long task <span class="token interpolation"><span class="token delimiter variable">\(</span>i<span class="token delimiter variable">)</span></span> done! total time taken: <span class="token interpolation"><span class="token delimiter variable">\(</span>timeTaken<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Example output:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>concurrent long task <span class="token number">3</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">2.07092100381851</span>
concurrent long task <span class="token number">0</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">2.07087397575378</span>
concurrent long task <span class="token number">2</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">2.07086700201035</span>
concurrent long task <span class="token number">1</span> done<span class="token operator">!</span> total time taken<span class="token punctuation">:</span> <span class="token number">2.07089096307755</span>

</code></pre></div><p><strong>Discussion</strong></p> <p>As we can see from the examples above, a serial queue will complete each task in the order they are submitted to the queue. Each task will wait for the previous task to finish before executing. As for the concurrent queue, each task does not wait on the others in the queue and executes as soon as possible; the advantage is that all tasks on the queue will run at the same time on separate threads, making a concurrent queue take less time than a serial queue.</p> <p>If order of execution of tasks is not important, always use a concurrent queue for the best efficiency.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/ios/gcd-grand-central-dispatch.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/ios/dispatchgroup.html" class="prev">
        DispatchGroup
      </a></span> <span class="next"><a href="/ios/size-classes-and-adaptivity.html">
        Size Classes and Adaptivity
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/1379.54d43c22.js" defer></script>
  </body>
</html>
