<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>iOS - Push Notifications</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Registering device for Push Notifications, Registering App ID for use with Push Notifications, Testing push notifications, Checking if your app is already registered for Push Notification, Generating a .pem certificate from your .cer file, to pass on to the server developer, Unregistering From Push Notifications, Setting the application icon badge number, Registering for (Non Interactive) Push Notification, Handling Push Notification">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="iOS - Push Notifications">
    <meta property="og:description" content="Registering device for Push Notifications, Registering App ID for use with Push Notifications, Testing push notifications, Checking if your app is already registered for Push Notification, Generating a .pem certificate from your .cer file, to pass on to the server developer, Unregistering From Push Notifications, Setting the application icon badge number, Registering for (Non Interactive) Push Notification, Handling Push Notification">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/ios/push-notifications.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="iOS - Push Notifications">
    <meta name="twitter:description" content="Registering device for Push Notifications, Registering App ID for use with Push Notifications, Testing push notifications, Checking if your app is already registered for Push Notification, Generating a .pem certificate from your .cer file, to pass on to the server developer, Unregistering From Push Notifications, Setting the application icon badge number, Registering for (Non Interactive) Push Notification, Handling Push Notification">
    <meta name="twitter:url" content="/ios/push-notifications.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/1432.f2042c6e.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>iOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ios/" class="sidebar-link">Disclaimer</a></li><li><a href="/ios/getting-started-with-ios.html" class="sidebar-link">Getting started with iOS</a></li><li><a href="/ios/uilabel.html" class="sidebar-link">UILabel</a></li><li><a href="/ios/uilabel-text-underlining.html" class="sidebar-link">UILabel text underlining</a></li><li><a href="/ios/attributedtext-in-uilabel.html" class="sidebar-link">attributedText in UILabel</a></li><li><a href="/ios/uibutton.html" class="sidebar-link">UIButton</a></li><li><a href="/ios/uidatepicker.html" class="sidebar-link">UIDatePicker</a></li><li><a href="/ios/uilocalnotification.html" class="sidebar-link">UILocalNotification</a></li><li><a href="/ios/uiimage.html" class="sidebar-link">UIImage</a></li><li><a href="/ios/convert-nsattributedstring-to-uiimage.html" class="sidebar-link">Convert NSAttributedString to UIImage</a></li><li><a href="/ios/uiimagepickercontroller.html" class="sidebar-link">UIImagePickerController</a></li><li><a href="/ios/uiimageview.html" class="sidebar-link">UIImageView</a></li><li><a href="/ios/resizing-uiimage.html" class="sidebar-link">Resizing UIImage</a></li><li><a href="/ios/cut-a-uiimage-into-a-circle.html" class="sidebar-link">Cut a UIImage into a circle</a></li><li><a href="/ios/uitableview.html" class="sidebar-link">UITableView</a></li><li><a href="/ios/uitableviewcontroller.html" class="sidebar-link">UITableViewController</a></li><li><a href="/ios/uirefreshcontrol-tableview.html" class="sidebar-link">UIRefreshControl TableView</a></li><li><a href="/ios/uitableviewcell.html" class="sidebar-link">UITableViewCell</a></li><li><a href="/ios/custom-methods-of-selection-of-uitableviewcells.html" class="sidebar-link">Custom methods of selection of UITableViewCells</a></li><li><a href="/ios/custom-methods-of-selection-of-uitableviewcells.html" class="sidebar-link">Custom methods of selection of UITableViewCells</a></li><li><a href="/ios/uiview.html" class="sidebar-link">UIView</a></li><li><a href="/ios/snapshot-of-uiview.html" class="sidebar-link">Snapshot of UIView</a></li><li><a href="/ios/uialertcontroller.html" class="sidebar-link">UIAlertController</a></li><li><a href="/ios/uicolor.html" class="sidebar-link">UIColor</a></li><li><a href="/ios/uitextview.html" class="sidebar-link">UITextView</a></li><li><a href="/ios/uitextfield-delegate.html" class="sidebar-link">UITextField Delegate</a></li><li><a href="/ios/uinavigationcontroller.html" class="sidebar-link">UINavigationController</a></li><li><a href="/ios/uigesturerecognizer.html" class="sidebar-link">UIGestureRecognizer</a></li><li><a href="/ios/uibarbuttonitem.html" class="sidebar-link">UIBarButtonItem</a></li><li><a href="/ios/uiscrollview.html" class="sidebar-link">UIScrollView</a></li><li><a href="/ios/uistackview.html" class="sidebar-link">UIStackView</a></li><li><a href="/ios/dynamically-updating-a-uistackview.html" class="sidebar-link">Dynamically updating a UIStackView</a></li><li><a href="/ios/uiscrollview-with-stackview-child.html" class="sidebar-link">UIScrollView with StackView child</a></li><li><a href="/ios/uiscrollview-autolayout.html" class="sidebar-link">UIScrollView AutoLayout</a></li><li><a href="/ios/uitextfield.html" class="sidebar-link">UITextField</a></li><li><a href="/ios/custom-uitextfield.html" class="sidebar-link">Custom UITextField</a></li><li><a href="/ios/uiviewcontroller.html" class="sidebar-link">UIViewController</a></li><li><a href="/ios/uiswitch.html" class="sidebar-link">UISwitch</a></li><li><a href="/ios/uicollectionview.html" class="sidebar-link">UICollectionView</a></li><li><a href="/ios/uisearchcontroller.html" class="sidebar-link">UISearchController</a></li><li><a href="/ios/uitabbarcontroller.html" class="sidebar-link">UITabBarController</a></li><li><a href="/ios/uiwebview.html" class="sidebar-link">UIWebView</a></li><li><a href="/ios/uiactivityviewcontroller.html" class="sidebar-link">UIActivityViewController</a></li><li><a href="/ios/uicontrol-event-handling-with-blocks.html" class="sidebar-link">UIControl - Event Handling with Blocks</a></li><li><a href="/ios/uisplitviewcontroller.html" class="sidebar-link">UISplitViewController</a></li><li><a href="/ios/uislider.html" class="sidebar-link">UISlider</a></li><li><a href="/ios/uistoryboard.html" class="sidebar-link">UIStoryboard</a></li><li><a href="/ios/uipageviewcontroller.html" class="sidebar-link">UIPageViewController</a></li><li><a href="/ios/uisplitviewcontroller.html" class="sidebar-link">UISplitViewController</a></li><li><a href="/ios/uifont.html" class="sidebar-link">UIFont</a></li><li><a href="/ios/uidevice.html" class="sidebar-link">UIDevice</a></li><li><a href="/ios/make-selective-uiview-corners-rounded.html" class="sidebar-link">Make selective UIView corners rounded</a></li><li><a href="/ios/custom-uiviews-from-xib-files.html" class="sidebar-link">Custom UIViews from XIB files</a></li><li><a href="/ios/uibezierpath.html" class="sidebar-link">UIBezierPath</a></li><li><a href="/ios/uipickerview.html" class="sidebar-link">UIPickerView</a></li><li><a href="/ios/uifeedbackgenerator.html" class="sidebar-link">UIFeedbackGenerator</a></li><li><a href="/ios/uiappearance.html" class="sidebar-link">UIAppearance</a></li><li><a href="/ios/uikit-dynamics-with-uicollectionview.html" class="sidebar-link">UIKit Dynamics with UICollectionView</a></li><li><a href="/ios/uipheonix-easy-flexible-dynamic-highly-scalable-ui-framework.html" class="sidebar-link">UIPheonix - easy, flexible, dynamic &amp; highly scalable UI framework</a></li><li><a href="/ios/uikit-dynamics.html" class="sidebar-link">UIKit Dynamics</a></li><li><a href="/ios/ui-testing.html" class="sidebar-link">UI Testing</a></li><li><a href="/ios/change-status-bar-color.html" class="sidebar-link">Change Status Bar Color</a></li><li><a href="/ios/uisegmentedcontrol.html" class="sidebar-link">UISegmentedControl</a></li><li><a href="/ios/passing-data-between-view-controllers.html" class="sidebar-link">Passing Data between View Controllers</a></li><li><a href="/ios/managing-the-keyboard.html" class="sidebar-link">Managing the Keyboard</a></li><li><a href="/ios/checking-for-network-connectivity.html" class="sidebar-link">Checking for Network Connectivity</a></li><li><a href="/ios/accessibility.html" class="sidebar-link">Accessibility</a></li><li><a href="/ios/auto-layout.html" class="sidebar-link">Auto Layout</a></li><li><a href="/ios/mkmapview.html" class="sidebar-link">MKMapView</a></li><li><a href="/ios/nsarray.html" class="sidebar-link">NSArray</a></li><li><a href="/ios/nsattributedstring.html" class="sidebar-link">NSAttributedString</a></li><li><a href="/ios/convert-html-to-nsattributed-string-and-vice-verse.html" class="sidebar-link">Convert HTML to NSAttributed string and vice verse</a></li><li><a href="/ios/nstimer.html" class="sidebar-link">NSTimer</a></li><li><a href="/ios/nsdate.html" class="sidebar-link">NSDate</a></li><li><a href="/ios/nsnotificationcenter.html" class="sidebar-link">NSNotificationCenter</a></li><li><a href="/ios/nsurlsession.html" class="sidebar-link">NSURLSession</a></li><li><a href="/ios/nsuserdefaults.html" class="sidebar-link">NSUserDefaults</a></li><li><a href="/ios/nshttpcookiestorage.html" class="sidebar-link">NSHTTPCookieStorage</a></li><li><a href="/ios/nsurlconnection.html" class="sidebar-link">NSURLConnection</a></li><li><a href="/ios/nsurl.html" class="sidebar-link">NSURL</a></li><li><a href="/ios/nsdata.html" class="sidebar-link">NSData</a></li><li><a href="/ios/nsinvocation.html" class="sidebar-link">NSInvocation</a></li><li><a href="/ios/nsuseractivity.html" class="sidebar-link">NSUserActivity</a></li><li><a href="/ios/nspredicate.html" class="sidebar-link">NSPredicate</a></li><li><a href="/ios/nsbundle.html" class="sidebar-link">NSBundle</a></li><li><a href="/ios/caanimation.html" class="sidebar-link">CAAnimation</a></li><li><a href="/ios/concurrency.html" class="sidebar-link">Concurrency</a></li><li><a href="/ios/cagradientlayer.html" class="sidebar-link">CAGradientLayer</a></li><li><a href="/ios/safari-services.html" class="sidebar-link">Safari Services</a></li><li><a href="/ios/calayer.html" class="sidebar-link">CALayer</a></li><li><a href="/ios/ios-implementation-of-xmpp-with-robbie-hanson-framework.html" class="sidebar-link">iOS - Implementation of XMPP with Robbie Hanson framework</a></li><li><a href="/ios/swift-and-objective-c-interoperability.html" class="sidebar-link">Swift and Objective-C interoperability</a></li><li><a href="/ios/custom-fonts.html" class="sidebar-link">Custom fonts</a></li><li><a href="/ios/avspeechsynthesizer.html" class="sidebar-link">AVSpeechSynthesizer</a></li><li><a href="/ios/localization.html" class="sidebar-link">Localization</a></li><li><a href="/ios/alamofire.html" class="sidebar-link">Alamofire</a></li><li><a href="/ios/ibeacon.html" class="sidebar-link">iBeacon</a></li><li><a href="/ios/cllocation.html" class="sidebar-link">CLLocation</a></li><li><a href="/ios/checking-ios-version.html" class="sidebar-link">Checking iOS version</a></li><li><a href="/ios/universal-links.html" class="sidebar-link">Universal Links</a></li><li><a href="/ios/pdf-creation-in-ios.html" class="sidebar-link">PDF Creation in iOS</a></li><li><a href="/ios/in-app-purchase.html" class="sidebar-link">In-App Purchase</a></li><li><a href="/ios/cgcontext-reference.html" class="sidebar-link">CGContext Reference</a></li><li><a href="/ios/core-location.html" class="sidebar-link">Core Location</a></li><li><a href="/ios/facebooksdk.html" class="sidebar-link">FacebookSDK</a></li><li><a href="/ios/afnetworking.html" class="sidebar-link">AFNetworking</a></li><li><a href="/ios/ctcallcenter.html" class="sidebar-link">CTCallCenter</a></li><li><a href="/ios/push-notifications.html" class="active sidebar-link">Push Notifications</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#registering-device-for-push-notifications" class="sidebar-link">Registering device for Push Notifications</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#registering-app-id-for-use-with-push-notifications" class="sidebar-link">Registering App ID for use with Push Notifications</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#testing-push-notifications" class="sidebar-link">Testing push notifications</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#checking-if-your-app-is-already-registered-for-push-notification" class="sidebar-link">Checking if your app is already registered for Push Notification</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#generating-a-pem-certificate-from-your-cer-file-to-pass-on-to-the-server-developer" class="sidebar-link">Generating a .pem certificate from your .cer file, to pass on to the server developer</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#unregistering-from-push-notifications" class="sidebar-link">Unregistering From Push Notifications</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#setting-the-application-icon-badge-number" class="sidebar-link">Setting the application icon badge number</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#registering-for-non-interactive-push-notification" class="sidebar-link">Registering for (Non Interactive) Push Notification</a></li><li class="sidebar-sub-header"><a href="/ios/push-notifications.html#handling-push-notification" class="sidebar-link">Handling Push Notification</a></li></ul></li><li><a href="/ios/extension-for-rich-push-notification-ios-10.html" class="sidebar-link">Extension for rich Push Notification - iOS 10.</a></li><li><a href="/ios/rich-notifications.html" class="sidebar-link">Rich Notifications</a></li><li><a href="/ios/key-value-coding-key-value-observation.html" class="sidebar-link">Key Value Coding-Key Value Observation</a></li><li><a href="/ios/initialization-idioms.html" class="sidebar-link">Initialization idioms</a></li><li><a href="/ios/storyboard.html" class="sidebar-link">Storyboard</a></li><li><a href="/ios/background-modes-and-events.html" class="sidebar-link">Background Modes and Events</a></li><li><a href="/ios/fastlane.html" class="sidebar-link">Fastlane</a></li><li><a href="/ios/cashapelayer.html" class="sidebar-link">CAShapeLayer</a></li><li><a href="/ios/wkwebview.html" class="sidebar-link">WKWebView</a></li><li><a href="/ios/uuid-universally-unique-identifier.html" class="sidebar-link">UUID (Universally Unique Identifier)</a></li><li><a href="/ios/categories.html" class="sidebar-link">Categories</a></li><li><a href="/ios/handling-url-schemes.html" class="sidebar-link">Handling URL Schemes</a></li><li><a href="/ios/realm.html" class="sidebar-link">Realm</a></li><li><a href="/ios/arc-automatic-reference-counting.html" class="sidebar-link">ARC (Automatic Reference Counting)</a></li><li><a href="/ios/dynamic-type.html" class="sidebar-link">Dynamic Type</a></li><li><a href="/ios/swrevealviewcontroller.html" class="sidebar-link">SWRevealViewController</a></li><li><a href="/ios/dispatchgroup.html" class="sidebar-link">DispatchGroup</a></li><li><a href="/ios/gcd-grand-central-dispatch.html" class="sidebar-link">GCD (Grand Central Dispatch)</a></li><li><a href="/ios/size-classes-and-adaptivity.html" class="sidebar-link">Size Classes and Adaptivity</a></li><li><a href="/ios/iboutlets.html" class="sidebar-link">IBOutlets</a></li><li><a href="/ios/aws-sdk.html" class="sidebar-link">AWS SDK</a></li><li><a href="/ios/debugging-crashes.html" class="sidebar-link">Debugging Crashes</a></li><li><a href="/ios/cloudkit.html" class="sidebar-link">CloudKit</a></li><li><a href="/ios/gameplaykit.html" class="sidebar-link">GameplayKit</a></li><li><a href="/ios/xcode-build-archive-from-command-line.html" class="sidebar-link">Xcode Build &amp; Archive From Command Line</a></li><li><a href="/ios/xctest-framework-unit-testing.html" class="sidebar-link">XCTest framework - Unit Testing</a></li><li><a href="/ios/avplayer-and-avplayerviewcontroller.html" class="sidebar-link">AVPlayer and AVPlayerViewController</a></li><li><a href="/ios/deep-linking-in-ios.html" class="sidebar-link">Deep Linking in iOS</a></li><li><a href="/ios/core-graphics.html" class="sidebar-link">Core Graphics</a></li><li><a href="/ios/segues.html" class="sidebar-link">Segues</a></li><li><a href="/ios/eventkit.html" class="sidebar-link">EventKit</a></li><li><a href="/ios/sirikit.html" class="sidebar-link">SiriKit</a></li><li><a href="/ios/contacts-framework.html" class="sidebar-link">Contacts Framework</a></li><li><a href="/ios/ios-10-speech-recognition-api.html" class="sidebar-link">iOS 10 Speech Recognition API</a></li><li><a href="/ios/storekit.html" class="sidebar-link">StoreKit</a></li><li><a href="/ios/code-signing.html" class="sidebar-link">Code signing</a></li><li><a href="/ios/create-ipa-file-to-upload-on-appstore-with-applicationloader.html" class="sidebar-link">Create .ipa File to upload on appstore with Applicationloader</a></li><li><a href="/ios/size-classes-and-adaptivity.html" class="sidebar-link">Size Classes and Adaptivity</a></li><li><a href="/ios/mkdistanceformatter.html" class="sidebar-link">MKDistanceFormatter</a></li><li><a href="/ios/3d-touch.html" class="sidebar-link">3D Touch</a></li><li><a href="/ios/gamecenter-leaderboards.html" class="sidebar-link">GameCenter Leaderboards</a></li><li><a href="/ios/keychain.html" class="sidebar-link">Keychain</a></li><li><a href="/ios/handle-multiple-environment-using-macro.html" class="sidebar-link">Handle Multiple Environment using Macro</a></li><li><a href="/ios/set-view-background.html" class="sidebar-link">Set View Background</a></li><li><a href="/ios/block.html" class="sidebar-link">Block</a></li><li><a href="/ios/content-hugging-content-compression-in-autolayout.html" class="sidebar-link">Content Hugging/Content Compression in Autolayout</a></li><li><a href="/ios/ios-google-places-api.html" class="sidebar-link">iOS Google Places API</a></li><li><a href="/ios/navigation-bar.html" class="sidebar-link">Navigation Bar</a></li><li><a href="/ios/app-wide-operations.html" class="sidebar-link">App wide operations</a></li><li><a href="/ios/coreimage-filters.html" class="sidebar-link">CoreImage Filters</a></li><li><a href="/ios/face-detection-using-coreimage-opencv.html" class="sidebar-link">Face Detection Using CoreImage/OpenCV</a></li><li><a href="/ios/mpmediapickerdelegate.html" class="sidebar-link">MPMediaPickerDelegate</a></li><li><a href="/ios/graph-coreplot.html" class="sidebar-link">Graph (Coreplot)</a></li><li><a href="/ios/fcm-messaging-in-swift.html" class="sidebar-link">FCM Messaging in Swift</a></li><li><a href="/ios/create-a-custom-framework-in-ios.html" class="sidebar-link">Create a Custom framework in iOS</a></li><li><a href="/ios/custom-keyboard.html" class="sidebar-link">Custom Keyboard</a></li><li><a href="/ios/airdrop.html" class="sidebar-link">AirDrop</a></li><li><a href="/ios/slcomposeviewcontroller.html" class="sidebar-link">SLComposeViewController</a></li><li><a href="/ios/airprint-tutorial-in-ios.html" class="sidebar-link">AirPrint tutorial in iOS</a></li><li><a href="/ios/carthage-ios-setup.html" class="sidebar-link">Carthage iOS Setup</a></li><li><a href="/ios/healthkit.html" class="sidebar-link">Healthkit</a></li><li><a href="/ios/core-spotlight-in-ios.html" class="sidebar-link">Core SpotLight in iOS</a></li><li><a href="/ios/core-motion.html" class="sidebar-link">Core Motion</a></li><li><a href="/ios/qr-code-scanner.html" class="sidebar-link">QR Code Scanner</a></li><li><a href="/ios/plist-ios.html" class="sidebar-link">plist iOS</a></li><li><a href="/ios/wcsessiondelegate.html" class="sidebar-link">WCSessionDelegate</a></li><li><a href="/ios/appdelegate.html" class="sidebar-link">AppDelegate</a></li><li><a href="/ios/app-submission-process.html" class="sidebar-link">App Submission Process</a></li><li><a href="/ios/filehandle.html" class="sidebar-link">FileHandle</a></li><li><a href="/ios/basic-text-file-i-o.html" class="sidebar-link">Basic text file I/O</a></li><li><a href="/ios/ios-tts.html" class="sidebar-link">iOS TTS</a></li><li><a href="/ios/mpvolumeview.html" class="sidebar-link">MPVolumeView</a></li><li><a href="/ios/objective-c-associated-objects.html" class="sidebar-link">Objective-C Associated Objects</a></li><li><a href="/ios/passing-data-between-view-controllers-with-messagebox-concept.html" class="sidebar-link">Passing Data between View Controllers (with MessageBox-Concept)</a></li><li><a href="/ios/mvvm.html" class="sidebar-link">MVVM</a></li><li><a href="/ios/cache-online-images.html" class="sidebar-link">Cache online images</a></li><li><a href="/ios/chain-blocks-in-a-queue-with-mkblockqueue.html" class="sidebar-link">Chain Blocks in a Queue (with MKBlockQueue)</a></li><li><a href="/ios/simulator.html" class="sidebar-link">Simulator</a></li><li><a href="/ios/background-modes.html" class="sidebar-link">Background Modes</a></li><li><a href="/ios/opengl.html" class="sidebar-link">OpenGL</a></li><li><a href="/ios/mvp-architecture.html" class="sidebar-link">MVP Architecture</a></li><li><a href="/ios/configure-beacons-with-corebluetooth.html" class="sidebar-link">Configure Beacons with CoreBluetooth</a></li><li><a href="/ios/core-data.html" class="sidebar-link">Core Data</a></li><li><a href="/ios/profile-with-instruments.html" class="sidebar-link">Profile with Instruments</a></li><li><a href="/ios/application-rating-review-request.html" class="sidebar-link">Application rating/review request</a></li><li><a href="/ios/mylayout.html" class="sidebar-link">MyLayout</a></li><li><a href="/ios/simulator-builds.html" class="sidebar-link">Simulator Builds</a></li><li><a href="/ios/simulating-location-using-gpx-files-ios.html" class="sidebar-link">Simulating Location Using GPX files iOS</a></li><li><a href="/ios/sqlcipher-integration.html" class="sidebar-link">SqlCipher integration</a></li><li><a href="/ios/security.html" class="sidebar-link">Security</a></li><li><a href="/ios/app-transport-security-ats.html" class="sidebar-link">App Transport Security (ATS)</a></li><li><a href="/ios/guideline-to-choose-best-ios-architecture-patterns.html" class="sidebar-link">Guideline to choose best iOS Architecture Patterns</a></li><li><a href="/ios/multicast-delegates.html" class="sidebar-link">Multicast Delegates</a></li><li><a href="/ios/using-image-aseets.html" class="sidebar-link">Using Image Aseets</a></li><li><a href="/ios/runtime-in-objective-c.html" class="sidebar-link">Runtime in Objective-C</a></li><li><a href="/ios/modelpresentationstyles.html" class="sidebar-link">ModelPresentationStyles</a></li><li><a href="/ios/cydiasubstrate-tweak.html" class="sidebar-link">CydiaSubstrate tweak</a></li><li><a href="/ios/create-a-video-from-images.html" class="sidebar-link">Create a video from images</a></li><li><a href="/ios/codable.html" class="sidebar-link">Codable</a></li><li><a href="/ios/load-images-async.html" class="sidebar-link">Load images async</a></li><li><a href="/ios/adding-a-swift-bridging-header.html" class="sidebar-link">ADDING A SWIFT BRIDGING HEADER</a></li><li><a href="/ios/creating-an-app-id.html" class="sidebar-link">Creating an App ID</a></li><li><a href="/ios/swift-changing-the-rootviewcontroller-in-appdelegate-to-present-main-or-login-onboarding-flow.html" class="sidebar-link">Swift: Changing the rootViewController in AppDelegate to present main or login/onboarding flow</a></li><li><a href="/ios/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="push-notifications"><a href="#push-notifications" class="header-anchor">#</a> Push Notifications</h1> <h2 id="registering-device-for-push-notifications"><a href="#registering-device-for-push-notifications" class="header-anchor">#</a> Registering device for Push Notifications</h2> <p>To register your device for push notifications, add the following code to your AppDelegate file in <code>didFinishLaunchingWithOptions</code> method:</p> <h3 id="swift"><a href="#swift" class="header-anchor">#</a> Swift</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didFinishLaunchingWithOptions launchOptions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">NSObject</span><span class="token punctuation">:</span> <span class="token builtin">AnyObject</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span> <span class="token punctuation">{</span>
    <span class="token comment">// Override point for customization after application launch.</span>
    <span class="token keyword">if</span> <span class="token builtin">UIDevice</span><span class="token punctuation">.</span><span class="token function">currentDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>systemVersion<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token builtin">NumericSearch</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">NSOrderedAscending</span> <span class="token punctuation">{</span> 
        <span class="token comment">// Register for Push Notitications, if running iOS &lt; 8</span>
        <span class="token keyword">if</span> application<span class="token punctuation">.</span><span class="token function">respondsToSelector</span><span class="token punctuation">(</span><span class="token string">&quot;registerUserNotificationSettings:&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> types<span class="token punctuation">:</span><span class="token builtin">UIUserNotificationType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token builtin">Alert</span> <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token builtin">Badge</span> <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token builtin">Sound</span><span class="token punctuation">)</span>
            <span class="token keyword">let</span> settings<span class="token punctuation">:</span><span class="token builtin">UIUserNotificationSettings</span> <span class="token operator">=</span> <span class="token function">UIUserNotificationSettings</span><span class="token punctuation">(</span>forTypes<span class="token punctuation">:</span> types<span class="token punctuation">,</span> categories<span class="token punctuation">:</span> <span class="token constant">nil</span><span class="token punctuation">)</span>

            application<span class="token punctuation">.</span><span class="token function">registerUserNotificationSettings</span><span class="token punctuation">(</span>settings<span class="token punctuation">)</span>
            application<span class="token punctuation">.</span><span class="token function">registerForRemoteNotifications</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      
            <span class="token comment">// Register for Push Notifications before iOS 8</span>
            application<span class="token punctuation">.</span><span class="token function">registerForRemoteNotificationTypes</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token builtin">Alert</span> <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token builtin">Badge</span> <span class="token operator">|</span> <span class="token punctuation">.</span><span class="token builtin">Sound</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> center <span class="token operator">=</span> <span class="token builtin">UNUserNotificationCenter</span><span class="token punctuation">.</span><span class="token function">currentNotificationCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        center<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span>
        center<span class="token punctuation">.</span><span class="token function">requestAuthorizationWithOptions</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">UNAuthorizationOptionSound</span> <span class="token operator">|</span> <span class="token builtin">UNAuthorizationOptionAlert</span> <span class="token operator">|</span> <span class="token builtin">UNAuthorizationOptionBadge</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>granted<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token builtin">NSError</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span> <span class="token keyword">in</span>
            <span class="token keyword">if</span> <span class="token operator">!</span>error <span class="token punctuation">{</span>
                <span class="token builtin">UIApplication</span><span class="token punctuation">.</span><span class="token function">sharedApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerForRemoteNotifications</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// required to get the app to do anything at all about push notifications</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Push registration success.&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Push registration FAILED&quot;</span><span class="token punctuation">)</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;ERROR: <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token punctuation">.</span>localizedFailureReason<span class="token operator">!</span><span class="token delimiter variable">)</span></span> - <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;SUGGESTIONS: <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token punctuation">.</span>localizedRecoveryOptions<span class="token delimiter variable">)</span></span> - <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token punctuation">.</span>localizedRecoverySuggestion<span class="token operator">!</span><span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="objective-c"><a href="#objective-c" class="header-anchor">#</a> Objective-C</h3> <div class="language-swift extra-class"><pre class="language-swift"><code>#define <span class="token function">SYSTEM_VERSION_LESS_THAN</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIDevice</span> currentDevice<span class="token punctuation">]</span> systemVersion<span class="token punctuation">]</span> compare<span class="token punctuation">:</span>v options<span class="token punctuation">:</span><span class="token builtin">NSNumericSearch</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token builtin">NSOrderedAscending</span><span class="token punctuation">)</span>

<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">SYSTEM_VERSION_LESS_THAN</span><span class="token punctuation">(</span> @<span class="token string">&quot;10.0&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>application respondsToSelector<span class="token punctuation">:</span>@<span class="token function">selector</span><span class="token punctuation">(</span>isRegisteredForRemoteNotifications<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// iOS 8 Notifications</span>
        <span class="token punctuation">[</span>application registerUserNotificationSettings<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token builtin">UIUserNotificationSettings</span> settingsForTypes<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIUserNotificationTypeSound</span> <span class="token operator">|</span> <span class="token builtin">UIUserNotificationTypeAlert</span> <span class="token operator">|</span> <span class="token builtin">UIUserNotificationTypeBadge</span><span class="token punctuation">)</span> categories<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token punctuation">[</span>application registerForRemoteNotifications<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// iOS &lt; 8 Notifications</span>
        <span class="token punctuation">[</span>application registerForRemoteNotificationTypes<span class="token punctuation">:</span>
         <span class="token punctuation">(</span><span class="token builtin">UIRemoteNotificationTypeBadge</span> <span class="token operator">|</span> <span class="token builtin">UIRemoteNotificationTypeAlert</span> <span class="token operator">|</span> <span class="token builtin">UIRemoteNotificationTypeSound</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{</span>
    <span class="token builtin">UNUserNotificationCenter</span> <span class="token operator">*</span>center <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">UNUserNotificationCenter</span> currentNotificationCenter<span class="token punctuation">]</span><span class="token punctuation">;</span>
    center<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>center requestAuthorizationWithOptions<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UNAuthorizationOptionSound</span> <span class="token operator">|</span> <span class="token builtin">UNAuthorizationOptionAlert</span> <span class="token operator">|</span> <span class="token builtin">UNAuthorizationOptionBadge</span><span class="token punctuation">)</span> completionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token constant">BOOL</span> granted<span class="token punctuation">,</span> <span class="token builtin">NSError</span> <span class="token operator">*</span> _Nullable error<span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>error <span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
             <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span> registerForRemoteNotifications<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// required to get the app to do anything at all about push notifications</span>
             <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;Push registration success.&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">else</span>
         <span class="token punctuation">{</span>
             <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;Push registration FAILED&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;ERROR: %@ - %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>localizedFailureReason<span class="token punctuation">,</span> error<span class="token punctuation">.</span>localizedDescription <span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;SUGGESTIONS: %@ - %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>localizedRecoveryOptions<span class="token punctuation">,</span> error<span class="token punctuation">.</span>localizedRecoverySuggestion <span class="token punctuation">)</span><span class="token punctuation">;</span>  
         <span class="token punctuation">}</span>  
     <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>


<span class="token comment">//to check if your App lunch from Push notification </span>
<span class="token comment">//---------------------------------------------------</span>
    <span class="token comment">//Handel Push notification</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchOptions <span class="token operator">!=</span> <span class="token constant">nil</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Here app will open from pushnotification</span>
        <span class="token comment">//RemoteNotification</span>
        <span class="token builtin">NSDictionary</span><span class="token operator">*</span> dictionary1 <span class="token operator">=</span> <span class="token punctuation">[</span>launchOptions objectForKey<span class="token punctuation">:</span><span class="token builtin">UIApplicationLaunchOptionsRemoteNotificationKey</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//LocalNotification</span>
        <span class="token builtin">NSDictionary</span><span class="token operator">*</span> dictionary2 <span class="token operator">=</span> <span class="token punctuation">[</span>launchOptions objectForKey<span class="token punctuation">:</span><span class="token builtin">UIApplicationLaunchOptionsLocalNotificationKey</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dictionary1 <span class="token operator">!=</span> <span class="token constant">nil</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//RemoteNotification Payload</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;Launched from push notification: %@&quot;</span><span class="token punctuation">,</span> dictionary1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//here handle your push notification</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dictionary2 <span class="token operator">!=</span> <span class="token constant">nil</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;Launched from dictionary2dictionary2dictionary2 notification: %@&quot;</span><span class="token punctuation">,</span> dictionary2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            double delayInSeconds <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
            dispatch_time_t popTime <span class="token operator">=</span> <span class="token function">dispatch_time</span><span class="token punctuation">(</span><span class="token constant">DISPATCH_TIME_NOW</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>int64_t<span class="token punctuation">)</span><span class="token punctuation">(</span>delayInSeconds <span class="token operator">*</span> <span class="token constant">NSEC_PER_SEC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">dispatch_after</span><span class="token punctuation">(</span>popTime<span class="token punctuation">,</span> <span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// [self addMessageFromRemoteNotification:dictionary2 updateUI:NO];</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
     <span class="token punctuation">}</span>
     <span class="token keyword">else</span>
         <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//------------------------------------------------</span>

</code></pre></div><p>The above code will try to communicate with APNs server to get device token (prerequiesites are you have APNs enabled in your iOS provisioning profile).</p> <p>Once it establishes reliable connection with APNs server, the server provides you a device token.</p> <p>After adding the code above, add these methods to the <code>AppDelegate</code> class:</p> <h3 id="swift-2"><a href="#swift-2" class="header-anchor">#</a> Swift</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didRegisterForRemoteNotificationsWithDeviceToken deviceToken<span class="token punctuation">:</span> <span class="token builtin">NSData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;DEVICE TOKEN = <span class="token interpolation"><span class="token delimiter variable">\(</span>deviceToken<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didFailToRegisterForRemoteNotificationsWithError error<span class="token punctuation">:</span> <span class="token builtin">NSError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="objective-c-2"><a href="#objective-c-2" class="header-anchor">#</a> Objective-C</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span> <span class="token operator">*</span><span class="token punctuation">)</span>application didRegisterForRemoteNotificationsWithDeviceToken<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSData</span> <span class="token operator">*</span><span class="token punctuation">)</span>deviceToken
<span class="token punctuation">{</span>    
<span class="token builtin">NSString</span> <span class="token operator">*</span> deviceTokenString <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span>deviceToken description<span class="token punctuation">]</span>
                     stringByReplacingOccurrencesOfString<span class="token punctuation">:</span> @<span class="token string">&quot;&lt;&quot;</span> withString<span class="token punctuation">:</span> @<span class="token string">&quot;&quot;</span><span class="token punctuation">]</span> 
                    stringByReplacingOccurrencesOfString<span class="token punctuation">:</span> @<span class="token string">&quot;&gt;&quot;</span> withString<span class="token punctuation">:</span> @<span class="token string">&quot;&quot;</span><span class="token punctuation">]</span> 
                   stringByReplacingOccurrencesOfString<span class="token punctuation">:</span> @<span class="token string">&quot; &quot;</span> withString<span class="token punctuation">:</span> @<span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;The generated device token string is : %@&quot;</span><span class="token punctuation">,</span>deviceTokenString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span><span class="token operator">*</span><span class="token punctuation">)</span>application didFailToRegisterForRemoteNotificationsWithError<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSError</span><span class="token operator">*</span><span class="token punctuation">)</span>error
<span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;Failed to get token, error: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The above methods are called according to registration success or failure scenario.</p> <p>Success scenario calls:</p> <h3 id="swift-3"><a href="#swift-3" class="header-anchor">#</a> Swift</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didRegisterForRemoteNotificationsWithDeviceToken deviceToken<span class="token punctuation">:</span> <span class="token builtin">NSData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;DEVICE TOKEN = <span class="token interpolation"><span class="token delimiter variable">\(</span>deviceToken<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>In Swift3:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>@<span class="token function">objc</span><span class="token punctuation">(</span>userNotificationCenter<span class="token punctuation">:</span>willPresentNotification<span class="token punctuation">:</span>withCompletionHandler<span class="token punctuation">:</span><span class="token punctuation">)</span> @<span class="token function">available</span><span class="token punctuation">(</span>iOS <span class="token number">10.0</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">userNotificationCenter</span><span class="token punctuation">(</span><span class="token number">_</span> center<span class="token punctuation">:</span> <span class="token builtin">UNUserNotificationCenter</span><span class="token punctuation">,</span> willPresent notification<span class="token punctuation">:</span> <span class="token builtin">UNNotification</span><span class="token punctuation">,</span> withCompletionHandler completionHandler<span class="token punctuation">:</span> @escaping <span class="token punctuation">(</span><span class="token builtin">UNNotificationPresentationOptions</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//To show notifications in foreground.</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Userinfo2 <span class="token interpolation"><span class="token delimiter variable">\(</span>notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>content<span class="token punctuation">.</span>userInfo<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="objective-c-3"><a href="#objective-c-3" class="header-anchor">#</a> Objective-C</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span> <span class="token operator">*</span><span class="token punctuation">)</span>application didRegisterForRemoteNotificationsWithDeviceToken<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSData</span> <span class="token operator">*</span><span class="token punctuation">)</span>deviceToken
<span class="token punctuation">{</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>application<span class="token punctuation">.</span>applicationState <span class="token operator">==</span> <span class="token builtin">UIApplicationStateInactive</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;Inactive - the user has tapped in the notification when app was closed or in background&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//do some tasks</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span> handelPushNotification<span class="token punctuation">:</span>userInfo<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>application<span class="token punctuation">.</span>applicationState <span class="token operator">==</span> <span class="token builtin">UIApplicationStateBackground</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;application Background - notification has arrived when app was in background&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span> handelPushNotification<span class="token punctuation">:</span>userInfo<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;application Active - notication has arrived while app was opened&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Show an in-app banner</span>
    <span class="token comment">//do tasks</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Failure scenario calls:</p> <h3 id="swift-4"><a href="#swift-4" class="header-anchor">#</a> Swift</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didFailToRegisterForRemoteNotificationsWithError error<span class="token punctuation">:</span> <span class="token builtin">NSError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="objective-c-4"><a href="#objective-c-4" class="header-anchor">#</a> Objective-C</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span><span class="token operator">*</span><span class="token punctuation">)</span>application didFailToRegisterForRemoteNotificationsWithError<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSError</span><span class="token operator">*</span><span class="token punctuation">)</span>error

</code></pre></div><blockquote></blockquote> <h3>Note</h3>
If none of the above methods are getting called, your device is not able to create reliable connection with APNs server, which might be because of internet access problems.
<h2 id="registering-app-id-for-use-with-push-notifications"><a href="#registering-app-id-for-use-with-push-notifications" class="header-anchor">#</a> Registering App ID for use with Push Notifications</h2> <blockquote></blockquote> <h3>Things you need</h3> <ul>
- A paid Apple Developer Program Membership
- A valid App ID and identifier for you app (like com.example.MyApp) which is not used before anywhere
- Access to [developer.apple.com](http://developer.apple.com) and Member Center
- An iOS Device to test (as Push Notifications don't work on Simulator)
</ul> <h3 id="enabling-the-apns-access-for-app-id-in-apple-developer-center"><a href="#enabling-the-apns-access-for-app-id-in-apple-developer-center" class="header-anchor">#</a> Enabling the APNs access for App ID in Apple Developer Center</h3> <p>1- Log in to developer.apple.com Member Center (the Account link on the home page)</p> <p><a href="http://i.stack.imgur.com/GrtB7.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/GrtB7.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>2- Go to &quot;Certificates&quot;</p> <p>3- Select &quot;App ID&quot; from left panel</p> <p><a href="http://i.stack.imgur.com/XJ2mp.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/XJ2mp.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>4- Click on &quot;+&quot; on top right</p> <p><a href="http://i.stack.imgur.com/8P4ql.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/8P4ql.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>5- Add App ID with Push Notifications option checked</p> <p>6- Click on created App ID and select Edit</p> <p>7- Click Configure in Push Notifications panel</p> <p>8- Open Keychain Access app in your Mac</p> <p>9- From Keychain Access menu, click Certificate Assistant -&gt; Request a Certificate from a Certificate Authority</p> <p>10- Enter your mail in the first text field</p> <p>11- Enter your name in the second text field</p> <p><a href="http://i.stack.imgur.com/0zxFu.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/0zxFu.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>12- Leave CA Email Address empty</p> <p>13- Select Saved to disk rather than Emailed to the CA</p> <p>14- Click Continue and upload the generated file</p> <p>15- Download the generated file by Apple and open it while Keychain Access is open</p> <h3 id="enabling-the-apns-access-in-xcode"><a href="#enabling-the-apns-access-in-xcode" class="header-anchor">#</a> Enabling the APNs access in Xcode</h3> <p>1- Select your project</p> <p>2- Open Capabilities tab</p> <p>3- Find Push Notifications and turn it on</p> <p>4-Find Background Modes and turn it on and check Remote Notifications</p> <h2 id="testing-push-notifications"><a href="#testing-push-notifications" class="header-anchor">#</a> Testing push notifications</h2> <p>It is always a good practice to test how push notifications work even before you have your server side ready for them, just to make sure that everything is set up correctly on your side. It is quite easy to send yourself a push notification using a following PHP script.</p> <ol><li>Save the script as a file (send_push.php for example) in the same folder as your certificate (development or production)</li> <li>Edit it to put your device token, password from the certificate</li> <li>Choose the correct path for opening a connection, dev_path or prod_path (this is where 'Open a connection to the APNS server' happens in the script)</li> <li>cd to the folder in Terminal and run command 'php send_push'</li> <li>Receive the notification on your device</li></ol> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">&lt;</span><span class="token operator">?</span>php

<span class="token comment">// Put your device token here (without spaces):   </span>
$deviceToken <span class="token operator">=</span> <span class="token string">'20128697f872d7d39e48c4a61f50cb11d77789b39e6fc6b4cd7ec80582ed5229'</span><span class="token punctuation">;</span>
<span class="token comment">// Put your final pem cert name here. it is supposed to be in the same folder as this script</span>
$cert_name <span class="token operator">=</span> <span class="token string">'final_cert.pem'</span><span class="token punctuation">;</span>
<span class="token comment">// Put your private key's passphrase here:</span>
$passphrase <span class="token operator">=</span> <span class="token string">'1234'</span><span class="token punctuation">;</span>

<span class="token comment">// sample point</span>
$alert <span class="token operator">=</span> <span class="token string">'Hello world!'</span><span class="token punctuation">;</span>
$event <span class="token operator">=</span> <span class="token string">'new_incoming_message'</span><span class="token punctuation">;</span>
    
<span class="token comment">// You can choose either of the paths, depending on what kind of certificate you are using</span>
$dev_path <span class="token operator">=</span> <span class="token string">'ssl://gateway.sandbox.push.apple.com:2195'</span><span class="token punctuation">;</span>
$prod_path <span class="token operator">=</span> <span class="token string">'ssl://gateway.push.apple.com:2195'</span><span class="token punctuation">;</span>
    
<span class="token comment">////////////////////////////////////////////////////////////////////////////////</span>

$ctx <span class="token operator">=</span> <span class="token function">stream_context_create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">stream_context_set_option</span><span class="token punctuation">(</span>$ctx<span class="token punctuation">,</span> <span class="token string">'ssl'</span><span class="token punctuation">,</span> <span class="token string">'local_cert'</span><span class="token punctuation">,</span> $cert_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">stream_context_set_option</span><span class="token punctuation">(</span>$ctx<span class="token punctuation">,</span> <span class="token string">'ssl'</span><span class="token punctuation">,</span> <span class="token string">'passphrase'</span><span class="token punctuation">,</span> $passphrase<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Open a connection to the APNS server</span>
$fp <span class="token operator">=</span> <span class="token function">stream_socket_client</span><span class="token punctuation">(</span>
    $dev_path<span class="token punctuation">,</span> $err<span class="token punctuation">,</span>
    $errstr<span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token constant">STREAM_CLIENT_CONNECT</span><span class="token operator">|</span><span class="token constant">STREAM_CLIENT_PERSISTENT</span><span class="token punctuation">,</span> $ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>$fp<span class="token punctuation">)</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to connect: $err $errstr&quot;</span> <span class="token punctuation">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

echo <span class="token string">'Connected to APNS'</span> <span class="token punctuation">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>

<span class="token comment">// Create the payload body</span>
<span class="token comment">// it should be as short as possible</span>
<span class="token comment">// if the notification doesnt get delivered that is most likely</span>
<span class="token comment">// because the generated message is too long</span>
$body<span class="token punctuation">[</span><span class="token string">'aps'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span>
                     <span class="token string">'alert'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> $alert<span class="token punctuation">,</span>
                     <span class="token string">'sound'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'default'</span><span class="token punctuation">,</span>
                     <span class="token string">'event'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> $event
                     <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Encode the payload as JSON</span>
$payload <span class="token operator">=</span> <span class="token function">json_encode</span><span class="token punctuation">(</span>$body<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Build the binary notification</span>
$msg <span class="token operator">=</span> <span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token function">pack</span><span class="token punctuation">(</span><span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token function">pack</span><span class="token punctuation">(</span><span class="token string">'H*'</span><span class="token punctuation">,</span> $deviceToken<span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token function">pack</span><span class="token punctuation">(</span><span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>$payload<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> $payload<span class="token punctuation">;</span>

<span class="token comment">// Send it to the server</span>
$result <span class="token operator">=</span> <span class="token function">fwrite</span><span class="token punctuation">(</span>$fp<span class="token punctuation">,</span> $msg<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>$msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>$result<span class="token punctuation">)</span>
    echo <span class="token string">'Message not delivered'</span> <span class="token punctuation">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    echo <span class="token string">'Message successfully delivered'</span> <span class="token punctuation">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>

<span class="token comment">// Close the connection to the server</span>
<span class="token function">fclose</span><span class="token punctuation">(</span>$fp<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="checking-if-your-app-is-already-registered-for-push-notification"><a href="#checking-if-your-app-is-already-registered-for-push-notification" class="header-anchor">#</a> Checking if your app is already registered for Push Notification</h2> <h3 id="swift-5"><a href="#swift-5" class="header-anchor">#</a> Swift</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> isPushEnabled <span class="token operator">=</span> <span class="token builtin">UIApplication</span><span class="token punctuation">.</span><span class="token function">sharedApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isRegisteredForRemoteNotifications</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="generating-a-pem-certificate-from-your-cer-file-to-pass-on-to-the-server-developer"><a href="#generating-a-pem-certificate-from-your-cer-file-to-pass-on-to-the-server-developer" class="header-anchor">#</a> Generating a .pem certificate from your .cer file, to pass on to the server developer</h2> <li>
Save aps.cer to a folder
</li> <li>
Open &quot;Keychain access&quot; and export the key that is under that certificate to a .p12 file (call it key.p12). To do that right click on it and choose Export. Save it to the same folder as step 1. On export you will be prompted for a password. Make something up and memorize it.
[<img src="http://i.stack.imgur.com/tedc5.png" alt="Exporting">](http://i.stack.imgur.com/tedc5.png)
</li> <li>
cd to that folder in Terminal and execute the following commands:
</li> <li>
Convert .cer to a .pem certificate
</li> <div class="language-swift extra-class"><pre class="language-swift"><code>openssl x509 <span class="token operator">-</span><span class="token keyword">in</span> aps<span class="token punctuation">.</span>cer <span class="token operator">-</span>inform der <span class="token operator">-</span>out aps<span class="token punctuation">.</span>pem    

</code></pre></div><ol><li>Convert your key to .pem format. To open the key, enter the password you exported it with from the keychain, in step 2. Then, enter another password that will protect the exported file. You will be prompted to enter it twice for confirmation.</li></ol> <div class="language-swift extra-class"><pre class="language-swift"><code>openssl pkcs12 <span class="token operator">-</span>nocerts <span class="token operator">-</span>out key<span class="token punctuation">.</span>pem <span class="token operator">-</span><span class="token keyword">in</span> key<span class="token punctuation">.</span>p12

</code></pre></div><ol><li>Merge the files into one final file</li></ol> <div class="language-swift extra-class"><pre class="language-swift"><code>cat key<span class="token punctuation">.</span>pem aps<span class="token punctuation">.</span>pem <span class="token operator">&gt;</span> final_cert<span class="token punctuation">.</span>pem

</code></pre></div><ol><li>The final_cert.pem is the final result. Pass it on to server developers with the password from step 5, so that they will be able to use the protected certificate.</li></ol> <h2 id="unregistering-from-push-notifications"><a href="#unregistering-from-push-notifications" class="header-anchor">#</a> Unregistering From Push Notifications</h2> <p>To unregister from Remote Notifications programatically you can use</p> <h3 id="objective-c-5"><a href="#objective-c-5" class="header-anchor">#</a> Objective-C</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span> unregisterForRemoteNotifications<span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="swift-6"><a href="#swift-6" class="header-anchor">#</a> Swift</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token builtin">UIApplication</span><span class="token punctuation">.</span><span class="token function">sharedApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unregisterForRemoteNotifications</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>this is similar to going into the setting of your phone and manually switching off Notifications for the application.</p> <p><strong>NOTE: There may be rare cases where you would need this(eg: when your app no longer supports push notifications)</strong></p> <p>If you just want to allow the user to temporarily disable Notifications. You should implement a method to remove device token in the database on your server.
else if you only disable Notification locally on your device your server will still send messages.</p> <h2 id="setting-the-application-icon-badge-number"><a href="#setting-the-application-icon-badge-number" class="header-anchor">#</a> Setting the application icon badge number</h2> <p>Use the following piece of code to set the badge number from within your application (suppose <code>someNumber</code> has been declared before):</p> <p><strong>Objective-C</strong></p> <p><code>[UIApplication sharedApplication].applicationIconBadgeNumber = someNumber;</code></p> <p><strong>Swift</strong></p> <p><code>UIApplication.shared.applicationIconBadgeNumber = someNumber</code></p> <p>In order to <strong>remove</strong> the badge completely, just set <code>someNumber = 0</code>.</p> <h2 id="registering-for-non-interactive-push-notification"><a href="#registering-for-non-interactive-push-notification" class="header-anchor">#</a> Registering for (Non Interactive) Push Notification</h2> <p>The logic of registering for push notification is recommended to be added in <code>AppDelegate.swift</code> as the callback functions (success, failure) will be called their. To register just do the following:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> application <span class="token operator">=</span> <span class="token builtin">UIApplication</span><span class="token punctuation">.</span><span class="token function">sharedApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> settings <span class="token operator">=</span> <span class="token function">UIUserNotificationSettings</span><span class="token punctuation">(</span>forTypes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token builtin">Alert</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token builtin">Badge</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token builtin">Sound</span><span class="token punctuation">]</span><span class="token punctuation">,</span> categories<span class="token punctuation">:</span> <span class="token constant">nil</span><span class="token punctuation">)</span>
application<span class="token punctuation">.</span><span class="token function">registerUserNotificationSettings</span><span class="token punctuation">(</span>settings<span class="token punctuation">)</span>

</code></pre></div><p>Then the callback function <code>didRegisterUserNotificationSettings</code> will be called and in that case you just trigger the register like this:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didRegisterUserNotificationSettings notificationSettings<span class="token punctuation">:</span> <span class="token builtin">UIUserNotificationSettings</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    application<span class="token punctuation">.</span><span class="token function">registerForRemoteNotifications</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>And in that case and system alert will be shown asking for persmission to receive push notification. One of the following callback functions will be called:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didRegisterForRemoteNotificationsWithDeviceToken deviceToken<span class="token punctuation">:</span> <span class="token builtin">NSData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tokenChars <span class="token operator">=</span> <span class="token builtin">UnsafePointer</span><span class="token operator">&lt;</span><span class="token builtin">CChar</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>deviceToken<span class="token punctuation">.</span>bytes<span class="token punctuation">)</span>
    <span class="token keyword">var</span> tokenString <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
    
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>deviceToken<span class="token punctuation">.</span>length <span class="token punctuation">{</span>
        tokenString <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>format<span class="token punctuation">:</span> <span class="token string">&quot;%02.2hhx&quot;</span><span class="token punctuation">,</span> arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span>tokenChars<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Push token: <span class="token interpolation"><span class="token delimiter variable">\(</span>tokenString<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didFailToRegisterForRemoteNotificationsWithError error<span class="token punctuation">:</span> <span class="token builtin">NSError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;didFailToRegisterForRemoteNotificationsWithError: <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
            
<span class="token punctuation">}</span>

</code></pre></div><p>In very rare cases, neither success or failure callback functions are called. This happens when you have internet connection problems or the APNS Sandbox is down. The system do an API call to APNS to do some verification, failing to do so will lead to none of the two callbacks functions will be called. Visit <a href="https://developer.apple.com/system-status/" target="_blank" rel="noopener noreferrer">Apple system status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to make sure its fine.</p> <h2 id="handling-push-notification"><a href="#handling-push-notification" class="header-anchor">#</a> Handling Push Notification</h2> <p>Once user clicks on a push notification, the following callback function will be called. You can parse the JSON to get any specific info sent from backend that will helps you in deep linking:</p> <blockquote></blockquote> <p>Swift</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">application</span><span class="token punctuation">(</span>application<span class="token punctuation">:</span> <span class="token builtin">UIApplication</span><span class="token punctuation">,</span> didReceiveRemoteNotification userInfo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">NSObject</span> <span class="token punctuation">:</span> <span class="token builtin">AnyObject</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Received notification: <span class="token interpolation"><span class="token delimiter variable">\(</span>userInfo<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote></blockquote> <p>Objective C</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span> <span class="token operator">*</span><span class="token punctuation">)</span>application didReceiveRemoteNotification<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token builtin">NSDictionary</span> <span class="token operator">*</span><span class="token punctuation">)</span>userInfo
<span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;Received notification: %@&quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote></blockquote> <p>iOS 10</p> <div class="language-swift extra-class"><pre class="language-swift"><code>#define <span class="token function">SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>  <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIDevice</span> currentDevice<span class="token punctuation">]</span> systemVersion<span class="token punctuation">]</span> compare<span class="token punctuation">:</span>v options<span class="token punctuation">:</span><span class="token builtin">NSNumericSearch</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token builtin">NSOrderedAscending</span><span class="token punctuation">)</span>

<span class="token operator">-</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span> application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span> <span class="token operator">*</span><span class="token punctuation">)</span>application didReceiveRemoteNotification<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span> <span class="token operator">*</span><span class="token punctuation">)</span>userInfo fetchCompletionHandler<span class="token punctuation">:</span><span class="token punctuation">(</span>void                              <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">UIBackgroundFetchResult</span><span class="token punctuation">)</span><span class="token punctuation">)</span>completionHandler
<span class="token punctuation">{</span>
    <span class="token comment">// iOS 10 will handle notifications through other methods</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;Received notification: %@&quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO</span><span class="token punctuation">(</span> @<span class="token string">&quot;10.0&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;iOS version &gt;= 10. Let NotificationCenter handle this one.&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// set a member variable to tell the new delegate that this is background</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;HANDLE PUSH, didReceiveRemoteNotification: %@&quot;</span><span class="token punctuation">,</span> userInfo <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// custom code to handle notification content</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span><span class="token punctuation">.</span>applicationState <span class="token operator">==</span> <span class="token builtin">UIApplicationStateInactive</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
       <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;INACTIVE&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">completionHandler</span><span class="token punctuation">(</span> <span class="token builtin">UIBackgroundFetchResultNewData</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span><span class="token punctuation">.</span>applicationState <span class="token operator">==</span> <span class="token builtin">UIApplicationStateBackground</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{</span>  
       <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;BACKGROUND&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token function">completionHandler</span><span class="token punctuation">(</span> <span class="token builtin">UIBackgroundFetchResultNewData</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
   <span class="token punctuation">}</span>  
   <span class="token keyword">else</span>  
   <span class="token punctuation">{</span>  
       <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;FOREGROUND&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token function">completionHandler</span><span class="token punctuation">(</span> <span class="token builtin">UIBackgroundFetchResultNewData</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
   <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>userNotificationCenter<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UNUserNotificationCenter</span> <span class="token operator">*</span><span class="token punctuation">)</span>center
   willPresentNotification<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UNNotification</span> <span class="token operator">*</span><span class="token punctuation">)</span>notification
     withCompletionHandler<span class="token punctuation">:</span><span class="token punctuation">(</span>void <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">UNNotificationPresentationOptions</span> options<span class="token punctuation">)</span><span class="token punctuation">)</span>completionHandler
<span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;Handle push from foreground&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// custom code to handle push while app is in the foreground</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;%@&quot;</span><span class="token punctuation">,</span> notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>content<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>userNotificationCenter<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UNUserNotificationCenter</span> <span class="token operator">*</span><span class="token punctuation">)</span>center didReceiveNotificationResponse<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UNNotificationResponse</span> <span class="token operator">*</span><span class="token punctuation">)</span>response
     withCompletionHandler<span class="token punctuation">:</span><span class="token punctuation">(</span>void <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>completionHandler
<span class="token punctuation">{</span>

    <span class="token function">NSLog</span><span class="token punctuation">(</span> @<span class="token string">&quot;Handle push from background or closed&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// if you set a member variable in didReceiveRemoteNotification, you  will know if this is from closed or background</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;%@&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>content<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>UIUserNotificationSettings.types: UIUserNotificationType // A bitmask of the notification types that your app is allowed to use</li> <li>UIUserNotificationSettings.categories: Set // The apps registered groups of actions</li></ul> <h4 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h4> <table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>userInfo</td> <td>A dictionary that contains remote notification info, potentially including a badge number for the app icon, alert sound, alert message, a notification identifier, and custom data.</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/ios/push-notifications.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/ios/ctcallcenter.html" class="prev">
        CTCallCenter
      </a></span> <span class="next"><a href="/ios/extension-for-rich-push-notification-ios-10.html">
        Extension for rich Push Notification - iOS 10.
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/1432.f2042c6e.js" defer></script>
  </body>
</html>
