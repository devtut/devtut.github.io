<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ruby on Rails - Routing</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Resource Routing (Basic), Constraints, Scoping routes, Concerns, Root route, Additional RESTful actions, Split routes into multiple files, Member and Collection Routes, Redirection, Mount another application, Nested Routes, Scope available locales, Redirects and Wildcard Routes, URL params with a period">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Ruby on Rails - Routing">
    <meta property="og:description" content="Resource Routing (Basic), Constraints, Scoping routes, Concerns, Root route, Additional RESTful actions, Split routes into multiple files, Member and Collection Routes, Redirection, Mount another application, Nested Routes, Scope available locales, Redirects and Wildcard Routes, URL params with a period">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/rubyonrails/routing.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Ruby on Rails - Routing">
    <meta name="twitter:description" content="Resource Routing (Basic), Constraints, Scoping routes, Concerns, Root route, Additional RESTful actions, Split routes into multiple files, Member and Collection Routes, Redirection, Mount another application, Nested Routes, Scope available locales, Redirects and Wildcard Routes, URL params with a period">
    <meta name="twitter:url" content="/rubyonrails/routing.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/3180.8f117580.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Ruby on Rails</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rubyonrails/" class="sidebar-link">Disclaimer</a></li><li><a href="/rubyonrails/getting-started-with-ruby-on-rails.html" class="sidebar-link">Getting started with Ruby on Rails</a></li><li><a href="/rubyonrails/routing.html" class="active sidebar-link">Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#resource-routing-basic" class="sidebar-link">Resource Routing (Basic)</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#constraints" class="sidebar-link">Constraints</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#scoping-routes" class="sidebar-link">Scoping routes</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#concerns" class="sidebar-link">Concerns</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#root-route" class="sidebar-link">Root route</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#additional-restful-actions" class="sidebar-link">Additional RESTful actions</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#split-routes-into-multiple-files" class="sidebar-link">Split routes into multiple files</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#member-and-collection-routes" class="sidebar-link">Member and Collection Routes</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#redirection" class="sidebar-link">Redirection</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#mount-another-application" class="sidebar-link">Mount another application</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#nested-routes" class="sidebar-link">Nested Routes</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#scope-available-locales" class="sidebar-link">Scope available locales</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#redirects-and-wildcard-routes" class="sidebar-link">Redirects and Wildcard Routes</a></li><li class="sidebar-sub-header"><a href="/rubyonrails/routing.html#url-params-with-a-period" class="sidebar-link">URL params with a period</a></li></ul></li><li><a href="/rubyonrails/activerecord.html" class="sidebar-link">ActiveRecord</a></li><li><a href="/rubyonrails/views.html" class="sidebar-link">Views</a></li><li><a href="/rubyonrails/activerecord-migrations.html" class="sidebar-link">ActiveRecord Migrations</a></li><li><a href="/rubyonrails/rails-best-practices.html" class="sidebar-link">Rails Best Practices</a></li><li><a href="/rubyonrails/naming-conventions.html" class="sidebar-link">Naming Conventions</a></li><li><a href="/rubyonrails/actioncable.html" class="sidebar-link">ActionCable</a></li><li><a href="/rubyonrails/activemodel.html" class="sidebar-link">ActiveModel</a></li><li><a href="/rubyonrails/user-authentication-in-rails.html" class="sidebar-link">User Authentication in Rails</a></li><li><a href="/rubyonrails/activerecord-associations.html" class="sidebar-link">ActiveRecord Associations</a></li><li><a href="/rubyonrails/activerecord-validations.html" class="sidebar-link">ActiveRecord Validations</a></li><li><a href="/rubyonrails/activerecord-query-interface.html" class="sidebar-link">ActiveRecord Query Interface</a></li><li><a href="/rubyonrails/actionmailer.html" class="sidebar-link">ActionMailer</a></li><li><a href="/rubyonrails/rails-generate-commands.html" class="sidebar-link">Rails generate commands</a></li><li><a href="/rubyonrails/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/rubyonrails/i18n-internationalization.html" class="sidebar-link">I18n - Internationalization</a></li><li><a href="/rubyonrails/using-googlemaps-with-rails.html" class="sidebar-link">Using GoogleMaps with Rails</a></li><li><a href="/rubyonrails/file-uploads.html" class="sidebar-link">File Uploads</a></li><li><a href="/rubyonrails/caching.html" class="sidebar-link">Caching</a></li><li><a href="/rubyonrails/actioncontroller.html" class="sidebar-link">ActionController</a></li><li><a href="/rubyonrails/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/rubyonrails/safe-constantize.html" class="sidebar-link">Safe Constantize</a></li><li><a href="/rubyonrails/rails-5.html" class="sidebar-link">Rails 5</a></li><li><a href="/rubyonrails/authorization-with-cancan.html" class="sidebar-link">Authorization with CanCan</a></li><li><a href="/rubyonrails/mongoid.html" class="sidebar-link">Mongoid</a></li><li><a href="/rubyonrails/gems.html" class="sidebar-link">Gems</a></li><li><a href="/rubyonrails/change-default-timezone.html" class="sidebar-link">Change default timezone</a></li><li><a href="/rubyonrails/asset-pipeline.html" class="sidebar-link">Asset Pipeline</a></li><li><a href="/rubyonrails/upgrading-rails.html" class="sidebar-link">Upgrading Rails</a></li><li><a href="/rubyonrails/activerecord-locking.html" class="sidebar-link">ActiveRecord Locking</a></li><li><a href="/rubyonrails/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/rubyonrails/configure-angular-with-rails.html" class="sidebar-link">Configure Angular with Rails</a></li><li><a href="/rubyonrails/rails-logger.html" class="sidebar-link">Rails logger</a></li><li><a href="/rubyonrails/prawn-pdf.html" class="sidebar-link">Prawn PDF</a></li><li><a href="/rubyonrails/rails-api.html" class="sidebar-link">Rails API</a></li><li><a href="/rubyonrails/deploying-a-rails-app-on-heroku.html" class="sidebar-link">Deploying a Rails app on Heroku</a></li><li><a href="/rubyonrails/activesupport.html" class="sidebar-link">ActiveSupport</a></li><li><a href="/rubyonrails/form-helpers.html" class="sidebar-link">Form Helpers</a></li><li><a href="/rubyonrails/activerecord-transactions.html" class="sidebar-link">ActiveRecord Transactions</a></li><li><a href="/rubyonrails/rspec-and-ruby-on-rails.html" class="sidebar-link">RSpec and Ruby on Rails</a></li><li><a href="/rubyonrails/decorator-pattern.html" class="sidebar-link">Decorator pattern</a></li><li><a href="/rubyonrails/elasticsearch.html" class="sidebar-link">Elasticsearch</a></li><li><a href="/rubyonrails/react-with-rails-using-react-rails-gem.html" class="sidebar-link">React with Rails using react-rails gem</a></li><li><a href="/rubyonrails/rails-cookbook-advanced-rails-recipes-learnings-and-coding-techniques.html" class="sidebar-link">Rails Cookbook - Advanced rails recipes/learnings and coding techniques</a></li><li><a href="/rubyonrails/multipurpose-activerecord-columns.html" class="sidebar-link">Multipurpose ActiveRecord columns</a></li><li><a href="/rubyonrails/class-organization.html" class="sidebar-link">Class Organization</a></li><li><a href="/rubyonrails/shallow-routing.html" class="sidebar-link">Shallow Routing</a></li><li><a href="/rubyonrails/model-states-aasm.html" class="sidebar-link">Model states: AASM</a></li><li><a href="/rubyonrails/rails-5-api-authetication.html" class="sidebar-link">Rails 5 API Authetication</a></li><li><a href="/rubyonrails/testing-rails-applications.html" class="sidebar-link">Testing Rails Applications</a></li><li><a href="/rubyonrails/active-jobs.html" class="sidebar-link">Active Jobs</a></li><li><a href="/rubyonrails/rails-frameworks-over-the-years.html" class="sidebar-link">Rails frameworks over the years</a></li><li><a href="/rubyonrails/nested-form-in-ruby-on-rails.html" class="sidebar-link">Nested form in Ruby on Rails</a></li><li><a href="/rubyonrails/factory-girl.html" class="sidebar-link">Factory Girl</a></li><li><a href="/rubyonrails/import-whole-csv-files-from-specific-folder.html" class="sidebar-link">Import whole CSV files from specific folder</a></li><li><a href="/rubyonrails/tools-for-ruby-on-rails-code-optimization-and-cleanup.html" class="sidebar-link">Tools for Ruby on Rails code optimization and cleanup</a></li><li><a href="/rubyonrails/activejob.html" class="sidebar-link">ActiveJob</a></li><li><a href="/rubyonrails/active-model-serializers.html" class="sidebar-link">Active Model Serializers</a></li><li><a href="/rubyonrails/rails-engine-modular-rails.html" class="sidebar-link">Rails Engine -  Modular Rails</a></li><li><a href="/rubyonrails/single-table-inheritance.html" class="sidebar-link">Single Table Inheritance</a></li><li><a href="/rubyonrails/activerecord-transactions.html" class="sidebar-link">ActiveRecord Transactions</a></li><li><a href="/rubyonrails/turbolinks.html" class="sidebar-link">Turbolinks</a></li><li><a href="/rubyonrails/friendly-id.html" class="sidebar-link">Friendly ID</a></li><li><a href="/rubyonrails/securely-storing-authentication-keys.html" class="sidebar-link">Securely storing authentication keys</a></li><li><a href="/rubyonrails/authenticate-api-using-devise.html" class="sidebar-link">Authenticate Api using Devise</a></li><li><a href="/rubyonrails/integrating-react-js-with-rails-using-hyperloop.html" class="sidebar-link">Integrating React.js with Rails Using Hyperloop</a></li><li><a href="/rubyonrails/change-a-default-rails-application-enviornment.html" class="sidebar-link">Change a default Rails application enviornment</a></li><li><a href="/rubyonrails/rails-engines.html" class="sidebar-link">Rails -Engines</a></li><li><a href="/rubyonrails/adding-an-amazon-rds-to-your-rails-application.html" class="sidebar-link">Adding an Amazon RDS to your rails application</a></li><li><a href="/rubyonrails/payment-feature-in-rails.html" class="sidebar-link">Payment feature in rails</a></li><li><a href="/rubyonrails/rails-on-docker.html" class="sidebar-link">Rails on docker</a></li><li><a href="/rubyonrails/reserved-words.html" class="sidebar-link">Reserved Words</a></li><li><a href="/rubyonrails/add-admin-panel.html" class="sidebar-link">Add Admin Panel</a></li><li><a href="/rubyonrails/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="routing"><a href="#routing" class="header-anchor">#</a> Routing</h1> <h2 id="resource-routing-basic"><a href="#resource-routing-basic" class="header-anchor">#</a> Resource Routing (Basic)</h2> <p>Routes are defined in <code>config/routes.rb</code>. They are often defined as a group of related routes, using the <a href="http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources" target="_blank" rel="noopener noreferrer"><code>resources</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resource" target="_blank" rel="noopener noreferrer"><code>resource</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> methods.</p> <p><code>resources :users</code> creates the following seven routes, all mapping to actions of <code>UsersController</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get       <span class="token string">'/users'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'users#index'</span>
post      <span class="token string">'/users'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'users#create'</span>
get       <span class="token string">'/users/new'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'users#new'</span>
get       <span class="token string">'/users/:id/edit'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'users#edit'</span>
get       <span class="token string">'/users/:id'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'users#show'</span>
patch<span class="token operator">/</span>put <span class="token string">'/users/:id'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'users#update'</span>
delete    <span class="token string">'/users/:id'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'users#destroy'</span>

</code></pre></div><p>Action names are shown after the <code>#</code> in the <code>to</code> parameter above. Methods with those same names must be defined in <code>app/controllers/users_controller.rb</code> as follows:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">UsersController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">index</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>
  <span class="token keyword">end</span>

  <span class="token comment"># continue with all the other methods…</span>
<span class="token keyword">end</span>

</code></pre></div><p>You can limit the actions that gets generated with <code>only</code> or <code>except</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resources <span class="token symbol">:users</span><span class="token punctuation">,</span> only<span class="token punctuation">:</span>   <span class="token punctuation">[</span><span class="token symbol">:show</span><span class="token punctuation">]</span>
resources <span class="token symbol">:users</span><span class="token punctuation">,</span> except<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token symbol">:show</span><span class="token punctuation">,</span> <span class="token symbol">:index</span><span class="token punctuation">]</span>

</code></pre></div><p>You can view all the routes of your application at any given time by running:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>$ rake routes

</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>$ rake routes
<span class="token comment"># OR</span>
$ rails routes

</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>users     <span class="token constant">GET</span>    <span class="token operator">/</span>users<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>          users<span class="token comment">#index</span>
          <span class="token constant">POST</span>   <span class="token operator">/</span>users<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>          users<span class="token comment">#create</span>
new_user  <span class="token constant">GET</span>    <span class="token operator">/</span>users<span class="token operator">/</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>      users<span class="token comment">#new</span>
edit_user <span class="token constant">GET</span>    <span class="token operator">/</span>users<span class="token operator">/</span><span class="token symbol">:id</span><span class="token operator">/</span>edit<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span> users<span class="token comment">#edit</span>
user      <span class="token constant">GET</span>    <span class="token operator">/</span>users<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>      users<span class="token comment">#show</span>
          <span class="token constant">PATCH</span>  <span class="token operator">/</span>users<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>      users<span class="token comment">#update</span>
          <span class="token constant">PUT</span>    <span class="token operator">/</span>users<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>      users<span class="token comment">#update</span>
          <span class="token constant">DELETE</span> <span class="token operator">/</span>users<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>      users<span class="token comment">#destroy</span>

</code></pre></div><p>To see only the routes that map to a particular controller:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>$ rake routes <span class="token operator">-</span>c static_pages
static_pages_home    <span class="token constant">GET</span>    <span class="token operator">/</span>static_pages<span class="token operator">/</span>home<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>    static_pages<span class="token comment">#home</span>
static_pages_help    <span class="token constant">GET</span>    <span class="token operator">/</span>static_pages<span class="token operator">/</span>help<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>    static_pages<span class="token comment">#help</span>

</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>$ rake routes <span class="token operator">-</span>c static_pages
static_pages_home    <span class="token constant">GET</span>    <span class="token operator">/</span>static_pages<span class="token operator">/</span>home<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>    static_pages<span class="token comment">#home</span>
static_pages_help    <span class="token constant">GET</span>    <span class="token operator">/</span>static_pages<span class="token operator">/</span>help<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>    static_pages<span class="token comment">#help</span>

<span class="token comment"># OR</span>

$ rails routes <span class="token operator">-</span>c static_pages
static_pages_home    <span class="token constant">GET</span>    <span class="token operator">/</span>static_pages<span class="token operator">/</span>home<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>    static_pages<span class="token comment">#home</span>
static_pages_help    <span class="token constant">GET</span>    <span class="token operator">/</span>static_pages<span class="token operator">/</span>help<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>    static_pages<span class="token comment">#help</span>

</code></pre></div><p>You can search through routes using the <code>-g</code> option. This shows any route that partially matches the helper method name, the URL path or the HTTP verb:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>$ rake routes <span class="token operator">-</span>g new_user     <span class="token comment"># Matches helper method</span>
$ rake routes <span class="token operator">-</span>g <span class="token constant">POST</span>         <span class="token comment"># Matches HTTP Verb POST </span>

</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>$ rake routes <span class="token operator">-</span>g new_user     <span class="token comment"># Matches helper method</span>
$ rake routes <span class="token operator">-</span>g <span class="token constant">POST</span>         <span class="token comment"># Matches HTTP Verb POST </span>
<span class="token comment"># OR</span>
$ rails routes <span class="token operator">-</span>g new_user    <span class="token comment"># Matches helper method</span>
$ rails routes <span class="token operator">-</span>g <span class="token constant">POST</span>        <span class="token comment"># Matches HTTP Verb POST </span>

</code></pre></div><p>Additionally, when running <code>rails</code> server in development mode, you can access a web page that shows all your routes with a search filter, matched in priority from top to bottom,  at <code>&lt;hostname&gt;/rails/info/routes</code>. It will look like this:</p> <table><thead><tr><th>Helper</th> <th>HTTP Verb</th> <th>Path</th> <th>Controller#Action</th></tr></thead> <tbody><tr><td>Path / Url</td> <td></td> <td>[ Path Match ]</td> <td></td></tr> <tr><td>users_path</td> <td>GET</td> <td>/users(.:format)</td> <td>users#index</td></tr> <tr><td></td> <td>POST</td> <td>/users(.:format)</td> <td>users#create</td></tr> <tr><td>new_user_path</td> <td>GET</td> <td>/users/new(.:format)</td> <td>users#new</td></tr> <tr><td>edit_user_path</td> <td>GET</td> <td>/users/:id/edit(.:format)</td> <td>users#edit</td></tr> <tr><td>user_path</td> <td>GET</td> <td>/users/:id(.:format)</td> <td>users#show</td></tr> <tr><td></td> <td>PATCH</td> <td>/users/:id(.:format)</td> <td>users#update</td></tr> <tr><td></td> <td>PUT</td> <td>/users/:id(.:format)</td> <td>users#update</td></tr> <tr><td></td> <td>DELETE</td> <td>/users/:id(.:format)</td> <td>users#destroy</td></tr></tbody></table> <p>Routes can be declared available for only members (not collections) using the method <code>resource</code> instead of <code>resources</code> in <code>routes.rb</code>. With <code>resource</code>, an <code>index</code> route is not created by default, but only when explicitly asking for one like this:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resource <span class="token symbol">:orders</span><span class="token punctuation">,</span> only<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token symbol">:index</span><span class="token punctuation">,</span> <span class="token symbol">:create</span><span class="token punctuation">,</span> <span class="token symbol">:show</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="constraints"><a href="#constraints" class="header-anchor">#</a> Constraints</h2> <p>You can filter what routes are available using constraints.</p> <p>There are several ways to use constraints including:</p> <ul><li><a href="http://guides.rubyonrails.org/routing.html#segment-constraints" target="_blank" rel="noopener noreferrer">segment constraints<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,</li> <li><a href="http://guides.rubyonrails.org/routing.html#request-based-constraints" target="_blank" rel="noopener noreferrer">request based constraints<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://guides.rubyonrails.org/routing.html#advanced-constraints" target="_blank" rel="noopener noreferrer">advanced constraints<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>For example, a requested based constraint to only allow a specific IP address to access a route:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>constraints<span class="token punctuation">(</span>ip<span class="token punctuation">:</span> <span class="token regex">/127\.0\.0\.1$/</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
  get <span class="token string">'route'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">&quot;controller#action&quot;</span>
<span class="token keyword">end</span>

</code></pre></div><p><a href="http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html" target="_blank" rel="noopener noreferrer">See other similar examples ActionDispatch::Routing::Mapper::Scoping<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>If you want to do something more complex you can use more advanced constraints and create a class to wrap the logic:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># lib/api_version_constraint.rb</span>
<span class="token keyword">class</span> <span class="token class-name">ApiVersionConstraint</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span><span class="token punctuation">(</span>version<span class="token punctuation">:</span><span class="token punctuation">,</span> default<span class="token punctuation">:</span><span class="token punctuation">)</span>
    <span class="token variable">@version</span> <span class="token operator">=</span> version
    <span class="token variable">@default</span> <span class="token operator">=</span> default
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">version_header</span></span>
    <span class="token string">&quot;application/vnd.my-app.v<span class="token interpolation"><span class="token delimiter tag">#{</span><span class="token variable">@version</span><span class="token delimiter tag">}</span></span>&quot;</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">matches</span></span><span class="token operator">?</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
    <span class="token variable">@default</span> <span class="token operator">||</span> request<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&quot;Accept&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">include</span><span class="token operator">?</span><span class="token punctuation">(</span>version_header<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment"># config/routes.rb</span>
<span class="token keyword">require</span> <span class="token string">&quot;api_version_constraint&quot;</span>

<span class="token constant">Rails</span><span class="token punctuation">.</span>application<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>
  namespace <span class="token symbol">:v1</span><span class="token punctuation">,</span> constraints<span class="token punctuation">:</span> <span class="token constant">ApiVersionConstraint</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>version<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> default<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
    resources <span class="token symbol">:users</span> <span class="token comment"># Will route to app/controllers/v1/users_controller.rb</span>
  <span class="token keyword">end</span>

  namespace <span class="token symbol">:v2</span><span class="token punctuation">,</span> constraints<span class="token punctuation">:</span> <span class="token constant">ApiVersionConstraint</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>version<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
    resources <span class="token symbol">:users</span> <span class="token comment"># Will route to app/controllers/v2/users_controller.rb</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p><strong>One form, several submit buttons</strong></p> <p>You can also use the value of the submit tags of a form as a constraint to route to a different action. If you have a form with multiple submit buttons (eg &quot;preview&quot; and &quot;submit&quot;), you could capture this constraint directly in your <code>routes.rb</code>, instead of writing javascript to change the form destination URL. For example with the <a href="https://github.com/siliconsenthil/commit_param_routing" target="_blank" rel="noopener noreferrer">commit_param_routing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> gem you can take advantage of rails <code>submit_tag</code></p> <p>Rails <code>submit_tag</code> first parameter lets you change the value of your form commit parameter</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># app/views/orders/mass_order.html.erb</span>
<span class="token operator">&lt;</span><span class="token string">%= form_for(@orders, url: mass_create_order_path do |f| %&gt;
    &lt;!-- Big form here --&gt;
  &lt;%=</span> submit_tag <span class="token string">&quot;Preview&quot;</span> <span class="token string">%&gt;
  &lt;%= submit_tag &quot;Submit&quot; %&gt;</span>
  <span class="token comment"># =&gt; &lt;input name=&quot;commit&quot; type=&quot;submit&quot; value=&quot;Preview&quot; /&gt;</span>
  <span class="token comment"># =&gt; &lt;input name=&quot;commit&quot; type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">end</span> <span class="token operator">%</span><span class="token operator">&gt;</span>

<span class="token comment"># config/routes.rb</span>
resources <span class="token symbol">:orders</span> <span class="token keyword">do</span>
  <span class="token comment"># Both routes below describe the same POST URL, but route to different actions </span>
  post <span class="token string">'mass_order'</span><span class="token punctuation">,</span> on<span class="token punctuation">:</span> <span class="token symbol">:collection</span><span class="token punctuation">,</span> as<span class="token punctuation">:</span> <span class="token string">'mass_order'</span><span class="token punctuation">,</span>
    constraints<span class="token punctuation">:</span> <span class="token constant">CommitParamRouting</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string">'Submit'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token punctuation">:</span> <span class="token string">'mass_create'</span> <span class="token comment"># when the user presses &quot;submit&quot;</span>
  post <span class="token string">'mass_order'</span><span class="token punctuation">,</span> on<span class="token punctuation">:</span> <span class="token symbol">:collection</span><span class="token punctuation">,</span>
    constraints<span class="token punctuation">:</span> <span class="token constant">CommitParamRouting</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string">'Preview'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token punctuation">:</span> <span class="token string">'mass_create_preview'</span> <span class="token comment"># when the user presses &quot;preview&quot;</span>
  <span class="token comment"># Note the `as:` is defined only once, since the path helper is mass_create_order_path for the form url</span>
  <span class="token comment"># CommitParamRouting is just a class like ApiVersionContraint</span>
<span class="token keyword">end</span>

</code></pre></div><h2 id="scoping-routes"><a href="#scoping-routes" class="header-anchor">#</a> Scoping routes</h2> <p>Rails provides several ways to organize your routes.</p> <p><strong>Scope by URL</strong>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scope <span class="token string">'admin'</span> <span class="token keyword">do</span>
  get <span class="token string">'dashboard'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'administration#dashboard'</span>
  resources <span class="token string">'employees'</span>
<span class="token keyword">end</span>

</code></pre></div><p>This generates the following routes</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get       <span class="token string">'/admin/dashboard'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'administration#dashboard'</span>
post      <span class="token string">'/admin/employees'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'employees#create'</span>
get       <span class="token string">'/admin/employees/new'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'employees#new'</span>
get       <span class="token string">'/admin/employees/:id/edit'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'employees#edit'</span>
get       <span class="token string">'/admin/employees/:id'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'employees#show'</span>
patch<span class="token operator">/</span>put <span class="token string">'/admin/employees/:id'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'employees#update'</span>
delete    <span class="token string">'/admin/employees/:id'</span><span class="token punctuation">,</span>      to<span class="token punctuation">:</span> <span class="token string">'employees#destroy'</span>

</code></pre></div><p>It may make more sense, on the server side, to keep some views in a different subfolder, to separate admin views from user views.</p> <p><strong>Scope by module</strong></p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scope <span class="token keyword">module</span><span class="token punctuation">:</span> <span class="token symbol">:admin</span> <span class="token keyword">do</span>
  get <span class="token string">'dashboard'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'administration#dashboard'</span>
<span class="token keyword">end</span>

</code></pre></div><p><code>module</code> looks for the controller files under the subfolder of the given name</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get       <span class="token string">'/dashboard'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'admin/administration#dashboard'</span>

</code></pre></div><p>You can rename the path helpers prefix by adding an <code>as</code> parameter</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scope <span class="token string">'admin'</span><span class="token punctuation">,</span> as<span class="token punctuation">:</span> <span class="token symbol">:administration</span> <span class="token keyword">do</span>
  get <span class="token string">'dashboard'</span>
<span class="token keyword">end</span>

<span class="token comment"># =&gt; administration_dashboard_path</span>

</code></pre></div><p>Rails provides a convenient way to do all the above, using the <code>namespace</code> method. The following declarations are equivalent</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>namespace <span class="token symbol">:admin</span> <span class="token keyword">do</span>
<span class="token keyword">end</span>

scope <span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token keyword">module</span><span class="token punctuation">:</span> <span class="token symbol">:admin</span><span class="token punctuation">,</span> as<span class="token punctuation">:</span> <span class="token symbol">:admin</span>

</code></pre></div><p><strong>Scope by controller</strong></p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scope controller<span class="token punctuation">:</span> <span class="token symbol">:management</span> <span class="token keyword">do</span>
  get <span class="token string">'dashboard'</span>
  get <span class="token string">'performance'</span>
<span class="token keyword">end</span>

</code></pre></div><p>This generate these routes</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get       <span class="token string">'/dashboard'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'management#dashboard'</span>
get       <span class="token string">'/performance'</span><span class="token punctuation">,</span>        to<span class="token punctuation">:</span> <span class="token string">'management#performance'</span>

</code></pre></div><p><strong>Shallow Nesting</strong></p> <p>Resource routes accept a <code>:shallow</code> option that helps to shorten URLs where possible. Resources shouldn't be nested more than one level deep. One way to avoid this is by creating shallow routes. The goal is to leave off parent collection URL segments where they are not needed. The end result is that the only nested routes generated are for the <code>:index</code> , <code>:create</code> , and <code>:new</code> actions. The rest are kept in their own shallow URL context. There are two options for scope to custom shallow routes:</p> <li>
**:shallow_path**: Prefixes member paths with a specified parameter
<div class="language-ruby extra-class"><pre class="language-ruby"><code>scope shallow_path<span class="token punctuation">:</span> <span class="token string">&quot;sekret&quot;</span> <span class="token keyword">do</span>
  resources <span class="token symbol">:articles</span> <span class="token keyword">do</span>
    resources <span class="token symbol">:comments</span><span class="token punctuation">,</span> shallow<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div></li> <li>
**:shallow_prefix**: Add specified parameters to named helpers
<div class="language-ruby extra-class"><pre class="language-ruby"><code>scope shallow_prefix<span class="token punctuation">:</span> <span class="token string">&quot;sekret&quot;</span> <span class="token keyword">do</span>
  resources <span class="token symbol">:articles</span> <span class="token keyword">do</span>
    resources <span class="token symbol">:comments</span><span class="token punctuation">,</span> shallow<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div></li> <p>We can also illustrate <code>shallow</code> routes more by:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resources <span class="token symbol">:auctions</span><span class="token punctuation">,</span> shallow<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token keyword">do</span>
  resources <span class="token symbol">:bids</span> <span class="token keyword">do</span>
   resources <span class="token symbol">:comments</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span> 

</code></pre></div><p>alternatively coded as follows (if you’re block-happy):</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resources <span class="token symbol">:auctions</span> <span class="token keyword">do</span>
 shallow <span class="token keyword">do</span>
   resources <span class="token symbol">:bids</span> <span class="token keyword">do</span>
     resources <span class="token symbol">:comments</span>
   <span class="token keyword">end</span>
 <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p>The resulting routes are:</p> <th align="left">Prefix</th><th align="left">Verb</th><th align="left">URI Pattern</th>
|---|---|---|---|---|---|---|---|---|---
<td align="left">bid_comments</td><td align="left">GET</td><td align="left">/bids/:bid_id/comments(.:format)</td> <td align="left"></td><td align="left">POST</td><td align="left">/bids/:bid_id/comments(.:format)</td> <td align="left">new_bid_comment</td><td align="left">GET</td><td align="left">/bids/:bid_id/comments/new(.:format)</td> <td align="left">edit_comment</td><td align="left">GET</td><td align="left">/comments/:id/edit(.:format)</td> <td align="left">comment</td><td align="left">GET</td><td align="left">/comments/:id(.:format)</td> <td align="left"></td><td align="left">PATCH</td><td align="left">/comments/:id(.:format)</td> <td align="left"></td><td align="left">PUT</td><td align="left">/comments/:id(.:format)</td> <td align="left"></td><td align="left">DELETE</td><td align="left">/comments/:id(.:format)</td> <td align="left">auction_bids</td><td align="left">GET</td><td align="left">/auctions/:auction_id/bids(.:format)</td> <td align="left"></td><td align="left">POST</td><td align="left">/auctions/:auction_id/bids(.:format)</td> <td align="left">new_auction_bid</td><td align="left">GET</td><td align="left">/auctions/:auction_id/bids/new(.:format)</td> <td align="left">edit_bid</td><td align="left">GET</td><td align="left">/bids/:id/edit(.:format)</td> <td align="left">bid</td><td align="left">GET</td><td align="left">/bids/:id(.:format)</td> <td align="left"></td><td align="left">PATCH</td><td align="left">/bids/:id(.:format)</td> <td align="left"></td><td align="left">PUT</td><td align="left">/bids/:id(.:format)</td> <td align="left"></td><td align="left">DELETE</td><td align="left">/bids/:id(.:format)</td> <td align="left">auctions</td><td align="left">GET</td><td align="left">/auctions(.:format)</td> <td align="left"></td><td align="left">POST</td><td align="left">/auctions(.:format)</td> <td align="left">new_auction</td><td align="left">GET</td><td align="left">/auctions/new(.:format)</td> <td align="left">edit_auction</td><td align="left">GET</td><td align="left">/auctions/:id/edit(.:format)</td> <td align="left">auction</td><td align="left">GET</td><td align="left">/auctions/:id(.:format)</td> <td align="left"></td><td align="left">PATCH</td><td align="left">/auctions/:id(.:format)</td> <td align="left"></td><td align="left">PUT</td><td align="left">/auctions/:id(.:format)</td> <td align="left"></td><td align="left">DELETE</td><td align="left">/auctions/:id(.:format)</td> <p>If you analyze the routes generated carefully, you’ll notice that the nested parts of the URL are only included when they are needed to determine what data to display.</p> <h2 id="concerns"><a href="#concerns" class="header-anchor">#</a> Concerns</h2> <p>To avoid repetition in nested routes, concerns provide a great way of sharing common resources that are reusable. To create a concern use the method <code>concern</code> within the <code>routes.rb</code> file.  The method expects a symbol and block:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>concern <span class="token symbol">:commentable</span> <span class="token keyword">do</span>
  resources <span class="token symbol">:comments</span>
<span class="token keyword">end</span>

</code></pre></div><p>While not creating any routes itself, this code allows using the <code>:concerns</code> attribute on a resource.  The simplest example would be:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resource <span class="token symbol">:page</span><span class="token punctuation">,</span> concerns<span class="token punctuation">:</span> <span class="token symbol">:commentable</span>

</code></pre></div><p>The equivalent nested resource would look like this:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resource <span class="token symbol">:page</span> <span class="token keyword">do</span>
  resource <span class="token symbol">:comments</span>
<span class="token keyword">end</span>

</code></pre></div><p>This would build, for example, the following routes:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">/</span>pages<span class="token operator">/</span><span class="token comment">#{page_id}/comments</span>
<span class="token operator">/</span>pages<span class="token operator">/</span><span class="token comment">#{page_id}/comments/#{comment_id}</span>

</code></pre></div><p>For concerns to be meaningful, there must be multiple resources that utilize the concern.  Additional resources could use any of the following syntax to call the concern:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resource <span class="token symbol">:post</span><span class="token punctuation">,</span> concerns<span class="token punctuation">:</span> <span class="token string">%i(commentable)</span>
resource <span class="token symbol">:blog</span> <span class="token keyword">do</span>
  concerns <span class="token symbol">:commentable</span>
<span class="token keyword">end</span>

</code></pre></div><h2 id="root-route"><a href="#root-route" class="header-anchor">#</a> Root route</h2> <p>You can add a home page route to your app with the <code>root</code> method.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># config/routes.rb</span>
<span class="token constant">Rails</span><span class="token punctuation">.</span>application<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>
  root <span class="token string">&quot;application#index&quot;</span>
  <span class="token comment"># equivalent to:</span>
  <span class="token comment"># get &quot;/&quot;, &quot;application#index&quot;  </span>
<span class="token keyword">end</span>

<span class="token comment"># app/controllers/application_controller.rb</span>
<span class="token keyword">class</span> <span class="token class-name">ApplicationController</span> <span class="token operator">&lt;</span> <span class="token constant">ActionController</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Base</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">index</span></span>
    render <span class="token string">&quot;homepage&quot;</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p>And in terminal, <code>rake routes</code> (<code>rails routes</code> in Rails 5) will produce:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>root     <span class="token constant">GET</span>    <span class="token operator">/</span>         application<span class="token comment">#index</span>

</code></pre></div><p>Because the homepage is usually the most important route, and routes are prioritized in the order they appear, the <code>root</code> route should usually be the first in your routes file.</p> <h2 id="additional-restful-actions"><a href="#additional-restful-actions" class="header-anchor">#</a> Additional RESTful actions</h2> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get       <span class="token string">'/photos/:id/preview'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'photos#preview'</span>
get       <span class="token string">'/photos/dashboards'</span><span class="token punctuation">,</span>           to<span class="token punctuation">:</span> <span class="token string">'photos#dashboard'</span>

</code></pre></div><p>If you want to do this for single lines, you can use:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get       <span class="token string">'/photos/new/preview'</span><span class="token punctuation">,</span>          to<span class="token punctuation">:</span> <span class="token string">'photos#preview'</span>

</code></pre></div><p>Be mindful when adding actions to your RESTful routes, probably you are missing another resource!</p> <h2 id="split-routes-into-multiple-files"><a href="#split-routes-into-multiple-files" class="header-anchor">#</a> Split routes into multiple files</h2> <p>If your routes file is overwhelmingly big, you can put your routes in multiple files and include each of the files with Ruby’s <a href="http://apidock.com/ruby/Kernel/require_relative" target="_blank" rel="noopener noreferrer"><code>require_relative</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> method:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token constant">YourAppName</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Application</span><span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>
  require_relative <span class="token string">'routes/admin_routes'</span>
  require_relative <span class="token string">'routes/sidekiq_routes'</span>
  require_relative <span class="token string">'routes/api_routes'</span>
  require_relative <span class="token string">'routes/your_app_routes'</span>
<span class="token keyword">end</span>

</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token constant">YourAppName</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Application</span><span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>
  namespace <span class="token symbol">:api</span> <span class="token keyword">do</span>
    <span class="token comment"># ...</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><h2 id="member-and-collection-routes"><a href="#member-and-collection-routes" class="header-anchor">#</a> Member and Collection Routes</h2> <p>Defining a member block inside a resource creates a route that can act on an individual member of that resource-based route:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resources <span class="token symbol">:posts</span> <span class="token keyword">do</span>
  member <span class="token keyword">do</span>
    get <span class="token string">'preview'</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p>This generates the following member route:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get <span class="token string">'/posts/:id/preview'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'posts#preview'</span>
<span class="token comment"># preview_post_path</span>

</code></pre></div><p>Collection routes allow for creating routes that can act on a collection of resource objects:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resources <span class="token symbol">:posts</span> <span class="token keyword">do</span>
  collection <span class="token keyword">do</span>
    get <span class="token string">'search'</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p>This generates the following collection route:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get <span class="token string">'/posts/search'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'posts#search'</span>
<span class="token comment"># search_posts_path</span>

</code></pre></div><p>An alternate syntax:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resources <span class="token symbol">:posts</span> <span class="token keyword">do</span>
  get <span class="token string">'preview'</span><span class="token punctuation">,</span> on<span class="token punctuation">:</span> <span class="token symbol">:member</span>
  get <span class="token string">'search'</span><span class="token punctuation">,</span>  on<span class="token punctuation">:</span> <span class="token symbol">:collection</span>
<span class="token keyword">end</span>

</code></pre></div><h2 id="redirection"><a href="#redirection" class="header-anchor">#</a> Redirection</h2> <p>You can perform redirection in Rails routes as follows:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>get <span class="token string">'/stories'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> redirect<span class="token punctuation">(</span><span class="token string">'/posts'</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>match <span class="token string">&quot;/abc&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> redirect<span class="token punctuation">(</span><span class="token string">&quot;http://example.com/abc&quot;</span><span class="token punctuation">)</span>

</code></pre></div><p>You can also redirect all unknown routes to a given path:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>match <span class="token string">'*path'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> redirect<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> via<span class="token punctuation">:</span> <span class="token symbol">:get</span>
<span class="token comment"># or</span>
get <span class="token string">'*path'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> redirect<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>match <span class="token string">'*path'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> redirect<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="mount-another-application"><a href="#mount-another-application" class="header-anchor">#</a> Mount another application</h2> <p>mount is used to mount another application (basically rack application) or rails engines to be used within the current application</p> <p><strong>syntax:</strong></p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>mount <span class="token constant">SomeRackApp</span><span class="token punctuation">,</span> at<span class="token punctuation">:</span> <span class="token string">&quot;some_route&quot;</span>

</code></pre></div><p>Now you can access above mounted application using route helper <code>some_rack_app_path</code> or <code>some_rack_app_url</code>.</p> <p>But if you want to rename this helper name you can do it as:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>mount <span class="token constant">SomeRackApp</span><span class="token punctuation">,</span> at<span class="token punctuation">:</span> <span class="token string">&quot;some_route&quot;</span><span class="token punctuation">,</span> as<span class="token punctuation">:</span> <span class="token symbol">:myapp</span>

</code></pre></div><p>This will generate the <code>myapp_path</code> and <code>myapp_url</code> helpers which can be used to navigate to this mounted app.</p> <h2 id="nested-routes"><a href="#nested-routes" class="header-anchor">#</a> Nested Routes</h2> <p>If you want to add nested routes you can write the following code in <code>routes.rb</code> file.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>resources <span class="token symbol">:admins</span> <span class="token keyword">do</span>
  resources <span class="token symbol">:employees</span>
<span class="token keyword">end</span>

</code></pre></div><p>This will generate following routes:</p> <div class="language- extra-class"><pre class="language-text"><code>
    admin_employees GET      /admins/:admin_id/employees(.:format)            employees#index
                     POST     /admins/:admin_id/employees(.:format)            employees#create
  new_admin_employee GET      /admins/:admin_id/employees/new(.:format)        employees#new
 edit_admin_employee GET      /admins/:admin_id/employees/:id/edit(.:format)   employees#edit
      admin_employee GET      /admins/:admin_id/employees/:id(.:format)        employees#show
                     PATCH    /admins/:admin_id/employees/:id(.:format)        employees#update
                     PUT      /admins/:admin_id/employees/:id(.:format)        employees#update
                     DELETE   /admins/:admin_id/employees/:id(.:format)        employees#destroy
              admins GET      /admins(.:format)                                admins#index
                     POST     /admins(.:format)                                admins#create
           new_admin GET      /admins/new(.:format)                            admins#new
          edit_admin GET      /admins/:id/edit(.:format)                       admins#edit
               admin GET      /admins/:id(.:format)                            admins#show
                     PATCH    /admins/:id(.:format)                            admins#update
                     PUT      /admins/:id(.:format)                            admins#update
                     DELETE   /admins/:id(.:format)                            admins#destroy

</code></pre></div><h2 id="scope-available-locales"><a href="#scope-available-locales" class="header-anchor">#</a> Scope available locales</h2> <p>If your application is available in different languages, you usually show the current locale in the URL.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scope <span class="token string">'/(:locale)'</span><span class="token punctuation">,</span> locale<span class="token punctuation">:</span> <span class="token operator">/</span><span class="token comment">#{I18n.available_locales.join('|')}/ do</span>
    root <span class="token string">'example#root'</span>
    <span class="token comment"># other routes</span>
<span class="token keyword">end</span>

</code></pre></div><p>Your root will be accessible via the locales defined in <code>I18n.available_locales</code>.</p> <h2 id="redirects-and-wildcard-routes"><a href="#redirects-and-wildcard-routes" class="header-anchor">#</a> Redirects and Wildcard Routes</h2> <p>If you want to provide a URL out of convenience for your user but map it directly to another one you're already using. Use a redirect:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># config/routes.rb</span>
<span class="token constant">TestApp</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Application</span><span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>
  get <span class="token string">'courses/:course_name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> redirect<span class="token punctuation">(</span><span class="token string">'/courses/%{course_name}/lessons'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token symbol">:as</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;course&quot;</span>
<span class="token keyword">end</span>

</code></pre></div><p>Well, that got interesting fast. The basic principle here is to just use the <code>#redirect</code> method to send one route to another route. If your route is quite simple, it's a really straightforward method. But if you want to also send the original parameters, you need to do a bit of gymnastics by capturing the parameter inside <code>%{here}</code>. Note the single quotes around everything.</p> <p>In the example above, we've also renamed the route for convenience by using an alias with the :as parameter. This lets us use that name in methods like the #_path helpers. Again, test out your <code>$ rake routes</code> with questions.</p> <h2 id="url-params-with-a-period"><a href="#url-params-with-a-period" class="header-anchor">#</a> URL params with a period</h2> <p>If you want to support a url parameter more complex than an id number, you may run into trouble with the parser if the value contains a period. Anything following a period will be assumed to be a format (i.e. json, xml).</p> <p>You can work around this limitation by using a constraint to <strong>broaden</strong> the accepted input.</p> <p>For example, if you want to reference a user record by email address in the url:</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>&quot;Routing&quot; in general is how URL's are &quot;handled&quot; by your app.  In Rails case it's typically which controller and which action of that controller will handle a particular incoming URL.  In Rails apps, routes are usually placed in the <code>config/routes.rb</code> file.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/rubyonrails/routing.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/rubyonrails/getting-started-with-ruby-on-rails.html" class="prev">
        Getting started with Ruby on Rails
      </a></span> <span class="next"><a href="/rubyonrails/activerecord.html">
        ActiveRecord
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/3180.8f117580.js" defer></script>
  </body>
</html>
