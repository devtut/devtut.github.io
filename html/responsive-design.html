<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTML - Responsive Design</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Creating a responsive full page canvas, Mouse coordinates after resizing (or scrolling), Responsive canvas animations without resize events.">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="HTML - Responsive Design">
    <meta property="og:description" content="Creating a responsive full page canvas, Mouse coordinates after resizing (or scrolling), Responsive canvas animations without resize events.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/html/responsive-design.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="HTML - Responsive Design">
    <meta name="twitter:description" content="Creating a responsive full page canvas, Mouse coordinates after resizing (or scrolling), Responsive canvas animations without resize events.">
    <meta name="twitter:url" content="/html/responsive-design.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1291.3ff7371d.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/html/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/html/getting-started-with-html.html" class="sidebar-link">Getting started with HTML</a></li><li><a href="/html/doctypes.html" class="sidebar-link">Doctypes</a></li><li><a href="/html/headings.html" class="sidebar-link">Headings</a></li><li><a href="/html/paragraphs.html" class="sidebar-link">Paragraphs</a></li><li><a href="/html/text-formatting.html" class="sidebar-link">Text Formatting</a></li><li><a href="/html/anchors-and-hyperlinks.html" class="sidebar-link">Anchors and Hyperlinks</a></li><li><a href="/html/lists.html" class="sidebar-link">Lists</a></li><li><a href="/html/tables.html" class="sidebar-link">Tables</a></li><li><a href="/html/comments.html" class="sidebar-link">Comments</a></li><li><a href="/html/classes-and-ids.html" class="sidebar-link">Classes and IDs</a></li><li><a href="/html/data-attributes.html" class="sidebar-link">Data Attributes</a></li><li><a href="/html/linking-resources.html" class="sidebar-link">Linking Resources</a></li><li><a href="/html/include-javascript-code-in-html.html" class="sidebar-link">Include JavaScript Code in HTML</a></li><li><a href="/html/using-html-with-css.html" class="sidebar-link">Using HTML with CSS</a></li><li><a href="/html/images.html" class="sidebar-link">Images</a></li><li><a href="/html/image-maps.html" class="sidebar-link">Image Maps</a></li><li><a href="/html/input-control-elements.html" class="sidebar-link">Input Control Elements</a></li><li><a href="/html/forms.html" class="sidebar-link">Forms</a></li><li><a href="/html/div-element.html" class="sidebar-link">Div Element</a></li><li><a href="/html/sectioning-elements.html" class="sidebar-link">Sectioning Elements</a></li><li><a href="/html/navigation-bars.html" class="sidebar-link">Navigation Bars</a></li><li><a href="/html/label-element.html" class="sidebar-link">Label Element</a></li><li><a href="/html/output-element.html" class="sidebar-link">Output Element</a></li><li><a href="/html/void-elements.html" class="sidebar-link">Void Elements</a></li><li><a href="/html/media-elements.html" class="sidebar-link">Media Elements</a></li><li><a href="/html/progress-element.html" class="sidebar-link">Progress Element</a></li><li><a href="/html/selection-menu-controls.html" class="sidebar-link">Selection Menu Controls</a></li><li><a href="/html/embed.html" class="sidebar-link">Embed</a></li><li><a href="/html/iframes.html" class="sidebar-link">IFrames</a></li><li><a href="/html/content-languages.html" class="sidebar-link">Content Languages</a></li><li><a href="/html/svg.html" class="sidebar-link">SVG</a></li><li><a href="/html/canvas.html" class="sidebar-link">Canvas</a></li><li><a href="/html/meta-information.html" class="sidebar-link">Meta Information</a></li><li><a href="/html/marking-up-computer-code.html" class="sidebar-link">Marking up computer code</a></li><li><a href="/html/marking-up-quotes.html" class="sidebar-link">Marking-up Quotes</a></li><li><a href="/html/tabindex.html" class="sidebar-link">Tabindex</a></li><li><a href="/html/global-attributes.html" class="sidebar-link">Global Attributes</a></li><li><a href="/html/html-5-cache.html" class="sidebar-link">HTML 5 Cache</a></li><li><a href="/html/html-event-attributes.html" class="sidebar-link">HTML Event Attributes</a></li><li><a href="/html/character-entities.html" class="sidebar-link">Character Entities</a></li><li><a href="/html/aria.html" class="sidebar-link">ARIA</a></li><li><a href="/html/getting-started-with-html5-canvas.html" class="sidebar-link">Getting started with html5-canvas</a></li><li><a href="/html/text.html" class="sidebar-link">Text</a></li><li><a href="/html/polygons.html" class="sidebar-link">Polygons</a></li><li><a href="/html/images.html" class="sidebar-link">Images</a></li><li><a href="/html/path-syntax-only.html" class="sidebar-link">Path (Syntax only)</a></li><li><a href="/html/paths.html" class="sidebar-link">Paths</a></li><li><a href="/html/navigating-along-a-path.html" class="sidebar-link">Navigating along a Path</a></li><li><a href="/html/dragging-path-shapes-images-on-canvas.html" class="sidebar-link">Dragging Path Shapes &amp; Images on Canvas</a></li><li><a href="/html/media-types-and-the-canvas.html" class="sidebar-link">Media types and the canvas</a></li><li><a href="/html/animation.html" class="sidebar-link">Animation</a></li><li><a href="/html/collisions-and-intersections.html" class="sidebar-link">Collisions and Intersections</a></li><li><a href="/html/clearing-the-screen.html" class="sidebar-link">Clearing the screen</a></li><li><a href="/html/responsive-design.html" aria-current="page" class="active sidebar-link">Responsive Design</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/html/responsive-design.html#creating-a-responsive-full-page-canvas" class="sidebar-link">Creating a responsive full page canvas</a></li><li class="sidebar-sub-header"><a href="/html/responsive-design.html#mouse-coordinates-after-resizing-or-scrolling" class="sidebar-link">Mouse coordinates after resizing (or scrolling)</a></li><li class="sidebar-sub-header"><a href="/html/responsive-design.html#responsive-canvas-animations-without-resize-events" class="sidebar-link">Responsive canvas animations without resize events.</a></li></ul></li><li><a href="/html/shadows.html" class="sidebar-link">Shadows</a></li><li><a href="/html/charts-diagrams.html" class="sidebar-link">Charts &amp; Diagrams</a></li><li><a href="/html/transformations.html" class="sidebar-link">Transformations</a></li><li><a href="/html/compositing.html" class="sidebar-link">Compositing</a></li><li><a href="/html/pixel-manipulation-with-getimagedata-and-putimagedata.html" class="sidebar-link">Pixel Manipulation with &quot;getImageData&quot; and &quot;putImageData&quot;</a></li><li><a href="/html/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="responsive-design"><a href="#responsive-design" class="header-anchor">#</a> Responsive Design</h1> <h2 id="creating-a-responsive-full-page-canvas"><a href="#creating-a-responsive-full-page-canvas" class="header-anchor">#</a> Creating a responsive full page canvas</h2> <p>Starter code to create and remove a full page canvas that responds to resize events via javascript.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas<span class="token punctuation">;</span>    <span class="token comment">// Global canvas reference</span>
<span class="token keyword">var</span> ctx<span class="token punctuation">;</span>       <span class="token comment">// Global 2D context reference</span>
<span class="token comment">// Creates a canvas</span>
<span class="token keyword">function</span> <span class="token function">createCanvas</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Set the style </span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left     <span class="token operator">=</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">;</span>      <span class="token comment">// Position in top left</span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top      <span class="token operator">=</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex   <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Add to document</span>
    <span class="token keyword">return</span> canvas<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Resizes canvas. Will create a canvas if it does not exist</span>
<span class="token keyword">function</span> <span class="token function">sizeCanvas</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                
    <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment">// Check for global canvas reference</span>
        canvas <span class="token operator">=</span> <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Create a new canvas element</span>
        ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Get the 2D context</span>
    <span class="token punctuation">}</span>
    canvas<span class="token punctuation">.</span>width  <span class="token operator">=</span> innerWidth<span class="token punctuation">;</span>         <span class="token comment">// Set the canvas resolution to fill the page</span>
    canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> innerHeight<span class="token punctuation">;</span>        
<span class="token punctuation">}</span>
<span class="token comment">// Removes the canvas</span>
<span class="token keyword">function</span> <span class="token function">removeCanvas</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token comment">// Make sure there is something to remove</span>
        <span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> sizeCanvas<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Remove resize event</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Remove the canvas from the DOM</span>
        ctx <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>                     <span class="token comment">// Dereference the context</span>
        canvas <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>                  <span class="token comment">// Dereference the canvas</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Add the resize listener</span>
<span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> sizeCanvas<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// Call sizeCanvas to create and set the canvas resolution</span>
<span class="token function">sizeCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ctx and canvas are now available for use.</span>

</code></pre></div><p>If you no longer need the canvas you can remove it by calling <code>removeCanvas()</code></p> <p><a href="https://jsfiddle.net/nzromo1n/" target="_blank" rel="noopener noreferrer">A demo of this example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> at jsfiddle</p> <h2 id="mouse-coordinates-after-resizing-or-scrolling"><a href="#mouse-coordinates-after-resizing-or-scrolling" class="header-anchor">#</a> Mouse coordinates after resizing (or scrolling)</h2> <p>Canvas apps often rely heavily on user interaction with the mouse, but when the window is resized, the mouse event coordinates that canvas relies on are likely changed because resizing causes the canvas to be offset in a different position relative to the window. Thus, responsive design requires that the canvas offset position be recalculated when the window is resized -- and also recalculated when the window is scrolled.</p> <p>This code listens for window resizing events and recalculates the offsets used in mouse event handlers:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// variables holding the current canvas offset position</span>
<span class="token comment">//    relative to the window</span>
<span class="token keyword">var</span> offsetX<span class="token punctuation">,</span>offsetY<span class="token punctuation">;</span>

<span class="token comment">// a function to recalculate the canvas offsets</span>
<span class="token keyword">function</span> <span class="token function">reOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">BB</span><span class="token operator">=</span>canvas<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    offsetX<span class="token operator">=</span><span class="token constant">BB</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    offsetY<span class="token operator">=</span><span class="token constant">BB</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>        
<span class="token punctuation">}</span>

<span class="token comment">// listen for window resizing (and scrolling) events</span>
<span class="token comment">//     and then recalculate the canvas offsets</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token function">reOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token function">reOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">// example usage of the offsets in a mouse handler</span>
<span class="token keyword">function</span> <span class="token function">handleMouseUp</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// use offsetX &amp; offsetY to get the correct mouse position</span>
    mouseX<span class="token operator">=</span><span class="token function">parseInt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token operator">-</span>offsetX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mouseY<span class="token operator">=</span><span class="token function">parseInt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY<span class="token operator">-</span>offsetY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="responsive-canvas-animations-without-resize-events"><a href="#responsive-canvas-animations-without-resize-events" class="header-anchor">#</a> Responsive canvas animations without resize events.</h2> <p>The window resize events can fire in response to the movement of the user's input device. When you resize a canvas it is automatically cleared and you are forced to re-render the content. For animations you do this every frame via the main loop function called by <code>requestAnimationFrame</code> which does its best to keep the rendering in sync with the display hardware.</p> <p>The problem with the resize event is that when the mouse is used to resize the window the events can be trigger many times quicker than the standard 60fps rate of the browser. When the resize event exits the canvas back buffer is presented to the DOM out of sync with the display device, which can cause shearing and other negative effects. There is also a lot of needless memory allocation and release that can further impact the animation when GC cleans up some time afterwards.</p> <h3 id="debounced-resize-event"><a href="#debounced-resize-event" class="header-anchor">#</a> Debounced resize event</h3> <p>A common way to deal with the high firing rates of the resize event is to debounce the resize event.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Assume canvas is in scope</span>
 addEventListener<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> debouncedResize <span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// debounce timeout handle</span>
 <span class="token keyword">var</span> debounceTimeoutHandle<span class="token punctuation">;</span>

 <span class="token comment">// The debounce time in ms (1/1000th second)</span>
 <span class="token keyword">const</span> <span class="token constant">DEBOUNCE_TIME</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> 

 <span class="token comment">// Resize function </span>
 <span class="token keyword">function</span> <span class="token function">debouncedResize</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
     <span class="token function">clearTimeout</span><span class="token punctuation">(</span>debounceTimeoutHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Clears any pending debounce events</span>

     <span class="token comment">// Schedule a canvas resize </span>
     debounceTimeoutHandle <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resizeCanvas<span class="token punctuation">,</span> <span class="token constant">DEBOUNCE_TIME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token comment">// canvas resize function</span>
 <span class="token keyword">function</span> <span class="token function">resizeCanvas</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> resize and redraw <span class="token operator">...</span> <span class="token punctuation">}</span>

</code></pre></div><p>The above example delays the resizing of the canvas until 100ms after the resize event. If in that time further resize events are triggered the existing resize timeout is canceled and a new one scheduled. This effectively consumes most of the resize events.</p> <p>It still has some problems, the most notable is the delay between resizing and seeing the resized canvas. Reducing the debounce time improves this but the resize is still out of sync with the display device. You also still have the animation main loop rendering to an ill fitting canvas.</p> <p>More code can reduce the problems! More code also creates its own new problems.</p> <h3 id="simple-and-the-best-resize"><a href="#simple-and-the-best-resize" class="header-anchor">#</a> Simple and the best resize</h3> <p>Having tried many differing ways to smooth out the resizing of the canvas, from the absurdly complex, to just ignoring the problem (who cares anyways?) I fell back to a trusty friend.</p> <p><strong>K.I.S.S.</strong> is something most programmers should be aware of ((<strong>K</strong>eep <strong>I</strong>t <strong>S</strong>imple <strong>S</strong>tupid) <strong>The stupid refers to me for not having thought of it years ago.</strong> ) and it turns out the best solution is the simplest of all.</p> <p>Just resize the canvas from within the main animation loop. It stays in sync with the display device, there is no needless rendering, and the resource management is at the minimum possible while maintaining full frame rate. Nor do you need to add a resize event to the window or any additional resize functions.</p> <p>You add the resize where you would normally clear the canvas by checking if the canvas size matches the window size. If not resize it.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Assumes canvas element is in scope as canvas</span>

<span class="token comment">// Standard main loop function callback from requestAnimationFrame</span>
<span class="token keyword">function</span> <span class="token function">mainLoop</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Check if the canvas size matches the window size</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">!==</span> innerWidth <span class="token operator">||</span> canvas<span class="token punctuation">.</span>height <span class="token operator">!==</span> innerHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> innerWidth<span class="token punctuation">;</span>    <span class="token comment">// resize canvas</span>
        canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> innerHeight<span class="token punctuation">;</span>  <span class="token comment">// also clears the canvas</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// clear if not resized</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Animation code as normal.</span>



    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>mainLoop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/html/responsive-design.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/html/clearing-the-screen.html" class="prev">
        Clearing the screen
      </a></span> <span class="next"><a href="/html/shadows.html">
        Shadows
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1291.3ff7371d.js" defer></script>
  </body>
</html>
