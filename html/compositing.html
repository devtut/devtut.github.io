<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTML - Compositing</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Draw behind existing shapes with destination-over, Erase existing shapes with destination-out, Default compositing: New shapes are drawn over Existing shapes, Clip images inside shapes with destination-in, Clip images inside shapes with source-in, Inner shadows with source-atop, Invert or Negate image with difference, Black & White with color, Increase the color contrast with  saturation, Sepia FX with  luminosity, Change opacity with globalAlpha">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="HTML - Compositing">
    <meta property="og:description" content="Draw behind existing shapes with destination-over, Erase existing shapes with destination-out, Default compositing: New shapes are drawn over Existing shapes, Clip images inside shapes with destination-in, Clip images inside shapes with source-in, Inner shadows with source-atop, Invert or Negate image with difference, Black & White with color, Increase the color contrast with  saturation, Sepia FX with  luminosity, Change opacity with globalAlpha">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/html/compositing.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="HTML - Compositing">
    <meta name="twitter:description" content="Draw behind existing shapes with destination-over, Erase existing shapes with destination-out, Default compositing: New shapes are drawn over Existing shapes, Clip images inside shapes with destination-in, Clip images inside shapes with source-in, Inner shadows with source-atop, Invert or Negate image with difference, Black & White with color, Increase the color contrast with  saturation, Sepia FX with  luminosity, Change opacity with globalAlpha">
    <meta name="twitter:url" content="/html/compositing.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1254.b61f4d93.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/html/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/html/getting-started-with-html.html" class="sidebar-link">Getting started with HTML</a></li><li><a href="/html/doctypes.html" class="sidebar-link">Doctypes</a></li><li><a href="/html/headings.html" class="sidebar-link">Headings</a></li><li><a href="/html/paragraphs.html" class="sidebar-link">Paragraphs</a></li><li><a href="/html/text-formatting.html" class="sidebar-link">Text Formatting</a></li><li><a href="/html/anchors-and-hyperlinks.html" class="sidebar-link">Anchors and Hyperlinks</a></li><li><a href="/html/lists.html" class="sidebar-link">Lists</a></li><li><a href="/html/tables.html" class="sidebar-link">Tables</a></li><li><a href="/html/comments.html" class="sidebar-link">Comments</a></li><li><a href="/html/classes-and-ids.html" class="sidebar-link">Classes and IDs</a></li><li><a href="/html/data-attributes.html" class="sidebar-link">Data Attributes</a></li><li><a href="/html/linking-resources.html" class="sidebar-link">Linking Resources</a></li><li><a href="/html/include-javascript-code-in-html.html" class="sidebar-link">Include JavaScript Code in HTML</a></li><li><a href="/html/using-html-with-css.html" class="sidebar-link">Using HTML with CSS</a></li><li><a href="/html/images.html" class="sidebar-link">Images</a></li><li><a href="/html/image-maps.html" class="sidebar-link">Image Maps</a></li><li><a href="/html/input-control-elements.html" class="sidebar-link">Input Control Elements</a></li><li><a href="/html/forms.html" class="sidebar-link">Forms</a></li><li><a href="/html/div-element.html" class="sidebar-link">Div Element</a></li><li><a href="/html/sectioning-elements.html" class="sidebar-link">Sectioning Elements</a></li><li><a href="/html/navigation-bars.html" class="sidebar-link">Navigation Bars</a></li><li><a href="/html/label-element.html" class="sidebar-link">Label Element</a></li><li><a href="/html/output-element.html" class="sidebar-link">Output Element</a></li><li><a href="/html/void-elements.html" class="sidebar-link">Void Elements</a></li><li><a href="/html/media-elements.html" class="sidebar-link">Media Elements</a></li><li><a href="/html/progress-element.html" class="sidebar-link">Progress Element</a></li><li><a href="/html/selection-menu-controls.html" class="sidebar-link">Selection Menu Controls</a></li><li><a href="/html/embed.html" class="sidebar-link">Embed</a></li><li><a href="/html/iframes.html" class="sidebar-link">IFrames</a></li><li><a href="/html/content-languages.html" class="sidebar-link">Content Languages</a></li><li><a href="/html/svg.html" class="sidebar-link">SVG</a></li><li><a href="/html/canvas.html" class="sidebar-link">Canvas</a></li><li><a href="/html/meta-information.html" class="sidebar-link">Meta Information</a></li><li><a href="/html/marking-up-computer-code.html" class="sidebar-link">Marking up computer code</a></li><li><a href="/html/marking-up-quotes.html" class="sidebar-link">Marking-up Quotes</a></li><li><a href="/html/tabindex.html" class="sidebar-link">Tabindex</a></li><li><a href="/html/global-attributes.html" class="sidebar-link">Global Attributes</a></li><li><a href="/html/html-5-cache.html" class="sidebar-link">HTML 5 Cache</a></li><li><a href="/html/html-event-attributes.html" class="sidebar-link">HTML Event Attributes</a></li><li><a href="/html/character-entities.html" class="sidebar-link">Character Entities</a></li><li><a href="/html/aria.html" class="sidebar-link">ARIA</a></li><li><a href="/html/getting-started-with-html5-canvas.html" class="sidebar-link">Getting started with html5-canvas</a></li><li><a href="/html/text.html" class="sidebar-link">Text</a></li><li><a href="/html/polygons.html" class="sidebar-link">Polygons</a></li><li><a href="/html/images.html" class="sidebar-link">Images</a></li><li><a href="/html/path-syntax-only.html" class="sidebar-link">Path (Syntax only)</a></li><li><a href="/html/paths.html" class="sidebar-link">Paths</a></li><li><a href="/html/navigating-along-a-path.html" class="sidebar-link">Navigating along a Path</a></li><li><a href="/html/dragging-path-shapes-images-on-canvas.html" class="sidebar-link">Dragging Path Shapes &amp; Images on Canvas</a></li><li><a href="/html/media-types-and-the-canvas.html" class="sidebar-link">Media types and the canvas</a></li><li><a href="/html/animation.html" class="sidebar-link">Animation</a></li><li><a href="/html/collisions-and-intersections.html" class="sidebar-link">Collisions and Intersections</a></li><li><a href="/html/clearing-the-screen.html" class="sidebar-link">Clearing the screen</a></li><li><a href="/html/responsive-design.html" class="sidebar-link">Responsive Design</a></li><li><a href="/html/shadows.html" class="sidebar-link">Shadows</a></li><li><a href="/html/charts-diagrams.html" class="sidebar-link">Charts &amp; Diagrams</a></li><li><a href="/html/transformations.html" class="sidebar-link">Transformations</a></li><li><a href="/html/compositing.html" aria-current="page" class="active sidebar-link">Compositing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/html/compositing.html#draw-behind-existing-shapes-with-destination-over" class="sidebar-link">Draw behind existing shapes with &quot;destination-over&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#erase-existing-shapes-with-destination-out" class="sidebar-link">Erase existing shapes with &quot;destination-out&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#default-compositing-new-shapes-are-drawn-over-existing-shapes" class="sidebar-link">Default compositing: New shapes are drawn over Existing shapes</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#clip-images-inside-shapes-with-destination-in" class="sidebar-link">Clip images inside shapes with &quot;destination-in&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#clip-images-inside-shapes-with-source-in" class="sidebar-link">Clip images inside shapes with &quot;source-in&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#inner-shadows-with-source-atop" class="sidebar-link">Inner shadows with &quot;source-atop&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#invert-or-negate-image-with-difference" class="sidebar-link">Invert or Negate image with &quot;difference&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#black-white-with-color" class="sidebar-link">Black &amp; White with &quot;color&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#increase-the-color-contrast-with-saturation" class="sidebar-link">Increase the color contrast with  &quot;saturation&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#sepia-fx-with-luminosity" class="sidebar-link">Sepia FX with  &quot;luminosity&quot;</a></li><li class="sidebar-sub-header"><a href="/html/compositing.html#change-opacity-with-globalalpha" class="sidebar-link">Change opacity with &quot;globalAlpha&quot;</a></li></ul></li><li><a href="/html/pixel-manipulation-with-getimagedata-and-putimagedata.html" class="sidebar-link">Pixel Manipulation with &quot;getImageData&quot; and &quot;putImageData&quot;</a></li><li><a href="/html/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="compositing"><a href="#compositing" class="header-anchor">#</a> Compositing</h1> <h2 id="draw-behind-existing-shapes-with-destination-over"><a href="#draw-behind-existing-shapes-with-destination-over" class="header-anchor">#</a> Draw behind existing shapes with &quot;destination-over&quot;</h2> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;destination-over&quot;</span>

</code></pre></div><p>&quot;destination-over&quot; compositing places new drawing <strong>under existing drawings</strong>.</p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>rainy<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'destination-over'</span><span class="token punctuation">;</span>  <span class="token comment">// sunny UNDER rainy</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>sunny<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/fMvyX.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/fMvyX.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="erase-existing-shapes-with-destination-out"><a href="#erase-existing-shapes-with-destination-out" class="header-anchor">#</a> Erase existing shapes with &quot;destination-out&quot;</h2> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;destination-out&quot;</span>

</code></pre></div><p>&quot;destination-out&quot; compositing uses new shapes to erase existing drawings.</p> <p>The new shape is not actually drawn -- it is just used as a &quot;cookie-cutter&quot; to erase existing pixels.</p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>apple<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">'destination-out'</span><span class="token punctuation">;</span>   <span class="token comment">// bitemark erases</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>bitemark<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/09Qgz.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/09Qgz.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="default-compositing-new-shapes-are-drawn-over-existing-shapes"><a href="#default-compositing-new-shapes-are-drawn-over-existing-shapes" class="header-anchor">#</a> Default compositing: New shapes are drawn over Existing shapes</h2> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;source-over&quot;</span>

</code></pre></div><p>&quot;source-over&quot; compositing <strong>[default]</strong>, places all new drawings over any existing drawings.</p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'source-over'</span><span class="token punctuation">;</span>  <span class="token comment">// the default</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>background<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>parachuter<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/C61XF.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/C61XF.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="clip-images-inside-shapes-with-destination-in"><a href="#clip-images-inside-shapes-with-destination-in" class="header-anchor">#</a> Clip images inside shapes with &quot;destination-in&quot;</h2> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;destination-in&quot;</span>

</code></pre></div><p>&quot;destination-in&quot; compositing clips existing drawings inside a new shape.</p> <p><strong>Note: Any part of the existing drawing that falls outside the new drawing is erased.</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>picture<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'destination-in'</span><span class="token punctuation">;</span>  <span class="token comment">// picture clipped inside oval</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>oval<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/I5DS2.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/I5DS2.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="clip-images-inside-shapes-with-source-in"><a href="#clip-images-inside-shapes-with-source-in" class="header-anchor">#</a> Clip images inside shapes with &quot;source-in&quot;</h2> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;source-in&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p><code>source-in</code> compositing clips new drawings inside an existing shape.</p> <p><strong>Note: Any part of the new drawing that falls outside the existing drawing is erased.</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>oval<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'source-in'</span><span class="token punctuation">;</span>  <span class="token comment">// picture clipped inside oval</span>
context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>picture<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/KTqsN.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/KTqsN.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="inner-shadows-with-source-atop"><a href="#inner-shadows-with-source-atop" class="header-anchor">#</a> Inner shadows with &quot;source-atop&quot;</h2> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">'source-atop'</span>

</code></pre></div><p><code>source-atop</code> compositing clips new image inside an existing shape.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// gold filled rect</span>
ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span><span class="token string">'gold'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// shadow</span>
ctx<span class="token punctuation">.</span>shadowColor<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>shadowBlur<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token comment">// restrict new draw to cover existing pixels</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'source-atop'</span><span class="token punctuation">;</span>
<span class="token comment">// shadowed stroke</span>
<span class="token comment">// &quot;source-atop&quot; clips off the undesired outer shadow</span>
ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/QXUzY.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/QXUzY.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="invert-or-negate-image-with-difference"><a href="#invert-or-negate-image-with-difference" class="header-anchor">#</a> Invert or Negate image with &quot;difference&quot;</h2> <p>Render a white rectangle over an image with the composite operation</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">'difference'</span><span class="token punctuation">;</span>

</code></pre></div><p>The amount of the effect can be controled with the alpha setting</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Render the image</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'source-atop'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set the composite operation</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'difference'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> alpha<span class="token punctuation">;</span>  <span class="token comment">// alpha 0 = no effect 1 = full effect</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/euaCF.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/euaCF.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="black-white-with-color"><a href="#black-white-with-color" class="header-anchor">#</a> Black &amp; White with &quot;color&quot;</h2> <p>Remove color from an image via</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">'color'</span><span class="token punctuation">;</span>

</code></pre></div><p>The amount of the effect can be controled with the alpha setting</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Render the image</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'source-atop'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set the composite operation</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'color'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> alpha<span class="token punctuation">;</span>  <span class="token comment">// alpha 0 = no effect 1 = full effect</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/9B5Y1.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/9B5Y1.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="increase-the-color-contrast-with-saturation"><a href="#increase-the-color-contrast-with-saturation" class="header-anchor">#</a> Increase the color contrast with  &quot;saturation&quot;</h2> <p>Increase the saturation level of an image with</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">'saturation'</span><span class="token punctuation">;</span>

</code></pre></div><p>The amount of the effect can be controled with the alpha setting or the amount of saturation in the fill overlay</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Render the image</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'source-atop'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set the composite operation</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span><span class="token string">'saturation'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> alpha<span class="token punctuation">;</span>  <span class="token comment">// alpha 0 = no effect 1 = full effect</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/9Ldnl.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/9Ldnl.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="sepia-fx-with-luminosity"><a href="#sepia-fx-with-luminosity" class="header-anchor">#</a> Sepia FX with  &quot;luminosity&quot;</h2> <p>Create a colored sepia FX with</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">'luminosity'</span><span class="token punctuation">;</span>

</code></pre></div><p>In this case the sepia colour is rendered first the the image.</p> <p>The amount of the effect can be controled with the alpha setting or the amount of saturation in the fill overlay</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Render the image</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation<span class="token operator">=</span><span class="token string">'source-atop'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;#F80&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// the color of the sepia FX</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set the composite operation</span>
ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span><span class="token string">'luminosity'</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> alpha<span class="token punctuation">;</span>  <span class="token comment">// alpha 0 = no effect 1 = full effect</span>
ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/hDrhq.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/hDrhq.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="change-opacity-with-globalalpha"><a href="#change-opacity-with-globalalpha" class="header-anchor">#</a> Change opacity with &quot;globalAlpha&quot;</h2> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span>globalAlpha<span class="token operator">=</span><span class="token number">0.50</span>

</code></pre></div><p>You can change the opacity of new drawings by setting the <code>globalAlpha</code> to a value between 0.00 (fully transparent) and 1.00 (fully opaque).</p> <p>The default <code>globalAlpha</code> is 1.00 (fully opaque).</p> <p>Existing drawings are not affected by <code>globalAlpha</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// draw an opaque rectangle</span>
context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// change alpha to 50% -- all new drawings will have 50% opacity</span>
context<span class="token punctuation">.</span>globalAlpha<span class="token operator">=</span><span class="token number">0.50</span><span class="token punctuation">;</span>

<span class="token comment">// draw a semi-transparent rectangle</span>
context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/html/compositing.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/html/transformations.html" class="prev">
        Transformations
      </a></span> <span class="next"><a href="/html/pixel-manipulation-with-getimagedata-and-putimagedata.html">
        Pixel Manipulation with &quot;getImageData&quot; and &quot;putImageData&quot;
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1254.b61f4d93.js" defer></script>
  </body>
</html>
