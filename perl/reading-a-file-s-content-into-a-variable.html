<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Perl - Reading a file&#39;s content into a variable</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Path::Tiny, The manual way, File::Slurp, File::Slurper, Slurping a file into an array variable, Slurp file in one-liner">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Perl - Reading a file's content into a variable">
    <meta property="og:description" content="Path::Tiny, The manual way, File::Slurp, File::Slurper, Slurping a file into an array variable, Slurp file in one-liner">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/perl/reading-a-file-s-content-into-a-variable.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Perl - Reading a file's content into a variable">
    <meta name="twitter:description" content="Path::Tiny, The manual way, File::Slurp, File::Slurper, Slurping a file into an array variable, Slurp file in one-liner">
    <meta name="twitter:url" content="/perl/reading-a-file-s-content-into-a-variable.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2404.61e2677d.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Perl</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/perl/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/perl/getting-started-with-perl-language.html" class="sidebar-link">Getting started with Perl Language</a></li><li><a href="/perl/comments.html" class="sidebar-link">Comments</a></li><li><a href="/perl/variables.html" class="sidebar-link">Variables</a></li><li><a href="/perl/interpolation-in-perl.html" class="sidebar-link">Interpolation in Perl</a></li><li><a href="/perl/true-and-false.html" class="sidebar-link">True and false</a></li><li><a href="/perl/dates-and-time.html" class="sidebar-link">Dates and Time</a></li><li><a href="/perl/control-statements.html" class="sidebar-link">Control Statements</a></li><li><a href="/perl/subroutines.html" class="sidebar-link">Subroutines</a></li><li><a href="/perl/debug-output.html" class="sidebar-link">Debug Output</a></li><li><a href="/perl/lists.html" class="sidebar-link">Lists</a></li><li><a href="/perl/sorting.html" class="sidebar-link">Sorting</a></li><li><a href="/perl/file-i-o-reading-and-writing-files.html" class="sidebar-link">File I/O (reading and writing files)</a></li><li><a href="/perl/reading-a-file-s-content-into-a-variable.html" aria-current="page" class="active sidebar-link">Reading a file's content into a variable</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/perl/reading-a-file-s-content-into-a-variable.html#path-tiny" class="sidebar-link">Path::Tiny</a></li><li class="sidebar-sub-header"><a href="/perl/reading-a-file-s-content-into-a-variable.html#the-manual-way" class="sidebar-link">The manual way</a></li><li class="sidebar-sub-header"><a href="/perl/reading-a-file-s-content-into-a-variable.html#file-slurp" class="sidebar-link">File::Slurp</a></li><li class="sidebar-sub-header"><a href="/perl/reading-a-file-s-content-into-a-variable.html#file-slurper" class="sidebar-link">File::Slurper</a></li><li class="sidebar-sub-header"><a href="/perl/reading-a-file-s-content-into-a-variable.html#slurping-a-file-into-an-array-variable" class="sidebar-link">Slurping a file into an array variable</a></li><li class="sidebar-sub-header"><a href="/perl/reading-a-file-s-content-into-a-variable.html#slurp-file-in-one-liner" class="sidebar-link">Slurp file in one-liner</a></li></ul></li><li><a href="/perl/strings-and-quoting-methods.html" class="sidebar-link">Strings and quoting methods</a></li><li><a href="/perl/split-a-string-on-unquoted-separators.html" class="sidebar-link">Split a string on unquoted separators</a></li><li><a href="/perl/object-oriented-perl.html" class="sidebar-link">Object-oriented Perl</a></li><li><a href="/perl/exception-handling.html" class="sidebar-link">Exception handling</a></li><li><a href="/perl/regular-expressions.html" class="sidebar-link">Regular Expressions</a></li><li><a href="/perl/xml-parsing.html" class="sidebar-link">XML Parsing</a></li><li><a href="/perl/unicode.html" class="sidebar-link">Unicode</a></li><li><a href="/perl/perl-one-liners.html" class="sidebar-link">Perl one-liners</a></li><li><a href="/perl/randomness.html" class="sidebar-link">Randomness</a></li><li><a href="/perl/special-variables.html" class="sidebar-link">Special variables</a></li><li><a href="/perl/dates-and-time.html" class="sidebar-link">Dates and Time</a></li><li><a href="/perl/packages-and-modules.html" class="sidebar-link">Packages and modules</a></li><li><a href="/perl/install-perl-modules-via-cpan.html" class="sidebar-link">Install Perl modules via CPAN</a></li><li><a href="/perl/easy-way-to-check-installed-modules-on-mac-and-ubuntu.html" class="sidebar-link">Easy way to check installed modules on Mac and Ubuntu</a></li><li><a href="/perl/pack-and-unpack.html" class="sidebar-link">Pack and unpack</a></li><li><a href="/perl/perl-commands-for-windows-excel-with-win32-ole-module.html" class="sidebar-link">Perl commands for Windows Excel with Win32::OLE module</a></li><li><a href="/perl/simple-interaction-with-database-via-dbi-module.html" class="sidebar-link">Simple interaction with database via DBI module</a></li><li><a href="/perl/perl-testing.html" class="sidebar-link">Perl Testing</a></li><li><a href="/perl/dancer.html" class="sidebar-link">Dancer</a></li><li><a href="/perl/attributed-text.html" class="sidebar-link">Attributed Text</a></li><li><a href="/perl/gui-applications-in-perl.html" class="sidebar-link">GUI Applications in Perl</a></li><li><a href="/perl/memory-usage-optimization.html" class="sidebar-link">Memory usage optimization</a></li><li><a href="/perl/perl-script-debugging.html" class="sidebar-link">Perl script debugging</a></li><li><a href="/perl/perlbrew.html" class="sidebar-link">Perlbrew</a></li><li><a href="/perl/installation-of-perl.html" class="sidebar-link">Installation of Perl</a></li><li><a href="/perl/compile-perl-cpan-module-sapnwrfc-from-source-code.html" class="sidebar-link">Compile Perl cpan module sapnwrfc from source code</a></li><li><a href="/perl/best-practices.html" class="sidebar-link">Best Practices</a></li><li><a href="/perl/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reading-a-file-s-content-into-a-variable"><a href="#reading-a-file-s-content-into-a-variable" class="header-anchor">#</a> Reading a file's content into a variable</h1> <h2 id="path-tiny"><a href="#path-tiny" class="header-anchor">#</a> Path::Tiny</h2> <p>Using the idiom from <a href="https://stackoverflow.com/documentation/perl/1779/reading-a-file-into-a-variable/5786/the-manual-way#t=201609131958379930125" target="_blank" rel="noopener noreferrer">The Manual Way<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> several times in a script soon gets tedious so you might want to try a module.</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token keyword">use</span> Path<span class="token punctuation">:</span><span class="token punctuation">:</span>Tiny<span class="token punctuation">;</span>
<span class="token keyword">my</span> <span class="token variable">$contents</span> <span class="token operator">=</span> path<span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>slurp<span class="token punctuation">;</span>

</code></pre></div><p>You can pass a <code>binmode</code> option if you need control over file encodings, line endings etc. - see <code>man perlio</code>:</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token keyword">my</span> <span class="token variable">$contents</span> <span class="token operator">=</span> path<span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>slurp<span class="token punctuation">(</span> <span class="token punctuation">{</span>binmode <span class="token operator">=&gt;</span> <span class="token string">&quot;:encoding(UTF-8)&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><code>Path::Tiny</code> also has <a href="http://search.cpan.org/%7Edagolden/Path-Tiny-0.096/lib/Path/Tiny.pm" target="_blank" rel="noopener noreferrer">a lot of other functions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for dealing with files so it may be a good choice.</p> <h2 id="the-manual-way"><a href="#the-manual-way" class="header-anchor">#</a> The manual way</h2> <div class="language-perl extra-class"><pre class="language-perl"><code>open <span class="token keyword">my</span> <span class="token variable">$fh</span><span class="token punctuation">,</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span> <span class="token variable">$filename</span>
    <span class="token operator">or</span> <span class="token keyword">die</span> <span class="token string">&quot;Could not open $filename for reading: $!&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">my</span> <span class="token variable">$contents</span> <span class="token operator">=</span> <span class="token keyword">do</span> <span class="token punctuation">{</span> <span class="token keyword">local</span> <span class="token variable">$/</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span><span class="token variable">$fh</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>After opening the file (read <code>man perlio</code> if you want to read specific file encodings instead of raw bytes), the trick is in the <code>do</code> block: <code>&lt;$fh&gt;</code>, the file handle in a diamond operator, returns a single record from the file. The &quot;input record separator&quot; variable <code>$/</code> specifies what a &quot;record&quot; is—by default it is set to a newline character so &quot;a record&quot; means &quot;a single line&quot;. As <code>$/</code> is a global variable, <code>local</code> does two things: it creates a temporary local copy of <code>$/</code> that will vanish at the end of the block, and gives it the (non-)value <code>undef</code> (the &quot;value&quot; which Perl gives to uninitialized variables). When the input record separator has that (non-)value, the diamond operator will return the entire file. (It considers the entire file to be a single line.)</p> <p>Using <code>do</code>, you can even get around manually opening a file. For repeated reading of files,</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token function"><span class="token keyword">sub</span> readfile</span> <span class="token punctuation">{</span> <span class="token keyword">do</span> <span class="token punctuation">{</span> <span class="token keyword">local</span><span class="token punctuation">(</span><span class="token variable">@ARGV</span><span class="token punctuation">,</span><span class="token variable">$/</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">$_</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token filehandle symbol">&lt;&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">my</span> <span class="token variable">$content</span> <span class="token operator">=</span> readfile<span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>can be used. Here, another global variable(<code>@ARGV</code>) is localized to simulate the same process used when starting a perl script with parameters. <code>$/</code> is still <code>undef</code>, since the array in front of it &quot;eats&quot; all incoming arguments. Next, the diamond operator <code>&lt;&gt;</code> again delivers one record defined by <code>$/</code> (the whole file) and returns from the <code>do</code> block, which in turn return from the sub.</p> <p>The sub has no explicit error handling, which is bad practice! If an error occurs while reading the file, you will receive <code>undef</code> as return value, as opposed to an empty string from an empty file.</p> <p>Another disadvantage of the last code is the fact that you cannot use PerlIO for different file encodings—you always get raw bytes.</p> <h2 id="file-slurp"><a href="#file-slurp" class="header-anchor">#</a> File::Slurp</h2> <p>Don't use it. Although it has been around for a long time and is still the module most programmers will suggest, <a href="http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html" target="_blank" rel="noopener noreferrer">it is broken and not likely to be fixed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="file-slurper"><a href="#file-slurper" class="header-anchor">#</a> File::Slurper</h2> <p>This is a minimalist module that only slurps files into variables, nothing else.</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token keyword">use</span> File<span class="token punctuation">:</span><span class="token punctuation">:</span>Slurper <span class="token string">'read_text'</span><span class="token punctuation">;</span>
<span class="token keyword">my</span> <span class="token variable">$contents</span> <span class="token operator">=</span> read_text<span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><code>read_text()</code> takes two optional parameters to specify the file encoding and whether line endings should be translated between the unixish LF or DOSish CRLF standards:</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token keyword">my</span> <span class="token variable">$contents</span> <span class="token operator">=</span> read_text<span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">,</span> <span class="token string">'UTF-8'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="slurping-a-file-into-an-array-variable"><a href="#slurping-a-file-into-an-array-variable" class="header-anchor">#</a> Slurping a file into an array variable</h2> <div class="language-perl extra-class"><pre class="language-perl"><code>open<span class="token punctuation">(</span><span class="token keyword">my</span> <span class="token variable">$fh</span><span class="token punctuation">,</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span> <span class="token string">&quot;/some/path&quot;</span><span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token keyword">die</span> <span class="token variable">$!</span><span class="token punctuation">;</span>
<span class="token keyword">my</span> <span class="token variable">@ary</span> <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token variable">$fh</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

</code></pre></div><p>When evaluated in list context, the diamond operator returns a list consisting of all the lines in the file (in this case, assigning the result to an array supplies list context). The line terminator is retained, and can be removed by chomping:</p> <div class="language-perl extra-class"><pre class="language-perl"><code>chomp<span class="token punctuation">(</span><span class="token variable">@ary</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">#removes line terminators from all the array elements.</span>

</code></pre></div><h2 id="slurp-file-in-one-liner"><a href="#slurp-file-in-one-liner" class="header-anchor">#</a> Slurp file in one-liner</h2> <p>Input record separator can be specified with <code>-0</code> switch (<strong>zero</strong>, not <strong>capital O</strong>). It takes an octal or hexadecimal number as value. Any value <code>0400</code> or above will cause Perl to slurp files, but by convention, the value used for this purpose is <code>0777</code>.</p> <div class="language-perl extra-class"><pre class="language-perl"><code>perl <span class="token operator">-</span><span class="token number">0777</span> <span class="token operator">-e</span> <span class="token string">'my $file = &lt;&gt;; print length($file)'</span> input<span class="token operator">.</span>txt

</code></pre></div><p>Going further with minimalism, specifying <code>-n</code> switch causes Perl to automatically read each line (in our case — the whole file) into variable <code>$_</code>.</p> <div class="language-perl extra-class"><pre class="language-perl"><code>perl <span class="token operator">-</span><span class="token number">0777</span> <span class="token operator">-</span><span class="token operator">ne</span> <span class="token string">'print length($_)'</span> input<span class="token operator">.</span>txt

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/perl/reading-a-file-s-content-into-a-variable.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/perl/file-i-o-reading-and-writing-files.html" class="prev">
        File I/O (reading and writing files)
      </a></span> <span class="next"><a href="/perl/strings-and-quoting-methods.html">
        Strings and quoting methods
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2404.61e2677d.js" defer></script>
  </body>
</html>
