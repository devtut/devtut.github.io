<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Perl - Regular Expressions</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Matching strings, Replace a string using regular expressions, Usage of &#92;Q and &#92;E in pattern matching, Parsing a string with a regex">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Perl - Regular Expressions">
    <meta property="og:description" content="Matching strings, Replace a string using regular expressions, Usage of &#92;Q and &#92;E in pattern matching, Parsing a string with a regex">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/perl/regular-expressions.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Perl - Regular Expressions">
    <meta name="twitter:description" content="Matching strings, Replace a string using regular expressions, Usage of &#92;Q and &#92;E in pattern matching, Parsing a string with a regex">
    <meta name="twitter:url" content="/perl/regular-expressions.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2405.2cc30c21.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Perl</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/perl/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/perl/getting-started-with-perl-language.html" class="sidebar-link">Getting started with Perl Language</a></li><li><a href="/perl/comments.html" class="sidebar-link">Comments</a></li><li><a href="/perl/variables.html" class="sidebar-link">Variables</a></li><li><a href="/perl/interpolation-in-perl.html" class="sidebar-link">Interpolation in Perl</a></li><li><a href="/perl/true-and-false.html" class="sidebar-link">True and false</a></li><li><a href="/perl/dates-and-time.html" class="sidebar-link">Dates and Time</a></li><li><a href="/perl/control-statements.html" class="sidebar-link">Control Statements</a></li><li><a href="/perl/subroutines.html" class="sidebar-link">Subroutines</a></li><li><a href="/perl/debug-output.html" class="sidebar-link">Debug Output</a></li><li><a href="/perl/lists.html" class="sidebar-link">Lists</a></li><li><a href="/perl/sorting.html" class="sidebar-link">Sorting</a></li><li><a href="/perl/file-i-o-reading-and-writing-files.html" class="sidebar-link">File I/O (reading and writing files)</a></li><li><a href="/perl/reading-a-file-s-content-into-a-variable.html" class="sidebar-link">Reading a file's content into a variable</a></li><li><a href="/perl/strings-and-quoting-methods.html" class="sidebar-link">Strings and quoting methods</a></li><li><a href="/perl/split-a-string-on-unquoted-separators.html" class="sidebar-link">Split a string on unquoted separators</a></li><li><a href="/perl/object-oriented-perl.html" class="sidebar-link">Object-oriented Perl</a></li><li><a href="/perl/exception-handling.html" class="sidebar-link">Exception handling</a></li><li><a href="/perl/regular-expressions.html" aria-current="page" class="active sidebar-link">Regular Expressions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/perl/regular-expressions.html#matching-strings" class="sidebar-link">Matching strings</a></li><li class="sidebar-sub-header"><a href="/perl/regular-expressions.html#replace-a-string-using-regular-expressions" class="sidebar-link">Replace a string using regular expressions</a></li><li class="sidebar-sub-header"><a href="/perl/regular-expressions.html#usage-of-q-and-e-in-pattern-matching" class="sidebar-link">Usage of &amp;#92;Q and &amp;#92;E in pattern matching</a></li><li class="sidebar-sub-header"><a href="/perl/regular-expressions.html#parsing-a-string-with-a-regex" class="sidebar-link">Parsing a string with a regex</a></li></ul></li><li><a href="/perl/xml-parsing.html" class="sidebar-link">XML Parsing</a></li><li><a href="/perl/unicode.html" class="sidebar-link">Unicode</a></li><li><a href="/perl/perl-one-liners.html" class="sidebar-link">Perl one-liners</a></li><li><a href="/perl/randomness.html" class="sidebar-link">Randomness</a></li><li><a href="/perl/special-variables.html" class="sidebar-link">Special variables</a></li><li><a href="/perl/dates-and-time.html" class="sidebar-link">Dates and Time</a></li><li><a href="/perl/packages-and-modules.html" class="sidebar-link">Packages and modules</a></li><li><a href="/perl/install-perl-modules-via-cpan.html" class="sidebar-link">Install Perl modules via CPAN</a></li><li><a href="/perl/easy-way-to-check-installed-modules-on-mac-and-ubuntu.html" class="sidebar-link">Easy way to check installed modules on Mac and Ubuntu</a></li><li><a href="/perl/pack-and-unpack.html" class="sidebar-link">Pack and unpack</a></li><li><a href="/perl/perl-commands-for-windows-excel-with-win32-ole-module.html" class="sidebar-link">Perl commands for Windows Excel with Win32::OLE module</a></li><li><a href="/perl/simple-interaction-with-database-via-dbi-module.html" class="sidebar-link">Simple interaction with database via DBI module</a></li><li><a href="/perl/perl-testing.html" class="sidebar-link">Perl Testing</a></li><li><a href="/perl/dancer.html" class="sidebar-link">Dancer</a></li><li><a href="/perl/attributed-text.html" class="sidebar-link">Attributed Text</a></li><li><a href="/perl/gui-applications-in-perl.html" class="sidebar-link">GUI Applications in Perl</a></li><li><a href="/perl/memory-usage-optimization.html" class="sidebar-link">Memory usage optimization</a></li><li><a href="/perl/perl-script-debugging.html" class="sidebar-link">Perl script debugging</a></li><li><a href="/perl/perlbrew.html" class="sidebar-link">Perlbrew</a></li><li><a href="/perl/installation-of-perl.html" class="sidebar-link">Installation of Perl</a></li><li><a href="/perl/compile-perl-cpan-module-sapnwrfc-from-source-code.html" class="sidebar-link">Compile Perl cpan module sapnwrfc from source code</a></li><li><a href="/perl/best-practices.html" class="sidebar-link">Best Practices</a></li><li><a href="/perl/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="regular-expressions"><a href="#regular-expressions" class="header-anchor">#</a> Regular Expressions</h1> <h2 id="matching-strings"><a href="#matching-strings" class="header-anchor">#</a> Matching strings</h2> <p>The <code>=~</code> operator attempts to match a regular expression (set apart by <code>/</code>) to a string:</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token keyword">my</span> <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string">&quot;Hi, yourself!\n&quot;</span> <span class="token keyword">if</span> <span class="token variable">$str</span> <span class="token operator">=~</span> <span class="token regex">/^hello/</span><span class="token punctuation">;</span>

</code></pre></div><p><code>/^hello/</code> is the actual regular expression. The <code>^</code> is a special character that tells the regular expression to start with the beginning of the string and not match in the middle somewhere. Then the regex tries to find the following letters in order <code>h</code>, <code>e</code>, <code>l</code>, <code>l</code>, and <code>o</code>.</p> <p>Regular expressions attempt to match the default variable (<code>$_</code>) if bare:</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token variable">$_</span> <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">print</span> <span class="token string">&quot;Ahoy!\n&quot;</span> <span class="token keyword">if</span> <span class="token regex">/^hello/</span><span class="token punctuation">;</span>

</code></pre></div><p>You can also use different delimiters is you precede the regular expression with the <code>m</code> operator:</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token regex">m~^hello~</span><span class="token punctuation">;</span>
<span class="token regex">m{^hello}</span><span class="token punctuation">;</span> 
<span class="token regex">m|^hello|</span><span class="token punctuation">;</span>

</code></pre></div><p>This is useful when matching strings that include the <code>/</code> character:</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token keyword">print</span> <span class="token string">&quot;user directory&quot;</span> <span class="token keyword">if</span> <span class="token regex">m|^/usr|</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="replace-a-string-using-regular-expressions"><a href="#replace-a-string-using-regular-expressions" class="header-anchor">#</a> Replace a string using regular expressions</h2> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token regex">s/foo/bar/</span><span class="token punctuation">;</span>         <span class="token comment"># replace &quot;foo&quot; with &quot;bar&quot; in $_</span>
<span class="token keyword">my</span> <span class="token variable">$foo</span> <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$foo</span> <span class="token operator">=~</span> <span class="token regex">s/foo/bar/</span><span class="token punctuation">;</span> <span class="token comment"># do the above on a different variable using the binding operator =~</span>
<span class="token regex">s~ foo ~ bar ~</span><span class="token punctuation">;</span>     <span class="token comment"># using ~ as a delimiter</span>
<span class="token variable">$foo</span> <span class="token operator">=</span> <span class="token regex">s/foo/bar/r</span><span class="token punctuation">;</span> <span class="token comment"># non-destructive r flag: returns the replacement string without modifying the variable it's bound to</span>
<span class="token regex">s/foo/bar/g</span><span class="token punctuation">;</span>        <span class="token comment"># replace all instances</span>

</code></pre></div><h2 id="usage-of-q-and-e-in-pattern-matching"><a href="#usage-of-q-and-e-in-pattern-matching" class="header-anchor">#</a> Usage of \Q and \E in pattern matching</h2> <h3 id="what-s-between-q-and-e-is-treated-as-normal-characters"><a href="#what-s-between-q-and-e-is-treated-as-normal-characters" class="header-anchor">#</a> What's between \Q and \E is treated as normal characters</h3> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token comment">#!/usr/bin/perl</span>

<span class="token keyword">my</span> <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string">&quot;hello.it's.me&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">my</span> <span class="token variable">@test</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;hello.it's.me&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;hello/it's!me&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function"><span class="token keyword">sub</span> ismatched</span><span class="token punctuation">(</span><span class="token variable">$)</span> <span class="token punctuation">{</span> <span class="token variable">$_</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">&quot;MATCHED!&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;DID NOT MATCH!&quot;</span> <span class="token punctuation">}</span>

<span class="token keyword">my</span> <span class="token variable">@match</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
      <span class="token punctuation">[</span> general_match<span class="token operator">=&gt;</span> <span class="token keyword">sub</span> <span class="token punctuation">{</span> ismatched <span class="token regex">/$str/</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span> qe_match    <span class="token operator">=&gt;</span> <span class="token keyword">sub</span> <span class="token punctuation">{</span> ismatched <span class="token regex">/\Q$str\E/</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">@test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">print</span> <span class="token string">&quot;\String = '$_':\n&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$method</span> <span class="token punctuation">(</span><span class="token variable">@match</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">my</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span><span class="token variable">$match</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@$method</span><span class="token punctuation">;</span>
    <span class="token keyword">print</span> <span class="token string">&quot;  - $name: &quot;</span><span class="token punctuation">,</span> <span class="token variable">$match</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>}</p> <p>Output</p> <blockquote></blockquote> <div class="language-perl extra-class"><pre class="language-perl"><code>String <span class="token operator">=</span> <span class="token string">'hello.it'</span>s<span class="token operator">.</span>me'<span class="token punctuation">:</span>
  <span class="token operator">-</span> general_match<span class="token punctuation">:</span> MATCHED<span class="token operator">!</span>
  <span class="token operator">-</span> qe_match<span class="token punctuation">:</span> MATCHED<span class="token operator">!</span>
String <span class="token operator">=</span> <span class="token string">'hello/it'</span><span class="token regex">s!me':
  - general_match: MATCHED!
  - qe_match: DID NOT MATCH!</span>

</code></pre></div><h2 id="parsing-a-string-with-a-regex"><a href="#parsing-a-string-with-a-regex" class="header-anchor">#</a> Parsing a string with a regex</h2> <p>Generally, it's not a good idea to <a href="http://stackoverflow.com/a/1732454/1438" target="_blank" rel="noopener noreferrer">use a regular expression to parse a complex structure<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. But it can be done. For instance, you might want to load data into hive table and fields are separated by comma but complex types like array are separated by a &quot;|&quot;. Files contain records with all fields separated by comma and complex type are inside square bracket. In that case, this bit of disposable Perl might be sufficient:</p> <div class="language-perl extra-class"><pre class="language-perl"><code>echo <span class="token string">&quot;1,2,[3,4,5],5,6,[7,8],[1,2,34],5&quot;</span> <span class="token operator">|</span> <span class="token operator">\</span>
    perl <span class="token operator">-</span><span class="token operator">ne</span> <span class="token operator">\</span>
        '<span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token regex">/\[[^,\]]+\,.*\]/</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token regex">/\[([^\]\|]+)\]/</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token variable">$text</span> <span class="token operator">=</span> <span class="token variable">$1</span><span class="token punctuation">;</span>
                <span class="token variable">$text_to_replace</span> <span class="token operator">=</span> <span class="token variable">$text</span><span class="token punctuation">;</span>
                <span class="token variable">$text</span> <span class="token operator">=~</span> <span class="token regex">s/\,/\|/g</span><span class="token punctuation">;</span>
                <span class="token regex">s/$text_to_replace/$text/</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">print</span>'

</code></pre></div><p>You'll want to spot check the output:</p> <blockquote></blockquote> <p>1,2,[3|4|5],5,6,[7|8],[1|2|34],5</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/perl/regular-expressions.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/perl/exception-handling.html" class="prev">
        Exception handling
      </a></span> <span class="next"><a href="/perl/xml-parsing.html">
        XML Parsing
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2405.2cc30c21.js" defer></script>
  </body>
</html>
