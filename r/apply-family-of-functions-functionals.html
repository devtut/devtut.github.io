<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>R - *apply family of functions (functionals)</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Using built-in functionals, Bulk File Loading, Combining multiple `data.frames` (`lapply`, `mapply`), Using user-defined functionals, Use anonymous functions with apply">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="R - *apply family of functions (functionals)">
    <meta property="og:description" content="Using built-in functionals, Bulk File Loading, Combining multiple `data.frames` (`lapply`, `mapply`), Using user-defined functionals, Use anonymous functions with apply">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/r/apply-family-of-functions-functionals.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="R - *apply family of functions (functionals)">
    <meta name="twitter:description" content="Using built-in functionals, Bulk File Loading, Combining multiple `data.frames` (`lapply`, `mapply`), Using user-defined functionals, Use anonymous functions with apply">
    <meta name="twitter:url" content="/r/apply-family-of-functions-functionals.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/2852.c27d8630.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>R</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/r/" class="sidebar-link">Disclaimer</a></li><li><a href="/r/getting-started-with-r-language.html" class="sidebar-link">Getting started with R Language</a></li><li><a href="/r/variables.html" class="sidebar-link">Variables</a></li><li><a href="/r/arithmetic-operators.html" class="sidebar-link">Arithmetic Operators</a></li><li><a href="/r/matrices.html" class="sidebar-link">Matrices</a></li><li><a href="/r/formula.html" class="sidebar-link">Formula</a></li><li><a href="/r/reading-and-writing-strings.html" class="sidebar-link">Reading and writing strings</a></li><li><a href="/r/string-manipulation-with-stringi-package.html" class="sidebar-link">String manipulation with stringi package</a></li><li><a href="/r/classes.html" class="sidebar-link">Classes</a></li><li><a href="/r/lists.html" class="sidebar-link">Lists</a></li><li><a href="/r/hashmaps.html" class="sidebar-link">Hashmaps</a></li><li><a href="/r/creating-vectors.html" class="sidebar-link">Creating vectors</a></li><li><a href="/r/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/r/the-date-class.html" class="sidebar-link">The Date class</a></li><li><a href="/r/date-time-classes-posixct-and-posixlt.html" class="sidebar-link">Date-time classes (POSIXct and POSIXlt)</a></li><li><a href="/r/the-character-class.html" class="sidebar-link">The character class</a></li><li><a href="/r/numeric-classes-and-storage-modes.html" class="sidebar-link">Numeric classes and storage modes</a></li><li><a href="/r/the-logical-class.html" class="sidebar-link">The logical class</a></li><li><a href="/r/data-frames.html" class="sidebar-link">Data frames</a></li><li><a href="/r/split-function.html" class="sidebar-link">Split function</a></li><li><a href="/r/reading-and-writing-tabular-data-in-plain-text-files-csv-tsv-etc.html" class="sidebar-link">Reading and writing tabular data in plain-text files (CSV, TSV, etc.)</a></li><li><a href="/r/pipe-operators-and-others.html" class="sidebar-link">Pipe operators (%&gt;% and others)</a></li><li><a href="/r/linear-models-regression.html" class="sidebar-link">Linear Models (Regression)</a></li><li><a href="/r/data-table.html" class="sidebar-link">data.table</a></li><li><a href="/r/pivot-and-unpivot-with-data-table.html" class="sidebar-link">Pivot and unpivot with data.table</a></li><li><a href="/r/bar-chart.html" class="sidebar-link">Bar Chart</a></li><li><a href="/r/base-plotting.html" class="sidebar-link">Base Plotting</a></li><li><a href="/r/boxplot.html" class="sidebar-link">boxplot</a></li><li><a href="/r/ggplot2.html" class="sidebar-link">ggplot2</a></li><li><a href="/r/factors.html" class="sidebar-link">Factors</a></li><li><a href="/r/pattern-matching-and-replacement.html" class="sidebar-link">Pattern Matching and Replacement</a></li><li><a href="/r/run-length-encoding.html" class="sidebar-link">Run-length encoding</a></li><li><a href="/r/speeding-up-tough-to-vectorize-code.html" class="sidebar-link">Speeding up tough-to-vectorize code</a></li><li><a href="/r/introduction-to-geographical-maps.html" class="sidebar-link">Introduction to Geographical Maps</a></li><li><a href="/r/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/r/tidyverse.html" class="sidebar-link">tidyverse</a></li><li><a href="/r/rcpp.html" class="sidebar-link">Rcpp</a></li><li><a href="/r/random-numbers-generator.html" class="sidebar-link">Random Numbers Generator</a></li><li><a href="/r/parallel-processing.html" class="sidebar-link">Parallel processing</a></li><li><a href="/r/subsetting.html" class="sidebar-link">Subsetting</a></li><li><a href="/r/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/r/installing-packages.html" class="sidebar-link">Installing packages</a></li><li><a href="/r/updating-r-and-the-package-library.html" class="sidebar-link">Updating R and the package library</a></li><li><a href="/r/inspecting-packages.html" class="sidebar-link">Inspecting packages</a></li><li><a href="/r/creating-packages-with-devtools.html" class="sidebar-link">Creating packages with devtools</a></li><li><a href="/r/using-pipe-assignment-in-your-own-package-how-to.html" class="sidebar-link">Using pipe assignment in your own package %%: How to ?</a></li><li><a href="/r/arima-models.html" class="sidebar-link">Arima Models</a></li><li><a href="/r/distribution-functions.html" class="sidebar-link">Distribution Functions</a></li><li><a href="/r/shiny.html" class="sidebar-link">Shiny</a></li><li><a href="/r/spatial-analysis.html" class="sidebar-link">spatial analysis</a></li><li><a href="/r/sqldf.html" class="sidebar-link">sqldf</a></li><li><a href="/r/code-profiling.html" class="sidebar-link">Code profiling</a></li><li><a href="/r/control-flow-structures.html" class="sidebar-link">Control flow structures</a></li><li><a href="/r/column-wise-operation.html" class="sidebar-link">Column wise operation</a></li><li><a href="/r/json.html" class="sidebar-link">JSON</a></li><li><a href="/r/rodbc.html" class="sidebar-link">RODBC</a></li><li><a href="/r/lubridate.html" class="sidebar-link">lubridate</a></li><li><a href="/r/time-series-and-forecasting.html" class="sidebar-link">Time Series and Forecasting</a></li><li><a href="/r/strsplit-function.html" class="sidebar-link">strsplit function</a></li><li><a href="/r/web-scraping-and-parsing.html" class="sidebar-link">Web scraping and parsing</a></li><li><a href="/r/generalized-linear-models.html" class="sidebar-link">Generalized linear models</a></li><li><a href="/r/reshaping-data-between-long-and-wide-forms.html" class="sidebar-link">Reshaping data between long and wide forms</a></li><li><a href="/r/rmarkdown-and-knitr-presentation.html" class="sidebar-link">RMarkdown and knitr presentation</a></li><li><a href="/r/scope-of-variables.html" class="sidebar-link">Scope of variables</a></li><li><a href="/r/performing-a-permutation-test.html" class="sidebar-link">Performing a Permutation Test</a></li><li><a href="/r/xgboost.html" class="sidebar-link">xgboost</a></li><li><a href="/r/r-code-vectorization-best-practices.html" class="sidebar-link">R code vectorization best practices</a></li><li><a href="/r/missing-values.html" class="sidebar-link">Missing values</a></li><li><a href="/r/hierarchical-linear-modeling.html" class="sidebar-link">Hierarchical Linear Modeling</a></li><li><a href="/r/apply-family-of-functions-functionals.html" class="active sidebar-link">*apply family of functions (functionals)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/r/apply-family-of-functions-functionals.html#using-built-in-functionals" class="sidebar-link">Using built-in functionals</a></li><li class="sidebar-sub-header"><a href="/r/apply-family-of-functions-functionals.html#bulk-file-loading" class="sidebar-link">Bulk File Loading</a></li><li class="sidebar-sub-header"><a href="/r/apply-family-of-functions-functionals.html#combining-multiple-data-frames-lapply-mapply" class="sidebar-link">Combining multiple data.frames (lapply, mapply)</a></li><li class="sidebar-sub-header"><a href="/r/apply-family-of-functions-functionals.html#using-user-defined-functionals" class="sidebar-link">Using user-defined functionals</a></li><li class="sidebar-sub-header"><a href="/r/apply-family-of-functions-functionals.html#use-anonymous-functions-with-apply" class="sidebar-link">Use anonymous functions with apply</a></li></ul></li><li><a href="/r/text-mining.html" class="sidebar-link">Text mining</a></li><li><a href="/r/anova.html" class="sidebar-link">ANOVA</a></li><li><a href="/r/raster-and-image-analysis.html" class="sidebar-link">Raster and Image Analysis</a></li><li><a href="/r/survival-analysis.html" class="sidebar-link">Survival analysis</a></li><li><a href="/r/fault-tolerant-resilient-code.html" class="sidebar-link">Fault-tolerant/resilient code</a></li><li><a href="/r/reproducible-r.html" class="sidebar-link">Reproducible R</a></li><li><a href="/r/fourier-series-and-transformations.html" class="sidebar-link">Fourier Series and Transformations</a></li><li><a href="/r/rprofile.html" class="sidebar-link">.Rprofile</a></li><li><a href="/r/dplyr.html" class="sidebar-link">dplyr</a></li><li><a href="/r/caret.html" class="sidebar-link">caret</a></li><li><a href="/r/extracting-and-listing-files-in-compressed-archives.html" class="sidebar-link">Extracting and Listing Files in Compressed Archives</a></li><li><a href="/r/probability-distributions-with-r.html" class="sidebar-link">Probability Distributions with R</a></li><li><a href="/r/r-in-latex-with-knitr.html" class="sidebar-link">R in LaTeX with knitr</a></li><li><a href="/r/web-crawling-in-r.html" class="sidebar-link">Web Crawling in R</a></li><li><a href="/r/creating-reports-with-rmarkdown.html" class="sidebar-link">Creating reports with RMarkdown</a></li><li><a href="/r/gpu-accelerated-computing.html" class="sidebar-link">GPU-accelerated computing</a></li><li><a href="/r/heatmap-and-heatmap-2.html" class="sidebar-link">heatmap and heatmap.2</a></li><li><a href="/r/network-analysis-with-the-igraph-package.html" class="sidebar-link">Network analysis with the igraph package</a></li><li><a href="/r/functional-programming.html" class="sidebar-link">Functional programming</a></li><li><a href="/r/get-user-input.html" class="sidebar-link">Get user input</a></li><li><a href="/r/spark-api-sparkr.html" class="sidebar-link">Spark API (SparkR)</a></li><li><a href="/r/meta-documentation-guidelines.html" class="sidebar-link">Meta: Documentation Guidelines</a></li><li><a href="/r/input-and-output.html" class="sidebar-link">Input and output</a></li><li><a href="/r/i-o-for-foreign-tables-excel-sas-spss-stata.html" class="sidebar-link">I/O for foreign tables (Excel, SAS, SPSS, Stata)</a></li><li><a href="/r/i-o-for-database-tables.html" class="sidebar-link">I/O for database tables</a></li><li><a href="/r/i-o-for-geographic-data-shapefiles-etc.html" class="sidebar-link">I/O for geographic data (shapefiles, etc.)</a></li><li><a href="/r/i-o-for-raster-images.html" class="sidebar-link">I/O for raster images</a></li><li><a href="/r/i-o-for-r-s-binary-format.html" class="sidebar-link">I/O for R's binary format</a></li><li><a href="/r/recycling.html" class="sidebar-link">Recycling</a></li><li><a href="/r/expression-parse-eval.html" class="sidebar-link">Expression: parse + eval</a></li><li><a href="/r/regular-expression-syntax-in-r.html" class="sidebar-link">Regular Expression Syntax in R</a></li><li><a href="/r/regular-expressions-regex.html" class="sidebar-link">Regular Expressions (regex)</a></li><li><a href="/r/combinatorics.html" class="sidebar-link">Combinatorics</a></li><li><a href="/r/solving-odes-in-r.html" class="sidebar-link">Solving ODEs in R</a></li><li><a href="/r/feature-selection-in-r-removing-extraneous-features.html" class="sidebar-link">Feature Selection in R -- Removing Extraneous Features</a></li><li><a href="/r/bibliography-in-rmd.html" class="sidebar-link">Bibliography in RMD</a></li><li><a href="/r/writing-functions-in-r.html" class="sidebar-link">Writing functions in R</a></li><li><a href="/r/color-schemes-for-graphics.html" class="sidebar-link">Color schemes for graphics</a></li><li><a href="/r/hierarchical-clustering-with-hclust.html" class="sidebar-link">Hierarchical clustering with hclust</a></li><li><a href="/r/random-forest-algorithm.html" class="sidebar-link">Random Forest Algorithm</a></li><li><a href="/r/restful-r-services.html" class="sidebar-link">RESTful R Services</a></li><li><a href="/r/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/r/using-texreg-to-export-models-in-a-paper-ready-way.html" class="sidebar-link">Using texreg to export models in a paper-ready way</a></li><li><a href="/r/publishing.html" class="sidebar-link">Publishing</a></li><li><a href="/r/implement-state-machine-pattern-using-s4-class.html" class="sidebar-link">Implement State Machine Pattern using S4 Class</a></li><li><a href="/r/reshape-using-tidyr.html" class="sidebar-link">Reshape using tidyr</a></li><li><a href="/r/modifying-strings-by-substitution.html" class="sidebar-link">Modifying strings by substitution</a></li><li><a href="/r/non-standard-evaluation-and-standard-evaluation.html" class="sidebar-link">Non-standard evaluation and standard evaluation</a></li><li><a href="/r/randomization.html" class="sidebar-link">Randomization</a></li><li><a href="/r/object-oriented-programming-in-r.html" class="sidebar-link">Object-Oriented Programming in R</a></li><li><a href="/r/coercion.html" class="sidebar-link">Coercion</a></li><li><a href="/r/standardize-analyses-by-writing-standalone-r-scripts.html" class="sidebar-link">Standardize analyses by writing standalone R scripts</a></li><li><a href="/r/analyze-tweets-with-r.html" class="sidebar-link">Analyze tweets with R</a></li><li><a href="/r/natural-language-processing.html" class="sidebar-link">Natural language processing</a></li><li><a href="/r/r-markdown-notebooks-from-rstudio.html" class="sidebar-link">R Markdown Notebooks (from RStudio)</a></li><li><a href="/r/aggregating-data-frames.html" class="sidebar-link">Aggregating data frames</a></li><li><a href="/r/data-acquisition.html" class="sidebar-link">Data acquisition</a></li><li><a href="/r/r-memento-by-examples.html" class="sidebar-link">R memento by examples</a></li><li><a href="/r/updating-r-version.html" class="sidebar-link">Updating R version</a></li><li><a href="/r/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/r/roxygen2.html" class="sidebar-link">roxygen2</a></li><li><a href="/r/cleaning-data.html" class="sidebar-link">Cleaning data</a></li><li><a href="/r/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="apply-family-of-functions-functionals"><a href="#apply-family-of-functions-functionals" class="header-anchor">#</a> *apply family of functions (functionals)</h1> <h2 id="using-built-in-functionals"><a href="#using-built-in-functionals" class="header-anchor">#</a> Using built-in functionals</h2> <h3 id="built-in-functionals-lapply-sapply-and-mapply"><a href="#built-in-functionals-lapply-sapply-and-mapply" class="header-anchor">#</a> Built-in functionals: lapply(), sapply(), and mapply()</h3> <p>R comes with built-in functionals, of which perhaps the most well-known are the apply family of functions. Here is a description of some of the most common apply functions:</p> <ul><li><p><code>lapply()</code>    = takes a list as an argument and applies the specified function to the list.
</p></li><li><code>sapply()</code> = the same as <code>lapply()</code> but attempts to simplify the output to a vector or a matrix.
<ul><p></p></ul></li> <li><p><code>vapply()</code> = a variant of <code>sapply()</code> in which the output object's type must be specified.</p></li> <li><p><code>Map()</code> is an alias to <code>mapply()</code> with <code>SIMPLIFY = FALSE</code>.</p></li></ul> <h3 id="lapply"><a href="#lapply" class="header-anchor">#</a> lapply()</h3> <p><code>lapply()</code> can be used with two different iterations:</p> <ul><li><code>lapply(variable, FUN)</code></li> <li><code>lapply(seq_along(variable), FUN)</code></li></ul> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># Two ways of finding the mean of x</span>
set.seed<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
df <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>x <span class="token operator">=</span> rnorm<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y <span class="token operator">=</span> rnorm<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
lapply<span class="token punctuation">(</span>df<span class="token punctuation">,</span> mean<span class="token punctuation">)</span>
lapply<span class="token punctuation">(</span>seq_along<span class="token punctuation">(</span>df<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> mean<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="sapply"><a href="#sapply" class="header-anchor">#</a> sapply()</h3> <p><code>sapply()</code> will attempt to resolve its output to either a vector or a matrix.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># Two examples to show the different outputs of sapply()</span>
sapply<span class="token punctuation">(</span>letters<span class="token punctuation">,</span> print<span class="token punctuation">)</span>  <span class="token comment">## produces a vector</span>
x <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> beta <span class="token operator">=</span> exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> logic <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token boolean">TRUE</span><span class="token punctuation">,</span><span class="token boolean">FALSE</span><span class="token punctuation">,</span><span class="token boolean">FALSE</span><span class="token punctuation">,</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sapply<span class="token punctuation">(</span>x<span class="token punctuation">,</span> quantile<span class="token punctuation">)</span>  <span class="token comment">## produces a matrix</span>

</code></pre></div><h3 id="mapply"><a href="#mapply" class="header-anchor">#</a> mapply()</h3> <p><code>mapply()</code> works much like <code>lapply()</code> except it can take multiple vectors as input (hence the m for multivariate).</p> <div class="language-r extra-class"><pre class="language-r"><code>mapply<span class="token punctuation">(</span>sum<span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># 3 will be &quot;recycled&quot; by mapply</span>

</code></pre></div><h2 id="bulk-file-loading"><a href="#bulk-file-loading" class="header-anchor">#</a> Bulk File Loading</h2> <p>for a large number of files which may need to be operated on in a similar process and with well structured file names.</p> <p>firstly a vector of the file names to be accessed must be created, there are multiple options for this:</p> <li>
Creating the vector manually with `paste0()`
<div class="language-r extra-class"><pre class="language-r"><code> files <span class="token operator">&lt;-</span> paste0<span class="token punctuation">(</span><span class="token string">&quot;file_&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;.rds&quot;</span><span class="token punctuation">)</span>

</code></pre></div></li> <li>
Using `list.files()` with a regex search term for the file type, requires knowledge of regular expressions ([regex](http://stackoverflow.com/documentation/regex/259/introduction-to-regular-expressions#t=201607212348569143593)) if other files of same type are in the directory.
<div class="language-r extra-class"><pre class="language-r"><code> files <span class="token operator">&lt;-</span> list.files<span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">&quot;\\.rds$&quot;</span><span class="token punctuation">,</span> full.names <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>

</code></pre></div></li> <p>where <code>X</code> is a vector of part of the files naming format used.</p> <p><code>lapply</code> will output each response as element of a list.</p> <p><code>readRDS</code> is specific to <code>.rds</code> files and will change depending on the application of the process.</p> <div class="language-r extra-class"><pre class="language-r"><code>my_file_list <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>files<span class="token punctuation">,</span> readRDS<span class="token punctuation">)</span>

</code></pre></div><p>This is not necessarily faster than a for loop from testing but allows all files to be an element of a list without assigning them explicitly.</p> <p>Finally, we often need to load multiple packages at once.
This trick can do it quite easily by applying <code>library()</code> to all libraries that we wish to import:</p> <div class="language-r extra-class"><pre class="language-r"><code>lapply<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;jsonlite&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;stringr&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;igraph&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>library<span class="token punctuation">,</span>character.only<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="combining-multiple-data-frames-lapply-mapply"><a href="#combining-multiple-data-frames-lapply-mapply" class="header-anchor">#</a> Combining multiple <code>data.frames</code> (<code>lapply</code>, <code>mapply</code>)</h2> <p>In this exercise, we will generate four bootstrap linear regression models and combine the summaries of these models into a single data frame.</p> <div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>broom<span class="token punctuation">)</span>

<span class="token comment">#* Create the bootstrap data sets</span>
BootData <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
                   <span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> mtcars<span class="token punctuation">[</span>sample<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>nrow<span class="token punctuation">(</span>mtcars<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                             size <span class="token operator">=</span> nrow<span class="token punctuation">(</span>mtcars<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                             replace <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">#* Fit the models</span>
Models <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>BootData<span class="token punctuation">,</span>
                 <span class="token keyword">function</span><span class="token punctuation">(</span>BD<span class="token punctuation">)</span> lm<span class="token punctuation">(</span>mpg <span class="token operator">~</span> qsec <span class="token operator">+</span> wt <span class="token operator">+</span> factor<span class="token punctuation">(</span>am<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                 data <span class="token operator">=</span> BD<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#* Tidy the output into a data.frame</span>
Tidied <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>Models<span class="token punctuation">,</span>
                 tidy<span class="token punctuation">)</span>

<span class="token comment">#* Give each element in the Tidied list a name</span>
Tidied <span class="token operator">&lt;-</span> setNames<span class="token punctuation">(</span>Tidied<span class="token punctuation">,</span> paste0<span class="token punctuation">(</span><span class="token string">&quot;Boot&quot;</span><span class="token punctuation">,</span> seq_along<span class="token punctuation">(</span>Tidied<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>At this point, we can take two approaches to inserting the names into the data.frame.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment">#* Insert the element name into the summary with `lapply`</span>
<span class="token comment">#* Requires passing the names attribute to `lapply` and referencing `Tidied` within</span>
<span class="token comment">#* the applied function.</span>
Described_lapply <span class="token operator">&lt;-</span> 
 lapply<span class="token punctuation">(</span>names<span class="token punctuation">(</span>Tidied<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span>nm<span class="token punctuation">)</span> cbind<span class="token punctuation">(</span>nm<span class="token punctuation">,</span> Tidied<span class="token punctuation">[</span><span class="token punctuation">[</span>nm<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

Combined_lapply <span class="token operator">&lt;-</span> do.call<span class="token punctuation">(</span><span class="token string">&quot;rbind&quot;</span><span class="token punctuation">,</span> Described_lapply<span class="token punctuation">)</span>

<span class="token comment">#* Insert the element name into the summary with `mapply`</span>
<span class="token comment">#* Allows us to pass the names and the elements as separate arguments.</span>
Described_mapply <span class="token operator">&lt;-</span> 
 mapply<span class="token punctuation">(</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>nm<span class="token punctuation">,</span> dframe<span class="token punctuation">)</span> cbind<span class="token punctuation">(</span>nm<span class="token punctuation">,</span> dframe<span class="token punctuation">)</span><span class="token punctuation">,</span>
  names<span class="token punctuation">(</span>Tidied<span class="token punctuation">)</span><span class="token punctuation">,</span>
  Tidied<span class="token punctuation">,</span>
  SIMPLIFY <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>

Combined_mapply <span class="token operator">&lt;-</span> do.call<span class="token punctuation">(</span><span class="token string">&quot;rbind&quot;</span><span class="token punctuation">,</span> Described_mapply<span class="token punctuation">)</span>

</code></pre></div><p>If you're a fan of <code>magrittr</code> style pipes, you can accomplish the entire task in a single chain (though it may not be prudent to do so if you need any of the intermediary objects, such as the model objects themselves):</p> <div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>magrittr<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>broom<span class="token punctuation">)</span>
Combined <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
                   <span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> mtcars<span class="token punctuation">[</span>sample<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>nrow<span class="token punctuation">(</span>mtcars<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                             size <span class="token operator">=</span> nrow<span class="token punctuation">(</span>mtcars<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                             replace <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
 lapply<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>BD<span class="token punctuation">)</span> lm<span class="token punctuation">(</span> mpg <span class="token operator">~</span> qsec <span class="token operator">+</span> wt <span class="token operator">+</span> factor<span class="token punctuation">(</span>am<span class="token punctuation">)</span><span class="token punctuation">,</span> data <span class="token operator">=</span> BD<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
 lapply<span class="token punctuation">(</span>tidy<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
 setNames<span class="token punctuation">(</span>paste0<span class="token punctuation">(</span><span class="token string">&quot;Boot&quot;</span><span class="token punctuation">,</span> seq_along<span class="token punctuation">(</span>.<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
 mapply<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>nm<span class="token punctuation">,</span> dframe<span class="token punctuation">)</span> cbind<span class="token punctuation">(</span>nm<span class="token punctuation">,</span> dframe<span class="token punctuation">)</span><span class="token punctuation">,</span>
        nm <span class="token operator">=</span> names<span class="token punctuation">(</span>.<span class="token punctuation">)</span><span class="token punctuation">,</span>
        dframe <span class="token operator">=</span> .<span class="token punctuation">,</span>
        SIMPLIFY <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
 do.call<span class="token punctuation">(</span><span class="token string">&quot;rbind&quot;</span><span class="token punctuation">,</span> .<span class="token punctuation">)</span>

</code></pre></div><h2 id="using-user-defined-functionals"><a href="#using-user-defined-functionals" class="header-anchor">#</a> Using user-defined functionals</h2> <h3 id="user-defined-functionals"><a href="#user-defined-functionals" class="header-anchor">#</a> User-defined functionals</h3> <p>Users can create their own functionals to varying degrees of complexity. The following examples are from <a href="http://adv-r.had.co.nz/Functionals.html" target="_blank" rel="noopener noreferrer">Functionals<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by Hadley Wickham:</p> <div class="language-r extra-class"><pre class="language-r"><code>randomise <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> f<span class="token punctuation">(</span>runif<span class="token punctuation">(</span><span class="token number">1e3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
lapply2 <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> f<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out <span class="token operator">&lt;-</span> vector<span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> length<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> seq_along<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        out<span class="token punctuation">[</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> f<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    out
<span class="token punctuation">}</span>

</code></pre></div><p>In the first case, <code>randomise</code> accepts a single argument <code>f</code>, and calls it on a sample of Uniform random variables. To demonstrate equivalence, we call <code>set.seed</code> below:</p> <div class="language-r extra-class"><pre class="language-r"><code>set.seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
randomise<span class="token punctuation">(</span>mean<span class="token punctuation">)</span>
<span class="token comment">#[1] 0.4972778</span>
    
set.seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
mean<span class="token punctuation">(</span>runif<span class="token punctuation">(</span><span class="token number">1e3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#[1] 0.4972778</span>


set.seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
randomise<span class="token punctuation">(</span>max<span class="token punctuation">)</span>
<span class="token comment">#[1] 0.9994045</span>

set.seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
max<span class="token punctuation">(</span>runif<span class="token punctuation">(</span><span class="token number">1e3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#[1] 0.9994045</span>

</code></pre></div><p>The second example is a re-implementation of <code>base::lapply</code>, which uses functionals to apply an operation (<code>f</code>) to each element in a list (<code>x</code>). The <code>...</code> parameter allows the user to pass additional arguments to <code>f</code>, such as the <code>na.rm</code> option in the <code>mean</code> function:</p> <div class="language-r extra-class"><pre class="language-r"><code>lapply<span class="token punctuation">(</span>list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">NA</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mean<span class="token punctuation">)</span>
<span class="token comment"># [[1]]</span>
<span class="token comment"># [1] 3</span>
<span class="token comment"># </span>
<span class="token comment"># [[2]]</span>
<span class="token comment"># [1] NA</span>

lapply2<span class="token punctuation">(</span>list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">NA</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mean<span class="token punctuation">)</span>
<span class="token comment"># [[1]]</span>
<span class="token comment"># [1] 3</span>
<span class="token comment"># </span>
<span class="token comment"># [[2]]</span>
<span class="token comment"># [1] NA</span>


lapply<span class="token punctuation">(</span>list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">NA</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mean<span class="token punctuation">,</span> na.rm <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
<span class="token comment"># [[1]]</span>
<span class="token comment"># [1] 3</span>
<span class="token comment"># </span>
<span class="token comment"># [[2]]</span>
<span class="token comment"># [1] 4</span>

lapply2<span class="token punctuation">(</span>list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">NA</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mean<span class="token punctuation">,</span> na.rm <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
<span class="token comment"># [[1]]</span>
<span class="token comment"># [1] 3</span>
<span class="token comment"># </span>
<span class="token comment"># [[2]]</span>
<span class="token comment"># [1] 4</span>

</code></pre></div><h2 id="use-anonymous-functions-with-apply"><a href="#use-anonymous-functions-with-apply" class="header-anchor">#</a> Use anonymous functions with apply</h2> <p><code>apply</code> is used to evaluate a function (maybe an anonymous one) over the margins of an array or matrix.</p> <p>Let's use the <code>iris</code> dataset to illustrate this idea. The <code>iris</code> dataset has measurements of 150 flowers from 3 species. Let's see how this dataset is structured:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> head<span class="token punctuation">(</span>iris<span class="token punctuation">)</span>

  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
<span class="token number">1</span>         <span class="token number">5.1</span>          <span class="token number">3.5</span>          <span class="token number">1.4</span>         <span class="token number">0.2</span>  setosa
<span class="token number">2</span>         <span class="token number">4.9</span>          <span class="token number">3.0</span>          <span class="token number">1.4</span>         <span class="token number">0.2</span>  setosa
<span class="token number">3</span>         <span class="token number">4.7</span>          <span class="token number">3.2</span>          <span class="token number">1.3</span>         <span class="token number">0.2</span>  setosa
<span class="token number">4</span>         <span class="token number">4.6</span>          <span class="token number">3.1</span>          <span class="token number">1.5</span>         <span class="token number">0.2</span>  setosa
<span class="token number">5</span>         <span class="token number">5.0</span>          <span class="token number">3.6</span>          <span class="token number">1.4</span>         <span class="token number">0.2</span>  setosa
<span class="token number">6</span>         <span class="token number">5.4</span>          <span class="token number">3.9</span>          <span class="token number">1.7</span>         <span class="token number">0.4</span>  setosa

</code></pre></div><p>Now, imagine that you want to know the mean of <strong>each</strong> of these variables. One way to solve this might be to use a <code>for</code> loop, but R programmers will often prefer to use <code>apply</code> (for reasons why, see Remarks):</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> apply<span class="token punctuation">(</span>iris<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> mean<span class="token punctuation">)</span>

Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
    <span class="token number">5.843333</span>     <span class="token number">3.057333</span>     <span class="token number">3.758000</span>     <span class="token number">1.199333</span>

</code></pre></div><ul><li>In the first parameter, we subset <code>iris</code> to include only the first 4 columns, because <code>mean</code> only works on numeric data.</li> <li>The second parameter value of <code>2</code> indicates that we want to work on the columns only (the second subscript of the rc array); <code>1</code> would give the row means.</li></ul> <p>In the same way we can calculate more meaningful values:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># standard deviation</span>
apply<span class="token punctuation">(</span>iris<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> sd<span class="token punctuation">)</span>
<span class="token comment"># variance</span>
apply<span class="token punctuation">(</span>iris<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> var<span class="token punctuation">)</span>

</code></pre></div><p><strong>Caveat</strong>: R has some built-in functions which are better for calculating column and row sums and means: <a href="http://stat.ethz.ch/R-manual/R-patched/library/base/html/colSums.html" target="_blank" rel="noopener noreferrer"><code>colMeans</code> and <code>rowMeans</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Now, let's do a different and more meaningful task: let's calculate the mean <strong>only</strong> for those values which are bigger than <code>0.5</code>. For that, we will create our own <code>mean</code> function.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> our.mean.<span class="token keyword">function</span> <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span> mean<span class="token punctuation">(</span>x<span class="token punctuation">[</span>x <span class="token operator">&gt;</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> apply<span class="token punctuation">(</span>iris<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> our.mean.<span class="token keyword">function</span><span class="token punctuation">)</span>

Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
    <span class="token number">5.843333</span>     <span class="token number">3.057333</span>     <span class="token number">3.758000</span>     <span class="token number">1.665347</span>

</code></pre></div><p><strong>(Note the difference in the mean of <code>Petal.Width</code>)</strong></p> <p>But, what if we don't want to use this function in the rest of our code? Then, we can use an anonymous function, and write our code like this:</p> <div class="language-r extra-class"><pre class="language-r"><code>apply<span class="token punctuation">(</span>iris<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span> mean<span class="token punctuation">(</span>x<span class="token punctuation">[</span>x <span class="token operator">&gt;</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>So, as we have seen, we can use <code>apply</code> to execute the same operation on columns or rows of a dataset using only one line.</p> <p><strong>Caveat</strong>: Since <code>apply</code> returns very different kinds of output depending on the length of the results of the specified function, it may not be the best choice in cases where you are not working interactively. Some of the other <code>*apply</code> family functions are a bit more predictable (see Remarks).</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>A function in the <code>*apply</code> family is an abstraction of a <code>for</code> loop. Compared with the <code>for</code> loops <code>*apply</code> functions have the following advantages:</p> <ol><li>Require less code to write.</li> <li>Doesn't have an iteration counter.</li> <li>Doesn't use temporary variables to store intermediate results.</li></ol> <p>However <code>for</code> loops are more general and can give us more control allowing to achieve complex computations that are not always trivial to do using <code>*apply</code> functions.</p> <p>The relationship between <code>for</code> loops and <code>*apply</code> functions is explained in the <a href="http://stackoverflow.com/documentation/r/2201/for-loops#t=20160722154010460381&amp;a=remarks" target="_blank" rel="noopener noreferrer">documentation for <code>for</code> loops<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="members-of-the-apply-family"><a href="#members-of-the-apply-family" class="header-anchor">#</a> Members of the <code>*apply</code> Family</h3> <p>The <code>*apply</code> family of functions contains several variants of the same principle that differ based primarily on the kind of output they return.</p> <table><thead><tr><th>function</th> <th>Input</th> <th>Output</th></tr></thead> <tbody><tr><td><code>apply</code></td> <td><code>matrix</code>, <code>data.frame</code>, or <code>array</code></td> <td>vector or matrix (depending on the length of each element returned)</td></tr> <tr><td><code>sapply</code></td> <td>vector or <code>list</code></td> <td>vector or matrix (depending on the length of each element returned)</td></tr> <tr><td><code>lapply</code></td> <td>vector or <code>list</code></td> <td><code>list</code></td></tr> <tr><td><code>vapply</code></td> <td>vector or `list</td> <td>vector or matrix (depending on the length of each element returned) of the user-designated class</td></tr> <tr><td><code>mapply</code></td> <td>multiple vectors, <code>lists</code> or a combination</td> <td><code>list</code></td></tr></tbody></table> <p>See &quot;Examples&quot; to see how each of these functions is used.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/r/apply-family-of-functions-functionals.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/r/hierarchical-linear-modeling.html" class="prev">
        Hierarchical Linear Modeling
      </a></span> <span class="next"><a href="/r/text-mining.html">
        Text mining
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/2852.c27d8630.js" defer></script>
  </body>
</html>
