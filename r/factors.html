<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>R - Factors</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Consolidating Factor Levels with a List, Basic creation of factors, Changing and reordering factors, Rebuilding factors from zero, Factors">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="R - Factors">
    <meta property="og:description" content="Consolidating Factor Levels with a List, Basic creation of factors, Changing and reordering factors, Rebuilding factors from zero, Factors">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/r/factors.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="R - Factors">
    <meta name="twitter:description" content="Consolidating Factor Levels with a List, Basic creation of factors, Changing and reordering factors, Rebuilding factors from zero, Factors">
    <meta name="twitter:url" content="/r/factors.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/2882.8eb1da3d.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>R</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/r/" class="sidebar-link">Disclaimer</a></li><li><a href="/r/getting-started-with-r-language.html" class="sidebar-link">Getting started with R Language</a></li><li><a href="/r/variables.html" class="sidebar-link">Variables</a></li><li><a href="/r/arithmetic-operators.html" class="sidebar-link">Arithmetic Operators</a></li><li><a href="/r/matrices.html" class="sidebar-link">Matrices</a></li><li><a href="/r/formula.html" class="sidebar-link">Formula</a></li><li><a href="/r/reading-and-writing-strings.html" class="sidebar-link">Reading and writing strings</a></li><li><a href="/r/string-manipulation-with-stringi-package.html" class="sidebar-link">String manipulation with stringi package</a></li><li><a href="/r/classes.html" class="sidebar-link">Classes</a></li><li><a href="/r/lists.html" class="sidebar-link">Lists</a></li><li><a href="/r/hashmaps.html" class="sidebar-link">Hashmaps</a></li><li><a href="/r/creating-vectors.html" class="sidebar-link">Creating vectors</a></li><li><a href="/r/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/r/the-date-class.html" class="sidebar-link">The Date class</a></li><li><a href="/r/date-time-classes-posixct-and-posixlt.html" class="sidebar-link">Date-time classes (POSIXct and POSIXlt)</a></li><li><a href="/r/the-character-class.html" class="sidebar-link">The character class</a></li><li><a href="/r/numeric-classes-and-storage-modes.html" class="sidebar-link">Numeric classes and storage modes</a></li><li><a href="/r/the-logical-class.html" class="sidebar-link">The logical class</a></li><li><a href="/r/data-frames.html" class="sidebar-link">Data frames</a></li><li><a href="/r/split-function.html" class="sidebar-link">Split function</a></li><li><a href="/r/reading-and-writing-tabular-data-in-plain-text-files-csv-tsv-etc.html" class="sidebar-link">Reading and writing tabular data in plain-text files (CSV, TSV, etc.)</a></li><li><a href="/r/pipe-operators-and-others.html" class="sidebar-link">Pipe operators (%&gt;% and others)</a></li><li><a href="/r/linear-models-regression.html" class="sidebar-link">Linear Models (Regression)</a></li><li><a href="/r/data-table.html" class="sidebar-link">data.table</a></li><li><a href="/r/pivot-and-unpivot-with-data-table.html" class="sidebar-link">Pivot and unpivot with data.table</a></li><li><a href="/r/bar-chart.html" class="sidebar-link">Bar Chart</a></li><li><a href="/r/base-plotting.html" class="sidebar-link">Base Plotting</a></li><li><a href="/r/boxplot.html" class="sidebar-link">boxplot</a></li><li><a href="/r/ggplot2.html" class="sidebar-link">ggplot2</a></li><li><a href="/r/factors.html" class="active sidebar-link">Factors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/r/factors.html#consolidating-factor-levels-with-a-list" class="sidebar-link">Consolidating Factor Levels with a List</a></li><li class="sidebar-sub-header"><a href="/r/factors.html#basic-creation-of-factors" class="sidebar-link">Basic creation of factors</a></li><li class="sidebar-sub-header"><a href="/r/factors.html#changing-and-reordering-factors" class="sidebar-link">Changing and reordering factors</a></li><li class="sidebar-sub-header"><a href="/r/factors.html#rebuilding-factors-from-zero" class="sidebar-link">Rebuilding factors from zero</a></li><li class="sidebar-sub-header"><a href="/r/factors.html#factors-2" class="sidebar-link">Factors</a></li></ul></li><li><a href="/r/pattern-matching-and-replacement.html" class="sidebar-link">Pattern Matching and Replacement</a></li><li><a href="/r/run-length-encoding.html" class="sidebar-link">Run-length encoding</a></li><li><a href="/r/speeding-up-tough-to-vectorize-code.html" class="sidebar-link">Speeding up tough-to-vectorize code</a></li><li><a href="/r/introduction-to-geographical-maps.html" class="sidebar-link">Introduction to Geographical Maps</a></li><li><a href="/r/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/r/tidyverse.html" class="sidebar-link">tidyverse</a></li><li><a href="/r/rcpp.html" class="sidebar-link">Rcpp</a></li><li><a href="/r/random-numbers-generator.html" class="sidebar-link">Random Numbers Generator</a></li><li><a href="/r/parallel-processing.html" class="sidebar-link">Parallel processing</a></li><li><a href="/r/subsetting.html" class="sidebar-link">Subsetting</a></li><li><a href="/r/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/r/installing-packages.html" class="sidebar-link">Installing packages</a></li><li><a href="/r/updating-r-and-the-package-library.html" class="sidebar-link">Updating R and the package library</a></li><li><a href="/r/inspecting-packages.html" class="sidebar-link">Inspecting packages</a></li><li><a href="/r/creating-packages-with-devtools.html" class="sidebar-link">Creating packages with devtools</a></li><li><a href="/r/using-pipe-assignment-in-your-own-package-how-to.html" class="sidebar-link">Using pipe assignment in your own package %%: How to ?</a></li><li><a href="/r/arima-models.html" class="sidebar-link">Arima Models</a></li><li><a href="/r/distribution-functions.html" class="sidebar-link">Distribution Functions</a></li><li><a href="/r/shiny.html" class="sidebar-link">Shiny</a></li><li><a href="/r/spatial-analysis.html" class="sidebar-link">spatial analysis</a></li><li><a href="/r/sqldf.html" class="sidebar-link">sqldf</a></li><li><a href="/r/code-profiling.html" class="sidebar-link">Code profiling</a></li><li><a href="/r/control-flow-structures.html" class="sidebar-link">Control flow structures</a></li><li><a href="/r/column-wise-operation.html" class="sidebar-link">Column wise operation</a></li><li><a href="/r/json.html" class="sidebar-link">JSON</a></li><li><a href="/r/rodbc.html" class="sidebar-link">RODBC</a></li><li><a href="/r/lubridate.html" class="sidebar-link">lubridate</a></li><li><a href="/r/time-series-and-forecasting.html" class="sidebar-link">Time Series and Forecasting</a></li><li><a href="/r/strsplit-function.html" class="sidebar-link">strsplit function</a></li><li><a href="/r/web-scraping-and-parsing.html" class="sidebar-link">Web scraping and parsing</a></li><li><a href="/r/generalized-linear-models.html" class="sidebar-link">Generalized linear models</a></li><li><a href="/r/reshaping-data-between-long-and-wide-forms.html" class="sidebar-link">Reshaping data between long and wide forms</a></li><li><a href="/r/rmarkdown-and-knitr-presentation.html" class="sidebar-link">RMarkdown and knitr presentation</a></li><li><a href="/r/scope-of-variables.html" class="sidebar-link">Scope of variables</a></li><li><a href="/r/performing-a-permutation-test.html" class="sidebar-link">Performing a Permutation Test</a></li><li><a href="/r/xgboost.html" class="sidebar-link">xgboost</a></li><li><a href="/r/r-code-vectorization-best-practices.html" class="sidebar-link">R code vectorization best practices</a></li><li><a href="/r/missing-values.html" class="sidebar-link">Missing values</a></li><li><a href="/r/hierarchical-linear-modeling.html" class="sidebar-link">Hierarchical Linear Modeling</a></li><li><a href="/r/apply-family-of-functions-functionals.html" class="sidebar-link">*apply family of functions (functionals)</a></li><li><a href="/r/text-mining.html" class="sidebar-link">Text mining</a></li><li><a href="/r/anova.html" class="sidebar-link">ANOVA</a></li><li><a href="/r/raster-and-image-analysis.html" class="sidebar-link">Raster and Image Analysis</a></li><li><a href="/r/survival-analysis.html" class="sidebar-link">Survival analysis</a></li><li><a href="/r/fault-tolerant-resilient-code.html" class="sidebar-link">Fault-tolerant/resilient code</a></li><li><a href="/r/reproducible-r.html" class="sidebar-link">Reproducible R</a></li><li><a href="/r/fourier-series-and-transformations.html" class="sidebar-link">Fourier Series and Transformations</a></li><li><a href="/r/rprofile.html" class="sidebar-link">.Rprofile</a></li><li><a href="/r/dplyr.html" class="sidebar-link">dplyr</a></li><li><a href="/r/caret.html" class="sidebar-link">caret</a></li><li><a href="/r/extracting-and-listing-files-in-compressed-archives.html" class="sidebar-link">Extracting and Listing Files in Compressed Archives</a></li><li><a href="/r/probability-distributions-with-r.html" class="sidebar-link">Probability Distributions with R</a></li><li><a href="/r/r-in-latex-with-knitr.html" class="sidebar-link">R in LaTeX with knitr</a></li><li><a href="/r/web-crawling-in-r.html" class="sidebar-link">Web Crawling in R</a></li><li><a href="/r/creating-reports-with-rmarkdown.html" class="sidebar-link">Creating reports with RMarkdown</a></li><li><a href="/r/gpu-accelerated-computing.html" class="sidebar-link">GPU-accelerated computing</a></li><li><a href="/r/heatmap-and-heatmap-2.html" class="sidebar-link">heatmap and heatmap.2</a></li><li><a href="/r/network-analysis-with-the-igraph-package.html" class="sidebar-link">Network analysis with the igraph package</a></li><li><a href="/r/functional-programming.html" class="sidebar-link">Functional programming</a></li><li><a href="/r/get-user-input.html" class="sidebar-link">Get user input</a></li><li><a href="/r/spark-api-sparkr.html" class="sidebar-link">Spark API (SparkR)</a></li><li><a href="/r/meta-documentation-guidelines.html" class="sidebar-link">Meta: Documentation Guidelines</a></li><li><a href="/r/input-and-output.html" class="sidebar-link">Input and output</a></li><li><a href="/r/i-o-for-foreign-tables-excel-sas-spss-stata.html" class="sidebar-link">I/O for foreign tables (Excel, SAS, SPSS, Stata)</a></li><li><a href="/r/i-o-for-database-tables.html" class="sidebar-link">I/O for database tables</a></li><li><a href="/r/i-o-for-geographic-data-shapefiles-etc.html" class="sidebar-link">I/O for geographic data (shapefiles, etc.)</a></li><li><a href="/r/i-o-for-raster-images.html" class="sidebar-link">I/O for raster images</a></li><li><a href="/r/i-o-for-r-s-binary-format.html" class="sidebar-link">I/O for R's binary format</a></li><li><a href="/r/recycling.html" class="sidebar-link">Recycling</a></li><li><a href="/r/expression-parse-eval.html" class="sidebar-link">Expression: parse + eval</a></li><li><a href="/r/regular-expression-syntax-in-r.html" class="sidebar-link">Regular Expression Syntax in R</a></li><li><a href="/r/regular-expressions-regex.html" class="sidebar-link">Regular Expressions (regex)</a></li><li><a href="/r/combinatorics.html" class="sidebar-link">Combinatorics</a></li><li><a href="/r/solving-odes-in-r.html" class="sidebar-link">Solving ODEs in R</a></li><li><a href="/r/feature-selection-in-r-removing-extraneous-features.html" class="sidebar-link">Feature Selection in R -- Removing Extraneous Features</a></li><li><a href="/r/bibliography-in-rmd.html" class="sidebar-link">Bibliography in RMD</a></li><li><a href="/r/writing-functions-in-r.html" class="sidebar-link">Writing functions in R</a></li><li><a href="/r/color-schemes-for-graphics.html" class="sidebar-link">Color schemes for graphics</a></li><li><a href="/r/hierarchical-clustering-with-hclust.html" class="sidebar-link">Hierarchical clustering with hclust</a></li><li><a href="/r/random-forest-algorithm.html" class="sidebar-link">Random Forest Algorithm</a></li><li><a href="/r/restful-r-services.html" class="sidebar-link">RESTful R Services</a></li><li><a href="/r/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/r/using-texreg-to-export-models-in-a-paper-ready-way.html" class="sidebar-link">Using texreg to export models in a paper-ready way</a></li><li><a href="/r/publishing.html" class="sidebar-link">Publishing</a></li><li><a href="/r/implement-state-machine-pattern-using-s4-class.html" class="sidebar-link">Implement State Machine Pattern using S4 Class</a></li><li><a href="/r/reshape-using-tidyr.html" class="sidebar-link">Reshape using tidyr</a></li><li><a href="/r/modifying-strings-by-substitution.html" class="sidebar-link">Modifying strings by substitution</a></li><li><a href="/r/non-standard-evaluation-and-standard-evaluation.html" class="sidebar-link">Non-standard evaluation and standard evaluation</a></li><li><a href="/r/randomization.html" class="sidebar-link">Randomization</a></li><li><a href="/r/object-oriented-programming-in-r.html" class="sidebar-link">Object-Oriented Programming in R</a></li><li><a href="/r/coercion.html" class="sidebar-link">Coercion</a></li><li><a href="/r/standardize-analyses-by-writing-standalone-r-scripts.html" class="sidebar-link">Standardize analyses by writing standalone R scripts</a></li><li><a href="/r/analyze-tweets-with-r.html" class="sidebar-link">Analyze tweets with R</a></li><li><a href="/r/natural-language-processing.html" class="sidebar-link">Natural language processing</a></li><li><a href="/r/r-markdown-notebooks-from-rstudio.html" class="sidebar-link">R Markdown Notebooks (from RStudio)</a></li><li><a href="/r/aggregating-data-frames.html" class="sidebar-link">Aggregating data frames</a></li><li><a href="/r/data-acquisition.html" class="sidebar-link">Data acquisition</a></li><li><a href="/r/r-memento-by-examples.html" class="sidebar-link">R memento by examples</a></li><li><a href="/r/updating-r-version.html" class="sidebar-link">Updating R version</a></li><li><a href="/r/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/r/roxygen2.html" class="sidebar-link">roxygen2</a></li><li><a href="/r/cleaning-data.html" class="sidebar-link">Cleaning data</a></li><li><a href="/r/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="factors"><a href="#factors" class="header-anchor">#</a> Factors</h1> <h2 id="consolidating-factor-levels-with-a-list"><a href="#consolidating-factor-levels-with-a-list" class="header-anchor">#</a> Consolidating Factor Levels with a List</h2> <p>There are times in which it is desirable to consolidate factor levels into fewer groups, perhaps because of sparse data in one of the categories.  It may also occur when you have varying spellings or capitalization of the category names.  Consider as an example the factor</p> <div class="language-r extra-class"><pre class="language-r"><code>set.seed<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
colorful <span class="token operator">&lt;-</span> sample<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;RED&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;BLUE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gren&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   size <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
                   replace <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
colorful <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>colorful<span class="token punctuation">)</span>

</code></pre></div><p>Since R is case-sensitive, a frequency table of this vector would appear as below.</p> <div class="language-r extra-class"><pre class="language-r"><code>table<span class="token punctuation">(</span>colorful<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code>colorful  
blue  Blue  BLUE green  gren   red   Red   RED  
   <span class="token number">3</span>     <span class="token number">1</span>     <span class="token number">4</span>     <span class="token number">2</span>     <span class="token number">4</span>     <span class="token number">1</span>     <span class="token number">3</span>     <span class="token number">2</span>

</code></pre></div><p>This table, however, doesn't represent the true distribution of the data, and the categories may effectively be reduced to three types: Blue, Green, and Red.  Three examples are provided.  The first illustrates what seems like an obvious solution, but won't actually provide a solution. The second gives a working solution, but is verbose and computationally expensive.  The third is not an obvious solution, but is relatively compact and computationally efficient.</p> <h3 id="consolidating-levels-using-factor-factor-approach"><a href="#consolidating-levels-using-factor-factor-approach" class="header-anchor">#</a> Consolidating levels using <code>factor</code> (<code>factor_approach</code>)</h3> <div class="language-r extra-class"><pre class="language-r"><code>factor<span class="token punctuation">(</span>as.character<span class="token punctuation">(</span>colorful<span class="token punctuation">)</span><span class="token punctuation">,</span>
       levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;BLUE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gren&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;RED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       labels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Green Blue  Red   Red   Blue  Red   Red   Red   Blue  Red   Green Green Green Blue  Red   Green
<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> Red   Green Green Red  
Levels<span class="token operator">:</span> Blue Blue Blue Green Green Red Red Red
Warning message<span class="token operator">:</span>
In `levels<span class="token operator">&lt;-</span>`<span class="token punctuation">(</span>`<span class="token operator">*</span>tmp<span class="token operator">*</span>`<span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nl <span class="token operator">==</span> nL<span class="token punctuation">)</span> as.character<span class="token punctuation">(</span>labels<span class="token punctuation">)</span> <span class="token keyword">else</span> paste0<span class="token punctuation">(</span>labels<span class="token punctuation">,</span>  <span class="token operator">:</span>
  duplicated levels <span class="token keyword">in</span> factors are deprecated

</code></pre></div><p>Notice that there are duplicated levels.  We still have three categories for &quot;Blue&quot;, which doesn't complete our task of consolidating levels.  Additionally, there is a warning that duplicated levels are deprecated, meaning that this code may generate an error in the future.</p> <h3 id="consolidating-levels-using-ifelse-ifelse-approach"><a href="#consolidating-levels-using-ifelse-ifelse-approach" class="header-anchor">#</a> Consolidating levels using <code>ifelse</code> (<code>ifelse_approach</code>)</h3> <div class="language-r extra-class"><pre class="language-r"><code>factor<span class="token punctuation">(</span>ifelse<span class="token punctuation">(</span>colorful <span class="token percent-operator operator">%in%</span> c<span class="token punctuation">(</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;BLUE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span>
       ifelse<span class="token punctuation">(</span>colorful <span class="token percent-operator operator">%in%</span> c<span class="token punctuation">(</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gren&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token string">&quot;Green&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;Red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Green Blue  Red   Red   Blue  Red   Red   Red   Blue  Red   Green Green Green Blue  Red   Green
<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> Red   Green Green Red  
Levels<span class="token operator">:</span> Blue Green Red

</code></pre></div><p>This code generates the desired result, but requires the use of nested <code>ifelse</code> statements.  While there is nothing wrong with this approach, managing nested <code>ifelse</code> statements can be a tedious task and must be done carefully.</p> <h3 id="consolidating-factors-levels-with-a-list-list-approach"><a href="#consolidating-factors-levels-with-a-list-list-approach" class="header-anchor">#</a> Consolidating Factors Levels with a List (<code>list_approach</code>)</h3> <p>A less obvious way of consolidating levels is to use a list where the name of each element is the desired category name, and the element is a character vector of the levels in the factor that should map to the desired category.  This has the added advantage of working directly on the <code>levels</code> attribute of the factor, without having to assign new objects.</p> <div class="language-r extra-class"><pre class="language-r"><code>levels<span class="token punctuation">(</span>colorful<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> 
     list<span class="token punctuation">(</span><span class="token string">&quot;Blue&quot;</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;BLUE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token string">&quot;Green&quot;</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gren&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token string">&quot;Red&quot;</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;RED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Green Blue  Red   Red   Blue  Red   Red   Red   Blue  Red   Green Green Green Blue  Red   Green
<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> Red   Green Green Red  
Levels<span class="token operator">:</span> Blue Green Red

</code></pre></div><h3 id="benchmarking-each-approach"><a href="#benchmarking-each-approach" class="header-anchor">#</a> Benchmarking each approach</h3> <p>The time required to execute each of these approaches is summarized below. (For the sake of space, the code to generate this summary is not shown)</p> <blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code>Unit<span class="token operator">:</span> microseconds
          expr     min      lq      mean   median      uq     max neval cld
        factor  <span class="token number">78.725</span>  <span class="token number">83.256</span>  <span class="token number">93.26023</span>  <span class="token number">87.5030</span>  <span class="token number">97.131</span> <span class="token number">218.899</span>   <span class="token number">100</span>  b 
        ifelse <span class="token number">104.494</span> <span class="token number">107.609</span> <span class="token number">123.53793</span> <span class="token number">113.4145</span> <span class="token number">128.281</span> <span class="token number">254.580</span>   <span class="token number">100</span>   c
 list_approach  <span class="token number">49.557</span>  <span class="token number">52.955</span>  <span class="token number">60.50756</span>  <span class="token number">54.9370</span>  <span class="token number">65.132</span> <span class="token number">138.193</span>   <span class="token number">100</span> a

</code></pre></div><p>The list approach runs about twice as fast as the <code>ifelse</code> approach.  However, except in times of very, very large amounts of data, the differences in execution time will likely be measured in either microseconds or milliseconds.  With such small time differences, efficiency need not guide the decision of which approach to use.  Instead, use an approach that is familiar and comfortable, and which you and your collaborators will understand on future review.</p> <h2 id="basic-creation-of-factors"><a href="#basic-creation-of-factors" class="header-anchor">#</a> Basic creation of factors</h2> <p>Factors are one way to represent categorical variables in R. A factor is stored internally as a <strong>vector of integers</strong>. The unique elements of the supplied character vector are known as the <strong>levels</strong> of the factor. By default, if the levels are not supplied by the user, then R will generate the set of unique values in the vector, sort these values alphanumerically, and use them as the levels.</p> <div class="language- extra-class"><pre class="language-text"><code>
charvar &lt;- rep(c(&quot;n&quot;, &quot;c&quot;), each = 3)
 f &lt;- factor(charvar)
 f
 levels(f)

&gt; f
[1] n n n c c c
Levels: c n
&gt; levels(f)
[1] &quot;c&quot; &quot;n&quot;

</code></pre></div><p>If you want to change the ordering of the levels, then one option to to specify the levels manually:</p> <div class="language-r extra-class"><pre class="language-r"><code>levels<span class="token punctuation">(</span>factor<span class="token punctuation">(</span>charvar<span class="token punctuation">,</span> levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;n&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token operator">&gt;</span> levels<span class="token punctuation">(</span>factor<span class="token punctuation">(</span>charvar<span class="token punctuation">,</span> levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;n&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">&quot;n&quot;</span> <span class="token string">&quot;c&quot;</span>

</code></pre></div><p>Factors have a number of properties. For example, levels can be given labels:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> f <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>charvar<span class="token punctuation">,</span> levels<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">&quot;n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> labels<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">&quot;Newt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Capybara&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> f
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Newt     Newt     Newt     Capybara Capybara Capybara
Levels<span class="token operator">:</span> Newt Capybara

</code></pre></div><p>Another property that can be assigned is whether the factor is ordered:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> Weekdays <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;Monday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Wednesday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Thursday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tuesday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Friday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sunday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Saturday&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> Weekdays
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Monday    Wednesday Thursday  Tuesday   Friday    Sunday    Saturday 
Levels<span class="token operator">:</span> Friday Monday Saturday Sunday Thursday Tuesday Wednesday
<span class="token operator">&gt;</span> Weekdays <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>Weekdays<span class="token punctuation">,</span> levels<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">&quot;Monday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tuesday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Wednesday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Thursday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Friday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Saturday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sunday&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ordered<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> Weekdays
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Monday    Wednesday Thursday  Tuesday   Friday    Sunday    Saturday 
Levels<span class="token operator">:</span> Monday <span class="token operator">&lt;</span> Tuesday <span class="token operator">&lt;</span> Wednesday <span class="token operator">&lt;</span> Thursday <span class="token operator">&lt;</span> Friday <span class="token operator">&lt;</span> Saturday <span class="token operator">&lt;</span> Sunday

</code></pre></div><p>When a level of the factor is no longer used, you can drop it using the <code>droplevels()</code> function:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> Weekend <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>Weekdays<span class="token punctuation">,</span> Weekdays <span class="token operator">==</span> <span class="token string">&quot;Saturday&quot;</span> <span class="token operator">|</span>  Weekdays <span class="token operator">==</span> <span class="token string">&quot;Sunday&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> Weekend
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Sunday   Saturday
Levels<span class="token operator">:</span> Monday <span class="token operator">&lt;</span> Tuesday <span class="token operator">&lt;</span> Wednesday <span class="token operator">&lt;</span> Thursday <span class="token operator">&lt;</span> Friday <span class="token operator">&lt;</span> Saturday <span class="token operator">&lt;</span> Sunday
<span class="token operator">&gt;</span> Weekend <span class="token operator">&lt;-</span> droplevels<span class="token punctuation">(</span>Weekend<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> Weekend
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Sunday   Saturday
Levels<span class="token operator">:</span> Saturday <span class="token operator">&lt;</span> Sunday

</code></pre></div><h2 id="changing-and-reordering-factors"><a href="#changing-and-reordering-factors" class="header-anchor">#</a> Changing and reordering factors</h2> <p>When factors are created with defaults, <code>levels</code> are formed by <code>as.character</code> applied to the inputs and are ordered alphabetically.</p> <div class="language-r extra-class"><pre class="language-r"><code>charvar <span class="token operator">&lt;-</span> rep<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;W&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> times<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
f <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>charvar<span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;c&quot; &quot;n&quot; &quot;W&quot;</span>

</code></pre></div><p>In some situations the treatment of the default ordering of <code>levels</code> (alphabetic/lexical order) will be acceptable. For example, if one justs want to <code>plot</code> the frequencies, this will be the result:</p> <div class="language-r extra-class"><pre class="language-r"><code>plot<span class="token punctuation">(</span>f<span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>length<span class="token punctuation">(</span>levels<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/8GNrU.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/8GNrU.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>But if we want a different ordering of <code>levels</code>, we need to specify this in the <code>levels</code> or <code>labels</code> parameter (taking care that the meaning of &quot;order&quot; here is different from <strong>ordered</strong> factors, see below).
There are many alternatives to accomplish that task depending on the situation.</p> <p><strong>1. Redefine the factor</strong></p> <p>When it is possible, we can recreate the factor using the <code>levels</code> parameter with the order we want.</p> <div class="language-r extra-class"><pre class="language-r"><code>ff <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>charvar<span class="token punctuation">,</span> levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;W&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>ff<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;n&quot; &quot;W&quot; &quot;c&quot;</span>
 
gg <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>charvar<span class="token punctuation">,</span> levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;W&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>gg<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;W&quot; &quot;c&quot; &quot;n&quot;</span>

</code></pre></div><p>When the input levels are different than the desired output levels, we use the <code>labels</code> parameter which causes the <code>levels</code> parameter to become a &quot;filter&quot; for acceptable input values, but leaves the final values of &quot;levels&quot; for the factor vector as the argument to <code>labels</code>:</p> <div class="language-r extra-class"><pre class="language-r"><code>fm <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>as.numeric<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span>levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             labels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;nn&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WW&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>fm<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;nn&quot; &quot;WW&quot; &quot;cc&quot;</span>

fm <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>LETTERS<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> levels <span class="token operator">=</span> LETTERS<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># only 'A'-'D' as input</span>
                 labels <span class="token operator">=</span> letters<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token comment"># but assigned to 'a'-'d'</span>
fm
<span class="token comment">#[1] a    b    c    d    &lt;NA&gt; &lt;NA&gt;</span>
<span class="token comment">#Levels: a b c d</span>

</code></pre></div><p><strong>2. Use <code>relevel</code> function</strong></p> <p>When there is one specific <code>level</code> that needs to be the first we can use <code>relevel</code>. This happens, for example, in the context of statistical analysis, when a <code>base</code> category is necessary for testing hypothesis.</p> <div class="language-r extra-class"><pre class="language-r"><code>g<span class="token operator">&lt;-</span>relevel<span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token string">&quot;n&quot;</span><span class="token punctuation">)</span> <span class="token comment"># moves n to be the first level</span>
levels<span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;n&quot; &quot;c&quot; &quot;W&quot;  </span>

</code></pre></div><p>As can be verified <code>f</code> and <code>g</code> are the same</p> <div class="language-r extra-class"><pre class="language-r"><code>all.equal<span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;Attributes: &lt; Component “levels”: 2 string mismatches &gt;&quot;</span>
all.equal<span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> check.attributes <span class="token operator">=</span> F<span class="token punctuation">)</span>
<span class="token comment"># [1] TRUE</span>

</code></pre></div><p><strong>3. Reordering factors</strong></p> <p>There are cases when we need to <code>reorder</code> the <code>levels</code> based on a number, a partial result, a computed statistic, or previous calculations. Let's reorder based on the <strong>frequencies</strong> of the <code>levels</code></p> <div class="language-r extra-class"><pre class="language-r"><code>table<span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token comment"># g</span>
<span class="token comment">#  n  c  W </span>
<span class="token comment"># 20 14 17 </span>

</code></pre></div><p>The <code>reorder</code> function is generic (see <code>help(reorder)</code>), but in this context needs: <code>x</code>, in this case the factor; <code>X</code>, a numeric value of the same length as <code>x</code>; and <code>FUN</code>, a function to be applied to <code>X</code> and computed by level of the <code>x</code>, which determines the <code>levels</code> order, by default increasing. The result is the same factor with its levels reordered.</p> <div class="language-r extra-class"><pre class="language-r"><code>g.ord <span class="token operator">&lt;-</span> reorder<span class="token punctuation">(</span>g<span class="token punctuation">,</span>rep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>length<span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FUN<span class="token operator">=</span>sum<span class="token punctuation">)</span> <span class="token comment">#increasing</span>
levels<span class="token punctuation">(</span>g.ord<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;c&quot; &quot;W&quot; &quot;n&quot;</span>

</code></pre></div><p>To get de decreasing order we consider negative values (<code>-1</code>)</p> <div class="language-r extra-class"><pre class="language-r"><code>g.ord.d <span class="token operator">&lt;-</span> reorder<span class="token punctuation">(</span>g<span class="token punctuation">,</span>rep<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>length<span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FUN<span class="token operator">=</span>sum<span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>g.ord.d<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;n&quot; &quot;W&quot; &quot;c&quot;</span>

</code></pre></div><p>Again the factor is the same as the others.</p> <div class="language-r extra-class"><pre class="language-r"><code>data.frame<span class="token punctuation">(</span>f<span class="token punctuation">,</span>g<span class="token punctuation">,</span>g.ord<span class="token punctuation">,</span>g.ord.d<span class="token punctuation">)</span><span class="token punctuation">[</span>seq<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>length<span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">,</span>by<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token comment">#just same lines</span>
<span class="token comment">#    f g g.ord g.ord.d</span>
<span class="token comment"># 1  W W     W       W</span>
<span class="token comment"># 6  W W     W       W</span>
<span class="token comment"># 11 W W     W       W</span>
<span class="token comment"># 16 W W     W       W</span>
<span class="token comment"># 21 n n     n       n</span>
<span class="token comment"># 26 n n     n       n</span>
<span class="token comment"># 31 n n     n       n</span>
<span class="token comment"># 36 n n     n       n</span>
<span class="token comment"># 41 c c     c       c</span>
<span class="token comment"># 46 c c     c       c</span>
<span class="token comment"># 51 c c     c       c</span>

</code></pre></div><p>When there is a <strong>quantitative variable</strong> related to the factor variable, we could use other functions to reorder the <code>levels</code>. Lets take the <code>iris</code> data (<code>help(&quot;iris&quot;)</code> for more information), for reordering the <code>Species</code> factor by using its mean <code>Sepal.Width</code>.</p> <div class="language-r extra-class"><pre class="language-r"><code>miris <span class="token operator">&lt;-</span> iris  <span class="token comment">#help(&quot;iris&quot;) # copy the data</span>
with<span class="token punctuation">(</span>miris<span class="token punctuation">,</span> tapply<span class="token punctuation">(</span>Sepal.Width<span class="token punctuation">,</span>Species<span class="token punctuation">,</span>mean<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#    setosa versicolor  virginica </span>
<span class="token comment">#     3.428      2.770      2.974 </span>

miris<span class="token operator">$</span>Species.o<span class="token operator">&lt;-</span>with<span class="token punctuation">(</span>miris<span class="token punctuation">,</span>reorder<span class="token punctuation">(</span>Species<span class="token punctuation">,</span><span class="token operator">-</span>Sepal.Width<span class="token punctuation">)</span><span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>miris<span class="token operator">$</span>Species.o<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;setosa&quot;     &quot;virginica&quot;  &quot;versicolor&quot;</span>

</code></pre></div><p>The usual <code>boxplot</code> (say: <code>with(miris, boxplot(Petal.Width~Species)</code>) will show the especies in this order: <strong>setosa</strong>, <strong>versicolor</strong>, and <strong>virginica</strong>. But using the ordered factor we get the species ordered by its mean <code>Sepal.Width</code>:</p> <div class="language-r extra-class"><pre class="language-r"><code>boxplot<span class="token punctuation">(</span>Petal.Width<span class="token operator">~</span>Species.o<span class="token punctuation">,</span> data <span class="token operator">=</span> miris<span class="token punctuation">,</span>
        xlab <span class="token operator">=</span> <span class="token string">&quot;Species&quot;</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">&quot;Petal Width&quot;</span><span class="token punctuation">,</span>
        main <span class="token operator">=</span> <span class="token string">&quot;Iris Data, ordered by mean sepal width&quot;</span><span class="token punctuation">,</span> varwidth <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
        col <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">)</span> 

</code></pre></div><p><a href="https://i.stack.imgur.com/iNmN1.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/iNmN1.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Additionally, it is also possible to change the names of <code>levels</code>, combine them into groups, or add new <code>levels</code>. For that we use the function of the same name <code>levels</code>.</p> <div class="language-r extra-class"><pre class="language-r"><code>f1<span class="token operator">&lt;-</span>f
levels<span class="token punctuation">(</span>f1<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;c&quot; &quot;n&quot; &quot;W&quot;</span>
levels<span class="token punctuation">(</span>f1<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">&quot;upper&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;upper&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CAP&quot;</span><span class="token punctuation">)</span> <span class="token comment">#rename and grouping</span>
levels<span class="token punctuation">(</span>f1<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;upper&quot; &quot;CAP&quot; </span>

f2<span class="token operator">&lt;-</span>f1
levels<span class="token punctuation">(</span>f2<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">&quot;upper&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CAP&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Number&quot;</span><span class="token punctuation">)</span> <span class="token comment">#add Number level, which is empty</span>
levels<span class="token punctuation">(</span>f2<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;upper&quot;  &quot;CAP&quot;    &quot;Number&quot;</span>
f2<span class="token punctuation">[</span>length<span class="token punctuation">(</span>f2<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>length<span class="token punctuation">(</span>f2<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&lt;-</span><span class="token string">&quot;Number&quot;</span> <span class="token comment"># add cases for the new level</span>
table<span class="token punctuation">(</span>f2<span class="token punctuation">)</span>
<span class="token comment"># f2</span>
<span class="token comment">#  upper    CAP Number </span>
<span class="token comment">#     33     17      6 </span>

f3<span class="token operator">&lt;-</span>f1
levels<span class="token punctuation">(</span>f3<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>G1 <span class="token operator">=</span> <span class="token string">&quot;upper&quot;</span><span class="token punctuation">,</span> G2 <span class="token operator">=</span> <span class="token string">&quot;CAP&quot;</span><span class="token punctuation">,</span> G3 <span class="token operator">=</span> <span class="token string">&quot;Number&quot;</span><span class="token punctuation">)</span> <span class="token comment"># The same using list</span>
levels<span class="token punctuation">(</span>f3<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;G1&quot; &quot;G2&quot; &quot;G3&quot;</span>
f3<span class="token punctuation">[</span>length<span class="token punctuation">(</span>f3<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>length<span class="token punctuation">(</span>f3<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&lt;-</span><span class="token string">&quot;G3&quot;</span> <span class="token comment">## add cases for the new level</span>
table<span class="token punctuation">(</span>f3<span class="token punctuation">)</span>
<span class="token comment"># f3</span>
<span class="token comment"># G1 G2 G3 </span>
<span class="token comment"># 33 17  7 </span>

</code></pre></div><p><strong>- Ordered factors</strong></p> <p>Finally, we know that <code>ordered</code> factors are different from <code>factors</code>, the first one are used to represent <strong>ordinal data</strong>, and the second one to work with <strong>nominal data</strong>. At first, it does not make sense to change the order of <code>levels</code> for ordered factors, but we can change its <code>labels</code>.</p> <div class="language-r extra-class"><pre class="language-r"><code>ordvar<span class="token operator">&lt;-</span>rep<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;Low&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Medium&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;High&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> times<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

of<span class="token operator">&lt;-</span>ordered<span class="token punctuation">(</span>ordvar<span class="token punctuation">,</span>levels<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">&quot;Low&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Medium&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;High&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>of<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;Low&quot;    &quot;Medium&quot; &quot;High&quot; </span>

of1<span class="token operator">&lt;-</span>of
levels<span class="token punctuation">(</span>of1<span class="token punctuation">)</span><span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">&quot;LOW&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MEDIUM&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;HIGH&quot;</span><span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>of1<span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;LOW&quot;    &quot;MEDIUM&quot; &quot;HIGH&quot;</span>
is.ordered<span class="token punctuation">(</span>of1<span class="token punctuation">)</span>
<span class="token comment"># [1] TRUE</span>
of1
<span class="token comment"># [1] LOW    LOW    LOW    LOW    LOW    LOW    LOW    MEDIUM MEDIUM HIGH   HIGH   HIGH   HIGH  </span>
<span class="token comment"># Levels: LOW &lt; MEDIUM &lt; HIGH</span>

</code></pre></div><h2 id="rebuilding-factors-from-zero"><a href="#rebuilding-factors-from-zero" class="header-anchor">#</a> Rebuilding factors from zero</h2> <h3 id="problem"><a href="#problem" class="header-anchor">#</a> Problem</h3> <p>Factors are used to represent variables that take values from a set of categories, known as Levels in R. For example, some experiment could be characterized by the energy level of a battery, with four levels: empty, low, normal, and full. Then, for 5 different sampling sites, those levels could be identified, in those terms, as follows:</p> <blockquote></blockquote> <p><strong>full</strong>, <strong>full</strong>, <strong>normal</strong>, <strong>empty</strong>, <strong>low</strong></p> <p>Typically, in databases or other information sources, the handling of these data is by arbitrary integer indices associated with the categories or levels. If we assume that, for the given example, we would assign, the indices as follows: 1 = empty, 2 = low, 3 = normal, 4 = full, then the 5 samples could be coded as:</p> <blockquote></blockquote> <p><strong>4</strong>, <strong>4</strong>, <strong>3</strong>, <strong>1</strong>, <strong>2</strong></p> <p>It could happen that, from your source of information, e.g. a database, you only have the encoded list of integers, and the catalog associating each integer with each level-keyword. How can a factor of R be reconstructed from that information?</p> <h3 id="solution"><a href="#solution" class="header-anchor">#</a> Solution</h3> <p>We will simulate a vector of 20 integers that represents
the samples, each of which may have one of four different values:</p> <div class="language-r extra-class"><pre class="language-r"><code>set.seed<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
ii <span class="token operator">&lt;-</span> sample<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> replace<span class="token operator">=</span>T<span class="token punctuation">)</span>
ii

</code></pre></div><blockquote></blockquote> <p>[1] 4 3 4 1 1 3 2 3 2 1 3 4 1 2 4 1 3 1 4 1</p> <p>The first step is to make a factor, from the previous sequence, in which the levels or categories are exactly the numbers from 1 to 4.</p> <div class="language-r extra-class"><pre class="language-r"><code>fii <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>ii<span class="token punctuation">,</span> levels<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># it is necessary to indicate the numeric levels</span>
fii

</code></pre></div><blockquote></blockquote> <p>[1] 4 3 4 1 1 3 2 3 2 1 3 4 1 2 4 1 3 1 4 1<br>
Levels: 1 2 3 4</p> <p>Now simply, you have to <strong>dress</strong> the factor already created with the index tags:</p> <div class="language-r extra-class"><pre class="language-r"><code>levels<span class="token punctuation">(</span>fii<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">&quot;empty&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;low&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;normal&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full&quot;</span><span class="token punctuation">)</span>
fii

</code></pre></div><blockquote></blockquote> <p>[1] full   normal full   empty  empty  normal low    normal low    empty<br>
[11] normal full   empty  low    full   empty  normal empty  full   empty<br>
Levels: empty low normal full</p> <h2 id="factors-2"><a href="#factors-2" class="header-anchor">#</a> Factors</h2> <p><strong>Factors</strong> are one method to represent categorical variables in R. Given a vector <code>x</code> whose values can be converted to characters using <code>as.character()</code>, the default arguments for <code>factor()</code> and <code>as.factor()</code> assign an integer to each distinct element of the vector as well as a level attribute and a label attribute. Levels are the values <code>x</code> can possibly take and labels can either be the given element or determined by the user.</p> <p>To example how factors work we will create a factor with default attributes, then custom levels, and then custom levels and labels.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># standard</span>
factor<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">3</span>
Levels<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>

</code></pre></div><p>Instances can arise where the user knows the number of possible values a factor can take on is greater than the current values in the vector. For this we assign the levels ourselves in <code>factor()</code>.</p> <div class="language-r extra-class"><pre class="language-r"><code>factor<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">3</span>
Levels<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>

</code></pre></div><p>For style purposes the user may wish to assign labels to each level. By default, labels are the character representation of the levels. Here we assign labels for each of the possible levels in the factor.</p> <div class="language-r extra-class"><pre class="language-r"><code>factor<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       labels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;Fox&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dog&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Cow&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Brick&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dolphin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Fox Fox Dog Dog Cow Cow
Levels<span class="token operator">:</span> Fox Dog Cow Brick Dolphin

</code></pre></div><p>Normally, factors can only be compared using  <code>==</code> and <code>!=</code> and if the factors have the same levels. The following comparison of factors fails even though they appear equal because the factors have different factor levels.</p> <div class="language-r extra-class"><pre class="language-r"><code>factor<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> factor<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Error <span class="token keyword">in</span> Ops.factor<span class="token punctuation">(</span>factor<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token operator">:</span> 
  level sets of factors are different

</code></pre></div><p>This makes sense as the extra levels in the RHS mean that R does not have enough information about each factor to compare them in a meaningful way.</p> <p>The operators <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code> and <code>&gt;=</code> are only usable for ordered factors. These can represent categorical values which still have a linear order. An ordered factor can be created by providing the <code>ordered = TRUE</code> argument to the <code>factor</code> function or just using the <code>ordered</code> function.</p> <div class="language-r extra-class"><pre class="language-r"><code>x <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> labels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">'low'</span><span class="token punctuation">,</span> <span class="token string">'medium'</span><span class="token punctuation">,</span> <span class="token string">'high'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ordered <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
print<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> low    medium high  
Levels<span class="token operator">:</span> low <span class="token operator">&lt;</span> medium <span class="token operator">&lt;</span> high

y <span class="token operator">&lt;-</span> ordered<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> labels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">'low'</span><span class="token punctuation">,</span> <span class="token string">'medium'</span><span class="token punctuation">,</span> <span class="token string">'high'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
print<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> high   medium low   
Levels<span class="token operator">:</span> low <span class="token operator">&lt;</span> medium <span class="token operator">&lt;</span> high

x <span class="token operator">&lt;</span> y
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token boolean">TRUE</span> <span class="token boolean">FALSE</span> <span class="token boolean">FALSE</span>

</code></pre></div><p>For more information, see the <a href="http://stackoverflow.com/documentation/r/1104/factors#t=201607270841027749879" target="_blank" rel="noopener noreferrer">Factor documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ol><li>factor(x = character(), levels, labels = levels, exclude = NA, ordered = is.ordered(x), nmax = NA)</li> <li>Run <code>?factor</code> or <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/factor.html" target="_blank" rel="noopener noreferrer">see the documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> online.</li></ol> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>An object with class <code>factor</code> is a vector with a particular set of characteristics.</p> <ol><li>It is stored internally as an <code>integer</code> vector.</li> <li>It maintains a <code>levels</code> attribute the shows the character representation of the values.</li> <li>Its class is stored as <code>factor</code></li></ol> <p>To illustrate, let us generate a vector of 1,000 observations from a set of colors.</p> <div class="language-r extra-class"><pre class="language-r"><code>set.seed<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
Color <span class="token operator">&lt;-</span> sample<span class="token punctuation">(</span>x <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;Red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Yellow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                size <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> 
                replace <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
Color <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>Color<span class="token punctuation">)</span>

</code></pre></div><p>We can observe each of the characteristics of <code>Color</code> listed above:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment">#* 1. It is stored internally as an `integer` vector</span>
typeof<span class="token punctuation">(</span>Color<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">&quot;integer&quot;</span>

</code></pre></div><div class="language-r extra-class"><pre class="language-r"><code><span class="token comment">#* 2. It maintains a `levels` attribute the shows the character representation of the values.</span>
<span class="token comment">#* 3. Its class is stored as `factor`</span>
attributes<span class="token punctuation">(</span>Color<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">$</span>levels
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">&quot;Blue&quot;</span>   <span class="token string">&quot;Green&quot;</span>  <span class="token string">&quot;Red&quot;</span>    <span class="token string">&quot;Yellow&quot;</span>

<span class="token operator">$</span>class
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">&quot;factor&quot;</span>

</code></pre></div><p>The primary advantage of a factor object is efficiency in data storage.  An integer requires less memory to store than a character.  Such efficiency was highly desirable when many computers had much more limited resources than current machines (for a more detailed history of the motivations behind using factors, see <a href="http://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/" target="_blank" rel="noopener noreferrer"><code>stringsAsFactors</code>: an Unauthorized Biography<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>).  The difference in memory use can be seen even in our <code>Color</code> object.  As you can see, storing <code>Color</code> as a character requires about 1.7 times as much memory as the factor object.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment">#* Amount of memory required to store Color as a factor.</span>
object.size<span class="token punctuation">(</span>Color<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token number">4624</span> bytes

</code></pre></div><div class="language-r extra-class"><pre class="language-r"><code><span class="token comment">#* Amount of memory required to store Color as a character</span>
object.size<span class="token punctuation">(</span>as.character<span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token number">8232</span> bytes

</code></pre></div><h3 id="mapping-the-integer-to-the-level"><a href="#mapping-the-integer-to-the-level" class="header-anchor">#</a> Mapping the integer to the level</h3> <p>While the internal computation of factors sees the object as an integer, the desired representation for human consumption is the character level.  For example,</p> <div class="language-r extra-class"><pre class="language-r"><code>head<span class="token punctuation">(</span>Color<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Blue   Blue   Green  Yellow Red    Yellow  
Levels<span class="token operator">:</span> Blue Green Red Yellow

</code></pre></div><p>is a easier for human comprehension than</p> <div class="language-r extra-class"><pre class="language-r"><code>head<span class="token punctuation">(</span>as.numeric<span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">4</span> <span class="token number">3</span> <span class="token number">4</span>

</code></pre></div><p>An approximate illustration of how R goes about matching the character representation to the internal integer value is:</p> <div class="language-r extra-class"><pre class="language-r"><code>head<span class="token punctuation">(</span>levels<span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">[</span>as.numeric<span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">&quot;Blue&quot;</span>   <span class="token string">&quot;Blue&quot;</span>   <span class="token string">&quot;Green&quot;</span>  <span class="token string">&quot;Yellow&quot;</span> <span class="token string">&quot;Red&quot;</span>    <span class="token string">&quot;Yellow&quot;</span>

</code></pre></div><p>Compare these results to</p> <div class="language-r extra-class"><pre class="language-r"><code>head<span class="token punctuation">(</span>Color<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Blue   Blue   Green  Yellow Red    Yellow  
Levels<span class="token operator">:</span> Blue Green Red Yellow

</code></pre></div><h3 id="modern-use-of-factors"><a href="#modern-use-of-factors" class="header-anchor">#</a> Modern use of factors</h3> <p>In 2007, R introduced a hashing method for characters the reduced the memory burden of character vectors (ref: <a href="http://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/" target="_blank" rel="noopener noreferrer"><code>stringsAsFactors</code>: an Unauthorized Biography<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>). Take note that when we determined that characters require 1.7 times more storage space than factors, that was calculated in a recent version of R, meaning that the memory use of character vectors was even more taxing before 2007.</p> <p>Owing to the hashing method in modern R and to far greater memory resources in modern computers, the issue of memory efficiency in storing character values has been reduced to a very small concern.  The prevailing attitude in the R Community is a preference for character vectors over factors in most situations.  The primary causes for the shift away from factors are</p> <ol><li>The increase of unstructured and/or loosely controlled character data</li> <li>The tendency of factors to not behave as desired when the user forgets she is dealing with a factor and not a character</li></ol> <p>In the first case, it makes no sense to store free text or open response fields as factors, as there will unlikely be any pattern that allows for more than one observation per level.  Alternatively, if the data structure is not carefully controlled, it is possible to get multiple levels that correspond to the same category (such as &quot;blue&quot;, &quot;Blue&quot;, and &quot;BLUE&quot;). In such cases, many prefer to manage these discrepancies as characters prior to converting to a factor (if conversion takes place at all).</p> <p>In the second case, if the user thinks she is working with a character vector, certain methods may not respond as anticipated. This basic understanding can lead to confusion and frustration while trying to debug scripts and codes.  While, strictly speaking, this may be considered the fault of the user, most users are happy to avoid using factors and avoid these situations altogether.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/r/factors.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/r/ggplot2.html" class="prev">
        ggplot2
      </a></span> <span class="next"><a href="/r/pattern-matching-and-replacement.html">
        Pattern Matching and Replacement
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/2882.8eb1da3d.js" defer></script>
  </body>
</html>
