<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>R - Fault-tolerant/resilient code</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Using tryCatch()">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="R - Fault-tolerant/resilient code">
    <meta property="og:description" content="Using tryCatch()">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/r/fault-tolerant-resilient-code.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="R - Fault-tolerant/resilient code">
    <meta name="twitter:description" content="Using tryCatch()">
    <meta name="twitter:url" content="/r/fault-tolerant-resilient-code.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/2883.5a544056.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>R</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/r/" class="sidebar-link">Disclaimer</a></li><li><a href="/r/getting-started-with-r-language.html" class="sidebar-link">Getting started with R Language</a></li><li><a href="/r/variables.html" class="sidebar-link">Variables</a></li><li><a href="/r/arithmetic-operators.html" class="sidebar-link">Arithmetic Operators</a></li><li><a href="/r/matrices.html" class="sidebar-link">Matrices</a></li><li><a href="/r/formula.html" class="sidebar-link">Formula</a></li><li><a href="/r/reading-and-writing-strings.html" class="sidebar-link">Reading and writing strings</a></li><li><a href="/r/string-manipulation-with-stringi-package.html" class="sidebar-link">String manipulation with stringi package</a></li><li><a href="/r/classes.html" class="sidebar-link">Classes</a></li><li><a href="/r/lists.html" class="sidebar-link">Lists</a></li><li><a href="/r/hashmaps.html" class="sidebar-link">Hashmaps</a></li><li><a href="/r/creating-vectors.html" class="sidebar-link">Creating vectors</a></li><li><a href="/r/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/r/the-date-class.html" class="sidebar-link">The Date class</a></li><li><a href="/r/date-time-classes-posixct-and-posixlt.html" class="sidebar-link">Date-time classes (POSIXct and POSIXlt)</a></li><li><a href="/r/the-character-class.html" class="sidebar-link">The character class</a></li><li><a href="/r/numeric-classes-and-storage-modes.html" class="sidebar-link">Numeric classes and storage modes</a></li><li><a href="/r/the-logical-class.html" class="sidebar-link">The logical class</a></li><li><a href="/r/data-frames.html" class="sidebar-link">Data frames</a></li><li><a href="/r/split-function.html" class="sidebar-link">Split function</a></li><li><a href="/r/reading-and-writing-tabular-data-in-plain-text-files-csv-tsv-etc.html" class="sidebar-link">Reading and writing tabular data in plain-text files (CSV, TSV, etc.)</a></li><li><a href="/r/pipe-operators-and-others.html" class="sidebar-link">Pipe operators (%&gt;% and others)</a></li><li><a href="/r/linear-models-regression.html" class="sidebar-link">Linear Models (Regression)</a></li><li><a href="/r/data-table.html" class="sidebar-link">data.table</a></li><li><a href="/r/pivot-and-unpivot-with-data-table.html" class="sidebar-link">Pivot and unpivot with data.table</a></li><li><a href="/r/bar-chart.html" class="sidebar-link">Bar Chart</a></li><li><a href="/r/base-plotting.html" class="sidebar-link">Base Plotting</a></li><li><a href="/r/boxplot.html" class="sidebar-link">boxplot</a></li><li><a href="/r/ggplot2.html" class="sidebar-link">ggplot2</a></li><li><a href="/r/factors.html" class="sidebar-link">Factors</a></li><li><a href="/r/pattern-matching-and-replacement.html" class="sidebar-link">Pattern Matching and Replacement</a></li><li><a href="/r/run-length-encoding.html" class="sidebar-link">Run-length encoding</a></li><li><a href="/r/speeding-up-tough-to-vectorize-code.html" class="sidebar-link">Speeding up tough-to-vectorize code</a></li><li><a href="/r/introduction-to-geographical-maps.html" class="sidebar-link">Introduction to Geographical Maps</a></li><li><a href="/r/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/r/tidyverse.html" class="sidebar-link">tidyverse</a></li><li><a href="/r/rcpp.html" class="sidebar-link">Rcpp</a></li><li><a href="/r/random-numbers-generator.html" class="sidebar-link">Random Numbers Generator</a></li><li><a href="/r/parallel-processing.html" class="sidebar-link">Parallel processing</a></li><li><a href="/r/subsetting.html" class="sidebar-link">Subsetting</a></li><li><a href="/r/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/r/installing-packages.html" class="sidebar-link">Installing packages</a></li><li><a href="/r/updating-r-and-the-package-library.html" class="sidebar-link">Updating R and the package library</a></li><li><a href="/r/inspecting-packages.html" class="sidebar-link">Inspecting packages</a></li><li><a href="/r/creating-packages-with-devtools.html" class="sidebar-link">Creating packages with devtools</a></li><li><a href="/r/using-pipe-assignment-in-your-own-package-how-to.html" class="sidebar-link">Using pipe assignment in your own package %%: How to ?</a></li><li><a href="/r/arima-models.html" class="sidebar-link">Arima Models</a></li><li><a href="/r/distribution-functions.html" class="sidebar-link">Distribution Functions</a></li><li><a href="/r/shiny.html" class="sidebar-link">Shiny</a></li><li><a href="/r/spatial-analysis.html" class="sidebar-link">spatial analysis</a></li><li><a href="/r/sqldf.html" class="sidebar-link">sqldf</a></li><li><a href="/r/code-profiling.html" class="sidebar-link">Code profiling</a></li><li><a href="/r/control-flow-structures.html" class="sidebar-link">Control flow structures</a></li><li><a href="/r/column-wise-operation.html" class="sidebar-link">Column wise operation</a></li><li><a href="/r/json.html" class="sidebar-link">JSON</a></li><li><a href="/r/rodbc.html" class="sidebar-link">RODBC</a></li><li><a href="/r/lubridate.html" class="sidebar-link">lubridate</a></li><li><a href="/r/time-series-and-forecasting.html" class="sidebar-link">Time Series and Forecasting</a></li><li><a href="/r/strsplit-function.html" class="sidebar-link">strsplit function</a></li><li><a href="/r/web-scraping-and-parsing.html" class="sidebar-link">Web scraping and parsing</a></li><li><a href="/r/generalized-linear-models.html" class="sidebar-link">Generalized linear models</a></li><li><a href="/r/reshaping-data-between-long-and-wide-forms.html" class="sidebar-link">Reshaping data between long and wide forms</a></li><li><a href="/r/rmarkdown-and-knitr-presentation.html" class="sidebar-link">RMarkdown and knitr presentation</a></li><li><a href="/r/scope-of-variables.html" class="sidebar-link">Scope of variables</a></li><li><a href="/r/performing-a-permutation-test.html" class="sidebar-link">Performing a Permutation Test</a></li><li><a href="/r/xgboost.html" class="sidebar-link">xgboost</a></li><li><a href="/r/r-code-vectorization-best-practices.html" class="sidebar-link">R code vectorization best practices</a></li><li><a href="/r/missing-values.html" class="sidebar-link">Missing values</a></li><li><a href="/r/hierarchical-linear-modeling.html" class="sidebar-link">Hierarchical Linear Modeling</a></li><li><a href="/r/apply-family-of-functions-functionals.html" class="sidebar-link">*apply family of functions (functionals)</a></li><li><a href="/r/text-mining.html" class="sidebar-link">Text mining</a></li><li><a href="/r/anova.html" class="sidebar-link">ANOVA</a></li><li><a href="/r/raster-and-image-analysis.html" class="sidebar-link">Raster and Image Analysis</a></li><li><a href="/r/survival-analysis.html" class="sidebar-link">Survival analysis</a></li><li><a href="/r/fault-tolerant-resilient-code.html" class="active sidebar-link">Fault-tolerant/resilient code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/r/fault-tolerant-resilient-code.html#using-trycatch" class="sidebar-link">Using tryCatch()</a></li></ul></li><li><a href="/r/reproducible-r.html" class="sidebar-link">Reproducible R</a></li><li><a href="/r/fourier-series-and-transformations.html" class="sidebar-link">Fourier Series and Transformations</a></li><li><a href="/r/rprofile.html" class="sidebar-link">.Rprofile</a></li><li><a href="/r/dplyr.html" class="sidebar-link">dplyr</a></li><li><a href="/r/caret.html" class="sidebar-link">caret</a></li><li><a href="/r/extracting-and-listing-files-in-compressed-archives.html" class="sidebar-link">Extracting and Listing Files in Compressed Archives</a></li><li><a href="/r/probability-distributions-with-r.html" class="sidebar-link">Probability Distributions with R</a></li><li><a href="/r/r-in-latex-with-knitr.html" class="sidebar-link">R in LaTeX with knitr</a></li><li><a href="/r/web-crawling-in-r.html" class="sidebar-link">Web Crawling in R</a></li><li><a href="/r/creating-reports-with-rmarkdown.html" class="sidebar-link">Creating reports with RMarkdown</a></li><li><a href="/r/gpu-accelerated-computing.html" class="sidebar-link">GPU-accelerated computing</a></li><li><a href="/r/heatmap-and-heatmap-2.html" class="sidebar-link">heatmap and heatmap.2</a></li><li><a href="/r/network-analysis-with-the-igraph-package.html" class="sidebar-link">Network analysis with the igraph package</a></li><li><a href="/r/functional-programming.html" class="sidebar-link">Functional programming</a></li><li><a href="/r/get-user-input.html" class="sidebar-link">Get user input</a></li><li><a href="/r/spark-api-sparkr.html" class="sidebar-link">Spark API (SparkR)</a></li><li><a href="/r/meta-documentation-guidelines.html" class="sidebar-link">Meta: Documentation Guidelines</a></li><li><a href="/r/input-and-output.html" class="sidebar-link">Input and output</a></li><li><a href="/r/i-o-for-foreign-tables-excel-sas-spss-stata.html" class="sidebar-link">I/O for foreign tables (Excel, SAS, SPSS, Stata)</a></li><li><a href="/r/i-o-for-database-tables.html" class="sidebar-link">I/O for database tables</a></li><li><a href="/r/i-o-for-geographic-data-shapefiles-etc.html" class="sidebar-link">I/O for geographic data (shapefiles, etc.)</a></li><li><a href="/r/i-o-for-raster-images.html" class="sidebar-link">I/O for raster images</a></li><li><a href="/r/i-o-for-r-s-binary-format.html" class="sidebar-link">I/O for R's binary format</a></li><li><a href="/r/recycling.html" class="sidebar-link">Recycling</a></li><li><a href="/r/expression-parse-eval.html" class="sidebar-link">Expression: parse + eval</a></li><li><a href="/r/regular-expression-syntax-in-r.html" class="sidebar-link">Regular Expression Syntax in R</a></li><li><a href="/r/regular-expressions-regex.html" class="sidebar-link">Regular Expressions (regex)</a></li><li><a href="/r/combinatorics.html" class="sidebar-link">Combinatorics</a></li><li><a href="/r/solving-odes-in-r.html" class="sidebar-link">Solving ODEs in R</a></li><li><a href="/r/feature-selection-in-r-removing-extraneous-features.html" class="sidebar-link">Feature Selection in R -- Removing Extraneous Features</a></li><li><a href="/r/bibliography-in-rmd.html" class="sidebar-link">Bibliography in RMD</a></li><li><a href="/r/writing-functions-in-r.html" class="sidebar-link">Writing functions in R</a></li><li><a href="/r/color-schemes-for-graphics.html" class="sidebar-link">Color schemes for graphics</a></li><li><a href="/r/hierarchical-clustering-with-hclust.html" class="sidebar-link">Hierarchical clustering with hclust</a></li><li><a href="/r/random-forest-algorithm.html" class="sidebar-link">Random Forest Algorithm</a></li><li><a href="/r/restful-r-services.html" class="sidebar-link">RESTful R Services</a></li><li><a href="/r/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/r/using-texreg-to-export-models-in-a-paper-ready-way.html" class="sidebar-link">Using texreg to export models in a paper-ready way</a></li><li><a href="/r/publishing.html" class="sidebar-link">Publishing</a></li><li><a href="/r/implement-state-machine-pattern-using-s4-class.html" class="sidebar-link">Implement State Machine Pattern using S4 Class</a></li><li><a href="/r/reshape-using-tidyr.html" class="sidebar-link">Reshape using tidyr</a></li><li><a href="/r/modifying-strings-by-substitution.html" class="sidebar-link">Modifying strings by substitution</a></li><li><a href="/r/non-standard-evaluation-and-standard-evaluation.html" class="sidebar-link">Non-standard evaluation and standard evaluation</a></li><li><a href="/r/randomization.html" class="sidebar-link">Randomization</a></li><li><a href="/r/object-oriented-programming-in-r.html" class="sidebar-link">Object-Oriented Programming in R</a></li><li><a href="/r/coercion.html" class="sidebar-link">Coercion</a></li><li><a href="/r/standardize-analyses-by-writing-standalone-r-scripts.html" class="sidebar-link">Standardize analyses by writing standalone R scripts</a></li><li><a href="/r/analyze-tweets-with-r.html" class="sidebar-link">Analyze tweets with R</a></li><li><a href="/r/natural-language-processing.html" class="sidebar-link">Natural language processing</a></li><li><a href="/r/r-markdown-notebooks-from-rstudio.html" class="sidebar-link">R Markdown Notebooks (from RStudio)</a></li><li><a href="/r/aggregating-data-frames.html" class="sidebar-link">Aggregating data frames</a></li><li><a href="/r/data-acquisition.html" class="sidebar-link">Data acquisition</a></li><li><a href="/r/r-memento-by-examples.html" class="sidebar-link">R memento by examples</a></li><li><a href="/r/updating-r-version.html" class="sidebar-link">Updating R version</a></li><li><a href="/r/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/r/roxygen2.html" class="sidebar-link">roxygen2</a></li><li><a href="/r/cleaning-data.html" class="sidebar-link">Cleaning data</a></li><li><a href="/r/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fault-tolerant-resilient-code"><a href="#fault-tolerant-resilient-code" class="header-anchor">#</a> Fault-tolerant/resilient code</h1> <h2 id="using-trycatch"><a href="#using-trycatch" class="header-anchor">#</a> Using tryCatch()</h2> <p>We're defining a robust version of a function that reads the HTML code from a given URL. <strong>Robust</strong> in the sense that we want it to handle situations where something either goes wrong (error) or not quite the way we planned it to (warning). The umbrella term for errors and warnings is <strong>condition</strong></p> <h3 id="function-definition-using-trycatch"><a href="#function-definition-using-trycatch" class="header-anchor">#</a> Function definition using <code>tryCatch</code></h3> <div class="language-r extra-class"><pre class="language-r"><code>readUrl <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out <span class="token operator">&lt;-</span> tryCatch<span class="token punctuation">(</span>

        <span class="token comment">########################################################</span>
        <span class="token comment"># Try part: define the expression(s) you want to &quot;try&quot; #</span>
        <span class="token comment">########################################################</span>

        <span class="token punctuation">{</span>
            <span class="token comment"># Just to highlight: </span>
            <span class="token comment"># If you want to use more than one R expression in the &quot;try part&quot; </span>
            <span class="token comment"># then you'll have to use curly brackets. </span>
            <span class="token comment"># Otherwise, just write the single expression you want to try and </span>

            message<span class="token punctuation">(</span><span class="token string">&quot;This is the 'try' part&quot;</span><span class="token punctuation">)</span>
            readLines<span class="token punctuation">(</span>con <span class="token operator">=</span> url<span class="token punctuation">,</span> warn <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">########################################################################</span>
        <span class="token comment"># Condition handler part: define how you want conditions to be handled #</span>
        <span class="token comment">########################################################################</span>

        <span class="token comment"># Handler when a warning occurs:</span>
        warning <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cond<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            message<span class="token punctuation">(</span>paste<span class="token punctuation">(</span><span class="token string">&quot;Reading the URL caused a warning:&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>
            message<span class="token punctuation">(</span><span class="token string">&quot;Here's the original warning message:&quot;</span><span class="token punctuation">)</span>
            message<span class="token punctuation">(</span>cond<span class="token punctuation">)</span>

            <span class="token comment"># Choose a return value when such a type of condition occurs</span>
            return<span class="token punctuation">(</span><span class="token keyword">NULL</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment"># Handler when an error occurs:</span>
        error <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cond<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            message<span class="token punctuation">(</span>paste<span class="token punctuation">(</span><span class="token string">&quot;This seems to be an invalid URL:&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>
            message<span class="token punctuation">(</span><span class="token string">&quot;Here's the original error message:&quot;</span><span class="token punctuation">)</span>
            message<span class="token punctuation">(</span>cond<span class="token punctuation">)</span>

            <span class="token comment"># Choose a return value when such a type of condition occurs</span>
            return<span class="token punctuation">(</span><span class="token keyword">NA</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">###############################################</span>
        <span class="token comment"># Final part: define what should happen AFTER #</span>
        <span class="token comment"># everything has been tried and/or handled    #</span>
        <span class="token comment">###############################################</span>

        finally <span class="token operator">=</span> <span class="token punctuation">{</span>
            message<span class="token punctuation">(</span>paste<span class="token punctuation">(</span><span class="token string">&quot;Processed URL:&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>
            message<span class="token punctuation">(</span><span class="token string">&quot;Some message at the end\n&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>    
    return<span class="token punctuation">(</span>out<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="testing-things-out"><a href="#testing-things-out" class="header-anchor">#</a> Testing things out</h3> <p>Let's define a vector of URLs where one element isn't a valid URL</p> <div class="language-r extra-class"><pre class="language-r"><code>urls <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span>
    <span class="token string">&quot;http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://en.wikipedia.org/wiki/Xz&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;I'm no URL&quot;</span>
<span class="token punctuation">)</span>

</code></pre></div><p>And pass this as input to the function we defined above</p> <div class="language-r extra-class"><pre class="language-r"><code>y <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>urls<span class="token punctuation">,</span> readUrl<span class="token punctuation">)</span>
<span class="token comment"># Processed URL: http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html</span>
<span class="token comment"># Some message at the end</span>
<span class="token comment">#</span>
<span class="token comment"># Processed URL: http://en.wikipedia.org/wiki/Xz</span>
<span class="token comment"># Some message at the end</span>
<span class="token comment">#</span>
<span class="token comment"># URL does not seem to exist: I'm no URL </span>
<span class="token comment"># Here's the original error message:</span>
<span class="token comment"># cannot open the connection</span>
<span class="token comment"># Processed URL: I'm no URL</span>
<span class="token comment"># Some message at the end</span>
<span class="token comment">#</span>
<span class="token comment"># Warning message:</span>
<span class="token comment"># In file(con, &quot;r&quot;) : cannot open file 'I'm no URL': No such file or directory</span>

</code></pre></div><h3 id="investigating-the-output"><a href="#investigating-the-output" class="header-anchor">#</a> Investigating the output</h3> <div class="language-r extra-class"><pre class="language-r"><code>length<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
<span class="token comment"># [1] 3</span>

head<span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot;&gt;&quot;      </span>
<span class="token comment"># [2] &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;R: Functions to Manipulate Connections&lt;/title&gt;&quot;      </span>
<span class="token comment"># [3] &quot;&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=utf-8\&quot;&gt;&quot;</span>
<span class="token comment"># [4] &quot;&lt;link rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot; href=\&quot;R.css\&quot;&gt;&quot;             </span>
<span class="token comment"># [5] &quot;&lt;/head&gt;&lt;body&gt;&quot;                                                          </span>
<span class="token comment"># [6] &quot;&quot;    </span>

y<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment"># [1] NA</span>

</code></pre></div><h4 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h4> <table><thead><tr><th>Parameter</th> <th>Details</th></tr></thead> <tbody><tr><td>expr</td> <td>In case the &quot;try part&quot; was completed successfully <code>tryCatch</code> will return the <strong>last evaluated expression</strong>. Hence, the actual value being returned in case everything went well and there is no condition (i.e. a <strong>warning</strong> or an <strong>error</strong>) is the return value of <code>readLines</code>. Note that you don't need to explicilty state the return value via <code>return</code> as code in the &quot;try part&quot; is not wrapped insided a function environment (unlike that for the condition handlers for warnings and error below)</td></tr> <tr><td>warning/error/etc</td> <td>Provide/define a handler function for all the conditions that you want to handle explicitly. AFAIU, you can provide handlers for <strong>any</strong> type of conditions (not just <strong>warnings</strong> and <strong>errors</strong>, but also <strong>custom</strong> conditions; see <code>simpleCondition</code> and friends for that) as long as the <strong>name of the respective handler function matches the class of the respective condition</strong> (see the <strong>Details</strong> part of the doc for <code>tryCatch</code>).</td></tr> <tr><td>finally</td> <td>Here goes everything that should be executed at the very end, <strong>regardless</strong> if the expression in the &quot;try part&quot; succeeded or if there was any condition. If you want more than one expression to be executed, then you need to wrap them in curly brackets, otherwise you could just have written <code>finally = &lt;expression&gt;</code> (i.e. the same logic as for &quot;try part&quot;.</td></tr></tbody></table> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <h3 id="trycatch"><a href="#trycatch" class="header-anchor">#</a> <code>tryCatch</code></h3> <p><code>tryCatch</code> returns the value associated to executing <code>expr</code> unless there's a condition: a warning or an error. If that's the case, specific return values (e.g.  <code>return(NA)</code> above) can be specified by supplying a handler function for the respective conditions (see arguments <code>warning</code> and <code>error</code> in <code>?tryCatch</code>). These can be functions that already exist, but you can also define them within <code>tryCatch</code> (as we did above).</p> <h3 id="implications-of-choosing-specific-return-values-of-the-handler-functions"><a href="#implications-of-choosing-specific-return-values-of-the-handler-functions" class="header-anchor">#</a> Implications of choosing specific return values of the handler functions</h3> <p>As we've specified that <code>NA</code> should be returned in case of an error in the &quot;try part&quot;, the third element in <code>y</code> is <code>NA</code>. If we'd have chosen <code>NULL</code> to be the return value, the length of <code>y</code> would just have been <code>2</code> instead of <code>3</code> as <code>lapply</code> will simply &quot;ignore/drop&quot; return values that are <code>NULL</code>. Also note that if you don't specify an <strong>explicit</strong> return value via <code>return</code>, the handler functions will return <code>NULL</code> (i.e. in case of an <strong>error</strong> or a <strong>warning</strong> condition).</p> <h3 id="undesired-warning-message"><a href="#undesired-warning-message" class="header-anchor">#</a> &quot;Undesired&quot; warning message</h3> <p>When the third element of our <code>urls</code> vector hits our function, we get the following warning <strong>in addition</strong> to the fact that an error occurs (<code>readLines</code> first complains that it can't open the connection via a <strong>warning</strong> before actually failing with an <strong>error</strong>):</p> <div class="language-r extra-class"><pre class="language-r"><code>Warning message<span class="token operator">:</span>
    In file<span class="token punctuation">(</span>con<span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span> cannot open file <span class="token string">'I'</span>m no URL'<span class="token operator">:</span> No such file or directory

</code></pre></div><p>An <strong>error</strong> &quot;wins&quot; over a <strong>warning</strong>, so we're not really interested in the warning in this particular case. Thus we have set <code>warn = FALSE</code> in <code>readLines</code>, but that doesn't seem to have any effect. An alternative way to suppress the warning is to use</p> <div class="language-r extra-class"><pre class="language-r"><code>suppressWarnings<span class="token punctuation">(</span>readLines<span class="token punctuation">(</span>con <span class="token operator">=</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>instead of</p> <div class="language-r extra-class"><pre class="language-r"><code>readLines<span class="token punctuation">(</span>con <span class="token operator">=</span> url<span class="token punctuation">,</span> warn <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/r/fault-tolerant-resilient-code.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/r/survival-analysis.html" class="prev">
        Survival analysis
      </a></span> <span class="next"><a href="/r/reproducible-r.html">
        Reproducible R
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/2883.5a544056.js" defer></script>
  </body>
</html>
