<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>R - Data frames</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Create an empty data.frame, Subsetting rows and columns from a data frame, Convenience functions to manipulate data.frames, Introduction, Convert all columns of a data.frame to character class, Convert data stored in a list to a single data frame using do.call, Subsetting Rows by Column Values">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="R - Data frames">
    <meta property="og:description" content="Create an empty data.frame, Subsetting rows and columns from a data frame, Convenience functions to manipulate data.frames, Introduction, Convert all columns of a data.frame to character class, Convert data stored in a list to a single data frame using do.call, Subsetting Rows by Column Values">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/r/data-frames.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="R - Data frames">
    <meta name="twitter:description" content="Create an empty data.frame, Subsetting rows and columns from a data frame, Convenience functions to manipulate data.frames, Introduction, Convert all columns of a data.frame to character class, Convert data stored in a list to a single data frame using do.call, Subsetting Rows by Column Values">
    <meta name="twitter:url" content="/r/data-frames.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2875.718699b5.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>R</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/r/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/r/getting-started-with-r-language.html" class="sidebar-link">Getting started with R Language</a></li><li><a href="/r/variables.html" class="sidebar-link">Variables</a></li><li><a href="/r/arithmetic-operators.html" class="sidebar-link">Arithmetic Operators</a></li><li><a href="/r/matrices.html" class="sidebar-link">Matrices</a></li><li><a href="/r/formula.html" class="sidebar-link">Formula</a></li><li><a href="/r/reading-and-writing-strings.html" class="sidebar-link">Reading and writing strings</a></li><li><a href="/r/string-manipulation-with-stringi-package.html" class="sidebar-link">String manipulation with stringi package</a></li><li><a href="/r/classes.html" class="sidebar-link">Classes</a></li><li><a href="/r/lists.html" class="sidebar-link">Lists</a></li><li><a href="/r/hashmaps.html" class="sidebar-link">Hashmaps</a></li><li><a href="/r/creating-vectors.html" class="sidebar-link">Creating vectors</a></li><li><a href="/r/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/r/the-date-class.html" class="sidebar-link">The Date class</a></li><li><a href="/r/date-time-classes-posixct-and-posixlt.html" class="sidebar-link">Date-time classes (POSIXct and POSIXlt)</a></li><li><a href="/r/the-character-class.html" class="sidebar-link">The character class</a></li><li><a href="/r/numeric-classes-and-storage-modes.html" class="sidebar-link">Numeric classes and storage modes</a></li><li><a href="/r/the-logical-class.html" class="sidebar-link">The logical class</a></li><li><a href="/r/data-frames.html" aria-current="page" class="active sidebar-link">Data frames</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/r/data-frames.html#create-an-empty-data-frame" class="sidebar-link">Create an empty data.frame</a></li><li class="sidebar-sub-header"><a href="/r/data-frames.html#subsetting-rows-and-columns-from-a-data-frame" class="sidebar-link">Subsetting rows and columns from a data frame</a></li><li class="sidebar-sub-header"><a href="/r/data-frames.html#convenience-functions-to-manipulate-data-frames" class="sidebar-link">Convenience functions to manipulate data.frames</a></li><li class="sidebar-sub-header"><a href="/r/data-frames.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/r/data-frames.html#convert-all-columns-of-a-data-frame-to-character-class" class="sidebar-link">Convert all columns of a data.frame to character class</a></li><li class="sidebar-sub-header"><a href="/r/data-frames.html#convert-data-stored-in-a-list-to-a-single-data-frame-using-do-call" class="sidebar-link">Convert data stored in a list to a single data frame using do.call</a></li><li class="sidebar-sub-header"><a href="/r/data-frames.html#subsetting-rows-by-column-values" class="sidebar-link">Subsetting Rows by Column Values</a></li></ul></li><li><a href="/r/split-function.html" class="sidebar-link">Split function</a></li><li><a href="/r/reading-and-writing-tabular-data-in-plain-text-files-csv-tsv-etc.html" class="sidebar-link">Reading and writing tabular data in plain-text files (CSV, TSV, etc.)</a></li><li><a href="/r/pipe-operators-and-others.html" class="sidebar-link">Pipe operators (%&gt;% and others)</a></li><li><a href="/r/linear-models-regression.html" class="sidebar-link">Linear Models (Regression)</a></li><li><a href="/r/data-table.html" class="sidebar-link">data.table</a></li><li><a href="/r/pivot-and-unpivot-with-data-table.html" class="sidebar-link">Pivot and unpivot with data.table</a></li><li><a href="/r/bar-chart.html" class="sidebar-link">Bar Chart</a></li><li><a href="/r/base-plotting.html" class="sidebar-link">Base Plotting</a></li><li><a href="/r/boxplot.html" class="sidebar-link">boxplot</a></li><li><a href="/r/ggplot2.html" class="sidebar-link">ggplot2</a></li><li><a href="/r/factors.html" class="sidebar-link">Factors</a></li><li><a href="/r/pattern-matching-and-replacement.html" class="sidebar-link">Pattern Matching and Replacement</a></li><li><a href="/r/run-length-encoding.html" class="sidebar-link">Run-length encoding</a></li><li><a href="/r/speeding-up-tough-to-vectorize-code.html" class="sidebar-link">Speeding up tough-to-vectorize code</a></li><li><a href="/r/introduction-to-geographical-maps.html" class="sidebar-link">Introduction to Geographical Maps</a></li><li><a href="/r/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/r/tidyverse.html" class="sidebar-link">tidyverse</a></li><li><a href="/r/rcpp.html" class="sidebar-link">Rcpp</a></li><li><a href="/r/random-numbers-generator.html" class="sidebar-link">Random Numbers Generator</a></li><li><a href="/r/parallel-processing.html" class="sidebar-link">Parallel processing</a></li><li><a href="/r/subsetting.html" class="sidebar-link">Subsetting</a></li><li><a href="/r/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/r/installing-packages.html" class="sidebar-link">Installing packages</a></li><li><a href="/r/updating-r-and-the-package-library.html" class="sidebar-link">Updating R and the package library</a></li><li><a href="/r/inspecting-packages.html" class="sidebar-link">Inspecting packages</a></li><li><a href="/r/creating-packages-with-devtools.html" class="sidebar-link">Creating packages with devtools</a></li><li><a href="/r/using-pipe-assignment-in-your-own-package-how-to.html" class="sidebar-link">Using pipe assignment in your own package %%: How to ?</a></li><li><a href="/r/arima-models.html" class="sidebar-link">Arima Models</a></li><li><a href="/r/distribution-functions.html" class="sidebar-link">Distribution Functions</a></li><li><a href="/r/shiny.html" class="sidebar-link">Shiny</a></li><li><a href="/r/spatial-analysis.html" class="sidebar-link">spatial analysis</a></li><li><a href="/r/sqldf.html" class="sidebar-link">sqldf</a></li><li><a href="/r/code-profiling.html" class="sidebar-link">Code profiling</a></li><li><a href="/r/control-flow-structures.html" class="sidebar-link">Control flow structures</a></li><li><a href="/r/column-wise-operation.html" class="sidebar-link">Column wise operation</a></li><li><a href="/r/json.html" class="sidebar-link">JSON</a></li><li><a href="/r/rodbc.html" class="sidebar-link">RODBC</a></li><li><a href="/r/lubridate.html" class="sidebar-link">lubridate</a></li><li><a href="/r/time-series-and-forecasting.html" class="sidebar-link">Time Series and Forecasting</a></li><li><a href="/r/strsplit-function.html" class="sidebar-link">strsplit function</a></li><li><a href="/r/web-scraping-and-parsing.html" class="sidebar-link">Web scraping and parsing</a></li><li><a href="/r/generalized-linear-models.html" class="sidebar-link">Generalized linear models</a></li><li><a href="/r/reshaping-data-between-long-and-wide-forms.html" class="sidebar-link">Reshaping data between long and wide forms</a></li><li><a href="/r/rmarkdown-and-knitr-presentation.html" class="sidebar-link">RMarkdown and knitr presentation</a></li><li><a href="/r/scope-of-variables.html" class="sidebar-link">Scope of variables</a></li><li><a href="/r/performing-a-permutation-test.html" class="sidebar-link">Performing a Permutation Test</a></li><li><a href="/r/xgboost.html" class="sidebar-link">xgboost</a></li><li><a href="/r/r-code-vectorization-best-practices.html" class="sidebar-link">R code vectorization best practices</a></li><li><a href="/r/missing-values.html" class="sidebar-link">Missing values</a></li><li><a href="/r/hierarchical-linear-modeling.html" class="sidebar-link">Hierarchical Linear Modeling</a></li><li><a href="/r/apply-family-of-functions-functionals.html" class="sidebar-link">*apply family of functions (functionals)</a></li><li><a href="/r/text-mining.html" class="sidebar-link">Text mining</a></li><li><a href="/r/anova.html" class="sidebar-link">ANOVA</a></li><li><a href="/r/raster-and-image-analysis.html" class="sidebar-link">Raster and Image Analysis</a></li><li><a href="/r/survival-analysis.html" class="sidebar-link">Survival analysis</a></li><li><a href="/r/fault-tolerant-resilient-code.html" class="sidebar-link">Fault-tolerant/resilient code</a></li><li><a href="/r/reproducible-r.html" class="sidebar-link">Reproducible R</a></li><li><a href="/r/fourier-series-and-transformations.html" class="sidebar-link">Fourier Series and Transformations</a></li><li><a href="/r/rprofile.html" class="sidebar-link">.Rprofile</a></li><li><a href="/r/dplyr.html" class="sidebar-link">dplyr</a></li><li><a href="/r/caret.html" class="sidebar-link">caret</a></li><li><a href="/r/extracting-and-listing-files-in-compressed-archives.html" class="sidebar-link">Extracting and Listing Files in Compressed Archives</a></li><li><a href="/r/probability-distributions-with-r.html" class="sidebar-link">Probability Distributions with R</a></li><li><a href="/r/r-in-latex-with-knitr.html" class="sidebar-link">R in LaTeX with knitr</a></li><li><a href="/r/web-crawling-in-r.html" class="sidebar-link">Web Crawling in R</a></li><li><a href="/r/creating-reports-with-rmarkdown.html" class="sidebar-link">Creating reports with RMarkdown</a></li><li><a href="/r/gpu-accelerated-computing.html" class="sidebar-link">GPU-accelerated computing</a></li><li><a href="/r/heatmap-and-heatmap-2.html" class="sidebar-link">heatmap and heatmap.2</a></li><li><a href="/r/network-analysis-with-the-igraph-package.html" class="sidebar-link">Network analysis with the igraph package</a></li><li><a href="/r/functional-programming.html" class="sidebar-link">Functional programming</a></li><li><a href="/r/get-user-input.html" class="sidebar-link">Get user input</a></li><li><a href="/r/spark-api-sparkr.html" class="sidebar-link">Spark API (SparkR)</a></li><li><a href="/r/meta-documentation-guidelines.html" class="sidebar-link">Meta: Documentation Guidelines</a></li><li><a href="/r/input-and-output.html" class="sidebar-link">Input and output</a></li><li><a href="/r/i-o-for-foreign-tables-excel-sas-spss-stata.html" class="sidebar-link">I/O for foreign tables (Excel, SAS, SPSS, Stata)</a></li><li><a href="/r/i-o-for-database-tables.html" class="sidebar-link">I/O for database tables</a></li><li><a href="/r/i-o-for-geographic-data-shapefiles-etc.html" class="sidebar-link">I/O for geographic data (shapefiles, etc.)</a></li><li><a href="/r/i-o-for-raster-images.html" class="sidebar-link">I/O for raster images</a></li><li><a href="/r/i-o-for-r-s-binary-format.html" class="sidebar-link">I/O for R's binary format</a></li><li><a href="/r/recycling.html" class="sidebar-link">Recycling</a></li><li><a href="/r/expression-parse-eval.html" class="sidebar-link">Expression: parse + eval</a></li><li><a href="/r/regular-expression-syntax-in-r.html" class="sidebar-link">Regular Expression Syntax in R</a></li><li><a href="/r/regular-expressions-regex.html" class="sidebar-link">Regular Expressions (regex)</a></li><li><a href="/r/combinatorics.html" class="sidebar-link">Combinatorics</a></li><li><a href="/r/solving-odes-in-r.html" class="sidebar-link">Solving ODEs in R</a></li><li><a href="/r/feature-selection-in-r-removing-extraneous-features.html" class="sidebar-link">Feature Selection in R -- Removing Extraneous Features</a></li><li><a href="/r/bibliography-in-rmd.html" class="sidebar-link">Bibliography in RMD</a></li><li><a href="/r/writing-functions-in-r.html" class="sidebar-link">Writing functions in R</a></li><li><a href="/r/color-schemes-for-graphics.html" class="sidebar-link">Color schemes for graphics</a></li><li><a href="/r/hierarchical-clustering-with-hclust.html" class="sidebar-link">Hierarchical clustering with hclust</a></li><li><a href="/r/random-forest-algorithm.html" class="sidebar-link">Random Forest Algorithm</a></li><li><a href="/r/restful-r-services.html" class="sidebar-link">RESTful R Services</a></li><li><a href="/r/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/r/using-texreg-to-export-models-in-a-paper-ready-way.html" class="sidebar-link">Using texreg to export models in a paper-ready way</a></li><li><a href="/r/publishing.html" class="sidebar-link">Publishing</a></li><li><a href="/r/implement-state-machine-pattern-using-s4-class.html" class="sidebar-link">Implement State Machine Pattern using S4 Class</a></li><li><a href="/r/reshape-using-tidyr.html" class="sidebar-link">Reshape using tidyr</a></li><li><a href="/r/modifying-strings-by-substitution.html" class="sidebar-link">Modifying strings by substitution</a></li><li><a href="/r/non-standard-evaluation-and-standard-evaluation.html" class="sidebar-link">Non-standard evaluation and standard evaluation</a></li><li><a href="/r/randomization.html" class="sidebar-link">Randomization</a></li><li><a href="/r/object-oriented-programming-in-r.html" class="sidebar-link">Object-Oriented Programming in R</a></li><li><a href="/r/coercion.html" class="sidebar-link">Coercion</a></li><li><a href="/r/standardize-analyses-by-writing-standalone-r-scripts.html" class="sidebar-link">Standardize analyses by writing standalone R scripts</a></li><li><a href="/r/analyze-tweets-with-r.html" class="sidebar-link">Analyze tweets with R</a></li><li><a href="/r/natural-language-processing.html" class="sidebar-link">Natural language processing</a></li><li><a href="/r/r-markdown-notebooks-from-rstudio.html" class="sidebar-link">R Markdown Notebooks (from RStudio)</a></li><li><a href="/r/aggregating-data-frames.html" class="sidebar-link">Aggregating data frames</a></li><li><a href="/r/data-acquisition.html" class="sidebar-link">Data acquisition</a></li><li><a href="/r/r-memento-by-examples.html" class="sidebar-link">R memento by examples</a></li><li><a href="/r/updating-r-version.html" class="sidebar-link">Updating R version</a></li><li><a href="/r/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/r/roxygen2.html" class="sidebar-link">roxygen2</a></li><li><a href="/r/cleaning-data.html" class="sidebar-link">Cleaning data</a></li><li><a href="/r/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="data-frames"><a href="#data-frames" class="header-anchor">#</a> Data frames</h1> <h2 id="create-an-empty-data-frame"><a href="#create-an-empty-data-frame" class="header-anchor">#</a> Create an empty data.frame</h2> <p>A data.frame is a special kind of list: it is <strong>rectangular</strong>. Each element (column) of the list has same length, and where each row has a &quot;row name&quot;. Each column has its own class, but the class of one column can be different from the class of another column (unlike a matrix, where all elements must have the same class).</p> <p>In principle, a data.frame could have no rows and no columns:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> structure<span class="token punctuation">(</span>list<span class="token punctuation">(</span>character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> class <span class="token operator">=</span> <span class="token string">&quot;data.frame&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">NULL</span>
<span class="token operator">&lt;</span><span class="token number">0</span> rows<span class="token operator">&gt;</span> <span class="token punctuation">(</span>or <span class="token number">0</span><span class="token operator">-</span>length row.names<span class="token punctuation">)</span>

</code></pre></div><p>But this is unusual. It is more common for a data.frame to have many columns and many rows. Here is a data.frame with three rows and two columns (<code>a</code> is numeric class and <code>b</code> is character class):</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> structure<span class="token punctuation">(</span>list<span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> letters<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> class <span class="token operator">=</span> <span class="token string">&quot;data.frame&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> a b
<span class="token operator">&lt;</span><span class="token number">0</span> rows<span class="token operator">&gt;</span> <span class="token punctuation">(</span>or <span class="token number">0</span><span class="token operator">-</span>length row.names<span class="token punctuation">)</span>

</code></pre></div><p>In order for the data.frame to print, we will need to supply some row names. Here we use just the numbers 1:3:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> structure<span class="token punctuation">(</span>list<span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> letters<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> class <span class="token operator">=</span> <span class="token string">&quot;data.frame&quot;</span><span class="token punctuation">,</span> row.names <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span>
  a b
<span class="token number">1</span> <span class="token number">1</span> a
<span class="token number">2</span> <span class="token number">2</span> b
<span class="token number">3</span> <span class="token number">3</span> c

</code></pre></div><p>Now it becomes obvious that we have a data.frame with 3 rows and 2 columns. You can check this using <code>nrow()</code>, <code>ncol()</code>, and <code>dim()</code>:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> x <span class="token operator">&lt;-</span> structure<span class="token punctuation">(</span>list<span class="token punctuation">(</span>a <span class="token operator">=</span> numeric<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> class <span class="token operator">=</span> <span class="token string">&quot;data.frame&quot;</span><span class="token punctuation">,</span> row.names <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> nrow<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> ncol<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2</span>
<span class="token operator">&gt;</span> dim<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">3</span> <span class="token number">2</span>

</code></pre></div><p>R provides two other functions (besides <code>structure()</code>) that can be used to create a data.frame. The first is called, intuitively, <code>data.frame()</code>. It checks to make sure that the column names you supplied are valid, that the list elements are all the same length, and supplies some automatically generated row names. This means that the output of <code>data.frame()</code> might now always be exactly what you expect:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> str<span class="token punctuation">(</span>data.frame<span class="token punctuation">(</span><span class="token string">&quot;a a a&quot;</span> <span class="token operator">=</span> numeric<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;b-b-b&quot;</span> <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'data.frame'</span><span class="token operator">:</span>   <span class="token number">3</span> obs. of  <span class="token number">2</span> variables<span class="token operator">:</span>
 <span class="token operator">$</span> a.a.a<span class="token operator">:</span> num  <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
 <span class="token operator">$</span> b.b.b<span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">1</span> level <span class="token string">&quot;&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span>

</code></pre></div><p>The other function is called <code>as.data.frame()</code>. This can be used to coerce an object that is not a data.frame into being a data.frame by running it through <code>data.frame()</code>. As an example, consider a matrix:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> m <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>letters<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> m
     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">&quot;a&quot;</span>  <span class="token string">&quot;d&quot;</span>  <span class="token string">&quot;g&quot;</span> 
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">&quot;b&quot;</span>  <span class="token string">&quot;e&quot;</span>  <span class="token string">&quot;h&quot;</span> 
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">&quot;c&quot;</span>  <span class="token string">&quot;f&quot;</span>  <span class="token string">&quot;i&quot;</span> 

</code></pre></div><p>And the result:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token operator">&gt;</span> as.data.frame<span class="token punctuation">(</span>m<span class="token punctuation">)</span>
  V1 V2 V3
<span class="token number">1</span>  a  d  g
<span class="token number">2</span>  b  e  h
<span class="token number">3</span>  c  f  i
<span class="token operator">&gt;</span> str<span class="token punctuation">(</span>as.data.frame<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'data.frame'</span><span class="token operator">:</span>   <span class="token number">3</span> obs. of  <span class="token number">3</span> variables<span class="token operator">:</span>
 <span class="token operator">$</span> V1<span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">3</span> levels <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
 <span class="token operator">$</span> V2<span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">3</span> levels <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;f&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
 <span class="token operator">$</span> V3<span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">3</span> levels <span class="token string">&quot;g&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;i&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>

</code></pre></div><h2 id="subsetting-rows-and-columns-from-a-data-frame"><a href="#subsetting-rows-and-columns-from-a-data-frame" class="header-anchor">#</a> Subsetting rows and columns from a data frame</h2> <h3 id="syntax-for-accessing-rows-and-columns-and"><a href="#syntax-for-accessing-rows-and-columns-and" class="header-anchor">#</a> Syntax for accessing rows and columns: <code>[</code>, <code>[[</code>, and <code>$</code></h3> <p>This topic covers the most common syntax to access specific rows and columns of a data frame. These are</p> <li>Like a `matrix` with single brackets `data[rows, columns]`
<ul>
- Using row and column numbers
- Using column (and row) names
<ul><li>With single brackets <code>data[columns]</code> to get a data frame</li> <li>With double brackets <code>data[[one_column]]</code> to get a vector</li></ul> <p>We will use the built-in <code>mtcars</code> data frame to illustrate.</p> <h3 id="like-a-matrix-data-rows-columns"><a href="#like-a-matrix-data-rows-columns" class="header-anchor">#</a> Like a matrix: <code>data[rows, columns]</code></h3> <h3 id="with-numeric-indexes"><a href="#with-numeric-indexes" class="header-anchor">#</a> With numeric indexes</h3> <p>Using the built in data frame <code>mtcars</code>, we can extract rows and columns using <code>[]</code> brackets with a comma included. Indices before the comma are rows:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># get the first row</span>
mtcars<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>
<span class="token comment"># get the first five rows</span>
mtcars<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>

</code></pre></div><p>Similarly, after the comma are columns:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># get the first column</span>
mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token comment"># get the first, third and fifth columns:</span>
mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><p>As shown above, if either rows or columns are left blank, all will be selected. <code>mtcars[1, ]</code> indicates the first row with <strong>all</strong> the columns.</p> <h3 id="with-column-and-row-names"><a href="#with-column-and-row-names" class="header-anchor">#</a> With column (and row) names</h3> <p>So far, this is identical to how rows and columns of matrices are accessed. With <code>data.frame</code>s, most of the time it is preferable to use a column name to a column index. This is done by using a <code>character</code> with the column name instead of <code>numeric</code> with a column number:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># get the mpg column</span>
mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># get the mpg, cyl, and disp columns</span>
mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cyl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;disp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><p>Though less common, row names can also be used:</p> <div class="language-r extra-class"><pre class="language-r"><code>mtcars<span class="token punctuation">[</span><span class="token string">&quot;Mazda Rx4&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>

</code></pre></div><h3 id="rows-and-columns-together"><a href="#rows-and-columns-together" class="header-anchor">#</a> Rows and columns together</h3> <p>The row and column arguments can be used together:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># first four rows of the mpg column</span>
mtcars<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span>

<span class="token comment"># 2nd and 5th row of the mpg, cyl, and disp columns</span>
mtcars<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cyl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;disp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><h3 id="a-warning-about-dimensions"><a href="#a-warning-about-dimensions" class="header-anchor">#</a> A warning about dimensions:</h3> <p>When using these methods, if you extract multiple columns, you will get a data frame back. However, if you extract a <strong>single</strong> column, you will get a vector, not a data frame under the default options.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment">## multiple columns returns a data frame</span>
class<span class="token punctuation">(</span>mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cyl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;data.frame&quot;</span>
<span class="token comment">## single column returns a vector</span>
class<span class="token punctuation">(</span>mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;numeric&quot;</span>

</code></pre></div><p>There are two ways around this. One is to treat the data frame as a list (see below), the other is to add a <code>drop = FALSE</code> argument. This tells R to not &quot;drop the unused dimensions&quot;:</p> <div class="language-r extra-class"><pre class="language-r"><code>class<span class="token punctuation">(</span>mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> drop <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;data.frame&quot;</span>

</code></pre></div><p>Note that matrices work the same way - by default a single column or row will be a vector, but if you specify <code>drop = FALSE</code> you can keep it as a one-column or one-row matrix.</p> <h3 id="like-a-list"><a href="#like-a-list" class="header-anchor">#</a> Like a list</h3> <p>Data frames are essentially <code>list</code>s, i.e., they are a list of column vectors (that all must have the same length). Lists can be subset using single brackets <code>[</code> for a sub-list, or double brackets <code>[[</code> for a single element.</p> <h3 id="with-single-brackets-data-columns"><a href="#with-single-brackets-data-columns" class="header-anchor">#</a> With single brackets <code>data[columns]</code></h3> <p>When you use single brackets and no commas, you will get column back because data frames are lists of columns.</p> <div class="language-r extra-class"><pre class="language-r"><code>mtcars<span class="token punctuation">[</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span>
mtcars<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cyl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;disp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
my_columns <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cyl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hp&quot;</span><span class="token punctuation">)</span>
mtcars<span class="token punctuation">[</span>my_columns<span class="token punctuation">]</span>

</code></pre></div><p>The difference between <code>data[columns]</code> and <code>data[, columns]</code> is that when treating the <code>data.frame</code> as a <code>list</code> (no comma in the brackets) the object returned will <strong>be a <code>data.frame</code></strong>. If you use a comma to treat the <code>data.frame</code> like a <code>matrix</code> then selecting a single column will return a vector but selecting multiple columns will return a <code>data.frame</code>.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment">## When selecting a single column</span>
<span class="token comment">## like a list will return a data frame</span>
class<span class="token punctuation">(</span>mtcars<span class="token punctuation">[</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;data.frame&quot;</span>
<span class="token comment">## like a matrix will return a vector</span>
class<span class="token punctuation">(</span>mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># [1] &quot;numeric&quot;</span>

</code></pre></div><h3 id="with-double-brackets-data-one-column"><a href="#with-double-brackets-data-one-column" class="header-anchor">#</a> With double brackets <code>data[[one_column]]</code></h3> <p>To extract a single column <strong>as a vector</strong> when treating your <code>data.frame</code> as a <code>list</code>, you can use double brackets <code>[[</code>. This will only work for a single column at a time.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># extract a single column by name as a vector </span>
mtcars<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment"># extract a single column by name as a data frame (as above)</span>
mtcars<span class="token punctuation">[</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">]</span>

</code></pre></div><h3 id="using-to-access-columns"><a href="#using-to-access-columns" class="header-anchor">#</a> Using <code>$</code> to access columns</h3> <p>A single column can be extracted using the magical shortcut <code>$</code> without using a quoted column name:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># get the column &quot;mpg&quot;</span>
mtcars<span class="token operator">$</span>mpg

</code></pre></div><p>Columns accessed by <code>$</code> will always be vectors, not data frames.</p> <h3 id="drawbacks-of-for-accessing-columns"><a href="#drawbacks-of-for-accessing-columns" class="header-anchor">#</a> Drawbacks of <code>$</code> for accessing columns</h3> <p>The <code>$</code> can be a convenient shortcut, especially if you are working in an environment (such as RStudio) that will auto-complete the column name in this case. <strong>However,</strong> <code>$</code> has drawbacks as well: it uses <strong>non-standard evaluation</strong> to avoid the need for quotes, which means it <strong>will not work</strong> if your column name is stored in a variable.</p> <div class="language-r extra-class"><pre class="language-r"><code>my_column <span class="token operator">&lt;-</span> <span class="token string">&quot;mpg&quot;</span>
<span class="token comment"># the below will not work</span>
mtcars<span class="token operator">$</span>my_column
<span class="token comment"># but these will work</span>
mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> my_column<span class="token punctuation">]</span>  <span class="token comment"># vector</span>
mtcars<span class="token punctuation">[</span>my_column<span class="token punctuation">]</span>    <span class="token comment"># one-column data frame</span>
mtcars<span class="token punctuation">[</span><span class="token punctuation">[</span>my_column<span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token comment"># vector</span>

</code></pre></div><p>Due to these concerns, <code>$</code> is best used in <strong>interactive</strong> R sessions when your column names are constant. For <strong>programmatic</strong> use, for example in writing a generalizable function that will be used on different data sets with different column names, <code>$</code> should be avoided.</p> <p>Also note that the default behaviour is to use partial matching only when extracting from recursive objects (except environments) by <code>$</code></p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># give you the values of &quot;mpg&quot; column </span>
<span class="token comment"># as &quot;mtcars&quot; has only one column having name starting with &quot;m&quot;</span>
mtcars<span class="token operator">$</span>m 
<span class="token comment"># will give you &quot;NULL&quot; </span>
<span class="token comment"># as &quot;mtcars&quot; has more than one columns having name starting with &quot;d&quot;</span>
mtcars<span class="token operator">$</span>d

</code></pre></div><h3 id="advanced-indexing-negative-and-logical-indices"><a href="#advanced-indexing-negative-and-logical-indices" class="header-anchor">#</a> Advanced indexing: negative and logical indices</h3> <p>Whenever we have the option to use numbers for a index, we can also use negative numbers to omit certain indices or a boolean (logical) vector to indicate exactly which items to keep.</p> <h3 id="negative-indices-omit-elements"><a href="#negative-indices-omit-elements" class="header-anchor">#</a> Negative indices omit elements</h3> <div class="language-r extra-class"><pre class="language-r"><code>mtcars<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>   <span class="token comment"># first row</span>
mtcars<span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">]</span> <span class="token comment"># everything but the first row</span>
mtcars<span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">]</span> <span class="token comment"># everything except the first 10 rows</span>

</code></pre></div><h3 id="logical-vectors-indicate-specific-elements-to-keep"><a href="#logical-vectors-indicate-specific-elements-to-keep" class="header-anchor">#</a> Logical vectors indicate specific elements to keep</h3> <p>We can use a condition such as <code>&lt;</code> to generate a logical vector, and extract only the rows that meet the condition:</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># logical vector indicating TRUE when a row has mpg less than 15</span>
<span class="token comment"># FALSE when a row has mpg &gt;= 15</span>
test <span class="token operator">&lt;-</span> mtcars<span class="token operator">$</span>mpg <span class="token operator">&lt;</span> <span class="token number">15</span> 

<span class="token comment"># extract these rows from the data frame </span>
mtcars<span class="token punctuation">[</span>test<span class="token punctuation">,</span> <span class="token punctuation">]</span>

</code></pre></div><p>We can also bypass the step of saving the intermediate variable</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># extract all columns for rows where the value of cyl is 4.</span>
mtcars<span class="token punctuation">[</span>mtcars<span class="token operator">$</span>cyl <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>
<span class="token comment"># extract the cyl, mpg, and hp columns where the value of cyl is 4</span>
mtcars<span class="token punctuation">[</span>mtcars<span class="token operator">$</span>cyl <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">&quot;cyl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="convenience-functions-to-manipulate-data-frames"><a href="#convenience-functions-to-manipulate-data-frames" class="header-anchor">#</a> Convenience functions to manipulate data.frames</h2> <p>Some convenience functions to manipulate <code>data.frames</code> are <code>subset()</code>, <code>transform()</code>, <code>with()</code> and <code>within()</code>.</p> <h3 id="subset"><a href="#subset" class="header-anchor">#</a> subset</h3> <p>The <code>subset()</code> function allows you to subset a <code>data.frame</code> in a more convenient way (subset also works with other classes):</p> <div class="language-r extra-class"><pre class="language-r"><code>subset<span class="token punctuation">(</span>mtcars<span class="token punctuation">,</span> subset <span class="token operator">=</span> cyl <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">,</span> select <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                mpg  hp
Mazda RX4      <span class="token number">21.0</span> <span class="token number">110</span>
Mazda RX4 Wag  <span class="token number">21.0</span> <span class="token number">110</span>
Hornet <span class="token number">4</span> Drive <span class="token number">21.4</span> <span class="token number">110</span>
Valiant        <span class="token number">18.1</span> <span class="token number">105</span>
Merc <span class="token number">280</span>       <span class="token number">19.2</span> <span class="token number">123</span>
Merc <span class="token number">280</span>C      <span class="token number">17.8</span> <span class="token number">123</span>
Ferrari Dino   <span class="token number">19.7</span> <span class="token number">175</span>

</code></pre></div><p>In the code above we asking only for the lines in which <code>cyl == 6</code> and for the columns <code>mpg</code> and <code>hp</code>. You could achieve the same result using <code>[]</code> with the following code:</p> <div class="language-r extra-class"><pre class="language-r"><code>mtcars<span class="token punctuation">[</span>mtcars<span class="token operator">$</span>cyl <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><h3 id="transform"><a href="#transform" class="header-anchor">#</a> transform</h3> <p>The <code>transform()</code> function is a convenience function to change columns inside a <code>data.frame</code>. For instance the following code adds another column named <code>mpg2</code> with the result of <code>mpg^2</code> to the <code>mtcars</code> <code>data.frame</code>:</p> <div class="language-r extra-class"><pre class="language-r"><code>mtcars <span class="token operator">&lt;-</span> transform<span class="token punctuation">(</span>mtcars<span class="token punctuation">,</span> mpg2 <span class="token operator">=</span> mpg<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="with-and-within"><a href="#with-and-within" class="header-anchor">#</a> with and within</h3> <p>Both <code>with()</code> and <code>within()</code> let you to evaluate expressions inside the <code>data.frame</code> environment, allowing a somewhat cleaner syntax, saving you the use of some <code>$</code> or <code>[]</code>.</p> <p>For example, if you want to create, change and/or remove multiple columns in the <code>airquality</code> <code>data.frame</code>:</p> <div class="language-r extra-class"><pre class="language-r"><code>aq <span class="token operator">&lt;-</span> within<span class="token punctuation">(</span>airquality<span class="token punctuation">,</span> <span class="token punctuation">{</span>     
    lOzone <span class="token operator">&lt;-</span> log<span class="token punctuation">(</span>Ozone<span class="token punctuation">)</span> <span class="token comment"># creates new column</span>
    Month <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>month.abb<span class="token punctuation">[</span>Month<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># changes Month Column</span>
    cTemp <span class="token operator">&lt;-</span> round<span class="token punctuation">(</span><span class="token punctuation">(</span>Temp <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token operator">/</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># creates new column</span>
    S.cT <span class="token operator">&lt;-</span> Solar.R <span class="token operator">/</span> cTemp  <span class="token comment"># creates new column</span>
    rm<span class="token punctuation">(</span>Day<span class="token punctuation">,</span> Temp<span class="token punctuation">)</span> <span class="token comment"># removes columns</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Data frames are likely the data structure you will used most in your analyses. A data frame is a special kind of list that stores same-length vectors of different classes. You create data frames using the <code>data.frame</code> function. The example below shows this by combining a numeric and a character vector into a data frame. It uses the <code>:</code> operator, which will create a vector containing all integers from 1 to 3.</p> <div class="language-r extra-class"><pre class="language-r"><code>df1 <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> y <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df1
<span class="token comment">##   x y</span>
<span class="token comment">## 1 1 a</span>
<span class="token comment">## 2 2 b</span>
<span class="token comment">## 3 3 c</span>
class<span class="token punctuation">(</span>df1<span class="token punctuation">)</span>
<span class="token comment">## [1] &quot;data.frame&quot;</span>

</code></pre></div><p>Data frame objects do not print with quotation marks, so the class of the columns is not always obvious.</p> <div class="language-r extra-class"><pre class="language-r"><code>df2 <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>x <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df2
<span class="token comment">##   x y</span>
<span class="token comment">## 1 1 a</span>
<span class="token comment">## 2 2 b</span>
<span class="token comment">## 3 3 c</span>

</code></pre></div><p>Without further investigation, the &quot;x&quot; columns in <code>df1</code> and <code>df2</code> cannot be differentiated. The <code>str</code> function can be used to describe objects with more detail than class.</p> <div class="language-r extra-class"><pre class="language-r"><code>str<span class="token punctuation">(</span>df1<span class="token punctuation">)</span>
<span class="token comment">## 'data.frame':    3 obs. of  2 variables:</span>
<span class="token comment">##  $ x: int  1 2 3</span>
<span class="token comment">##  $ y: Factor w/ 3 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;: 1 2 3</span>
str<span class="token punctuation">(</span>df2<span class="token punctuation">)</span>
<span class="token comment">## 'data.frame':    3 obs. of  2 variables:</span>
<span class="token comment">##  $ x: Factor w/ 3 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;: 1 2 3</span>
<span class="token comment">##  $ y: Factor w/ 3 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;: 1 2 3</span>

</code></pre></div><p>Here you see that <code>df1</code> is a <code>data.frame</code> and has 3 observations of 2 variables, &quot;x&quot; and &quot;y.&quot; Then you are told that &quot;x&quot; has the data type integer (not important for this class, but for our purposes it behaves like a numeric) and &quot;y&quot; is a factor with three levels (another data class we are not discussing). <strong><strong>It is important to note that, by default, data frames coerce characters to factors.</strong></strong> The default behavior can be changed with the <code>stringsAsFactors</code> parameter:</p> <div class="language-r extra-class"><pre class="language-r"><code>df3 <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> y <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
str<span class="token punctuation">(</span>df3<span class="token punctuation">)</span>
<span class="token comment">## 'data.frame':    3 obs. of  2 variables:</span>
<span class="token comment">##  $ x: int  1 2 3</span>
<span class="token comment">##  $ y: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot;</span>

</code></pre></div><p>Now the &quot;y&quot; column is a character. As mentioned above, each &quot;column&quot; of a data frame must have the same length. Trying to create a data.frame from vectors with different lengths will result in an error. (Try running <code>data.frame(x = 1:3, y = 1:4)</code> to see the resulting error.)</p> <p>As test-cases for data frames, some data is provided by R by default. One of them is iris, loaded as follows:</p> <div class="language-r extra-class"><pre class="language-r"><code>mydataframe <span class="token operator">&lt;-</span> iris
str<span class="token punctuation">(</span>mydataframe<span class="token punctuation">)</span>

</code></pre></div><h2 id="convert-all-columns-of-a-data-frame-to-character-class"><a href="#convert-all-columns-of-a-data-frame-to-character-class" class="header-anchor">#</a> Convert all columns of a data.frame to character class</h2> <p>A common task is to convert all columns of a data.frame to character class for ease of manipulation, such as in the cases of sending data.frames to a RDBMS or merging data.frames containing factors where levels may differ between input data.frames.</p> <p>The best time to do this is when the data is read in - almost all input methods that create data frames have an options <code>stringsAsFactors</code> which can be set to <code>FALSE</code>.</p> <p>If the data has already been created, factor columns can be converted to character columns as shown below.</p> <div class="language-r extra-class"><pre class="language-r"><code>bob <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>jobs <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;scientist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;analyst&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                  pay  <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">160000</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> age <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
str<span class="token punctuation">(</span>bob<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code><span class="token string">'data.frame'</span><span class="token operator">:</span>    <span class="token number">2</span> obs. of  <span class="token number">3</span> variables<span class="token operator">:</span>
 <span class="token operator">$</span> jobs<span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">2</span> levels <span class="token string">&quot;analyst&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;scientist&quot;</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token number">1</span>
 <span class="token operator">$</span> pay <span class="token operator">:</span> num  <span class="token number">160000</span> <span class="token number">100000</span>
 <span class="token operator">$</span> age <span class="token operator">:</span> num  <span class="token number">30</span> <span class="token number">25</span>

</code></pre></div><div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># Convert *all columns* to character</span>
bob<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>bob<span class="token punctuation">,</span> as.character<span class="token punctuation">)</span>
str<span class="token punctuation">(</span>bob<span class="token punctuation">)</span>

</code></pre></div><blockquote></blockquote> <div class="language-r extra-class"><pre class="language-r"><code>    <span class="token string">'data.frame'</span><span class="token operator">:</span>    <span class="token number">2</span> obs. of  <span class="token number">3</span> variables<span class="token operator">:</span>
 <span class="token operator">$</span> jobs<span class="token operator">:</span> chr  <span class="token string">&quot;scientist&quot;</span> <span class="token string">&quot;analyst&quot;</span>
 <span class="token operator">$</span> pay <span class="token operator">:</span> chr  <span class="token string">&quot;160000&quot;</span> <span class="token string">&quot;1e+05&quot;</span>
 <span class="token operator">$</span> age <span class="token operator">:</span> chr  <span class="token string">&quot;30&quot;</span> <span class="token string">&quot;25&quot;</span>

</code></pre></div><div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># Convert only factor columns to character</span>
bob<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>bob<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> is.factor<span class="token punctuation">(</span>x<span class="token punctuation">)</span> x <span class="token operator">&lt;-</span> as.character<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    return<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="convert-data-stored-in-a-list-to-a-single-data-frame-using-do-call"><a href="#convert-data-stored-in-a-list-to-a-single-data-frame-using-do-call" class="header-anchor">#</a> Convert data stored in a list to a single data frame using do.call</h2> <p>If you have your data stored in a list and you want to convert this list to a data frame the <code>do.call</code> function is an easy way to achieve this. However, it is important that all list elements have the same length  in order to prevent unintended recycling of values.</p> <div class="language-r extra-class"><pre class="language-r"><code>dataList  <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">)</span>  
dataList
<span class="token comment"># [[1]]</span>
<span class="token comment"># [1] 1 2 3</span>
<span class="token comment">#</span>
<span class="token comment"># [[2]]</span>
<span class="token comment"># [1] 4 5 6</span>
<span class="token comment">#</span>
<span class="token comment"># [[3]]</span>
<span class="token comment"># [1] 7 8 9</span>

dataframe <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>do.call<span class="token punctuation">(</span>rbind<span class="token punctuation">,</span> dataList<span class="token punctuation">)</span><span class="token punctuation">)</span>
dataframe
<span class="token comment">#   X1 X2 X3</span>
<span class="token comment"># 1  1  2  3</span>
<span class="token comment"># 2  4  5  6</span>
<span class="token comment"># 3  7  8  9 </span>

</code></pre></div><p>It also works if your list consists of data frames itself.</p> <div class="language-r extra-class"><pre class="language-r"><code>dataframeList  <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>data.frame<span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                       data.frame<span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
dataframeList
<span class="token comment"># [[1]]</span>
<span class="token comment">#   a b c</span>
<span class="token comment"># 1 1 1 1</span>
<span class="token comment"># 2 2 2 2</span>

<span class="token comment"># [[2]]</span>
<span class="token comment">#   a b c</span>
<span class="token comment"># 1 3 3 3</span>
<span class="token comment"># 2 4 4 4</span>

dataframe      <span class="token operator">&lt;-</span> do.call<span class="token punctuation">(</span>rbind<span class="token punctuation">,</span> dataframeList<span class="token punctuation">)</span>
dataframe
<span class="token comment">#   a b c</span>
<span class="token comment"># 1 1 1 1</span>
<span class="token comment"># 2 2 2 2</span>
<span class="token comment"># 3 3 3 3</span>
<span class="token comment"># 4 4 4 4</span>

</code></pre></div><h2 id="subsetting-rows-by-column-values"><a href="#subsetting-rows-by-column-values" class="header-anchor">#</a> Subsetting Rows by Column Values</h2> <p>Built in functions can subset <code>rows</code> with <code>columns</code> that meet conditions.</p> <div class="language-r extra-class"><pre class="language-r"><code>df <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>item <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                 price_Elasticity <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.57667</span><span class="token punctuation">,</span> <span class="token number">0.03205</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.04904</span><span class="token punctuation">,</span> <span class="token number">0.10342</span><span class="token punctuation">,</span> <span class="token number">0.04029</span><span class="token punctuation">,</span> 
                                       <span class="token number">0.0742</span><span class="token punctuation">,</span> <span class="token number">0.1669</span><span class="token punctuation">,</span> <span class="token number">0.0313</span><span class="token punctuation">,</span> <span class="token number">0.22204</span><span class="token punctuation">,</span> <span class="token number">0.06158</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                 total_Margin <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">145062</span><span class="token punctuation">,</span> <span class="token number">98671</span><span class="token punctuation">,</span> <span class="token number">20576</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">56382</span><span class="token punctuation">,</span> <span class="token number">207623</span><span class="token punctuation">,</span> <span class="token number">43463</span><span class="token punctuation">,</span> <span class="token number">1235</span><span class="token punctuation">,</span> 
                                   <span class="token number">34521</span><span class="token punctuation">,</span> <span class="token number">146553</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">74516</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>To find <code>rows</code> with <code>price_Elasticity &gt; 0</code>:</p> <p><code>df[df$price_Elasticity &gt; 0, ]</code></p> <div class="language- extra-class"><pre class="language-text"><code>
  item price_Elasticity total_Margin
2     2          0.03205        98671
4     4          0.10342       -56382
5     5          0.04029       207623
6     6          0.07420        43463
7     7          0.16690         1235
8     8          0.03130        34521
9     9          0.22204       146553
10   10          0.06158       -74516

</code></pre></div><p>subset based on <code>price_Elasticity &gt; 0</code> and <code>total_Margin &gt; 0</code>:</p> <p><code>df[df$price_Elasticity &gt; 0 &amp; df$total_Margin &gt; 0, ]</code></p> <div class="language- extra-class"><pre class="language-text"><code>
 item price_Elasticity total_Margin
2    2          0.03205        98671
5    5          0.04029       207623
6    6          0.07420        43463
7    7          0.16690         1235
8    8          0.03130        34521
9    9          0.22204       146553

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <li>
data.frame(..., row.names = NULL, check.rows = FALSE, check.names = TRUE, stringsAsFactors = default.stringsAsFactors())
</li> <li>
as.data.frame(x, row.names = NULL, optional = FALSE, ...) # generic function
</li> <li>
as.data.frame(x, ..., stringsAsFactors = default.stringsAsFactors()) # S3 method for class 'character'
</li> <li>
as.data.frame(x, row.names = NULL, optional = FALSE, ..., stringsAsFactors = default.stringsAsFactors()) # S3 method for class 'matrix'
</li> <li>
is.data.frame(x)
</li></ul></li></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/r/data-frames.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/r/the-logical-class.html" class="prev">
        The logical class
      </a></span> <span class="next"><a href="/r/split-function.html">
        Split function
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2875.718699b5.js" defer></script>
  </body>
</html>
