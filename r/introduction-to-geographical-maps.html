<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>R - Introduction to Geographical Maps</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Basic map-making with map() from the package maps, 50 State Maps and Advanced Choropleths with Google Viz, Interactive plotly maps, Making Dynamic HTML Maps with Leaflet, Dynamic Leaflet maps in Shiny applications">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="R - Introduction to Geographical Maps">
    <meta property="og:description" content="Basic map-making with map() from the package maps, 50 State Maps and Advanced Choropleths with Google Viz, Interactive plotly maps, Making Dynamic HTML Maps with Leaflet, Dynamic Leaflet maps in Shiny applications">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/r/introduction-to-geographical-maps.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="R - Introduction to Geographical Maps">
    <meta name="twitter:description" content="Basic map-making with map() from the package maps, 50 State Maps and Advanced Choropleths with Google Viz, Interactive plotly maps, Making Dynamic HTML Maps with Leaflet, Dynamic Leaflet maps in Shiny applications">
    <meta name="twitter:url" content="/r/introduction-to-geographical-maps.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/2906.69185ab2.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>R</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/r/" class="sidebar-link">Disclaimer</a></li><li><a href="/r/getting-started-with-r-language.html" class="sidebar-link">Getting started with R Language</a></li><li><a href="/r/variables.html" class="sidebar-link">Variables</a></li><li><a href="/r/arithmetic-operators.html" class="sidebar-link">Arithmetic Operators</a></li><li><a href="/r/matrices.html" class="sidebar-link">Matrices</a></li><li><a href="/r/formula.html" class="sidebar-link">Formula</a></li><li><a href="/r/reading-and-writing-strings.html" class="sidebar-link">Reading and writing strings</a></li><li><a href="/r/string-manipulation-with-stringi-package.html" class="sidebar-link">String manipulation with stringi package</a></li><li><a href="/r/classes.html" class="sidebar-link">Classes</a></li><li><a href="/r/lists.html" class="sidebar-link">Lists</a></li><li><a href="/r/hashmaps.html" class="sidebar-link">Hashmaps</a></li><li><a href="/r/creating-vectors.html" class="sidebar-link">Creating vectors</a></li><li><a href="/r/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/r/the-date-class.html" class="sidebar-link">The Date class</a></li><li><a href="/r/date-time-classes-posixct-and-posixlt.html" class="sidebar-link">Date-time classes (POSIXct and POSIXlt)</a></li><li><a href="/r/the-character-class.html" class="sidebar-link">The character class</a></li><li><a href="/r/numeric-classes-and-storage-modes.html" class="sidebar-link">Numeric classes and storage modes</a></li><li><a href="/r/the-logical-class.html" class="sidebar-link">The logical class</a></li><li><a href="/r/data-frames.html" class="sidebar-link">Data frames</a></li><li><a href="/r/split-function.html" class="sidebar-link">Split function</a></li><li><a href="/r/reading-and-writing-tabular-data-in-plain-text-files-csv-tsv-etc.html" class="sidebar-link">Reading and writing tabular data in plain-text files (CSV, TSV, etc.)</a></li><li><a href="/r/pipe-operators-and-others.html" class="sidebar-link">Pipe operators (%&gt;% and others)</a></li><li><a href="/r/linear-models-regression.html" class="sidebar-link">Linear Models (Regression)</a></li><li><a href="/r/data-table.html" class="sidebar-link">data.table</a></li><li><a href="/r/pivot-and-unpivot-with-data-table.html" class="sidebar-link">Pivot and unpivot with data.table</a></li><li><a href="/r/bar-chart.html" class="sidebar-link">Bar Chart</a></li><li><a href="/r/base-plotting.html" class="sidebar-link">Base Plotting</a></li><li><a href="/r/boxplot.html" class="sidebar-link">boxplot</a></li><li><a href="/r/ggplot2.html" class="sidebar-link">ggplot2</a></li><li><a href="/r/factors.html" class="sidebar-link">Factors</a></li><li><a href="/r/pattern-matching-and-replacement.html" class="sidebar-link">Pattern Matching and Replacement</a></li><li><a href="/r/run-length-encoding.html" class="sidebar-link">Run-length encoding</a></li><li><a href="/r/speeding-up-tough-to-vectorize-code.html" class="sidebar-link">Speeding up tough-to-vectorize code</a></li><li><a href="/r/introduction-to-geographical-maps.html" class="active sidebar-link">Introduction to Geographical Maps</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/r/introduction-to-geographical-maps.html#basic-map-making-with-map-from-the-package-maps" class="sidebar-link">Basic map-making with map() from the package maps</a></li><li class="sidebar-sub-header"><a href="/r/introduction-to-geographical-maps.html#_50-state-maps-and-advanced-choropleths-with-google-viz" class="sidebar-link">50 State Maps and Advanced Choropleths with Google Viz</a></li><li class="sidebar-sub-header"><a href="/r/introduction-to-geographical-maps.html#interactive-plotly-maps" class="sidebar-link">Interactive plotly maps</a></li><li class="sidebar-sub-header"><a href="/r/introduction-to-geographical-maps.html#making-dynamic-html-maps-with-leaflet" class="sidebar-link">Making Dynamic HTML Maps with Leaflet</a></li><li class="sidebar-sub-header"><a href="/r/introduction-to-geographical-maps.html#dynamic-leaflet-maps-in-shiny-applications" class="sidebar-link">Dynamic Leaflet maps in Shiny applications</a></li></ul></li><li><a href="/r/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/r/tidyverse.html" class="sidebar-link">tidyverse</a></li><li><a href="/r/rcpp.html" class="sidebar-link">Rcpp</a></li><li><a href="/r/random-numbers-generator.html" class="sidebar-link">Random Numbers Generator</a></li><li><a href="/r/parallel-processing.html" class="sidebar-link">Parallel processing</a></li><li><a href="/r/subsetting.html" class="sidebar-link">Subsetting</a></li><li><a href="/r/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/r/installing-packages.html" class="sidebar-link">Installing packages</a></li><li><a href="/r/updating-r-and-the-package-library.html" class="sidebar-link">Updating R and the package library</a></li><li><a href="/r/inspecting-packages.html" class="sidebar-link">Inspecting packages</a></li><li><a href="/r/creating-packages-with-devtools.html" class="sidebar-link">Creating packages with devtools</a></li><li><a href="/r/using-pipe-assignment-in-your-own-package-how-to.html" class="sidebar-link">Using pipe assignment in your own package %%: How to ?</a></li><li><a href="/r/arima-models.html" class="sidebar-link">Arima Models</a></li><li><a href="/r/distribution-functions.html" class="sidebar-link">Distribution Functions</a></li><li><a href="/r/shiny.html" class="sidebar-link">Shiny</a></li><li><a href="/r/spatial-analysis.html" class="sidebar-link">spatial analysis</a></li><li><a href="/r/sqldf.html" class="sidebar-link">sqldf</a></li><li><a href="/r/code-profiling.html" class="sidebar-link">Code profiling</a></li><li><a href="/r/control-flow-structures.html" class="sidebar-link">Control flow structures</a></li><li><a href="/r/column-wise-operation.html" class="sidebar-link">Column wise operation</a></li><li><a href="/r/json.html" class="sidebar-link">JSON</a></li><li><a href="/r/rodbc.html" class="sidebar-link">RODBC</a></li><li><a href="/r/lubridate.html" class="sidebar-link">lubridate</a></li><li><a href="/r/time-series-and-forecasting.html" class="sidebar-link">Time Series and Forecasting</a></li><li><a href="/r/strsplit-function.html" class="sidebar-link">strsplit function</a></li><li><a href="/r/web-scraping-and-parsing.html" class="sidebar-link">Web scraping and parsing</a></li><li><a href="/r/generalized-linear-models.html" class="sidebar-link">Generalized linear models</a></li><li><a href="/r/reshaping-data-between-long-and-wide-forms.html" class="sidebar-link">Reshaping data between long and wide forms</a></li><li><a href="/r/rmarkdown-and-knitr-presentation.html" class="sidebar-link">RMarkdown and knitr presentation</a></li><li><a href="/r/scope-of-variables.html" class="sidebar-link">Scope of variables</a></li><li><a href="/r/performing-a-permutation-test.html" class="sidebar-link">Performing a Permutation Test</a></li><li><a href="/r/xgboost.html" class="sidebar-link">xgboost</a></li><li><a href="/r/r-code-vectorization-best-practices.html" class="sidebar-link">R code vectorization best practices</a></li><li><a href="/r/missing-values.html" class="sidebar-link">Missing values</a></li><li><a href="/r/hierarchical-linear-modeling.html" class="sidebar-link">Hierarchical Linear Modeling</a></li><li><a href="/r/apply-family-of-functions-functionals.html" class="sidebar-link">*apply family of functions (functionals)</a></li><li><a href="/r/text-mining.html" class="sidebar-link">Text mining</a></li><li><a href="/r/anova.html" class="sidebar-link">ANOVA</a></li><li><a href="/r/raster-and-image-analysis.html" class="sidebar-link">Raster and Image Analysis</a></li><li><a href="/r/survival-analysis.html" class="sidebar-link">Survival analysis</a></li><li><a href="/r/fault-tolerant-resilient-code.html" class="sidebar-link">Fault-tolerant/resilient code</a></li><li><a href="/r/reproducible-r.html" class="sidebar-link">Reproducible R</a></li><li><a href="/r/fourier-series-and-transformations.html" class="sidebar-link">Fourier Series and Transformations</a></li><li><a href="/r/rprofile.html" class="sidebar-link">.Rprofile</a></li><li><a href="/r/dplyr.html" class="sidebar-link">dplyr</a></li><li><a href="/r/caret.html" class="sidebar-link">caret</a></li><li><a href="/r/extracting-and-listing-files-in-compressed-archives.html" class="sidebar-link">Extracting and Listing Files in Compressed Archives</a></li><li><a href="/r/probability-distributions-with-r.html" class="sidebar-link">Probability Distributions with R</a></li><li><a href="/r/r-in-latex-with-knitr.html" class="sidebar-link">R in LaTeX with knitr</a></li><li><a href="/r/web-crawling-in-r.html" class="sidebar-link">Web Crawling in R</a></li><li><a href="/r/creating-reports-with-rmarkdown.html" class="sidebar-link">Creating reports with RMarkdown</a></li><li><a href="/r/gpu-accelerated-computing.html" class="sidebar-link">GPU-accelerated computing</a></li><li><a href="/r/heatmap-and-heatmap-2.html" class="sidebar-link">heatmap and heatmap.2</a></li><li><a href="/r/network-analysis-with-the-igraph-package.html" class="sidebar-link">Network analysis with the igraph package</a></li><li><a href="/r/functional-programming.html" class="sidebar-link">Functional programming</a></li><li><a href="/r/get-user-input.html" class="sidebar-link">Get user input</a></li><li><a href="/r/spark-api-sparkr.html" class="sidebar-link">Spark API (SparkR)</a></li><li><a href="/r/meta-documentation-guidelines.html" class="sidebar-link">Meta: Documentation Guidelines</a></li><li><a href="/r/input-and-output.html" class="sidebar-link">Input and output</a></li><li><a href="/r/i-o-for-foreign-tables-excel-sas-spss-stata.html" class="sidebar-link">I/O for foreign tables (Excel, SAS, SPSS, Stata)</a></li><li><a href="/r/i-o-for-database-tables.html" class="sidebar-link">I/O for database tables</a></li><li><a href="/r/i-o-for-geographic-data-shapefiles-etc.html" class="sidebar-link">I/O for geographic data (shapefiles, etc.)</a></li><li><a href="/r/i-o-for-raster-images.html" class="sidebar-link">I/O for raster images</a></li><li><a href="/r/i-o-for-r-s-binary-format.html" class="sidebar-link">I/O for R's binary format</a></li><li><a href="/r/recycling.html" class="sidebar-link">Recycling</a></li><li><a href="/r/expression-parse-eval.html" class="sidebar-link">Expression: parse + eval</a></li><li><a href="/r/regular-expression-syntax-in-r.html" class="sidebar-link">Regular Expression Syntax in R</a></li><li><a href="/r/regular-expressions-regex.html" class="sidebar-link">Regular Expressions (regex)</a></li><li><a href="/r/combinatorics.html" class="sidebar-link">Combinatorics</a></li><li><a href="/r/solving-odes-in-r.html" class="sidebar-link">Solving ODEs in R</a></li><li><a href="/r/feature-selection-in-r-removing-extraneous-features.html" class="sidebar-link">Feature Selection in R -- Removing Extraneous Features</a></li><li><a href="/r/bibliography-in-rmd.html" class="sidebar-link">Bibliography in RMD</a></li><li><a href="/r/writing-functions-in-r.html" class="sidebar-link">Writing functions in R</a></li><li><a href="/r/color-schemes-for-graphics.html" class="sidebar-link">Color schemes for graphics</a></li><li><a href="/r/hierarchical-clustering-with-hclust.html" class="sidebar-link">Hierarchical clustering with hclust</a></li><li><a href="/r/random-forest-algorithm.html" class="sidebar-link">Random Forest Algorithm</a></li><li><a href="/r/restful-r-services.html" class="sidebar-link">RESTful R Services</a></li><li><a href="/r/machine-learning.html" class="sidebar-link">Machine learning</a></li><li><a href="/r/using-texreg-to-export-models-in-a-paper-ready-way.html" class="sidebar-link">Using texreg to export models in a paper-ready way</a></li><li><a href="/r/publishing.html" class="sidebar-link">Publishing</a></li><li><a href="/r/implement-state-machine-pattern-using-s4-class.html" class="sidebar-link">Implement State Machine Pattern using S4 Class</a></li><li><a href="/r/reshape-using-tidyr.html" class="sidebar-link">Reshape using tidyr</a></li><li><a href="/r/modifying-strings-by-substitution.html" class="sidebar-link">Modifying strings by substitution</a></li><li><a href="/r/non-standard-evaluation-and-standard-evaluation.html" class="sidebar-link">Non-standard evaluation and standard evaluation</a></li><li><a href="/r/randomization.html" class="sidebar-link">Randomization</a></li><li><a href="/r/object-oriented-programming-in-r.html" class="sidebar-link">Object-Oriented Programming in R</a></li><li><a href="/r/coercion.html" class="sidebar-link">Coercion</a></li><li><a href="/r/standardize-analyses-by-writing-standalone-r-scripts.html" class="sidebar-link">Standardize analyses by writing standalone R scripts</a></li><li><a href="/r/analyze-tweets-with-r.html" class="sidebar-link">Analyze tweets with R</a></li><li><a href="/r/natural-language-processing.html" class="sidebar-link">Natural language processing</a></li><li><a href="/r/r-markdown-notebooks-from-rstudio.html" class="sidebar-link">R Markdown Notebooks (from RStudio)</a></li><li><a href="/r/aggregating-data-frames.html" class="sidebar-link">Aggregating data frames</a></li><li><a href="/r/data-acquisition.html" class="sidebar-link">Data acquisition</a></li><li><a href="/r/r-memento-by-examples.html" class="sidebar-link">R memento by examples</a></li><li><a href="/r/updating-r-version.html" class="sidebar-link">Updating R version</a></li><li><a href="/r/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/r/roxygen2.html" class="sidebar-link">roxygen2</a></li><li><a href="/r/cleaning-data.html" class="sidebar-link">Cleaning data</a></li><li><a href="/r/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="introduction-to-geographical-maps"><a href="#introduction-to-geographical-maps" class="header-anchor">#</a> Introduction to Geographical Maps</h1> <p>See also <a href="http://stackoverflow.com/documentation/r/5538" target="_blank" rel="noopener noreferrer">I/O for geographic data<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="basic-map-making-with-map-from-the-package-maps"><a href="#basic-map-making-with-map-from-the-package-maps" class="header-anchor">#</a> Basic map-making with map() from the package maps</h2> <p>The function <code>map()</code> from the package <code>maps</code> provides a simple starting point for creating maps with R.</p> <p>A basic world map can be drawn as follows:</p> <div class="language-r extra-class"><pre class="language-r"><code>require<span class="token punctuation">(</span>maps<span class="token punctuation">)</span>
map<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/iuQzF.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/iuQzF.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>The color of the outline can be changed by setting the color parameter, <code>col</code>, to either the character name or hex value of a color:</p> <div class="language-r extra-class"><pre class="language-r"><code>require<span class="token punctuation">(</span>maps<span class="token punctuation">)</span>
map<span class="token punctuation">(</span>col <span class="token operator">=</span> <span class="token string">&quot;cornflowerblue&quot;</span><span class="token punctuation">)</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/ekrPZ.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/ekrPZ.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>To fill land masses with the color in <code>col</code> we can set <code>fill = TRUE</code>:</p> <div class="language-r extra-class"><pre class="language-r"><code>require<span class="token punctuation">(</span>maps<span class="token punctuation">)</span>
map<span class="token punctuation">(</span>fill <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> col <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;cornflowerblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/ZxndI.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/ZxndI.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>A vector of any length may be supplied to <code>col</code> when <code>fill = TRUE</code> is also set:</p> <div class="language-r extra-class"><pre class="language-r"><code>require<span class="token punctuation">(</span>maps<span class="token punctuation">)</span>
map<span class="token punctuation">(</span>fill <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> col <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;cornflowerblue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;limegreen&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hotpink&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/oRkaq.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/oRkaq.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>In the example above colors from <code>col</code> are assigned arbitrarily to polygons in the map representing regions and colors are recycled if there are fewer colors than polygons.</p> <p>We can also use color coding to represent a statistical variable, which may optionally be described in a legend. A map created as such is known as a &quot;choropleth&quot;.</p> <p>The following choropleth example sets the first argument of <code>map()</code>, which is <code>database</code> to <code>&quot;county&quot;</code> and <code>&quot;state&quot;</code> to color code unemployment using data from the built-in datasets <code>unemp</code> and <code>county.fips</code> while overlaying state lines in white:</p> <div class="language-r extra-class"><pre class="language-r"><code>require<span class="token punctuation">(</span>maps<span class="token punctuation">)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>require<span class="token punctuation">(</span>mapproj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment"># mapproj is used for  projection=&quot;polyconic&quot;</span>
  <span class="token comment"># color US county map by 2009 unemployment rate</span>
  <span class="token comment"># match counties to map using FIPS county codes</span>
  <span class="token comment"># Based on J's solution to the &quot;Choropleth Challenge&quot;</span>
  <span class="token comment"># Code improvements by Hack-R (hack-r.github.io)</span>
  
  <span class="token comment"># load data</span>
  <span class="token comment"># unemp includes data for some counties not on the &quot;lower 48 states&quot; county</span>
  <span class="token comment"># map, such as those in Alaska, Hawaii, Puerto Rico, and some tiny Virginia</span>
  <span class="token comment">#  cities</span>
  data<span class="token punctuation">(</span>unemp<span class="token punctuation">)</span>
  data<span class="token punctuation">(</span>county.fips<span class="token punctuation">)</span>
  
  <span class="token comment"># define color buckets</span>
  colors <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">&quot;paleturquoise&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cornflowerblue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blueviolet&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hotpink&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;darkgrey&quot;</span><span class="token punctuation">)</span>
  unemp<span class="token operator">$</span>colorBuckets <span class="token operator">&lt;-</span> as.numeric<span class="token punctuation">(</span>cut<span class="token punctuation">(</span>unemp<span class="token operator">$</span>unemp<span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  leg.txt <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">&quot;&lt;2%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2-4%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4-6%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6-8%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;8-10%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&gt;10%&quot;</span><span class="token punctuation">)</span>
  
  <span class="token comment"># align data with map definitions by (partial) matching state,county</span>
  <span class="token comment"># names, which include multiple polygons for some counties</span>
  cnty.fips <span class="token operator">&lt;-</span> county.fips<span class="token operator">$</span>fips<span class="token punctuation">[</span>match<span class="token punctuation">(</span>map<span class="token punctuation">(</span><span class="token string">&quot;county&quot;</span><span class="token punctuation">,</span> plot<span class="token operator">=</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token operator">$</span>names<span class="token punctuation">,</span>
                                      county.fips<span class="token operator">$</span>polyname<span class="token punctuation">)</span><span class="token punctuation">]</span>
  colorsmatched <span class="token operator">&lt;-</span> unemp<span class="token operator">$</span>colorBuckets<span class="token punctuation">[</span>match<span class="token punctuation">(</span>cnty.fips<span class="token punctuation">,</span> unemp<span class="token operator">$</span>fips<span class="token punctuation">)</span><span class="token punctuation">]</span>
  
  <span class="token comment"># draw map</span>
  par<span class="token punctuation">(</span>mar<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span>
  map<span class="token punctuation">(</span><span class="token string">&quot;county&quot;</span><span class="token punctuation">,</span> col <span class="token operator">=</span> colors<span class="token punctuation">[</span>colorsmatched<span class="token punctuation">]</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> resolution <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
      lty <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> projection <span class="token operator">=</span> <span class="token string">&quot;polyconic&quot;</span><span class="token punctuation">)</span>
  map<span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> add <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> lty <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> lwd <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
      projection<span class="token operator">=</span><span class="token string">&quot;polyconic&quot;</span><span class="token punctuation">)</span>
  title<span class="token punctuation">(</span><span class="token string">&quot;unemployment by county, 2009&quot;</span><span class="token punctuation">)</span>
  legend<span class="token punctuation">(</span><span class="token string">&quot;topright&quot;</span><span class="token punctuation">,</span> leg.txt<span class="token punctuation">,</span> horiz <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> colors<span class="token punctuation">,</span> cex<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/oDlru.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/oDlru.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_50-state-maps-and-advanced-choropleths-with-google-viz"><a href="#_50-state-maps-and-advanced-choropleths-with-google-viz" class="header-anchor">#</a> 50 State Maps and Advanced Choropleths with Google Viz</h2> <p>A common <a href="http://stackoverflow.com/questions/25530358/how-do-you-create-a-50-state-map-instead-of-just-lower-48" target="_blank" rel="noopener noreferrer">question<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is how to juxtapose (combine) physically separate geographical regions on the same map, such as in the case of a choropleth describing all 50 American states (The mainland with Alaska and Hawaii juxtaposed).</p> <p>Creating an attractive 50 state map is simple when leveraging Google Maps. Interfaces to Google's API include the packages <code>googleVis</code>, <code>ggmap</code>, and <code>RgoogleMaps</code>.</p> <div class="language-r extra-class"><pre class="language-r"><code>require<span class="token punctuation">(</span>googleVis<span class="token punctuation">)</span>

G4 <span class="token operator">&lt;-</span> gvisGeoChart<span class="token punctuation">(</span>CityPopularity<span class="token punctuation">,</span> locationvar<span class="token operator">=</span><span class="token string">'City'</span><span class="token punctuation">,</span> colorvar<span class="token operator">=</span><span class="token string">'Popularity'</span><span class="token punctuation">,</span>
                   options<span class="token operator">=</span>list<span class="token punctuation">(</span>region<span class="token operator">=</span><span class="token string">'US'</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">350</span><span class="token punctuation">,</span> 
                                displayMode<span class="token operator">=</span><span class="token string">'markers'</span><span class="token punctuation">,</span>
                                colorAxis<span class="token operator">=</span>&quot;<span class="token punctuation">{</span>values<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                 colors<span class="token operator">:</span><span class="token punctuation">[</span>\<span class="token string">'red'</span><span class="token punctuation">,</span> \<span class="token string">'pink\', \'orange'</span><span class="token punctuation">,</span>\<span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>&quot;<span class="token punctuation">)</span>
<span class="token punctuation">)</span> 
plot<span class="token punctuation">(</span>G4<span class="token punctuation">)</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/qmGX8.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/qmGX8.png" alt="choropleth"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>The function <code>gvisGeoChart()</code> requires far less coding to create a choropleth compared to older mapping methods, such as <code>map()</code> from the package <code>maps</code>. The <code>colorvar</code> parameter allows easy coloring of a statistical variable, at a level specified by the <code>locationvar</code> parameter. The various options passed to <code>options</code> as a list allow customization of the map's details such as size (<code>height</code>), shape (<code>markers</code>), and color coding (<code>colorAxis</code> and <code>colors</code>).</p> <h2 id="interactive-plotly-maps"><a href="#interactive-plotly-maps" class="header-anchor">#</a> Interactive plotly maps</h2> <p>The <code>plotly</code> package allows many kind of interactive plots, including maps. There are a few ways to create a map in <code>plotly</code>. Either supply the map data yourself (via <code>plot_ly()</code> or <code>ggplotly()</code>), use plotly's &quot;native&quot; mapping capabilities (via <code>plot_geo()</code> or <code>plot_mapbox()</code>), or even a combination of both. An example of supplying the map yourself would be:</p> <div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>plotly<span class="token punctuation">)</span>
map_data<span class="token punctuation">(</span><span class="token string">&quot;county&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    group_by<span class="token punctuation">(</span>group<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    plot_ly<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token operator">~</span>long<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token operator">~</span>lat<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    add_polygons<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    layout<span class="token punctuation">(</span>
        xaxis <span class="token operator">=</span> list<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> showgrid <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> showticklabels <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis <span class="token operator">=</span> list<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> showgrid <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> showticklabels <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/jl343.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/jl343.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>For a combination of both approaches, swap <code>plot_ly()</code> for <code>plot_geo()</code> or <code>plot_mapbox()</code> in the above example. See the <a href="https://cpsievert.github.io/plotly_book/maps.html" target="_blank" rel="noopener noreferrer">plotly book<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more examples.</p> <p>The next example is a &quot;strictly native&quot; approach that leverages the <a href="https://plot.ly/r/reference/#layout-geo" target="_blank" rel="noopener noreferrer">layout.geo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> attribute to set the aesthetics and zoom level of the map. It also uses the database <code>world.cities</code> from <code>maps</code> to filter the Brazilian cities and plot them on top of the &quot;native&quot; map.</p> <p>The main variables: <code>poph</code>is a text with the city and its population (which is shown upon mouse hover); <code>q</code>is a ordered factor from the population's quantile. <code>ge</code> has information for the layout of the maps. See the <a href="https://plot.ly/r/reference/#layout-geo" target="_blank" rel="noopener noreferrer">package documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information.</p> <div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>maps<span class="token punctuation">)</span>
dfb <span class="token operator">&lt;-</span> world.cities<span class="token punctuation">[</span>world.cities<span class="token operator">$</span>country.etc<span class="token operator">==</span><span class="token string">&quot;Brazil&quot;</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
library<span class="token punctuation">(</span>plotly<span class="token punctuation">)</span>
dfb<span class="token operator">$</span>poph <span class="token operator">&lt;-</span> paste<span class="token punctuation">(</span>dfb<span class="token operator">$</span>name<span class="token punctuation">,</span> <span class="token string">&quot;Pop&quot;</span><span class="token punctuation">,</span> round<span class="token punctuation">(</span>dfb<span class="token operator">$</span>pop<span class="token operator">/</span><span class="token number">1e6</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot; millions&quot;</span><span class="token punctuation">)</span>
dfb<span class="token operator">$</span>q <span class="token operator">&lt;-</span> with<span class="token punctuation">(</span>dfb<span class="token punctuation">,</span> cut<span class="token punctuation">(</span>pop<span class="token punctuation">,</span> quantile<span class="token punctuation">(</span>pop<span class="token punctuation">)</span><span class="token punctuation">,</span> include.lowest <span class="token operator">=</span> T<span class="token punctuation">)</span><span class="token punctuation">)</span>
levels<span class="token punctuation">(</span>dfb<span class="token operator">$</span>q<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> paste<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;1st&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2nd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3rd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4th&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Quantile&quot;</span><span class="token punctuation">)</span>
dfb<span class="token operator">$</span>q <span class="token operator">&lt;-</span> as.ordered<span class="token punctuation">(</span>dfb<span class="token operator">$</span>q<span class="token punctuation">)</span>

ge <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>
  scope <span class="token operator">=</span> <span class="token string">'south america'</span><span class="token punctuation">,</span>
  showland <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
  landcolor <span class="token operator">=</span> toRGB<span class="token punctuation">(</span><span class="token string">&quot;gray85&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  subunitwidth <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  countrywidth <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  subunitcolor <span class="token operator">=</span> toRGB<span class="token punctuation">(</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  countrycolor <span class="token operator">=</span> toRGB<span class="token punctuation">(</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

plot_geo<span class="token punctuation">(</span>dfb<span class="token punctuation">,</span> lon <span class="token operator">=</span> <span class="token operator">~</span>long<span class="token punctuation">,</span> lat <span class="token operator">=</span> <span class="token operator">~</span>lat<span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token operator">~</span>poph<span class="token punctuation">,</span>
    marker <span class="token operator">=</span> <span class="token operator">~</span>list<span class="token punctuation">(</span>size <span class="token operator">=</span> sqrt<span class="token punctuation">(</span>pop<span class="token operator">/</span><span class="token number">10000</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> line <span class="token operator">=</span> list<span class="token punctuation">(</span>width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    color <span class="token operator">=</span> <span class="token operator">~</span>q<span class="token punctuation">,</span> locationmode <span class="token operator">=</span> <span class="token string">'country names'</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
layout<span class="token punctuation">(</span>geo <span class="token operator">=</span> ge<span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">'Populations&lt;br&gt;(Click legend to toggle)'</span><span class="token punctuation">)</span>

</code></pre></div><p><a href="https://plot.ly/r/reference/#layout-geo" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/SxDCX.png" alt="This is a snapshot "><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="making-dynamic-html-maps-with-leaflet"><a href="#making-dynamic-html-maps-with-leaflet" class="header-anchor">#</a> Making Dynamic HTML Maps with Leaflet</h2> <p><a href="http://leafletjs.com/" target="_blank" rel="noopener noreferrer">Leaflet<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is an open-source JavaScript library for making dynamic maps for the web. RStudio wrote R bindings for Leaflet, available through its <a href="http://rstudio.github.io/leaflet/" target="_blank" rel="noopener noreferrer"><code>leaflet</code> package<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, built with <a href="http://www.htmlwidgets.org/showcase_leaflet.html" target="_blank" rel="noopener noreferrer"><code>htmlwidgets</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Leaflet maps integrate well with the <a href="http://rmarkdown.rstudio.com/" target="_blank" rel="noopener noreferrer">RMarkdown<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="http://shiny.rstudio.com/" target="_blank" rel="noopener noreferrer">Shiny<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ecosystems.</p> <p>The interface is <a href="https://stackoverflow.com/documentation/r/652/pipe-operators-and-others" target="_blank" rel="noopener noreferrer">piped<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, using a <code>leaflet()</code> function to initialize a map and subsequent functions adding (or removing) map layers. Many kinds of layers are available, from markers with popups to polygons for creating choropleth maps. Variables in the data.frame passed to <code>leaflet()</code> are accessed via function-style <code>~</code> quotation.</p> <p>To map the <a href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html" target="_blank" rel="noopener noreferrer"><code>state.name</code> and <code>state.center</code> datasets<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>leaflet<span class="token punctuation">)</span>

data.frame<span class="token punctuation">(</span>state.name<span class="token punctuation">,</span> state.center<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
    leaflet<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
    addProviderTiles<span class="token punctuation">(</span><span class="token string">'Stamen.Watercolor'</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
    addMarkers<span class="token punctuation">(</span>lng <span class="token operator">=</span> <span class="token operator">~</span>x<span class="token punctuation">,</span> lat <span class="token operator">=</span> <span class="token operator">~</span>y<span class="token punctuation">,</span> 
               popup <span class="token operator">=</span> <span class="token operator">~</span>state.name<span class="token punctuation">,</span> 
               clusterOptions <span class="token operator">=</span> markerClusterOptions<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="dynamic-leaflet-maps-in-shiny-applications"><a href="#dynamic-leaflet-maps-in-shiny-applications" class="header-anchor">#</a> Dynamic Leaflet maps in Shiny applications</h2> <p>The <a href="https://rstudio.github.io/leaflet/" target="_blank" rel="noopener noreferrer">Leaflet<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> package is designed to <a href="https://rstudio.github.io/leaflet/shiny.html" target="_blank" rel="noopener noreferrer">integerate with Shiny<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>In the <strong>ui</strong> you call <code>leafletOutput()</code> and in the server you call <code>renderLeaflet()</code></p> <div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>shiny<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>leaflet<span class="token punctuation">)</span>

ui <span class="token operator">&lt;-</span> fluidPage<span class="token punctuation">(</span>
    leafletOutput<span class="token punctuation">(</span><span class="token string">&quot;my_leaf&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

server <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> output<span class="token punctuation">,</span> session<span class="token punctuation">)</span><span class="token punctuation">{</span>
    
    output<span class="token operator">$</span>my_leaf <span class="token operator">&lt;-</span> renderLeaflet<span class="token punctuation">(</span><span class="token punctuation">{</span>
        
        leaflet<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
            addProviderTiles<span class="token punctuation">(</span><span class="token string">'Hydda.Full'</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
            setView<span class="token punctuation">(</span>lat <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">37.8</span><span class="token punctuation">,</span> lng <span class="token operator">=</span> <span class="token number">144.8</span><span class="token punctuation">,</span> zoom <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token punctuation">}</span>

shinyApp<span class="token punctuation">(</span>ui<span class="token punctuation">,</span> server<span class="token punctuation">)</span>

</code></pre></div><p>However, reactive inputs that affect the <code>renderLeaflet</code> expression will cause the entire map to be redrawn each time the reactive element is updated.</p> <p>Therefore, to modify a map that's already running you should use the <code>leafletProxy()</code> function.</p> <p>Normally you use <code>leaflet</code> to create the static aspects of the map, and <code>leafletProxy</code> to manage the dynamic elements, for example:</p> <div class="language-r extra-class"><pre class="language-r"><code>library<span class="token punctuation">(</span>shiny<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>leaflet<span class="token punctuation">)</span>

ui <span class="token operator">&lt;-</span> fluidPage<span class="token punctuation">(</span>
    sliderInput<span class="token punctuation">(</span>inputId <span class="token operator">=</span> <span class="token string">&quot;slider&quot;</span><span class="token punctuation">,</span> 
                label <span class="token operator">=</span> <span class="token string">&quot;values&quot;</span><span class="token punctuation">,</span>
                min <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
                max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
                value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
                step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    leafletOutput<span class="token punctuation">(</span><span class="token string">&quot;my_leaf&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

server <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> output<span class="token punctuation">,</span> session<span class="token punctuation">)</span><span class="token punctuation">{</span>
    set.seed<span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span>
    df <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>latitude <span class="token operator">=</span> sample<span class="token punctuation">(</span>seq<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">38.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">37.5</span><span class="token punctuation">,</span> by <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                     longitude <span class="token operator">=</span> sample<span class="token punctuation">(</span>seq<span class="token punctuation">(</span><span class="token number">144.0</span><span class="token punctuation">,</span> <span class="token number">145.0</span><span class="token punctuation">,</span> by <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                     value <span class="token operator">=</span> seq<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
    <span class="token comment">## create static element</span>
    output<span class="token operator">$</span>my_leaf <span class="token operator">&lt;-</span> renderLeaflet<span class="token punctuation">(</span><span class="token punctuation">{</span>
        
        leaflet<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
            addProviderTiles<span class="token punctuation">(</span><span class="token string">'Hydda.Full'</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
            setView<span class="token punctuation">(</span>lat <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">37.8</span><span class="token punctuation">,</span> lng <span class="token operator">=</span> <span class="token number">144.8</span><span class="token punctuation">,</span> zoom <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">)</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token comment">## filter data</span>
    df_filtered <span class="token operator">&lt;-</span> reactive<span class="token punctuation">(</span><span class="token punctuation">{</span>
        df<span class="token punctuation">[</span>df<span class="token operator">$</span>value <span class="token operator">&gt;=</span> input<span class="token operator">$</span>slider<span class="token punctuation">,</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token comment">## respond to the filtered data</span>
    observe<span class="token punctuation">(</span><span class="token punctuation">{</span>

        leafletProxy<span class="token punctuation">(</span>mapId <span class="token operator">=</span> <span class="token string">&quot;my_leaf&quot;</span><span class="token punctuation">,</span> data <span class="token operator">=</span> df_filtered<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
            clearMarkers<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>   <span class="token comment">## clear previous markers</span>
            addMarkers<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token punctuation">}</span>

shinyApp<span class="token punctuation">(</span>ui<span class="token punctuation">,</span> server<span class="token punctuation">)</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/uw6G6.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/uw6G6.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/r/introduction-to-geographical-maps.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/r/speeding-up-tough-to-vectorize-code.html" class="prev">
        Speeding up tough-to-vectorize code
      </a></span> <span class="next"><a href="/r/set-operations.html">
        Set operations
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/2906.69185ab2.js" defer></script>
  </body>
</html>
