<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MATLAB - MATLAB Best Practices</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Indent code properly, Keep lines short, Use assert, Avoid loops, Block Comment Operator, Create Unique Name for Temporary File, Use validateattributes">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MATLAB - MATLAB Best Practices">
    <meta property="og:description" content="Indent code properly, Keep lines short, Use assert, Avoid loops, Block Comment Operator, Create Unique Name for Temporary File, Use validateattributes">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/matlab/matlab-best-practices.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MATLAB - MATLAB Best Practices">
    <meta name="twitter:description" content="Indent code properly, Keep lines short, Use assert, Avoid loops, Block Comment Operator, Create Unique Name for Temporary File, Use validateattributes">
    <meta name="twitter:url" content="/matlab/matlab-best-practices.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1928.84fc0663.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MATLAB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matlab/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/matlab/getting-started-with-matlab-language.html" class="sidebar-link">Getting started with MATLAB Language</a></li><li><a href="/matlab/initializing-matrices-or-arrays.html" class="sidebar-link">Initializing Matrices or arrays</a></li><li><a href="/matlab/conditions.html" class="sidebar-link">Conditions</a></li><li><a href="/matlab/functions.html" class="sidebar-link">Functions</a></li><li><a href="/matlab/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/matlab/documenting-functions.html" class="sidebar-link">Documenting functions</a></li><li><a href="/matlab/using-functions-with-logical-output.html" class="sidebar-link">Using functions with logical output</a></li><li><a href="/matlab/for-loops.html" class="sidebar-link">For loops</a></li><li><a href="/matlab/object-oriented-programming.html" class="sidebar-link">Object-Oriented Programming</a></li><li><a href="/matlab/vectorization.html" class="sidebar-link">Vectorization</a></li><li><a href="/matlab/matrix-decompositions.html" class="sidebar-link">Matrix decompositions</a></li><li><a href="/matlab/graphics-2d-line-plots.html" class="sidebar-link">Graphics: 2D Line Plots</a></li><li><a href="/matlab/graphics-2d-and-3d-transformations.html" class="sidebar-link">Graphics: 2D and 3D Transformations</a></li><li><a href="/matlab/controlling-subplot-coloring-in-matlab.html" class="sidebar-link">Controlling Subplot coloring in Matlab</a></li><li><a href="/matlab/image-processing.html" class="sidebar-link">Image processing</a></li><li><a href="/matlab/drawing.html" class="sidebar-link">Drawing</a></li><li><a href="/matlab/financial-applications.html" class="sidebar-link">Financial Applications</a></li><li><a href="/matlab/fourier-transforms-and-inverse-fourier-transforms.html" class="sidebar-link">Fourier Transforms and Inverse Fourier Transforms</a></li><li><a href="/matlab/ordinary-differential-equations-ode-solvers.html" class="sidebar-link">Ordinary Differential Equations (ODE) Solvers</a></li><li><a href="/matlab/interpolation-with-matlab.html" class="sidebar-link">Interpolation with MATLAB</a></li><li><a href="/matlab/integration.html" class="sidebar-link">Integration</a></li><li><a href="/matlab/reading-large-files.html" class="sidebar-link">Reading large files</a></li><li><a href="/matlab/usage-of-accumarray-function.html" class="sidebar-link">Usage of accumarray() Function</a></li><li><a href="/matlab/introduction-to-mex-api.html" class="sidebar-link">Introduction to MEX API</a></li><li><a href="/matlab/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/matlab/performance-and-benchmarking.html" class="sidebar-link">Performance and Benchmarking</a></li><li><a href="/matlab/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/matlab/using-serial-ports.html" class="sidebar-link">Using serial ports</a></li><li><a href="/matlab/undocumented-features.html" class="sidebar-link">Undocumented Features</a></li><li><a href="/matlab/matlab-best-practices.html" aria-current="page" class="active sidebar-link">MATLAB Best Practices</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/matlab/matlab-best-practices.html#indent-code-properly" class="sidebar-link">Indent code properly</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-best-practices.html#keep-lines-short" class="sidebar-link">Keep lines short</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-best-practices.html#use-assert" class="sidebar-link">Use assert</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-best-practices.html#avoid-loops" class="sidebar-link">Avoid loops</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-best-practices.html#block-comment-operator" class="sidebar-link">Block Comment Operator</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-best-practices.html#create-unique-name-for-temporary-file" class="sidebar-link">Create Unique Name for Temporary File</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-best-practices.html#use-validateattributes" class="sidebar-link">Use validateattributes</a></li></ul></li><li><a href="/matlab/matlab-user-interfaces.html" class="sidebar-link">MATLAB User Interfaces</a></li><li><a href="/matlab/useful-tricks.html" class="sidebar-link">Useful tricks</a></li><li><a href="/matlab/common-mistakes-and-errors.html" class="sidebar-link">Common mistakes and errors</a></li><li><a href="/matlab/programming-utilities.html" class="sidebar-link">Programming Utilities</a></li><li><a href="/matlab/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="matlab-best-practices"><a href="#matlab-best-practices" class="header-anchor">#</a> MATLAB Best Practices</h1> <h2 id="indent-code-properly"><a href="#indent-code-properly" class="header-anchor">#</a> Indent code properly</h2> <p>Proper indentation gives not only the aesthetic look but also increases the readability of the code.</p> <p>For example, consider the following code:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">%no need to understand the code, just give it a look</span>
n <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
bf <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token keyword">while</span> n<span class="token operator">&gt;</span><span class="token number">1</span>
<span class="token keyword">for</span> ii <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>n
<span class="token keyword">for</span> jj <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>n
<span class="token keyword">if</span> ii<span class="token operator">+</span>jj<span class="token operator">&gt;</span><span class="token number">30</span>
bf <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token keyword">break</span>
<span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token keyword">if</span> bf
<span class="token keyword">break</span> 
<span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token keyword">if</span> bf
<span class="token keyword">break</span> 
<span class="token keyword">end</span>
n <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

</code></pre></div><p>As you can see, you need to give a careful look to see which loop and <code>if</code> statements are ending where.
<br> With smart indentation, you'll get this look:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>n <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
bf <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token keyword">while</span> n<span class="token operator">&gt;</span><span class="token number">1</span>
    <span class="token keyword">for</span> ii <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>n
        <span class="token keyword">for</span> jj <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>n
            <span class="token keyword">if</span> ii<span class="token operator">+</span>jj<span class="token operator">&gt;</span><span class="token number">30</span>
                bf <span class="token operator">=</span> true<span class="token punctuation">;</span>
                <span class="token keyword">break</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
        <span class="token keyword">if</span> bf
            <span class="token keyword">break</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> bf
        <span class="token keyword">break</span>
    <span class="token keyword">end</span>
    n <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

</code></pre></div><p>This clearly indicates the starting and ending of loops/<code>if</code> statement.</p> <p>You can do smart indentation by:
<br> <strong>•</strong> selecting all your code (<kbd>Ctrl</kbd>+<kbd>A</kbd>)
<br> <strong>•</strong> and then pressing <kbd>Ctrl</kbd>+<kbd>I</kbd> or clicking <a href="http://i.stack.imgur.com/PVQ0b.jpg" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/PVQ0b.jpg" alt="SmartIndentIcon"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from edit bar.
<a href="http://i.stack.imgur.com/8N7uJ.jpg" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/8N7uJ.jpg" alt="Editor"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="keep-lines-short"><a href="#keep-lines-short" class="header-anchor">#</a> Keep lines short</h2> <p>Use the continuation character (ellipsis) <code>...</code> to continue long statement.</p> <p><strong>Example:</strong></p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token function">MyFunc</span><span class="token punctuation">(</span> parameter1<span class="token punctuation">,</span>parameter2<span class="token punctuation">,</span>parameter3<span class="token punctuation">,</span>parameter4<span class="token punctuation">,</span> parameter5<span class="token punctuation">,</span> parameter6<span class="token punctuation">,</span>parameter7<span class="token punctuation">,</span> parameter8<span class="token punctuation">,</span> parameter9<span class="token punctuation">)</span>

</code></pre></div><p>can be replaced by:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token function">MyFunc</span><span class="token punctuation">(</span> parameter1<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter2<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter3<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter4<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter5<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter6<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter7<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter8<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        parameter9<span class="token punctuation">)</span>

</code></pre></div><h2 id="use-assert"><a href="#use-assert" class="header-anchor">#</a> Use assert</h2> <p>Matlab allows some very trivial mistakes to go by silently, which might cause an error to be raised much later in the run - making debugging hard.
If you <strong>assume</strong> something about your variables, <strong>validate</strong> it.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> out1 <span class="token operator">=</span> <span class="token function">get_cell_value_at_index</span><span class="token punctuation">(</span>scalar1<span class="token punctuation">,</span>cell2<span class="token punctuation">)</span>
<span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">isscalar</span><span class="token punctuation">(</span>scalar1<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'1st input must be a scalar'</span><span class="token punctuation">)</span>
<span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">iscell</span><span class="token punctuation">(</span>cell2<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'2nd input must be a cell array'</span><span class="token punctuation">)</span>

<span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">numel</span><span class="token punctuation">(</span>cell2<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> scalar1<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'2nd input must have more elements than the value of the 1st input'</span><span class="token punctuation">)</span>
<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">isempty</span><span class="token punctuation">(</span>cell2<span class="token punctuation">{</span>scalar1<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'2nd input at location is empty'</span><span class="token punctuation">)</span>

out1 <span class="token operator">=</span> cell2<span class="token punctuation">{</span>scalar1<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="avoid-loops"><a href="#avoid-loops" class="header-anchor">#</a> Avoid loops</h2> <p>Most of the time, loops are computationally expensive with Matlab. Your code will be orders of magnitudes faster if you use vectorization. It also often makes your code more modular, easily modifiable, and easier to debug. The major downside is that you have to take time to plan the data structures, and dimension errors are easier to come by.</p> <h3 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h3> <p>Don't write</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">for</span> t<span class="token operator">=</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span>
    <span class="token function">R</span><span class="token punctuation">(</span><span class="token keyword">end</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">cos</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

</code></pre></div><p>but</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>t<span class="token operator">=</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">;</span>
R<span class="token operator">=</span><span class="token function">cos</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>

</code></pre></div><p>Don't write</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
    <span class="token keyword">for</span> <span class="token number">j</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>m
        <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p>But something similar to</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>c<span class="token operator">=</span><span class="token function">repmat</span><span class="token punctuation">(</span>a<span class="token operator">.'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span><span class="token function">repmat</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

</code></pre></div><p>For more details, see <a href="https://stackoverflow.com/documentation/matlab/750/vectorization" target="_blank" rel="noopener noreferrer">vectorization<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="block-comment-operator"><a href="#block-comment-operator" class="header-anchor">#</a> Block Comment Operator</h2> <p>It is a good practice to add comments that describe the code. It is helpful for others and even for the coder when returned later.
A single line can be commented using the <code>%</code> symbol or using the shortkey <code>Ctrl+R</code>.
To uncomment a previously commented line remove the <code>%</code> symbol or use shortkey <code>Crtl+T</code>.</p> <p>While commenting a block of code can be done by adding a <code>%</code> symbol at the beginning of each line, newer versions of MATLAB (after 2015a) let you use the <strong>Block Comment Operator</strong> <code>%{ code %}</code>.
This operator increases the readability of the code. It can be used for both code commenting and function help documentation.
The Block can be <strong>folded</strong> and <strong>unfolded</strong> to increase the readability of the code.</p> <p><a href="https://i.stack.imgur.com/x8MtW.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/x8MtW.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>As it can be seen the <code>%{</code> and <code>%}</code> operators must appear alone on the lines. Do not include any other text on these lines.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> y <span class="token operator">=</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token comment">%{</span>
myFunction  Binary Singleton Expansion Function
y <span class="token operator">=</span> <span class="token function">myFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> applies the element<span class="token operator">-</span>by<span class="token operator">-</span>element binary operation
specified by the <span class="token keyword">function</span> handle FUNC to arrays A and B<span class="token punctuation">,</span> with implicit
expansion enabled<span class="token punctuation">.</span>
<span class="token comment">%}</span>

<span class="token comment">%%  Compute z(x, y) = x.*sin(y) on a grid:</span>
<span class="token comment">% x = 1:10;</span>
y <span class="token operator">=</span> x<span class="token operator">.'</span><span class="token punctuation">;</span>

<span class="token comment">%{</span>
z <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">numel</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">numel</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> ii<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token function">numel</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token keyword">for</span> jj<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token function">numel</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
        <span class="token function">z</span><span class="token punctuation">(</span>ii<span class="token punctuation">,</span>jj<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">x</span><span class="token punctuation">(</span>ii<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">y</span><span class="token punctuation">(</span>jj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">%}</span>

z <span class="token operator">=</span> <span class="token function">bsxfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> x<span class="token operator">.*</span><span class="token function">sin</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>

<span class="token keyword">end</span>

</code></pre></div><h2 id="create-unique-name-for-temporary-file"><a href="#create-unique-name-for-temporary-file" class="header-anchor">#</a> Create Unique Name for Temporary File</h2> <p>While coding a script or a function, it can be the case that one or more than one
temporary file be needed in order to, for example, store some data.</p> <p>In order to avoid overwriting an existing file or to shadow a MATLAB function
the <a href="https://uk.mathworks.com/help/matlab/ref/tempname.html" target="_blank" rel="noopener noreferrer">tempname<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> function
can be used to generate a <strong>unique name</strong> for a temporary file in the system temporary folder.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>my_temp_file<span class="token operator">=</span>tempname

</code></pre></div><p>The filename is generated without the extension; it can be added by concatenating
the desired extension to the name generated by <code>tempname</code></p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>my_temp_file_with_ext<span class="token operator">=</span><span class="token punctuation">[</span>tempname <span class="token string">'.txt'</span><span class="token punctuation">]</span>

</code></pre></div><p>The locaton of the system temporary folder can be retrieved by caling the
<a href="https://uk.mathworks.com/help/matlab/ref/tempdir.html" target="_blank" rel="noopener noreferrer">tempdir<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> function.</p> <p>If, during the execution of the function / script, the temporary file is no longer
needed, it can be deleted by using the function <a href="https://uk.mathworks.com/help/matlab/ref/delete.html" target="_blank" rel="noopener noreferrer">delete<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Since <code>delete</code> does not ask for confirmation, it might be useful to set <code>on</code> the
option to move the file to be deleted in the <code>recycle</code> folder.</p> <p>This can be done by using the function <a href="https://uk.mathworks.com/help/matlab/ref/recycle.html" target="_blank" rel="noopener noreferrer">recycle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> this
way:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">)</span>

</code></pre></div><p>In the following example, a possible usage of the functions <code>tempname</code>, <code>delete</code> and
<code>recycle</code> is proposed.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>%
<span class="token comment">% Create some example data</span>
%
theta<span class="token operator">=</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">;</span>
x<span class="token operator">=</span><span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
y<span class="token operator">=</span><span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
%
<span class="token comment">% Generate the temporary filename</span>
%
my_temp_file<span class="token operator">=</span><span class="token punctuation">[</span>tempname <span class="token string">'.mat'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
%
<span class="token comment">% Split the filename (path, name, extension) and display them in a message box</span>
<span class="token punctuation">[</span>tmp_file_path<span class="token punctuation">,</span>tmp_file_name<span class="token punctuation">,</span> tmp_file_ext<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">fileparts</span><span class="token punctuation">(</span>my_temp_file<span class="token punctuation">)</span>
<span class="token function">uiwait</span><span class="token punctuation">(</span><span class="token function">msgbox</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Path= %s\nName= %s\nExt= %s'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
              tmp_file_path<span class="token punctuation">,</span>tmp_file_name<span class="token punctuation">,</span>tmp_file_ext<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'TEMPORARY FILE'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
%
<span class="token comment">% Save the varaibles in a temporary file</span>
%
<span class="token function">save</span><span class="token punctuation">(</span>my_temp_file<span class="token punctuation">,</span><span class="token string">'x'</span><span class="token punctuation">,</span><span class="token string">'y'</span><span class="token punctuation">,</span><span class="token string">'theta'</span><span class="token punctuation">)</span>
%
<span class="token comment">% Load the varaibles from the temporary file</span>
%
<span class="token function">load</span><span class="token punctuation">(</span>my_temp_file<span class="token punctuation">)</span>
%
<span class="token comment">% Set the reclycle option on</span>
%
<span class="token function">recycle</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">)</span>
%
<span class="token comment">% Delete the temporary file</span>
%
<span class="token function">delete</span><span class="token punctuation">(</span>my_temp_file<span class="token punctuation">)</span>

</code></pre></div><p><strong>Caveat</strong></p> <p>The temporary filename is generated by using the <code>java.util.UUID.randomUUID</code> method
(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html" target="_blank" rel="noopener noreferrer">randomUUID<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>If MATLAB is run without JVM, the temporary filename is generated by using<br> <code>matlab.internal.timing.timing</code> based on the CPU counter and time. In this case
the temporary filename is not guaranteed to be unique.</p> <h2 id="use-validateattributes"><a href="#use-validateattributes" class="header-anchor">#</a> Use validateattributes</h2> <p>The function <a href="https://uk.mathworks.com/help/matlab/ref/validateattributes.html" target="_blank" rel="noopener noreferrer">validateattributes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
can be used to validate an array against a set of specifications</p> <p>It can be therefore used to validate the input provided to a function.</p> <p>In the following example, the function <code>test_validateattributes</code> requires three
input</p> <p><code>function test_validateattributes(input_1,input_2,input_3)</code></p> <p>The input specification are:</p> <li>
array_1:
<ul>
- class: double
- size: [3,2]
- values: elements must be not NaN
<p>char_array:</p> <ul><li>class: char</li> <li>value: the string must not be empty</li></ul> <p>array_3</p> <ul><li>class: double</li> <li>size: [5 1]</li> <li>values: elements must be real</li></ul> <p>To validate the three input, the function <code>validateattributes</code> can be called
with the following syntax:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token function">validateattributes</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span>classes<span class="token punctuation">,</span>attributes<span class="token punctuation">,</span>funcName<span class="token punctuation">,</span>varName<span class="token punctuation">,</span>argIndex<span class="token punctuation">)</span>

</code></pre></div><p>where:</p> <ul><li><code>A</code> is the array to be vaidated</li> <li><code>classes</code>: is the <code>type</code> of the array (e. g. <code>single</code>, <code>double</code>, <code>logical</code>)
</li><li><code>attributes</code>: are the atrributes the input array has to match (e. g. <code>[3,2], size</code>
to specify the size of the array, <code>nonnan</code> to specify that the array shall not have NaN values)</li> <li><code>funcName</code>: is the name of the function in which the validation occurs.
This argument is used in the generation of the error message (if any)</li></ul></ul></li> <li><code>varName</code>: is the name of the array under validation. This argument is used in the generation of the error message (if any)
</li><li><code>argIndex</code>: is the position of the inpurt array in the list of input.
This argument is used in the generation of the error message (if any)</li> <p>In case one or more than one input does not match the specification, an error
message is generated.</p> <p>In case of more than one invalid input, the validation stops when the first mismatch is found.</p> <p>This is <code>function test_validateattributes</code> in which the input validation
has been implemented.</p> <p>Since the function requires three input, a first check on the number of input
provided is performed using the fnction <a href="https://uk.mathworks.com/help/matlab/ref/nargin.html" target="_blank" rel="noopener noreferrer">nargin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> <span class="token function">test_validateattributes</span><span class="token punctuation">(</span>array_1<span class="token punctuation">,</span>char_array_1<span class="token punctuation">,</span>array_3<span class="token punctuation">)</span>
%
<span class="token comment">% Check for the number of expected input: if the number of input is less</span>
<span class="token comment">% than the require, the function exits with an error message</span>
%
<span class="token keyword">if</span><span class="token punctuation">(</span>nargin <span class="token operator">~=</span> <span class="token number">3</span><span class="token punctuation">)</span>
   <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Error: TEST_VALIDATEATTRIBUTES requires 3 input, found %d'</span><span class="token punctuation">,</span>nargin<span class="token punctuation">)</span>
<span class="token keyword">end</span>
%
<span class="token comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
<span class="token comment">% Definition of the expected characteristics of the first input %</span>
<span class="token comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
%
<span class="token comment">% INPUT #1 name (only used in the generation of the error message)</span>
%
input_1_name<span class="token operator">=</span><span class="token string">'array_1'</span><span class="token punctuation">;</span>
%
<span class="token comment">% INPUT #1 position (only used in the generation of the error message)</span>
%
input_1_position<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
%
<span class="token comment">% Expected CLASS of the first input MUST BE &quot;double&quot;</span>
%
input_1_class<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'double'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
%
<span class="token comment">% Expected ATTRIBUTES of the first input</span>
<span class="token comment">%   SIZE: MUST BE [3,2]</span>
%
input_1_size_attribute<span class="token operator">=</span><span class="token string">'size'</span><span class="token punctuation">;</span>
input_1_size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
%
<span class="token comment">%   VALUE CHECK: the element MUST BE NOT NaN</span>
%
input_1_value_type<span class="token operator">=</span><span class="token string">'nonnan'</span><span class="token punctuation">;</span>
%
<span class="token comment">% Build the INPUT 1 attributes</span>
%
input_1_attributes<span class="token operator">=</span><span class="token punctuation">{</span>input_1_size_attribute<span class="token punctuation">,</span>input_1_size<span class="token punctuation">,</span> <span class="token punctuation">...</span>
                    input_1_value_type<span class="token punctuation">}</span><span class="token punctuation">;</span>
%
<span class="token comment">% CHECK THE VALIDITY OF THE FIRST INPUT</span>
%
<span class="token function">validateattributes</span><span class="token punctuation">(</span>array_1<span class="token punctuation">,</span> <span class="token punctuation">...</span>
                   input_1_class<span class="token punctuation">,</span>input_1_attributes<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
                   input_1_name<span class="token punctuation">,</span>input_1_position<span class="token punctuation">)</span><span class="token punctuation">;</span>

%
<span class="token comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
<span class="token comment">% Definition of the expected characteristics of the second input %</span>
<span class="token comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
%
<span class="token comment">% INPUT #1 name (only used in the generation of the error message)</span>
%
input_2_name<span class="token operator">=</span><span class="token string">'char_array_1'</span><span class="token punctuation">;</span>
%
<span class="token comment">% INPUT #2 position (only used in the generation of the error message)</span>
%
input_2_position<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
%
<span class="token comment">% Expected CLASS of the first input MUST BE &quot;string&quot;</span>
%
input_2_class<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'char'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
%
<span class="token comment">%   VALUE CHECK: the element must be not NaN</span>
%
input_2_size_attribute<span class="token operator">=</span><span class="token string">'nonempty'</span><span class="token punctuation">;</span>
%
<span class="token comment">% Build the INPUT 2 attributes</span>
%
input_2_attributes<span class="token operator">=</span><span class="token punctuation">{</span>input_2_size_attribute<span class="token punctuation">}</span><span class="token punctuation">;</span>
%
<span class="token comment">% CHECK THE VALIDITY OF THE SECOND INPUT</span>
%
<span class="token function">validateattributes</span><span class="token punctuation">(</span>char_array_1<span class="token punctuation">,</span> <span class="token punctuation">...</span>
                   input_2_class<span class="token punctuation">,</span>input_2_attributes<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
                   input_2_name<span class="token punctuation">,</span>input_2_position<span class="token punctuation">)</span><span class="token punctuation">;</span>
%
<span class="token comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
<span class="token comment">% Definition of the expected characteristics of the third input %</span>
<span class="token comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
%
<span class="token comment">% INPUT #3 name (only used in the generation of the error message)</span>
%
input_3_name<span class="token operator">=</span><span class="token string">'array_3'</span><span class="token punctuation">;</span>
%
<span class="token comment">% INPUT #3 position (only used in the generation of the error message)</span>
%
input_3_position<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
%
<span class="token comment">% Expected CLASS of the first input MUST BE &quot;double&quot;</span>
%
input_3_class<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'double'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
%
<span class="token comment">% Expected ATTRIBUTES of the first input</span>
<span class="token comment">%   SIZE: must be [5]</span>
input_3_size_attribute<span class="token operator">=</span><span class="token string">'size'</span><span class="token punctuation">;</span>
input_3_size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">%   VALUE CHECK: the elements must be real</span>
input_3_value_type<span class="token operator">=</span><span class="token string">'real'</span><span class="token punctuation">;</span>
%
<span class="token comment">% Build the INPUT 3 attributes</span>
%
input_3_attributes<span class="token operator">=</span><span class="token punctuation">{</span>input_3_size_attribute<span class="token punctuation">,</span>input_3_size<span class="token punctuation">,</span> <span class="token punctuation">...</span>
                    input_3_value_type<span class="token punctuation">}</span><span class="token punctuation">;</span>
%
<span class="token comment">% CHECK THE VALIDITY OF THE FIRST INPUT</span>
%
<span class="token function">validateattributes</span><span class="token punctuation">(</span>array_3<span class="token punctuation">,</span> <span class="token punctuation">...</span>
                   input_3_class<span class="token punctuation">,</span>input_3_attributes<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
                   input_3_name<span class="token punctuation">,</span>input_3_position<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'All the three input are OK'</span><span class="token punctuation">)</span>

</code></pre></div><p>The following script can be used to test the implementation of the validation procedure.</p> <p>It generate the three input required and, randomly, it makes them not valid.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>%
<span class="token comment">% Generate the first input</span>
%
n_rows<span class="token operator">=</span><span class="token function">randi</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
n_cols<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
input_1<span class="token operator">=</span><span class="token function">randi</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">20</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>n_rows<span class="token punctuation">,</span>n_cols<span class="token punctuation">)</span><span class="token punctuation">;</span>
%
<span class="token comment">% Generate the second input</span>
%
<span class="token keyword">if</span><span class="token punctuation">(</span>rand <span class="token operator">&gt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
   input_2<span class="token operator">=</span><span class="token string">'This is a string'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
   input_2<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
%
<span class="token comment">% Generate the third input</span>
%
input_3<span class="token operator">=</span><span class="token function">acos</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
%
<span class="token comment">% Call the test_validateattributes function with the above generated input</span>
%
input_1
input_2
input_3
%
<span class="token function">test_validateattributes</span><span class="token punctuation">(</span>input_1<span class="token punctuation">,</span>input_2<span class="token punctuation">,</span>input_3<span class="token punctuation">)</span>

</code></pre></div><p>These are a couple of examples of wrong input detected by the <code>validateattributes</code> function:</p> <p>Wrong input</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>input_1 <span class="token operator">=</span>

    <span class="token number">23</span>    <span class="token number">22</span>
    <span class="token number">26</span>    <span class="token number">28</span>

input_2 <span class="token operator">=</span>

     <span class="token string">''</span>

input_3 <span class="token operator">=</span>

   <span class="token number">0.0000</span> <span class="token operator">+</span> <span class="token number">0.4455i</span>
   <span class="token number">1.2420</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>
   <span class="token number">0.4063</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>
   <span class="token number">1.3424</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>
   <span class="token number">1.2186</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>

Error using <span class="token function">test_validateattributes</span> <span class="token punctuation">(</span>line <span class="token number">44</span><span class="token punctuation">)</span>
Expected input number <span class="token number">1</span><span class="token punctuation">,</span> array_1<span class="token punctuation">,</span> to be of size <span class="token number">3</span>x2 when it is actually
size <span class="token number">2</span>x2<span class="token punctuation">.</span>

</code></pre></div><p>Wrong input</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>input_1 <span class="token operator">=</span>

    <span class="token number">22</span>    <span class="token number">24</span>
    <span class="token number">21</span>    <span class="token number">25</span>
    <span class="token number">26</span>    <span class="token number">27</span>

input_2 <span class="token operator">=</span>

This is a string

input_3 <span class="token operator">=</span>

   <span class="token number">1.1371</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>
   <span class="token number">0.6528</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>
   <span class="token number">1.0479</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>
   <span class="token number">0.0000</span> <span class="token operator">+</span> <span class="token number">0.1435i</span>
   <span class="token number">0.0316</span> <span class="token operator">+</span> <span class="token number">0.0000i</span>

Error using <span class="token function">test_validateattributes</span> <span class="token punctuation">(</span>line <span class="token number">109</span><span class="token punctuation">)</span>
Expected input number <span class="token number">3</span><span class="token punctuation">,</span> array_3<span class="token punctuation">,</span> to be real<span class="token punctuation">.</span>

</code></pre></div><p>Valid input</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>input_1 <span class="token operator">=</span>

    <span class="token number">20</span>    <span class="token number">25</span>
    <span class="token number">25</span>    <span class="token number">28</span>
    <span class="token number">24</span>    <span class="token number">23</span>

input_2 <span class="token operator">=</span>

This is a string

input_3 <span class="token operator">=</span>

    <span class="token number">0.9696</span>
    <span class="token number">1.5279</span>
    <span class="token number">1.3581</span>
    <span class="token number">0.5234</span>
    <span class="token number">0.9665</span>

All the three input are OK

</code></pre></div><h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>This topic displays best practices that the community has learned over time.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/matlab/matlab-best-practices.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matlab/undocumented-features.html" class="prev">
        Undocumented Features
      </a></span> <span class="next"><a href="/matlab/matlab-user-interfaces.html">
        MATLAB User Interfaces
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1928.84fc0663.js" defer></script>
  </body>
</html>
