<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MATLAB - MATLAB User Interfaces</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Passing Data Around User Interface, Making a button in your UI that pauses callback execution, Passing data around using the handles structure, Performance Issues when Passing Data Around User Interface">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MATLAB - MATLAB User Interfaces">
    <meta property="og:description" content="Passing Data Around User Interface, Making a button in your UI that pauses callback execution, Passing data around using the handles structure, Performance Issues when Passing Data Around User Interface">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/matlab/matlab-user-interfaces.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MATLAB - MATLAB User Interfaces">
    <meta name="twitter:description" content="Passing Data Around User Interface, Making a button in your UI that pauses callback execution, Passing data around using the handles structure, Performance Issues when Passing Data Around User Interface">
    <meta name="twitter:url" content="/matlab/matlab-user-interfaces.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1929.e9f4c45b.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MATLAB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matlab/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/matlab/getting-started-with-matlab-language.html" class="sidebar-link">Getting started with MATLAB Language</a></li><li><a href="/matlab/initializing-matrices-or-arrays.html" class="sidebar-link">Initializing Matrices or arrays</a></li><li><a href="/matlab/conditions.html" class="sidebar-link">Conditions</a></li><li><a href="/matlab/functions.html" class="sidebar-link">Functions</a></li><li><a href="/matlab/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/matlab/documenting-functions.html" class="sidebar-link">Documenting functions</a></li><li><a href="/matlab/using-functions-with-logical-output.html" class="sidebar-link">Using functions with logical output</a></li><li><a href="/matlab/for-loops.html" class="sidebar-link">For loops</a></li><li><a href="/matlab/object-oriented-programming.html" class="sidebar-link">Object-Oriented Programming</a></li><li><a href="/matlab/vectorization.html" class="sidebar-link">Vectorization</a></li><li><a href="/matlab/matrix-decompositions.html" class="sidebar-link">Matrix decompositions</a></li><li><a href="/matlab/graphics-2d-line-plots.html" class="sidebar-link">Graphics: 2D Line Plots</a></li><li><a href="/matlab/graphics-2d-and-3d-transformations.html" class="sidebar-link">Graphics: 2D and 3D Transformations</a></li><li><a href="/matlab/controlling-subplot-coloring-in-matlab.html" class="sidebar-link">Controlling Subplot coloring in Matlab</a></li><li><a href="/matlab/image-processing.html" class="sidebar-link">Image processing</a></li><li><a href="/matlab/drawing.html" class="sidebar-link">Drawing</a></li><li><a href="/matlab/financial-applications.html" class="sidebar-link">Financial Applications</a></li><li><a href="/matlab/fourier-transforms-and-inverse-fourier-transforms.html" class="sidebar-link">Fourier Transforms and Inverse Fourier Transforms</a></li><li><a href="/matlab/ordinary-differential-equations-ode-solvers.html" class="sidebar-link">Ordinary Differential Equations (ODE) Solvers</a></li><li><a href="/matlab/interpolation-with-matlab.html" class="sidebar-link">Interpolation with MATLAB</a></li><li><a href="/matlab/integration.html" class="sidebar-link">Integration</a></li><li><a href="/matlab/reading-large-files.html" class="sidebar-link">Reading large files</a></li><li><a href="/matlab/usage-of-accumarray-function.html" class="sidebar-link">Usage of accumarray() Function</a></li><li><a href="/matlab/introduction-to-mex-api.html" class="sidebar-link">Introduction to MEX API</a></li><li><a href="/matlab/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/matlab/performance-and-benchmarking.html" class="sidebar-link">Performance and Benchmarking</a></li><li><a href="/matlab/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/matlab/using-serial-ports.html" class="sidebar-link">Using serial ports</a></li><li><a href="/matlab/undocumented-features.html" class="sidebar-link">Undocumented Features</a></li><li><a href="/matlab/matlab-best-practices.html" class="sidebar-link">MATLAB Best Practices</a></li><li><a href="/matlab/matlab-user-interfaces.html" aria-current="page" class="active sidebar-link">MATLAB User Interfaces</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/matlab/matlab-user-interfaces.html#passing-data-around-user-interface" class="sidebar-link">Passing Data Around User Interface</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-user-interfaces.html#making-a-button-in-your-ui-that-pauses-callback-execution" class="sidebar-link">Making a button in your UI that pauses callback execution</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-user-interfaces.html#passing-data-around-using-the-handles-structure" class="sidebar-link">Passing data around using the &quot;handles&quot; structure</a></li><li class="sidebar-sub-header"><a href="/matlab/matlab-user-interfaces.html#performance-issues-when-passing-data-around-user-interface" class="sidebar-link">Performance Issues when Passing Data Around User Interface</a></li></ul></li><li><a href="/matlab/useful-tricks.html" class="sidebar-link">Useful tricks</a></li><li><a href="/matlab/common-mistakes-and-errors.html" class="sidebar-link">Common mistakes and errors</a></li><li><a href="/matlab/programming-utilities.html" class="sidebar-link">Programming Utilities</a></li><li><a href="/matlab/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="matlab-user-interfaces"><a href="#matlab-user-interfaces" class="header-anchor">#</a> MATLAB User Interfaces</h1> <h2 id="passing-data-around-user-interface"><a href="#passing-data-around-user-interface" class="header-anchor">#</a> Passing Data Around User Interface</h2> <p>Most advanced user interfaces require the user to be able to pass information between the various functions which make up a user interface. MATLAB has a number of different methods to do so.</p> <h3 id="guidata"><a href="#guidata" class="header-anchor">#</a> <a href="http://www.mathworks.com/help/matlab/ref/guidata.html" target="_blank" rel="noopener noreferrer"><code>guidata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>MATLAB's own <a href="http://www.mathworks.com/help/matlab/creating_guis/guide-tools-summary.html" target="_blank" rel="noopener noreferrer">GUI Development Environment (GUIDE)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> prefers to use a <code>struct</code> named <code>handles</code> to pass data between callbacks. This <code>struct</code> contains all of the graphics handles to the various UI components as well as user-specified data. If you aren't using a GUIDE-created callback which automatically passes <code>handles</code>, you can retrieve the current value using <a href="http://www.mathworks.com/help/matlab/ref/guidata.html" target="_blank" rel="noopener noreferrer"><code>guidata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">% hObject is a graphics handle to any UI component in your GUI</span>
handles <span class="token operator">=</span> <span class="token function">guidata</span><span class="token punctuation">(</span>hObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>If you want to modify a value stored in this data structure, you can modify but then you must store it back within the <code>hObject</code> for the changes to be visible by other callbacks. You can store it by specifying a second input argument to <a href="http://www.mathworks.com/help/matlab/ref/guidata.html" target="_blank" rel="noopener noreferrer"><code>guidata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">% Update the value</span>
handles<span class="token punctuation">.</span>myValue <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">% Save changes</span>
<span class="token function">guidata</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> handles<span class="token punctuation">)</span>

</code></pre></div><p>The value of <code>hObject</code> doesn't matter as long as it is a UI component <strong>within the same <code>figure</code></strong> because ultimately the data is stored within the figure containing <code>hObject</code>.</p> <p><strong>Best for:</strong></p> <li>Storing the `handles` structure, in which you can store all the
handles of your GUI components.</li>
- Storing &quot;small&quot; other variables which need to be accessed by most callbacks.
<p><strong>Not recommended for</strong>:</p> <li>Storing large variables which do not have to be accessed by all
callbacks and sub-functions (use `setappdata`/`getappdata` for
these).</li> <h3 id="setappdata-getappdata"><a href="#setappdata-getappdata" class="header-anchor">#</a> <a href="http://www.mathworks.com/help/matlab/ref/setappdata.html" target="_blank" rel="noopener noreferrer"><code>setappdata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/<a href="http://www.mathworks.com/help/matlab/ref/getappdata.html" target="_blank" rel="noopener noreferrer"><code>getappdata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Similar to the <code>guidata</code> approach, you can use <a href="http://www.mathworks.com/help/matlab/ref/setappdata.html" target="_blank" rel="noopener noreferrer"><code>setappdata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="http://www.mathworks.com/help/matlab/ref/getappdata.html" target="_blank" rel="noopener noreferrer"><code>getappdata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to store and retrieve values from within a graphics handle. The advantage of using these methods is that you can retrieve <strong>only the value you want</strong> rather than an entire <code>struct</code> containing <strong>all</strong> stored data. It is similar to a key/value store.</p> <p>To store data within a graphics object</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">% Create some data you would like to store</span>
myvalue <span class="token operator">=</span> <span class="token number">2</span>

<span class="token comment">% Store it using the key 'mykey'</span>
<span class="token function">setappdata</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> <span class="token string">'mykey'</span><span class="token punctuation">,</span> myvalue<span class="token punctuation">)</span>

</code></pre></div><p>And to retrieve that same value from within a different callback</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>value <span class="token operator">=</span> <span class="token function">getappdata</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> <span class="token string">'mykey'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>Note:</strong> If no value was stored prior to calling <code>getappdata</code>, it will return an empty array (<code>[]</code>).</p> <p>Similar to <code>guidata</code>, the data is stored in the figure that contains <code>hObject</code>.</p> <p><strong>Best for:</strong></p> <li>Storing large variables which do not have to be accessed by all
callbacks and sub-functions.</li> <h3 id="userdata"><a href="#userdata" class="header-anchor">#</a> <a href="http://uk.mathworks.com/help/matlab/creating_guis/share-data-among-callbacks.html#bt9p4qp" target="_blank" rel="noopener noreferrer"><code>UserData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>Every graphics handle has a special property, <code>UserData</code> which can contain any data you wish. It could contain a cell array, a <code>struct</code>, or even a scalar. You can take advantage of this property and store any data you wish to be associated with a given graphics handle in this field. You can save and retrieve the value using the standard <code>get</code>/<code>set</code> methods for graphics objects or dot notation if you're using R2014b or newer.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">% Create some data to store</span>
mydata <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">% Store it within the UserData property</span>
<span class="token function">set</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> <span class="token string">'UserData'</span><span class="token punctuation">,</span> mydata<span class="token punctuation">)</span>

<span class="token comment">% Of if you're using R2014b or newer:</span>
<span class="token comment">% hObject.UserData = mydata;</span>

</code></pre></div><p>Then from within another callback, you can retrieve this data:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>their_data <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> <span class="token string">'UserData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Or if you're using R2014b or newer:</span>
<span class="token comment">% their_data = hObject.UserData;</span>

</code></pre></div><p><strong>Best for:</strong></p> <ul><li>Storing variables with a limited scope (variables which are likely to be used only by the object in which they are stored, or objects having a direct relationship to it).</li></ul> <h3 id="nested-functions"><a href="#nested-functions" class="header-anchor">#</a> <a href="http://uk.mathworks.com/help/matlab/creating_guis/share-data-among-callbacks.html#bt9p4s2" target="_blank" rel="noopener noreferrer">Nested Functions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>In MATLAB, a nested function can read and modify any variable defined in the parent function. In this way, if you specify a callback to be a nested function, it can retrieve and modify any data stored in the main function.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> <span class="token function">mygui</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    
    hButton <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token string">'Click Me'</span><span class="token punctuation">,</span> <span class="token string">'Callback'</span><span class="token punctuation">,</span> <span class="token operator">@</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Create a counter to keep track of the number of times the button is clicked</span>
    nClicks <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">% Callback function is nested and can therefore read and modify nClicks</span>
    <span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> event<span class="token punctuation">)</span>
        <span class="token comment">% Increment the number of clicks</span>
        nClicks <span class="token operator">=</span> nClicks <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">% Print the number of clicks so far</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Number of clicks: %d\n'</span><span class="token punctuation">,</span> nClicks<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p><strong>Best for:</strong></p> <ul><li>Small, simple GUIs. (for quick prototyping, to not have to implement the <code>guidata</code> and/or <code>set/getappdata</code> methods).</li></ul> <p><strong>Not recommended for</strong>:</p> <li>
Medium, large or complex GUIs.
</li> <li>
GUI created with `GUIDE`.
</li> <h3 id="explicit-input-arguments"><a href="#explicit-input-arguments" class="header-anchor">#</a> Explicit input arguments</h3> <p>If you need to send data to a callback function and don't need to modify the data within the callback, you can always consider passing the data to the callback using a carefully crafted callback definition.</p> <p>You could use an anonymous function which adds inputs</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">% Create some data to send to mycallback</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">% Pass data as a third input to mycallback</span>
<span class="token function">set</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> <span class="token string">'Callback'</span><span class="token punctuation">,</span> <span class="token operator">@</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token function">mycallback</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> event<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>Or you could use the cell array syntax to specify a callback, again specifying additional inputs.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token function">set</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> <span class="token string">'Callback'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token operator">@</span>mycallback<span class="token punctuation">,</span> data<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p><strong>Best for:</strong></p> <ul><li>When the callback needs <code>data</code> to perform some operations but the <code>data</code> variable does not need to be modified and saved in a new state.</li></ul> <h2 id="making-a-button-in-your-ui-that-pauses-callback-execution"><a href="#making-a-button-in-your-ui-that-pauses-callback-execution" class="header-anchor">#</a> Making a button in your UI that pauses callback execution</h2> <p>Sometimes we'd like to pause code execution to inspect the state of the application (see <a href="http://stackoverflow.com/documentation/matlab/1045/debugging#t=201702221619471013666" target="_blank" rel="noopener noreferrer">Debugging<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). When running code through the MATLAB editor, this can be done using the &quot;Pause&quot; button in the UI or by pressing <kbd>Ctrl</kbd>+<kbd>c</kbd> (on Windows). However, when a computation was initiated from a GUI (via the callback of some <code>uicontrol</code>), this method does not work anymore, and the callback should be <strong>interrupted</strong> via another callback. Below is a demonstration of this principle:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> interruptibleUI
dbclear in interruptibleUI <span class="token comment">% reset breakpoints in this file</span>
<span class="token function">figure</span><span class="token punctuation">(</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">329</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'Style'</span><span class="token punctuation">,</span> <span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token string">'Compute'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'Position'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">24</span> <span class="token number">55</span> <span class="token number">131</span> <span class="token number">63</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'Callback'</span><span class="token punctuation">,</span> <span class="token operator">@</span>longComputation<span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'Interruptible'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% 'on' by default anyway</span>
      
<span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'Style'</span><span class="token punctuation">,</span> <span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token string">'Pause #1'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'Position'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">180</span> <span class="token number">87</span> <span class="token number">131</span> <span class="token number">63</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'Callback'</span><span class="token punctuation">,</span> <span class="token operator">@</span>interrupt1<span class="token punctuation">)</span><span class="token punctuation">;</span>       

<span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'Style'</span><span class="token punctuation">,</span> <span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token string">'Pause #2'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'Position'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">180</span> <span class="token number">12</span> <span class="token number">131</span> <span class="token number">63</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
          <span class="token string">'Callback'</span><span class="token punctuation">,</span> <span class="token operator">@</span>interrupt2<span class="token punctuation">)</span><span class="token punctuation">;</span>    

<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">longComputation</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
  superSecretVar <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">pause</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'done!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% we'll use this to determine if code kept running &quot;in the background&quot;.</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">interrupt1</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>event<span class="token punctuation">)</span> <span class="token comment">% depending on where you want to stop</span>
  dbstop in interruptibleUI at <span class="token number">27</span> <span class="token comment">% will stop after print('done!');</span>
  dbstop in interruptibleUI at <span class="token number">32</span> <span class="token comment">% will stop after **this** line.</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">interrupt2</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>event<span class="token punctuation">)</span> <span class="token comment">% method 2</span>
  keyboard<span class="token punctuation">;</span>
  dbup<span class="token punctuation">;</span> <span class="token comment">% this will need to be executed manually once the code stops on the previous line.</span>
<span class="token keyword">end</span>

</code></pre></div><p>To make sure you understand this example do the following:</p> <ol><li>Paste the above code into a new file called and save it as <code>interruptibleUI.m</code>, such that the code starts on the <strong>very first line</strong> of the file (this is important for the 1st method to work).</li> <li>Run the script.</li> <li>Click <kbd>Compute</kbd> and shortly afterwards click either <kbd>Pause #1</kbd> or on <kbd>Pause #2</kbd>.</li> <li>Make sure you can find the value of <code>superSecretVar</code>.</li></ol> <h2 id="passing-data-around-using-the-handles-structure"><a href="#passing-data-around-using-the-handles-structure" class="header-anchor">#</a> Passing data around using the &quot;handles&quot; structure</h2> <p>This is an example of a basic GUI with two buttons that change a value stored in the GUI's <code>handles</code> structure.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> <span class="token function">gui_passing_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">% A basic GUI with two buttons to show a simple use of the 'handles'</span>
    <span class="token comment">% structure in GUI building</span>

    <span class="token comment">%  Create a new figure.</span>
    f <span class="token operator">=</span> <span class="token function">figure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Retrieve the handles structure</span>
    handles <span class="token operator">=</span> <span class="token function">guidata</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Store the figure handle</span>
    handles<span class="token punctuation">.</span>figure <span class="token operator">=</span> f<span class="token punctuation">;</span>

    <span class="token comment">% Create an edit box and two buttons (plus and minus), </span>
    <span class="token comment">% and store their handles for future use</span>
    handles<span class="token punctuation">.</span>hedit  <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'edit'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token string">'Enable'</span><span class="token punctuation">,</span> <span class="token string">'Inactive'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    handles<span class="token punctuation">.</span>hbutton_plus  <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'+'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
               <span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token string">'Callback'</span> <span class="token punctuation">,</span> <span class="token operator">@</span>ButtonPress<span class="token punctuation">)</span><span class="token punctuation">;</span>

    handles<span class="token punctuation">.</span>hbutton_minus  <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
               <span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token string">'Callback'</span> <span class="token punctuation">,</span> <span class="token operator">@</span>ButtonPress<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Define an initial value, store it in the handles structure and show</span>
    <span class="token comment">% it in the Edit box</span>
    handles<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">set</span><span class="token punctuation">(</span>handles<span class="token punctuation">.</span>hedit <span class="token punctuation">,</span> <span class="token string">'String'</span> <span class="token punctuation">,</span> <span class="token function">num2str</span><span class="token punctuation">(</span>handles<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">% Store handles</span>
    <span class="token function">guidata</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> handles<span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token keyword">function</span>  <span class="token function">ButtonPress</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> eventdata<span class="token punctuation">)</span>
    <span class="token comment">% A button was pressed</span>
    <span class="token comment">% Retrieve the handles</span>
    handles <span class="token operator">=</span> <span class="token function">guidata</span><span class="token punctuation">(</span>hObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Determine which button was pressed; hObject is the calling object</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span>hObject <span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token string">'+'</span>
            <span class="token comment">% Add 1 to the value</span>
            handles<span class="token punctuation">.</span>value <span class="token operator">=</span> handles<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token function">set</span><span class="token punctuation">(</span>handles<span class="token punctuation">.</span>hedit <span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token function">num2str</span><span class="token punctuation">(</span>handles<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token string">'-'</span>
            <span class="token comment">% Substract 1 from the value</span>
            handles<span class="token punctuation">.</span>value <span class="token operator">=</span> handles<span class="token punctuation">.</span>value <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token comment">% Display the new value</span>
    <span class="token function">set</span><span class="token punctuation">(</span>handles<span class="token punctuation">.</span>hedit <span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token function">num2str</span><span class="token punctuation">(</span>handles<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">% Store handles</span>
    <span class="token function">guidata</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> handles<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>To test the example, save it in a file called <code>gui_passing_data.m</code> and launch it with F5.
Please note that in such a simple case, you would not even need to store the value in the handles structure because you could directly access it from the edit box's <code>String</code> property.</p> <h2 id="performance-issues-when-passing-data-around-user-interface"><a href="#performance-issues-when-passing-data-around-user-interface" class="header-anchor">#</a> Performance Issues when Passing Data Around User Interface</h2> <p>Two main techniques allow passing data between GUI functions and Callbacks: setappdata/getappdata and guidata (<a href="http://uk.mathworks.com/help/matlab/creating_guis/share-data-among-callbacks.html" target="_blank" rel="noopener noreferrer">read more about it<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). The former should be used for larger variables as it is more time efficient. The following example tests the two methods' efficiency.</p> <p>A GUI with a simple button is created and a large variable (10000x10000 double) is stored both with guidata and with setappdata. The button reloads and stores back the variable using the two methods while timing their execution. The running time and percentage improvement using setappdata are displayed in the command window.</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> <span class="token function">gui_passing_data_performance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">% A basic GUI with a button to show performance difference between</span>
    <span class="token comment">% guidata and setappdata</span>

    <span class="token comment">%  Create a new figure.</span>
    f <span class="token operator">=</span> <span class="token function">figure</span><span class="token punctuation">(</span><span class="token string">'Units'</span> <span class="token punctuation">,</span> <span class="token string">'normalized'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Retrieve the handles structure</span>
    handles <span class="token operator">=</span> <span class="token function">guidata</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Store the figure handle</span>
    handles<span class="token punctuation">.</span>figure <span class="token operator">=</span> f<span class="token punctuation">;</span>

    handles<span class="token punctuation">.</span>hbutton <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'Calculate'</span><span class="token punctuation">,</span><span class="token string">'units'</span><span class="token punctuation">,</span><span class="token string">'normalized'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
               <span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token punctuation">,</span> <span class="token number">0.45</span> <span class="token punctuation">,</span> <span class="token number">0.2</span> <span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token string">'Callback'</span> <span class="token punctuation">,</span> <span class="token operator">@</span>ButtonPress<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Create an uninteresting large array</span>
    data <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Store it in appdata</span>
    <span class="token function">setappdata</span><span class="token punctuation">(</span>handles<span class="token punctuation">.</span>figure <span class="token punctuation">,</span> <span class="token string">'data'</span> <span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Store it in handles</span>
    handles<span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>

    <span class="token comment">% Save handles</span>
    <span class="token function">guidata</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> handles<span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token keyword">function</span>  <span class="token function">ButtonPress</span><span class="token punctuation">(</span>hObject<span class="token punctuation">,</span> eventdata<span class="token punctuation">)</span>

    <span class="token comment">% Calculate the time difference when using guidata and appdata</span>
    t_handles <span class="token operator">=</span> <span class="token function">timeit</span><span class="token punctuation">(</span><span class="token operator">@</span>use_handles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t_appdata <span class="token operator">=</span> <span class="token function">timeit</span><span class="token punctuation">(</span><span class="token operator">@</span>use_appdata<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Absolute and percentage difference</span>
    t_diff <span class="token operator">=</span> t_handles <span class="token operator">-</span> t_appdata<span class="token punctuation">;</span>
    t_perc <span class="token operator">=</span> <span class="token function">round</span><span class="token punctuation">(</span>t_diff <span class="token operator">/</span> t_handles <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Difference: '</span> <span class="token function">num2str</span><span class="token punctuation">(</span>t_diff<span class="token punctuation">)</span> <span class="token string">' ms / '</span> <span class="token function">num2str</span><span class="token punctuation">(</span>t_perc<span class="token punctuation">)</span> <span class="token string">' %'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>




<span class="token keyword">function</span>  <span class="token function">use_appdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  

    <span class="token comment">% Retrieve the data from appdata</span>
    data <span class="token operator">=</span> <span class="token function">getappdata</span><span class="token punctuation">(</span>gcf <span class="token punctuation">,</span> <span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Do something with data %</span>

    <span class="token comment">% Store the value again</span>
    <span class="token function">setappdata</span><span class="token punctuation">(</span>gcf <span class="token punctuation">,</span> <span class="token string">'data'</span> <span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">use_handles</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">% Retrieve the data from handles</span>
    handles <span class="token operator">=</span> <span class="token function">guidata</span><span class="token punctuation">(</span>gcf<span class="token punctuation">)</span><span class="token punctuation">;</span>
    data <span class="token operator">=</span> handles<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

    <span class="token comment">% Do something with data %</span>

    <span class="token comment">% Store it back in the handles</span>
    handles<span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token function">guidata</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span> handles<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>On my Xeon W3530@2.80 GHz I get <code>Difference: 0.00018957 ms / 73 %</code>, thus using getappdata/setappdata I get a performance improvement of 73%!
Note that the result does not change if a 10x10 double variable is used, however, result will change if <code>handles</code> contains many fields with large data.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/matlab/matlab-user-interfaces.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matlab/matlab-best-practices.html" class="prev">
        MATLAB Best Practices
      </a></span> <span class="next"><a href="/matlab/useful-tricks.html">
        Useful tricks
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1929.e9f4c45b.js" defer></script>
  </body>
</html>
