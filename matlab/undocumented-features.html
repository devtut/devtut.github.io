<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MATLAB - Undocumented Features</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Color-coded 2D line plots with color data in third dimension, Semi-transparent markers in line and scatter plots, C++ compatible helper functions, Contour Plots - Customise the Text Labels, Appending / adding entries to an existing legend, Scatter plot jitter">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MATLAB - Undocumented Features">
    <meta property="og:description" content="Color-coded 2D line plots with color data in third dimension, Semi-transparent markers in line and scatter plots, C++ compatible helper functions, Contour Plots - Customise the Text Labels, Appending / adding entries to an existing legend, Scatter plot jitter">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/matlab/undocumented-features.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MATLAB - Undocumented Features">
    <meta name="twitter:description" content="Color-coded 2D line plots with color data in third dimension, Semi-transparent markers in line and scatter plots, C++ compatible helper functions, Contour Plots - Customise the Text Labels, Appending / adding entries to an existing legend, Scatter plot jitter">
    <meta name="twitter:url" content="/matlab/undocumented-features.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1938.c8500541.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MATLAB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matlab/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/matlab/getting-started-with-matlab-language.html" class="sidebar-link">Getting started with MATLAB Language</a></li><li><a href="/matlab/initializing-matrices-or-arrays.html" class="sidebar-link">Initializing Matrices or arrays</a></li><li><a href="/matlab/conditions.html" class="sidebar-link">Conditions</a></li><li><a href="/matlab/functions.html" class="sidebar-link">Functions</a></li><li><a href="/matlab/set-operations.html" class="sidebar-link">Set operations</a></li><li><a href="/matlab/documenting-functions.html" class="sidebar-link">Documenting functions</a></li><li><a href="/matlab/using-functions-with-logical-output.html" class="sidebar-link">Using functions with logical output</a></li><li><a href="/matlab/for-loops.html" class="sidebar-link">For loops</a></li><li><a href="/matlab/object-oriented-programming.html" class="sidebar-link">Object-Oriented Programming</a></li><li><a href="/matlab/vectorization.html" class="sidebar-link">Vectorization</a></li><li><a href="/matlab/matrix-decompositions.html" class="sidebar-link">Matrix decompositions</a></li><li><a href="/matlab/graphics-2d-line-plots.html" class="sidebar-link">Graphics: 2D Line Plots</a></li><li><a href="/matlab/graphics-2d-and-3d-transformations.html" class="sidebar-link">Graphics: 2D and 3D Transformations</a></li><li><a href="/matlab/controlling-subplot-coloring-in-matlab.html" class="sidebar-link">Controlling Subplot coloring in Matlab</a></li><li><a href="/matlab/image-processing.html" class="sidebar-link">Image processing</a></li><li><a href="/matlab/drawing.html" class="sidebar-link">Drawing</a></li><li><a href="/matlab/financial-applications.html" class="sidebar-link">Financial Applications</a></li><li><a href="/matlab/fourier-transforms-and-inverse-fourier-transforms.html" class="sidebar-link">Fourier Transforms and Inverse Fourier Transforms</a></li><li><a href="/matlab/ordinary-differential-equations-ode-solvers.html" class="sidebar-link">Ordinary Differential Equations (ODE) Solvers</a></li><li><a href="/matlab/interpolation-with-matlab.html" class="sidebar-link">Interpolation with MATLAB</a></li><li><a href="/matlab/integration.html" class="sidebar-link">Integration</a></li><li><a href="/matlab/reading-large-files.html" class="sidebar-link">Reading large files</a></li><li><a href="/matlab/usage-of-accumarray-function.html" class="sidebar-link">Usage of accumarray() Function</a></li><li><a href="/matlab/introduction-to-mex-api.html" class="sidebar-link">Introduction to MEX API</a></li><li><a href="/matlab/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/matlab/performance-and-benchmarking.html" class="sidebar-link">Performance and Benchmarking</a></li><li><a href="/matlab/multithreading.html" class="sidebar-link">Multithreading</a></li><li><a href="/matlab/using-serial-ports.html" class="sidebar-link">Using serial ports</a></li><li><a href="/matlab/undocumented-features.html" aria-current="page" class="active sidebar-link">Undocumented Features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/matlab/undocumented-features.html#color-coded-2d-line-plots-with-color-data-in-third-dimension" class="sidebar-link">Color-coded 2D line plots with color data in third dimension</a></li><li class="sidebar-sub-header"><a href="/matlab/undocumented-features.html#semi-transparent-markers-in-line-and-scatter-plots" class="sidebar-link">Semi-transparent markers in line and scatter plots</a></li><li class="sidebar-sub-header"><a href="/matlab/undocumented-features.html#c-compatible-helper-functions" class="sidebar-link">C++ compatible helper functions</a></li><li class="sidebar-sub-header"><a href="/matlab/undocumented-features.html#contour-plots-customise-the-text-labels" class="sidebar-link">Contour Plots - Customise the Text Labels</a></li><li class="sidebar-sub-header"><a href="/matlab/undocumented-features.html#appending-adding-entries-to-an-existing-legend" class="sidebar-link">Appending / adding entries to an existing legend</a></li><li class="sidebar-sub-header"><a href="/matlab/undocumented-features.html#scatter-plot-jitter" class="sidebar-link">Scatter plot jitter</a></li></ul></li><li><a href="/matlab/matlab-best-practices.html" class="sidebar-link">MATLAB Best Practices</a></li><li><a href="/matlab/matlab-user-interfaces.html" class="sidebar-link">MATLAB User Interfaces</a></li><li><a href="/matlab/useful-tricks.html" class="sidebar-link">Useful tricks</a></li><li><a href="/matlab/common-mistakes-and-errors.html" class="sidebar-link">Common mistakes and errors</a></li><li><a href="/matlab/programming-utilities.html" class="sidebar-link">Programming Utilities</a></li><li><a href="/matlab/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="undocumented-features"><a href="#undocumented-features" class="header-anchor">#</a> Undocumented Features</h1> <h2 id="color-coded-2d-line-plots-with-color-data-in-third-dimension"><a href="#color-coded-2d-line-plots-with-color-data-in-third-dimension" class="header-anchor">#</a> Color-coded 2D line plots with color data in third dimension</h2> <p>In MATLAB versions prior to <strong>R2014b</strong>, using the old HG1 graphics engine, it was not obvious how to create <a href="http://stackoverflow.com/questions/11855011/plot3-line-color-based-on-value" target="_blank" rel="noopener noreferrer">color coded 2D line plots<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. With the release of the new HG2 graphics engine arose a new <a href="http://undocumentedmatlab.com/blog/plot-line-transparency-and-color-gradient" target="_blank" rel="noopener noreferrer"><strong>undocumented feature introduced by Yair Altman</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code>n <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> y <span class="token operator">=</span> x<span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% modified jet-colormap</span>
cd <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">uint8</span><span class="token punctuation">(</span><span class="token function">jet</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token function">uint8</span><span class="token punctuation">(</span><span class="token function">ones</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">.'</span><span class="token punctuation">;</span>

drawnow
<span class="token function">set</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Edge<span class="token punctuation">,</span> <span class="token string">'ColorBinding'</span><span class="token punctuation">,</span><span class="token string">'interpolated'</span><span class="token punctuation">,</span> <span class="token string">'ColorData'</span><span class="token punctuation">,</span>cd<span class="token punctuation">)</span>

</code></pre></div><p><a href="http://i.stack.imgur.com/nYKp8.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/nYKp8.png" alt="line plot"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="semi-transparent-markers-in-line-and-scatter-plots"><a href="#semi-transparent-markers-in-line-and-scatter-plots" class="header-anchor">#</a> Semi-transparent markers in line and scatter plots</h2> <p>Since <strong>Matlab R2014b</strong> it is easily possible to achieve semi-transparent markers for line and scatter plots using <a href="http://undocumentedmatlab.com/blog/plot-markers-transparency-and-color-gradient" target="_blank" rel="noopener noreferrer"><strong>undocumented features introduced by Yair Altman</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>The basic idea is to get the hidden handle of the markers and apply a value <strong>&lt; 1</strong> for the last value in the <code>EdgeColorData</code> to achieve the desired transparency.</p> <p>Here we go for <code>scatter</code>:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">%// example data</span>
x <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> <span class="token function">cos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">%// plot scatter, get handle</span>
h <span class="token operator">=</span> <span class="token function">scatter</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> 
drawnow<span class="token punctuation">;</span> <span class="token comment">%// important</span>

<span class="token comment">%// get marker handle</span>
hMarkers <span class="token operator">=</span> h<span class="token punctuation">.</span>MarkerHandle<span class="token punctuation">;</span> 

<span class="token comment">%// get current edge and face color</span>
edgeColor <span class="token operator">=</span> hMarkers<span class="token punctuation">.</span>EdgeColorData
faceColor <span class="token operator">=</span> hMarkers<span class="token punctuation">.</span>FaceColorData

<span class="token comment">%// set face color to the same as edge color</span>
faceColor <span class="token operator">=</span> edgeColor<span class="token punctuation">;</span>

<span class="token comment">%// opacity</span>
opa <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>

<span class="token comment">%// set marker edge and face color</span>
hMarkers<span class="token punctuation">.</span>EdgeColorData <span class="token operator">=</span> <span class="token function">uint8</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token function">edgeColor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">255</span><span class="token operator">*</span>opa<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
hMarkers<span class="token punctuation">.</span>FaceColorData <span class="token operator">=</span> <span class="token function">uint8</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token function">faceColor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">255</span><span class="token operator">*</span>opa<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

</code></pre></div><p><a href="http://i.stack.imgur.com/5OJVi.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/5OJVi.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>and for a line <code>plot</code></p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token comment">%// example data</span>
x <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
y1 <span class="token operator">=</span> <span class="token function">cos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
y2 <span class="token operator">=</span> <span class="token function">sin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">%// plot scatter, get handle</span>
h1 <span class="token operator">=</span> <span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y1<span class="token punctuation">,</span><span class="token string">'o-'</span><span class="token punctuation">,</span><span class="token string">'MarkerSize'</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span> hold on
h2 <span class="token operator">=</span> <span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y2<span class="token punctuation">,</span><span class="token string">'o-'</span><span class="token punctuation">,</span><span class="token string">'MarkerSize'</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
drawnow<span class="token punctuation">;</span> <span class="token comment">%// important</span>

<span class="token comment">%// get marker handle</span>
h1Markers <span class="token operator">=</span> h1<span class="token punctuation">.</span>MarkerHandle<span class="token punctuation">;</span> 
h2Markers <span class="token operator">=</span> h2<span class="token punctuation">.</span>MarkerHandle<span class="token punctuation">;</span> 

<span class="token comment">%// get current edge and face color</span>
edgeColor1 <span class="token operator">=</span> h1Markers<span class="token punctuation">.</span>EdgeColorData<span class="token punctuation">;</span>
edgeColor2 <span class="token operator">=</span> h2Markers<span class="token punctuation">.</span>EdgeColorData<span class="token punctuation">;</span>

<span class="token comment">%// set face color to the same as edge color</span>
faceColor1 <span class="token operator">=</span> edgeColor1<span class="token punctuation">;</span>
faceColor2 <span class="token operator">=</span> edgeColor2<span class="token punctuation">;</span>

<span class="token comment">%// opacity</span>
opa <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>

<span class="token comment">%// set marker edge and face color</span>
h1Markers<span class="token punctuation">.</span>EdgeColorData <span class="token operator">=</span> <span class="token function">uint8</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token function">edgeColor1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">255</span><span class="token operator">*</span>opa<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
h1Markers<span class="token punctuation">.</span>FaceColorData <span class="token operator">=</span> <span class="token function">uint8</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token function">faceColor1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">255</span><span class="token operator">*</span>opa<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
h2Markers<span class="token punctuation">.</span>EdgeColorData <span class="token operator">=</span> <span class="token function">uint8</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token function">edgeColor2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">255</span><span class="token operator">*</span>opa<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
h2Markers<span class="token punctuation">.</span>FaceColorData <span class="token operator">=</span> <span class="token function">uint8</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token function">faceColor2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">255</span><span class="token operator">*</span>opa<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

</code></pre></div><p><a href="http://i.stack.imgur.com/JCup3.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/JCup3.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The marker handles, which are used for the manipulation, are created with the figure. The <strong><code>drawnow</code></strong> command is ensuring the creation of the figure before subsequent commands are called and avoids errors in case of delays.</p> <h2 id="c-compatible-helper-functions"><a href="#c-compatible-helper-functions" class="header-anchor">#</a> C++ compatible helper functions</h2> <p>The use of <strong>Matlab Coder</strong> sometimes denies the use of some very common functions, if they are not compatible to C++. Relatively often there exist <strong>undocumented helper functions</strong>, which can be used as replacements.</p> <p><a href="http://de.mathworks.com/help/coder/ug/functions-supported-for-code-generation--alphabetical-list.html" target="_blank" rel="noopener noreferrer">Here is a comprehensive list of supported functions.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>And following a collection of alternatives, for non-supported functions:</p> <p>The functions <code>sprintf</code> and <code>sprintfc</code> are quite similar, the former returns a <strong>character array</strong>, the latter a <strong>cell string</strong>:</p> <div class="language- extra-class"><pre class="language-text"><code>
str = sprintf('%i',x)   % returns '5' for x = 5
 str = sprintfc('%i',x)  % returns {'5'} for x = 5

</code></pre></div><p>However, <code>sprintfc</code> is compatible with C++ supported by Matlab Coder, and <code>sprintf</code> is not.</p> <h2 id="contour-plots-customise-the-text-labels"><a href="#contour-plots-customise-the-text-labels" class="header-anchor">#</a> Contour Plots - Customise the Text Labels</h2> <p>When displaying labels on contours Matlab doesn't allow you to control the format of the numbers, for example to change to scientific notation.</p> <p>The individual text objects are normal text objects but how you get them is undocumented.  You access them from the <code>TextPrims</code> property of the contour handle.</p> <div class="language- extra-class"><pre class="language-text"><code>
 figure
  [X,Y]=meshgrid(0:100,0:100);
  Z=(X+Y.^2)*1e10;
  [C,h]=contour(X,Y,Z);
  h.ShowText='on';
  drawnow();
  txt = get(h,'TextPrims');
  v = str2double(get(txt,'String'));
  for ii=1:length(v)
    set(txt(ii),'String',sprintf('%0.3e',v(ii)))
  end

</code></pre></div><p><strong>Note</strong>: that you must add a <code>drawnow</code> command to force Matlab to draw the contours, the number and location of the txt objects are only determined when the contours are actually drawn so the text objects are only created then.</p> <p>The fact the txt objects are created when the contours are drawn means that they are recalculated everytime the plot is redrawn (for example figure resize).  To manage this you need to listen to the <code>undocumented event</code> <code>MarkedClean</code>:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token keyword">function</span> customiseContour
  figure
  <span class="token punctuation">[</span>X<span class="token punctuation">,</span>Y<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">meshgrid</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Z<span class="token operator">=</span><span class="token punctuation">(</span>X<span class="token operator">+</span>Y<span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1e10</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>C<span class="token punctuation">,</span>h<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">contour</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span>Y<span class="token punctuation">,</span>Z<span class="token punctuation">)</span><span class="token punctuation">;</span>
  h<span class="token punctuation">.</span>ShowText<span class="token operator">=</span><span class="token string">'on'</span><span class="token punctuation">;</span>
  <span class="token comment">% add a listener and call your new format function</span>
  <span class="token function">addlistener</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'MarkedClean'</span><span class="token punctuation">,</span><span class="token operator">@</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token function">ReFormatText</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> <span class="token function">ReFormatText</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span>
  <span class="token comment">% get all the text items from the contour</span>
  t <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'TextPrims'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> ii<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token function">length</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token comment">% get the current value (Matlab changes this back when it </span>
    <span class="token comment">%   redraws the plot)</span>
    v <span class="token operator">=</span> <span class="token function">str2double</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">t</span><span class="token punctuation">(</span>ii<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% Update with the format you want - scientific for example</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token function">t</span><span class="token punctuation">(</span>ii<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'%0.3e'</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/NApPb.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/NApPb.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong><strong>Example tested using Matlab r2015b on Windows</strong></strong></p> <h2 id="appending-adding-entries-to-an-existing-legend"><a href="#appending-adding-entries-to-an-existing-legend" class="header-anchor">#</a> Appending / adding entries to an existing legend</h2> <p>Existing legends can be difficult to manage. For example, if your plot has two lines, but only one of them has a legend entry and that should stay this way, then adding a third line with a legend entry can be difficult. Example:</p> <p>Now, to add a legend entry for <code>tan</code>, but not for <code>cos</code>, any of the following lines won't do the trick; they all fail in some way:</p> <p>Luckily, an undocumented legend property called <code>PlotChildren</code> keeps track of the children of the parent figure<sup>1</sup>. So, the way to go is to explicitly set the legend's children through its <code>PlotChildren</code> property as follows:</p> <p>The legend updates automatically if an object is added or removed from its <code>PlotChildren</code> property.</p> <p><sub><sup>1</sup> Indeed: figure. You can add any figure's child with the <code>DisplayName</code> property to any legend in the figure, e.g. from a different subplot. This is because a legend in itself is basically an axes object.</sub></p> <p><sub>Tested on MATLAB R2016b</sub></p> <h2 id="scatter-plot-jitter"><a href="#scatter-plot-jitter" class="header-anchor">#</a> Scatter plot jitter</h2> <p>The <code>scatter</code> function has two undocumented properties <code>'jitter'</code> and <code>'jitterAmount'</code> that allow to jitter the data on the x-axis only. This dates back to Matlab 7.1 (2005), and possibly earlier.</p> <p>To enable this feature set the <code>'jitter'</code> property to <code>'on'</code> and set the <code>'jitterAmount'</code> property to the desired absolute value (the default is <code>0.2</code>).</p> <p>This is very useful when we want to visualize overlapping data, for example:</p> <div class="language-matlab extra-class"><pre class="language-matlab"><code><span class="token function">scatter</span><span class="token punctuation">(</span><span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'jitter'</span><span class="token punctuation">,</span> <span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'jitterAmount'</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><a href="https://i.stack.imgur.com/cX1zs.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/cX1zs.png" alt="jitter overlapping data"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Read more on <a href="http://undocumentedmatlab.com/blog/undocumented-scatter-plot-jitter" target="_blank" rel="noopener noreferrer">Undocumented Matlab<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <ul><li>Using undocumented features is considered a risky practice<sup><a href="https://books.google.com/books?id=7FHNBQAAQBAJ&amp;pg=PA24#v=twopage" target="_blank" rel="noopener noreferrer">1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></sup>, as these features may change without notice or simply work differently on different MATLAB versions. For this reason, it is advised to employ <a href="https://en.wikipedia.org/wiki/Defensive_programming" target="_blank" rel="noopener noreferrer">defensive programming<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> techniques such as enclosing undocumented pieces of code within <code>try/catch</code> blocks with documented fallbacks.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/matlab/undocumented-features.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matlab/using-serial-ports.html" class="prev">
        Using serial ports
      </a></span> <span class="next"><a href="/matlab/matlab-best-practices.html">
        MATLAB Best Practices
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1938.c8500541.js" defer></script>
  </body>
</html>
