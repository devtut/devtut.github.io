<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL - JSON</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Create simple table with a primary key and JSON field, Insert a simple JSON, Updating a JSON field, Insert mixed data into a JSON field., CAST data to JSON type, Create Json Object and Array">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MySQL - JSON">
    <meta property="og:description" content="Create simple table with a primary key and JSON field, Insert a simple JSON, Updating a JSON field, Insert mixed data into a JSON field., CAST data to JSON type, Create Json Object and Array">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/mysql/json.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MySQL - JSON">
    <meta name="twitter:description" content="Create simple table with a primary key and JSON field, Insert a simple JSON, Updating a JSON field, Insert mixed data into a JSON field., CAST data to JSON type, Create Json Object and Array">
    <meta name="twitter:url" content="/mysql/json.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/2120.e2cf2c2a.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/" class="sidebar-link">Disclaimer</a></li><li><a href="/mysql/getting-started-with-mysql.html" class="sidebar-link">Getting started with MySQL</a></li><li><a href="/mysql/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/mysql/select.html" class="sidebar-link">SELECT</a></li><li><a href="/mysql/backticks.html" class="sidebar-link">Backticks</a></li><li><a href="/mysql/null.html" class="sidebar-link">NULL</a></li><li><a href="/mysql/limit-and-offset.html" class="sidebar-link">Limit and Offset</a></li><li><a href="/mysql/creating-databases.html" class="sidebar-link">Creating databases</a></li><li><a href="/mysql/using-variables.html" class="sidebar-link">Using Variables</a></li><li><a href="/mysql/comment-mysql.html" class="sidebar-link">Comment Mysql</a></li><li><a href="/mysql/insert.html" class="sidebar-link">INSERT</a></li><li><a href="/mysql/delete.html" class="sidebar-link">DELETE</a></li><li><a href="/mysql/update.html" class="sidebar-link">UPDATE</a></li><li><a href="/mysql/order-by.html" class="sidebar-link">ORDER BY</a></li><li><a href="/mysql/group-by.html" class="sidebar-link">Group By</a></li><li><a href="/mysql/error-1055-only-full-group-by-something-is-not-in-group-by-clause.html" class="sidebar-link">Error 1055: ONLYFULLGROUP_BY: something  is not in GROUP BY clause ...</a></li><li><a href="/mysql/joins.html" class="sidebar-link">Joins</a></li><li><a href="/mysql/joins-join-3-table-with-the-same-name-of-id.html" class="sidebar-link">JOINS: Join 3 table with the same name of id.</a></li><li><a href="/mysql/union.html" class="sidebar-link">UNION</a></li><li><a href="/mysql/arithmetic.html" class="sidebar-link">Arithmetic</a></li><li><a href="/mysql/string-operations.html" class="sidebar-link">String operations</a></li><li><a href="/mysql/date-and-time-operations.html" class="sidebar-link">Date and Time Operations</a></li><li><a href="/mysql/handling-time-zones.html" class="sidebar-link">Handling Time Zones</a></li><li><a href="/mysql/regular-expressions.html" class="sidebar-link">Regular Expressions</a></li><li><a href="/mysql/view.html" class="sidebar-link">VIEW</a></li><li><a href="/mysql/table-creation.html" class="sidebar-link">Table Creation</a></li><li><a href="/mysql/alter-table.html" class="sidebar-link">ALTER TABLE</a></li><li><a href="/mysql/drop-table.html" class="sidebar-link">Drop Table</a></li><li><a href="/mysql/mysql-lock-table.html" class="sidebar-link">MySQL LOCK TABLE</a></li><li><a href="/mysql/error-codes.html" class="sidebar-link">Error codes</a></li><li><a href="/mysql/stored-routines-procedures-and-functions.html" class="sidebar-link">Stored routines (procedures and functions)</a></li><li><a href="/mysql/indexes-and-keys.html" class="sidebar-link">Indexes and Keys</a></li><li><a href="/mysql/full-text-search.html" class="sidebar-link">Full-Text search</a></li><li><a href="/mysql/prepare-statements.html" class="sidebar-link">PREPARE Statements</a></li><li><a href="/mysql/json.html" class="active sidebar-link">JSON</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mysql/json.html#create-simple-table-with-a-primary-key-and-json-field" class="sidebar-link">Create simple table with a primary key and JSON field</a></li><li class="sidebar-sub-header"><a href="/mysql/json.html#insert-a-simple-json" class="sidebar-link">Insert a simple JSON</a></li><li class="sidebar-sub-header"><a href="/mysql/json.html#updating-a-json-field" class="sidebar-link">Updating a JSON field</a></li><li class="sidebar-sub-header"><a href="/mysql/json.html#insert-mixed-data-into-a-json-field" class="sidebar-link">Insert mixed data into a JSON field.</a></li><li class="sidebar-sub-header"><a href="/mysql/json.html#cast-data-to-json-type" class="sidebar-link">CAST data to JSON type</a></li><li class="sidebar-sub-header"><a href="/mysql/json.html#create-json-object-and-array" class="sidebar-link">Create Json Object and Array</a></li></ul></li><li><a href="/mysql/extract-values-from-json-type.html" class="sidebar-link">Extract values from JSON type</a></li><li><a href="/mysql/mysql-admin.html" class="sidebar-link">MySQL Admin</a></li><li><a href="/mysql/triggers.html" class="sidebar-link">TRIGGERS</a></li><li><a href="/mysql/configuration-and-tuning.html" class="sidebar-link">Configuration and tuning</a></li><li><a href="/mysql/events.html" class="sidebar-link">Events</a></li><li><a href="/mysql/enum.html" class="sidebar-link">ENUM</a></li><li><a href="/mysql/install-mysql-container-with-docker-compose.html" class="sidebar-link">Install Mysql container with Docker-Compose</a></li><li><a href="/mysql/character-sets-and-collations.html" class="sidebar-link">Character Sets and Collations</a></li><li><a href="/mysql/myisam-engine.html" class="sidebar-link">MyISAM Engine</a></li><li><a href="/mysql/converting-from-myisam-to-innodb.html" class="sidebar-link">Converting from MyISAM to InnoDB</a></li><li><a href="/mysql/transaction.html" class="sidebar-link">Transaction</a></li><li><a href="/mysql/log-files.html" class="sidebar-link">Log files</a></li><li><a href="/mysql/clustering.html" class="sidebar-link">Clustering</a></li><li><a href="/mysql/partitioning.html" class="sidebar-link">Partitioning</a></li><li><a href="/mysql/replication.html" class="sidebar-link">Replication</a></li><li><a href="/mysql/backup-using-mysqldump.html" class="sidebar-link">Backup using mysqldump</a></li><li><a href="/mysql/mysqlimport.html" class="sidebar-link">mysqlimport</a></li><li><a href="/mysql/load-data-infile.html" class="sidebar-link">LOAD DATA INFILE</a></li><li><a href="/mysql/mysql-unions.html" class="sidebar-link">MySQL Unions</a></li><li><a href="/mysql/mysql-client.html" class="sidebar-link">MySQL client</a></li><li><a href="/mysql/temporary-tables.html" class="sidebar-link">Temporary Tables</a></li><li><a href="/mysql/customize-ps1.html" class="sidebar-link">Customize PS1</a></li><li><a href="/mysql/dealing-with-sparse-or-missing-data.html" class="sidebar-link">Dealing with sparse or missing data</a></li><li><a href="/mysql/connecting-with-utf-8-using-various-programming-language.html" class="sidebar-link">Connecting with UTF-8 Using Various Programming language.</a></li><li><a href="/mysql/time-with-subsecond-precision.html" class="sidebar-link">Time with subsecond precision</a></li><li><a href="/mysql/one-to-many.html" class="sidebar-link">One to Many</a></li><li><a href="/mysql/many-to-many-mapping-table.html" class="sidebar-link">Many-to-many Mapping table</a></li><li><a href="/mysql/pivot-queries.html" class="sidebar-link">Pivot queries</a></li><li><a href="/mysql/dynamic-un-pivot-table-using-prepared-statement.html" class="sidebar-link">Dynamic Un-Pivot Table using Prepared Statement</a></li><li><a href="/mysql/server-information.html" class="sidebar-link">Server Information</a></li><li><a href="/mysql/ssl-connection-setup.html" class="sidebar-link">SSL Connection Setup</a></li><li><a href="/mysql/create-new-user.html" class="sidebar-link">Create New User</a></li><li><a href="/mysql/security-via-grants.html" class="sidebar-link">Security via GRANTs</a></li><li><a href="/mysql/change-password.html" class="sidebar-link">Change Password</a></li><li><a href="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html" class="sidebar-link">Recover and reset the default root password for MySQL 5.7+</a></li><li><a href="/mysql/recover-from-lost-root-password.html" class="sidebar-link">Recover from lost root password</a></li><li><a href="/mysql/mysql-performance-tips.html" class="sidebar-link">Mysql Performance Tips</a></li><li><a href="/mysql/performance-tuning.html" class="sidebar-link">Performance Tuning</a></li><li><a href="/mysql/reserved-words.html" class="sidebar-link">Reserved Words</a></li><li><a href="/mysql/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="json"><a href="#json" class="header-anchor">#</a> JSON</h1> <h2 id="create-simple-table-with-a-primary-key-and-json-field"><a href="#create-simple-table-with-a-primary-key-and-json-field" class="header-anchor">#</a> Create simple table with a primary key and JSON field</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span> 
    json_col JSON<span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="insert-a-simple-json"><a href="#insert-a-simple-json" class="header-anchor">#</a> Insert a simple JSON</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span>
    table_name <span class="token punctuation">(</span>json_col<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span>
    <span class="token punctuation">(</span><span class="token string">'{&quot;City&quot;: &quot;Galle&quot;, &quot;Description&quot;: &quot;Best damn city in the world&quot;}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>That's simple as it can get but note that because JSON dictionary keys have to be surrounded by double quotes the entire thing should be wrapped in single quotes. If the query succeeds, the data will be stored in a binary format.</p> <h2 id="updating-a-json-field"><a href="#updating-a-json-field" class="header-anchor">#</a> Updating a JSON field</h2> <p>In the previous example we saw how mixed data types can be inserted into a JSON field. What if we want to update that field? We are going to add <strong>scheveningen</strong> to the array named <code>variations</code> in the previous example.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> 
    myjson 
<span class="token keyword">SET</span> 
    dict<span class="token operator">=</span>JSON_ARRAY_APPEND<span class="token punctuation">(</span>dict<span class="token punctuation">,</span><span class="token string">'$.variations'</span><span class="token punctuation">,</span><span class="token string">'scheveningen'</span><span class="token punctuation">)</span> 
<span class="token keyword">WHERE</span> 
    id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

</code></pre></div><p>Notes:</p> <ol><li>The <code>$.variations</code> array in our json dictionary. The $ symbol represents the json documentation. For a full explaination of json paths recognized by mysql refer to <a href="https://dev.mysql.com/doc/refman/5.7/en/json-path-syntax.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.7/en/json-path-syntax.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Since we don't yet have an example on querying using json fields, this example uses the primary key.</li></ol> <p>Now if we do <code>SELECT * FROM myjson</code> we will see</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">----+-----------------------------------------------------------------------------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> dict                                                                                    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---+-----------------------------------------------------------------------------------------+</span>
<span class="token operator">|</span> <span class="token number">2</span>  <span class="token operator">|</span> {<span class="token string">&quot;opening&quot;</span>: <span class="token string">&quot;Sicilian&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;variations&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;pelikan&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dragon&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;najdorf&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;scheveningen&quot;</span><span class="token punctuation">]</span>} <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------------------------------------------------------------------------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

</code></pre></div><h2 id="insert-mixed-data-into-a-json-field"><a href="#insert-mixed-data-into-a-json-field" class="header-anchor">#</a> Insert mixed data into a JSON field.</h2> <p>This inserts a json dictionary where one of the members is an array of strings into the table that was created in another example.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> myjson<span class="token punctuation">(</span>dict<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'{&quot;opening&quot;:&quot;Sicilian&quot;,&quot;variations&quot;:[&quot;pelikan&quot;,&quot;dragon&quot;,&quot;najdorf&quot;]}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Note, once again, that you need to be careful with the use of single and double quotes. The whole thing has to be wrapped in single quotes.</p> <h2 id="cast-data-to-json-type"><a href="#cast-data-to-json-type" class="header-anchor">#</a> CAST data to JSON type</h2> <p>This converts valid json strings to MySQL JSON type:</p> <div class="language- extra-class"><pre class="language-text"><code>
SELECT CAST('[1,2,3]' as JSON) ;
 SELECT CAST('{&quot;opening&quot;:&quot;Sicilian&quot;,&quot;variations&quot;:[&quot;pelikan&quot;,&quot;dragon&quot;,&quot;najdorf&quot;]}' as JSON);

</code></pre></div><h2 id="create-json-object-and-array"><a href="#create-json-object-and-array" class="header-anchor">#</a> Create Json Object and Array</h2> <p><code>JSON_OBJECT</code> creates JSON Objects:</p> <div class="language- extra-class"><pre class="language-text"><code>
SELECT JSON_OBJECT('key1',col1 , 'key2',col2 , 'key3','col3') as myobj;

</code></pre></div><p><code>JSON_ARRAY</code>  creates JSON Array as well:</p> <div class="language- extra-class"><pre class="language-text"><code>
SELECT JSON_ARRAY(col1,col2,'col3') as myarray;

</code></pre></div><p>Note: myobj.key3 and myarray[2] are &quot;col3&quot; as fixed string.</p> <p>Also mixed JSON data:</p> <div class="language- extra-class"><pre class="language-text"><code>
SELECT JSON_OBJECT(&quot;opening&quot;,&quot;Sicilian&quot;, &quot;variations&quot;,JSON_ARRAY(&quot;pelikan&quot;,&quot;dragon&quot;,&quot;najdorf&quot;) ) as mymixed ;

</code></pre></div><h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Starting from MySQL 5.7.8, MySQL ships with a JSON type. Lots of devs have been saving JSON data in text columns for a log time but the JSON type is different, the data is saved in binary format after validation. That avoids the overhead of parsing the text on each read.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/mysql/json.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mysql/prepare-statements.html" class="prev">
        PREPARE Statements
      </a></span> <span class="next"><a href="/mysql/extract-values-from-json-type.html">
        Extract values from JSON type
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/2120.e2cf2c2a.js" defer></script>
  </body>
</html>
