<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL - Configuration and tuning</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="InnoDB performance, Parameter to allow huge data to insert, Increase the string limit for group_concat, Minimal InnoDB configuration, Secure MySQL encryption">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MySQL - Configuration and tuning">
    <meta property="og:description" content="InnoDB performance, Parameter to allow huge data to insert, Increase the string limit for group_concat, Minimal InnoDB configuration, Secure MySQL encryption">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/mysql/configuration-and-tuning.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MySQL - Configuration and tuning">
    <meta name="twitter:description" content="InnoDB performance, Parameter to allow huge data to insert, Increase the string limit for group_concat, Minimal InnoDB configuration, Secure MySQL encryption">
    <meta name="twitter:url" content="/mysql/configuration-and-tuning.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/2093.3770d561.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/" class="sidebar-link">Disclaimer</a></li><li><a href="/mysql/getting-started-with-mysql.html" class="sidebar-link">Getting started with MySQL</a></li><li><a href="/mysql/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/mysql/select.html" class="sidebar-link">SELECT</a></li><li><a href="/mysql/backticks.html" class="sidebar-link">Backticks</a></li><li><a href="/mysql/null.html" class="sidebar-link">NULL</a></li><li><a href="/mysql/limit-and-offset.html" class="sidebar-link">Limit and Offset</a></li><li><a href="/mysql/creating-databases.html" class="sidebar-link">Creating databases</a></li><li><a href="/mysql/using-variables.html" class="sidebar-link">Using Variables</a></li><li><a href="/mysql/comment-mysql.html" class="sidebar-link">Comment Mysql</a></li><li><a href="/mysql/insert.html" class="sidebar-link">INSERT</a></li><li><a href="/mysql/delete.html" class="sidebar-link">DELETE</a></li><li><a href="/mysql/update.html" class="sidebar-link">UPDATE</a></li><li><a href="/mysql/order-by.html" class="sidebar-link">ORDER BY</a></li><li><a href="/mysql/group-by.html" class="sidebar-link">Group By</a></li><li><a href="/mysql/error-1055-only-full-group-by-something-is-not-in-group-by-clause.html" class="sidebar-link">Error 1055: ONLYFULLGROUP_BY: something  is not in GROUP BY clause ...</a></li><li><a href="/mysql/joins.html" class="sidebar-link">Joins</a></li><li><a href="/mysql/joins-join-3-table-with-the-same-name-of-id.html" class="sidebar-link">JOINS: Join 3 table with the same name of id.</a></li><li><a href="/mysql/union.html" class="sidebar-link">UNION</a></li><li><a href="/mysql/arithmetic.html" class="sidebar-link">Arithmetic</a></li><li><a href="/mysql/string-operations.html" class="sidebar-link">String operations</a></li><li><a href="/mysql/date-and-time-operations.html" class="sidebar-link">Date and Time Operations</a></li><li><a href="/mysql/handling-time-zones.html" class="sidebar-link">Handling Time Zones</a></li><li><a href="/mysql/regular-expressions.html" class="sidebar-link">Regular Expressions</a></li><li><a href="/mysql/view.html" class="sidebar-link">VIEW</a></li><li><a href="/mysql/table-creation.html" class="sidebar-link">Table Creation</a></li><li><a href="/mysql/alter-table.html" class="sidebar-link">ALTER TABLE</a></li><li><a href="/mysql/drop-table.html" class="sidebar-link">Drop Table</a></li><li><a href="/mysql/mysql-lock-table.html" class="sidebar-link">MySQL LOCK TABLE</a></li><li><a href="/mysql/error-codes.html" class="sidebar-link">Error codes</a></li><li><a href="/mysql/stored-routines-procedures-and-functions.html" class="sidebar-link">Stored routines (procedures and functions)</a></li><li><a href="/mysql/indexes-and-keys.html" class="sidebar-link">Indexes and Keys</a></li><li><a href="/mysql/full-text-search.html" class="sidebar-link">Full-Text search</a></li><li><a href="/mysql/prepare-statements.html" class="sidebar-link">PREPARE Statements</a></li><li><a href="/mysql/json.html" class="sidebar-link">JSON</a></li><li><a href="/mysql/extract-values-from-json-type.html" class="sidebar-link">Extract values from JSON type</a></li><li><a href="/mysql/mysql-admin.html" class="sidebar-link">MySQL Admin</a></li><li><a href="/mysql/triggers.html" class="sidebar-link">TRIGGERS</a></li><li><a href="/mysql/configuration-and-tuning.html" class="active sidebar-link">Configuration and tuning</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mysql/configuration-and-tuning.html#innodb-performance" class="sidebar-link">InnoDB performance</a></li><li class="sidebar-sub-header"><a href="/mysql/configuration-and-tuning.html#parameter-to-allow-huge-data-to-insert" class="sidebar-link">Parameter to allow huge data to insert</a></li><li class="sidebar-sub-header"><a href="/mysql/configuration-and-tuning.html#increase-the-string-limit-for-group-concat" class="sidebar-link">Increase the string limit for group_concat</a></li><li class="sidebar-sub-header"><a href="/mysql/configuration-and-tuning.html#minimal-innodb-configuration" class="sidebar-link">Minimal InnoDB configuration</a></li><li class="sidebar-sub-header"><a href="/mysql/configuration-and-tuning.html#secure-mysql-encryption" class="sidebar-link">Secure MySQL encryption</a></li></ul></li><li><a href="/mysql/events.html" class="sidebar-link">Events</a></li><li><a href="/mysql/enum.html" class="sidebar-link">ENUM</a></li><li><a href="/mysql/install-mysql-container-with-docker-compose.html" class="sidebar-link">Install Mysql container with Docker-Compose</a></li><li><a href="/mysql/character-sets-and-collations.html" class="sidebar-link">Character Sets and Collations</a></li><li><a href="/mysql/myisam-engine.html" class="sidebar-link">MyISAM Engine</a></li><li><a href="/mysql/converting-from-myisam-to-innodb.html" class="sidebar-link">Converting from MyISAM to InnoDB</a></li><li><a href="/mysql/transaction.html" class="sidebar-link">Transaction</a></li><li><a href="/mysql/log-files.html" class="sidebar-link">Log files</a></li><li><a href="/mysql/clustering.html" class="sidebar-link">Clustering</a></li><li><a href="/mysql/partitioning.html" class="sidebar-link">Partitioning</a></li><li><a href="/mysql/replication.html" class="sidebar-link">Replication</a></li><li><a href="/mysql/backup-using-mysqldump.html" class="sidebar-link">Backup using mysqldump</a></li><li><a href="/mysql/mysqlimport.html" class="sidebar-link">mysqlimport</a></li><li><a href="/mysql/load-data-infile.html" class="sidebar-link">LOAD DATA INFILE</a></li><li><a href="/mysql/mysql-unions.html" class="sidebar-link">MySQL Unions</a></li><li><a href="/mysql/mysql-client.html" class="sidebar-link">MySQL client</a></li><li><a href="/mysql/temporary-tables.html" class="sidebar-link">Temporary Tables</a></li><li><a href="/mysql/customize-ps1.html" class="sidebar-link">Customize PS1</a></li><li><a href="/mysql/dealing-with-sparse-or-missing-data.html" class="sidebar-link">Dealing with sparse or missing data</a></li><li><a href="/mysql/connecting-with-utf-8-using-various-programming-language.html" class="sidebar-link">Connecting with UTF-8 Using Various Programming language.</a></li><li><a href="/mysql/time-with-subsecond-precision.html" class="sidebar-link">Time with subsecond precision</a></li><li><a href="/mysql/one-to-many.html" class="sidebar-link">One to Many</a></li><li><a href="/mysql/many-to-many-mapping-table.html" class="sidebar-link">Many-to-many Mapping table</a></li><li><a href="/mysql/pivot-queries.html" class="sidebar-link">Pivot queries</a></li><li><a href="/mysql/dynamic-un-pivot-table-using-prepared-statement.html" class="sidebar-link">Dynamic Un-Pivot Table using Prepared Statement</a></li><li><a href="/mysql/server-information.html" class="sidebar-link">Server Information</a></li><li><a href="/mysql/ssl-connection-setup.html" class="sidebar-link">SSL Connection Setup</a></li><li><a href="/mysql/create-new-user.html" class="sidebar-link">Create New User</a></li><li><a href="/mysql/security-via-grants.html" class="sidebar-link">Security via GRANTs</a></li><li><a href="/mysql/change-password.html" class="sidebar-link">Change Password</a></li><li><a href="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html" class="sidebar-link">Recover and reset the default root password for MySQL 5.7+</a></li><li><a href="/mysql/recover-from-lost-root-password.html" class="sidebar-link">Recover from lost root password</a></li><li><a href="/mysql/mysql-performance-tips.html" class="sidebar-link">Mysql Performance Tips</a></li><li><a href="/mysql/performance-tuning.html" class="sidebar-link">Performance Tuning</a></li><li><a href="/mysql/reserved-words.html" class="sidebar-link">Reserved Words</a></li><li><a href="/mysql/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="configuration-and-tuning"><a href="#configuration-and-tuning" class="header-anchor">#</a> Configuration and tuning</h1> <h2 id="innodb-performance"><a href="#innodb-performance" class="header-anchor">#</a> InnoDB performance</h2> <p>There are hundreds of settings that can be placed in my.cnf.  For the 'lite' user of MySQL, they won't matter as much.</p> <p>Once your database becomes non-trivial, it is advisable to set the following parameters:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>innodb_buffer_pool_size

</code></pre></div><p>This should be set to about 70% of <strong>available</strong> RAM (if you have at least 4GB of RAM; a smaller percentage if you have a tiny VM or antique machine).  The setting controls the amount of cache used by the InnoDB ENGINE.  Hence, it is very important for performance of InnoDB.</p> <h2 id="parameter-to-allow-huge-data-to-insert"><a href="#parameter-to-allow-huge-data-to-insert" class="header-anchor">#</a> Parameter to allow huge data to insert</h2> <p>If you need to store images or videos in the column then we need to change the value as needed by your application</p> <p>max_allowed_packet = 10M</p> <p>M is Mb, G in Gb, K in Kb</p> <h2 id="increase-the-string-limit-for-group-concat"><a href="#increase-the-string-limit-for-group-concat" class="header-anchor">#</a> Increase the string limit for group_concat</h2> <p><code>group_concat</code> is used to concatenate non-null values in a <code>group</code>. The maximum length of the resulting string can be set using the <code>group_concat_max_len</code> option:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token punctuation">[</span><span class="token keyword">GLOBAL</span> <span class="token operator">|</span> <span class="token keyword">SESSION</span><span class="token punctuation">]</span> group_concat_max_len <span class="token operator">=</span> val<span class="token punctuation">;</span>

</code></pre></div><p>Setting the <code>GLOBAL</code> variable will ensure a permanent change, whereas setting the <code>SESSION</code> variable will set the value for the current session.</p> <h2 id="minimal-innodb-configuration"><a href="#minimal-innodb-configuration" class="header-anchor">#</a> Minimal InnoDB configuration</h2> <p>This is a bare minimum setup for MySQL servers using InnoDB tables. Using InnoDB, query cache is not required. Reclaim disk space when a table or database is <code>DROP</code>ed. If you're using SSDs, flushing is a redundant operation (SDDs are not sequential).</p> <div class="language-sql extra-class"><pre class="language-sql"><code>default_storage_engine <span class="token operator">=</span> <span class="token keyword">InnoDB</span>
query_cache_type <span class="token operator">=</span> <span class="token number">0</span>
innodb_file_per_table <span class="token operator">=</span> <span class="token number">1</span>
innodb_flush_neighbors <span class="token operator">=</span> <span class="token number">0</span>

</code></pre></div><p><strong>Concurrency</strong></p> <p>Make sure we can create more than than the default 4 threads by setting <code>innodb_thread_concurrency</code> to infinity (0); this lets InnoDB decide based on optimal execution.</p> <div class="language-sql extra-class"><pre class="language-sql"><code>innodb_thread_concurrency <span class="token operator">=</span> <span class="token number">0</span>
innodb_read_io_threads <span class="token operator">=</span> <span class="token number">64</span>
innodb_write_io_threads <span class="token operator">=</span> <span class="token number">64</span>

</code></pre></div><p><strong>Hard drive utilization</strong></p> <p>Set the capacity (normal load) and capacity_max (absolute maximum) of IOPS for MySQL. The default of 200 is fine for HDDs, but these days, with SSDs capable of thousands of IOPS, you are likely to want to adjust this number. There are many tests you can run to determine IOPS. The values above should be nearly that limit <strong>if you are running a dedicated MySQL server</strong>. If you are running any other services on the same machine, you should apportion as appropriate.</p> <div class="language-sql extra-class"><pre class="language-sql"><code>innodb_io_capacity <span class="token operator">=</span> <span class="token number">2500</span>
innodb_io_capacity_max <span class="token operator">=</span> <span class="token number">3000</span>

</code></pre></div><p><strong>RAM utilization</strong></p> <p>Set the RAM available to MySQL. Whilst the rule of thumb is 70-80%, this really depends on whether or not your instance is dedicated to MySQL, and how much RAM is available. Don't <strong>waste</strong> RAM (i.e. resources) if you have a lot available.</p> <div class="language-sql extra-class"><pre class="language-sql"><code>innodb_buffer_pool_size <span class="token operator">=</span> <span class="token number">10</span>G

</code></pre></div><h2 id="secure-mysql-encryption"><a href="#secure-mysql-encryption" class="header-anchor">#</a> Secure MySQL encryption</h2> <p>The default encryption <code>aes-128-ecb</code> uses Electronic Codebook (ECB) mode, which is insecure and should never be used. Instead, add the following to your configuration file:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>block_encryption_mode <span class="token operator">=</span> aes<span class="token operator">-</span><span class="token number">256</span><span class="token operator">-</span>cbc

</code></pre></div><h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Configuration happens in one of 3 ways:</p> <ul><li>command line options</li> <li>the <code>my.cnf</code> configuration file</li> <li>setting variables from within the server</li></ul> <p>Command Line options takes the form <code>mysqld --long-parameter-name=value --another-parameter</code>. The same parameters can be placed in the <code>my.conf</code> configuration file. <strong>Some</strong> parameters are configurable using system variables from within MySQL. Check the official documentation for a complete list of parameters.</p> <p>Variables can have dash <code>-</code> or underscore <code>_</code>.  Spaces may exist around the <code>=</code>.  Large numbers can be suffixed by <code>K</code>, <code>M</code>, <code>G</code> for kilo-, mega-, and giga-.  One setting per line.</p> <p>Flags:  Usually <code>ON</code> and <code>1</code> are synonymous, ditto for <code>OFF</code> and <code>0</code>.  Some flags have nothing after them.</p> <p>When placing the settings in <code>my.cnf</code>, all settings for the <strong>server</strong> must be in the <code>[mysqld]</code> section, so don't blindly add settings to the end of the file.  (Note: For tools that allow multiple mysql instances to share one my.cnf, the section names may be different.)</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/mysql/configuration-and-tuning.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mysql/triggers.html" class="prev">
        TRIGGERS
      </a></span> <span class="next"><a href="/mysql/events.html">
        Events
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/2093.3770d561.js" defer></script>
  </body>
</html>
