<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL - UNION</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Combining SELECT statements with UNION, ORDER BY, Pagination via OFFSET, Combining data with different columns, UNION ALL  and UNION, Combining and merging data on different MySQL tables with the same columns into unique rows and running query">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MySQL - UNION">
    <meta property="og:description" content="Combining SELECT statements with UNION, ORDER BY, Pagination via OFFSET, Combining data with different columns, UNION ALL  and UNION, Combining and merging data on different MySQL tables with the same columns into unique rows and running query">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/mysql/union.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MySQL - UNION">
    <meta name="twitter:description" content="Combining SELECT statements with UNION, ORDER BY, Pagination via OFFSET, Combining data with different columns, UNION ALL  and UNION, Combining and merging data on different MySQL tables with the same columns into unique rows and running query">
    <meta name="twitter:url" content="/mysql/union.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2157.94fe7787.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/mysql/getting-started-with-mysql.html" class="sidebar-link">Getting started with MySQL</a></li><li><a href="/mysql/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/mysql/select.html" class="sidebar-link">SELECT</a></li><li><a href="/mysql/backticks.html" class="sidebar-link">Backticks</a></li><li><a href="/mysql/null.html" class="sidebar-link">NULL</a></li><li><a href="/mysql/limit-and-offset.html" class="sidebar-link">Limit and Offset</a></li><li><a href="/mysql/creating-databases.html" class="sidebar-link">Creating databases</a></li><li><a href="/mysql/using-variables.html" class="sidebar-link">Using Variables</a></li><li><a href="/mysql/comment-mysql.html" class="sidebar-link">Comment Mysql</a></li><li><a href="/mysql/insert.html" class="sidebar-link">INSERT</a></li><li><a href="/mysql/delete.html" class="sidebar-link">DELETE</a></li><li><a href="/mysql/update.html" class="sidebar-link">UPDATE</a></li><li><a href="/mysql/order-by.html" class="sidebar-link">ORDER BY</a></li><li><a href="/mysql/group-by.html" class="sidebar-link">Group By</a></li><li><a href="/mysql/error-1055-only-full-group-by-something-is-not-in-group-by-clause.html" class="sidebar-link">Error 1055: ONLYFULLGROUP_BY: something  is not in GROUP BY clause ...</a></li><li><a href="/mysql/joins.html" class="sidebar-link">Joins</a></li><li><a href="/mysql/joins-join-3-table-with-the-same-name-of-id.html" class="sidebar-link">JOINS: Join 3 table with the same name of id.</a></li><li><a href="/mysql/union.html" aria-current="page" class="active sidebar-link">UNION</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mysql/union.html#combining-select-statements-with-union" class="sidebar-link">Combining SELECT statements with UNION</a></li><li class="sidebar-sub-header"><a href="/mysql/union.html#order-by" class="sidebar-link">ORDER BY</a></li><li class="sidebar-sub-header"><a href="/mysql/union.html#pagination-via-offset" class="sidebar-link">Pagination via OFFSET</a></li><li class="sidebar-sub-header"><a href="/mysql/union.html#combining-data-with-different-columns" class="sidebar-link">Combining data with different columns</a></li><li class="sidebar-sub-header"><a href="/mysql/union.html#union-all-and-union" class="sidebar-link">UNION ALL  and UNION</a></li><li class="sidebar-sub-header"><a href="/mysql/union.html#combining-and-merging-data-on-different-mysql-tables-with-the-same-columns-into-unique-rows-and-running-query" class="sidebar-link">Combining and merging data on different MySQL tables with the same columns into unique rows and running query</a></li></ul></li><li><a href="/mysql/arithmetic.html" class="sidebar-link">Arithmetic</a></li><li><a href="/mysql/string-operations.html" class="sidebar-link">String operations</a></li><li><a href="/mysql/date-and-time-operations.html" class="sidebar-link">Date and Time Operations</a></li><li><a href="/mysql/handling-time-zones.html" class="sidebar-link">Handling Time Zones</a></li><li><a href="/mysql/regular-expressions.html" class="sidebar-link">Regular Expressions</a></li><li><a href="/mysql/view.html" class="sidebar-link">VIEW</a></li><li><a href="/mysql/table-creation.html" class="sidebar-link">Table Creation</a></li><li><a href="/mysql/alter-table.html" class="sidebar-link">ALTER TABLE</a></li><li><a href="/mysql/drop-table.html" class="sidebar-link">Drop Table</a></li><li><a href="/mysql/mysql-lock-table.html" class="sidebar-link">MySQL LOCK TABLE</a></li><li><a href="/mysql/error-codes.html" class="sidebar-link">Error codes</a></li><li><a href="/mysql/stored-routines-procedures-and-functions.html" class="sidebar-link">Stored routines (procedures and functions)</a></li><li><a href="/mysql/indexes-and-keys.html" class="sidebar-link">Indexes and Keys</a></li><li><a href="/mysql/full-text-search.html" class="sidebar-link">Full-Text search</a></li><li><a href="/mysql/prepare-statements.html" class="sidebar-link">PREPARE Statements</a></li><li><a href="/mysql/json.html" class="sidebar-link">JSON</a></li><li><a href="/mysql/extract-values-from-json-type.html" class="sidebar-link">Extract values from JSON type</a></li><li><a href="/mysql/mysql-admin.html" class="sidebar-link">MySQL Admin</a></li><li><a href="/mysql/triggers.html" class="sidebar-link">TRIGGERS</a></li><li><a href="/mysql/configuration-and-tuning.html" class="sidebar-link">Configuration and tuning</a></li><li><a href="/mysql/events.html" class="sidebar-link">Events</a></li><li><a href="/mysql/enum.html" class="sidebar-link">ENUM</a></li><li><a href="/mysql/install-mysql-container-with-docker-compose.html" class="sidebar-link">Install Mysql container with Docker-Compose</a></li><li><a href="/mysql/character-sets-and-collations.html" class="sidebar-link">Character Sets and Collations</a></li><li><a href="/mysql/myisam-engine.html" class="sidebar-link">MyISAM Engine</a></li><li><a href="/mysql/converting-from-myisam-to-innodb.html" class="sidebar-link">Converting from MyISAM to InnoDB</a></li><li><a href="/mysql/transaction.html" class="sidebar-link">Transaction</a></li><li><a href="/mysql/log-files.html" class="sidebar-link">Log files</a></li><li><a href="/mysql/clustering.html" class="sidebar-link">Clustering</a></li><li><a href="/mysql/partitioning.html" class="sidebar-link">Partitioning</a></li><li><a href="/mysql/replication.html" class="sidebar-link">Replication</a></li><li><a href="/mysql/backup-using-mysqldump.html" class="sidebar-link">Backup using mysqldump</a></li><li><a href="/mysql/mysqlimport.html" class="sidebar-link">mysqlimport</a></li><li><a href="/mysql/load-data-infile.html" class="sidebar-link">LOAD DATA INFILE</a></li><li><a href="/mysql/mysql-unions.html" class="sidebar-link">MySQL Unions</a></li><li><a href="/mysql/mysql-client.html" class="sidebar-link">MySQL client</a></li><li><a href="/mysql/temporary-tables.html" class="sidebar-link">Temporary Tables</a></li><li><a href="/mysql/customize-ps1.html" class="sidebar-link">Customize PS1</a></li><li><a href="/mysql/dealing-with-sparse-or-missing-data.html" class="sidebar-link">Dealing with sparse or missing data</a></li><li><a href="/mysql/connecting-with-utf-8-using-various-programming-language.html" class="sidebar-link">Connecting with UTF-8 Using Various Programming language.</a></li><li><a href="/mysql/time-with-subsecond-precision.html" class="sidebar-link">Time with subsecond precision</a></li><li><a href="/mysql/one-to-many.html" class="sidebar-link">One to Many</a></li><li><a href="/mysql/many-to-many-mapping-table.html" class="sidebar-link">Many-to-many Mapping table</a></li><li><a href="/mysql/pivot-queries.html" class="sidebar-link">Pivot queries</a></li><li><a href="/mysql/dynamic-un-pivot-table-using-prepared-statement.html" class="sidebar-link">Dynamic Un-Pivot Table using Prepared Statement</a></li><li><a href="/mysql/server-information.html" class="sidebar-link">Server Information</a></li><li><a href="/mysql/ssl-connection-setup.html" class="sidebar-link">SSL Connection Setup</a></li><li><a href="/mysql/create-new-user.html" class="sidebar-link">Create New User</a></li><li><a href="/mysql/security-via-grants.html" class="sidebar-link">Security via GRANTs</a></li><li><a href="/mysql/change-password.html" class="sidebar-link">Change Password</a></li><li><a href="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html" class="sidebar-link">Recover and reset the default root password for MySQL 5.7+</a></li><li><a href="/mysql/recover-from-lost-root-password.html" class="sidebar-link">Recover from lost root password</a></li><li><a href="/mysql/mysql-performance-tips.html" class="sidebar-link">Mysql Performance Tips</a></li><li><a href="/mysql/performance-tuning.html" class="sidebar-link">Performance Tuning</a></li><li><a href="/mysql/reserved-words.html" class="sidebar-link">Reserved Words</a></li><li><a href="/mysql/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="union"><a href="#union" class="header-anchor">#</a> UNION</h1> <h2 id="combining-select-statements-with-union"><a href="#combining-select-statements-with-union" class="header-anchor">#</a> Combining SELECT statements with UNION</h2> <p>You can combine the results of two identically structured queries with the <code>UNION</code> keyword.</p> <p>For example, if you wanted a list of all contact info from two separate tables, <code>authors</code> and <code>editors</code>, for instance, you could use the <code>UNION</code> keyword like so:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> phone_number 
<span class="token keyword">from</span> authors

<span class="token keyword">union</span>

<span class="token keyword">select</span> name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> phone_number
<span class="token keyword">from</span> editors

</code></pre></div><p>Using <code>union</code> by itself will strip out duplicates. If you needed to keep duplicates in your query, you could use the <code>ALL</code> keyword like so: <code>UNION ALL</code>.</p> <h2 id="order-by"><a href="#order-by" class="header-anchor">#</a> ORDER BY</h2> <p>If you need to sort the results of a UNION, use this pattern:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span>
<span class="token keyword">UNION</span>
<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>

</code></pre></div><p>Without the parentheses, the final ORDER BY would belong to the last SELECT.</p> <h2 id="pagination-via-offset"><a href="#pagination-via-offset" class="header-anchor">#</a> Pagination via OFFSET</h2> <p>When adding a LIMIT to a UNION, this is the pattern to use:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> x  <span class="token keyword">LIMIT</span> <span class="token number">10</span> <span class="token punctuation">)</span>
<span class="token keyword">UNION</span>
<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> x  <span class="token keyword">LIMIT</span> <span class="token number">10</span> <span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> x  <span class="token keyword">LIMIT</span> <span class="token number">10</span>

</code></pre></div><p>Since you cannot predict which SELECT(s) will the &quot;10&quot; will come from, you need to get 10 from each, then further whittle down the list, repeating both the <code>ORDER BY</code> and <code>LIMIT</code>.</p> <p>For the 4th page of 10 items, this pattern is needed:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> x  <span class="token keyword">LIMIT</span> <span class="token number">40</span> <span class="token punctuation">)</span>
<span class="token keyword">UNION</span>
<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> x  <span class="token keyword">LIMIT</span> <span class="token number">40</span> <span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> x  <span class="token keyword">LIMIT</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">10</span>

</code></pre></div><p>That is, collect 4 page's worth in each <code>SELECT</code>, then do the <code>OFFSET</code> in the <code>UNION</code>.</p> <h2 id="combining-data-with-different-columns"><a href="#combining-data-with-different-columns" class="header-anchor">#</a> Combining data with different columns</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> caption <span class="token keyword">as</span> title<span class="token punctuation">,</span> <span class="token keyword">year</span><span class="token punctuation">,</span> pages <span class="token keyword">FROM</span> books 
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> title<span class="token punctuation">,</span> <span class="token keyword">year</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">as</span> pages <span class="token keyword">FROM</span> movies

</code></pre></div><p>When combining 2 record sets with different columns then emulate the missing ones with default values.</p> <h2 id="union-all-and-union"><a href="#union-all-and-union" class="header-anchor">#</a> UNION ALL  and UNION</h2> <p>SELECT 1,22,44
UNION
SELECT 2,33,55</p> <p><a href="http://i.stack.imgur.com/rF9SA.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/rF9SA.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>SELECT 1,22,44
UNION
SELECT 2,33,55
UNION
SELECT 2,33,55</p> <p><strong>The result is the same as above.</strong></p> <p>use UNION ALL</p> <p>when</p> <p>SELECT 1,22,44
UNION
SELECT 2,33,55
UNION ALL
SELECT 2,33,55</p> <p><a href="http://i.stack.imgur.com/tD1Rz.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/tD1Rz.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="combining-and-merging-data-on-different-mysql-tables-with-the-same-columns-into-unique-rows-and-running-query"><a href="#combining-and-merging-data-on-different-mysql-tables-with-the-same-columns-into-unique-rows-and-running-query" class="header-anchor">#</a> Combining and merging data on different MySQL tables with the same columns into unique rows and running query</h2> <p>This <strong><strong>UNION ALL</strong></strong> combines data from multiple tables and serve as a table name alias to use for your queries:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>date_time_column<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>date_time_column<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token keyword">DATE</span><span class="token punctuation">(</span>date_time_column<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token keyword">DATE</span><span class="token punctuation">(</span>date_time_column<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> <span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token function">COUNT</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> <span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> Ratio
<span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token keyword">SELECT</span> date_time_column<span class="token punctuation">,</span> ip <span class="token keyword">FROM</span> server_log_1 <span class="token keyword">WHERE</span> state <span class="token operator">=</span> <span class="token string">'action'</span> <span class="token operator">AND</span> log_id <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
    <span class="token punctuation">(</span><span class="token keyword">SELECT</span> date_time_column<span class="token punctuation">,</span> ip <span class="token keyword">FROM</span> server_log_2 <span class="token keyword">WHERE</span> state <span class="token operator">=</span> <span class="token string">'action'</span> <span class="token operator">AND</span> log_id <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
    <span class="token punctuation">(</span><span class="token keyword">SELECT</span> date_time_column<span class="token punctuation">,</span> ip <span class="token keyword">FROM</span> server_log_3 <span class="token keyword">WHERE</span> state <span class="token operator">=</span> <span class="token string">'action'</span> <span class="token operator">AND</span> log_id <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
    <span class="token punctuation">(</span><span class="token keyword">SELECT</span> date_time_column<span class="token punctuation">,</span> ip <span class="token keyword">FROM</span> server_log <span class="token keyword">WHERE</span> state <span class="token operator">=</span> <span class="token string">'action'</span> <span class="token operator">AND</span> log_id <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">AS</span> table_all
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>date_time_column<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>date_time_column<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>UNION DISTINCT -- dedups after combining the SELECTs</li> <li>UNION ALL -- non dedup (faster)</li> <li>UNION -- the default is DISTINCT</li> <li>SELECT ... UNION SELECT ... -- is OK, but ambiguous on <code>ORDER BY</code></li> <li>( SELECT ... ) UNION ( SELECT ... ) ORDER BY ... -- resolves the ambiguity</li></ul> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>UNION does not use multiple CPUs.</p> <p>UNION always* involves a temp table to collect the results. *As of 5.7.3 / MariaDB 10.1, some forms of UNION deliver the results without using a tmp table (hence, faster).</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/mysql/union.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mysql/joins-join-3-table-with-the-same-name-of-id.html" class="prev">
        JOINS: Join 3 table with the same name of id.
      </a></span> <span class="next"><a href="/mysql/arithmetic.html">
        Arithmetic
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2157.94fe7787.js" defer></script>
  </body>
</html>
