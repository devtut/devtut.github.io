<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL - Recover and reset the default root password for MySQL 5.7+</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="What happens when the initial start up of the server, How to change the root password by using the default password, reset root password when  /var/run/mysqld' for UNIX socket file don't exists">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="MySQL - Recover and reset the default root password for MySQL 5.7+">
    <meta property="og:description" content="What happens when the initial start up of the server, How to change the root password by using the default password, reset root password when  /var/run/mysqld' for UNIX socket file don't exists">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="MySQL - Recover and reset the default root password for MySQL 5.7+">
    <meta name="twitter:description" content="What happens when the initial start up of the server, How to change the root password by using the default password, reset root password when  /var/run/mysqld' for UNIX socket file don't exists">
    <meta name="twitter:url" content="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/2141.5e18debd.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/mysql/getting-started-with-mysql.html" class="sidebar-link">Getting started with MySQL</a></li><li><a href="/mysql/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/mysql/select.html" class="sidebar-link">SELECT</a></li><li><a href="/mysql/backticks.html" class="sidebar-link">Backticks</a></li><li><a href="/mysql/null.html" class="sidebar-link">NULL</a></li><li><a href="/mysql/limit-and-offset.html" class="sidebar-link">Limit and Offset</a></li><li><a href="/mysql/creating-databases.html" class="sidebar-link">Creating databases</a></li><li><a href="/mysql/using-variables.html" class="sidebar-link">Using Variables</a></li><li><a href="/mysql/comment-mysql.html" class="sidebar-link">Comment Mysql</a></li><li><a href="/mysql/insert.html" class="sidebar-link">INSERT</a></li><li><a href="/mysql/delete.html" class="sidebar-link">DELETE</a></li><li><a href="/mysql/update.html" class="sidebar-link">UPDATE</a></li><li><a href="/mysql/order-by.html" class="sidebar-link">ORDER BY</a></li><li><a href="/mysql/group-by.html" class="sidebar-link">Group By</a></li><li><a href="/mysql/error-1055-only-full-group-by-something-is-not-in-group-by-clause.html" class="sidebar-link">Error 1055: ONLYFULLGROUP_BY: something  is not in GROUP BY clause ...</a></li><li><a href="/mysql/joins.html" class="sidebar-link">Joins</a></li><li><a href="/mysql/joins-join-3-table-with-the-same-name-of-id.html" class="sidebar-link">JOINS: Join 3 table with the same name of id.</a></li><li><a href="/mysql/union.html" class="sidebar-link">UNION</a></li><li><a href="/mysql/arithmetic.html" class="sidebar-link">Arithmetic</a></li><li><a href="/mysql/string-operations.html" class="sidebar-link">String operations</a></li><li><a href="/mysql/date-and-time-operations.html" class="sidebar-link">Date and Time Operations</a></li><li><a href="/mysql/handling-time-zones.html" class="sidebar-link">Handling Time Zones</a></li><li><a href="/mysql/regular-expressions.html" class="sidebar-link">Regular Expressions</a></li><li><a href="/mysql/view.html" class="sidebar-link">VIEW</a></li><li><a href="/mysql/table-creation.html" class="sidebar-link">Table Creation</a></li><li><a href="/mysql/alter-table.html" class="sidebar-link">ALTER TABLE</a></li><li><a href="/mysql/drop-table.html" class="sidebar-link">Drop Table</a></li><li><a href="/mysql/mysql-lock-table.html" class="sidebar-link">MySQL LOCK TABLE</a></li><li><a href="/mysql/error-codes.html" class="sidebar-link">Error codes</a></li><li><a href="/mysql/stored-routines-procedures-and-functions.html" class="sidebar-link">Stored routines (procedures and functions)</a></li><li><a href="/mysql/indexes-and-keys.html" class="sidebar-link">Indexes and Keys</a></li><li><a href="/mysql/full-text-search.html" class="sidebar-link">Full-Text search</a></li><li><a href="/mysql/prepare-statements.html" class="sidebar-link">PREPARE Statements</a></li><li><a href="/mysql/json.html" class="sidebar-link">JSON</a></li><li><a href="/mysql/extract-values-from-json-type.html" class="sidebar-link">Extract values from JSON type</a></li><li><a href="/mysql/mysql-admin.html" class="sidebar-link">MySQL Admin</a></li><li><a href="/mysql/triggers.html" class="sidebar-link">TRIGGERS</a></li><li><a href="/mysql/configuration-and-tuning.html" class="sidebar-link">Configuration and tuning</a></li><li><a href="/mysql/events.html" class="sidebar-link">Events</a></li><li><a href="/mysql/enum.html" class="sidebar-link">ENUM</a></li><li><a href="/mysql/install-mysql-container-with-docker-compose.html" class="sidebar-link">Install Mysql container with Docker-Compose</a></li><li><a href="/mysql/character-sets-and-collations.html" class="sidebar-link">Character Sets and Collations</a></li><li><a href="/mysql/myisam-engine.html" class="sidebar-link">MyISAM Engine</a></li><li><a href="/mysql/converting-from-myisam-to-innodb.html" class="sidebar-link">Converting from MyISAM to InnoDB</a></li><li><a href="/mysql/transaction.html" class="sidebar-link">Transaction</a></li><li><a href="/mysql/log-files.html" class="sidebar-link">Log files</a></li><li><a href="/mysql/clustering.html" class="sidebar-link">Clustering</a></li><li><a href="/mysql/partitioning.html" class="sidebar-link">Partitioning</a></li><li><a href="/mysql/replication.html" class="sidebar-link">Replication</a></li><li><a href="/mysql/backup-using-mysqldump.html" class="sidebar-link">Backup using mysqldump</a></li><li><a href="/mysql/mysqlimport.html" class="sidebar-link">mysqlimport</a></li><li><a href="/mysql/load-data-infile.html" class="sidebar-link">LOAD DATA INFILE</a></li><li><a href="/mysql/mysql-unions.html" class="sidebar-link">MySQL Unions</a></li><li><a href="/mysql/mysql-client.html" class="sidebar-link">MySQL client</a></li><li><a href="/mysql/temporary-tables.html" class="sidebar-link">Temporary Tables</a></li><li><a href="/mysql/customize-ps1.html" class="sidebar-link">Customize PS1</a></li><li><a href="/mysql/dealing-with-sparse-or-missing-data.html" class="sidebar-link">Dealing with sparse or missing data</a></li><li><a href="/mysql/connecting-with-utf-8-using-various-programming-language.html" class="sidebar-link">Connecting with UTF-8 Using Various Programming language.</a></li><li><a href="/mysql/time-with-subsecond-precision.html" class="sidebar-link">Time with subsecond precision</a></li><li><a href="/mysql/one-to-many.html" class="sidebar-link">One to Many</a></li><li><a href="/mysql/many-to-many-mapping-table.html" class="sidebar-link">Many-to-many Mapping table</a></li><li><a href="/mysql/pivot-queries.html" class="sidebar-link">Pivot queries</a></li><li><a href="/mysql/dynamic-un-pivot-table-using-prepared-statement.html" class="sidebar-link">Dynamic Un-Pivot Table using Prepared Statement</a></li><li><a href="/mysql/server-information.html" class="sidebar-link">Server Information</a></li><li><a href="/mysql/ssl-connection-setup.html" class="sidebar-link">SSL Connection Setup</a></li><li><a href="/mysql/create-new-user.html" class="sidebar-link">Create New User</a></li><li><a href="/mysql/security-via-grants.html" class="sidebar-link">Security via GRANTs</a></li><li><a href="/mysql/change-password.html" class="sidebar-link">Change Password</a></li><li><a href="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html" aria-current="page" class="active sidebar-link">Recover and reset the default root password for MySQL 5.7+</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html#what-happens-when-the-initial-start-up-of-the-server" class="sidebar-link">What happens when the initial start up of the server</a></li><li class="sidebar-sub-header"><a href="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html#how-to-change-the-root-password-by-using-the-default-password" class="sidebar-link">How to change the root password by using the default password</a></li><li class="sidebar-sub-header"><a href="/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.html#reset-root-password-when-var-run-mysqld-for-unix-socket-file-don-t-exists" class="sidebar-link">reset root password when &quot; /var/run/mysqld' for UNIX socket file don't exists&quot;</a></li></ul></li><li><a href="/mysql/recover-from-lost-root-password.html" class="sidebar-link">Recover from lost root password</a></li><li><a href="/mysql/mysql-performance-tips.html" class="sidebar-link">Mysql Performance Tips</a></li><li><a href="/mysql/performance-tuning.html" class="sidebar-link">Performance Tuning</a></li><li><a href="/mysql/reserved-words.html" class="sidebar-link">Reserved Words</a></li><li><a href="/mysql/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="recover-and-reset-the-default-root-password-for-mysql-5-7"><a href="#recover-and-reset-the-default-root-password-for-mysql-5-7" class="header-anchor">#</a> Recover and reset the default root password for MySQL 5.7+</h1> <p>After MySQL 5.7, when we install MySQL sometimes we don't need to create a root account or give a root password. By default when we start the server, the default password is stored in the <code>mysqld.log</code> file. We need to login in to the system using that password and we need to change it.</p> <h2 id="what-happens-when-the-initial-start-up-of-the-server"><a href="#what-happens-when-the-initial-start-up-of-the-server" class="header-anchor">#</a> What happens when the initial start up of the server</h2> <p>Given that the data directory of the server is empty:</p> <ul><li>The server is initialized.</li> <li>SSL certificate and key files are generated in the data directory.</li> <li>The validate_password plugin is installed and enabled.</li> <li>The superuser account 'root'@'localhost' is created. The password for the superuser is set and stored in the error log file.</li></ul> <h2 id="how-to-change-the-root-password-by-using-the-default-password"><a href="#how-to-change-the-root-password-by-using-the-default-password" class="header-anchor">#</a> How to change the root password by using the default password</h2> <p>To reveal the default &quot;root&quot; password:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>shell<span class="token operator">&gt;</span> sudo grep <span class="token string">'temporary password'</span> <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>log

</code></pre></div><p>Change the root password as soon as possible by logging in with the generated temporary password and set a custom password for the superuser account:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>shell<span class="token operator">&gt;</span> mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p 

mysql<span class="token operator">&gt;</span> <span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'MyNewPass5!'</span><span class="token punctuation">;</span> 

</code></pre></div><p><strong>Note:</strong> MySQL's validate_password plugin is installed by default. This will require that passwords contain at least one upper case letter, one lower case letter, one digit, and one special character, and that the total password length is at least 8 characters.</p> <h2 id="reset-root-password-when-var-run-mysqld-for-unix-socket-file-don-t-exists"><a href="#reset-root-password-when-var-run-mysqld-for-unix-socket-file-don-t-exists" class="header-anchor">#</a> reset root password when &quot; /var/run/mysqld' for UNIX socket file don't exists&quot;</h2> <p>if I forget the password then I'll get error.</p> <div class="language-sql extra-class"><pre class="language-sql"><code>$ mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p    

</code></pre></div><p>Enter password:</p> <p>ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)</p> <p>I tried to solve the issue by first knowing the status:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>$ systemctl <span class="token keyword">status</span> mysql<span class="token punctuation">.</span>service

</code></pre></div><p>mysql.service - MySQL Community Server
Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: en
Active: active (running) since Thu 2017-06-08 14:31:33 IST; 38s ago</p> <p>Then I used the code <code>mysqld_safe --skip-grant-tables &amp;</code> but I get the error:</p> <blockquote></blockquote> <p>mysqld_safe Directory '/var/run/mysqld' for UNIX socket file don't exists.</p> <div class="language-sql extra-class"><pre class="language-sql"><code>$ systemctl stop  mysql<span class="token punctuation">.</span>service
$ ps <span class="token operator">-</span>eaf<span class="token operator">|</span>grep mysql
$ mysqld_safe <span class="token comment">--skip-grant-tables &amp;</span>

</code></pre></div><blockquote></blockquote> <p>I solved:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>$ mkdir <span class="token operator">-</span>p <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld
$ chown mysql:mysql <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld

</code></pre></div><p>Now I use the same code <code>mysqld_safe --skip-grant-tables &amp;</code> and get</p> <blockquote></blockquote> <p>mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql</p> <p>If I use <code>$ mysql -u root</code> I'll get :</p> <p>Server version: 5.7.18-0ubuntu0.16.04.1 (Ubuntu)</p> <p>Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</p> <p>Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.</p> <p>Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</p> <p>mysql&gt;</p> <blockquote></blockquote> <p>Now time to change password:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">use</span> mysql
mysql<span class="token operator">&gt;</span> <span class="token keyword">describe</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

</code></pre></div><p>Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A</p> <p>Database changed</p> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> PASSWORD <span class="token keyword">FOR</span> root<span class="token variable">@'localhost'</span> <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'newpwd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>or If you have a mysql root account that can connect from everywhere, you should also do:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">SET</span> Password<span class="token operator">=</span>PASSWORD<span class="token punctuation">(</span><span class="token string">'newpwd'</span><span class="token punctuation">)</span> <span class="token keyword">WHERE</span> <span class="token keyword">User</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>

</code></pre></div><p>Alternate Method:</p> <div class="language- extra-class"><pre class="language-text"><code>
  USE mysql
   UPDATE user SET Password = PASSWORD('newpwd')
   WHERE Host = 'localhost' AND User = 'root';

</code></pre></div><p>And if you have a root account that can access from everywhere:</p> <div class="language- extra-class"><pre class="language-text"><code>
USE mysql
 UPDATE user SET Password = PASSWORD('newpwd')
 WHERE Host = '%' AND User = 'root';`enter code here

</code></pre></div><p>now need to <code>quit</code> from mysql and stop/start</p> <div class="language-sql extra-class"><pre class="language-sql"><code>FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
sudo <span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>mysql stop
sudo <span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>mysql <span class="token keyword">start</span>

</code></pre></div><p>now again ` mysql -u root -p' and use the new password to get</p> <blockquote></blockquote> <p>mysql&gt;</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Recovering and resetting the default root password using this method is applicable only for MySQL 5.7+</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/mysql/recover-and-reset-the-default-root-password-for-mysql-5-7.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mysql/change-password.html" class="prev">
        Change Password
      </a></span> <span class="next"><a href="/mysql/recover-from-lost-root-password.html">
        Recover from lost root password
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/2141.5e18debd.js" defer></script>
  </body>
</html>
