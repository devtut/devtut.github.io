<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java - Java Pitfalls - Nulls and NullPointerException</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Pitfall - Making good unexpected nulls, Pitfall - Using null to represent an empty array or collection, Pitfall - Returning null instead of throwing an exception, Pitfall - Not checking if an I/O stream isn't even initialized when closing it, Pitfall - Unnecessary use of Primitive Wrappers can lead to NullPointerExceptions, Pitfall - Using Yoda notation to avoid NullPointerException">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Java - Java Pitfalls - Nulls and NullPointerException">
    <meta property="og:description" content="Pitfall - Making good unexpected nulls, Pitfall - Using null to represent an empty array or collection, Pitfall - Returning null instead of throwing an exception, Pitfall - Not checking if an I/O stream isn't even initialized when closing it, Pitfall - Unnecessary use of Primitive Wrappers can lead to NullPointerExceptions, Pitfall - Using Yoda notation to avoid NullPointerException">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/java/java-pitfalls-nulls-and-nullpointerexception.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Java - Java Pitfalls - Nulls and NullPointerException">
    <meta name="twitter:description" content="Pitfall - Making good unexpected nulls, Pitfall - Using null to represent an empty array or collection, Pitfall - Returning null instead of throwing an exception, Pitfall - Not checking if an I/O stream isn't even initialized when closing it, Pitfall - Unnecessary use of Primitive Wrappers can lead to NullPointerExceptions, Pitfall - Using Yoda notation to avoid NullPointerException">
    <meta name="twitter:url" content="/java/java-pitfalls-nulls-and-nullpointerexception.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1598.4fe80e23.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/java/java-editions-versions-releases-and-distributions.html" class="sidebar-link">Java Editions, Versions, Releases and Distributions</a></li><li><a href="/java/installing-java-standard-edition.html" class="sidebar-link">Installing Java (Standard Edition)</a></li><li><a href="/java/getting-started-with-java-language.html" class="sidebar-link">Getting started with Java Language</a></li><li><a href="/java/type-conversion.html" class="sidebar-link">Type Conversion</a></li><li><a href="/java/getters-and-setters.html" class="sidebar-link">Getters and Setters</a></li><li><a href="/java/reference-data-types.html" class="sidebar-link">Reference Data Types</a></li><li><a href="/java/java-compiler-javac.html" class="sidebar-link">Java Compiler - 'javac'</a></li><li><a href="/java/documenting-java-code.html" class="sidebar-link">Documenting Java Code</a></li><li><a href="/java/command-line-argument-processing.html" class="sidebar-link">Command line Argument Processing</a></li><li><a href="/java/the-java-command-java-and-javaw.html" class="sidebar-link">The Java Command - 'java' and 'javaw'</a></li><li><a href="/java/literals.html" class="sidebar-link">Literals</a></li><li><a href="/java/primitive-data-types.html" class="sidebar-link">Primitive Data Types</a></li><li><a href="/java/strings.html" class="sidebar-link">Strings</a></li><li><a href="/java/stringbuffer.html" class="sidebar-link">StringBuffer</a></li><li><a href="/java/stringbuilder.html" class="sidebar-link">StringBuilder</a></li><li><a href="/java/string-tokenizer.html" class="sidebar-link">String Tokenizer</a></li><li><a href="/java/splitting-a-string-into-fixed-length-parts.html" class="sidebar-link">Splitting a string into fixed length parts</a></li><li><a href="/java/date-class.html" class="sidebar-link">Date Class</a></li><li><a href="/java/dates-and-time-java-time.html" class="sidebar-link">Dates and Time (java.time.*)</a></li><li><a href="/java/localtime.html" class="sidebar-link">LocalTime</a></li><li><a href="/java/bigdecimal.html" class="sidebar-link">BigDecimal</a></li><li><a href="/java/biginteger.html" class="sidebar-link">BigInteger</a></li><li><a href="/java/numberformat.html" class="sidebar-link">NumberFormat</a></li><li><a href="/java/bit-manipulation.html" class="sidebar-link">Bit Manipulation</a></li><li><a href="/java/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/java/collections.html" class="sidebar-link">Collections</a></li><li><a href="/java/lists.html" class="sidebar-link">Lists</a></li><li><a href="/java/sets.html" class="sidebar-link">Sets</a></li><li><a href="/java/list-vs-set.html" class="sidebar-link">List vs SET</a></li><li><a href="/java/maps.html" class="sidebar-link">Maps</a></li><li><a href="/java/linkedhashmap.html" class="sidebar-link">LinkedHashMap</a></li><li><a href="/java/weakhashmap.html" class="sidebar-link">WeakHashMap</a></li><li><a href="/java/sortedmap.html" class="sidebar-link">SortedMap</a></li><li><a href="/java/treemap-and-treeset.html" class="sidebar-link">TreeMap and TreeSet</a></li><li><a href="/java/queues-and-deques.html" class="sidebar-link">Queues and Deques</a></li><li><a href="/java/dequeue-interface.html" class="sidebar-link">Dequeue Interface</a></li><li><a href="/java/enums.html" class="sidebar-link">Enums</a></li><li><a href="/java/enum-map.html" class="sidebar-link">Enum Map</a></li><li><a href="/java/enumset-class.html" class="sidebar-link">EnumSet class</a></li><li><a href="/java/enum-starting-with-number.html" class="sidebar-link">Enum starting with number</a></li><li><a href="/java/hashtable.html" class="sidebar-link">Hashtable</a></li><li><a href="/java/operators.html" class="sidebar-link">Operators</a></li><li><a href="/java/constructors.html" class="sidebar-link">Constructors</a></li><li><a href="/java/object-class-methods-and-constructor.html" class="sidebar-link">Object Class Methods and Constructor</a></li><li><a href="/java/annotations.html" class="sidebar-link">Annotations</a></li><li><a href="/java/immutable-class.html" class="sidebar-link">Immutable Class</a></li><li><a href="/java/immutable-objects.html" class="sidebar-link">Immutable Objects</a></li><li><a href="/java/visibility-controlling-access-to-members-of-a-class.html" class="sidebar-link">Visibility (controlling access to members of a class)</a></li><li><a href="/java/generics.html" class="sidebar-link">Generics</a></li><li><a href="/java/classes-and-objects.html" class="sidebar-link">Classes and Objects</a></li><li><a href="/java/local-inner-class.html" class="sidebar-link">Local Inner Class</a></li><li><a href="/java/nested-and-inner-classes.html" class="sidebar-link">Nested and Inner Classes</a></li><li><a href="/java/the-java-util-objects-class.html" class="sidebar-link">The java.util.Objects Class</a></li><li><a href="/java/default-methods.html" class="sidebar-link">Default Methods</a></li><li><a href="/java/packages.html" class="sidebar-link">Packages</a></li><li><a href="/java/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/java/reference-types.html" class="sidebar-link">Reference Types</a></li><li><a href="/java/console-i-o.html" class="sidebar-link">Console I/O</a></li><li><a href="/java/streams.html" class="sidebar-link">Streams</a></li><li><a href="/java/inputstreams-and-outputstreams.html" class="sidebar-link">InputStreams and OutputStreams</a></li><li><a href="/java/readers-and-writers.html" class="sidebar-link">Readers and Writers</a></li><li><a href="/java/preferences.html" class="sidebar-link">Preferences</a></li><li><a href="/java/collection-factory-methods.html" class="sidebar-link">Collection Factory Methods</a></li><li><a href="/java/alternative-collections.html" class="sidebar-link">Alternative Collections</a></li><li><a href="/java/concurrent-collections.html" class="sidebar-link">Concurrent Collections</a></li><li><a href="/java/choosing-collections.html" class="sidebar-link">Choosing Collections</a></li><li><a href="/java/super-keyword.html" class="sidebar-link">super keyword</a></li><li><a href="/java/serialization.html" class="sidebar-link">Serialization</a></li><li><a href="/java/optional.html" class="sidebar-link">Optional</a></li><li><a href="/java/object-references.html" class="sidebar-link">Object References</a></li><li><a href="/java/exceptions-and-exception-handling.html" class="sidebar-link">Exceptions and exception handling</a></li><li><a href="/java/calendar-and-its-subclasses.html" class="sidebar-link">Calendar and its Subclasses</a></li><li><a href="/java/using-the-static-keyword.html" class="sidebar-link">Using the static keyword</a></li><li><a href="/java/properties-class.html" class="sidebar-link">Properties Class</a></li><li><a href="/java/lambda-expressions.html" class="sidebar-link">Lambda Expressions</a></li><li><a href="/java/basic-control-structures.html" class="sidebar-link">Basic Control Structures</a></li><li><a href="/java/bufferedwriter.html" class="sidebar-link">BufferedWriter</a></li><li><a href="/java/new-file-i-o.html" class="sidebar-link">New File I/O</a></li><li><a href="/java/file-i-o.html" class="sidebar-link">File I/O</a></li><li><a href="/java/scanner.html" class="sidebar-link">Scanner</a></li><li><a href="/java/interfaces.html" class="sidebar-link">Interfaces</a></li><li><a href="/java/regular-expressions.html" class="sidebar-link">Regular Expressions</a></li><li><a href="/java/comparable-and-comparator.html" class="sidebar-link">Comparable and Comparator</a></li><li><a href="/java/java-floating-point-operations.html" class="sidebar-link">Java Floating Point Operations</a></li><li><a href="/java/currency-and-money.html" class="sidebar-link">Currency and Money</a></li><li><a href="/java/object-cloning.html" class="sidebar-link">Object Cloning</a></li><li><a href="/java/recursion.html" class="sidebar-link">Recursion</a></li><li><a href="/java/converting-to-and-from-strings.html" class="sidebar-link">Converting to and from Strings</a></li><li><a href="/java/random-number-generation.html" class="sidebar-link">Random Number Generation</a></li><li><a href="/java/singletons.html" class="sidebar-link">Singletons</a></li><li><a href="/java/autoboxing.html" class="sidebar-link">Autoboxing</a></li><li><a href="/java/2d-graphics-in-java.html" class="sidebar-link">2D Graphics in Java</a></li><li><a href="/java/jaxb.html" class="sidebar-link">JAXB</a></li><li><a href="/java/class-java-reflection.html" class="sidebar-link">Class - Java Reflection</a></li><li><a href="/java/networking.html" class="sidebar-link">Networking</a></li><li><a href="/java/nio-networking.html" class="sidebar-link">NIO - Networking</a></li><li><a href="/java/httpurlconnection.html" class="sidebar-link">HttpURLConnection</a></li><li><a href="/java/jax-ws.html" class="sidebar-link">JAX-WS</a></li><li><a href="/java/nashorn-javascript-engine.html" class="sidebar-link">Nashorn JavaScript engine</a></li><li><a href="/java/java-native-interface.html" class="sidebar-link">Java Native Interface</a></li><li><a href="/java/functional-interfaces.html" class="sidebar-link">Functional Interfaces</a></li><li><a href="/java/fluent-interface.html" class="sidebar-link">Fluent Interface</a></li><li><a href="/java/remote-method-invocation-rmi.html" class="sidebar-link">Remote Method Invocation (RMI)</a></li><li><a href="/java/iterator-and-iterable.html" class="sidebar-link">Iterator and Iterable</a></li><li><a href="/java/reflection-api.html" class="sidebar-link">Reflection API</a></li><li><a href="/java/bytebuffer.html" class="sidebar-link">ByteBuffer</a></li><li><a href="/java/applets.html" class="sidebar-link">Applets</a></li><li><a href="/java/expressions.html" class="sidebar-link">Expressions</a></li><li><a href="/java/json-in-java.html" class="sidebar-link">JSON in Java</a></li><li><a href="/java/xml-parsing-using-the-jaxp-apis.html" class="sidebar-link">XML Parsing using the JAXP APIs</a></li><li><a href="/java/xml-xpath-evaluation.html" class="sidebar-link">XML XPath Evaluation</a></li><li><a href="/java/xom-xml-object-model.html" class="sidebar-link">XOM - XML Object Model</a></li><li><a href="/java/polymorphism.html" class="sidebar-link">Polymorphism</a></li><li><a href="/java/encapsulation.html" class="sidebar-link">Encapsulation</a></li><li><a href="/java/java-agents.html" class="sidebar-link">Java Agents</a></li><li><a href="/java/varargs-variable-argument.html" class="sidebar-link">Varargs  (Variable Argument)</a></li><li><a href="/java/logging-java-util-logging.html" class="sidebar-link">Logging (java.util.logging)</a></li><li><a href="/java/log4j-log4j2.html" class="sidebar-link">log4j / log4j2</a></li><li><a href="/java/oracle-official-code-standard.html" class="sidebar-link">Oracle Official Code Standard</a></li><li><a href="/java/character-encoding.html" class="sidebar-link">Character encoding</a></li><li><a href="/java/apache-commons-lang.html" class="sidebar-link">Apache Commons Lang</a></li><li><a href="/java/localization-and-internationalization.html" class="sidebar-link">Localization and Internationalization</a></li><li><a href="/java/parallel-programming-with-fork-join-framework.html" class="sidebar-link">Parallel programming with Fork/Join framework</a></li><li><a href="/java/non-access-modifiers.html" class="sidebar-link">Non-Access Modifiers</a></li><li><a href="/java/process.html" class="sidebar-link">Process</a></li><li><a href="/java/java-native-access.html" class="sidebar-link">Java Native Access</a></li><li><a href="/java/modules.html" class="sidebar-link">Modules</a></li><li><a href="/java/concurrent-programming-threads.html" class="sidebar-link">Concurrent Programming (Threads)</a></li><li><a href="/java/executor-executorservice-and-thread-pools.html" class="sidebar-link">Executor, ExecutorService and Thread pools</a></li><li><a href="/java/threadlocal.html" class="sidebar-link">ThreadLocal</a></li><li><a href="/java/using-threadpoolexecutor-in-multithreaded-applications.html" class="sidebar-link">Using ThreadPoolExecutor in MultiThreaded applications.</a></li><li><a href="/java/common-java-pitfalls.html" class="sidebar-link">Common Java Pitfalls</a></li><li><a href="/java/java-pitfalls-exception-usage.html" class="sidebar-link">Java Pitfalls - Exception usage</a></li><li><a href="/java/java-pitfalls-language-syntax.html" class="sidebar-link">Java Pitfalls - Language syntax</a></li><li><a href="/java/java-pitfalls-threads-and-concurrency.html" class="sidebar-link">Java Pitfalls - Threads and Concurrency</a></li><li><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html" aria-current="page" class="active sidebar-link">Java Pitfalls - Nulls and NullPointerException</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html#pitfall-making-good-unexpected-nulls" class="sidebar-link">Pitfall - &quot;Making good&quot; unexpected nulls</a></li><li class="sidebar-sub-header"><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html#pitfall-using-null-to-represent-an-empty-array-or-collection" class="sidebar-link">Pitfall - Using null to represent an empty array or collection</a></li><li class="sidebar-sub-header"><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html#pitfall-returning-null-instead-of-throwing-an-exception" class="sidebar-link">Pitfall - Returning null instead of throwing an exception</a></li><li class="sidebar-sub-header"><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html#pitfall-not-checking-if-an-i-o-stream-isn-t-even-initialized-when-closing-it" class="sidebar-link">Pitfall - Not checking if an I/O stream isn't even initialized when closing it</a></li><li class="sidebar-sub-header"><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html#pitfall-unnecessary-use-of-primitive-wrappers-can-lead-to-nullpointerexceptions" class="sidebar-link">Pitfall - Unnecessary use of Primitive Wrappers can lead to NullPointerExceptions</a></li><li class="sidebar-sub-header"><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html#pitfall-using-yoda-notation-to-avoid-nullpointerexception" class="sidebar-link">Pitfall - Using &quot;Yoda notation&quot; to avoid NullPointerException</a></li></ul></li><li><a href="/java/java-pitfalls-performance-issues.html" class="sidebar-link">Java Pitfalls - Performance Issues</a></li><li><a href="/java/serviceloader.html" class="sidebar-link">ServiceLoader</a></li><li><a href="/java/classloaders.html" class="sidebar-link">Classloaders</a></li><li><a href="/java/creating-images-programmatically.html" class="sidebar-link">Creating Images Programmatically</a></li><li><a href="/java/atomic-types.html" class="sidebar-link">Atomic Types</a></li><li><a href="/java/rsa-encryption.html" class="sidebar-link">RSA Encryption</a></li><li><a href="/java/secure-objects.html" class="sidebar-link">Secure objects</a></li><li><a href="/java/security-cryptography.html" class="sidebar-link">Security &amp; Cryptography</a></li><li><a href="/java/securitymanager.html" class="sidebar-link">SecurityManager</a></li><li><a href="/java/jndi.html" class="sidebar-link">JNDI</a></li><li><a href="/java/sun-misc-unsafe.html" class="sidebar-link">sun.misc.Unsafe</a></li><li><a href="/java/java-memory-model.html" class="sidebar-link">Java Memory Model</a></li><li><a href="/java/java-deployment.html" class="sidebar-link">Java deployment</a></li><li><a href="/java/java-plugin-system-implementations.html" class="sidebar-link">Java plugin system implementations</a></li><li><a href="/java/javabean.html" class="sidebar-link">JavaBean</a></li><li><a href="/java/java-se-7-features.html" class="sidebar-link">Java SE 7 Features</a></li><li><a href="/java/java-se-8-features.html" class="sidebar-link">Java SE 8 Features</a></li><li><a href="/java/dynamic-method-dispatch.html" class="sidebar-link">Dynamic Method Dispatch</a></li><li><a href="/java/generating-java-code.html" class="sidebar-link">Generating Java Code</a></li><li><a href="/java/jshell.html" class="sidebar-link">JShell</a></li><li><a href="/java/stack-walking-api.html" class="sidebar-link">Stack-Walking API</a></li><li><a href="/java/sockets.html" class="sidebar-link">Sockets</a></li><li><a href="/java/java-sockets.html" class="sidebar-link">Java Sockets</a></li><li><a href="/java/ftp-file-transfer-protocol.html" class="sidebar-link">FTP (File Transfer Protocol)</a></li><li><a href="/java/using-other-scripting-languages-in-java.html" class="sidebar-link">Using Other Scripting Languages in Java</a></li><li><a href="/java/c-comparison.html" class="sidebar-link">C++ Comparison</a></li><li><a href="/java/audio.html" class="sidebar-link">Audio</a></li><li><a href="/java/java-print-service.html" class="sidebar-link">Java Print Service</a></li><li><a href="/java/completablefuture.html" class="sidebar-link">CompletableFuture</a></li><li><a href="/java/runtime-commands.html" class="sidebar-link">Runtime Commands</a></li><li><a href="/java/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/java/asserting.html" class="sidebar-link">Asserting</a></li><li><a href="/java/multi-release-jar-files.html" class="sidebar-link">Multi-Release JAR Files</a></li><li><a href="/java/just-in-time-jit-compiler.html" class="sidebar-link">Just in Time (JIT) compiler</a></li><li><a href="/java/bytecode-modification.html" class="sidebar-link">Bytecode Modification</a></li><li><a href="/java/disassembling-and-decompiling.html" class="sidebar-link">Disassembling and Decompiling</a></li><li><a href="/java/jmx.html" class="sidebar-link">JMX</a></li><li><a href="/java/java-virtual-machine-jvm.html" class="sidebar-link">Java Virtual Machine (JVM)</a></li><li><a href="/java/xjc.html" class="sidebar-link">XJC</a></li><li><a href="/java/jvm-flags.html" class="sidebar-link">JVM Flags</a></li><li><a href="/java/jvm-tool-interface.html" class="sidebar-link">JVM Tool Interface</a></li><li><a href="/java/java-memory-management.html" class="sidebar-link">Java Memory Management</a></li><li><a href="/java/java-performance-tuning.html" class="sidebar-link">Java Performance Tuning</a></li><li><a href="/java/benchmarks.html" class="sidebar-link">Benchmarks</a></li><li><a href="/java/fileupload-to-aws.html" class="sidebar-link">FileUpload to AWS</a></li><li><a href="/java/appdynamics-and-tibco-businessworks-instrumentation-for-easy-integration.html" class="sidebar-link">AppDynamics and TIBCO BusinessWorks Instrumentation for Easy Integration</a></li><li><a href="/java/the-classpath.html" class="sidebar-link">The Classpath</a></li><li><a href="/java/resources-on-classpath.html" class="sidebar-link">Resources (on classpath)</a></li><li><a href="/java/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-pitfalls-nulls-and-nullpointerexception"><a href="#java-pitfalls-nulls-and-nullpointerexception" class="header-anchor">#</a> Java Pitfalls - Nulls and NullPointerException</h1> <h2 id="pitfall-making-good-unexpected-nulls"><a href="#pitfall-making-good-unexpected-nulls" class="header-anchor">#</a> Pitfall - &quot;Making good&quot; unexpected nulls</h2> <p>On StackOverflow, we often see code like this in Answers:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">joinStrings</span><span class="token punctuation">(</span><span class="token class-name">String</span> a<span class="token punctuation">,</span> <span class="token class-name">String</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        a <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        b <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Often, this is accompanied with an assertion that is &quot;best practice&quot; to test for <code>null</code> like this to avoid <code>NullPointerException</code>.</p> <p>Is it best practice?  In short: No.</p> <p>There are some underlying assumptions that need to be questioned before we can say if it is a good idea to do this in our <code>joinStrings</code>:</p> <h3 id="what-does-it-mean-for-a-or-b-to-be-null"><a href="#what-does-it-mean-for-a-or-b-to-be-null" class="header-anchor">#</a> What does it mean for &quot;a&quot; or &quot;b&quot; to be null?</h3> <p>A <code>String</code> value can be zero or more characters, so we already have a way of representing an empty string.  Does <code>null</code> mean something different to <code>&quot;&quot;</code>?  If no, then it is problematic to have two ways to represent an empty string.</p> <h3 id="did-the-null-come-from-an-uninitialized-variable"><a href="#did-the-null-come-from-an-uninitialized-variable" class="header-anchor">#</a> Did the null come from an uninitialized variable?</h3> <p>A <code>null</code> can come from an uninitialized field, or an uninitialized array element.  The value could be uninitialized by design, or by accident.  If it was by accident then this is a bug.</p> <h3 id="does-the-null-represent-a-don-t-know-or-missing-value"><a href="#does-the-null-represent-a-don-t-know-or-missing-value" class="header-anchor">#</a> Does the null represent a &quot;don't know&quot; or &quot;missing value&quot;?</h3> <p>Sometimes a <code>null</code> can have a genuine meaning; e.g. that the real value of a variable is unknown or unavailable or &quot;optional&quot;.  In Java 8, the <code>Optional</code> class provides a better way of expressing that.</p> <h3 id="if-this-is-a-bug-or-a-design-error-should-we-make-good"><a href="#if-this-is-a-bug-or-a-design-error-should-we-make-good" class="header-anchor">#</a> If this is a bug (or a design error) should we &quot;make good&quot;?</h3> <p>One interpretation of the code is that we are &quot;making good&quot; an unexpected <code>null</code> by using an empty string in its place.  Is the correct strategy?  Would it be better to let the <code>NullPointerException</code> happen, and then catch the exception further up the stack and log it as a bug?</p> <p>The problem with &quot;making good&quot; is that it is liable to either hide the problem, or make it harder to diagnose.</p> <h3 id="is-this-efficient-good-for-code-quality"><a href="#is-this-efficient-good-for-code-quality" class="header-anchor">#</a> Is this efficient / good for code quality?</h3> <p>If the &quot;make good&quot; approach is used consistently, your code is going to contain a lot of &quot;defensive&quot; null tests.  This is going to make it longer and harder to read.  Furthermore, all of this testing and &quot;making good&quot; is liable to impact on the performance of your application.</p> <h3 id="in-summary"><a href="#in-summary" class="header-anchor">#</a> In summary</h3> <p>If <code>null</code> is a meaningful value, then testing for the <code>null</code> case is the correct approach.  The corollary is that if a <code>null</code> value is meaningful, then this should be clearly documented in the javadocs of any methods that accept the <code>null</code> value or return it.</p> <p>Otherwise, it is a better idea to treat an unexpected <code>null</code> as a programming error, and let the <code>NullPointerException</code> happen so that the developer gets to know there is a problem in the code.</p> <h2 id="pitfall-using-null-to-represent-an-empty-array-or-collection"><a href="#pitfall-using-null-to-represent-an-empty-array-or-collection" class="header-anchor">#</a> Pitfall - Using null to represent an empty array or collection</h2> <p>Some programmers think that it is a good idea to save space by using a <code>null</code> to represent an empty array or collection.  While it is true that you can save a small amount of space, the flipside is that it makes your code more complicated, and more fragile.  Compare these two versions of a method for summing an array:</p> <p>The first version is how you would normally code the method:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Sum the values in an array of integers.
 * @arg values the array to be summed
 * @return the sum
 **/</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The second version is how you need to code the method if you are in the habit of using <code>null</code> to represent an empty array.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Sum the values in an array of integers.
 * @arg values the array to be summed, or null.
 * @return the sum, or zero if the array is null.
 **/</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>values <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sum <span class="token operator">+=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>As you can see, the code is a bit more complicated.  This is directly attributable to the decision to use <code>null</code> in this way.</p> <p>Now consider if this array that might be a <code>null</code> is used in lots of places.  At each place where you use it, you need to consider whether you need to test for <code>null</code>.  If you miss a <code>null</code> test that needs to be there, you risk a <code>NullPointerException</code>.  Hence, the strategy of using <code>null</code> in this way leads to your application being more fragile; i.e. more vulnerable to the consequences of programmer errors.</p> <p>The lesson here is to use empty arrays and empty lists when that is what you mean.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                     <span class="token comment">// always empty</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// initially empty</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// always empty</span>

</code></pre></div><p>The space overhead is small, and there are other ways to minimize it if this this is a worthwhile thing to do.</p> <h2 id="pitfall-returning-null-instead-of-throwing-an-exception"><a href="#pitfall-returning-null-instead-of-throwing-an-exception" class="header-anchor">#</a> Pitfall - Returning null instead of throwing an exception</h2> <p>Some Java programmers have a general aversion to throwing or propagating exceptions.  This leads to code like the following:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Reader</span> <span class="token function">getReader</span><span class="token punctuation">(</span><span class="token class-name">String</span> pathname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token class-name">FileReader</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Open failed: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>}</p> <p>So what is the problem with that?</p> <p>The problem is that the <code>getReader</code> is returning a <code>null</code> as a special value to indicate that the <code>Reader</code> could not be opened.  Now the returned value needs to be tested to see if it is <code>null</code> before it is used.  If the test is left out, the result will be a <code>NullPointerException</code>.</p> <p>There are actually three problems here:</p> <ol><li>The <code>IOException</code> was caught too soon.</li> <li>The structure of this code means that there is a risk of leaking a resource.</li> <li>A <code>null</code> was used then returned because no &quot;real&quot; <code>Reader</code> was available to return.</li></ol> <p>In fact, assuming that the exception did need to be caught early like this, there were a couple of alternatives to returning <code>null</code>:</p> <ol><li>It would be possible to implement a <code>NullReader</code> class; e.g. one where API's operations behaves as if the reader was already at the &quot;end of file&quot; position.</li> <li>With Java 8, it would be possible to declare <code>getReader</code> as returning an <code>Optional&lt;Reader&gt;</code>.</li></ol> <h2 id="pitfall-not-checking-if-an-i-o-stream-isn-t-even-initialized-when-closing-it"><a href="#pitfall-not-checking-if-an-i-o-stream-isn-t-even-initialized-when-closing-it" class="header-anchor">#</a> Pitfall - Not checking if an I/O stream isn't even initialized when closing it</h2> <p>To prevent memory leaks, one should not forget to close an input stream or an output stream whose job is done. This is usually done with a <code>try</code>-<code>catch</code>-<code>finally</code> statement without the <code>catch</code> part:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">writeNullBytesToAFile</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token class-name">String</span> filename<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">FileOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> count<span class="token operator">--</span><span class="token punctuation">)</span>
            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>While the above code might look innocent, it has a flaw that can make debugging impossible. If the line where <code>out</code> is initialized (<code>out = new FileOutputStream(filename)</code>) throws an exception, then <code>out</code> will be <code>null</code> when <code>out.close()</code> is executed, resulting in a nasty <code>NullPointerException</code>!</p> <p>To prevent this, simply make sure the stream isn't <code>null</code> before trying to close it.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">writeNullBytesToAFile</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token class-name">String</span> filename<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">FileOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> count<span class="token operator">--</span><span class="token punctuation">)</span>
            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>out <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>An even better approach is to <code>try</code>-with-resources, since it'll automatically close the stream with a probability of 0 to throw an NPE without the need of a <code>finally</code> block.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">writeNullBytesToAFile</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token class-name">String</span> filename<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> count<span class="token operator">--</span><span class="token punctuation">)</span>
            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="pitfall-unnecessary-use-of-primitive-wrappers-can-lead-to-nullpointerexceptions"><a href="#pitfall-unnecessary-use-of-primitive-wrappers-can-lead-to-nullpointerexceptions" class="header-anchor">#</a> Pitfall - Unnecessary use of Primitive Wrappers can lead to NullPointerExceptions</h2> <p>Sometimes, programmers who are new Java will use primitive types and wrappers interchangeably.  This can lead to problems.  Consider this example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRecord</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> c<span class="token punctuation">,</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">MyRecord</span> <span class="token keyword">record</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">record</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>               <span class="token comment">// OK</span>
<span class="token keyword">record</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token keyword">record</span><span class="token punctuation">.</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// OK</span>
<span class="token keyword">record</span><span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>               <span class="token comment">// OK</span>
<span class="token keyword">record</span><span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token keyword">record</span><span class="token punctuation">.</span>d <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// throws a NullPointerException</span>

</code></pre></div><p>Our <code>MyRecord</code> class<sup>1</sup> relies on default initialization to initialize the values on its fields.  Thus, when we <code>new</code> a record, the <code>a</code> and <code>b</code> fields will be set to zero, and the <code>c</code> and <code>d</code> fields will be set to <code>null</code>.</p> <p>When we try to use the default initialized fields, we see that the <code>int</code> fields works all of the time, but the <code>Integer</code> fields work in some cases and not others.  Specifically, in the case that fails (with <code>d</code>), what happens is that the expression on the right-hand side attempts to unbox a <code>null</code> reference, and that is what causes the <code>NullPointerException</code> to be thrown.</p> <p>There are a couple of ways to look at this:</p> <li>
If the fields `c` and `d` need to be primitive wrappers, then either we should not be relying on default initialization, or we should be testing for `null`.  For former is the correct approach **unless** there is a definite meaning for the fields in the `null` state.
</li> <li>
If the fields don't need to be primitive wrappers, then it is a mistake to make them primitive wrappers.  In addition to this problem, the primitive wrappers have extra overheads relative to primitive types.
</li> <p>The lesson here is to not use primitive wrapper types unless you really need to.</p> <p><sup>1 - This class is not an example of good coding practice.  For instance, a well-designed class would not have public fields.  However, that is not the point of this example.</sup></p> <h2 id="pitfall-using-yoda-notation-to-avoid-nullpointerexception"><a href="#pitfall-using-yoda-notation-to-avoid-nullpointerexception" class="header-anchor">#</a> Pitfall - Using &quot;Yoda notation&quot; to avoid NullPointerException</h2> <p>A lot of example code posted on StackOverflow includes snippets like this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>someString<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This does &quot;prevent&quot; or &quot;avoid&quot; a possible <code>NullPointerException</code> in the case that <code>someString</code> is <code>null</code>.  Furthermore, it is arguable that</p> <div class="language- extra-class"><pre class="language-text"><code>
   &quot;A&quot;.equals(someString)

</code></pre></div><p>is better than:</p> <div class="language- extra-class"><pre class="language-text"><code>
   someString != null &amp;&amp; someString.equals(&quot;A&quot;)

</code></pre></div><p>(It is more concise, and in some circumstances it might be more efficient.  However, as we argue below, conciseness could be a negative.)</p> <p>However, the real pitfall is using the Yoda test <strong>to avoid <code>NullPointerExceptions</code></strong> as a matter of habit.</p> <p>When you write <code>&quot;A&quot;.equals(someString)</code> you are actually &quot;making good&quot; the case where <code>someString</code> happens to be <code>null</code>.  But as another example (<a href="http://stackoverflow.com/documentation/java/5680/java-pitfalls-nulls-and-nullpointerexception/20151/pitfall-making-good-unexpected-nulls" target="_blank" rel="noopener noreferrer">Pitfall - &quot;Making good&quot; unexpected nulls<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ) explains, &quot;making good&quot; <code>null</code> values can be harmful for a variety of reasons.</p> <p>This means that Yoda conditions are not &quot;best practice&quot;<sup>1</sup>.  Unless the <code>null</code> is expected, it is better to let the <code>NullPointerException</code> happen so that you can get a unit test failure (or a bug report).  That allows you to find and fix the bug that caused the unexpected / unwanted <code>null</code> to appear.</p> <p>Yoda conditions should only be used in cases where the <code>null</code> is <strong>expected</strong> because the object you are testing has come from an API that is <strong>documented</strong> as returning a <code>null</code>.  And arguably, it could be better to use one of the less pretty ways expressing the test because that helps to highlight the <code>null</code> test to someone who is reviewing your code.</p> <p><sup>1 - According to <a href="https://en.wikipedia.org/wiki/Best_coding_practices" target="_blank" rel="noopener noreferrer">Wikipedia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: <strong>&quot;Best coding practices are a set of informal rules that the software development community has learned over time which can help improve the quality of software.&quot;</strong>.  Using Yoda notation does not achieve this.  In a lot of situations, it makes the code worse.</sup></p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>The value <code>null</code> is the default value for an uninitialized value of a field whose type is a reference type.</p> <p><code>NullPointerException</code> (or NPE) is the exception that is thrown when you attempt to perform an inappropriate operation on the <code>null</code> object reference.  Such operations include:</p> <ul><li>calling an instance method on a <code>null</code> target object,</li> <li>accessing a field of a <code>null</code> target object,</li> <li>attempting to index a <code>null</code> array object or access its length,</li> <li>using a <code>null</code> object reference as the mutex in a <code>synchronized</code> block,</li> <li>casting a <code>null</code> object reference,</li> <li>unboxing a <code>null</code> object reference, and</li> <li>throwing a <code>null</code> object reference.</li></ul> <p>The most common root causes for NPEs:</p> <ul><li>forgetting to initialize a field with a reference type,</li> <li>forgetting to initialize elements of an array of a reference type, or</li> <li>not testing the results of certain API methods that are <strong>specified</strong> as returning <code>null</code> in certain circumstances.</li></ul> <p>Examples of commonly used methods that return <code>null</code> include:</p> <ul><li>The <code>get(key)</code> method in the <code>Map</code> API will return a <code>null</code> if you call it with a key that doesn't have a mapping.</li> <li>The <code>getResource(path)</code> and <code>getResourceAsStream(path)</code> methods in the <code>ClassLoader</code> and <code>Class</code> APIs will return <code>null</code> if the resource cannot be found.</li> <li>The <code>get()</code> method in the <code>Reference</code> API will return <code>null</code> if the garbage collector has cleared the reference.</li> <li>Various <code>getXxxx</code> methods in the Java EE servlet APIs will return <code>null</code> if you attempt fetch a non-existent request parameter, session or session attribute and so on.</li></ul> <p>There are strategies for avoiding unwanted NPEs, such as explicitly testing for <code>null</code> or using &quot;Yoda Notation&quot;, but these strategies often have the undesirable result of <strong>hiding</strong> problems in your code that really ought to be fixed.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/java/java-pitfalls-nulls-and-nullpointerexception.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/java-pitfalls-threads-and-concurrency.html" class="prev">
        Java Pitfalls - Threads and Concurrency
      </a></span> <span class="next"><a href="/java/java-pitfalls-performance-issues.html">
        Java Pitfalls - Performance Issues
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1598.4fe80e23.js" defer></script>
  </body>
</html>
