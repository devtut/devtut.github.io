<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java - Exceptions and exception handling</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Catching an exception with try-catch, The try-with-resources statement, Custom Exceptions, Handling InterruptedException, Return statements in try catch block, The Java Exception Hierarchy - Unchecked and Checked Exceptions, Introduction, Creating and reading stacktraces, Throwing an exception, Advanced features of Exceptions, The try-finally and try-catch-finally statements, The 'throws' clause in a method declaration">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Java - Exceptions and exception handling">
    <meta property="og:description" content="Catching an exception with try-catch, The try-with-resources statement, Custom Exceptions, Handling InterruptedException, Return statements in try catch block, The Java Exception Hierarchy - Unchecked and Checked Exceptions, Introduction, Creating and reading stacktraces, Throwing an exception, Advanced features of Exceptions, The try-finally and try-catch-finally statements, The 'throws' clause in a method declaration">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/java/exceptions-and-exception-handling.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Java - Exceptions and exception handling">
    <meta name="twitter:description" content="Catching an exception with try-catch, The try-with-resources statement, Custom Exceptions, Handling InterruptedException, Return statements in try catch block, The Java Exception Hierarchy - Unchecked and Checked Exceptions, Introduction, Creating and reading stacktraces, Throwing an exception, Advanced features of Exceptions, The try-finally and try-catch-finally statements, The 'throws' clause in a method declaration">
    <meta name="twitter:url" content="/java/exceptions-and-exception-handling.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1565.3fa1c150.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/java/java-editions-versions-releases-and-distributions.html" class="sidebar-link">Java Editions, Versions, Releases and Distributions</a></li><li><a href="/java/installing-java-standard-edition.html" class="sidebar-link">Installing Java (Standard Edition)</a></li><li><a href="/java/getting-started-with-java-language.html" class="sidebar-link">Getting started with Java Language</a></li><li><a href="/java/type-conversion.html" class="sidebar-link">Type Conversion</a></li><li><a href="/java/getters-and-setters.html" class="sidebar-link">Getters and Setters</a></li><li><a href="/java/reference-data-types.html" class="sidebar-link">Reference Data Types</a></li><li><a href="/java/java-compiler-javac.html" class="sidebar-link">Java Compiler - 'javac'</a></li><li><a href="/java/documenting-java-code.html" class="sidebar-link">Documenting Java Code</a></li><li><a href="/java/command-line-argument-processing.html" class="sidebar-link">Command line Argument Processing</a></li><li><a href="/java/the-java-command-java-and-javaw.html" class="sidebar-link">The Java Command - 'java' and 'javaw'</a></li><li><a href="/java/literals.html" class="sidebar-link">Literals</a></li><li><a href="/java/primitive-data-types.html" class="sidebar-link">Primitive Data Types</a></li><li><a href="/java/strings.html" class="sidebar-link">Strings</a></li><li><a href="/java/stringbuffer.html" class="sidebar-link">StringBuffer</a></li><li><a href="/java/stringbuilder.html" class="sidebar-link">StringBuilder</a></li><li><a href="/java/string-tokenizer.html" class="sidebar-link">String Tokenizer</a></li><li><a href="/java/splitting-a-string-into-fixed-length-parts.html" class="sidebar-link">Splitting a string into fixed length parts</a></li><li><a href="/java/date-class.html" class="sidebar-link">Date Class</a></li><li><a href="/java/dates-and-time-java-time.html" class="sidebar-link">Dates and Time (java.time.*)</a></li><li><a href="/java/localtime.html" class="sidebar-link">LocalTime</a></li><li><a href="/java/bigdecimal.html" class="sidebar-link">BigDecimal</a></li><li><a href="/java/biginteger.html" class="sidebar-link">BigInteger</a></li><li><a href="/java/numberformat.html" class="sidebar-link">NumberFormat</a></li><li><a href="/java/bit-manipulation.html" class="sidebar-link">Bit Manipulation</a></li><li><a href="/java/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/java/collections.html" class="sidebar-link">Collections</a></li><li><a href="/java/lists.html" class="sidebar-link">Lists</a></li><li><a href="/java/sets.html" class="sidebar-link">Sets</a></li><li><a href="/java/list-vs-set.html" class="sidebar-link">List vs SET</a></li><li><a href="/java/maps.html" class="sidebar-link">Maps</a></li><li><a href="/java/linkedhashmap.html" class="sidebar-link">LinkedHashMap</a></li><li><a href="/java/weakhashmap.html" class="sidebar-link">WeakHashMap</a></li><li><a href="/java/sortedmap.html" class="sidebar-link">SortedMap</a></li><li><a href="/java/treemap-and-treeset.html" class="sidebar-link">TreeMap and TreeSet</a></li><li><a href="/java/queues-and-deques.html" class="sidebar-link">Queues and Deques</a></li><li><a href="/java/dequeue-interface.html" class="sidebar-link">Dequeue Interface</a></li><li><a href="/java/enums.html" class="sidebar-link">Enums</a></li><li><a href="/java/enum-map.html" class="sidebar-link">Enum Map</a></li><li><a href="/java/enumset-class.html" class="sidebar-link">EnumSet class</a></li><li><a href="/java/enum-starting-with-number.html" class="sidebar-link">Enum starting with number</a></li><li><a href="/java/hashtable.html" class="sidebar-link">Hashtable</a></li><li><a href="/java/operators.html" class="sidebar-link">Operators</a></li><li><a href="/java/constructors.html" class="sidebar-link">Constructors</a></li><li><a href="/java/object-class-methods-and-constructor.html" class="sidebar-link">Object Class Methods and Constructor</a></li><li><a href="/java/annotations.html" class="sidebar-link">Annotations</a></li><li><a href="/java/immutable-class.html" class="sidebar-link">Immutable Class</a></li><li><a href="/java/immutable-objects.html" class="sidebar-link">Immutable Objects</a></li><li><a href="/java/visibility-controlling-access-to-members-of-a-class.html" class="sidebar-link">Visibility (controlling access to members of a class)</a></li><li><a href="/java/generics.html" class="sidebar-link">Generics</a></li><li><a href="/java/classes-and-objects.html" class="sidebar-link">Classes and Objects</a></li><li><a href="/java/local-inner-class.html" class="sidebar-link">Local Inner Class</a></li><li><a href="/java/nested-and-inner-classes.html" class="sidebar-link">Nested and Inner Classes</a></li><li><a href="/java/the-java-util-objects-class.html" class="sidebar-link">The java.util.Objects Class</a></li><li><a href="/java/default-methods.html" class="sidebar-link">Default Methods</a></li><li><a href="/java/packages.html" class="sidebar-link">Packages</a></li><li><a href="/java/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/java/reference-types.html" class="sidebar-link">Reference Types</a></li><li><a href="/java/console-i-o.html" class="sidebar-link">Console I/O</a></li><li><a href="/java/streams.html" class="sidebar-link">Streams</a></li><li><a href="/java/inputstreams-and-outputstreams.html" class="sidebar-link">InputStreams and OutputStreams</a></li><li><a href="/java/readers-and-writers.html" class="sidebar-link">Readers and Writers</a></li><li><a href="/java/preferences.html" class="sidebar-link">Preferences</a></li><li><a href="/java/collection-factory-methods.html" class="sidebar-link">Collection Factory Methods</a></li><li><a href="/java/alternative-collections.html" class="sidebar-link">Alternative Collections</a></li><li><a href="/java/concurrent-collections.html" class="sidebar-link">Concurrent Collections</a></li><li><a href="/java/choosing-collections.html" class="sidebar-link">Choosing Collections</a></li><li><a href="/java/super-keyword.html" class="sidebar-link">super keyword</a></li><li><a href="/java/serialization.html" class="sidebar-link">Serialization</a></li><li><a href="/java/optional.html" class="sidebar-link">Optional</a></li><li><a href="/java/object-references.html" class="sidebar-link">Object References</a></li><li><a href="/java/exceptions-and-exception-handling.html" aria-current="page" class="active sidebar-link">Exceptions and exception handling</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#catching-an-exception-with-try-catch" class="sidebar-link">Catching an exception with try-catch</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#the-try-with-resources-statement" class="sidebar-link">The try-with-resources statement</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#custom-exceptions" class="sidebar-link">Custom Exceptions</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#handling-interruptedexception" class="sidebar-link">Handling InterruptedException</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#return-statements-in-try-catch-block" class="sidebar-link">Return statements in try catch block</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#the-java-exception-hierarchy-unchecked-and-checked-exceptions" class="sidebar-link">The Java Exception Hierarchy - Unchecked and Checked Exceptions</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#creating-and-reading-stacktraces" class="sidebar-link">Creating and reading stacktraces</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#throwing-an-exception" class="sidebar-link">Throwing an exception</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#advanced-features-of-exceptions" class="sidebar-link">Advanced features of Exceptions</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#the-try-finally-and-try-catch-finally-statements" class="sidebar-link">The try-finally and try-catch-finally statements</a></li><li class="sidebar-sub-header"><a href="/java/exceptions-and-exception-handling.html#the-throws-clause-in-a-method-declaration" class="sidebar-link">The 'throws' clause in a method declaration</a></li></ul></li><li><a href="/java/calendar-and-its-subclasses.html" class="sidebar-link">Calendar and its Subclasses</a></li><li><a href="/java/using-the-static-keyword.html" class="sidebar-link">Using the static keyword</a></li><li><a href="/java/properties-class.html" class="sidebar-link">Properties Class</a></li><li><a href="/java/lambda-expressions.html" class="sidebar-link">Lambda Expressions</a></li><li><a href="/java/basic-control-structures.html" class="sidebar-link">Basic Control Structures</a></li><li><a href="/java/bufferedwriter.html" class="sidebar-link">BufferedWriter</a></li><li><a href="/java/new-file-i-o.html" class="sidebar-link">New File I/O</a></li><li><a href="/java/file-i-o.html" class="sidebar-link">File I/O</a></li><li><a href="/java/scanner.html" class="sidebar-link">Scanner</a></li><li><a href="/java/interfaces.html" class="sidebar-link">Interfaces</a></li><li><a href="/java/regular-expressions.html" class="sidebar-link">Regular Expressions</a></li><li><a href="/java/comparable-and-comparator.html" class="sidebar-link">Comparable and Comparator</a></li><li><a href="/java/java-floating-point-operations.html" class="sidebar-link">Java Floating Point Operations</a></li><li><a href="/java/currency-and-money.html" class="sidebar-link">Currency and Money</a></li><li><a href="/java/object-cloning.html" class="sidebar-link">Object Cloning</a></li><li><a href="/java/recursion.html" class="sidebar-link">Recursion</a></li><li><a href="/java/converting-to-and-from-strings.html" class="sidebar-link">Converting to and from Strings</a></li><li><a href="/java/random-number-generation.html" class="sidebar-link">Random Number Generation</a></li><li><a href="/java/singletons.html" class="sidebar-link">Singletons</a></li><li><a href="/java/autoboxing.html" class="sidebar-link">Autoboxing</a></li><li><a href="/java/2d-graphics-in-java.html" class="sidebar-link">2D Graphics in Java</a></li><li><a href="/java/jaxb.html" class="sidebar-link">JAXB</a></li><li><a href="/java/class-java-reflection.html" class="sidebar-link">Class - Java Reflection</a></li><li><a href="/java/networking.html" class="sidebar-link">Networking</a></li><li><a href="/java/nio-networking.html" class="sidebar-link">NIO - Networking</a></li><li><a href="/java/httpurlconnection.html" class="sidebar-link">HttpURLConnection</a></li><li><a href="/java/jax-ws.html" class="sidebar-link">JAX-WS</a></li><li><a href="/java/nashorn-javascript-engine.html" class="sidebar-link">Nashorn JavaScript engine</a></li><li><a href="/java/java-native-interface.html" class="sidebar-link">Java Native Interface</a></li><li><a href="/java/functional-interfaces.html" class="sidebar-link">Functional Interfaces</a></li><li><a href="/java/fluent-interface.html" class="sidebar-link">Fluent Interface</a></li><li><a href="/java/remote-method-invocation-rmi.html" class="sidebar-link">Remote Method Invocation (RMI)</a></li><li><a href="/java/iterator-and-iterable.html" class="sidebar-link">Iterator and Iterable</a></li><li><a href="/java/reflection-api.html" class="sidebar-link">Reflection API</a></li><li><a href="/java/bytebuffer.html" class="sidebar-link">ByteBuffer</a></li><li><a href="/java/applets.html" class="sidebar-link">Applets</a></li><li><a href="/java/expressions.html" class="sidebar-link">Expressions</a></li><li><a href="/java/json-in-java.html" class="sidebar-link">JSON in Java</a></li><li><a href="/java/xml-parsing-using-the-jaxp-apis.html" class="sidebar-link">XML Parsing using the JAXP APIs</a></li><li><a href="/java/xml-xpath-evaluation.html" class="sidebar-link">XML XPath Evaluation</a></li><li><a href="/java/xom-xml-object-model.html" class="sidebar-link">XOM - XML Object Model</a></li><li><a href="/java/polymorphism.html" class="sidebar-link">Polymorphism</a></li><li><a href="/java/encapsulation.html" class="sidebar-link">Encapsulation</a></li><li><a href="/java/java-agents.html" class="sidebar-link">Java Agents</a></li><li><a href="/java/varargs-variable-argument.html" class="sidebar-link">Varargs  (Variable Argument)</a></li><li><a href="/java/logging-java-util-logging.html" class="sidebar-link">Logging (java.util.logging)</a></li><li><a href="/java/log4j-log4j2.html" class="sidebar-link">log4j / log4j2</a></li><li><a href="/java/oracle-official-code-standard.html" class="sidebar-link">Oracle Official Code Standard</a></li><li><a href="/java/character-encoding.html" class="sidebar-link">Character encoding</a></li><li><a href="/java/apache-commons-lang.html" class="sidebar-link">Apache Commons Lang</a></li><li><a href="/java/localization-and-internationalization.html" class="sidebar-link">Localization and Internationalization</a></li><li><a href="/java/parallel-programming-with-fork-join-framework.html" class="sidebar-link">Parallel programming with Fork/Join framework</a></li><li><a href="/java/non-access-modifiers.html" class="sidebar-link">Non-Access Modifiers</a></li><li><a href="/java/process.html" class="sidebar-link">Process</a></li><li><a href="/java/java-native-access.html" class="sidebar-link">Java Native Access</a></li><li><a href="/java/modules.html" class="sidebar-link">Modules</a></li><li><a href="/java/concurrent-programming-threads.html" class="sidebar-link">Concurrent Programming (Threads)</a></li><li><a href="/java/executor-executorservice-and-thread-pools.html" class="sidebar-link">Executor, ExecutorService and Thread pools</a></li><li><a href="/java/threadlocal.html" class="sidebar-link">ThreadLocal</a></li><li><a href="/java/using-threadpoolexecutor-in-multithreaded-applications.html" class="sidebar-link">Using ThreadPoolExecutor in MultiThreaded applications.</a></li><li><a href="/java/common-java-pitfalls.html" class="sidebar-link">Common Java Pitfalls</a></li><li><a href="/java/java-pitfalls-exception-usage.html" class="sidebar-link">Java Pitfalls - Exception usage</a></li><li><a href="/java/java-pitfalls-language-syntax.html" class="sidebar-link">Java Pitfalls - Language syntax</a></li><li><a href="/java/java-pitfalls-threads-and-concurrency.html" class="sidebar-link">Java Pitfalls - Threads and Concurrency</a></li><li><a href="/java/java-pitfalls-nulls-and-nullpointerexception.html" class="sidebar-link">Java Pitfalls - Nulls and NullPointerException</a></li><li><a href="/java/java-pitfalls-performance-issues.html" class="sidebar-link">Java Pitfalls - Performance Issues</a></li><li><a href="/java/serviceloader.html" class="sidebar-link">ServiceLoader</a></li><li><a href="/java/classloaders.html" class="sidebar-link">Classloaders</a></li><li><a href="/java/creating-images-programmatically.html" class="sidebar-link">Creating Images Programmatically</a></li><li><a href="/java/atomic-types.html" class="sidebar-link">Atomic Types</a></li><li><a href="/java/rsa-encryption.html" class="sidebar-link">RSA Encryption</a></li><li><a href="/java/secure-objects.html" class="sidebar-link">Secure objects</a></li><li><a href="/java/security-cryptography.html" class="sidebar-link">Security &amp; Cryptography</a></li><li><a href="/java/securitymanager.html" class="sidebar-link">SecurityManager</a></li><li><a href="/java/jndi.html" class="sidebar-link">JNDI</a></li><li><a href="/java/sun-misc-unsafe.html" class="sidebar-link">sun.misc.Unsafe</a></li><li><a href="/java/java-memory-model.html" class="sidebar-link">Java Memory Model</a></li><li><a href="/java/java-deployment.html" class="sidebar-link">Java deployment</a></li><li><a href="/java/java-plugin-system-implementations.html" class="sidebar-link">Java plugin system implementations</a></li><li><a href="/java/javabean.html" class="sidebar-link">JavaBean</a></li><li><a href="/java/java-se-7-features.html" class="sidebar-link">Java SE 7 Features</a></li><li><a href="/java/java-se-8-features.html" class="sidebar-link">Java SE 8 Features</a></li><li><a href="/java/dynamic-method-dispatch.html" class="sidebar-link">Dynamic Method Dispatch</a></li><li><a href="/java/generating-java-code.html" class="sidebar-link">Generating Java Code</a></li><li><a href="/java/jshell.html" class="sidebar-link">JShell</a></li><li><a href="/java/stack-walking-api.html" class="sidebar-link">Stack-Walking API</a></li><li><a href="/java/sockets.html" class="sidebar-link">Sockets</a></li><li><a href="/java/java-sockets.html" class="sidebar-link">Java Sockets</a></li><li><a href="/java/ftp-file-transfer-protocol.html" class="sidebar-link">FTP (File Transfer Protocol)</a></li><li><a href="/java/using-other-scripting-languages-in-java.html" class="sidebar-link">Using Other Scripting Languages in Java</a></li><li><a href="/java/c-comparison.html" class="sidebar-link">C++ Comparison</a></li><li><a href="/java/audio.html" class="sidebar-link">Audio</a></li><li><a href="/java/java-print-service.html" class="sidebar-link">Java Print Service</a></li><li><a href="/java/completablefuture.html" class="sidebar-link">CompletableFuture</a></li><li><a href="/java/runtime-commands.html" class="sidebar-link">Runtime Commands</a></li><li><a href="/java/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/java/asserting.html" class="sidebar-link">Asserting</a></li><li><a href="/java/multi-release-jar-files.html" class="sidebar-link">Multi-Release JAR Files</a></li><li><a href="/java/just-in-time-jit-compiler.html" class="sidebar-link">Just in Time (JIT) compiler</a></li><li><a href="/java/bytecode-modification.html" class="sidebar-link">Bytecode Modification</a></li><li><a href="/java/disassembling-and-decompiling.html" class="sidebar-link">Disassembling and Decompiling</a></li><li><a href="/java/jmx.html" class="sidebar-link">JMX</a></li><li><a href="/java/java-virtual-machine-jvm.html" class="sidebar-link">Java Virtual Machine (JVM)</a></li><li><a href="/java/xjc.html" class="sidebar-link">XJC</a></li><li><a href="/java/jvm-flags.html" class="sidebar-link">JVM Flags</a></li><li><a href="/java/jvm-tool-interface.html" class="sidebar-link">JVM Tool Interface</a></li><li><a href="/java/java-memory-management.html" class="sidebar-link">Java Memory Management</a></li><li><a href="/java/java-performance-tuning.html" class="sidebar-link">Java Performance Tuning</a></li><li><a href="/java/benchmarks.html" class="sidebar-link">Benchmarks</a></li><li><a href="/java/fileupload-to-aws.html" class="sidebar-link">FileUpload to AWS</a></li><li><a href="/java/appdynamics-and-tibco-businessworks-instrumentation-for-easy-integration.html" class="sidebar-link">AppDynamics and TIBCO BusinessWorks Instrumentation for Easy Integration</a></li><li><a href="/java/the-classpath.html" class="sidebar-link">The Classpath</a></li><li><a href="/java/resources-on-classpath.html" class="sidebar-link">Resources (on classpath)</a></li><li><a href="/java/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="exceptions-and-exception-handling"><a href="#exceptions-and-exception-handling" class="header-anchor">#</a> Exceptions and exception handling</h1> <h2 id="catching-an-exception-with-try-catch"><a href="#catching-an-exception-with-try-catch" class="header-anchor">#</a> Catching an exception with try-catch</h2> <p>An exception can be caught and handled using the <code>try...catch</code> statement.  (In fact <code>try</code> statements take other forms, as described in other examples about <a href="http://stackoverflow.com/documentation/java/89/exceptions-and-exception-handling/25177/" target="_blank" rel="noopener noreferrer"><code>try...catch...finally</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="http://stackoverflow.com/documentation/java/89/exceptions-and-exception-handling/1581/" target="_blank" rel="noopener noreferrer"><code>try-with-resources</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.)</p> <h3 id="try-catch-with-one-catch-block"><a href="#try-catch-with-one-catch-block" class="header-anchor">#</a> Try-catch with one catch block</h3> <p>The most simple form looks like this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SomeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// next statement</span>

</code></pre></div><p>The behavior of a simple <code>try...catch</code> is as follows:</p> <ul><li>The statements in the <code>try</code> block are executed.</li> <li>If no exception is thrown by the statements in the <code>try</code> block, then control passes to the next statement after the <code>try...catch</code>.
</li><li>If an exception is thrown within the <code>try</code> block.
<ul></ul></li> <li>The exception object is tested to see if it is an instance of <code>SomeException</code> or a subtype.
</li><li>If it is, then the <code>catch</code> block will <strong>catch</strong> the exception:
<ul></ul></li> <li>The variable <code>e</code> is bound to the exception object.</li> <li>The code within the <code>catch</code> block is executed.</li> <li>If that code throws an exception, then the newly thrown exception is propagated in place of the original one.</li> <li>Otherwise, control passes to the next statement after the <code>try...catch</code>.</li></ul> <h3 id="try-catch-with-multiple-catches"><a href="#try-catch-with-multiple-catches" class="header-anchor">#</a> Try-catch with multiple catches</h3> <p>A <code>try...catch</code> can also have multiple <code>catch</code> blocks.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SomeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleOneWay</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SomeOtherException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleAnotherWay</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// next statement</span>

</code></pre></div><p>If there are multiple <code>catch</code> blocks, they are tried one at a time starting with the first one, until a match is found for the exception.  The corresponding handler is executed (as above), and then control is passed to the next statement after the <code>try...catch</code> statement.  The <code>catch</code> blocks after the one that matches are always skipped, <strong>even if the handler code throws an exception</strong>.</p> <p>The &quot;top down&quot; matching strategy has consequences for cases where the exceptions in the <code>catch</code> blocks are not disjoint.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Exception&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RuntimeException&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This code snippet will output &quot;Exception&quot; rather than &quot;RuntimeException&quot;.  Since <code>RuntimeException</code> is a subtype of <code>Exception</code>, the first (more general) <code>catch</code> will be matched.  The second (more specific) <code>catch</code> will never be executed.</p> <p>The lesson to learn from this is that the most specific <code>catch</code> blocks (in terms of the exception types) should appear first, and the most general ones should be last.  (Some Java compilers will warn you if a <code>catch</code> can never be executed, but this is not a compilation error.)</p> <h3 id="multi-exception-catch-blocks"><a href="#multi-exception-catch-blocks" class="header-anchor">#</a> Multi-exception catch blocks</h3> <p>Starting with Java SE 7, a single <code>catch</code> block can handle a list of unrelated exceptions. The exception type are listed, separated with a vertical bar (<code>|</code>) symbol.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SomeException</span> <span class="token operator">|</span> <span class="token class-name">SomeOtherException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleSomeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

</code></pre></div><p>The behavior of a multi-exception catch is a simple extension for the single-exception case.  The <code>catch</code> matches if the thrown exception matches (at least) one of the listed exceptions.</p> <p>There is some additional subtlety in the specification.  The type of <code>e</code> is a synthetic <strong>union</strong> of the exception types in the list.  When the value of <code>e</code> is used, its static type is the least common supertype of the type union.  However, if <code>e</code> is rethrown within the <code>catch</code> block, the exception types that are thrown are the types in the union.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">report</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre></div><p>In the above, <code>IOException</code> and <code>SQLException</code> are checked exceptions whose least common supertype is <code>Exception</code>.  This means that the <code>report</code> method must match <code>report(Exception)</code>.  However, the compiler knows that the <code>throw</code> can throw only an <code>IOException</code> or an <code>SQLException</code>.  Thus, <code>method</code> can be declared as <code>throws IOException, SQLException</code> rather than <code>throws Exception</code>.  (Which is a good thing: see <a href="http://stackoverflow.com/documentation/java/5381/java-pitfalls-exception-usage/18023/" target="_blank" rel="noopener noreferrer">Pitfall - Throwing Throwable, Exception, Error or RuntimeException<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.)</p> <h2 id="the-try-with-resources-statement"><a href="#the-try-with-resources-statement" class="header-anchor">#</a> The try-with-resources statement</h2> <p>As the <a href="http://stackoverflow.com/documentation/java/89/exceptions-and-exception-handling/1581" target="_blank" rel="noopener noreferrer">try-catch-final statement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> example illustrates, resource cleanup using a <code>finally</code> clause requires a significant amount of &quot;boiler-plate&quot; code to implement the edge-cases correctly.  Java 7 provides a much simpler way to deal with this problem in the form of the <strong>try-with-resources</strong> statement.</p> <h3 id="what-is-a-resource"><a href="#what-is-a-resource" class="header-anchor">#</a> What is a resource?</h3> <p>Java 7 introduced the  <code>java.lang.AutoCloseable</code> interface to allow classes to be managed using the <strong>try-with-resources</strong> statement.  Instances of classes that implement <code>AutoCloseable</code> are referred to as <strong>resources</strong>.  These typically need to be disposed of in a timely fashion rather than relying on the garbage collector to dispose of them.</p> <p>The <code>AutoCloseable</code> interface defines a single method:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>

</code></pre></div><p>A <code>close()</code> method should dispose of the resource in an appropriate fashion.  The specification states that it should be safe to call the method on a resource that has already been disposed of.  In addition, classes that implement <code>Autocloseable</code> are <strong>strongly encouraged</strong> to declare the <code>close()</code> method to throw a more specific exception than <code>Exception</code>, or no exception at all.</p> <p>A wide range of standard Java classes and interfaces implement <code>AutoCloseable</code>.  These include:</p> <ul><li><code>InputStream</code>, <code>OutputStream</code> and their subclasses</li> <li><code>Reader</code>, <code>Writer</code> and their subclasses</li> <li><code>Socket</code> and <code>ServerSocket</code> and their subclasses</li> <li><code>Channel</code> and its subclasses, and</li> <li>the JDBC interfaces <code>Connection</code>, <code>Statement</code> and <code>ResultSet</code> and their subclasses.</li></ul> <p>Application and third party classes may do this as well.</p> <h3 id="the-basic-try-with-resource-statement"><a href="#the-basic-try-with-resource-statement" class="header-anchor">#</a> The basic try-with-resource statement</h3> <p>The syntax of a <strong>try-with-resources</strong> is based on classical <strong>try-catch</strong>, <strong>try-finally</strong> and <strong>try-catch-finally</strong> forms.  Here is an example of a &quot;basic&quot; form; i.e. the form without a <code>catch</code> or <code>finally</code>.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">PrintStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The resources to be manage are declared as variables in the <code>(...)</code> section after the <code>try</code> clause.  In the example above, we declare a resource variable <code>stream</code> and initialize it to a newly created <code>PrintStream</code>.</p> <p>Once the resource variables have been initialized, the <code>try</code> block is executed.  When that completes, <code>stream.close()</code> will be called automatically to ensure that the resource does not leak.  Note that the <code>close()</code> call happens no matter how the block completes.</p> <h3 id="the-enhanced-try-with-resource-statements"><a href="#the-enhanced-try-with-resource-statements" class="header-anchor">#</a> The enhanced try-with-resource statements</h3> <p>The <strong>try-with-resources</strong> statement can be enhanced with <code>catch</code> and <code>finally</code> blocks, as with the pre-Java 7 <strong>try-catch-finally</strong> syntax.  The following code snippet adds a <code>catch</code> block to our previous one to deal with the <code>FileNotFoundException</code> that the <code>PrintStream</code> constructor can throw:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">PrintStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot open the file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;All done&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>If either the resource initialization or the try block throws the exception, then the <code>catch</code> block will be executed.  The <code>finally</code> block will always be executed, as with a conventional <strong>try-catch-finally</strong> statement.</p> <p>There are a couple of things to note though:</p> <ul><li>The resource variable is <strong>out of scope</strong> in the <code>catch</code> and <code>finally</code> blocks.</li> <li>The resource cleanup will happen before the statement tries to match the <code>catch</code> block.</li> <li>If the automatic resource cleanup threw an exception, then that <strong>could</strong> be caught in one of the <code>catch</code> blocks.</li></ul> <h3 id="managing-multiple-resources"><a href="#managing-multiple-resources" class="header-anchor">#</a> Managing multiple resources</h3> <p>The code snippets above show a single resource being managed.  In fact, <strong>try-with-resources</strong> can manage multiple resources in one statement.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file1<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Copy 'is' to 'os'</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This behaves as you would expect.  Both <code>is</code> and <code>os</code> are closed automatically at the end of the <code>try</code> block.  There are a couple of points to note:</p> <ul><li>The initializations occur in the code order, and later resource variable initializers can use of the values of the earlier ones.</li> <li>All resource variables that were successfully initialized will be cleaned up.</li> <li>Resource variables are cleaned up in <strong>reverse order</strong> of their declarations.</li></ul> <p>Thus, in the above example, <code>is</code> is initialized before <code>os</code> and cleaned up after it, and <code>is</code> will be cleaned up if there is an exception while initializing <code>os</code>.</p> <h3 id="equivalence-of-try-with-resource-and-classical-try-catch-finally"><a href="#equivalence-of-try-with-resource-and-classical-try-catch-finally" class="header-anchor">#</a> Equivalence of try-with-resource and classical try-catch-finally</h3> <p>The Java Language Specification specifies the behavior of <strong>try-with-resource</strong> forms in terms of the classical <strong>try-catch-finally</strong> statement.  (Please refer to the JLS for the full details.)</p> <p>For example, this basic <strong>try-with-resource</strong> :</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">PrintStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>is defined to be equivalent to this <strong>try-catch-finally</strong>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Note that the constructor is not part of the try-catch statement</span>
<span class="token class-name">PrintStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This variable is used to keep track of the primary exception thrown</span>
<span class="token comment">// in the try statement. If an exception is thrown in the try block,</span>
<span class="token comment">// any exception thrown by AutoCloseable.close() will be suppressed.</span>
<span class="token class-name">Throwable</span> primaryException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">// The actual try block</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If an exception is thrown, remember it for the finally block</span>
    primaryException <span class="token operator">=</span> t<span class="token punctuation">;</span>
    <span class="token keyword">throw</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>primaryException <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If no exception was thrown so far, exceptions thrown in close() will</span>
        <span class="token comment">// not be caught and therefore be passed on to the enclosing code.</span>
        stream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// If an exception has already been thrown, any exception thrown in</span>
        <span class="token comment">// close() will be suppressed as it is likely to be related to the</span>
        <span class="token comment">// previous exception. The suppressed exception can be retrieved</span>
        <span class="token comment">// using primaryException.getSuppressed().</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            stream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> suppressedException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            primaryException<span class="token punctuation">.</span><span class="token function">addSuppressed</span><span class="token punctuation">(</span>suppressedException<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>(The JLS specifies that the actual <code>t</code> and <code>primaryException</code> variables will be invisible to normal Java code.)</p> <p>The enhanced form of <strong>try-with-resources</strong> is specified as an equivalence with the basic form.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">PrintStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NullPointerException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Null filename&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;All done&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span>

</code></pre></div><p>is equivalent to:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">PrintStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NullPointerException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Null filename&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;All done&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span>    

</code></pre></div><h2 id="custom-exceptions"><a href="#custom-exceptions" class="header-anchor">#</a> Custom Exceptions</h2> <p>Under most circumstances, it is simpler from a code-design standpoint to use existing generic <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html" target="_blank" rel="noopener noreferrer"><code>Exception</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> classes when throwing exceptions. This is especially true if you only need the exception to carry a simple error message. In that case, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html" target="_blank" rel="noopener noreferrer">RuntimeException<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is usually preferred, since it is not a checked Exception. Other exception classes exist for common classes of errors:</p> <ul><li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html" target="_blank" rel="noopener noreferrer">UnsupportedOperationException<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - a certain operation is not supported</li> <li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html" target="_blank" rel="noopener noreferrer">IllegalArgumentException<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - an invalid parameter value was passed to a method</li> <li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html" target="_blank" rel="noopener noreferrer">IllegalStateException<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - your API has internally reached a condition that should never happen, or which occurs as a result of using your API in an invalid way</li></ul> <p>Cases where you <strong>do</strong> want to use a custom exception class include the following:</p> <ul><li>You are writing an API or library for use by others, and you want to allow users of your API to be able to specifically catch and handle exceptions from your API, and <strong>be able to differentiate those exceptions from other, more generic exceptions</strong>.</li> <li>You are throwing exceptions for a <strong>specific kind of error</strong> in one part of your program, which you want to catch and handle in another part of your program, and you want to be able to differentiate these errors from other, more generic errors.</li></ul> <p>You can create your own custom exceptions by extending <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html" target="_blank" rel="noopener noreferrer"><code>RuntimeException</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for an unchecked exception, or checked exception by extending any <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html" target="_blank" rel="noopener noreferrer"><code>Exception</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <strong>which is not also subclass of RuntimeException</strong>, because:</p> <blockquote></blockquote> <p>Subclasses of Exception that are not also subclasses of RuntimeException are checked exceptions</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringTooLongException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">{</span>
    <span class="token comment">// Exceptions can have methods and fields like other classes</span>
    <span class="token comment">// those can be useful to communicate information to pieces of code catching</span>
    <span class="token comment">// such an exception</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> maximumLength<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StringTooLongException</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token keyword">int</span> maximumLength<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;String exceeds maximum Length of %s: %s&quot;</span><span class="token punctuation">,</span> maximumLength<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>maximumLength <span class="token operator">=</span> maximumLength<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Those can be used just as predefined exceptions:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">validateString</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StringTooLongException</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>And the fields can be used where the exception is caught and handled:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">anotherMethod</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">validateString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">StringTooLongException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;The string '&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>value <span class="token operator">+</span> 
                <span class="token string">&quot;' was longer than the max of &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>maximumLength <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Keep in mind that, according to <a href="http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html" target="_blank" rel="noopener noreferrer">Oracle's Java Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <blockquote></blockquote> <p>[...] If a client can reasonably be expected to recover from an exception, make it a checked exception. If a client cannot do anything to recover from the exception, make it an unchecked exception.</p> <p>More:</p> <ul><li><a href="http://stackoverflow.com/a/14995225/3502776" target="_blank" rel="noopener noreferrer">Why does RuntimeException not require an explicit exception handling?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="handling-interruptedexception"><a href="#handling-interruptedexception" class="header-anchor">#</a> Handling InterruptedException</h2> <p><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html" target="_blank" rel="noopener noreferrer"><code>InterruptedException</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a confusing beast - it shows up in seemingly innocuous methods like <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep(long)" target="_blank" rel="noopener noreferrer"><code>Thread.sleep()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, but handling it incorrectly leads to hard-to-manage code that behaves poorly in concurrent environments.</p> <p>At its most basic, if an <code>InterruptedException</code> is caught it means someone, somewhere, called <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#interrupt--" target="_blank" rel="noopener noreferrer"><code>Thread.interrupt()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on the thread your code is currently running in. You might be inclined to say &quot;It's my code! I'll never interrupt it!&quot; and therefore do something like this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Bad. Don't do this.</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// disregard</span>
<span class="token punctuation">}</span>

</code></pre></div><p>But this is exactly the wrong way to handle an &quot;impossible&quot; event occurring. If you know your application will never encounter an <code>InterruptedException</code> you should treat such an event as a serious violation of your program's assumptions and exit as quickly as possible.</p> <p>The proper way to handle an &quot;impossible&quot; interrupt is like so:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// When nothing will interrupt your code</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This does two things; it first restores the interrupt status of the thread (as if the <code>InterruptedException</code> had not been thrown in the first place), and then it throws an <code>AssertionError</code> indicating the basic invariants of your application have been violated. If you know for certain that you'll never interrupt the thread this code runs in this is safe since the <code>catch</code> block should never be reached.</p> <p>Using Guava's <a href="https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/Uninterruptibles.html" target="_blank" rel="noopener noreferrer"><code>Uninterruptibles</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> class helps simplify this pattern; calling <a href="https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/util/concurrent/Uninterruptibles.html#sleepUninterruptibly(long,%20java.util.concurrent.TimeUnit)" target="_blank" rel="noopener noreferrer"><code>Uninterruptibles.sleepUninterruptibly()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> disregards the interrupted state of a thread until the sleep duration has expired (at which point it's restored for later calls to inspect and throw their own <code>InterruptedException</code>). If you know you'll never interrupt such code this safely avoids needing to wrap your sleep calls in a try-catch block.</p> <p>More often, however, you cannot guarantee that your thread will never be interrupted. In particular if you're writing code that will be executed by an <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html" target="_blank" rel="noopener noreferrer"><code>Executor</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or some other thread-management it's critical that your code responds promptly to interrupts, otherwise your application will stall or even deadlock.</p> <p>In such cases the best thing to do is generally to allow the <code>InterruptedException</code> to propagate up the call stack, adding a <code>throws InterruptedException</code> to each method in turn. This may seem kludgy but it's actually a desirable property - your method's signatures now indicates to callers that it will respond promptly to interrupts.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Let the caller determine how to handle the interrupt if you're unsure</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myLongRunningMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

</code></pre></div><p>In limited cases (e.g. while overriding a method that doesn't <code>throw</code> any checked exceptions) you can reset the interrupted status without raising an exception, expecting whatever code is executed next to handle the interrupt. This delays handling the interruption but doesn't suppress it entirely.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Suppresses the exception but resets the interrupted state letting later code</span>
<span class="token comment">// detect the interrupt and handle it properly.</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span> <span class="token comment">// your expectations are still broken at this point - try not to do more work.</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="return-statements-in-try-catch-block"><a href="#return-statements-in-try-catch-block" class="header-anchor">#</a> Return statements in try catch block</h2> <p>Although it's bad practice, it's possible to add multiple return statements in a exception handling block:</p> <div class="language- extra-class"><pre class="language-text"><code>
public static int returnTest(int number){
    try{
        if(number%2 == 0) throw new Exception(&quot;Exception thrown&quot;);
        else return x;
    }
    catch(Exception e){
        return 3;
    }
    finally{
        return 7;
    }
}

</code></pre></div><p>This method will always return 7 since the finally block associated with the try/catch block is executed before anything is returned. Now, as finally has <code>return 7;</code>, this value supersedes the try/catch return values.</p> <p>If the catch block returns a primitive value and that primitive value is subsequently changed in the finally block, the value returned in the catch block will be returned and the changes from the finally block will be ignored.</p> <p>The example below will print &quot;0&quot;, not &quot;1&quot;.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FinallyExample</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">returnTest</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">returnTest</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">int</span> returnNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
        
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Exception thrown&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> returnNumber<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> returnNumber<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            returnNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="the-java-exception-hierarchy-unchecked-and-checked-exceptions"><a href="#the-java-exception-hierarchy-unchecked-and-checked-exceptions" class="header-anchor">#</a> The Java Exception Hierarchy - Unchecked and Checked Exceptions</h2> <p>All Java exceptions are instances of classes in the Exception class hierarchy.  This can be represented as follows:</p> <li>[`java.lang.Throwable`](https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html) - This is the base class for all exception classes.  Its methods and constructors implement a range of functionality common to all exceptions.
<ul><li>[`java.lang.Exception`](https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html) - This is the superclass of all normal exceptions.
<ul>
- various standard and custom exception classes.
<li>[`java.lang.RuntimeException`](https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html) - This the superclass of all normal exceptions that are **unchecked exceptions**.
<ul>
- various standard and custom runtime exception classes.
<p>Notes:</p> <ol><li>The distinction between <strong>checked</strong> and <strong>unchecked</strong> exceptions is described below.</li> <li>The <code>Throwable</code>, <code>Exception</code> and <code>RuntimeException</code> class should be treated as <code>abstract</code>; see <a href="http://stackoverflow.com/documentation/java/5381/java-pitfalls-exception-usage/18023/pitfall-throwing-throwable-exception-error-or-runtimeexception#t=201610240803173325134" target="_blank" rel="noopener noreferrer">Pitfall - Throwing Throwable, Exception, Error or RuntimeException<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>The <code>Error</code> exceptions are thrown by the JVM in situations where it would be unsafe or unwise for an application to attempt to recover.</li> <li>It would be unwise to declare custom subtypes of <code>Throwable</code>.  Java tools and libraries may assume that <code>Error</code> and <code>Exception</code> are the only direct subtypes of <code>Throwable</code>, and misbehave if that assumption is incorrect.</li></ol> <h3 id="checked-versus-unchecked-exceptions"><a href="#checked-versus-unchecked-exceptions" class="header-anchor">#</a> Checked versus Unchecked Exceptions</h3> <p>One of the criticisms of exception support in some programming languages is that is difficult to know which exceptions a given method or procedure might throw.  Given that an unhandled exception is liable to cause a program to crash, this can make exceptions a source of fragility.</p> <p>The Java language addresses this concern with the checked exception mechanism.  First, Java classifies exceptions into two categories:</p> <li>
Checked exceptions typically represent anticipated events that an application should be able to deal with.  For instance, `IOException` and its subtypes represent error conditions that can occur in I/O operations.  Examples include, file opens failing because a file or directory does not exist, network reads and writes failing because a network connection has been broken and so on.
</li> <li>
Unchecked exceptions typically represent unanticipated events that an application cannot deal with.  These are typically the result of a bug in the application.
</li> <p><sup>(In the following, &quot;thrown&quot; refers to any exception thrown explicitly (by a <code>throw</code> statement), or implicitly (in a failed dereference, type cast and so on).  Similarly, &quot;propagated&quot; refers to an exception that was thrown in a nested call, and not caught within that call.  The sample code below will illustrate this.)</sup></p> <p>The second part of the checked exception mechanism is that there are restrictions on methods where a checked exception may occur:</p> <ul><li>When a checked exception is thrown or propagated in a method, it <strong>must</strong> either be caught by the method, or listed in the method's <code>throws</code> clause.  (The significance of the <code>throws</code> clause is described in <a href="http://stackoverflow.com/documentation/java/89/exceptions-and-exception-handling/25209/" target="_blank" rel="noopener noreferrer">this example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.)</li> <li>When a checked exception is thrown or propagated in an initializer block, it must be caught the the block.</li> <li>A checked exception cannot be propagated by a method call in a field initialization expression. (There is no way to catch such an exception.)</li></ul> <p>In short, a checked exception must be either handled, or declared.</p> <p>These restrictions do not apply to unchecked exceptions.  This includes all cases where an exception is thrown implicitly, since all such cases throw unchecked exceptions.</p> <h3 id="checked-exception-examples"><a href="#checked-exception-examples" class="header-anchor">#</a> Checked exception examples</h3> <p>These code snippets are intended to illustrate the checked exception restrictions.  In each case, we show a version of the code with a compilation error, and a second version with the error corrected.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// This declares a custom checked exception.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// constructors omitted.</span>
<span class="token punctuation">}</span>

<span class="token comment">// This declares a custom unchecked exception.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyException2</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">{</span>
    <span class="token comment">// constructors omitted.</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The first example shows how explicitly thrown checked exceptions can be declared as &quot;thrown&quot; if they should not be handled in the method.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// INCORRECT</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodThrowingCheckedException</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token comment">// Compiles OK, throws ArithmeticException</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Compilation error</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MyException2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Compiles OK</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// CORRECTED</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodThrowingCheckedException</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MyException</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token comment">// Compiles OK, throws ArithmeticException</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Compilation error</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MyException2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Compiles OK</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The second example shows how a propagated checked exception can be dealt with.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// INCORRECT </span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodWithPropagatedCheckedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;someFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Compilation error</span>
    <span class="token comment">// FileInputStream throws IOException or a subclass if the file cannot </span>
    <span class="token comment">// be opened.  IOException is a checked exception.</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">// CORRECTED (Version A) </span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodWithPropagatedCheckedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;someFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">// CORRECTED (Version B) </span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodWithPropagatedCheckedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;someFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot open file: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The final example shows how to deal with a checked exception in a static field initializer.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// INCORRECT</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">InputStream</span> is <span class="token operator">=</span> 
            <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;someFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Compilation error</span>
<span class="token punctuation">}</span>

<span class="token comment">// CORRECTED</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">InputStream</span> is<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> tmp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;someFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot open file: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        is <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Note that in this last case, we also have to deal with the problems that <code>is</code> cannot be assigned to more than once, and yet also has to be assigned to, even in the case of an exception.</p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Exceptions are errors which occur when a program is executing. Consider the Java program below which divides two integers.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Division</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
        <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> result<span class="token punctuation">;</span>
 
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Input two integers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        a <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        b <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        result <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
 
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Now we compile and execute the above code, and see the output for an attempted division by zero:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Input</span> two integers
<span class="token number">7</span> <span class="token number">0</span>
<span class="token class-name">Exception</span> in thread <span class="token string">&quot;main&quot;</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>ArithmeticException</span><span class="token operator">:</span> <span class="token operator">/</span> by zero 
    at <span class="token class-name">Division</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">Disivion</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span>

</code></pre></div><p>Division by zero is an invalid operation that would produce a value that cannot be represented as an integer.  Java deals with this by <strong>throwing an <strong>exception</strong></strong>. In this case, the exception is an instance of the <strong>ArithmeticException</strong> class.</p> <p><strong>Note:</strong> The example on <a href="http://stackoverflow.com/documentation/java/89/exceptions-and-exception-handling/1815/" target="_blank" rel="noopener noreferrer">creating and reading stack traces<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> explains what the output after the two numbers means.</p> <p>The utility of an <strong>exception</strong> is the flow control that it allows. Without using exceptions, a typical solution to this problem may be to first check if <code>b == 0</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Division</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
        <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> result<span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Input two integers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        a <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        b <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;You cannot divide by zero.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        result <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
 
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This prints the message <code>You cannot divide by zero.</code> to the console and quits the program in a graceful way when the user tries to divide by zero. An equivalent way of dealing with this problem via <strong>exception handling</strong> would be to replace the <code>if</code> flow control with a <code>try-catch</code> block:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

a <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;An ArithmeticException occurred. Perhaps you tried to divide by zero.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  

</code></pre></div><p>A try catch block is executed as follows:</p> <ol><li>Begin executing the code in the <code>try</code> block.</li> <li>If an <strong>exception</strong> occurs in the try block, immediately abort and check to see if this exception is <strong>caught</strong> by the <code>catch</code> block (in this case, when the Exception is an instance of <code>ArithmeticException</code>).</li> <li>If the exception is <strong>caught</strong>, it is assigned to the variable <code>e</code> and the <code>catch</code> block is executed.</li> <li>If either the <code>try</code> or <code>catch</code> block is completed (i.e. no uncaught exceptions occur during code execution) then continue to execute code below the <code>try-catch</code> block.</li></ol> <p>It is generally considered good practice to use <strong>exception handling</strong> as part of the normal flow control of an application where behavior would otherwise be undefined or unexpected. For instance, instead of returning <code>null</code> when a method fails, it is usually better practice to <strong>throw an exception</strong> so that the application making use of the method can define its own flow control for the situation via <strong>exception handling</strong> of the kind illustrated above. In some sense, this gets around the problem of having to return a particular <strong>type</strong>, as any one of multiple kinds of <strong>exceptions</strong> may be <strong>thrown</strong> to indicate the specific problem that occurred.</p> <p>For more advice on how and how not to use exceptions, refer to <a href="http://stackoverflow.com/documentation/java/5381/java-pitfalls-exception-usage#t=20160818072550829097" target="_blank" rel="noopener noreferrer">Java Pitfalls - Exception usage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="creating-and-reading-stacktraces"><a href="#creating-and-reading-stacktraces" class="header-anchor">#</a> Creating and reading stacktraces</h2> <p>When an exception object is created (i.e. when you <code>new</code> it), the <code>Throwable</code> constructor captures information about the context in which the exception was created.  Later on, this information can be output in the form of a stacktrace, which can be used to help diagnose the problem that caused the exception in the first place.</p> <h3 id="printing-a-stacktrace"><a href="#printing-a-stacktrace" class="header-anchor">#</a> Printing a stacktrace</h3> <p>Printing a stacktrace is simply a matter of calling the <code>printStackTrace()</code> method.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// This prints the stacktrace to standard output</span>
    ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <code>printStackTrace()</code> method without arguments will print to the application's standard output; i.e. the current <code>System.out</code>.  There are also <code>printStackTrace(PrintStream)</code> and <code>printStackTrace(PrintWriter)</code> overloads that print to a specified <code>Stream</code> or <code>Writer</code>.</p> <p>Notes:</p> <li>
The stacktrace does not include the details of the exception itself.  You can use the `toString()` method to get those details; e.g.
<div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">// Print exception and stacktrace</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
   ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></li> <li>
Stacktrace printing should be used sparingly; see [Pitfall - Excessive or inappropriate stacktraces](http://stackoverflow.com/documentation/java/5381/java-pitfalls-exception-usage/19955/pitfall-excessive-or-inappropriate-stacktraces#t=201610200112090788291) .  It is often better to use a logging framework, and pass the exception object to be logged.
</li> <h3 id="understanding-a-stacktrace"><a href="#understanding-a-stacktrace" class="header-anchor">#</a> Understanding a stacktrace</h3> <p>Consider the following simple program consisting of two classes in two files.  (We have shown the filenames and added line numbers for illustration purposes.)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span><span class="token operator">:</span> <span class="token string">&quot;Main.java&quot;</span>
<span class="token number">1</span>   <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
<span class="token number">2</span>       <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span>           <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">4</span>       <span class="token punctuation">}</span>
<span class="token number">5</span>   <span class="token punctuation">}</span>

<span class="token class-name">File</span><span class="token operator">:</span> <span class="token string">&quot;Test.java&quot;</span>
<span class="token number">1</span>   <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
<span class="token number">2</span>       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span>           <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">4</span>       <span class="token punctuation">}</span>
<span class="token number">5</span>   
<span class="token number">6</span>       <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">7</span>           <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token number">8</span>           <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">9</span>           <span class="token keyword">return</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
<span class="token number">10</span>      <span class="token punctuation">}</span>

</code></pre></div><p>When these files are compiled and run, we will get the following output.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Exception</span> in thread <span class="token string">&quot;main&quot;</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>ArithmeticException</span><span class="token operator">:</span> <span class="token operator">/</span> by zero
        at <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">)</span>
        at <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span>
        at <span class="token class-name">Main</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">Main</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span>

</code></pre></div><p>Let us read this one line at a time to figure out what it is telling us.</p> <p>Line #1 tells us that the thread called &quot;main&quot; has terminated due to an uncaught exception.  The full name of the exception is <code>java.lang.ArithmeticException</code>, and the exception message is &quot;/ by zero&quot;.</p> <p>If we look up the javadocs for this exception, it says:</p> <blockquote></blockquote> <p>Thrown when an exceptional arithmetic condition has occurred. For example, an integer &quot;divide by zero&quot; throws an instance of this class.</p> <p>Indeed, the message &quot;/ by zero&quot; is a strong hint that the cause of the exception is that some code has attempted to divide something by zero.  But what?</p> <p>The remaining 3 lines are the stack trace.  Each line represents a method (or constructor) call on the call stack, and each one tells us three things:</p> <ul><li>the name of the class and method that was being executed,</li> <li>the source code filename,</li> <li>the source code line number of the statement that was being executed</li></ul> <p>These lines of a stacktrace are listed with the frame for the current call at the top.  The top frame in our example above is in the <code>Test.bar</code> method, and at line 9 of the Test.java file.  That is the following line:</p> <div class="language- extra-class"><pre class="language-text"><code>
   return a / b;

</code></pre></div><p>If we look a couple of lines earlier in the file to where <code>b</code> is initialized, it is apparent that <code>b</code> will have the value zero.  We can say without any doubt that this is the cause of the exception.</p> <p>If we needed to go further, we can see from the stacktrace that <code>bar()</code> was called from <code>foo()</code> at line 3 of Test.java, and that <code>foo()</code> was in turn called from <code>Main.main()</code>.</p> <p>Note: The class and method names in the stack frames are the internal names for the classes and methods.  You will need to recognize the following unusual cases:</p> <ul><li>A nested or inner class will look like &quot;OuterClass$InnerClass&quot;.</li> <li>An anonymous inner class will look like &quot;OuterClass$1&quot;, &quot;OuterClass$2&quot;, etcetera.</li> <li>When code in a constructor, instance field initializer or an instance initializer block is being executed, the method name will be &quot;&quot;.</li> <li>When code in a static field initializer or static initializer block is being executed, the method name will be &quot;&quot;.</li></ul> <p>(In some versions of Java, the stacktrace formatting code will detect and elide repeated stackframe sequences, as can occur when an application fails due to excessive recursion.)</p> <h3 id="exception-chaining-and-nested-stacktraces"><a href="#exception-chaining-and-nested-stacktraces" class="header-anchor">#</a> Exception chaining and nested stacktraces</h3> <p>Exception chaining happens when a piece of code catches an exception, and then creates and throws a new one, passing the first exception as the cause.  Here is an example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span><span class="token operator">:</span> <span class="token class-name">Test</span><span class="token punctuation">,</span>java
<span class="token number">1</span>   <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
<span class="token number">2</span>      <span class="token keyword">int</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span>           <span class="token keyword">return</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">4</span>      <span class="token punctuation">}</span>
<span class="token number">5</span>
<span class="token number">6</span>       <span class="token keyword">public</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">7</span>           <span class="token keyword">try</span> <span class="token punctuation">{</span>
<span class="token number">8</span>               <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">9</span>           <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">10</span>              <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;A bad thing happened&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">11</span>          <span class="token punctuation">}</span>
<span class="token number">12</span>      <span class="token punctuation">}</span>
<span class="token number">13</span>
<span class="token number">14</span>      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">15</span>          <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">16</span>      <span class="token punctuation">}</span>
<span class="token number">17</span>  <span class="token punctuation">}</span>

</code></pre></div><p>When the above class is compiled and run, we get the following stacktrace:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Exception</span> in thread <span class="token string">&quot;main&quot;</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>RuntimeException</span><span class="token operator">:</span> <span class="token class-name">A</span> bad thing happened
        at <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span>
        at <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>ArithmeticException</span><span class="token operator">:</span> <span class="token operator">/</span> by zero
        at <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span>
        at <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">1</span> more

</code></pre></div><p>The stacktrace starts with the class name, method and call stack for the exception that (in this case) caused the application to crash.  This is followed by a &quot;Caused by:&quot; line that reports the <code>cause</code> exception.  The class name and message are reported, followed by the cause exception's stack frames.  The trace ends with an  &quot;... N more&quot; which indicates that the last N frames are the same as for the previous exception.</p> <p>The &quot;Caused by:&quot; is only included in the output when the primary exception's <code>cause</code> is not <code>null</code>).  Exceptions can be chained indefinitely, and in that case the stacktrace can have multiple &quot;Caused by:&quot; traces.</p> <p>Note: the <code>cause</code> mechanism was only exposed in the <code>Throwable</code> API in Java 1.4.0.  Prior to that, exception chaining needed to be implemented by the application using a custom exception field to represent the cause, and a custom <code>printStackTrace</code> method.</p> <h3 id="capturing-a-stacktrace-as-a-string"><a href="#capturing-a-stacktrace-as-a-string" class="header-anchor">#</a> Capturing a stacktrace as a String</h3> <p>Sometimes, an application needs to be able to capture a stacktrace as a Java <code>String</code>, so that it can be used for other purposes.  The general approach for doing this is to create a temporary <code>OutputStream</code> or <code>Writer</code> that writes to an in-memory buffer and pass that to the <code>printStackTrace(...)</code>.</p> <p>The <a href="http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/exception/ExceptionUtils.html#getStackTrace(java.lang.Throwable)" target="_blank" rel="noopener noreferrer">Apache Commons<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/Throwables.html#getStackTraceAsString(java.lang.Throwable)" target="_blank" rel="noopener noreferrer">Guava<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> libraries provide utility methods for capturing a stacktrace as a String:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span>ExceptionUtils</span><span class="token punctuation">.</span><span class="token function">getStackTrace</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span><span class="token punctuation">)</span>

<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>base<span class="token punctuation">.</span></span>Throwables</span><span class="token punctuation">.</span><span class="token function">getStackTraceAsString</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span><span class="token punctuation">)</span>

</code></pre></div><p>If you cannot use third party libraries in your code base, then the following method with do the task:</p> <div class="language- extra-class"><pre class="language-text"><code>
  /**
     * Returns the string representation of the stack trace.
     *
     * @param throwable the throwable
     * @return the string.
     */
    public static String stackTraceToString(Throwable throwable) {
        StringWriter stringWriter = new StringWriter();
        throwable.printStackTrace(new PrintWriter(stringWriter));
        return stringWriter.toString();
    }

</code></pre></div><p>Note that if your intention is to analyze the stacktrace, it is simpler to use <code>getStackTrace()</code> and <code>getCause()</code> than to attempt to parse a stacktrace.</p> <h2 id="throwing-an-exception"><a href="#throwing-an-exception" class="header-anchor">#</a> Throwing an exception</h2> <p>The following example shows the basics of throwing an exception:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkNumber</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalArgumentException</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Number must be positive: &quot;</span> <span class="token operator">+</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The exception is thrown on the 3rd line.  This statement can be broken down into two parts:</p> <li>
`new IllegalArgumentException(...)` is creating an instance of the `IllegalArgumentException` class, with a message that describes the error that exception is reporting.
</li> <li>
`throw ...` is then throwing the exception object.
</li> <p>When the exception is thrown, it causes the enclosing statements to <strong>terminate abnormally</strong> until the exception is <strong>handled</strong>.  This is described in other examples.</p> <p>It is good practice to both create and throw the exception object in a single statement, as shown above.  It is also good practice to include a meaningful error message in the exception to help the programmer to understand the cause of the problem.  However, this is not necessarily the message that you should be showing to the end user.  (For a start, Java has no direct support for internationalizing exception messages.)</p> <p>There are a couple more points to be made:</p> <li>
We have declared the `checkNumber` as `throws IllegalArgumentException`.  This was not strictly necessary, since `IllegalArgumentException` is a checked exception; see [The Java Exception Hierarchy - Unchecked and Checked Exceptions](http://stackoverflow.com/documentation/java/89/exceptions/3058/types-of-exceptions-unchecked-and-checked-exceptions#t=201610240630113832437).  However, it is good practice to do this, and also to include the exceptions thrown a method's javadoc comments.
</li> <li>
Code immediately after a `throw` statement is **unreachable**.  Hence if we wrote this:
<div class="language-java extra-class"><pre class="language-java"><code> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;it is bad&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span><span class="token punctuation">;</span>

</code></pre></div><p>the compiler would report a compilation error for the <code>return</code> statement.
</p></li><p></p> <h3 id="exception-chaining"><a href="#exception-chaining" class="header-anchor">#</a> Exception chaining</h3> <p>Many standard exceptions have a constructor with a second <code>cause</code> argument in addition to the conventional <code>message</code> argument.  The <code>cause</code> allows you to chain exceptions.  Here is an example.</p> <p>First we define an unchecked exception that our application is going throw when it encounters a non-recoverable error.  Note that we have included a constructor that accepts a <code>cause</code> argument.</p> <div class="language- extra-class"><pre class="language-text"><code>
   public class AppErrorException extends RuntimeException {
        public AppErrorException() {
            super();
        }

        public AppErrorException(String message) {
            super(message);
        }

        public AppErrorException(String message, Throwable cause) {
            super(message, cause);
        }
    }

</code></pre></div><p>Next, here is some code that illustrates exception chaining.</p> <div class="language- extra-class"><pre class="language-text"><code>
   public String readFirstLine(String file) throws AppErrorException {
        try (Reader r = new BufferedReader(new FileReader(file))) {
            String line = r.readLine();
            if (line != null) {
                return line;
            } else {
                throw new AppErrorException(&quot;File is empty: &quot; + file);
            }
        } catch (IOException ex) {
            throw new AppErrorException(&quot;Cannot read file: &quot; + file, ex);
        }
    }

</code></pre></div><p>The <code>throw</code> within the <code>try</code> block detects a problem and reports it via an exception with a simple message.  By contrast, the <code>throw</code> within the <code>catch</code> block is handling the <code>IOException</code> by wrapping it in a new (checked) exception.  However, it is not throwing away the original exception.  By passing the <code>IOException</code> as the <code>cause</code>, we record it so that it can be printed in the stacktrace, as explained in <a href="http://stackoverflow.com/documentation/java/89/exceptions-and-exception-handling/1815/creating-and-reading-stacktraces#t=20161028160848944857" target="_blank" rel="noopener noreferrer">Creating and reading stacktraces<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="advanced-features-of-exceptions"><a href="#advanced-features-of-exceptions" class="header-anchor">#</a> Advanced features of Exceptions</h2> <p>This example covers some advanced features and use-cases for Exceptions.</p> <h3 id="examining-the-callstack-programmatically"><a href="#examining-the-callstack-programmatically" class="header-anchor">#</a> Examining the callstack programmatically</h3> <p>The primary use of exception stacktraces is to provide information about an application error and its context so that the programmer can diagnose and fix the problem.  Sometimes it can be used for other things.  For example, a <code>SecurityManager</code> class may need to examine the call stack to decide whether the code that is making a call should be trusted.</p> <p>You can use exceptions to examine the call stack programatically as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>
   Exception ex = new Exception();   // this captures the call stack
    StackTraceElement[] frames = ex.getStackTrace();
    System.out.println(&quot;This method is &quot; + frames[0].getMethodName());
    System.out.println(&quot;Called from method &quot; + frames[1].getMethodName());

</code></pre></div><p>There are some important caveats on this:</p> <li>
The information available in a `StackTraceElement` is limited.  There is no more information available than is displayed by `printStackTrace`.  (The values of the local variables in the frame are not available.)
</li> <li>
The javadocs for `getStackTrace()` state that a JVM is permitted to leave out frames:
<blockquote>
Some virtual machines may, under some circumstances, omit one or more stack frames from the stack trace. In the extreme case, a virtual machine that has no stack trace information concerning this throwable is permitted to return a zero-length array from this method.
</blockquote></li> <h3 id="optimizing-exception-construction"><a href="#optimizing-exception-construction" class="header-anchor">#</a> Optimizing exception construction</h3> <p>As mentioned elsewhere, constructing an exception is rather expensive because it entails capturing and recording information about all stack frames on the current thread.  Sometimes, we know that that information is never going to be used for a given exception; e.g. the stacktrace will never be printed.  In that case, there is an implementation trick that we can use in a custom exception to cause the information to not be captured.</p> <p>The stack frame information needed for stacktraces, is captured when the <code>Throwable</code> constructors call the <code>Throwable.fillInStackTrace()</code> method.  This method is <code>public</code>, which means that a subclass can override it.  The trick is to override the method inherited from <code>Throwable</code> with one that does nothing; e.g.</p> <div class="language- extra-class"><pre class="language-text"><code>
 public class MyException extends Exception {
      // constructors

      @Override 
      public void fillInStackTrace() {
          // do nothing
      }
  }

</code></pre></div><p>The problem with this approach is that an exception that overrides <code>fillInStackTrace()</code> can never capture the stacktrace, and is useless in scenarios where you need one.</p> <h3 id="erasing-or-replacing-the-stacktrace"><a href="#erasing-or-replacing-the-stacktrace" class="header-anchor">#</a> Erasing or replacing the stacktrace</h3> <p>In some situations, the stacktrace for an exception created in the normal way contains either incorrect information, or information that the developer does not want to reveal to the user.  For these scenarios, the <code>Throwable.setStackTrace</code> can be used to replace the array of <code>StackTraceElement</code> objects that holds the information.</p> <p>For example, the following can be used to discard an exception's stack information:</p> <div class="language- extra-class"><pre class="language-text"><code>
exception.setStackTrace(new StackTraceElement[0]);

</code></pre></div><h3 id="suppressed-exceptions"><a href="#suppressed-exceptions" class="header-anchor">#</a> Suppressed exceptions</h3> <p>Java 7 introduced the <strong>try-with-resources</strong> construct, and the associated concept of exception suppression.  Consider the following snippet:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Writer</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>someFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do stuff</span>
    <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// throws an ArithmeticException</span>
<span class="token punctuation">}</span>

</code></pre></div><p>When the exception is thrown, the <code>try</code> will call <code>close()</code> on the <code>w</code> which will flush any buffered output and then close the <code>FileWriter</code>.  But what happens if an <code>IOException</code> is thrown while flushing the output?</p> <p>What happens is that any exception that is thrown while cleaning up a resource is <strong>suppressed</strong>.  The exception is caught, and added to the primary exception's suppressed exception list.  Next the <strong>try-with-resources</strong> will continue with the cleanup of the other resources.  Finally, primary exception will be rethrown.</p> <p>A similar pattern occurs if an exception it thrown during the resource initialization, or if the <code>try</code> block completes normally.  The first exception thrown becomes the primary exception, and subsequent ones arising from cleanup are suppressed.</p> <p>The suppressed exceptions can be retrieved from the primary exception object by calling <code>getSuppressedExceptions</code>.</p> <h2 id="the-try-finally-and-try-catch-finally-statements"><a href="#the-try-finally-and-try-catch-finally-statements" class="header-anchor">#</a> The try-finally and try-catch-finally statements</h2> <p>The <code>try...catch...finally</code> statement combines exception handling with clean-up code. The <code>finally</code> block contains code that will be executed in all circumstances. This makes them suitable for resource management, and other kinds of cleanup.</p> <h3 id="try-finally"><a href="#try-finally" class="header-anchor">#</a> Try-finally</h3> <p>Here is an example of the simpler (<code>try...finally</code>) form:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token function">cleanUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The behavior of the <code>try...finally</code> is as follows:</p> <ul><li><p>The code in the <code>try</code> block is executed.
</p></li><li>If no exception was thrown in the <code>try</code> block:
<ul><p></p></ul></li> <li><p>The code in the <code>finally</code> block is executed.</p></li> <li><p>If the <code>finally</code> block throws an exception, that exception is propagated.</p></li> <li><p>Otherwise, control passes to the next statement after the <code>try...finally</code>.</p></li> <li><p>The code in the <code>finally</code> block is executed.</p></li> <li><p>If the <code>finally</code> block throws an exception, that exception is propagated.</p></li> <li><p>Otherwise, the original exception continues to propagate.</p></li></ul> <p>The code within <code>finally</code> block will always be executed. (The only exceptions are if <code>System.exit(int)</code> is called, or if the JVM panics.) Thus a <code>finally</code> block is the correct place code that always needs to be executed; e.g. closing files and other resources or releasing locks.</p> <h3 id="try-catch-finally"><a href="#try-catch-finally" class="header-anchor">#</a> try-catch-finally</h3> <p>Our second example shows how <code>catch</code> and <code>finally</code> can be used together.  It also illustrates that cleaning up resources is not straightforward.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// This code snippet writes the first line of a file to a string</span>
<span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name">Reader</span> reader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Logger</span><span class="token punctuation">.</span>getLogger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Unexpected IO error&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// logging the exception</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            reader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ignore / discard this exception</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The complete set of (hypothetical) behaviors of <code>try...catch...finally</code> in this example are too complicated to describe here.  The simple version is that the code in the <code>finally</code> block will always be executed.</p> <p>Looking at this from the perspective of resource management:</p> <ul><li>We declare the &quot;resource&quot; (i.e. <code>reader</code> variable) before the <code>try</code> block so that it will be in scope for the <code>finally</code> block.</li> <li>By putting the <code>new FileReader(...)</code>, the <code>catch</code> is able to handle any <code>IOError</code> exception from thrown when opening the file.</li> <li>We need a <code>reader.close()</code> in the <code>finally</code> block because there are some exception paths that we cannot intercept either in the <code>try</code> block or in <code>catch</code> block.</li> <li>However, since an exception <strong>might</strong> have been thrown before <code>reader</code> was initialized, we also need an explicit <code>null</code> test.</li> <li>Finally, the <code>reader.close()</code> call might (hypothetically) throw an exception.  We don't care about that, but if we don't catch the exception at source, we would need to deal with it further up the call stack.</li></ul> <p>Java 7 and later provide an alternative <a href="http://stackoverflow.com/documentation/java/89/exceptions/1581/using-try-with-resources#t=2016072716372920995" target="_blank" rel="noopener noreferrer">try-with-resources syntax<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which significantly simplifies resource clean-up.</p> <h2 id="the-throws-clause-in-a-method-declaration"><a href="#the-throws-clause-in-a-method-declaration" class="header-anchor">#</a> The 'throws' clause in a method declaration</h2> <p>Java's <strong>checked exception</strong> mechanism requires the programmer to declare that certain methods <strong>could</strong> throw specifed checked exceptions. This is done using the <code>throws</code> clause.  For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OddNumberException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span> <span class="token comment">// a checked exception</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkEven</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">OddNumberException</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OddNumberException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The <code>throws OddNumberException</code> declares that a call to <code>checkEven</code> <strong>could</strong> throw an exception that is of type <code>OddNumberException</code>.</p> <p>A <code>throws</code> clause can declare a list of types, and can include unchecked exceptions as well as checked exceptions.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkEven</span><span class="token punctuation">(</span><span class="token class-name">Double</span> number<span class="token punctuation">)</span> 
        <span class="token keyword">throws</span> <span class="token class-name">OddNumberException</span><span class="token punctuation">,</span> <span class="token class-name">ArithmeticException</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ArithmeticException</span><span class="token punctuation">(</span><span class="token string">&quot;INF or NaN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OddNumberException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="what-is-the-point-of-declaring-unchecked-exceptions-as-thrown"><a href="#what-is-the-point-of-declaring-unchecked-exceptions-as-thrown" class="header-anchor">#</a> What is the point of declaring unchecked exceptions as thrown?</h3> <p>The <code>throws</code> clause in a method declaration serves two purposes:</p> <li>
It tells the compiler which exceptions are thrown so that the compiler can report uncaught (checked) exceptions as errors.
</li> <li>
It tells a programmer who is writing code that calls the method what exceptions to expect. For this purpose, it often makes to senses to include unchecked exceptions in a `throws` list.
</li> <p>Note: that the <code>throws</code> list is also used by the javadoc tool when generating API documentation, and by a typical IDE's &quot;hover text&quot; method tips.</p> <h3 id="throws-and-method-overriding"><a href="#throws-and-method-overriding" class="header-anchor">#</a> Throws and method overriding</h3> <p>The <code>throws</code> clause forms part of a method's signature for the purpose of method overriding. An override method can be declared with the same set of checked exceptions as thrown by the overridden method, or with a subset. However the override method cannot add extra checked exceptions. For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkEven</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NullPointerException</span> <span class="token comment">// OK—NullPointerException is an unchecked exception</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkEven</span><span class="token punctuation">(</span><span class="token class-name">Double</span> number<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">OddNumberException</span> <span class="token comment">// OK—identical to the superclass</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">class</span> <span class="token class-name">PrimeNumberException</span> <span class="token keyword">extends</span> <span class="token class-name">OddNumberException</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">NonEvenNumberException</span> <span class="token keyword">extends</span> <span class="token class-name">OddNumberException</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkEven</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">PrimeNumberException</span><span class="token punctuation">,</span> <span class="token class-name">NonEvenNumberException</span> <span class="token comment">// OK—these are both subclasses</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkEven</span><span class="token punctuation">(</span><span class="token class-name">Double</span> number<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOExcepion</span>         <span class="token comment">// ERROR</span>

</code></pre></div><p>The reason for this rule is that if an overriden method can throw a checked exception that the overridden method could not throw, that would break type substitutability.</p> <h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <li><p>void someMethod() throws SomeException { } //method declaration, forces method
callers to catch if SomeException is a checked exception type</p></li> <li>
try {
<div class="language-java extra-class"><pre class="language-java"><code><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//code that might throw an exception </span>

</code></pre></div><p>}
</p></li> <li>
catch (SomeException e) {<p></p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SomeException was thrown!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//code that will run if certain exception (SomeException) is thrown</span>

</code></pre></div><p>}
</p></li> <li>
finally {<p></p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token comment">//code that will always run, whether try block finishes or not</span>

</code></pre></div><p>}
</p></li><p></p></ul></li></ul></li></ul></li></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/java/exceptions-and-exception-handling.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/object-references.html" class="prev">
        Object References
      </a></span> <span class="next"><a href="/java/calendar-and-its-subclasses.html">
        Calendar and its Subclasses
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1565.3fa1c150.js" defer></script>
  </body>
</html>
