<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ruby - Hashes</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Creating a hash, Setting Default Values, Accessing Values, Automatically creating a Deep Hash, Iterating Over a Hash, Conversion to and from Arrays, Filtering hashes, Getting all keys or values of hash, Overriding hash function, Modifying keys and values, Set Operations on Hashes">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Ruby - Hashes">
    <meta property="og:description" content="Creating a hash, Setting Default Values, Accessing Values, Automatically creating a Deep Hash, Iterating Over a Hash, Conversion to and from Arrays, Filtering hashes, Getting all keys or values of hash, Overriding hash function, Modifying keys and values, Set Operations on Hashes">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/ruby/hashes.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Ruby - Hashes">
    <meta name="twitter:description" content="Creating a hash, Setting Default Values, Accessing Values, Automatically creating a Deep Hash, Iterating Over a Hash, Conversion to and from Arrays, Filtering hashes, Getting all keys or values of hash, Overriding hash function, Modifying keys and values, Set Operations on Hashes">
    <meta name="twitter:url" content="/ruby/hashes.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/3079.722ef865.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Ruby</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ruby/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/ruby/installation.html" class="sidebar-link">Installation</a></li><li><a href="/ruby/getting-started-with-ruby-language.html" class="sidebar-link">Getting started with Ruby Language</a></li><li><a href="/ruby/casting-type-conversion.html" class="sidebar-link">Casting (type conversion)</a></li><li><a href="/ruby/operators.html" class="sidebar-link">Operators</a></li><li><a href="/ruby/variable-scope-and-visibility.html" class="sidebar-link">Variable Scope and Visibility</a></li><li><a href="/ruby/environment-variables.html" class="sidebar-link">Environment Variables</a></li><li><a href="/ruby/constants.html" class="sidebar-link">Constants</a></li><li><a href="/ruby/special-constants-in-ruby.html" class="sidebar-link">Special Constants in Ruby</a></li><li><a href="/ruby/comments.html" class="sidebar-link">Comments</a></li><li><a href="/ruby/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/ruby/multidimensional-arrays.html" class="sidebar-link">Multidimensional Arrays</a></li><li><a href="/ruby/strings.html" class="sidebar-link">Strings</a></li><li><a href="/ruby/datetime.html" class="sidebar-link">DateTime</a></li><li><a href="/ruby/time.html" class="sidebar-link">Time</a></li><li><a href="/ruby/numbers.html" class="sidebar-link">Numbers</a></li><li><a href="/ruby/symbols.html" class="sidebar-link">Symbols</a></li><li><a href="/ruby/comparable.html" class="sidebar-link">Comparable</a></li><li><a href="/ruby/control-flow.html" class="sidebar-link">Control Flow</a></li><li><a href="/ruby/methods.html" class="sidebar-link">Methods</a></li><li><a href="/ruby/hashes.html" aria-current="page" class="active sidebar-link">Hashes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ruby/hashes.html#creating-a-hash" class="sidebar-link">Creating a hash</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#setting-default-values" class="sidebar-link">Setting Default Values</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#accessing-values" class="sidebar-link">Accessing Values</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#automatically-creating-a-deep-hash" class="sidebar-link">Automatically creating a Deep Hash</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#iterating-over-a-hash" class="sidebar-link">Iterating Over a Hash</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#conversion-to-and-from-arrays" class="sidebar-link">Conversion to and from Arrays</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#filtering-hashes" class="sidebar-link">Filtering hashes</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#getting-all-keys-or-values-of-hash" class="sidebar-link">Getting all keys or values of hash</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#overriding-hash-function" class="sidebar-link">Overriding hash function</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#modifying-keys-and-values" class="sidebar-link">Modifying keys and values</a></li><li class="sidebar-sub-header"><a href="/ruby/hashes.html#set-operations-on-hashes" class="sidebar-link">Set Operations on Hashes</a></li></ul></li><li><a href="/ruby/blocks-and-procs-and-lambdas.html" class="sidebar-link">Blocks and Procs and Lambdas</a></li><li><a href="/ruby/iteration.html" class="sidebar-link">Iteration</a></li><li><a href="/ruby/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/ruby/enumerators.html" class="sidebar-link">Enumerators</a></li><li><a href="/ruby/enumerable-in-ruby.html" class="sidebar-link">Enumerable in Ruby</a></li><li><a href="/ruby/classes.html" class="sidebar-link">Classes</a></li><li><a href="/ruby/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/ruby/method-missing.html" class="sidebar-link">method_missing</a></li><li><a href="/ruby/regular-expressions-and-regex-based-operations.html" class="sidebar-link">Regular Expressions and Regex Based Operations</a></li><li><a href="/ruby/file-and-i-o-operations.html" class="sidebar-link">File and I/O Operations</a></li><li><a href="/ruby/ruby-access-modifiers.html" class="sidebar-link">Ruby Access Modifiers</a></li><li><a href="/ruby/design-patterns-and-idioms-in-ruby.html" class="sidebar-link">Design Patterns and Idioms in Ruby</a></li><li><a href="/ruby/loading-source-files.html" class="sidebar-link">Loading Source Files</a></li><li><a href="/ruby/thread.html" class="sidebar-link">Thread</a></li><li><a href="/ruby/range.html" class="sidebar-link">Range</a></li><li><a href="/ruby/modules.html" class="sidebar-link">Modules</a></li><li><a href="/ruby/introspection-in-ruby.html" class="sidebar-link">Introspection in Ruby</a></li><li><a href="/ruby/monkey-patching-in-ruby.html" class="sidebar-link">Monkey Patching in Ruby</a></li><li><a href="/ruby/recursion-in-ruby.html" class="sidebar-link">Recursion in Ruby</a></li><li><a href="/ruby/splat-operator.html" class="sidebar-link">Splat operator (*)</a></li><li><a href="/ruby/json-with-ruby.html" class="sidebar-link">JSON with Ruby</a></li><li><a href="/ruby/pure-rspec-json-api-testing.html" class="sidebar-link">Pure RSpec JSON API testing</a></li><li><a href="/ruby/gem-creation-management.html" class="sidebar-link">Gem Creation/Management</a></li><li><a href="/ruby/rbenv.html" class="sidebar-link">rbenv</a></li><li><a href="/ruby/gem-usage.html" class="sidebar-link">Gem Usage</a></li><li><a href="/ruby/singleton-class.html" class="sidebar-link">Singleton Class</a></li><li><a href="/ruby/queue.html" class="sidebar-link">Queue</a></li><li><a href="/ruby/destructuring.html" class="sidebar-link">Destructuring</a></li><li><a href="/ruby/struct.html" class="sidebar-link">Struct</a></li><li><a href="/ruby/metaprogramming.html" class="sidebar-link">Metaprogramming</a></li><li><a href="/ruby/dynamic-evaluation.html" class="sidebar-link">Dynamic Evaluation</a></li><li><a href="/ruby/instance-eval.html" class="sidebar-link">instance_eval</a></li><li><a href="/ruby/message-passing.html" class="sidebar-link">Message Passing</a></li><li><a href="/ruby/keyword-arguments.html" class="sidebar-link">Keyword Arguments</a></li><li><a href="/ruby/truthiness.html" class="sidebar-link">Truthiness</a></li><li><a href="/ruby/implicit-receivers-and-understanding-self.html" class="sidebar-link">Implicit Receivers and Understanding Self</a></li><li><a href="/ruby/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/ruby/refinements.html" class="sidebar-link">Refinements</a></li><li><a href="/ruby/catching-exceptions-with-begin-rescue.html" class="sidebar-link">Catching Exceptions with Begin / Rescue</a></li><li><a href="/ruby/command-line-apps.html" class="sidebar-link">Command Line Apps</a></li><li><a href="/ruby/irb.html" class="sidebar-link">IRB</a></li><li><a href="/ruby/erb.html" class="sidebar-link">ERB</a></li><li><a href="/ruby/generate-a-random-number.html" class="sidebar-link">Generate a random number</a></li><li><a href="/ruby/getting-started-with-hanami.html" class="sidebar-link">Getting started with Hanami</a></li><li><a href="/ruby/optionparser.html" class="sidebar-link">OptionParser</a></li><li><a href="/ruby/operating-system-or-shell-commands.html" class="sidebar-link">Operating System or Shell commands</a></li><li><a href="/ruby/c-extensions.html" class="sidebar-link">C Extensions</a></li><li><a href="/ruby/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/ruby/ruby-version-manager.html" class="sidebar-link">Ruby Version Manager</a></li><li><a href="/ruby/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hashes"><a href="#hashes" class="header-anchor">#</a> Hashes</h1> <p>A Hash is a dictionary-like collection of unique keys and their values. Also called associative arrays, they are similar to Arrays, but where an Array uses integers as its index, a Hash allows you to use any object type.  You retrieve or create a new entry in a Hash by referring to its key.</p> <h2 id="creating-a-hash"><a href="#creating-a-hash" class="header-anchor">#</a> Creating a hash</h2> <p>A hash in Ruby is an object that implements a <a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="noopener noreferrer">hash table<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, mapping keys to values. Ruby supports a specific literal syntax for defining hashes using <code>{}</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment"># an empty hash</span>
grades <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'Mark'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'Jimmy'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token punctuation">}</span>

</code></pre></div><p>A hash can also be created using the standard <code>new</code> method:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span>  <span class="token comment"># any empty hash</span>
my_hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token comment"># any empty hash</span>

</code></pre></div><p>Hashes can have values of any type, including complex types like arrays, objects and other hashes:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>mapping <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'Mark'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'Jimmy'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Nika'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token string">'a'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'b'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
mapping<span class="token punctuation">[</span><span class="token string">'Mark'</span><span class="token punctuation">]</span>   <span class="token comment"># =&gt; 15</span>
mapping<span class="token punctuation">[</span><span class="token string">'Jimmy'</span><span class="token punctuation">]</span>  <span class="token comment"># =&gt; [3, 4]</span>
mapping<span class="token punctuation">[</span><span class="token string">'Nika'</span><span class="token punctuation">]</span>   <span class="token comment"># =&gt; {&quot;a&quot;=&gt;3, &quot;b&quot;=&gt;5}</span>

</code></pre></div><p>Also keys can be of any type, including complex ones:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>mapping <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'Mark'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token punctuation">}</span>
mapping<span class="token punctuation">[</span><span class="token string">'Mark'</span><span class="token punctuation">]</span>  <span class="token comment"># =&gt; 15</span>
mapping<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token comment"># =&gt; 9</span>

</code></pre></div><p><a href="http://stackoverflow.com/documentation/ruby/873/symbols#t=201609131816420784784" target="_blank" rel="noopener noreferrer">Symbols<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are commonly used as hash keys, and Ruby 1.9 introduced a new syntax specifically to shorten this process. The following hashes are equivalent:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># Valid on all Ruby versions</span>
grades <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token symbol">:Mark</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token symbol">:Jimmy</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token symbol">:Jack</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token comment"># Valid in Ruby version 1.9+</span>
grades <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token constant">Mark</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token constant">Jimmy</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token constant">Jack</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>

</code></pre></div><p>The following hash (valid in all Ruby versions) is <strong>different</strong>, because all keys are strings:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>grades <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;Mark&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">&quot;Jimmy&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;Jack&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token punctuation">}</span>

</code></pre></div><p>While both syntax versions can be mixed, the following is discouraged.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>mapping <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token symbol">:length</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">45</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>

</code></pre></div><p>With Ruby 2.2+, there is an alternative syntax for creating a hash with symbol keys (most useful if the symbol contains spaces):</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>grades <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;Jimmy Choo&quot;</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token string">&quot;Jack Sparrow&quot;</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token comment"># =&gt; { :&quot;Jimmy Choo&quot; =&gt; 10, :&quot;Jack Sparrow&quot; =&gt; 10}</span>

</code></pre></div><h2 id="setting-default-values"><a href="#setting-default-values" class="header-anchor">#</a> Setting Default Values</h2> <p>By default, attempting to lookup the value for a key which does not exist will return <code>nil</code>. You can optionally specify some other value to return (or an action to take) when the hash is accessed with a non-existent key. Although this is referred to as &quot;the default value&quot;, it need not be a single value; it could, for example, be a computed value such as the length of the key.</p> <p>The default value of a hash can be passed to its constructor:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>h <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

h<span class="token punctuation">[</span><span class="token symbol">:hi</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> 
puts h<span class="token punctuation">[</span><span class="token symbol">:hi</span><span class="token punctuation">]</span>  <span class="token comment"># =&gt; 1 </span>
puts h<span class="token punctuation">[</span><span class="token symbol">:bye</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; 0 returns default value instead of nil</span>

</code></pre></div><p>A default can also be specified on an already constructed Hash:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span> human<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> animal<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
my_hash<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token number">0</span>
my_hash<span class="token punctuation">[</span><span class="token symbol">:plant</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; 0</span>

</code></pre></div><p>It is important to note that the <strong>default value is not copied</strong> each time a new key is accessed, which can lead to surprising results when the default value is a reference type:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># Use an empty array as the default value</span>
authors <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># Append a book title </span>
authors<span class="token punctuation">[</span><span class="token symbol">:homer</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> <span class="token string">'The Odyssey'</span>

<span class="token comment"># All new keys map to a reference to the same array:</span>
authors<span class="token punctuation">[</span><span class="token symbol">:plato</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; ['The Odyssey']</span>

</code></pre></div><p>To circumvent this problem, the Hash constructor accepts a block which is executed each time a new key is accessed, and the returned value is used as the default:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>authors <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

<span class="token comment"># Note that we're using += instead of &lt;&lt;, see below</span>
authors<span class="token punctuation">[</span><span class="token symbol">:homer</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'The Odyssey'</span><span class="token punctuation">]</span>
authors<span class="token punctuation">[</span><span class="token symbol">:plato</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; []</span>

authors <span class="token comment"># =&gt; {:homer=&gt;[&quot;The Odyssey&quot;]}</span>

</code></pre></div><p>Note that above we had to use += instead of &lt;&lt; because the default value is not automatically assigned to the hash; using &lt;&lt; would have added to the array, but authors[:homer] would have remained undefined:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>authors<span class="token punctuation">[</span><span class="token symbol">:homer</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> <span class="token string">'The Odyssey'</span> <span class="token comment"># ['The Odyssey']</span>
authors<span class="token punctuation">[</span><span class="token symbol">:homer</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; []</span>
authors <span class="token comment"># =&gt; {}</span>

</code></pre></div><p>In order to be able to assign default values on access, as well as to compute more sophisticated defaults, the default block is passed both the hash and the key:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>authors <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token punctuation">{</span> <span class="token operator">|</span>hash<span class="token punctuation">,</span> key<span class="token operator">|</span> hash<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

authors<span class="token punctuation">[</span><span class="token symbol">:homer</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> <span class="token string">'The Odyssey'</span>
authors<span class="token punctuation">[</span><span class="token symbol">:plato</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; []</span>

authors <span class="token comment"># =&gt; {:homer=&gt;[&quot;The Odyssey&quot;], :plato=&gt;[]}</span>

</code></pre></div><p>You can also use a default block to take an action and/or return a value dependent on the key (or some other data):</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>chars <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token punctuation">{</span> <span class="token operator">|</span>hash<span class="token punctuation">,</span>key<span class="token operator">|</span> key<span class="token punctuation">.</span>length <span class="token punctuation">}</span>

chars<span class="token punctuation">[</span><span class="token symbol">:test</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; 4</span>

</code></pre></div><p>You can even create more complex hashes:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>page_views <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token punctuation">{</span> <span class="token operator">|</span>hash<span class="token punctuation">,</span> key<span class="token operator">|</span> hash<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> key <span class="token punctuation">}</span> <span class="token punctuation">}</span>
page_views<span class="token punctuation">[</span><span class="token string">&quot;http://example.com&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token symbol">:count</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
page_views <span class="token comment"># =&gt; {&quot;http://example.com&quot;=&gt;{:count=&gt;1, :url=&gt;&quot;http://example.com&quot;}}</span>

</code></pre></div><p>In order to set the default to a Proc on an <strong>already-existing</strong> hash, use <code>default_proc=</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>authors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
authors<span class="token punctuation">.</span>default_proc <span class="token operator">=</span> proc <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

authors<span class="token punctuation">[</span><span class="token symbol">:homer</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'The Odyssey'</span><span class="token punctuation">]</span>
authors<span class="token punctuation">[</span><span class="token symbol">:plato</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; []</span>

authors <span class="token comment"># {:homer=&gt;[&quot;The Odyssey&quot;]}</span>

</code></pre></div><h2 id="accessing-values"><a href="#accessing-values" class="header-anchor">#</a> Accessing Values</h2> <p>Individual values of a hash are read and written using the <code>[]</code> and <code>[]=</code> methods:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span> length<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>

my_hash<span class="token punctuation">[</span><span class="token symbol">:length</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; =&gt; 4</span>

my_hash<span class="token punctuation">[</span><span class="token symbol">:height</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">9</span>

my_hash <span class="token comment">#=&gt; {:length =&gt; 4, :width =&gt; 5, :height =&gt; 9 }</span>

</code></pre></div><p>By default, accessing a key which has not been added to the hash returns <code>nil</code>, meaning it is always safe to attempt to look up a key's value:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

my_hash<span class="token punctuation">[</span><span class="token symbol">:age</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; nil</span>

</code></pre></div><p>Hashes can also contain keys in strings. If you try to access them normally it will just return a <code>nil</code>, instead you access them by their string keys:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;user&quot;</span> <span class="token punctuation">}</span>

my_hash<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span>    <span class="token comment"># =&gt; nil</span>
my_hash<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span>   <span class="token comment"># =&gt; user</span>

</code></pre></div><p>For situations where keys are expected or required to exist, hashes have a <code>fetch</code> method which will raise an exception when accessing a key that does not exist:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

my_hash<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token symbol">:age</span><span class="token punctuation">)</span> <span class="token comment">#=&gt; KeyError: key not found: :age</span>

</code></pre></div><p><code>fetch</code> accepts a default value as its second argument, which is returned if the key has not been previously set:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span>  <span class="token punctuation">{</span><span class="token punctuation">}</span>
my_hash<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token symbol">:age</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span> <span class="token comment">#=&gt; =&gt; 45</span>

</code></pre></div><p><code>fetch</code> can also accept a block which is returned if the key has not been previously set:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
my_hash<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token symbol">:age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token number">21</span> <span class="token punctuation">}</span> <span class="token comment">#=&gt; 21</span>

my_hash<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token symbol">:age</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>k<span class="token operator">|</span>
  puts <span class="token string">&quot;Could not find <span class="token interpolation"><span class="token delimiter tag">#{</span>k<span class="token delimiter tag">}</span></span>&quot;</span>
<span class="token keyword">end</span>

<span class="token comment">#=&gt; Could not find age</span>

</code></pre></div><p>Hashes also support a <code>store</code> method as an alias for <code>[]=</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

my_hash<span class="token punctuation">.</span>store<span class="token punctuation">(</span><span class="token symbol">:age</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span>

my_hash <span class="token comment">#=&gt; { :age =&gt; 45 }</span>

</code></pre></div><p>You can also get all values of a hash using the <code>values</code> method:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>my_hash <span class="token operator">=</span> <span class="token punctuation">{</span> length<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>

my_hash<span class="token punctuation">.</span>values <span class="token comment">#=&gt; [4, 5]</span>

</code></pre></div><p><strong>Note: This is only for Ruby 2.3+</strong> <code>#dig</code> is handy for nested <code>Hash</code>s. Extracts the nested value specified by the sequence of idx objects by calling dig at each step, returning nil if any intermediate step is nil.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>h <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token punctuation">{</span>bar<span class="token punctuation">:</span> <span class="token punctuation">{</span>baz<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

h<span class="token punctuation">.</span>dig<span class="token punctuation">(</span><span class="token symbol">:foo</span><span class="token punctuation">,</span> <span class="token symbol">:bar</span><span class="token punctuation">,</span> <span class="token symbol">:baz</span><span class="token punctuation">)</span>   <span class="token comment"># =&gt; 1</span>
h<span class="token punctuation">.</span>dig<span class="token punctuation">(</span><span class="token symbol">:foo</span><span class="token punctuation">,</span> <span class="token symbol">:zot</span><span class="token punctuation">,</span> <span class="token symbol">:xyz</span><span class="token punctuation">)</span>   <span class="token comment"># =&gt; nil</span>

g <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
g<span class="token punctuation">.</span>dig<span class="token punctuation">(</span><span class="token symbol">:foo</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token comment"># =&gt; 11</span>

</code></pre></div><h2 id="automatically-creating-a-deep-hash"><a href="#automatically-creating-a-deep-hash" class="header-anchor">#</a> Automatically creating a Deep Hash</h2> <p>Hash has a default value for keys that are requested but don't exist (nil):</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
p a<span class="token punctuation">[</span> <span class="token symbol">:b</span> <span class="token punctuation">]</span> <span class="token comment"># =&gt; nil </span>

</code></pre></div><p>When creating a new Hash, one can specify the default:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>b <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token string">'puppy'</span>
p b<span class="token punctuation">[</span> <span class="token symbol">:b</span> <span class="token punctuation">]</span>            <span class="token comment"># =&gt; 'puppy'</span>

</code></pre></div><p>Hash.new also takes a block, which allows you to automatically create nested hashes, such as Perl's autovivification behavior or <code>mkdir -p</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># h is the hash you're creating, and k the key.</span>
<span class="token comment">#</span>
hash <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token punctuation">{</span> <span class="token operator">|</span>h<span class="token punctuation">,</span> k<span class="token operator">|</span> h<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token operator">&amp;</span>h<span class="token punctuation">.</span>default_proc <span class="token punctuation">}</span>
hash<span class="token punctuation">[</span> <span class="token symbol">:a</span> <span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token symbol">:b</span> <span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token symbol">:c</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>

p hash <span class="token comment"># =&gt; { a: { b: { c: 3 } } }</span>

</code></pre></div><h2 id="iterating-over-a-hash"><a href="#iterating-over-a-hash" class="header-anchor">#</a> Iterating Over a Hash</h2> <p>A <code>Hash</code> includes the <a href="http://ruby-doc.org/core-2.3.1/Enumerable.html" target="_blank" rel="noopener noreferrer"><code>Enumerable</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> module, which provides several iteration methods, such as: <code>Enumerable#each</code>, <code>Enumerable#each_pair</code>, <code>Enumerable#each_key</code>, and <code>Enumerable#each_value</code>.</p> <p><code>.each</code> and <code>.each_pair</code> iterate over each key-value pair:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>h <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;first_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;Doe&quot;</span> <span class="token punctuation">}</span>
h<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>key<span class="token punctuation">,</span> value<span class="token operator">|</span>
    puts <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter tag">#{</span>key<span class="token delimiter tag">}</span></span> = <span class="token interpolation"><span class="token delimiter tag">#{</span>value<span class="token delimiter tag">}</span></span>&quot;</span>
<span class="token keyword">end</span>

<span class="token comment"># =&gt; first_name = John</span>
<span class="token comment">#    last_name = Doe</span>

</code></pre></div><p><code>.each_key</code> iterates over the keys only:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>h <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;first_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;Doe&quot;</span> <span class="token punctuation">}</span>
h<span class="token punctuation">.</span>each_key <span class="token keyword">do</span> <span class="token operator">|</span>key<span class="token operator">|</span>
  puts key
<span class="token keyword">end</span>

<span class="token comment"># =&gt; first_name</span>
<span class="token comment">#    last_name</span>

</code></pre></div><p><code>.each_value</code> iterates over the values only:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>h <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;first_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;Doe&quot;</span> <span class="token punctuation">}</span>
h<span class="token punctuation">.</span>each_value <span class="token keyword">do</span> <span class="token operator">|</span>value<span class="token operator">|</span>
    puts value
<span class="token keyword">end</span>

<span class="token comment"># =&gt; John</span>
<span class="token comment">#    Doe</span>

</code></pre></div><p><code>.each_with_index</code> iterates over the elements and provides the index of the iteration:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>h <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;first_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;Doe&quot;</span> <span class="token punctuation">}</span>
h<span class="token punctuation">.</span>each_with_index <span class="token keyword">do</span> <span class="token operator">|</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">,</span> index<span class="token operator">|</span>
    puts <span class="token string">&quot;index: <span class="token interpolation"><span class="token delimiter tag">#{</span>index<span class="token delimiter tag">}</span></span> | key: <span class="token interpolation"><span class="token delimiter tag">#{</span>key<span class="token delimiter tag">}</span></span> | value: <span class="token interpolation"><span class="token delimiter tag">#{</span>value<span class="token delimiter tag">}</span></span>&quot;</span>
<span class="token keyword">end</span>

<span class="token comment"># =&gt; index: 0 | key: first_name | value: John</span>
<span class="token comment">#    index: 1 | key: last_name | value: Doe</span>

</code></pre></div><h2 id="conversion-to-and-from-arrays"><a href="#conversion-to-and-from-arrays" class="header-anchor">#</a> Conversion to and from Arrays</h2> <p>Hashes can be freely converted to and from arrays. Converting a hash of key/value pairs into an array will produce an array containing nested arrays for pair:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>to_a <span class="token comment"># =&gt; [[:a, 1], [:b, 2]]</span>

</code></pre></div><p>In the opposite direction a Hash can be created from an array of the same format:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token symbol">:x</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token symbol">:y</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to_h <span class="token comment"># =&gt; { :x =&gt; 3, :y =&gt; 4 }</span>

</code></pre></div><p>Similarly, Hashes can be initialized using <code>Hash[]</code> and a list of alternating keys and values:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token builtin">Hash</span><span class="token punctuation">[</span><span class="token symbol">:a</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; { :a =&gt; 1, :b =&gt; 2 }</span>

</code></pre></div><p>Or from an array of arrays with two values each:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token builtin">Hash</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token symbol">:x</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token symbol">:y</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token comment"># =&gt; { :x =&gt; 3, :y =&gt; 4 }</span>

</code></pre></div><p>Hashes can be converted back to an Array of alternating keys and values using <code>flatten()</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>flatten <span class="token comment"># =&gt; [:a, 1, :b, 2]</span>

</code></pre></div><p>The easy conversion to and from an array allows <code>Hash</code> to work well with many <code>Enumerable</code> methods such as <code>collect</code> and <code>zip</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token builtin">Hash</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token string">'z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>collect<span class="token punctuation">{</span> <span class="token operator">|</span>c<span class="token operator">|</span> <span class="token punctuation">[</span>c<span class="token punctuation">,</span> c<span class="token punctuation">.</span>upcase<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; { 'a' =&gt; 'A', 'b' =&gt; 'B', ... }</span>

people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Eve'</span><span class="token punctuation">]</span>
height <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5.7</span><span class="token punctuation">,</span> <span class="token number">6.0</span><span class="token punctuation">,</span> <span class="token number">4.9</span><span class="token punctuation">]</span>
<span class="token builtin">Hash</span><span class="token punctuation">[</span>people<span class="token punctuation">.</span>zip<span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; { 'Alice' =&gt; 5.7, 'Bob' =&gt; '6.0', 'Eve' =&gt; 4.9 }</span>

</code></pre></div><h2 id="filtering-hashes"><a href="#filtering-hashes" class="header-anchor">#</a> Filtering hashes</h2> <p><code>select</code> returns a new <code>hash</code> with key-value pairs for which the block evaluates to <code>true</code>.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">:c</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>select <span class="token punctuation">{</span> <span class="token operator">|</span>k<span class="token punctuation">,</span> v<span class="token operator">|</span> k <span class="token operator">!=</span> <span class="token symbol">:a</span> <span class="token operator">&amp;&amp;</span> v<span class="token punctuation">.</span>even<span class="token operator">?</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; { :b =&gt; 2 }</span>

</code></pre></div><p>When you will not need the <strong>key</strong> or <strong>value</strong> in a filter block, the convention is to use an <code>_</code> in that place:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">:c</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>select <span class="token punctuation">{</span> <span class="token operator">|</span>_<span class="token punctuation">,</span> v<span class="token operator">|</span> v<span class="token punctuation">.</span>even<span class="token operator">?</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; { :b =&gt; 2 }</span>
<span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">:c</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>select <span class="token punctuation">{</span> <span class="token operator">|</span>k<span class="token punctuation">,</span> _<span class="token operator">|</span> k <span class="token operator">==</span> <span class="token symbol">:c</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; { :c =&gt; 3 }</span>

</code></pre></div><p><code>reject</code> returns a new <code>hash</code> with key-value pairs for which the block evaluates to <code>false</code>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">:c</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>reject <span class="token punctuation">{</span> <span class="token operator">|</span>_<span class="token punctuation">,</span> v<span class="token operator">|</span> v<span class="token punctuation">.</span>even<span class="token operator">?</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; { :a =&gt; 1, :c =&gt; 3 }</span>
<span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">:c</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>reject <span class="token punctuation">{</span> <span class="token operator">|</span>k<span class="token punctuation">,</span> _<span class="token operator">|</span> k <span class="token operator">==</span> <span class="token symbol">:b</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; { :a =&gt; 1, :c =&gt; 3 }</span>

</code></pre></div><h2 id="getting-all-keys-or-values-of-hash"><a href="#getting-all-keys-or-values-of-hash" class="header-anchor">#</a> Getting all keys or values of hash</h2> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> biz<span class="token punctuation">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">.</span>keys   <span class="token comment"># =&gt; [:foo, :biz]</span>
<span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> biz<span class="token punctuation">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">.</span>values <span class="token comment"># =&gt; [&quot;bar&quot;, &quot;baz&quot;]</span>
<span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> biz<span class="token punctuation">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">.</span>to_a   <span class="token comment"># =&gt; [[:foo, &quot;bar&quot;], [:biz, &quot;baz&quot;]]</span>
<span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> biz<span class="token punctuation">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token keyword">each</span>   <span class="token comment">#&lt;Enumerator: {:foo=&gt;&quot;bar&quot;, :biz=&gt;&quot;baz&quot;}:each&gt;</span>

</code></pre></div><h2 id="overriding-hash-function"><a href="#overriding-hash-function" class="header-anchor">#</a> Overriding hash function</h2> <p>Ruby hashes use the methods <code>hash</code> and <code>eql?</code> to perform the hash operation and assign objects stored in the hash to internal hash bins. The default implementation of <code>hash</code> in Ruby is the <a href="https://en.wikipedia.org/wiki/MurmurHash" target="_blank" rel="noopener noreferrer">murmur hash function<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/ruby/ruby/blob/1b5acebef2d447a3dbed6cf5e146fda74b81f10d/st.c" target="_blank" rel="noopener noreferrer">over all member fields of the hashed object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. To override this behavior it is possible to override <code>hash</code> and <code>eql?</code> methods.</p> <p>As with other hash implementations, two objects a and b, will be hashed to the same bucket if <code>a.hash == b.hash</code> and will be deemed identical if <code>a.eql?(b)</code>. Thus, when reimplementing <code>hash</code> and <code>eql?</code> one should take care to ensure that if <code>a</code> and <code>b</code> are equal under <code>eql?</code> they must return the same <code>hash</code> value. Otherwise this might result in duplicate entries in a hash. Conversely, a poor choice in <code>hash</code> implementation might lead many objects to share the same hash bucket, effectively destroying the O(1) look-up time and causing O(n) for calling <code>eql?</code> on all objects.</p> <p>In the example below only the instance of class <code>A</code> is stored as a key, as it was added first:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">A</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span><span class="token punctuation">(</span>hash_value<span class="token punctuation">)</span>
    <span class="token variable">@hash_value</span> <span class="token operator">=</span> hash_value
  <span class="token keyword">end</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">hash</span></span>
    <span class="token variable">@hash_value</span> <span class="token comment"># Return the value given externally</span>
  <span class="token keyword">end</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">eql</span></span><span class="token operator">?</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>hash <span class="token operator">==</span> b<span class="token punctuation">.</span>hash
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token operator">&lt;</span> <span class="token constant">A</span>
<span class="token keyword">end</span>

a <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

h <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
h<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>

<span class="token keyword">raise</span> <span class="token string">&quot;error&quot;</span> <span class="token keyword">unless</span> h<span class="token punctuation">.</span>size <span class="token operator">==</span> <span class="token number">1</span>
<span class="token keyword">raise</span> <span class="token string">&quot;error&quot;</span> <span class="token keyword">unless</span> h<span class="token punctuation">.</span><span class="token keyword">include</span><span class="token operator">?</span> b
<span class="token keyword">raise</span> <span class="token string">&quot;error&quot;</span> <span class="token keyword">unless</span> h<span class="token punctuation">.</span><span class="token keyword">include</span><span class="token operator">?</span> a

</code></pre></div><h2 id="modifying-keys-and-values"><a href="#modifying-keys-and-values" class="header-anchor">#</a> Modifying keys and values</h2> <p>You can create a new hash with the keys or values modified, indeed you can also add or delete keys, using <a href="http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-inject" target="_blank" rel="noopener noreferrer">inject<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (AKA, <a href="https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-reduce" target="_blank" rel="noopener noreferrer">reduce<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). For example to produce a hash with stringified keys and upper case values:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>fruit <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> shape<span class="token punctuation">:</span> <span class="token string">'round'</span> <span class="token punctuation">}</span>
<span class="token comment"># =&gt; {:name=&gt;&quot;apple&quot;, :color=&gt;&quot;green&quot;, :shape=&gt;&quot;round&quot;}</span>

new_fruit <span class="token operator">=</span> fruit<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>memo<span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token operator">|</span> memo<span class="token punctuation">[</span>k<span class="token punctuation">.</span>to_s<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">.</span>upcase<span class="token punctuation">;</span> memo <span class="token punctuation">}</span>

<span class="token comment"># =&gt; new_fruit is {&quot;name&quot;=&gt;&quot;APPLE&quot;, &quot;color&quot;=&gt;&quot;GREEN&quot;, &quot;shape&quot;=&gt;&quot;ROUND&quot;}</span>

</code></pre></div><p>Hash is an enumerable, in essence a collection of key/value pairs. Therefore is has methods such as <code>each</code>, <code>map</code> and <code>inject</code>.</p> <p>For every key/value pair in the hash the given block is evaluated, the value of memo on the first run is the seed value passed to <code>inject</code>, in our case an empty hash, <code>{}</code>. The value of <code>memo</code> for subsequent evaluations is the returned value of the previous blocks evaluation, this is why we modify <code>memo</code> by setting a key with a value and then return <code>memo</code> at the end. The return value of the final blocks evaluation is the return value of <code>inject</code>, in our case <code>memo</code>.</p> <p>To avoid the having to provide the final value, you could use <a href="http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-each_with_object" target="_blank" rel="noopener noreferrer">each_with_object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> instead:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>new_fruit <span class="token operator">=</span> fruit<span class="token punctuation">.</span>each_with_object<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> memo<span class="token operator">|</span> memo<span class="token punctuation">[</span>k<span class="token punctuation">.</span>to_s<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">.</span>upcase <span class="token punctuation">}</span>

</code></pre></div><p>Or even <a href="https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-map" target="_blank" rel="noopener noreferrer">map<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>new_fruit <span class="token operator">=</span> <span class="token builtin">Hash</span><span class="token punctuation">[</span>fruit<span class="token punctuation">.</span>map<span class="token punctuation">{</span> <span class="token operator">|</span>k<span class="token punctuation">,</span>v<span class="token operator">|</span> <span class="token punctuation">[</span>k<span class="token punctuation">.</span>to_s<span class="token punctuation">,</span> v<span class="token punctuation">.</span>upcase<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>

</code></pre></div><p>(See <a href="http://stackoverflow.com/a/5189259/7948068" target="_blank" rel="noopener noreferrer">this answer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more details, including how to manipulate hashes in place.)</p> <h2 id="set-operations-on-hashes"><a href="#set-operations-on-hashes" class="header-anchor">#</a> Set Operations on Hashes</h2> <li>
**Intersection of Hashes**
To get the intersection of two hashes, return the shared keys the values of which are equal:
<div class="language-ruby extra-class"><pre class="language-ruby"><code>hash1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token punctuation">}</span>
hash2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">:c</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">}</span>
hash1<span class="token punctuation">.</span>select <span class="token punctuation">{</span> <span class="token operator">|</span>k<span class="token punctuation">,</span> v<span class="token operator">|</span> <span class="token punctuation">(</span>hash2<span class="token punctuation">.</span><span class="token keyword">include</span><span class="token operator">?</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> hash2<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> v<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; { :b =&gt; 2 }</span>

</code></pre></div></li> <li>
**Union (merge) of hashes:**
keys in a hash are unique, if a key occurs in both hashes which are to be merged, the one from the hash that `merge` is called on is overwritten:
<div class="language-ruby extra-class"><pre class="language-ruby"><code>hash1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token symbol">:a</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token punctuation">}</span>
hash2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token symbol">:b</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token symbol">:c</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token punctuation">}</span>

hash1<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>hash2<span class="token punctuation">)</span> <span class="token comment"># =&gt; { :a =&gt; 1, :b =&gt; 4, :c =&gt; 3 }</span>
hash2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>hash1<span class="token punctuation">)</span> <span class="token comment"># =&gt; { :b =&gt; 2, :c =&gt; 3, :a =&gt; 1 }</span>

</code></pre></div></li> <h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <li>
{ first_name: &quot;Noel&quot;, second_name: &quot;Edmonds&quot; }
</li> <li>
{ :first_name =&gt; &quot;Noel&quot;, :second_name =&gt; &quot;Edmonds&quot; }
</li> <li>
{ &quot;First Name&quot; =&gt; &quot;Noel&quot;, &quot;Second Name&quot; =&gt; &quot;Edmonds&quot; }
</li> <li>
{ first_key =&gt; first_value, second_key =&gt; second_value }
</li> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>Hashes in Ruby map keys to values using a hash table.</p> <p>Any hashable object can be used as keys. However, it's very common to use a <code>Symbol</code> as it is generally more efficient in several Ruby versions, due to the reduced object allocation.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span> key1<span class="token punctuation">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> key2<span class="token punctuation">:</span> <span class="token string">&quot;baz&quot;</span>  <span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/ruby/hashes.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ruby/methods.html" class="prev">
        Methods
      </a></span> <span class="next"><a href="/ruby/blocks-and-procs-and-lambdas.html">
        Blocks and Procs and Lambdas
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/3079.722ef865.js" defer></script>
  </body>
</html>
