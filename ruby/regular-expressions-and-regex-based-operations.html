<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ruby - Regular Expressions and Regex Based Operations</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="=~ operator, Regular Expressions in Case Statements, Groups, named and otherwise., Quantifiers, Character classes, Defining a Regexp, match? - Boolean Result, Common quick usage">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Ruby - Regular Expressions and Regex Based Operations">
    <meta property="og:description" content="=~ operator, Regular Expressions in Case Statements, Groups, named and otherwise., Quantifiers, Character classes, Defining a Regexp, match? - Boolean Result, Common quick usage">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/ruby/regular-expressions-and-regex-based-operations.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Ruby - Regular Expressions and Regex Based Operations">
    <meta name="twitter:description" content="=~ operator, Regular Expressions in Case Statements, Groups, named and otherwise., Quantifiers, Character classes, Defining a Regexp, match? - Boolean Result, Common quick usage">
    <meta name="twitter:url" content="/ruby/regular-expressions-and-regex-based-operations.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/3108.01fe3ae6.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Ruby</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ruby/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/ruby/installation.html" class="sidebar-link">Installation</a></li><li><a href="/ruby/getting-started-with-ruby-language.html" class="sidebar-link">Getting started with Ruby Language</a></li><li><a href="/ruby/casting-type-conversion.html" class="sidebar-link">Casting (type conversion)</a></li><li><a href="/ruby/operators.html" class="sidebar-link">Operators</a></li><li><a href="/ruby/variable-scope-and-visibility.html" class="sidebar-link">Variable Scope and Visibility</a></li><li><a href="/ruby/environment-variables.html" class="sidebar-link">Environment Variables</a></li><li><a href="/ruby/constants.html" class="sidebar-link">Constants</a></li><li><a href="/ruby/special-constants-in-ruby.html" class="sidebar-link">Special Constants in Ruby</a></li><li><a href="/ruby/comments.html" class="sidebar-link">Comments</a></li><li><a href="/ruby/arrays.html" class="sidebar-link">Arrays</a></li><li><a href="/ruby/multidimensional-arrays.html" class="sidebar-link">Multidimensional Arrays</a></li><li><a href="/ruby/strings.html" class="sidebar-link">Strings</a></li><li><a href="/ruby/datetime.html" class="sidebar-link">DateTime</a></li><li><a href="/ruby/time.html" class="sidebar-link">Time</a></li><li><a href="/ruby/numbers.html" class="sidebar-link">Numbers</a></li><li><a href="/ruby/symbols.html" class="sidebar-link">Symbols</a></li><li><a href="/ruby/comparable.html" class="sidebar-link">Comparable</a></li><li><a href="/ruby/control-flow.html" class="sidebar-link">Control Flow</a></li><li><a href="/ruby/methods.html" class="sidebar-link">Methods</a></li><li><a href="/ruby/hashes.html" class="sidebar-link">Hashes</a></li><li><a href="/ruby/blocks-and-procs-and-lambdas.html" class="sidebar-link">Blocks and Procs and Lambdas</a></li><li><a href="/ruby/iteration.html" class="sidebar-link">Iteration</a></li><li><a href="/ruby/exceptions.html" class="sidebar-link">Exceptions</a></li><li><a href="/ruby/enumerators.html" class="sidebar-link">Enumerators</a></li><li><a href="/ruby/enumerable-in-ruby.html" class="sidebar-link">Enumerable in Ruby</a></li><li><a href="/ruby/classes.html" class="sidebar-link">Classes</a></li><li><a href="/ruby/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/ruby/method-missing.html" class="sidebar-link">method_missing</a></li><li><a href="/ruby/regular-expressions-and-regex-based-operations.html" aria-current="page" class="active sidebar-link">Regular Expressions and Regex Based Operations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#operator" class="sidebar-link">=~ operator</a></li><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#regular-expressions-in-case-statements" class="sidebar-link">Regular Expressions in Case Statements</a></li><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#groups-named-and-otherwise" class="sidebar-link">Groups, named and otherwise.</a></li><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#quantifiers" class="sidebar-link">Quantifiers</a></li><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#character-classes" class="sidebar-link">Character classes</a></li><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#defining-a-regexp" class="sidebar-link">Defining a Regexp</a></li><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#match-boolean-result" class="sidebar-link">match? - Boolean Result</a></li><li class="sidebar-sub-header"><a href="/ruby/regular-expressions-and-regex-based-operations.html#common-quick-usage" class="sidebar-link">Common quick usage</a></li></ul></li><li><a href="/ruby/file-and-i-o-operations.html" class="sidebar-link">File and I/O Operations</a></li><li><a href="/ruby/ruby-access-modifiers.html" class="sidebar-link">Ruby Access Modifiers</a></li><li><a href="/ruby/design-patterns-and-idioms-in-ruby.html" class="sidebar-link">Design Patterns and Idioms in Ruby</a></li><li><a href="/ruby/loading-source-files.html" class="sidebar-link">Loading Source Files</a></li><li><a href="/ruby/thread.html" class="sidebar-link">Thread</a></li><li><a href="/ruby/range.html" class="sidebar-link">Range</a></li><li><a href="/ruby/modules.html" class="sidebar-link">Modules</a></li><li><a href="/ruby/introspection-in-ruby.html" class="sidebar-link">Introspection in Ruby</a></li><li><a href="/ruby/monkey-patching-in-ruby.html" class="sidebar-link">Monkey Patching in Ruby</a></li><li><a href="/ruby/recursion-in-ruby.html" class="sidebar-link">Recursion in Ruby</a></li><li><a href="/ruby/splat-operator.html" class="sidebar-link">Splat operator (*)</a></li><li><a href="/ruby/json-with-ruby.html" class="sidebar-link">JSON with Ruby</a></li><li><a href="/ruby/pure-rspec-json-api-testing.html" class="sidebar-link">Pure RSpec JSON API testing</a></li><li><a href="/ruby/gem-creation-management.html" class="sidebar-link">Gem Creation/Management</a></li><li><a href="/ruby/rbenv.html" class="sidebar-link">rbenv</a></li><li><a href="/ruby/gem-usage.html" class="sidebar-link">Gem Usage</a></li><li><a href="/ruby/singleton-class.html" class="sidebar-link">Singleton Class</a></li><li><a href="/ruby/queue.html" class="sidebar-link">Queue</a></li><li><a href="/ruby/destructuring.html" class="sidebar-link">Destructuring</a></li><li><a href="/ruby/struct.html" class="sidebar-link">Struct</a></li><li><a href="/ruby/metaprogramming.html" class="sidebar-link">Metaprogramming</a></li><li><a href="/ruby/dynamic-evaluation.html" class="sidebar-link">Dynamic Evaluation</a></li><li><a href="/ruby/instance-eval.html" class="sidebar-link">instance_eval</a></li><li><a href="/ruby/message-passing.html" class="sidebar-link">Message Passing</a></li><li><a href="/ruby/keyword-arguments.html" class="sidebar-link">Keyword Arguments</a></li><li><a href="/ruby/truthiness.html" class="sidebar-link">Truthiness</a></li><li><a href="/ruby/implicit-receivers-and-understanding-self.html" class="sidebar-link">Implicit Receivers and Understanding Self</a></li><li><a href="/ruby/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/ruby/refinements.html" class="sidebar-link">Refinements</a></li><li><a href="/ruby/catching-exceptions-with-begin-rescue.html" class="sidebar-link">Catching Exceptions with Begin / Rescue</a></li><li><a href="/ruby/command-line-apps.html" class="sidebar-link">Command Line Apps</a></li><li><a href="/ruby/irb.html" class="sidebar-link">IRB</a></li><li><a href="/ruby/erb.html" class="sidebar-link">ERB</a></li><li><a href="/ruby/generate-a-random-number.html" class="sidebar-link">Generate a random number</a></li><li><a href="/ruby/getting-started-with-hanami.html" class="sidebar-link">Getting started with Hanami</a></li><li><a href="/ruby/optionparser.html" class="sidebar-link">OptionParser</a></li><li><a href="/ruby/operating-system-or-shell-commands.html" class="sidebar-link">Operating System or Shell commands</a></li><li><a href="/ruby/c-extensions.html" class="sidebar-link">C Extensions</a></li><li><a href="/ruby/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/ruby/ruby-version-manager.html" class="sidebar-link">Ruby Version Manager</a></li><li><a href="/ruby/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="regular-expressions-and-regex-based-operations"><a href="#regular-expressions-and-regex-based-operations" class="header-anchor">#</a> Regular Expressions and Regex Based Operations</h1> <h2 id="operator"><a href="#operator" class="header-anchor">#</a> =~ operator</h2> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">if</span> <span class="token operator">/</span>hay<span class="token operator">/</span> <span class="token operator">=</span><span class="token operator">~</span> <span class="token string">'haystack'</span>
  puts <span class="token string">&quot;There is hay in the word haystack&quot;</span>
<span class="token keyword">end</span>

</code></pre></div><p><strong>Note:</strong> The order <strong>is significant</strong>. Though <code>'haystack' =~ /hay/</code> is in most cases an equivalent, side effects might differ:</p> <ul><li>Strings captured from named capture groups are assigned to local variables only when <code>Regexp#=~</code> is called (<a href="http://ruby-doc.org/core-2.3.1/String.html#method-i-3D-7E" target="_blank" rel="noopener noreferrer"><code>regexp =~ str</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>);</li> <li>Since the right operand might be is an arbitrary object, for <code>regexp =~ str</code> there will be called either <code>Regexp#=~</code> or <code>String#=~</code>.</li></ul> <p>Note that this does not return a true/false value, it instead returns either the index of the match if found, or nil if not found. Because all integers in ruby are truthy (including 0) and nil is falsy, this works. If you want a boolean value, use <code>#===</code> as shown in <a href="http://stackoverflow.com/documentation/ruby/1357/regular-expressions-and-regex-based-operations/4424/simple-regex-match#t=201607221936139047493" target="_blank" rel="noopener noreferrer">another example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="regular-expressions-in-case-statements"><a href="#regular-expressions-in-case-statements" class="header-anchor">#</a> Regular Expressions in Case Statements</h2> <p>You can test if a string matches several regular expressions using a switch statement.</p> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">case</span> <span class="token string">&quot;Ruby is #1!&quot;</span>
<span class="token keyword">when</span> <span class="token regex">/\APython/</span>
    puts <span class="token string">&quot;Boooo.&quot;</span>
<span class="token keyword">when</span> <span class="token regex">/\ARuby/</span>
    puts <span class="token string">&quot;You are right.&quot;</span>
<span class="token keyword">else</span> 
    puts <span class="token string">&quot;Sorry, I didn't understand that.&quot;</span>
<span class="token keyword">end</span>

</code></pre></div><p>This works because case statements are checked for equality using the <code>===</code> operator, not the <code>==</code> operator. When a regex is on the left hand side of a comparison using <code>===</code>, it will test a string to see if it matches.</p> <h2 id="groups-named-and-otherwise"><a href="#groups-named-and-otherwise" class="header-anchor">#</a> Groups, named and otherwise.</h2> <p>Ruby extends the standard group syntax <code>(...)</code> with a named group, <code>(?&lt;name&gt;...)</code>. This allows for extraction by name instead of having to count how many groups you have.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>name_reg <span class="token operator">=</span> <span class="token regex">/h(i|ello), my name is (?&lt;name&gt;.*)/i</span> <span class="token comment">#i means case insensitive</span>

name_input <span class="token operator">=</span> <span class="token string">&quot;Hi, my name is Zaphod Beeblebrox&quot;</span>

match_data <span class="token operator">=</span> name_reg<span class="token punctuation">.</span>match<span class="token punctuation">(</span>name_input<span class="token punctuation">)</span> <span class="token comment">#returns either a MatchData object or nil</span>
match_data <span class="token operator">=</span> name_input<span class="token punctuation">.</span>match<span class="token punctuation">(</span>name_reg<span class="token punctuation">)</span> <span class="token comment">#works either way</span>

<span class="token keyword">if</span> match_data<span class="token punctuation">.</span><span class="token keyword">nil</span><span class="token operator">?</span> <span class="token comment">#Always check for nil! Common error.</span>
  puts <span class="token string">&quot;No match&quot;</span>
<span class="token keyword">else</span>
  match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;Hi, my name is Zaphod Beeblebrox&quot;</span>
  match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;i&quot; #the first group, (i|ello)</span>
  match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;Zaphod Beeblebrox&quot;</span>
  <span class="token comment">#Because it was a named group, we can get it by name</span>
  match<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span>  <span class="token comment">#=&gt; &quot;Zaphod Beeblebrox&quot;</span>
  match<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;Zaphod Beeblebrox&quot;</span>
  puts <span class="token string">&quot;Hello <span class="token interpolation"><span class="token delimiter tag">#{</span>match<span class="token punctuation">[</span><span class="token symbol">:name</span><span class="token punctuation">]</span><span class="token delimiter tag">}</span></span>!&quot;</span>
<span class="token keyword">end</span>

</code></pre></div><p>The index of the match is counted based on the order of the left parentheses (with the entire regex being the first group at index 0)</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>reg <span class="token operator">=</span> <span class="token regex">/(((a)b)c)(d)/</span>
match <span class="token operator">=</span> reg<span class="token punctuation">.</span>match <span class="token string">'abcd'</span>
match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;abcd&quot;</span>
match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;abc&quot;</span>
match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;ab&quot;</span>
match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;a&quot;</span>
match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token comment">#=&gt; &quot;d&quot;</span>

</code></pre></div><h2 id="quantifiers"><a href="#quantifiers" class="header-anchor">#</a> Quantifiers</h2> <p>Quantifiers allows to specify count of repeated strings.</p> <li>
Zero or one:
<div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/a?/</span>

</code></pre></div></li> <li>
Zero or many:
<div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/a*/</span>

</code></pre></div></li> <li>
One or many:
<div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/a+/</span>

</code></pre></div></li> <li>
Exact number:
<div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/a{2,4}/</span> <span class="token comment"># Two, three or four</span>
<span class="token regex">/a{2,}/</span>  <span class="token comment"># Two or more</span>
<span class="token regex">/a{,4}/</span>  <span class="token comment"># Less than four (including zero)</span>

</code></pre></div></li> <p>By default, <a href="https://ruby-doc.org/core-2.1.0/Regexp.html#class-Regexp-label-Repetition" target="_blank" rel="noopener noreferrer">quantifiers are greedy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which means they take as many characters as they can while still making a match. Normally this is not noticeable:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span>site<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token constant">Stack</span> <span class="token constant">Exchange</span><span class="token operator">/</span> <span class="token operator">=</span><span class="token operator">~</span> <span class="token string">'Motor Vehicle Maintenance &amp; Repair Stack Exchange'</span>

</code></pre></div><p>The named capture group <code>site</code> will be set to ''Motor Vehicle Maintenance &amp; Repair' as expected. But if 'Stack Exchange' is an optional part of the string (because it could be 'Stack Overflow' instead), the naive solution will not work as expected:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/(?&lt;site&gt;.*)( Stack Exchange)?/</span>

</code></pre></div><p>This version will still match, but the named capture will include 'Stack Exchange' since <code>*</code> greedily eats those characters. The solution is to add another question mark to make the <code>*</code> lazy:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/(?&lt;site&gt;.*?)( Stack Exchange)?/</span>

</code></pre></div><p><strong>Appending <code>?</code> to any quantifier will make it lazy.</strong></p> <h2 id="character-classes"><a href="#character-classes" class="header-anchor">#</a> Character classes</h2> <p>Describes ranges of symbols</p> <p>You can enumerate symbols explicitly</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/[abc]/</span> <span class="token comment"># 'a' or 'b' or 'c'</span>

</code></pre></div><p>Or use ranges</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/[a-z]/</span> <span class="token comment"># from 'a' to 'z'</span>

</code></pre></div><p>It is possible to combine ranges and single symbols</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/[a-cz]/</span> <span class="token comment"># 'a' or 'b' or 'c' or 'z'</span>

</code></pre></div><p>Leading dash (<code>-</code>) is treated as charachter</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/[-a-c]/</span> <span class="token comment"># '-' or 'a' or 'b' or 'c'</span>

</code></pre></div><p>Classes can be negative when preceding symbols with <code>^</code></p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/[^a-c]/</span> <span class="token comment"># Not 'a', 'b' or 'c'</span>

</code></pre></div><p>There are some shortcuts for widespread classes and special charachters, plus line endings</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">^</span>  <span class="token comment"># Start of line</span>
$  <span class="token comment"># End of line</span>
\<span class="token constant">A</span> <span class="token comment"># Start of string</span>
\<span class="token constant">Z</span> <span class="token comment"># End of string, excluding any new line at the end of string</span>
\z <span class="token comment"># End of string</span>
<span class="token punctuation">.</span>  <span class="token comment"># Any single character</span>
\s <span class="token comment"># Any whitespace character</span>
\<span class="token constant">S</span> <span class="token comment"># Any non-whitespace character</span>
\d <span class="token comment"># Any digit</span>
\<span class="token constant">D</span> <span class="token comment"># Any non-digit</span>
\w <span class="token comment"># Any word character (letter, number, underscore)</span>
\<span class="token constant">W</span> <span class="token comment"># Any non-word character</span>
\b <span class="token comment"># Any word boundary</span>

</code></pre></div><p><code>\n</code> will be understood simply as new line</p> <p>To escape any reserved charachter, such as <code>/</code> or <code>[]</code> and others use backslash (left slash)</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>\\ <span class="token comment"># =&gt; \</span>
\<span class="token punctuation">[</span>\<span class="token punctuation">]</span> <span class="token comment"># =&gt; []</span>

</code></pre></div><h2 id="defining-a-regexp"><a href="#defining-a-regexp" class="header-anchor">#</a> Defining a Regexp</h2> <p>A Regexp can be created in three different ways in Ruby.</p> <li>
using slashes: `/ /`
</li> <li>
using `%r{}`
</li> <li>
using `Regex.new`
<div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment">#The following forms are equivalent</span>
regexp_slash <span class="token operator">=</span> <span class="token regex">/hello/</span>
regexp_bracket <span class="token operator">=</span> <span class="token regex">%r{hello}</span>
regexp_new <span class="token operator">=</span> <span class="token builtin">Regexp</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>

string_to_match <span class="token operator">=</span> <span class="token string">&quot;hello world!&quot;</span>

<span class="token comment">#All of these will return a truthy value</span>
string_to_match <span class="token operator">=</span><span class="token operator">~</span> regexp_slash    <span class="token comment"># =&gt; 0</span>
string_to_match <span class="token operator">=</span><span class="token operator">~</span> regexp_bracket  <span class="token comment"># =&gt; 0</span>
string_to_match <span class="token operator">=</span><span class="token operator">~</span> regexp_new      <span class="token comment"># =&gt; 0</span>

</code></pre></div></li> <h2 id="match-boolean-result"><a href="#match-boolean-result" class="header-anchor">#</a> match? - Boolean Result</h2> <p>Returns <code>true</code> or <code>false</code>, which indicates whether the regexp is matched or not without updating <code>$~</code> and other related variables. If the second parameter is present, it specifies the position in the string to begin the search.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token regex">/R.../</span><span class="token punctuation">.</span>match<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string">&quot;Ruby&quot;</span><span class="token punctuation">)</span>    <span class="token comment">#=&gt; true</span>
<span class="token regex">/R.../</span><span class="token punctuation">.</span>match<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string">&quot;Ruby&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">#=&gt; false</span>
<span class="token regex">/P.../</span><span class="token punctuation">.</span>match<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string">&quot;Ruby&quot;</span><span class="token punctuation">)</span>    <span class="token comment">#=&gt; false</span>

</code></pre></div><p>Ruby 2.4+</p> <h2 id="common-quick-usage"><a href="#common-quick-usage" class="header-anchor">#</a> Common quick usage</h2> <p>Regular expressions are often used in methods as parameters to check if other strings are present or to search and/or replace strings.</p> <p>You'll often see the following:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>string <span class="token operator">=</span> <span class="token string">&quot;My not so long string&quot;</span>
string<span class="token punctuation">[</span><span class="token operator">/</span>so<span class="token operator">/</span><span class="token punctuation">]</span> <span class="token comment"># gives so</span>
string<span class="token punctuation">[</span><span class="token operator">/</span>present<span class="token operator">/</span><span class="token punctuation">]</span> <span class="token comment"># gives nil</span>
string<span class="token punctuation">[</span><span class="token operator">/</span>present<span class="token operator">/</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">nil</span><span class="token operator">?</span> <span class="token comment"># gives true</span>

</code></pre></div><p>So you can simply use this as a check if a string contains a substring</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>puts <span class="token string">&quot;found&quot;</span> <span class="token keyword">if</span> string<span class="token punctuation">[</span><span class="token operator">/</span>so<span class="token operator">/</span><span class="token punctuation">]</span>

</code></pre></div><p>More advanced but still short and quick: search for a specific group by using the second parameter, 2 is the second in this example because numbering starts at 1 and not 0, a group is what is enclosed in parentheses.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>string<span class="token punctuation">[</span><span class="token regex">/(n.t).+(l.ng)/</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># gives long</span>

</code></pre></div><p>Also often used: search and replace with <code>sub</code> or <code>gsub</code>, <code>\1</code> gives the first found group, <code>\2</code> the second:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>string<span class="token punctuation">.</span>gsub<span class="token punctuation">(</span><span class="token regex">/(n.t).+(l.ng)/</span><span class="token punctuation">,</span> <span class="token string">'\1 very \2'</span><span class="token punctuation">)</span> <span class="token comment"># My not very long string</span>

</code></pre></div><p>The last result is remembered and can be used on the following lines</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>$<span class="token number">2</span> <span class="token comment"># gives long</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/ruby/regular-expressions-and-regex-based-operations.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ruby/method-missing.html" class="prev">
        method_missing
      </a></span> <span class="next"><a href="/ruby/file-and-i-o-operations.html">
        File and I/O Operations
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/3108.01fe3ae6.js" defer></script>
  </body>
</html>
