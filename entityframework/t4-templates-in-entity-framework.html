<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entity Framework - .t4 templates in entity-framework</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Dynamically adding Interfaces to model, Adding XML Documentation to Entity Classes">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Entity Framework - .t4 templates in entity-framework">
    <meta property="og:description" content="Dynamically adding Interfaces to model, Adding XML Documentation to Entity Classes">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/entityframework/t4-templates-in-entity-framework.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Entity Framework - .t4 templates in entity-framework">
    <meta name="twitter:description" content="Dynamically adding Interfaces to model, Adding XML Documentation to Entity Classes">
    <meta name="twitter:url" content="/entityframework/t4-templates-in-entity-framework.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1064.e3bd228d.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Entity Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/entityframework/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/entityframework/getting-started-with-entity-framework.html" class="sidebar-link">Getting started with Entity Framework</a></li><li><a href="/entityframework/code-first-conventions.html" class="sidebar-link">Code First Conventions</a></li><li><a href="/entityframework/code-first-dataannotations.html" class="sidebar-link">Code First DataAnnotations</a></li><li><a href="/entityframework/entity-framework-code-first.html" class="sidebar-link">Entity Framework Code First</a></li><li><a href="/entityframework/entity-framework-code-first-migrations.html" class="sidebar-link">Entity-framework Code First Migrations</a></li><li><a href="/entityframework/inheritance-with-entityframework-code-first.html" class="sidebar-link">Inheritance with EntityFramework (Code First)</a></li><li><a href="/entityframework/code-first-fluent-api.html" class="sidebar-link">Code First - Fluent API</a></li><li><a href="/entityframework/mapping-relationship-with-entity-framework-code-first-one-to-one-and-variations.html" class="sidebar-link">Mapping relationship with Entity Framework Code First: One-to-one and variations</a></li><li><a href="/entityframework/mapping-relationship-with-entity-framework-code-first-one-to-many-and-many-to-many.html" class="sidebar-link">Mapping relationship with Entity Framework Code First: One-to-many and Many-to-many</a></li><li><a href="/entityframework/database-first-model-generation.html" class="sidebar-link">Database first model generation</a></li><li><a href="/entityframework/complex-types.html" class="sidebar-link">Complex Types</a></li><li><a href="/entityframework/database-initialisers.html" class="sidebar-link">Database Initialisers</a></li><li><a href="/entityframework/tracking-vs-no-tracking.html" class="sidebar-link">Tracking vs. No-Tracking</a></li><li><a href="/entityframework/transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/entityframework/managing-entity-state.html" class="sidebar-link">Managing entity state</a></li><li><a href="/entityframework/loading-related-entities.html" class="sidebar-link">Loading related entities</a></li><li><a href="/entityframework/model-restraints.html" class="sidebar-link">Model Restraints</a></li><li><a href="/entityframework/entity-framework-with-postgresql.html" class="sidebar-link">Entity-Framework  with Postgresql</a></li><li><a href="/entityframework/entity-framework-with-sqlite.html" class="sidebar-link">Entity Framework with SQLite</a></li><li><a href="/entityframework/t4-templates-in-entity-framework.html" aria-current="page" class="active sidebar-link">.t4 templates in entity-framework</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/entityframework/t4-templates-in-entity-framework.html#dynamically-adding-interfaces-to-model" class="sidebar-link">Dynamically adding Interfaces to model</a></li><li class="sidebar-sub-header"><a href="/entityframework/t4-templates-in-entity-framework.html#adding-xml-documentation-to-entity-classes" class="sidebar-link">Adding XML Documentation to Entity Classes</a></li></ul></li><li><a href="/entityframework/advanced-mapping-scenarios-entity-splitting-table-splitting.html" class="sidebar-link">Advanced mapping scenarios: entity splitting, table splitting</a></li><li><a href="/entityframework/best-practices-for-entity-framework-simple-professional.html" class="sidebar-link">Best Practices For Entity Framework (Simple &amp; Professional)</a></li><li><a href="/entityframework/optimization-techniques-in-ef.html" class="sidebar-link">Optimization Techniques in EF</a></li><li><a href="/entityframework/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="t4-templates-in-entity-framework"><a href="#t4-templates-in-entity-framework" class="header-anchor">#</a> .t4 templates in entity-framework</h1> <h2 id="dynamically-adding-interfaces-to-model"><a href="#dynamically-adding-interfaces-to-model" class="header-anchor">#</a> Dynamically adding Interfaces to model</h2> <p>When working with existing model that is quite big and is being regenerated quite often in cases where abstraction needed it might be costly to manually go around redecorating model with interfaces. In such cases one might want to add some dynamic behavior to model generation.</p> <p>Following example will show how automatically add interfaces on classes that have specific column names:</p> <p>In your model go to <code>.tt</code> file modify the <code>EntityClassOpening</code> method in following way, this will add <code>IPolicyNumber</code> interface on entities that have <code>POLICY_NO</code> column, and <code>IUniqueId</code> on <code>UNIQUE_ID</code></p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">EntityClassOpening</span><span class="token punctuation">(</span><span class="token class-name">EntityType</span> entity<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> stringsToMatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> <span class="token string">&quot;POLICY_NO&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;IPolicyNumber&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&quot;UNIQUE_ID&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;IUniqueId&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span>
        CultureInfo<span class="token punctuation">.</span>InvariantCulture<span class="token punctuation">,</span>
        <span class="token string">&quot;{0} {1}partial class {2}{3}{4}&quot;</span><span class="token punctuation">,</span>
        Accessibility<span class="token punctuation">.</span><span class="token function">ForType</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">,</span>
        _code<span class="token punctuation">.</span><span class="token function">SpaceAfter</span><span class="token punctuation">(</span>_code<span class="token punctuation">.</span><span class="token function">AbstractOption</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        _code<span class="token punctuation">.</span><span class="token function">Escape</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">,</span>
        _code<span class="token punctuation">.</span><span class="token function">StringBefore</span><span class="token punctuation">(</span><span class="token string">&quot; : &quot;</span><span class="token punctuation">,</span> _typeMapper<span class="token punctuation">.</span><span class="token function">GetTypeName</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span>BaseType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        stringsToMatch<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> entity<span class="token punctuation">.</span>Properties<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> n<span class="token punctuation">.</span>Name <span class="token operator">==</span> o<span class="token punctuation">.</span>Key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">,</span> stringsToMatch<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span>Properties<span class="token punctuation">,</span> l <span class="token operator">=&gt;</span> l<span class="token punctuation">.</span>Key<span class="token punctuation">,</span> r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  l<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>This is one specific case but it shows a power of being able to modify <code>.tt</code> templates.</p> <h2 id="adding-xml-documentation-to-entity-classes"><a href="#adding-xml-documentation-to-entity-classes" class="header-anchor">#</a> Adding XML Documentation to Entity Classes</h2> <p>On every generated model classes there are no documentation comments added by default. If you want to use XML documentation comments for every generated entity classes, find this part inside <strong>[modelname]</strong>.tt (<strong>modelname</strong> is current EDMX file name):</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token keyword">in</span> typeMapper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetItemsToGenerate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>EntityType<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>itemCollection<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    fileManager<span class="token punctuation">.</span><span class="token function">StartNewFile</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">&quot;.cs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">BeginNamespace</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// used to write model namespace</span>
<span class="token preprocessor property">#&gt;</span>
<span class="token operator">&lt;</span>#<span class="token operator">=</span>codeStringGenerator<span class="token punctuation">.</span><span class="token function">UsingDirectives</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">inHeader</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span>#<span class="token operator">&gt;</span> 

</code></pre></div><p>You can add the XML documentation comments before <code>UsingDirectives</code> line as shown in example below:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token keyword">in</span> typeMapper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetItemsToGenerate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>EntityType<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>itemCollection<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    fileManager<span class="token punctuation">.</span><span class="token function">StartNewFile</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">&quot;.cs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">BeginNamespace</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#&gt;</span>
<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// &lt;#=entity.Name#&gt; model entity class.</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token operator">&lt;</span>#<span class="token operator">=</span>codeStringGenerator<span class="token punctuation">.</span><span class="token function">UsingDirectives</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">inHeader</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span>#<span class="token operator">&gt;</span> 

</code></pre></div><p>The generated documentation comment should be includes entity name as given below.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Example model entity class.</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Example</span>
<span class="token punctuation">{</span>
    <span class="token comment">// model contents</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/entityframework/t4-templates-in-entity-framework.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/entityframework/entity-framework-with-sqlite.html" class="prev">
        Entity Framework with SQLite
      </a></span> <span class="next"><a href="/entityframework/advanced-mapping-scenarios-entity-splitting-table-splitting.html">
        Advanced mapping scenarios: entity splitting, table splitting
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1064.e3bd228d.js" defer></script>
  </body>
</html>
