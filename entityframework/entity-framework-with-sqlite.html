<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entity Framework - Entity Framework with SQLite</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Setting up a project to use Entity Framework with an SQLite provider">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Entity Framework - Entity Framework with SQLite">
    <meta property="og:description" content="Setting up a project to use Entity Framework with an SQLite provider">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/entityframework/entity-framework-with-sqlite.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Entity Framework - Entity Framework with SQLite">
    <meta name="twitter:description" content="Setting up a project to use Entity Framework with an SQLite provider">
    <meta name="twitter:url" content="/entityframework/entity-framework-with-sqlite.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1055.681b592f.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Entity Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/entityframework/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/entityframework/getting-started-with-entity-framework.html" class="sidebar-link">Getting started with Entity Framework</a></li><li><a href="/entityframework/code-first-conventions.html" class="sidebar-link">Code First Conventions</a></li><li><a href="/entityframework/code-first-dataannotations.html" class="sidebar-link">Code First DataAnnotations</a></li><li><a href="/entityframework/entity-framework-code-first.html" class="sidebar-link">Entity Framework Code First</a></li><li><a href="/entityframework/entity-framework-code-first-migrations.html" class="sidebar-link">Entity-framework Code First Migrations</a></li><li><a href="/entityframework/inheritance-with-entityframework-code-first.html" class="sidebar-link">Inheritance with EntityFramework (Code First)</a></li><li><a href="/entityframework/code-first-fluent-api.html" class="sidebar-link">Code First - Fluent API</a></li><li><a href="/entityframework/mapping-relationship-with-entity-framework-code-first-one-to-one-and-variations.html" class="sidebar-link">Mapping relationship with Entity Framework Code First: One-to-one and variations</a></li><li><a href="/entityframework/mapping-relationship-with-entity-framework-code-first-one-to-many-and-many-to-many.html" class="sidebar-link">Mapping relationship with Entity Framework Code First: One-to-many and Many-to-many</a></li><li><a href="/entityframework/database-first-model-generation.html" class="sidebar-link">Database first model generation</a></li><li><a href="/entityframework/complex-types.html" class="sidebar-link">Complex Types</a></li><li><a href="/entityframework/database-initialisers.html" class="sidebar-link">Database Initialisers</a></li><li><a href="/entityframework/tracking-vs-no-tracking.html" class="sidebar-link">Tracking vs. No-Tracking</a></li><li><a href="/entityframework/transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/entityframework/managing-entity-state.html" class="sidebar-link">Managing entity state</a></li><li><a href="/entityframework/loading-related-entities.html" class="sidebar-link">Loading related entities</a></li><li><a href="/entityframework/model-restraints.html" class="sidebar-link">Model Restraints</a></li><li><a href="/entityframework/entity-framework-with-postgresql.html" class="sidebar-link">Entity-Framework  with Postgresql</a></li><li><a href="/entityframework/entity-framework-with-sqlite.html" aria-current="page" class="active sidebar-link">Entity Framework with SQLite</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/entityframework/entity-framework-with-sqlite.html#setting-up-a-project-to-use-entity-framework-with-an-sqlite-provider" class="sidebar-link">Setting up a project to use Entity Framework with an SQLite provider</a></li></ul></li><li><a href="/entityframework/t4-templates-in-entity-framework.html" class="sidebar-link">.t4 templates in entity-framework</a></li><li><a href="/entityframework/advanced-mapping-scenarios-entity-splitting-table-splitting.html" class="sidebar-link">Advanced mapping scenarios: entity splitting, table splitting</a></li><li><a href="/entityframework/best-practices-for-entity-framework-simple-professional.html" class="sidebar-link">Best Practices For Entity Framework (Simple &amp; Professional)</a></li><li><a href="/entityframework/optimization-techniques-in-ef.html" class="sidebar-link">Optimization Techniques in EF</a></li><li><a href="/entityframework/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="entity-framework-with-sqlite"><a href="#entity-framework-with-sqlite" class="header-anchor">#</a> Entity Framework with SQLite</h1> <p><a href="https://www.sqlite.org/about.html" target="_blank" rel="noopener noreferrer">SQLite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a self-contained, serverless, transactional SQL database. It can be used within a .NET application by utilizing both a freely available .NET SQLite library and Entity Framework SQLite provider. This topic will go into setup and usage of the Entity Framework SQLite provider.</p> <h2 id="setting-up-a-project-to-use-entity-framework-with-an-sqlite-provider"><a href="#setting-up-a-project-to-use-entity-framework-with-an-sqlite-provider" class="header-anchor">#</a> Setting up a project to use Entity Framework with an SQLite provider</h2> <p>The Entity Framework library comes only with an SQL Server provider. To use SQLite will require additional dependencies and configuration. All required dependencies are available on NuGet.</p> <h3 id="install-sqlite-managed-libraries"><a href="#install-sqlite-managed-libraries" class="header-anchor">#</a> Install SQLite Managed Libraries</h3> <p>All of the mananged depedencies can be installed using the NuGet Package Manager Console. Run the command <code>Install-Package System.Data.SQLite</code>.</p> <p><a href="https://i.stack.imgur.com/gQayv.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/gQayv.png" alt="Installing System.Data.SQLite"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>As shown above, when installing <code>System.Data.SQLite</code>, all related managed libraries are installed with it. This includes <code>System.Data.SQLite.EF6</code>, the EF provider for SQLite. The project also now references the assemblies required to use the SQLite provider.</p> <p><a href="https://i.stack.imgur.com/tgCyG.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/tgCyG.png" alt="Project references"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="including-unmanaged-library"><a href="#including-unmanaged-library" class="header-anchor">#</a> Including Unmanaged Library</h3> <p>The SQLite managed libraries are dependent on an unmanaged assembly named <code>SQLite.Interop.dll</code>. It is included with the package assemblies downloaded with the SQLite package, and they are automatically copied into your build directory when you build the project. However, because it's unmanaged, it will not be included in your reference list. But make note, this assembly most be distributed with the application for the SQLite assemblies to work.</p> <p><strong>Note: This assembly is bit-dependent, meaning you will need to include a specific assembly for each bitness you plan to support (x86/x64).</strong></p> <h3 id="editing-the-project-s-app-config"><a href="#editing-the-project-s-app-config" class="header-anchor">#</a> Editing the project's App.config</h3> <p>The <code>app.config</code> file will require some modifications before SQLite can be used as an Entity Framework provider.</p> <h3 id="required-fixes"><a href="#required-fixes" class="header-anchor">#</a> Required Fixes</h3> <p>When installing the package, the <code>app.config</code> file is automatically updated to include the necessary entries for SQLite and SQLite EF. Unfortunately these entries contain some errors. They need to be modified before it will work correctly.</p> <p>First, locate the <code>DbProviderFactories</code>element in the config file. It is within the <code>system.data</code> element and will contain the following</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token operator">&lt;</span>DbProviderFactories<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token keyword">remove</span> invariant<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite.EF6&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token keyword">add</span> name<span class="token operator">=</span><span class="token string">&quot;SQLite Data Provider (Entity Framework 6)&quot;</span> invariant<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite.EF6&quot;</span> description<span class="token operator">=</span><span class="token string">&quot;.NET Framework Data Provider for SQLite (Entity Framework 6)&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite.EF6.SQLiteProviderFactory, System.Data.SQLite.EF6&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token keyword">remove</span> invariant<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token keyword">add</span> name<span class="token operator">=</span><span class="token string">&quot;SQLite Data Provider&quot;</span> invariant<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite&quot;</span> description<span class="token operator">=</span><span class="token string">&quot;.NET Framework Data Provider for SQLite&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite.SQLiteFactory, System.Data.SQLite&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>DbProviderFactories<span class="token operator">&gt;</span>

</code></pre></div><p>This can be simplified to contain a single entry</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token operator">&lt;</span>DbProviderFactories<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token keyword">add</span> name<span class="token operator">=</span><span class="token string">&quot;SQLite Data Provider&quot;</span> invariant<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite.EF6&quot;</span> description<span class="token operator">=</span><span class="token string">&quot;.NET Framework Data Provider for SQLite&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite.SQLiteFactory, System.Data.SQLite&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>DbProviderFactories<span class="token operator">&gt;</span>

</code></pre></div><p>With this, we have specified the EF6 SQLite providers should use the SQLite factory.</p> <h3 id="add-sqlite-connection-string"><a href="#add-sqlite-connection-string" class="header-anchor">#</a> Add SQLite connection string</h3> <p>Connection strings can be added to the configuration file within the root element. Add a connection string for accessing an SQLite database.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token operator">&lt;</span>connectionStrings<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token keyword">add</span> name<span class="token operator">=</span><span class="token string">&quot;TestContext&quot;</span> connectionString<span class="token operator">=</span><span class="token string">&quot;data source=testdb.sqlite;initial catalog=Test;App=EntityFramework;&quot;</span> providerName<span class="token operator">=</span><span class="token string">&quot;System.Data.SQLite.EF6&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>connectionStrings<span class="token operator">&gt;</span>

</code></pre></div><p>The important thing to note here is the <code>provider</code>. It has been set to <code>System.Data.SQLite.EF6</code>. This tells EF that when we use this connection string, we want to use SQLite. The <code>data source</code> specified is just an example and will be dependent on the location and name of your SQLite database.</p> <h3 id="your-first-sqlite-dbcontext"><a href="#your-first-sqlite-dbcontext" class="header-anchor">#</a> Your first SQLite DbContext</h3> <p>With all the installation and configuration complete, you can now start using a <code>DbContext</code> that will work on your SQLite database.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestContext</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DbContext</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">TestContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token string">&quot;name=TestContext&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>By specifying <code>name=TestContext</code>, I have indicating that the TestContext connection string located in the <code>app.config</code>file should be used to create the context. That connection string was configured to use SQLite, so this context will use an SQLite database.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/entityframework/entity-framework-with-sqlite.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/entityframework/entity-framework-with-postgresql.html" class="prev">
        Entity-Framework  with Postgresql
      </a></span> <span class="next"><a href="/entityframework/t4-templates-in-entity-framework.html">
        .t4 templates in entity-framework
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1055.681b592f.js" defer></script>
  </body>
</html>
