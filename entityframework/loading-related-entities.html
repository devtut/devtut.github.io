<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entity Framework - Loading related entities</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Eager loading, Explicit loading, Lazy loading, Projection Queries">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Entity Framework - Loading related entities">
    <meta property="og:description" content="Eager loading, Explicit loading, Lazy loading, Projection Queries">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/entityframework/loading-related-entities.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Entity Framework - Loading related entities">
    <meta name="twitter:description" content="Eager loading, Explicit loading, Lazy loading, Projection Queries">
    <meta name="twitter:url" content="/entityframework/loading-related-entities.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1058.c8b3e320.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Entity Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/entityframework/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/entityframework/getting-started-with-entity-framework.html" class="sidebar-link">Getting started with Entity Framework</a></li><li><a href="/entityframework/code-first-conventions.html" class="sidebar-link">Code First Conventions</a></li><li><a href="/entityframework/code-first-dataannotations.html" class="sidebar-link">Code First DataAnnotations</a></li><li><a href="/entityframework/entity-framework-code-first.html" class="sidebar-link">Entity Framework Code First</a></li><li><a href="/entityframework/entity-framework-code-first-migrations.html" class="sidebar-link">Entity-framework Code First Migrations</a></li><li><a href="/entityframework/inheritance-with-entityframework-code-first.html" class="sidebar-link">Inheritance with EntityFramework (Code First)</a></li><li><a href="/entityframework/code-first-fluent-api.html" class="sidebar-link">Code First - Fluent API</a></li><li><a href="/entityframework/mapping-relationship-with-entity-framework-code-first-one-to-one-and-variations.html" class="sidebar-link">Mapping relationship with Entity Framework Code First: One-to-one and variations</a></li><li><a href="/entityframework/mapping-relationship-with-entity-framework-code-first-one-to-many-and-many-to-many.html" class="sidebar-link">Mapping relationship with Entity Framework Code First: One-to-many and Many-to-many</a></li><li><a href="/entityframework/database-first-model-generation.html" class="sidebar-link">Database first model generation</a></li><li><a href="/entityframework/complex-types.html" class="sidebar-link">Complex Types</a></li><li><a href="/entityframework/database-initialisers.html" class="sidebar-link">Database Initialisers</a></li><li><a href="/entityframework/tracking-vs-no-tracking.html" class="sidebar-link">Tracking vs. No-Tracking</a></li><li><a href="/entityframework/transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/entityframework/managing-entity-state.html" class="sidebar-link">Managing entity state</a></li><li><a href="/entityframework/loading-related-entities.html" aria-current="page" class="active sidebar-link">Loading related entities</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/entityframework/loading-related-entities.html#eager-loading" class="sidebar-link">Eager loading</a></li><li class="sidebar-sub-header"><a href="/entityframework/loading-related-entities.html#explicit-loading" class="sidebar-link">Explicit loading</a></li><li class="sidebar-sub-header"><a href="/entityframework/loading-related-entities.html#lazy-loading" class="sidebar-link">Lazy loading</a></li><li class="sidebar-sub-header"><a href="/entityframework/loading-related-entities.html#projection-queries" class="sidebar-link">Projection Queries</a></li></ul></li><li><a href="/entityframework/model-restraints.html" class="sidebar-link">Model Restraints</a></li><li><a href="/entityframework/entity-framework-with-postgresql.html" class="sidebar-link">Entity-Framework  with Postgresql</a></li><li><a href="/entityframework/entity-framework-with-sqlite.html" class="sidebar-link">Entity Framework with SQLite</a></li><li><a href="/entityframework/t4-templates-in-entity-framework.html" class="sidebar-link">.t4 templates in entity-framework</a></li><li><a href="/entityframework/advanced-mapping-scenarios-entity-splitting-table-splitting.html" class="sidebar-link">Advanced mapping scenarios: entity splitting, table splitting</a></li><li><a href="/entityframework/best-practices-for-entity-framework-simple-professional.html" class="sidebar-link">Best Practices For Entity Framework (Simple &amp; Professional)</a></li><li><a href="/entityframework/optimization-techniques-in-ef.html" class="sidebar-link">Optimization Techniques in EF</a></li><li><a href="/entityframework/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="loading-related-entities"><a href="#loading-related-entities" class="header-anchor">#</a> Loading related entities</h1> <h2 id="eager-loading"><a href="#eager-loading" class="header-anchor">#</a> Eager loading</h2> <p><strong>Eager loading</strong> lets you load all your needed entities at once. If you prefer to get all your entities to work on in one database call, then <strong>Eager loading</strong> is the way to go. It also lets you load multiple levels.</p> <p>You have <strong>two options</strong> to load related entities, you can choose either <strong>strongly typed</strong> or <strong>string</strong> overloads of the <strong>Include</strong> method.</p> <h3 id="strongly-typed"><a href="#strongly-typed" class="header-anchor">#</a> Strongly typed.</h3> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token comment">// Load one company with founder and address details</span>
<span class="token class-name"><span class="token keyword">int</span></span> companyId <span class="token operator">=</span> <span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token class-name">Company</span> company <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Founder<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Addresses<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">SingleOrDefault</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Id <span class="token operator">==</span> companyId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Load 5 companies with address details, also retrieve country and city</span>
<span class="token comment">// information of addresses</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>Company<span class="token punctuation">&gt;</span></span> companies <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Addresses<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>Country<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Addresses<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>City<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>This method is available since Entity Framework 4.1. Make sure you have the reference <code>using System.Data.Entity;</code> set.</p> <h3 id="string-overload"><a href="#string-overload" class="header-anchor">#</a> String overload.</h3> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token comment">// Load one company with founder and address details</span>
<span class="token class-name"><span class="token keyword">int</span></span> companyId <span class="token operator">=</span> <span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token class-name">Company</span> company <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Founder&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Addresses&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">SingleOrDefault</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Id <span class="token operator">==</span> companyId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Load 5 companies with address details, also retrieve country and city</span>
<span class="token comment">// information of addresses</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>Company<span class="token punctuation">&gt;</span></span> companies <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Addresses.Country&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Addresses.City&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="explicit-loading"><a href="#explicit-loading" class="header-anchor">#</a> Explicit loading</h2> <p>After turning <strong>Lazy loading</strong> off you can lazily load entities by explicitly calling <strong>Load</strong> method for entries. <strong>Reference</strong> is used to load single navigation properties, whereas <strong>Collection</strong> is used to get collections.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name">Company</span> company <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Load founder</span>
context<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>company<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Reference</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Founder<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Load addresses</span>
context<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>company<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Collection</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Addresses<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>As it is on <strong>Eager loading</strong> you can use overloads of above methods to load entiteis by their names:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name">Company</span> company <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Load founder</span>
context<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>company<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Reference</span><span class="token punctuation">(</span><span class="token string">&quot;Founder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Load addresses</span>
context<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>company<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Collection</span><span class="token punctuation">(</span><span class="token string">&quot;Addresses&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="filter-related-entities"><a href="#filter-related-entities" class="header-anchor">#</a> Filter related entities.</h3> <p>Using <strong>Query</strong> method we can filter loaded related entities:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name">Company</span> company <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Load addresses which are in Baku</span>
context<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>company<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Collection</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Addresses<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>City<span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">&quot;Baku&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="lazy-loading"><a href="#lazy-loading" class="header-anchor">#</a> Lazy loading</h2> <p><strong>Lazy loading</strong> is enabled by default. Lazy loading is achieved by creating derived proxy classes and overriding virtual navigation proeprties. Lazy loading occurs when property is accessed for the first time.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">int</span></span> companyId <span class="token operator">=</span> <span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token class-name">Company</span> company <span class="token operator">=</span> context<span class="token punctuation">.</span>Companies
    <span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Id <span class="token operator">==</span> companyId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> founder <span class="token operator">=</span> company<span class="token punctuation">.</span>Founder<span class="token punctuation">;</span> <span class="token comment">// Founder is loaded</span>
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">Address</span> address <span class="token keyword">in</span> company<span class="token punctuation">.</span>Addresses<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Address details are loaded one by one.        </span>
<span class="token punctuation">}</span>

</code></pre></div><p>To turn Lazy loading off for specific navigation properties just remove virtual keyword from property declaration:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name">Person</span> Founder <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// &quot;virtual&quot; keyword has been removed</span>

</code></pre></div><p>If you want to completely turn off Lazy loading, then you have to change Configuration, for example, at <strong>Context constructor</strong>:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyContext</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DbContext</span></span>        
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">MyContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token string">&quot;Name=ConnectionString&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span>LazyLoadingEnabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><strong>Note:</strong> Please remember to <strong>turn off</strong> Lazy loading if your are using serialization. Because serializers access every property you are going to load all of them from database. Additionally, you can run into loop between navigation properties.</p> <h2 id="projection-queries"><a href="#projection-queries" class="header-anchor">#</a> Projection Queries</h2> <p>If one needs related data in a denormalized type, or e.g. only a subset of columns one can use projection queries. If there is no reason for using an extra type, there is the possibility to join the values into an <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types" target="_blank" rel="noopener noreferrer">anonymous type<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> dbContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyDbContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> denormalizedType <span class="token operator">=</span> <span class="token keyword">from</span> company <span class="token keyword">in</span> dbContext<span class="token punctuation">.</span>Company
                       <span class="token keyword">where</span> <span class="token class-name">company</span><span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">&quot;MyFavoriteCompany&quot;</span>
                       <span class="token keyword">join</span> founder <span class="token keyword">in</span> dbContext<span class="token punctuation">.</span>Founder
                       <span class="token keyword">on</span> company<span class="token punctuation">.</span>FounderId equals founder<span class="token punctuation">.</span>Id
                       <span class="token keyword">select</span> <span class="token keyword">new</span> 
                       <span class="token punctuation">{</span>
                           CompanyName <span class="token operator">=</span> company<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
                           CompanyId <span class="token operator">=</span> company<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>
                           FounderName <span class="token operator">=</span> founder<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
                           FounderId <span class="token operator">=</span> founder<span class="token punctuation">.</span>Id
                       <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>Or with query-syntax:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name"><span class="token keyword">var</span></span> dbContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyDbContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> denormalizedType <span class="token operator">=</span> dbContext<span class="token punctuation">.</span>Company
                       <span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>dbContext<span class="token punctuation">.</span>Founder<span class="token punctuation">,</span> 
                                    c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>FounderId<span class="token punctuation">,</span>
                                    f <span class="token operator">=&gt;</span> f<span class="token punctuation">.</span>Id <span class="token punctuation">,</span>
                                    <span class="token punctuation">(</span>c<span class="token punctuation">,</span> f<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> 
                                    <span class="token punctuation">{</span>
                                        CompanyName <span class="token operator">=</span> c<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
                                        CompanyId <span class="token operator">=</span> c<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>
                                        FounderName <span class="token operator">=</span> f<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
                                        FounderId <span class="token operator">=</span> f<span class="token punctuation">.</span>Id
                                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                       <span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>cf <span class="token operator">=&gt;</span> cf<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>If models are correctly related you can easily load related data using EntityFramework. You have three options to chose from: <strong>lazy loading</strong>, <strong>eager loading</strong> and <strong>explicit loading</strong>.</p> <p>Models used in examples:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FullName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ShortName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Navigation properties</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">Person</span> Founder <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Address<span class="token punctuation">&gt;</span></span> Addresses <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> 
<span class="token punctuation">{</span>        
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> CompanyId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> CountryId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> CityId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Street <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Navigation properties</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">Company</span> Company <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">Country</span> Country <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">City</span> City <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/entityframework/loading-related-entities.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/entityframework/managing-entity-state.html" class="prev">
        Managing entity state
      </a></span> <span class="next"><a href="/entityframework/model-restraints.html">
        Model Restraints
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1058.c8b3e320.js" defer></script>
  </body>
</html>
