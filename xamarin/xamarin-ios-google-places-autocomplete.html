<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Xamarin - Xamarin iOS Google Places Autocomplete</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Add an autocomplete UI control with results controller.">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Xamarin - Xamarin iOS Google Places Autocomplete">
    <meta property="og:description" content="Add an autocomplete UI control with results controller.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/xamarin/xamarin-ios-google-places-autocomplete.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Xamarin - Xamarin iOS Google Places Autocomplete">
    <meta name="twitter:description" content="Add an autocomplete UI control with results controller.">
    <meta name="twitter:url" content="/xamarin/xamarin-ios-google-places-autocomplete.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/3572.b7952e45.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Xamarin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xamarin/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/xamarin/getting-started-with-xamarin-forms.html" class="sidebar-link">Getting started with Xamarin.Forms</a></li><li><a href="/xamarin/why-xamarin-forms-and-when-to-use-xamarin-forms.html" class="sidebar-link">Why Xamarin Forms and When to use Xamarin Forms</a></li><li><a href="/xamarin/xamarin-forms-layouts.html" class="sidebar-link">Xamarin Forms Layouts</a></li><li><a href="/xamarin/xamarin-relative-layout.html" class="sidebar-link">Xamarin Relative Layout</a></li><li><a href="/xamarin/navigation-in-xamarin-forms.html" class="sidebar-link">Navigation in Xamarin.Forms</a></li><li><a href="/xamarin/xamarin-forms-page.html" class="sidebar-link">Xamarin.Forms Page</a></li><li><a href="/xamarin/xamarin-forms-cells.html" class="sidebar-link">Xamarin.Forms Cells</a></li><li><a href="/xamarin/xamarin-forms-views.html" class="sidebar-link">Xamarin.Forms Views</a></li><li><a href="/xamarin/using-listviews.html" class="sidebar-link">Using ListViews</a></li><li><a href="/xamarin/display-alert.html" class="sidebar-link">Display Alert</a></li><li><a href="/xamarin/accessing-native-features-with-dependencyservice.html" class="sidebar-link">Accessing native features with DependencyService</a></li><li><a href="/xamarin/dependencyservice.html" class="sidebar-link">DependencyService</a></li><li><a href="/xamarin/custom-renderers.html" class="sidebar-link">Custom Renderers</a></li><li><a href="/xamarin/caching.html" class="sidebar-link">Caching</a></li><li><a href="/xamarin/gestures.html" class="sidebar-link">Gestures</a></li><li><a href="/xamarin/data-binding.html" class="sidebar-link">Data Binding</a></li><li><a href="/xamarin/working-with-maps.html" class="sidebar-link">Working with Maps</a></li><li><a href="/xamarin/custom-fonts-in-styles.html" class="sidebar-link">Custom Fonts in Styles</a></li><li><a href="/xamarin/push-notifications.html" class="sidebar-link">Push Notifications</a></li><li><a href="/xamarin/effects.html" class="sidebar-link">Effects</a></li><li><a href="/xamarin/triggers-behaviours.html" class="sidebar-link">Triggers &amp; Behaviours</a></li><li><a href="/xamarin/appsettings-reader-in-xamarin-forms.html" class="sidebar-link">AppSettings Reader in Xamarin.Forms</a></li><li><a href="/xamarin/creating-custom-controls.html" class="sidebar-link">Creating custom controls</a></li><li><a href="/xamarin/working-with-local-databases.html" class="sidebar-link">Working with local databases</a></li><li><a href="/xamarin/carouselview-pre-release-version.html" class="sidebar-link">CarouselView - Pre-release version</a></li><li><a href="/xamarin/exception-handling.html" class="sidebar-link">Exception handling</a></li><li><a href="/xamarin/sql-database-and-api-in-xamarin-forms.html" class="sidebar-link">SQL Database and API in Xamarin Forms.</a></li><li><a href="/xamarin/contact-picker-xamarin-forms-android-and-ios.html" class="sidebar-link">Contact Picker - Xamarin Forms (Android and iOS)</a></li><li><a href="/xamarin/xamarin-plugin.html" class="sidebar-link">Xamarin Plugin</a></li><li><a href="/xamarin/oauth2.html" class="sidebar-link">OAuth2</a></li><li><a href="/xamarin/messagingcenter.html" class="sidebar-link">MessagingCenter</a></li><li><a href="/xamarin/generic-xamarin-forms-app-lifecycle-platform-dependant.html" class="sidebar-link">Generic Xamarin.Forms app lifecycle? Platform-dependant!</a></li><li><a href="/xamarin/platform-specific-behaviour.html" class="sidebar-link">Platform-specific behaviour</a></li><li><a href="/xamarin/platform-specific-visual-adjustments.html" class="sidebar-link">Platform specific visual adjustments</a></li><li><a href="/xamarin/dependency-services.html" class="sidebar-link">Dependency Services</a></li><li><a href="/xamarin/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/xamarin/bdd-unit-testing-in-xamarin-forms.html" class="sidebar-link">BDD Unit Testing in Xamarin.Forms</a></li><li><a href="/xamarin/getting-started-with-xamarin-ios.html" class="sidebar-link">Getting started with Xamarin.iOS</a></li><li><a href="/xamarin/alerts.html" class="sidebar-link">Alerts</a></li><li><a href="/xamarin/touch-id.html" class="sidebar-link">Touch ID</a></li><li><a href="/xamarin/auto-layout-in-xamarin-ios.html" class="sidebar-link">Auto Layout in Xamarin.iOS</a></li><li><a href="/xamarin/add-search-bar-to-uitableview.html" class="sidebar-link">Add Search Bar to UITableView</a></li><li><a href="/xamarin/adding-uirefreshcontrol-to-a-table-view.html" class="sidebar-link">Adding UIRefreshControl to a table view</a></li><li><a href="/xamarin/add-pulltorefresh-to-uitableview.html" class="sidebar-link">Add PullToRefresh to UITableView</a></li><li><a href="/xamarin/uiimageview-zoom-in-combination-with-uiscrollview.html" class="sidebar-link">UIImageView zoom in combination with UIScrollView</a></li><li><a href="/xamarin/xamarin-ios-navigation-drawer.html" class="sidebar-link">Xamarin.iOS Navigation Drawer</a></li><li><a href="/xamarin/using-asset-catalogs.html" class="sidebar-link">Using Asset Catalogs</a></li><li><a href="/xamarin/how-to-use-asset-asset-catalogs.html" class="sidebar-link">How to use asset Asset Catalogs</a></li><li><a href="/xamarin/using-ios-asset-catalogs-to-manage-images.html" class="sidebar-link">Using iOS Asset Catalogs to Manage Images</a></li><li><a href="/xamarin/create-and-use-custom-prototype-table-cells-in-xamarin-ios-using-storyboard.html" class="sidebar-link">Create and use custom prototype table cells in xamarin.iOS using storyboard</a></li><li><a href="/xamarin/binding-swift-libraries.html" class="sidebar-link">Binding Swift Libraries</a></li><li><a href="/xamarin/connecting-with-microsoft-cognitive-services.html" class="sidebar-link">Connecting with Microsoft Cognitive Services</a></li><li><a href="/xamarin/concurrent-programming-in-xamarin-ios.html" class="sidebar-link">Concurrent Programming in Xamarin.iOS</a></li><li><a href="/xamarin/working-with-xib-and-storyboards-in-xamarin-ios.html" class="sidebar-link">Working with Xib and Storyboards in Xamarin.iOS</a></li><li><a href="/xamarin/best-practices-for-migrating-from-uilocalnotification-to-user-notifications-framework.html" class="sidebar-link">Best practices for migrating from UILocalNotification to User Notifications framework</a></li><li><a href="/xamarin/calculating-variable-row-height-in-getheightforrow.html" class="sidebar-link">Calculating variable row height in GetHeightForRow</a></li><li><a href="/xamarin/resizing-methods-for-uiimage.html" class="sidebar-link">Resizing Methods for UIImage</a></li><li><a href="/xamarin/controlling-the-screenshot-in-the-ios-multitasking-switcher.html" class="sidebar-link">Controlling the Screenshot in the iOS Multitasking Switcher</a></li><li><a href="/xamarin/xamarin-ios-google-places-autocomplete.html" aria-current="page" class="active sidebar-link">Xamarin iOS Google Places Autocomplete</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xamarin/xamarin-ios-google-places-autocomplete.html#add-an-autocomplete-ui-control-with-results-controller" class="sidebar-link">Add an autocomplete UI control with results controller.</a></li></ul></li><li><a href="/xamarin/getting-started-with-xamarin-android.html" class="sidebar-link">Getting started with Xamarin.Android</a></li><li><a href="/xamarin/app-lifecycle-xamarin-andorid.html" class="sidebar-link">App lifecycle - Xamarin.Andorid</a></li><li><a href="/xamarin/bindings.html" class="sidebar-link">Bindings</a></li><li><a href="/xamarin/dialogs.html" class="sidebar-link">Dialogs</a></li><li><a href="/xamarin/toasts.html" class="sidebar-link">Toasts</a></li><li><a href="/xamarin/dialogs.html" class="sidebar-link">Dialogs</a></li><li><a href="/xamarin/custom-listview.html" class="sidebar-link">Custom ListView</a></li><li><a href="/xamarin/recyclerview.html" class="sidebar-link">RecyclerView</a></li><li><a href="/xamarin/xamarin-android-how-to-create-a-toolbar.html" class="sidebar-link">Xamarin.Android - How to create a toolbar</a></li><li><a href="/xamarin/xamarin-android-bluetooth-communication.html" class="sidebar-link">Xamarin.Android - Bluetooth communication</a></li><li><a href="/xamarin/how-to-correct-the-orientation-of-a-picture-captured-from-android-device.html" class="sidebar-link">How to correct the orientation of a picture captured from Android device</a></li><li><a href="/xamarin/barcode-scanning-using-zxing-library-in-xamarin-applications.html" class="sidebar-link">Barcode scanning using ZXing library in Xamarin Applications</a></li><li><a href="/xamarin/publishing-your-xamarin-android-apk.html" class="sidebar-link">Publishing your Xamarin.Android APK</a></li><li><a href="/xamarin/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="xamarin-ios-google-places-autocomplete"><a href="#xamarin-ios-google-places-autocomplete" class="header-anchor">#</a> Xamarin iOS Google Places Autocomplete</h1> <p>Since starting to work with Xamarin there have been many things I wish someone else had already documented. Here I explain how to use 1 aspect of the google places autocompletion, the UI control making use of a results controller.  While this code is based on googles own examples converted to C# from Swift I have tried my best to make sure it is a fully working example.  I hope very much this documentation will help others.</p> <h2 id="add-an-autocomplete-ui-control-with-results-controller"><a href="#add-an-autocomplete-ui-control-with-results-controller" class="header-anchor">#</a> Add an autocomplete UI control with results controller.</h2> <p>The autocomplete UI control is a search dialog with built-in autocomplete functionality. As a user enters search terms, the control presents a list of predicted places to choose from. When the user makes a selection, a GMSPlace (Place in Xamarin) instance is returned, which your app can then use to get details about the selected place.</p> <p>As mentioned above this example uses a results controller which allows for more control over the text input UI. The results controller will dynamically toggle the visibility of the results list based on input UI focus.</p> <p>The aim of this code is to display a screen just like the below:</p> <p><a href="https://i.stack.imgur.com/3SxJY.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/3SxJY.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>This will autocomplete your address when you start typing, like the image below:</p> <p><a href="https://i.stack.imgur.com/djLDx.png" target="_blank" rel="noopener noreferrer"><img src="https://i.stack.imgur.com/djLDx.png" alt="enter image description here"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Instructions:</strong></p> <li>
First we need to add the google maps API to our Visual Studio, It's available through Nuget, just search for Xamarin.Google.iOS.Maps, add it to your iOS project, alternatively you can download it from Xamarin [Xamarin Google Maps iOS SDK](https://components.xamarin.com/view/googleiosmaps)
</li> <li>
We need something like a button to trigger the google autocomplete view controller.  In this example I do this with a story board and have added a button named GoogleButton, you could trigger it with code it doesn't really matter.
</li> <li>
Under ViewDidLoad in your view controllers class add the following code. In my example below I am not using the mobile devices actual location, my final solution would of course do this, but this was a test and I didn't want to implement extra code until I had proved this worked or dilute what I am trying to show you:
</li> <p>// Code to bring up the google places auto complete view controller.</p> <div class="language-cs extra-class"><pre class="language-cs"><code>GoogleButton<span class="token punctuation">.</span>TouchUpInside <span class="token operator">+=</span> <span class="token punctuation">(</span>sender<span class="token punctuation">,</span> ea<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>

    <span class="token class-name"><span class="token keyword">var</span></span> FakeCoordinates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CLLocationCoordinate2D</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Latitude <span class="token operator">=</span> <span class="token number">54.135364</span><span class="token punctuation">,</span>
        Longitude <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.797888</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> north <span class="token operator">=</span> <span class="token function">LocationWithBearing</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> FakeCoordinates<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> east <span class="token operator">=</span> <span class="token function">LocationWithBearing</span><span class="token punctuation">(</span><span class="token number">225</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> FakeCoordinates<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> autocompleteController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutocompleteViewController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    autocompleteController<span class="token punctuation">.</span>Delegate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoCompleteDelegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    autocompleteController<span class="token punctuation">.</span>AutocompleteBounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CoordinateBounds</span><span class="token punctuation">(</span>north<span class="token punctuation">,</span> east<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">PresentViewController</span><span class="token punctuation">(</span>autocompleteController<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><ol><li>This is optional, but I have added a function to calculate a local bounds, I am passing in 3000 this number is in metres, so if you want a bigger initial bounds feel free to adjust, please note that google search will still find any address in the world, it just weights the initial results to this local areas bounds first. This function was borrowed from a stack overflow post, I have converted it from Swift to C# for our purposes:</li></ol> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name">CLLocationCoordinate2D</span> <span class="token function">LocationWithBearing</span><span class="token punctuation">(</span><span class="token class-name">Double</span> bearing<span class="token punctuation">,</span> <span class="token class-name">Double</span> distanceMeters<span class="token punctuation">,</span> <span class="token class-name">CLLocationCoordinate2D</span> origin<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> distRadians <span class="token operator">=</span> distanceMeters<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">6372797.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> rbearing <span class="token operator">=</span> bearing<span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180.0</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> lat1 <span class="token operator">=</span> origin<span class="token punctuation">.</span>Latitude<span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> lon1 <span class="token operator">=</span> origin<span class="token punctuation">.</span>Longitude<span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> lat2 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">Asin</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>lat1<span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">Cos</span><span class="token punctuation">(</span>distRadians<span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">Cos</span><span class="token punctuation">(</span>lat1<span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>distRadians<span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">Cos</span><span class="token punctuation">(</span>rbearing<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> lon2 <span class="token operator">=</span> lon1 <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">Atan2</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>rbearing<span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>distRadians<span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">Cos</span><span class="token punctuation">(</span>lat1<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    Math<span class="token punctuation">.</span><span class="token function">Cos</span><span class="token punctuation">(</span>distRadians<span class="token punctuation">)</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>lat1<span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>lat2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CLLocationCoordinate2D</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">latitude</span><span class="token punctuation">:</span> lat2<span class="token operator">*</span><span class="token number">180</span><span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">,</span> <span class="token named-parameter punctuation">longitude</span><span class="token punctuation">:</span> lon2<span class="token operator">*</span><span class="token number">180</span><span class="token operator">/</span>Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><ol><li>This final code snippet is the delegate for the autocomplete, we need this delegate to handle all that google will return to us:</li></ol> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span>  <span class="token keyword">class</span> <span class="token class-name">AutoCompleteDelegate</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AutocompleteViewControllerDelegate</span></span>
<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DidFailAutocomplete</span><span class="token punctuation">(</span><span class="token class-name">AutocompleteViewController</span> viewController<span class="token punctuation">,</span> <span class="token class-name">NSError</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// TODO: handle the error.</span>
        Debug<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">&quot;Error: &quot;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>Description<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DidAutocomplete</span><span class="token punctuation">(</span><span class="token class-name">AutocompleteViewController</span> viewController<span class="token punctuation">,</span> <span class="token class-name">Place</span> place<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span>FormattedAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>

        viewController<span class="token punctuation">.</span><span class="token function">DismissViewController</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DidRequestAutocompletePredictions</span><span class="token punctuation">(</span><span class="token class-name">AutocompleteViewController</span> viewController<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        UIApplication<span class="token punctuation">.</span>SharedApplication<span class="token punctuation">.</span>NetworkActivityIndicatorVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DidUpdateAutocompletePredictions</span><span class="token punctuation">(</span><span class="token class-name">AutocompleteViewController</span> viewController<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        UIApplication<span class="token punctuation">.</span>SharedApplication<span class="token punctuation">.</span>NetworkActivityIndicatorVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WasCancelled</span><span class="token punctuation">(</span><span class="token class-name">AutocompleteViewController</span> viewController<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        viewController<span class="token punctuation">.</span><span class="token function">DismissViewController</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><p>Run your project and it should work perfectly, this example is quite focussed, but hopefully it till give you a basic example of how any of the google autocomplete UI controls would need to work. Thanks!</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/xamarin/xamarin-ios-google-places-autocomplete.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/xamarin/controlling-the-screenshot-in-the-ios-multitasking-switcher.html" class="prev">
        Controlling the Screenshot in the iOS Multitasking Switcher
      </a></span> <span class="next"><a href="/xamarin/getting-started-with-xamarin-android.html">
        Getting started with Xamarin.Android
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/3572.b7952e45.js" defer></script>
  </body>
</html>
