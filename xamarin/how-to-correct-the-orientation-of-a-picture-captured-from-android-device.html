<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Xamarin - How to correct the orientation of a picture captured from Android device</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="How to correct the orientation of a picture captured from Android device">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Xamarin - How to correct the orientation of a picture captured from Android device">
    <meta property="og:description" content="How to correct the orientation of a picture captured from Android device">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/xamarin/how-to-correct-the-orientation-of-a-picture-captured-from-android-device.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Xamarin - How to correct the orientation of a picture captured from Android device">
    <meta name="twitter:description" content="How to correct the orientation of a picture captured from Android device">
    <meta name="twitter:url" content="/xamarin/how-to-correct-the-orientation-of-a-picture-captured-from-android-device.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    <link rel="preload" href="/assets/css/0.styles.8b877eb8.css" as="style"><link rel="preload" href="/assets/js/app.ced448ab.js" as="script"><link rel="preload" href="/assets/js/3.f1d73125.js" as="script"><link rel="preload" href="/assets/js/3539.153da127.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.8b877eb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Xamarin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xamarin/" class="sidebar-link">Disclaimer</a></li><li><a href="/xamarin/getting-started-with-xamarin-forms.html" class="sidebar-link">Getting started with Xamarin.Forms</a></li><li><a href="/xamarin/why-xamarin-forms-and-when-to-use-xamarin-forms.html" class="sidebar-link">Why Xamarin Forms and When to use Xamarin Forms</a></li><li><a href="/xamarin/xamarin-forms-layouts.html" class="sidebar-link">Xamarin Forms Layouts</a></li><li><a href="/xamarin/xamarin-relative-layout.html" class="sidebar-link">Xamarin Relative Layout</a></li><li><a href="/xamarin/navigation-in-xamarin-forms.html" class="sidebar-link">Navigation in Xamarin.Forms</a></li><li><a href="/xamarin/xamarin-forms-page.html" class="sidebar-link">Xamarin.Forms Page</a></li><li><a href="/xamarin/xamarin-forms-cells.html" class="sidebar-link">Xamarin.Forms Cells</a></li><li><a href="/xamarin/xamarin-forms-views.html" class="sidebar-link">Xamarin.Forms Views</a></li><li><a href="/xamarin/using-listviews.html" class="sidebar-link">Using ListViews</a></li><li><a href="/xamarin/display-alert.html" class="sidebar-link">Display Alert</a></li><li><a href="/xamarin/accessing-native-features-with-dependencyservice.html" class="sidebar-link">Accessing native features with DependencyService</a></li><li><a href="/xamarin/dependencyservice.html" class="sidebar-link">DependencyService</a></li><li><a href="/xamarin/custom-renderers.html" class="sidebar-link">Custom Renderers</a></li><li><a href="/xamarin/caching.html" class="sidebar-link">Caching</a></li><li><a href="/xamarin/gestures.html" class="sidebar-link">Gestures</a></li><li><a href="/xamarin/data-binding.html" class="sidebar-link">Data Binding</a></li><li><a href="/xamarin/working-with-maps.html" class="sidebar-link">Working with Maps</a></li><li><a href="/xamarin/custom-fonts-in-styles.html" class="sidebar-link">Custom Fonts in Styles</a></li><li><a href="/xamarin/push-notifications.html" class="sidebar-link">Push Notifications</a></li><li><a href="/xamarin/effects.html" class="sidebar-link">Effects</a></li><li><a href="/xamarin/triggers-behaviours.html" class="sidebar-link">Triggers &amp; Behaviours</a></li><li><a href="/xamarin/appsettings-reader-in-xamarin-forms.html" class="sidebar-link">AppSettings Reader in Xamarin.Forms</a></li><li><a href="/xamarin/creating-custom-controls.html" class="sidebar-link">Creating custom controls</a></li><li><a href="/xamarin/working-with-local-databases.html" class="sidebar-link">Working with local databases</a></li><li><a href="/xamarin/carouselview-pre-release-version.html" class="sidebar-link">CarouselView - Pre-release version</a></li><li><a href="/xamarin/exception-handling.html" class="sidebar-link">Exception handling</a></li><li><a href="/xamarin/sql-database-and-api-in-xamarin-forms.html" class="sidebar-link">SQL Database and API in Xamarin Forms.</a></li><li><a href="/xamarin/contact-picker-xamarin-forms-android-and-ios.html" class="sidebar-link">Contact Picker - Xamarin Forms (Android and iOS)</a></li><li><a href="/xamarin/xamarin-plugin.html" class="sidebar-link">Xamarin Plugin</a></li><li><a href="/xamarin/oauth2.html" class="sidebar-link">OAuth2</a></li><li><a href="/xamarin/messagingcenter.html" class="sidebar-link">MessagingCenter</a></li><li><a href="/xamarin/generic-xamarin-forms-app-lifecycle-platform-dependant.html" class="sidebar-link">Generic Xamarin.Forms app lifecycle? Platform-dependant!</a></li><li><a href="/xamarin/platform-specific-behaviour.html" class="sidebar-link">Platform-specific behaviour</a></li><li><a href="/xamarin/platform-specific-visual-adjustments.html" class="sidebar-link">Platform specific visual adjustments</a></li><li><a href="/xamarin/dependency-services.html" class="sidebar-link">Dependency Services</a></li><li><a href="/xamarin/unit-testing.html" class="sidebar-link">Unit Testing</a></li><li><a href="/xamarin/bdd-unit-testing-in-xamarin-forms.html" class="sidebar-link">BDD Unit Testing in Xamarin.Forms</a></li><li><a href="/xamarin/getting-started-with-xamarin-ios.html" class="sidebar-link">Getting started with Xamarin.iOS</a></li><li><a href="/xamarin/alerts.html" class="sidebar-link">Alerts</a></li><li><a href="/xamarin/touch-id.html" class="sidebar-link">Touch ID</a></li><li><a href="/xamarin/auto-layout-in-xamarin-ios.html" class="sidebar-link">Auto Layout in Xamarin.iOS</a></li><li><a href="/xamarin/add-search-bar-to-uitableview.html" class="sidebar-link">Add Search Bar to UITableView</a></li><li><a href="/xamarin/adding-uirefreshcontrol-to-a-table-view.html" class="sidebar-link">Adding UIRefreshControl to a table view</a></li><li><a href="/xamarin/add-pulltorefresh-to-uitableview.html" class="sidebar-link">Add PullToRefresh to UITableView</a></li><li><a href="/xamarin/uiimageview-zoom-in-combination-with-uiscrollview.html" class="sidebar-link">UIImageView zoom in combination with UIScrollView</a></li><li><a href="/xamarin/xamarin-ios-navigation-drawer.html" class="sidebar-link">Xamarin.iOS Navigation Drawer</a></li><li><a href="/xamarin/using-asset-catalogs.html" class="sidebar-link">Using Asset Catalogs</a></li><li><a href="/xamarin/how-to-use-asset-asset-catalogs.html" class="sidebar-link">How to use asset Asset Catalogs</a></li><li><a href="/xamarin/using-ios-asset-catalogs-to-manage-images.html" class="sidebar-link">Using iOS Asset Catalogs to Manage Images</a></li><li><a href="/xamarin/create-and-use-custom-prototype-table-cells-in-xamarin-ios-using-storyboard.html" class="sidebar-link">Create and use custom prototype table cells in xamarin.iOS using storyboard</a></li><li><a href="/xamarin/binding-swift-libraries.html" class="sidebar-link">Binding Swift Libraries</a></li><li><a href="/xamarin/connecting-with-microsoft-cognitive-services.html" class="sidebar-link">Connecting with Microsoft Cognitive Services</a></li><li><a href="/xamarin/concurrent-programming-in-xamarin-ios.html" class="sidebar-link">Concurrent Programming in Xamarin.iOS</a></li><li><a href="/xamarin/working-with-xib-and-storyboards-in-xamarin-ios.html" class="sidebar-link">Working with Xib and Storyboards in Xamarin.iOS</a></li><li><a href="/xamarin/best-practices-for-migrating-from-uilocalnotification-to-user-notifications-framework.html" class="sidebar-link">Best practices for migrating from UILocalNotification to User Notifications framework</a></li><li><a href="/xamarin/calculating-variable-row-height-in-getheightforrow.html" class="sidebar-link">Calculating variable row height in GetHeightForRow</a></li><li><a href="/xamarin/resizing-methods-for-uiimage.html" class="sidebar-link">Resizing Methods for UIImage</a></li><li><a href="/xamarin/controlling-the-screenshot-in-the-ios-multitasking-switcher.html" class="sidebar-link">Controlling the Screenshot in the iOS Multitasking Switcher</a></li><li><a href="/xamarin/xamarin-ios-google-places-autocomplete.html" class="sidebar-link">Xamarin iOS Google Places Autocomplete</a></li><li><a href="/xamarin/getting-started-with-xamarin-android.html" class="sidebar-link">Getting started with Xamarin.Android</a></li><li><a href="/xamarin/app-lifecycle-xamarin-andorid.html" class="sidebar-link">App lifecycle - Xamarin.Andorid</a></li><li><a href="/xamarin/bindings.html" class="sidebar-link">Bindings</a></li><li><a href="/xamarin/dialogs.html" class="sidebar-link">Dialogs</a></li><li><a href="/xamarin/toasts.html" class="sidebar-link">Toasts</a></li><li><a href="/xamarin/dialogs.html" class="sidebar-link">Dialogs</a></li><li><a href="/xamarin/custom-listview.html" class="sidebar-link">Custom ListView</a></li><li><a href="/xamarin/recyclerview.html" class="sidebar-link">RecyclerView</a></li><li><a href="/xamarin/xamarin-android-how-to-create-a-toolbar.html" class="sidebar-link">Xamarin.Android - How to create a toolbar</a></li><li><a href="/xamarin/xamarin-android-bluetooth-communication.html" class="sidebar-link">Xamarin.Android - Bluetooth communication</a></li><li><a href="/xamarin/how-to-correct-the-orientation-of-a-picture-captured-from-android-device.html" class="active sidebar-link">How to correct the orientation of a picture captured from Android device</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xamarin/how-to-correct-the-orientation-of-a-picture-captured-from-android-device.html#how-to-correct-the-orientation-of-a-picture-captured-from-android-device-2" class="sidebar-link">How to correct the orientation of a picture captured from Android device</a></li></ul></li><li><a href="/xamarin/barcode-scanning-using-zxing-library-in-xamarin-applications.html" class="sidebar-link">Barcode scanning using ZXing library in Xamarin Applications</a></li><li><a href="/xamarin/publishing-your-xamarin-android-apk.html" class="sidebar-link">Publishing your Xamarin.Android APK</a></li><li><a href="/xamarin/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-to-correct-the-orientation-of-a-picture-captured-from-android-device"><a href="#how-to-correct-the-orientation-of-a-picture-captured-from-android-device" class="header-anchor">#</a> How to correct the orientation of a picture captured from Android device</h1> <h2 id="how-to-correct-the-orientation-of-a-picture-captured-from-android-device-2"><a href="#how-to-correct-the-orientation-of-a-picture-captured-from-android-device-2" class="header-anchor">#</a> How to correct the orientation of a picture captured from Android device</h2> <p>This example shows how to take image and display it correctly on the Android device.</p> <p>Firstly we have to create sample application with one button and one imageview.
Once user clicks on the button camera is launched and after user selects picture it will be displayed with the proper orientation on the screen.</p> <ol><li>Add button named &quot;TakePictureButton&quot; and imageview named &quot;TakenPictureImageView&quot;:</li></ol> <p><a href="http://i.stack.imgur.com/Aj5sJ.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/Aj5sJ.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>Now open activity code behind:</li></ol> <p>Here firstly get reference to your controls:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token class-name">ImageView</span> _takenPictureImageView<span class="token punctuation">;</span>
<span class="token class-name">Button</span> _takePictureButton<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">SetContentView</span><span class="token punctuation">(</span>Resource<span class="token punctuation">.</span>Layout<span class="token punctuation">.</span>Main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        _takenPictureImageView <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindViewById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ImageView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>Resource<span class="token punctuation">.</span>Id<span class="token punctuation">.</span>TakenPictureImageView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _takePictureButton <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindViewById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Button<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>Resource<span class="token punctuation">.</span>Id<span class="token punctuation">.</span>TakePictureButton<span class="token punctuation">)</span><span class="token punctuation">;</span>

        _takePictureButton<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">delegate</span> 
        <span class="token punctuation">{</span>
            <span class="token function">takePicture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre></div><ol><li>In our application we will use Xamarin Mobile component available in the Components Store:</li></ol> <p><a href="http://i.stack.imgur.com/U7F2P.png" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/U7F2P.png" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <li>
Once you add it to the project we can move on. Add below code which is responsible for launching camera. This method should be invoked in the button click as you can see in the above code:
<div class="language-cs extra-class"><pre class="language-cs"><code><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">takePicture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     <span class="token class-name"><span class="token keyword">var</span></span> picker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MediaPicker</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">DateTime</span> now <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">;</span>
     <span class="token class-name"><span class="token keyword">var</span></span> intent <span class="token operator">=</span> picker<span class="token punctuation">.</span><span class="token function">GetTakePhotoUI</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">StoreCameraMediaOptions</span>
     <span class="token punctuation">{</span>
         Name <span class="token operator">=</span> <span class="token string">&quot;picture_&quot;</span> <span class="token operator">+</span> now<span class="token punctuation">.</span>Day <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> now<span class="token punctuation">.</span>Month <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> now<span class="token punctuation">.</span>Year <span class="token operator">+</span> <span class="token string">&quot;.jpg&quot;</span><span class="token punctuation">,</span>
         Directory <span class="token operator">=</span> <span class="token keyword">null</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">StartActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

</code></pre></div></li> <li>
Once user takes picture we should display it in the proper orientation. To do it use below method. It is responsible for retrieveing exif information from the taken image (including orientation during the moment of taking picture) and than creating bitmap with the proper orientation:
<div class="language-cs extra-class"><pre class="language-cs"><code><span class="token return-type class-name">Bitmap</span> <span class="token function">loadAndResizeBitmap</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> filePath<span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     <span class="token class-name">BitmapFactory<span class="token punctuation">.</span>Options</span> options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BitmapFactory<span class="token punctuation">.</span>Options</span> <span class="token punctuation">{</span> InJustDecodeBounds <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
     BitmapFactory<span class="token punctuation">.</span><span class="token function">DecodeFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token class-name"><span class="token keyword">int</span></span> REQUIRED_SIZE <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
     <span class="token class-name"><span class="token keyword">int</span></span> width_tmp <span class="token operator">=</span> options<span class="token punctuation">.</span>OutWidth<span class="token punctuation">,</span> height_tmp <span class="token operator">=</span> options<span class="token punctuation">.</span>OutHeight<span class="token punctuation">;</span>
     <span class="token class-name"><span class="token keyword">int</span></span> scale <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
     <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>width_tmp <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&lt;</span> REQUIRED_SIZE <span class="token operator">||</span> height_tmp <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&lt;</span> REQUIRED_SIZE<span class="token punctuation">)</span>
             <span class="token keyword">break</span><span class="token punctuation">;</span>
         width_tmp <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">;</span>
         height_tmp <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">;</span>
         scale<span class="token operator">++</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     options<span class="token punctuation">.</span>InSampleSize <span class="token operator">=</span> scale<span class="token punctuation">;</span>
     options<span class="token punctuation">.</span>InJustDecodeBounds <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
     <span class="token class-name">Bitmap</span> resizedBitmap <span class="token operator">=</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">DecodeFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token class-name">ExifInterface</span> exif <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
     <span class="token keyword">try</span>
     <span class="token punctuation">{</span>
         exif <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ExifInterface</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name"><span class="token keyword">string</span></span> orientation <span class="token operator">=</span> exif<span class="token punctuation">.</span><span class="token function">GetAttribute</span><span class="token punctuation">(</span>ExifInterface<span class="token punctuation">.</span>TagOrientation<span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token class-name">Matrix</span> matrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">switch</span> <span class="token punctuation">(</span>orientation<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
             <span class="token keyword">case</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">:</span> <span class="token comment">// landscape</span>
                 <span class="token keyword">break</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">:</span>
                 matrix<span class="token punctuation">.</span><span class="token function">PreRotate</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 resizedBitmap <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">CreateBitmap</span><span class="token punctuation">(</span>resizedBitmap<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                 <span class="token keyword">break</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">:</span>
                 matrix<span class="token punctuation">.</span><span class="token function">PreRotate</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 resizedBitmap <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">CreateBitmap</span><span class="token punctuation">(</span>resizedBitmap<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                 <span class="token keyword">break</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">:</span>
                 matrix<span class="token punctuation">.</span><span class="token function">PreRotate</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 resizedBitmap <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">CreateBitmap</span><span class="token punctuation">(</span>resizedBitmap<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                 <span class="token keyword">break</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">:</span> <span class="token comment">// portrait</span>
                 matrix<span class="token punctuation">.</span><span class="token function">PreRotate</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 resizedBitmap <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">CreateBitmap</span><span class="token punctuation">(</span>resizedBitmap<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                 <span class="token keyword">break</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">:</span>
                 matrix<span class="token punctuation">.</span><span class="token function">PreRotate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 resizedBitmap <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">CreateBitmap</span><span class="token punctuation">(</span>resizedBitmap<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                 <span class="token keyword">break</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">:</span>
                 matrix<span class="token punctuation">.</span><span class="token function">PreRotate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 resizedBitmap <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">CreateBitmap</span><span class="token punctuation">(</span>resizedBitmap<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> resizedBitmap<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 matrix <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                 <span class="token keyword">break</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>

         <span class="token keyword">return</span> resizedBitmap<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;An exception was thrown when reading exif from media file...:&quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

</code></pre></div></li> <li>
Above method should be invoked in the OnActivityResult method invoked after user takes the picture:
<div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnActivityResult</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> requestCode<span class="token punctuation">,</span> <span class="token class-name">Result</span> resultCode<span class="token punctuation">,</span> <span class="token class-name">Intent</span> data<span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> Result<span class="token punctuation">.</span>Ok<span class="token punctuation">)</span>
         <span class="token punctuation">{</span>
             data<span class="token punctuation">.</span><span class="token function">GetMediaFileExtraAsync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ContinueWith</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span>
             <span class="token punctuation">{</span>
                 <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">Bitmap</span> bmp <span class="token operator">=</span> <span class="token function">loadAndResizeBitmap</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>Result<span class="token punctuation">.</span>Path<span class="token punctuation">)</span><span class="token punctuation">)</span>
                 <span class="token punctuation">{</span>
                     <span class="token keyword">if</span> <span class="token punctuation">(</span>bmp <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                     _takenPictureImageView<span class="token punctuation">.</span><span class="token function">SetImageBitmap</span><span class="token punctuation">(</span>bmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>

             <span class="token punctuation">}</span><span class="token punctuation">,</span> TaskScheduler<span class="token punctuation">.</span><span class="token function">FromCurrentSynchronizationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

</code></pre></div></li> <li>
Launch the application. Take photo an see the result:
</li> <p><a href="http://i.stack.imgur.com/AFLk3.jpg" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/AFLk3.jpg" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="http://i.stack.imgur.com/yU75s.jpg" target="_blank" rel="noopener noreferrer"><img src="http://i.stack.imgur.com/yU75s.jpg" alt="enter image description here"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>That's it. Now you will have all you taken picture displayed in correct orientation.</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <ol><li>This app sample is available on my GitHub below:</li></ol> <p><a href="https://github.com/Daniel-Krzyczkowski/XamarinAndroid/tree/master/AndroidPictureOrientation/PictureOrientationApp" target="_blank" rel="noopener noreferrer">https://github.com/Daniel-Krzyczkowski/XamarinAndroid/tree/master/AndroidPictureOrientation/PictureOrientationApp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>Xamarin Mobile component documentation is available below:</li></ol> <p><a href="https://components.xamarin.com/view/xamarin.mobile" target="_blank" rel="noopener noreferrer">https://components.xamarin.com/view/xamarin.mobile<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/xamarin/how-to-correct-the-orientation-of-a-picture-captured-from-android-device.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/xamarin/xamarin-android-bluetooth-communication.html" class="prev">
        Xamarin.Android - Bluetooth communication
      </a></span> <span class="next"><a href="/xamarin/barcode-scanning-using-zxing-library-in-xamarin-applications.html">
        Barcode scanning using ZXing library in Xamarin Applications
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ced448ab.js" defer></script><script src="/assets/js/3.f1d73125.js" defer></script><script src="/assets/js/3539.153da127.js" defer></script>
  </body>
</html>
