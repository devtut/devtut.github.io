<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL - Functions (Aggregate)</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Conditional aggregation, List Concatenation, SUM, AVG(), Count, Max, Min">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="SQL - Functions (Aggregate)">
    <meta property="og:description" content="Conditional aggregation, List Concatenation, SUM, AVG(), Count, Max, Min">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/sql/functions-aggregate.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="SQL - Functions (Aggregate)">
    <meta name="twitter:description" content="Conditional aggregation, List Concatenation, SUM, AVG(), Count, Max, Min">
    <meta name="twitter:url" content="/sql/functions-aggregate.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/3266.116e27f1.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>SQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sql/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/sql/getting-started-with-sql.html" class="sidebar-link">Getting started with SQL</a></li><li><a href="/sql/identifier.html" class="sidebar-link">Identifier</a></li><li><a href="/sql/data-types.html" class="sidebar-link">Data Types</a></li><li><a href="/sql/null.html" class="sidebar-link">NULL</a></li><li><a href="/sql/example-databases-and-tables.html" class="sidebar-link">Example Databases and Tables</a></li><li><a href="/sql/select.html" class="sidebar-link">SELECT</a></li><li><a href="/sql/group-by.html" class="sidebar-link">GROUP BY</a></li><li><a href="/sql/order-by.html" class="sidebar-link">ORDER BY</a></li><li><a href="/sql/and-or-operators.html" class="sidebar-link">AND &amp; OR Operators</a></li><li><a href="/sql/case.html" class="sidebar-link">CASE</a></li><li><a href="/sql/like-operator.html" class="sidebar-link">LIKE operator</a></li><li><a href="/sql/in-clause.html" class="sidebar-link">IN clause</a></li><li><a href="/sql/filter-results-using-where-and-having.html" class="sidebar-link">Filter results using WHERE and HAVING</a></li><li><a href="/sql/skip-take-pagination.html" class="sidebar-link">SKIP TAKE (Pagination)</a></li><li><a href="/sql/except.html" class="sidebar-link">EXCEPT</a></li><li><a href="/sql/explain-and-describe.html" class="sidebar-link">EXPLAIN and DESCRIBE</a></li><li><a href="/sql/exists-clause.html" class="sidebar-link">EXISTS CLAUSE</a></li><li><a href="/sql/join.html" class="sidebar-link">JOIN</a></li><li><a href="/sql/update.html" class="sidebar-link">UPDATE</a></li><li><a href="/sql/create-database.html" class="sidebar-link">CREATE Database</a></li><li><a href="/sql/create-table.html" class="sidebar-link">CREATE TABLE</a></li><li><a href="/sql/create-function.html" class="sidebar-link">CREATE FUNCTION</a></li><li><a href="/sql/try-catch.html" class="sidebar-link">TRY/CATCH</a></li><li><a href="/sql/union-union-all.html" class="sidebar-link">UNION / UNION ALL</a></li><li><a href="/sql/alter-table.html" class="sidebar-link">ALTER TABLE</a></li><li><a href="/sql/insert.html" class="sidebar-link">INSERT</a></li><li><a href="/sql/merge.html" class="sidebar-link">MERGE</a></li><li><a href="/sql/cross-apply-outer-apply.html" class="sidebar-link">cross apply, outer apply</a></li><li><a href="/sql/delete.html" class="sidebar-link">DELETE</a></li><li><a href="/sql/truncate.html" class="sidebar-link">TRUNCATE</a></li><li><a href="/sql/drop-table.html" class="sidebar-link">DROP Table</a></li><li><a href="/sql/drop-or-delete-database.html" class="sidebar-link">DROP or DELETE Database</a></li><li><a href="/sql/cascading-delete.html" class="sidebar-link">Cascading Delete</a></li><li><a href="/sql/grant-and-revoke.html" class="sidebar-link">GRANT and REVOKE</a></li><li><a href="/sql/xml.html" class="sidebar-link">XML</a></li><li><a href="/sql/primary-keys.html" class="sidebar-link">Primary Keys</a></li><li><a href="/sql/indexes.html" class="sidebar-link">Indexes</a></li><li><a href="/sql/row-number.html" class="sidebar-link">Row number</a></li><li><a href="/sql/sql-group-by-vs-distinct.html" class="sidebar-link">SQL Group By vs Distinct</a></li><li><a href="/sql/finding-duplicates-on-a-column-subset-with-detail.html" class="sidebar-link">Finding Duplicates on a Column Subset with Detail</a></li><li><a href="/sql/string-functions.html" class="sidebar-link">String Functions</a></li><li><a href="/sql/functions-aggregate.html" aria-current="page" class="active sidebar-link">Functions (Aggregate)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sql/functions-aggregate.html#conditional-aggregation" class="sidebar-link">Conditional aggregation</a></li><li class="sidebar-sub-header"><a href="/sql/functions-aggregate.html#list-concatenation" class="sidebar-link">List Concatenation</a></li><li class="sidebar-sub-header"><a href="/sql/functions-aggregate.html#sum" class="sidebar-link">SUM</a></li><li class="sidebar-sub-header"><a href="/sql/functions-aggregate.html#avg" class="sidebar-link">AVG()</a></li><li class="sidebar-sub-header"><a href="/sql/functions-aggregate.html#count" class="sidebar-link">Count</a></li><li class="sidebar-sub-header"><a href="/sql/functions-aggregate.html#max" class="sidebar-link">Max</a></li><li class="sidebar-sub-header"><a href="/sql/functions-aggregate.html#min" class="sidebar-link">Min</a></li></ul></li><li><a href="/sql/functions-scalar-single-row.html" class="sidebar-link">Functions (Scalar/Single Row)</a></li><li><a href="/sql/functions-analytic.html" class="sidebar-link">Functions (Analytic)</a></li><li><a href="/sql/window-functions.html" class="sidebar-link">Window Functions</a></li><li><a href="/sql/common-table-expressions.html" class="sidebar-link">Common Table Expressions</a></li><li><a href="/sql/views.html" class="sidebar-link">Views</a></li><li><a href="/sql/materialized-views.html" class="sidebar-link">Materialized Views</a></li><li><a href="/sql/comments.html" class="sidebar-link">Comments</a></li><li><a href="/sql/foreign-keys.html" class="sidebar-link">Foreign Keys</a></li><li><a href="/sql/sequence.html" class="sidebar-link">Sequence</a></li><li><a href="/sql/subqueries.html" class="sidebar-link">Subqueries</a></li><li><a href="/sql/execution-blocks.html" class="sidebar-link">Execution blocks</a></li><li><a href="/sql/stored-procedures.html" class="sidebar-link">Stored Procedures</a></li><li><a href="/sql/triggers.html" class="sidebar-link">Triggers</a></li><li><a href="/sql/transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/sql/table-design.html" class="sidebar-link">Table Design</a></li><li><a href="/sql/synonyms.html" class="sidebar-link">Synonyms</a></li><li><a href="/sql/information-schema.html" class="sidebar-link">Information Schema</a></li><li><a href="/sql/order-of-execution.html" class="sidebar-link">Order of Execution</a></li><li><a href="/sql/clean-code-in-sql.html" class="sidebar-link">Clean Code in SQL</a></li><li><a href="/sql/relational-algebra.html" class="sidebar-link">Relational Algebra</a></li><li><a href="/sql/sql-injection.html" class="sidebar-link">SQL Injection</a></li><li><a href="/sql/sql-cursor.html" class="sidebar-link">SQL CURSOR</a></li><li><a href="/sql/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="functions-aggregate"><a href="#functions-aggregate" class="header-anchor">#</a> Functions (Aggregate)</h1> <h2 id="conditional-aggregation"><a href="#conditional-aggregation" class="header-anchor">#</a> Conditional aggregation</h2> <p>Payments Table</p> <table><thead><tr><th>Customer</th> <th>Payment_type</th> <th>Amount</th></tr></thead> <tbody><tr><td>Peter</td> <td>Credit</td> <td>100</td></tr> <tr><td>Peter</td> <td>Credit</td> <td>300</td></tr> <tr><td>John</td> <td>Credit</td> <td>1000</td></tr> <tr><td>John</td> <td>Debit</td> <td>500</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> customer<span class="token punctuation">,</span> 
       <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> payment_type <span class="token operator">=</span> <span class="token string">'credit'</span> <span class="token keyword">then</span> amount <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> credit<span class="token punctuation">,</span>
       <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> payment_type <span class="token operator">=</span> <span class="token string">'debit'</span> <span class="token keyword">then</span> amount <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> debit
<span class="token keyword">from</span> payments
<span class="token keyword">group</span> <span class="token keyword">by</span> customer

</code></pre></div><p>Result:</p> <table><thead><tr><th>Customer</th> <th>Credit</th> <th>Debit</th></tr></thead> <tbody><tr><td>Peter</td> <td>400</td> <td>0</td></tr> <tr><td>John</td> <td>1000</td> <td>500</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> customer<span class="token punctuation">,</span> 
       <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> payment_type <span class="token operator">=</span> <span class="token string">'credit'</span> <span class="token keyword">then</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> credit_transaction_count<span class="token punctuation">,</span>
       <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> payment_type <span class="token operator">=</span> <span class="token string">'debit'</span> <span class="token keyword">then</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> debit_transaction_count
<span class="token keyword">from</span> payments
<span class="token keyword">group</span> <span class="token keyword">by</span> customer

</code></pre></div><p>Result:</p> <table><thead><tr><th>Customer</th> <th>credit_transaction_count</th> <th>debit_transaction_count</th></tr></thead> <tbody><tr><td>Peter</td> <td>2</td> <td>0</td></tr> <tr><td>John</td> <td>1</td> <td>1</td></tr></tbody></table> <h2 id="list-concatenation"><a href="#list-concatenation" class="header-anchor">#</a> List Concatenation</h2> <p>Partial credit to <a href="http://stackoverflow.com/a/19348687/4896952" target="_blank" rel="noopener noreferrer">this<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> SO answer.</p> <p>List Concatenation aggregates a column or expression by combining the values into a single string for each group. A string to delimit each value (either blank or a comma when omitted) and the order of the values in the result can be specified. While it is not part of the SQL standard, every major relational database vendor supports it in their own way.</p> <h3 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ColumnA
     <span class="token punctuation">,</span> GROUP_CONCAT<span class="token punctuation">(</span>ColumnB <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnB SEPARATOR <span class="token string">','</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ColumnBs
  <span class="token keyword">FROM</span> TableName
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ColumnA
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnA<span class="token punctuation">;</span>

</code></pre></div><h3 id="oracle-db2"><a href="#oracle-db2" class="header-anchor">#</a> Oracle &amp; DB2</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ColumnA
     <span class="token punctuation">,</span> LISTAGG<span class="token punctuation">(</span>ColumnB<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span> <span class="token keyword">WITHIN</span> <span class="token keyword">GROUP</span> <span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnB<span class="token punctuation">)</span> <span class="token keyword">AS</span> ColumnBs
  <span class="token keyword">FROM</span> TableName
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ColumnA
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnA<span class="token punctuation">;</span>

</code></pre></div><h3 id="postgresql"><a href="#postgresql" class="header-anchor">#</a> PostgreSQL</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ColumnA
     <span class="token punctuation">,</span> STRING_AGG<span class="token punctuation">(</span>ColumnB<span class="token punctuation">,</span> <span class="token string">','</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnB<span class="token punctuation">)</span> <span class="token keyword">AS</span> ColumnBs
  <span class="token keyword">FROM</span> TableName
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ColumnA
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnA<span class="token punctuation">;</span>

</code></pre></div><h3 id="sql-server"><a href="#sql-server" class="header-anchor">#</a> SQL Server</h3> <h3 id="sql-server-2016-and-earlier"><a href="#sql-server-2016-and-earlier" class="header-anchor">#</a> SQL Server 2016 and earlier</h3> <p>(CTE included to encourage the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank" rel="noopener noreferrer">DRY principle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p> <div class="language- extra-class"><pre class="language-text"><code>
 WITH CTE_TableName AS (
       SELECT ColumnA, ColumnB
         FROM TableName)
SELECT t0.ColumnA
     , STUFF((
       SELECT ',' + t1.ColumnB
         FROM CTE_TableName t1
        WHERE t1.ColumnA = t0.ColumnA
        ORDER BY t1.ColumnB
          FOR XML PATH('')), 1, 1, '') AS ColumnBs
  FROM CTE_TableName t0
 GROUP BY t0.ColumnA
 ORDER BY ColumnA;

</code></pre></div><h3 id="sql-server-2017-and-sql-azure"><a href="#sql-server-2017-and-sql-azure" class="header-anchor">#</a> SQL Server 2017 and SQL Azure</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ColumnA
     <span class="token punctuation">,</span> STRING_AGG<span class="token punctuation">(</span>ColumnB<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span> <span class="token keyword">WITHIN</span> <span class="token keyword">GROUP</span> <span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnB<span class="token punctuation">)</span> <span class="token keyword">AS</span> ColumnBs
  <span class="token keyword">FROM</span> TableName
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ColumnA
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnA<span class="token punctuation">;</span>

</code></pre></div><h3 id="sqlite"><a href="#sqlite" class="header-anchor">#</a> SQLite</h3> <p>without ordering:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ColumnA
     <span class="token punctuation">,</span> GROUP_CONCAT<span class="token punctuation">(</span>ColumnB<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ColumnBs
  <span class="token keyword">FROM</span> TableName
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> ColumnA
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ColumnA<span class="token punctuation">;</span>

</code></pre></div><p>ordering requires a subquery or CTE:</p> <div class="language- extra-class"><pre class="language-text"><code>
 WITH CTE_TableName AS (
       SELECT ColumnA, ColumnB
         FROM TableName
        ORDER BY ColumnA, ColumnB)
SELECT ColumnA
     , GROUP_CONCAT(ColumnB, ',') AS ColumnBs
  FROM CTE_TableName
 GROUP BY ColumnA
 ORDER BY ColumnA;

</code></pre></div><h2 id="sum"><a href="#sum" class="header-anchor">#</a> SUM</h2> <p><code>Sum</code> function sum the value of all the rows in the group. If the group by clause is omitted then sums all the rows.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> TotalSalary
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>

</code></pre></div><table><thead><tr><th>TotalSalary</th></tr></thead> <tbody><tr><td>2500</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> DepartmentId<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> TotalSalary
<span class="token keyword">from</span> employees
<span class="token keyword">group</span> <span class="token keyword">by</span> DepartmentId<span class="token punctuation">;</span>

</code></pre></div><table><thead><tr><th>DepartmentId</th> <th>TotalSalary</th></tr></thead> <tbody><tr><td>1</td> <td>2000</td></tr> <tr><td>2</td> <td>500</td></tr></tbody></table> <h2 id="avg"><a href="#avg" class="header-anchor">#</a> AVG()</h2> <p>The aggregate function AVG() returns the average of a given expression, usually numeric values in a column. Assume we have a table containing the yearly calculation of population in cities across the world. The records for New York City look similar to the ones below:</p> <h3 id="example-table"><a href="#example-table" class="header-anchor">#</a> EXAMPLE TABLE</h3> <table><thead><tr><th>city_name</th> <th>population</th> <th>year</th></tr></thead> <tbody><tr><td>New York City</td> <td>8,550,405</td> <td>2015</td></tr> <tr><td>New York City</td> <td>...</td> <td>...</td></tr> <tr><td>New York City</td> <td>8,000,906</td> <td>2005</td></tr></tbody></table> <p>To select the average population of the New York City, USA from a table containing city names, population measurements, and measurement years for last ten years:</p> <h3 id="query"><a href="#query" class="header-anchor">#</a> QUERY</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> city_name<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> avg_population
<span class="token keyword">from</span> city_population
<span class="token keyword">where</span> city_name <span class="token operator">=</span> <span class="token string">'NEW YORK CITY'</span><span class="token punctuation">;</span>

</code></pre></div><p>Notice how measurement year is absent from the query since population is being averaged over time.</p> <h3 id="results"><a href="#results" class="header-anchor">#</a> RESULTS</h3> <table><thead><tr><th>city_name</th> <th>avg_population</th></tr></thead> <tbody><tr><td>New York City</td> <td>8,250,754</td></tr></tbody></table> <blockquote></blockquote> <p>Note: The AVG() function will convert values to numeric types. This is especially important to keep in mind when working with dates.</p> <h2 id="count"><a href="#count" class="header-anchor">#</a> Count</h2> <p>You can count the number of rows:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> TotalRows
<span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

</code></pre></div><table><thead><tr><th>TotalRows</th></tr></thead> <tbody><tr><td>4</td></tr></tbody></table> <p>Or count the employees per department:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> DepartmentId<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> NumEmployees
<span class="token keyword">FROM</span> employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> DepartmentId<span class="token punctuation">;</span>

</code></pre></div><table><thead><tr><th>DepartmentId</th> <th>NumEmployees</th></tr></thead> <tbody><tr><td>1</td> <td>3</td></tr> <tr><td>2</td> <td>1</td></tr></tbody></table> <p>You can count over a column/expression with the effect that will not count the <code>NULL</code> values:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span>ManagerId<span class="token punctuation">)</span> mgr
<span class="token keyword">FROM</span> EMPLOYEES<span class="token punctuation">;</span>

</code></pre></div><table><thead><tr><th>mgr</th></tr></thead> <tbody><tr><td>3</td></tr></tbody></table> <p>(There is one null value managerID column)</p> <p>You can also use <strong>DISTINCT</strong> inside of another function such as <strong>COUNT</strong> to only find the <strong>DISTINCT</strong> members of the set to perform the operation on.</p> <p>For example:</p> <div class="language- extra-class"><pre class="language-text"><code>
SELECT COUNT(ContinentCode) AllCount
 ,      COUNT(DISTINCT ContinentCode) SingleCount
 FROM Countries;

</code></pre></div><p>Will return different values. The <strong>SingleCount</strong> will only Count individual Continents once, while the <strong>AllCount</strong> will include duplicates.</p> <table><thead><tr><th>ContinentCode</th></tr></thead> <tbody><tr><td>OC</td></tr> <tr><td>EU</td></tr> <tr><td>AS</td></tr> <tr><td>NA</td></tr> <tr><td>NA</td></tr> <tr><td>AF</td></tr> <tr><td>AF</td></tr></tbody></table> <p>AllCount: 7
SingleCount: 5</p> <h2 id="max"><a href="#max" class="header-anchor">#</a> Max</h2> <p>Find the maximum value of column:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>

</code></pre></div><p>Above example will return largest value for column <code>age</code> of <code>employee</code> table.</p> <p>Syntax:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>

</code></pre></div><h2 id="min"><a href="#min" class="header-anchor">#</a> Min</h2> <p>Find the smallest value of column:</p> <div class="language- extra-class"><pre class="language-text"><code>
select min(age) from employee;

</code></pre></div><p>Above example will return smallest value for column <code>age</code> of <code>employee</code> table.</p> <p>Syntax:</p> <div class="language- extra-class"><pre class="language-text"><code>
SELECT MIN(column_name) FROM table_name;

</code></pre></div><h4 id="syntax"><a href="#syntax" class="header-anchor">#</a> Syntax</h4> <ul><li>Function([<strong>DISTINCT</strong>] expression) -DISTINCT is an optional parameter</li> <li>AVG ( [ ALL | DISTINCT ] expression )</li> <li>COUNT( { [ALL | DISTINCT ] expression ] | * } )</li> <li>GROUPING(&lt;column_expression&gt;)</li> <li>MAX ( [ ALL | DISTINCT ] expression )</li> <li>MIN ( [ ALL | DISTINCT ] expression )</li> <li>SUM ( [ ALL | DISTINCT ] expression )
</li><li>VAR ( [ ALL | DISTINCT ] expression )<br>
OVER ( [ partition_by_clause ] order_by_clause )</li> <li>VARP ( [ ALL | DISTINCT ] expression )<br>
OVER ( [ partition_by_clause ] order_by_clause</li> <li>STDEV ( [ ALL | DISTINCT ] expression )<br>
OVER ( [ partition_by_clause ] order_by_clause )</li> <li>STDEVP ( [ ALL | DISTINCT ] expression )<br>
OVER ( [ partition_by_clause ] order_by_clause )</li></ul> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <p>In database management an aggregate function is a function where the values of multiple rows are grouped together as input on certain criteria to form a single value of more significant meaning or measurement such as a set, a bag or a list.</p> <div class="language-sql extra-class"><pre class="language-sql"><code>MIN        <span class="token keyword">returns</span> the smallest <span class="token keyword">value</span> <span class="token operator">in</span> a given <span class="token keyword">column</span>
MAX        <span class="token keyword">returns</span> the largest <span class="token keyword">value</span> <span class="token operator">in</span> a given <span class="token keyword">column</span>
SUM        <span class="token keyword">returns</span> the sum <span class="token keyword">of</span> the <span class="token keyword">numeric</span> <span class="token keyword">values</span> <span class="token operator">in</span> a given <span class="token keyword">column</span>
AVG        <span class="token keyword">returns</span> the average <span class="token keyword">value</span> <span class="token keyword">of</span> a given <span class="token keyword">column</span>
COUNT      <span class="token keyword">returns</span> the total number <span class="token keyword">of</span> <span class="token keyword">values</span> <span class="token operator">in</span> a given <span class="token keyword">column</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>   <span class="token keyword">returns</span> the number <span class="token keyword">of</span> <span class="token keyword">rows</span> <span class="token operator">in</span> a <span class="token keyword">table</span>
GROUPING   <span class="token operator">Is</span> a <span class="token keyword">column</span> <span class="token operator">or</span> an expression that <span class="token keyword">contains</span> a <span class="token keyword">column</span> <span class="token operator">in</span> a <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> clause<span class="token punctuation">.</span>
STDEV      <span class="token keyword">returns</span> the statistical standard deviation <span class="token keyword">of</span> <span class="token keyword">all</span> <span class="token keyword">values</span> <span class="token operator">in</span> the specified expression<span class="token punctuation">.</span>
STDEVP     <span class="token keyword">returns</span> the statistical standard deviation <span class="token keyword">for</span> the population <span class="token keyword">for</span> <span class="token keyword">all</span> <span class="token keyword">values</span> <span class="token operator">in</span> the specified expression<span class="token punctuation">.</span>
VAR        <span class="token keyword">returns</span> the statistical variance <span class="token keyword">of</span> <span class="token keyword">all</span> <span class="token keyword">values</span> <span class="token operator">in</span> the specified expression<span class="token punctuation">.</span> may be followed <span class="token keyword">by</span> the <span class="token keyword">OVER</span> clause<span class="token punctuation">.</span>
VARP       <span class="token keyword">returns</span> the statistical variance <span class="token keyword">for</span> the population <span class="token keyword">for</span> <span class="token keyword">all</span> <span class="token keyword">values</span> <span class="token operator">in</span> the specified expression<span class="token punctuation">.</span>

</code></pre></div><blockquote></blockquote> <p>Aggregate functions are used to compute against a &quot;returned column of
numeric data&quot; from your `SELECT` statement. They basically summarize
the results of a particular column of selected data. - [SQLCourse2.com](http://www.sqlcourse2.com/agg_functions.html)</p> <p>All aggregate functions ignore NULL values.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/sql/functions-aggregate.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/sql/string-functions.html" class="prev">
        String Functions
      </a></span> <span class="next"><a href="/sql/functions-scalar-single-row.html">
        Functions (Scalar/Single Row)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/3266.116e27f1.js" defer></script>
  </body>
</html>
