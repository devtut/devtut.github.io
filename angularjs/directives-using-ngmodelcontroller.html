<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AngularJS - Directives using ngModelController</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="A simple control: rating, A couple of complex controls: edit a full object">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="AngularJS - Directives using ngModelController">
    <meta property="og:description" content="A simple control: rating, A couple of complex controls: edit a full object">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/angularjs/directives-using-ngmodelcontroller.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="AngularJS - Directives using ngModelController">
    <meta name="twitter:description" content="A simple control: rating, A couple of complex controls: edit a full object">
    <meta name="twitter:url" content="/angularjs/directives-using-ngmodelcontroller.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/439.6c3cdaad.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>AngularJS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/angularjs/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/angularjs/getting-started-with-angularjs.html" class="sidebar-link">Getting started with AngularJS</a></li><li><a href="/angularjs/modules.html" class="sidebar-link">Modules</a></li><li><a href="/angularjs/components.html" class="sidebar-link">Components</a></li><li><a href="/angularjs/built-in-directives.html" class="sidebar-link">Built-in directives</a></li><li><a href="/angularjs/use-of-in-built-directives.html" class="sidebar-link">Use of in-built directives</a></li><li><a href="/angularjs/custom-directives.html" class="sidebar-link">Custom Directives</a></li><li><a href="/angularjs/how-data-binding-works.html" class="sidebar-link">How data binding works</a></li><li><a href="/angularjs/angular-project-directory-structure.html" class="sidebar-link">Angular Project - Directory Structure</a></li><li><a href="/angularjs/filters.html" class="sidebar-link">Filters</a></li><li><a href="/angularjs/custom-filters.html" class="sidebar-link">Custom filters</a></li><li><a href="/angularjs/constants.html" class="sidebar-link">Constants</a></li><li><a href="/angularjs/custom-filters-with-es6.html" class="sidebar-link">Custom filters with ES6</a></li><li><a href="/angularjs/directives-using-ngmodelcontroller.html" aria-current="page" class="active sidebar-link">Directives using ngModelController</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/angularjs/directives-using-ngmodelcontroller.html#a-simple-control-rating" class="sidebar-link">A simple control: rating</a></li><li class="sidebar-sub-header"><a href="/angularjs/directives-using-ngmodelcontroller.html#a-couple-of-complex-controls-edit-a-full-object" class="sidebar-link">A couple of complex controls: edit a full object</a></li></ul></li><li><a href="/angularjs/controllers.html" class="sidebar-link">Controllers</a></li><li><a href="/angularjs/controllers-with-es6.html" class="sidebar-link">Controllers with ES6</a></li><li><a href="/angularjs/the-self-or-this-variable-in-a-controller.html" class="sidebar-link">The Self Or This Variable In A Controller</a></li><li><a href="/angularjs/services.html" class="sidebar-link">Services</a></li><li><a href="/angularjs/distinguishing-service-vs-factory.html" class="sidebar-link">Distinguishing Service vs Factory</a></li><li><a href="/angularjs/angular-promises-with-q-service.html" class="sidebar-link">Angular promises with $q service</a></li><li><a href="/angularjs/dependency-injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/angularjs/events.html" class="sidebar-link">Events</a></li><li><a href="/angularjs/sharing-data.html" class="sidebar-link">Sharing Data</a></li><li><a href="/angularjs/form-validation.html" class="sidebar-link">Form Validation</a></li><li><a href="/angularjs/routing-using-ngroute.html" class="sidebar-link">Routing using ngRoute</a></li><li><a href="/angularjs/ng-class-directive.html" class="sidebar-link">ng-class directive</a></li><li><a href="/angularjs/ng-repeat.html" class="sidebar-link">ng-repeat</a></li><li><a href="/angularjs/ng-style.html" class="sidebar-link">ng-style</a></li><li><a href="/angularjs/ng-view.html" class="sidebar-link">ng-view</a></li><li><a href="/angularjs/angularjs-bindings-options-etc.html" class="sidebar-link">AngularJS bindings options (=, @, &amp; etc.)</a></li><li><a href="/angularjs/providers.html" class="sidebar-link">Providers</a></li><li><a href="/angularjs/decorators.html" class="sidebar-link">Decorators</a></li><li><a href="/angularjs/print.html" class="sidebar-link">Print</a></li><li><a href="/angularjs/ui-router.html" class="sidebar-link">ui-router</a></li><li><a href="/angularjs/built-in-helper-functions.html" class="sidebar-link">Built-in helper Functions</a></li><li><a href="/angularjs/digest-loop-walkthrough.html" class="sidebar-link">digest loop walkthrough</a></li><li><a href="/angularjs/angular-scopes.html" class="sidebar-link">Angular $scopes</a></li><li><a href="/angularjs/using-angularjs-with-typescript.html" class="sidebar-link">Using AngularJS with TypeScript</a></li><li><a href="/angularjs/http-request.html" class="sidebar-link">$http request</a></li><li><a href="/angularjs/prepare-for-production-grunt.html" class="sidebar-link">Prepare for Production - Grunt</a></li><li><a href="/angularjs/grunt-tasks.html" class="sidebar-link">Grunt tasks</a></li><li><a href="/angularjs/lazy-loading.html" class="sidebar-link">Lazy loading</a></li><li><a href="/angularjs/http-interceptor.html" class="sidebar-link">HTTP Interceptor</a></li><li><a href="/angularjs/session-storage.html" class="sidebar-link">Session storage</a></li><li><a href="/angularjs/angular-mvc.html" class="sidebar-link">Angular MVC</a></li><li><a href="/angularjs/signalr-with-angularjs.html" class="sidebar-link">SignalR with AngularJs</a></li><li><a href="/angularjs/migration-to-angular-2.html" class="sidebar-link">Migration to Angular 2+</a></li><li><a href="/angularjs/angularjs-with-data-filter-pagination-etc.html" class="sidebar-link">angularjs with data filter, pagination etc</a></li><li><a href="/angularjs/profiling-and-performance.html" class="sidebar-link">Profiling and Performance</a></li><li><a href="/angularjs/performance-profiling.html" class="sidebar-link">Performance Profiling</a></li><li><a href="/angularjs/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/angularjs/unit-tests.html" class="sidebar-link">Unit tests</a></li><li><a href="/angularjs/angularjs-gotchas-and-traps.html" class="sidebar-link">AngularJS gotchas and traps</a></li><li><a href="/angularjs/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="directives-using-ngmodelcontroller"><a href="#directives-using-ngmodelcontroller" class="header-anchor">#</a> Directives using ngModelController</h1> <h2 id="a-simple-control-rating"><a href="#a-simple-control-rating" class="header-anchor">#</a> A simple control: rating</h2> <p>Let us build a simple control, a rating widget, intended to be used as:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>rating min<span class="token operator">=</span><span class="token string">&quot;0&quot;</span> max<span class="token operator">=</span><span class="token string">&quot;5&quot;</span> nullifier<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> ng<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;data.rating&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>rating<span class="token operator">&gt;</span>

</code></pre></div><p>No fancy CSS for now; this would render as:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> x

</code></pre></div><p>Clicking on a number selects that rating; and clicking the &quot;x&quot; sets the rating to null.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'rating'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">function</span> <span class="token function">RatingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rating <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">=</span> <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">=</span> <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token class-name">RatingController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setNgModel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ngModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel <span class="token operator">=</span> ngModel<span class="token punctuation">;</span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span> ngModel <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// KEY POINT 1</span>
            ngModel<span class="token punctuation">.</span>$render <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token class-name">RatingController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rating <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span>$viewValue <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span>$viewValue <span class="token operator">:</span> <span class="token operator">-</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token class-name">RatingController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_calculateOptions</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">+</span> i<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token class-name">RatingController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setValue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rating <span class="token operator">=</span> val<span class="token punctuation">;</span>
        <span class="token comment">// KEY POINT 2</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span><span class="token function">$setViewValue</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token comment">// KEY POINT 3</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">RatingController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'min'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_min<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_min <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_calculateOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">RatingController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'max'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_max<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_max <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_calculateOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        restrict<span class="token operator">:</span> <span class="token string">'E'</span><span class="token punctuation">,</span>
        scope<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// KEY POINT 3</span>
            min<span class="token operator">:</span> <span class="token string">'&lt;?'</span><span class="token punctuation">,</span>
            max<span class="token operator">:</span> <span class="token string">'&lt;?'</span><span class="token punctuation">,</span>
            nullifier<span class="token operator">:</span> <span class="token string">'&lt;?'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        bindToController<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        controllerAs<span class="token operator">:</span> <span class="token string">'ctrl'</span><span class="token punctuation">,</span>
        controller<span class="token operator">:</span> RatingController<span class="token punctuation">,</span>
        require<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'rating'</span><span class="token punctuation">,</span> <span class="token string">'ngModel'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">link</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">scope<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> ctrls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ctrls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setNgModel</span><span class="token punctuation">(</span>ctrls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        template<span class="token operator">:</span>
            <span class="token string">'&lt;span ng-repeat=&quot;o in ctrl.options&quot; href=&quot;#&quot; class=&quot;rating-option&quot; ng-class=&quot;{\'rating-option-active\': o &lt;= ctrl.rating}&quot; ng-click=&quot;ctrl.setValue(o)&quot;&gt;{ { o } }&lt;/span&gt;'</span> <span class="token operator">+</span>
            <span class="token string">'&lt;span ng-if=&quot;ctrl.nullifier&quot; ng-click=&quot;ctrl.setValue(null)&quot; class=&quot;rating-nullifier&quot;&gt;&amp;#10006;&lt;/span&gt;'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Key points:</p> <ol><li>Implement <code>ngModel.$render</code> to transfer the model's <strong>view value</strong> to your view.</li> <li>Call <code>ngModel.$setViewValue()</code> whenever you feel the view value should be updated.</li> <li>The control can of course be parameterized; use <code>'&lt;'</code> scope bindings for parameters, if in Angular &gt;= 1.5 to clearly indicate input - one way binding. If you have to take action whenever a parameter changes, you can use a JavaScript property (see <code>Object.defineProperty()</code>) to save a few watches.</li></ol> <p>Note 1: In order not to overcomplicate the implementation, the rating values are inserted in an array - the <code>ctrl.options</code>. This is not needed; a more efficient, but also more complex, implementation could use DOM manipulation to insert/remove ratings when <code>min</code>/<code>max</code> change.</p> <p>Note 2: With the exception of the <code>'&lt;'</code> scope bindings, this example can be used in Angular &lt; 1.5. If you are on Angular &gt;= 1.5, it would be a good idea to tranform this to a component and use the <code>$onInit()</code> lifecycle hook to initialize <code>min</code> and <code>max</code>, instead of doing so in the controller's constructor.</p> <p>And a necessary fiddle: <a href="https://jsfiddle.net/h81mgxma/" target="_blank" rel="noopener noreferrer">https://jsfiddle.net/h81mgxma/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="a-couple-of-complex-controls-edit-a-full-object"><a href="#a-couple-of-complex-controls-edit-a-full-object" class="header-anchor">#</a> A couple of complex controls: edit a full object</h2> <p>A custom control does not have to limit itself to trivial things like primitives; it can edit more interesting things. Here we present two types of custom controls, one for editing persons and one for editing addresses. The address control is used to edit the person's address. An example of usage would be:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>input<span class="token operator">-</span>person ng<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;data.thePerson&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">-</span>person<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input<span class="token operator">-</span>address ng<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;data.thePerson.address&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">-</span>address<span class="token operator">&gt;</span>

</code></pre></div><p>The model for this example is deliberately simplistic:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data <span class="token operator">=</span> data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> data<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> data<span class="token punctuation">.</span>address <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>address<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Address</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data <span class="token operator">=</span> data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>street <span class="token operator">=</span> data<span class="token punctuation">.</span>street<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">=</span> data<span class="token punctuation">.</span>number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The address editor:</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'inputAddress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    InputAddressController<span class="token punctuation">.</span>$inject <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'$scope'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">InputAddressController</span><span class="token punctuation">(</span><span class="token parameter">$scope</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$scope <span class="token operator">=</span> $scope<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_unwatch <span class="token operator">=</span> angular<span class="token punctuation">.</span>noop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">InputAddressController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setNgModel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ngModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel <span class="token operator">=</span> ngModel<span class="token punctuation">;</span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span> ngModel <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// KEY POINT 3</span>
            ngModel<span class="token punctuation">.</span>$render <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token class-name">InputAddressController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_makeWatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// KEY POINT 1</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_unwatch <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$scope<span class="token punctuation">.</span><span class="token function">$watchCollection</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newval<span class="token punctuation">,</span> oldval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span> newval <span class="token operator">!==</span> oldval <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// skip the initial trigger</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span><span class="token function">$setViewValue</span><span class="token punctuation">(</span>newval <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>newval<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token class-name">InputAddressController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// KEY POINT 2</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_unwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span>$viewValue <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span>$viewValue<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_makeWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        restrict<span class="token operator">:</span> <span class="token string">'E'</span><span class="token punctuation">,</span>
        scope<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        bindToController<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        controllerAs<span class="token operator">:</span> <span class="token string">'ctrl'</span><span class="token punctuation">,</span>
        controller<span class="token operator">:</span> InputAddressController<span class="token punctuation">,</span>
        require<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'inputAddress'</span><span class="token punctuation">,</span> <span class="token string">'ngModel'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">link</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">scope<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> ctrls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ctrls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setNgModel</span><span class="token punctuation">(</span>ctrls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        template<span class="token operator">:</span>
            <span class="token string">'&lt;div&gt;'</span> <span class="token operator">+</span>
                <span class="token string">'&lt;label&gt;&lt;span&gt;Street:&lt;/span&gt;&lt;input type=&quot;text&quot; ng-model=&quot;ctrl.value.street&quot; /&gt;&lt;/label&gt;'</span> <span class="token operator">+</span>
                <span class="token string">'&lt;label&gt;&lt;span&gt;Number:&lt;/span&gt;&lt;input type=&quot;text&quot; ng-model=&quot;ctrl.value.number&quot; /&gt;&lt;/label&gt;'</span> <span class="token operator">+</span>
            <span class="token string">'&lt;/div&gt;'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Key points:</p> <ol><li>We are editing an object; we do not want to change directly the object given to us from our parent (we want our model to be compatible with the immutability principle). So we create a shallow watch on the object being edited and update the model with <code>$setViewValue()</code> whenever a property changes. We pass a <strong>copy</strong> to our parent.</li> <li>Whenever the model changes from the outside, we copy it and save the copy to our scope. Immutability principles again, though the internal copy is not immutable, the external could very well be. Additionally we rebuild the watch (<code>this_unwatch();this._makeWatch();</code>), to avoid triggering the watcher for changes pushed to us by the model. (We only want the watch to trigger for changes made in the UI.)</li> <li>Other that the points above, we implement <code>ngModel.$render()</code> and call <code>ngModel.$setViewValue()</code> as we would for a simple control (see the rating example).</li></ol> <p>The code for the person custom control is almost identical. The template is using the <code>&lt;input-address&gt;</code>. In a more advanced implementation we could extract the controllers in a reusable module.</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'inputPerson'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    InputPersonController<span class="token punctuation">.</span>$inject <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'$scope'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">InputPersonController</span><span class="token punctuation">(</span><span class="token parameter">$scope</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$scope <span class="token operator">=</span> $scope<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_unwatch <span class="token operator">=</span> angular<span class="token punctuation">.</span>noop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">InputPersonController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setNgModel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ngModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel <span class="token operator">=</span> ngModel<span class="token punctuation">;</span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span> ngModel <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ngModel<span class="token punctuation">.</span>$render <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token class-name">InputPersonController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_makeWatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_unwatch <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$scope<span class="token punctuation">.</span><span class="token function">$watchCollection</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newval<span class="token punctuation">,</span> oldval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span> newval <span class="token operator">!==</span> oldval <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// skip the initial trigger</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span><span class="token function">$setViewValue</span><span class="token punctuation">(</span>newval <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>newval<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token class-name">InputPersonController</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_unwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span>$viewValue <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_ngModel<span class="token punctuation">.</span>$viewValue<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_makeWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        restrict<span class="token operator">:</span> <span class="token string">'E'</span><span class="token punctuation">,</span>
        scope<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        bindToController<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        controllerAs<span class="token operator">:</span> <span class="token string">'ctrl'</span><span class="token punctuation">,</span>
        controller<span class="token operator">:</span> InputPersonController<span class="token punctuation">,</span>
        require<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'inputPerson'</span><span class="token punctuation">,</span> <span class="token string">'ngModel'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">link</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">scope<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> ctrls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ctrls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setNgModel</span><span class="token punctuation">(</span>ctrls<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        template<span class="token operator">:</span>
            <span class="token string">'&lt;div&gt;'</span> <span class="token operator">+</span>
                <span class="token string">'&lt;label&gt;&lt;span&gt;Name:&lt;/span&gt;&lt;input type=&quot;text&quot; ng-model=&quot;ctrl.value.name&quot; /&gt;&lt;/label&gt;'</span> <span class="token operator">+</span>
                <span class="token string">'&lt;input-address ng-model=&quot;ctrl.value.address&quot;&gt;&lt;/input-address&gt;'</span> <span class="token operator">+</span>
            <span class="token string">'&lt;/div&gt;'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Note: Here the objects are typed, i.e. they have proper constructors. This is not obligatory; the model can be plain JSON objects. In this case just use <code>angular.copy()</code> instead of the constructors. An added advantage is that the controller becomes identical for the two controls and can easily be extracted into some common module.</p> <p>The fiddle: <a href="https://jsfiddle.net/3tzyqfko/2/" target="_blank" rel="noopener noreferrer">https://jsfiddle.net/3tzyqfko/2/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Two versions of the fiddle having extracted the common code of the controllers: <a href="https://jsfiddle.net/agj4cp0e/" target="_blank" rel="noopener noreferrer">https://jsfiddle.net/agj4cp0e/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://jsfiddle.net/ugb6Lw8b/" target="_blank" rel="noopener noreferrer">https://jsfiddle.net/ugb6Lw8b/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/angularjs/directives-using-ngmodelcontroller.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/angularjs/custom-filters-with-es6.html" class="prev">
        Custom filters with ES6
      </a></span> <span class="next"><a href="/angularjs/controllers.html">
        Controllers
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/439.6c3cdaad.js" defer></script>
  </body>
</html>
