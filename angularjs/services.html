<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AngularJS - Services</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Creating a service using angular.factory, How to create a Service, How to use a service, $sce - sanitize and render content and resources in templates, Difference between Service and Factory, How to create a Service with dependencies using 'array syntax', Registering a Service">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="AngularJS - Services">
    <meta property="og:description" content="Creating a service using angular.factory, How to create a Service, How to use a service, $sce - sanitize and render content and resources in templates, Difference between Service and Factory, How to create a Service with dependencies using 'array syntax', Registering a Service">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/angularjs/services.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="AngularJS - Services">
    <meta name="twitter:description" content="Creating a service using angular.factory, How to create a Service, How to use a service, $sce - sanitize and render content and resources in templates, Difference between Service and Factory, How to create a Service with dependencies using 'array syntax', Registering a Service">
    <meta name="twitter:url" content="/angularjs/services.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/462.15f1e09e.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>AngularJS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/angularjs/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/angularjs/getting-started-with-angularjs.html" class="sidebar-link">Getting started with AngularJS</a></li><li><a href="/angularjs/modules.html" class="sidebar-link">Modules</a></li><li><a href="/angularjs/components.html" class="sidebar-link">Components</a></li><li><a href="/angularjs/built-in-directives.html" class="sidebar-link">Built-in directives</a></li><li><a href="/angularjs/use-of-in-built-directives.html" class="sidebar-link">Use of in-built directives</a></li><li><a href="/angularjs/custom-directives.html" class="sidebar-link">Custom Directives</a></li><li><a href="/angularjs/how-data-binding-works.html" class="sidebar-link">How data binding works</a></li><li><a href="/angularjs/angular-project-directory-structure.html" class="sidebar-link">Angular Project - Directory Structure</a></li><li><a href="/angularjs/filters.html" class="sidebar-link">Filters</a></li><li><a href="/angularjs/custom-filters.html" class="sidebar-link">Custom filters</a></li><li><a href="/angularjs/constants.html" class="sidebar-link">Constants</a></li><li><a href="/angularjs/custom-filters-with-es6.html" class="sidebar-link">Custom filters with ES6</a></li><li><a href="/angularjs/directives-using-ngmodelcontroller.html" class="sidebar-link">Directives using ngModelController</a></li><li><a href="/angularjs/controllers.html" class="sidebar-link">Controllers</a></li><li><a href="/angularjs/controllers-with-es6.html" class="sidebar-link">Controllers with ES6</a></li><li><a href="/angularjs/the-self-or-this-variable-in-a-controller.html" class="sidebar-link">The Self Or This Variable In A Controller</a></li><li><a href="/angularjs/services.html" aria-current="page" class="active sidebar-link">Services</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/angularjs/services.html#creating-a-service-using-angular-factory" class="sidebar-link">Creating a service using angular.factory</a></li><li class="sidebar-sub-header"><a href="/angularjs/services.html#how-to-create-a-service" class="sidebar-link">How to create a Service</a></li><li class="sidebar-sub-header"><a href="/angularjs/services.html#how-to-use-a-service" class="sidebar-link">How to use a service</a></li><li class="sidebar-sub-header"><a href="/angularjs/services.html#sce-sanitize-and-render-content-and-resources-in-templates" class="sidebar-link">$sce - sanitize and render content and resources in templates</a></li><li class="sidebar-sub-header"><a href="/angularjs/services.html#difference-between-service-and-factory" class="sidebar-link">Difference between Service and Factory</a></li><li class="sidebar-sub-header"><a href="/angularjs/services.html#how-to-create-a-service-with-dependencies-using-array-syntax" class="sidebar-link">How to create a Service with dependencies using 'array syntax'</a></li><li class="sidebar-sub-header"><a href="/angularjs/services.html#registering-a-service" class="sidebar-link">Registering a Service</a></li></ul></li><li><a href="/angularjs/distinguishing-service-vs-factory.html" class="sidebar-link">Distinguishing Service vs Factory</a></li><li><a href="/angularjs/angular-promises-with-q-service.html" class="sidebar-link">Angular promises with $q service</a></li><li><a href="/angularjs/dependency-injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/angularjs/events.html" class="sidebar-link">Events</a></li><li><a href="/angularjs/sharing-data.html" class="sidebar-link">Sharing Data</a></li><li><a href="/angularjs/form-validation.html" class="sidebar-link">Form Validation</a></li><li><a href="/angularjs/routing-using-ngroute.html" class="sidebar-link">Routing using ngRoute</a></li><li><a href="/angularjs/ng-class-directive.html" class="sidebar-link">ng-class directive</a></li><li><a href="/angularjs/ng-repeat.html" class="sidebar-link">ng-repeat</a></li><li><a href="/angularjs/ng-style.html" class="sidebar-link">ng-style</a></li><li><a href="/angularjs/ng-view.html" class="sidebar-link">ng-view</a></li><li><a href="/angularjs/angularjs-bindings-options-etc.html" class="sidebar-link">AngularJS bindings options (=, @, &amp; etc.)</a></li><li><a href="/angularjs/providers.html" class="sidebar-link">Providers</a></li><li><a href="/angularjs/decorators.html" class="sidebar-link">Decorators</a></li><li><a href="/angularjs/print.html" class="sidebar-link">Print</a></li><li><a href="/angularjs/ui-router.html" class="sidebar-link">ui-router</a></li><li><a href="/angularjs/built-in-helper-functions.html" class="sidebar-link">Built-in helper Functions</a></li><li><a href="/angularjs/digest-loop-walkthrough.html" class="sidebar-link">digest loop walkthrough</a></li><li><a href="/angularjs/angular-scopes.html" class="sidebar-link">Angular $scopes</a></li><li><a href="/angularjs/using-angularjs-with-typescript.html" class="sidebar-link">Using AngularJS with TypeScript</a></li><li><a href="/angularjs/http-request.html" class="sidebar-link">$http request</a></li><li><a href="/angularjs/prepare-for-production-grunt.html" class="sidebar-link">Prepare for Production - Grunt</a></li><li><a href="/angularjs/grunt-tasks.html" class="sidebar-link">Grunt tasks</a></li><li><a href="/angularjs/lazy-loading.html" class="sidebar-link">Lazy loading</a></li><li><a href="/angularjs/http-interceptor.html" class="sidebar-link">HTTP Interceptor</a></li><li><a href="/angularjs/session-storage.html" class="sidebar-link">Session storage</a></li><li><a href="/angularjs/angular-mvc.html" class="sidebar-link">Angular MVC</a></li><li><a href="/angularjs/signalr-with-angularjs.html" class="sidebar-link">SignalR with AngularJs</a></li><li><a href="/angularjs/migration-to-angular-2.html" class="sidebar-link">Migration to Angular 2+</a></li><li><a href="/angularjs/angularjs-with-data-filter-pagination-etc.html" class="sidebar-link">angularjs with data filter, pagination etc</a></li><li><a href="/angularjs/profiling-and-performance.html" class="sidebar-link">Profiling and Performance</a></li><li><a href="/angularjs/performance-profiling.html" class="sidebar-link">Performance Profiling</a></li><li><a href="/angularjs/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/angularjs/unit-tests.html" class="sidebar-link">Unit tests</a></li><li><a href="/angularjs/angularjs-gotchas-and-traps.html" class="sidebar-link">AngularJS gotchas and traps</a></li><li><a href="/angularjs/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="services"><a href="#services" class="header-anchor">#</a> Services</h1> <h2 id="creating-a-service-using-angular-factory"><a href="#creating-a-service-using-angular-factory" class="header-anchor">#</a> Creating a service using angular.factory</h2> <p>First define the service (in this case it uses the factory pattern):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'dataService'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dataObject <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> service <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">// define the getter method</span>
        <span class="token keyword">get</span> <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> dataObject<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// define the setter method</span>
        <span class="token keyword">set</span> <span class="token function">data</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dataObject <span class="token operator">=</span> value <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// return the &quot;service&quot; object to expose the getter/setter</span>
    <span class="token keyword">return</span> service<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>Now you can use the service to share data between controllers:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'controllerOne'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dataService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// create a local reference to the dataService</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dataService <span class="token operator">=</span> dataService<span class="token punctuation">;</span>
    <span class="token comment">// create an object to store</span>
    <span class="token keyword">var</span> someObject <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'SomeObject'</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// store the object</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dataService<span class="token punctuation">.</span>data <span class="token operator">=</span> someObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'controllerTwo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dataService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// create a local reference to the dataService</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dataService <span class="token operator">=</span> dataService<span class="token punctuation">;</span>
    <span class="token comment">// this will automatically update with any changes to the shared data object</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>objectFromControllerOne <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataService<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="how-to-create-a-service"><a href="#how-to-create-a-service" class="header-anchor">#</a> How to create a Service</h2> <div class="language-js extra-class"><pre class="language-js"><code>angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">&quot;counterService&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">var</span> service <span class="token operator">=</span> <span class="token punctuation">{</span>
        number<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> service<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="how-to-use-a-service"><a href="#how-to-use-a-service" class="header-anchor">#</a> How to use a service</h2> <div class="language- extra-class"><pre class="language-text"><code>
   angular.module(&quot;app&quot;)
        
        // Custom services are injected just like Angular's built-in services
        .controller(&quot;step1Controller&quot;, ['counterService', '$scope', function(counterService, $scope) {
            counterService.number++;
            // bind to object (by reference), not to value, for automatic sync
            $scope.counter = counterService;
        })

</code></pre></div><p>In the template using this controller you'd then write:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// editable</span>
<span class="token operator">&lt;</span>input ng<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;counter.number&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

</code></pre></div><p>or</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// read-only</span>
<span class="token operator">&lt;</span>span ng<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;counter.number&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>

</code></pre></div><p>Of course, in real code you would interact with the service using methods on the controller, which  in turn delegate to the service. The example above simply increments the counter value each time the controller is used in a template.</p> <p>Services in Angularjs are singletons:</p> <p>Services are singleton objects that are instantiated only once per app (by the $injector) and lazy loaded (created only when necessary).</p> <blockquote></blockquote> <p>A singleton is a class which only allows one instance of itself to be
created - and gives simple, easy access to said instance.
[As stated here](http://stackoverflow.com/questions/2155688/what-is-a-singleton-in-c)</p> <h2 id="sce-sanitize-and-render-content-and-resources-in-templates"><a href="#sce-sanitize-and-render-content-and-resources-in-templates" class="header-anchor">#</a> $sce - sanitize and render content and resources in templates</h2> <blockquote></blockquote> <p>$sce <a href="https://docs.angularjs.org/api/ng/service/$sce" target="_blank" rel="noopener noreferrer">(&quot;Strict Contextual Escaping&quot;)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a built-in angular service that automatically sanitize content and internal sources in templates.</p> <p>injecting <strong>external</strong> sources and <strong>raw HTML</strong>  into the template requires manual wrapping of<code>$sce</code>.</p> <p><strong>In this example we'll create a simple $sce sanitation filter :</strong>`.</p> <p><a href="http://plnkr.co/edit/9tpXY7RF3QWN4eIXPdEU?p=preview" target="_blank" rel="noopener noreferrer">Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'sanitizer'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'$sce'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$sce</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> $sce<span class="token punctuation">.</span><span class="token function">trustAsResourceUrl</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>Usage in template</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div ng<span class="token operator">-</span>repeat<span class="token operator">=</span><span class="token string">&quot;item in items&quot;</span><span class="token operator">&gt;</span>
    
    <span class="token comment">// Sanitize external sources</span>
    <span class="token operator">&lt;</span>ifrmae ng<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">&quot;{ {item.youtube_url | sanitizer} }&quot;</span><span class="token operator">&gt;</span>
    
    <span class="token comment">// Sanitaize and render HTML </span>
    <span class="token operator">&lt;</span>div ng<span class="token operator">-</span>bind<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">&quot;{ {item.raw_html_content| sanitizer} }&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

</code></pre></div><h2 id="difference-between-service-and-factory"><a href="#difference-between-service-and-factory" class="header-anchor">#</a> Difference between Service and Factory</h2> <p><strong>1) Services</strong></p> <p>A service is a <code>constructor</code> function that is invoked once at runtime with <code>new</code>, just like what we would do with plain javascript with only
difference that <code>AngularJs</code> is calling the <code>new</code> behind the scenes.</p> <p>There is one thumb rule to remember in case of services</p> <ol><li>Services are constructors which are called with <code>new</code></li></ol> <p>Lets see a simple example where we would register a service which uses <code>$http</code> service to fetch student details, and use it in the controller</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentDetailsService</span><span class="token punctuation">(</span><span class="token parameter">$http</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getStudentDetails</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">getStudentDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> $http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/details'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'myapp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'StudentDetailsService'</span><span class="token punctuation">,</span> StudentDetailsService<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>We just inject this service into the controller</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentController</span><span class="token punctuation">(</span><span class="token parameter">StudentDetailsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  StudentDetailsService<span class="token punctuation">.</span><span class="token function">getStudentDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// handle response</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'StudentController'</span><span class="token punctuation">,</span> StudentController<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>When to use?</p> <p>Use <code>.service()</code> wherever you want to use a constructor. It is usually used to create public API's just like <code>getStudentDetails()</code>. But if you
don't want to use a constructor and wish to use a simple API pattern instead, then there isn't much flexibility in <code>.service()</code>.</p> <p><strong>2) Factory</strong></p> <p>Even though we can achieve all the things using <code>.factory()</code> which we would, using <code>.services()</code>, it doesn't make <code>.factory()</code> &quot;same as&quot; <code>.service()</code>.
It is much more powerful and flexible than <code>.service()</code></p> <p>A <code>.factory()</code> is a design pattern which is used to return a value.</p> <p>There are two thumb rules to remember in case of factories</p> <ol><li>Factories return values
</li><li>Factories (can) create objects (Any
object)</li></ol> <p>Lets see some examples on what we can do using <code>.factory()</code></p> <p><strong><strong>Returning Objects Literals</strong></strong></p> <p>Lets see an example where factory is used to return an object using a basic Revealing module pattern</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentDetailsService</span><span class="token punctuation">(</span><span class="token parameter">$http</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">getStudentDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> $http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/details'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    getStudentDetails<span class="token operator">:</span> getStudentDetails
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'myapp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'StudentDetailsService'</span><span class="token punctuation">,</span> StudentDetailsService<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Usage inside a controller</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentController</span><span class="token punctuation">(</span><span class="token parameter">StudentDetailsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  StudentDetailsService<span class="token punctuation">.</span><span class="token function">getStudentDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// handle response</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'StudentController'</span><span class="token punctuation">,</span> StudentController<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong><strong>Returning Closures</strong></strong></p> <p><strong>What is a closure?</strong></p> <p>Closures are functions that refer to variables that are used locally, BUT defined in an enclosing scope.</p> <p>Following is an example of a closure</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">closureFunction</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">innerClosureFunction</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// innerClosureFunction() is the inner function, a closure</span>
    <span class="token comment">// Here you can manipulate 'age' AND 'name' variables both</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>The <strong>&quot;wonderful&quot;</strong> part is that it can access the <code>name</code> which is in the parent scope.</p> <p>Lets use the above closure example inside <code>.factory()</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentDetailsService</span><span class="token punctuation">(</span><span class="token parameter">$http</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">closureFunction</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">innerClosureFunction</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Here you can manipulate 'age' AND 'name' variables</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'myapp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'StudentDetailsService'</span><span class="token punctuation">,</span> StudentDetailsService<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Usage inside a controller</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentController</span><span class="token punctuation">(</span><span class="token parameter">StudentDetailsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> myClosure <span class="token operator">=</span> <span class="token function">StudentDetailsService</span><span class="token punctuation">(</span><span class="token string">'Student Name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// This now HAS the innerClosureFunction()</span>
  <span class="token keyword">var</span> callMyClosure <span class="token operator">=</span> <span class="token function">myClosure</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// This calls the innerClosureFunction()</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'StudentController'</span><span class="token punctuation">,</span> StudentController<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong><strong>Creating Constructors/instances</strong></strong></p> <p><code>.service()</code> creates constructors with a call to <code>new</code> as seen above. <code>.factory()</code> can also create constructors with a call to <code>new</code></p> <p>Lets see an example on how to achieve this</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentDetailsService</span><span class="token punctuation">(</span><span class="token parameter">$http</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">age</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'This is my age'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">address</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'This is my address'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Student<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'myapp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'StudentDetailsService'</span><span class="token punctuation">,</span> StudentDetailsService<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>Usage inside a controller</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">StudentController</span><span class="token punctuation">(</span><span class="token parameter">StudentDetailsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> newStudent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StudentDetailsService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">//Now the instance has been created. Its properties can be accessed.</span>

 newStudent<span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 newStudent<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token punctuation">}</span><span class="token punctuation">;</span>

angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">'StudentController'</span><span class="token punctuation">,</span> StudentController<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="how-to-create-a-service-with-dependencies-using-array-syntax"><a href="#how-to-create-a-service-with-dependencies-using-array-syntax" class="header-anchor">#</a> How to create a Service with dependencies using 'array syntax'</h2> <div class="language-js extra-class"><pre class="language-js"><code>angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">&quot;counterService&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;fooService&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;barService&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">anotherService<span class="token punctuation">,</span> barService</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">var</span> service <span class="token operator">=</span> <span class="token punctuation">{</span>
        number<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> fooService<span class="token punctuation">.</span><span class="token function">bazMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Use of 'fooService'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">bar</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> barService<span class="token punctuation">.</span><span class="token function">bazMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Use of 'barService'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> service<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="registering-a-service"><a href="#registering-a-service" class="header-anchor">#</a> Registering a Service</h2> <p>The most common and flexible way to create a service uses the angular.module API factory:</p> <div class="language-js extra-class"><pre class="language-js"><code>angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'myApp.services'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'githubService'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       
   <span class="token keyword">var</span> serviceInstance <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token comment">// Our first service</span>
   <span class="token keyword">return</span> serviceInstance<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>The service factory function can be either a function or an array, just like the way we create
controllers:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Creating the factory through using the</span>
<span class="token comment">// bracket notation</span>
angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'myApp.services'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'githubService'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$http</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>To expose a method on our service, we can place it as an attribute on the service object.</p> <div class="language-js extra-class"><pre class="language-js"><code>angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'myApp.services'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'githubService'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$http</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> githubUrl <span class="token operator">=</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token function-variable function">runUserRequest</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Return the promise from the $http service</span>
        <span class="token comment">// that calls the Github API using JSONP</span>
        <span class="token keyword">return</span> <span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            method<span class="token operator">:</span> <span class="token string">'JSONP'</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span> githubUrl <span class="token operator">+</span> <span class="token string">'/users/'</span> <span class="token operator">+</span>
            username <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span>
            path <span class="token operator">+</span> <span class="token string">'?callback=JSON_CALLBACK'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">// Return the service object with a single function</span>
<span class="token comment">// events</span>
<span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">events</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">runUserRequest</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/angularjs/services.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/angularjs/the-self-or-this-variable-in-a-controller.html" class="prev">
        The Self Or This Variable In A Controller
      </a></span> <span class="next"><a href="/angularjs/distinguishing-service-vs-factory.html">
        Distinguishing Service vs Factory
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/462.15f1e09e.js" defer></script>
  </body>
</html>
