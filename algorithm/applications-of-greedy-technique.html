<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Algorithm - Applications of Greedy technique</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Ticket automat, Interval Scheduling, Minimizing Lateness, Offline Caching">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Algorithm - Applications of Greedy technique">
    <meta property="og:description" content="Ticket automat, Interval Scheduling, Minimizing Lateness, Offline Caching">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/algorithm/applications-of-greedy-technique.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Algorithm - Applications of Greedy technique">
    <meta name="twitter:description" content="Ticket automat, Interval Scheduling, Minimizing Lateness, Offline Caching">
    <meta name="twitter:url" content="/algorithm/applications-of-greedy-technique.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/16.4df12303.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Algorithm</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/algorithm/getting-started-with-algorithm.html" class="sidebar-link">Getting started with algorithm</a></li><li><a href="/algorithm/algorithm-complexity.html" class="sidebar-link">Algorithm Complexity</a></li><li><a href="/algorithm/big-o-notation.html" class="sidebar-link">Big-O Notation</a></li><li><a href="/algorithm/trees.html" class="sidebar-link">Trees</a></li><li><a href="/algorithm/binary-search-trees.html" class="sidebar-link">Binary Search Trees</a></li><li><a href="/algorithm/check-if-a-tree-is-bst-or-not.html" class="sidebar-link">Check if a tree is BST or not</a></li><li><a href="/algorithm/binary-tree-traversals.html" class="sidebar-link">Binary Tree traversals</a></li><li><a href="/algorithm/lowest-common-ancestor-of-a-binary-tree.html" class="sidebar-link">Lowest common ancestor of a Binary Tree</a></li><li><a href="/algorithm/graph.html" class="sidebar-link">Graph</a></li><li><a href="/algorithm/graph-traversals.html" class="sidebar-link">Graph Traversals</a></li><li><a href="/algorithm/dijkstras-algorithm.html" class="sidebar-link">Dijkstra’s Algorithm</a></li><li><a href="/algorithm/a-pathfinding.html" class="sidebar-link">A* Pathfinding</a></li><li><a href="/algorithm/a-pathfinding-algorithm.html" class="sidebar-link">A* Pathfinding Algorithm</a></li><li><a href="/algorithm/dynamic-programming.html" class="sidebar-link">Dynamic Programming</a></li><li><a href="/algorithm/applications-of-dynamic-programming.html" class="sidebar-link">Applications of Dynamic Programming</a></li><li><a href="/algorithm/kruskal-s-algorithm.html" class="sidebar-link">Kruskal's Algorithm</a></li><li><a href="/algorithm/greedy-algorithms.html" class="sidebar-link">Greedy Algorithms</a></li><li><a href="/algorithm/applications-of-greedy-technique.html" aria-current="page" class="active sidebar-link">Applications of Greedy technique</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/applications-of-greedy-technique.html#ticket-automat" class="sidebar-link">Ticket automat</a></li><li class="sidebar-sub-header"><a href="/algorithm/applications-of-greedy-technique.html#interval-scheduling" class="sidebar-link">Interval Scheduling</a></li><li class="sidebar-sub-header"><a href="/algorithm/applications-of-greedy-technique.html#minimizing-lateness" class="sidebar-link">Minimizing Lateness</a></li><li class="sidebar-sub-header"><a href="/algorithm/applications-of-greedy-technique.html#offline-caching" class="sidebar-link">Offline Caching</a></li></ul></li><li><a href="/algorithm/prim-s-algorithm.html" class="sidebar-link">Prim's Algorithm</a></li><li><a href="/algorithm/bellman-ford-algorithm.html" class="sidebar-link">Bellman–Ford Algorithm</a></li><li><a href="/algorithm/line-algorithm.html" class="sidebar-link">Line Algorithm</a></li><li><a href="/algorithm/floyd-warshall-algorithm.html" class="sidebar-link">Floyd-Warshall Algorithm</a></li><li><a href="/algorithm/catalan-number-algorithm.html" class="sidebar-link">Catalan Number Algorithm</a></li><li><a href="/algorithm/multithreaded-algorithms.html" class="sidebar-link">Multithreaded Algorithms</a></li><li><a href="/algorithm/knuth-morris-pratt-kmp-algorithm.html" class="sidebar-link">Knuth Morris Pratt (KMP) Algorithm</a></li><li><a href="/algorithm/edit-distance-dynamic-algorithm.html" class="sidebar-link">Edit Distance Dynamic Algorithm</a></li><li><a href="/algorithm/online-algorithms.html" class="sidebar-link">Online algorithms</a></li><li><a href="/algorithm/integer-partition-algorithm.html" class="sidebar-link">Integer Partition Algorithm</a></li><li><a href="/algorithm/maximum-path-sum-algorithm.html" class="sidebar-link">Maximum Path Sum Algorithm</a></li><li><a href="/algorithm/maximum-subarray-algorithm.html" class="sidebar-link">Maximum Subarray Algorithm</a></li><li><a href="/algorithm/sliding-window-algorithm.html" class="sidebar-link">Sliding Window Algorithm</a></li><li><a href="/algorithm/sorting.html" class="sidebar-link">Sorting</a></li><li><a href="/algorithm/bubble-sort.html" class="sidebar-link">Bubble Sort</a></li><li><a href="/algorithm/merge-sort.html" class="sidebar-link">Merge Sort</a></li><li><a href="/algorithm/insertion-sort.html" class="sidebar-link">Insertion Sort</a></li><li><a href="/algorithm/bucket-sort.html" class="sidebar-link">Bucket Sort</a></li><li><a href="/algorithm/quicksort.html" class="sidebar-link">Quicksort</a></li><li><a href="/algorithm/counting-sort.html" class="sidebar-link">Counting Sort</a></li><li><a href="/algorithm/heap-sort.html" class="sidebar-link">Heap Sort</a></li><li><a href="/algorithm/cycle-sort.html" class="sidebar-link">Cycle Sort</a></li><li><a href="/algorithm/odd-even-sort.html" class="sidebar-link">Odd-Even Sort</a></li><li><a href="/algorithm/selection-sort.html" class="sidebar-link">Selection Sort</a></li><li><a href="/algorithm/pigeonhole-sort.html" class="sidebar-link">Pigeonhole Sort</a></li><li><a href="/algorithm/radix-sort.html" class="sidebar-link">Radix Sort</a></li><li><a href="/algorithm/shell-sort.html" class="sidebar-link">Shell Sort</a></li><li><a href="/algorithm/pancake-sort.html" class="sidebar-link">Pancake Sort</a></li><li><a href="/algorithm/searching.html" class="sidebar-link">Searching</a></li><li><a href="/algorithm/substring-search.html" class="sidebar-link">Substring Search</a></li><li><a href="/algorithm/breadth-first-search.html" class="sidebar-link">Breadth-First Search</a></li><li><a href="/algorithm/depth-first-search.html" class="sidebar-link">Depth First Search</a></li><li><a href="/algorithm/hash-functions.html" class="sidebar-link">Hash Functions</a></li><li><a href="/algorithm/travelling-salesman.html" class="sidebar-link">Travelling Salesman</a></li><li><a href="/algorithm/shortest-common-supersequence-problem.html" class="sidebar-link">Shortest Common Supersequence Problem</a></li><li><a href="/algorithm/knapsack-problem.html" class="sidebar-link">Knapsack Problem</a></li><li><a href="/algorithm/equation-solving.html" class="sidebar-link">Equation Solving</a></li><li><a href="/algorithm/longest-common-subsequence.html" class="sidebar-link">Longest Common Subsequence</a></li><li><a href="/algorithm/longest-increasing-subsequence.html" class="sidebar-link">Longest Increasing Subsequence</a></li><li><a href="/algorithm/check-two-strings-are-anagrams.html" class="sidebar-link">Check two strings are anagrams</a></li><li><a href="/algorithm/pascal-s-triangle.html" class="sidebar-link">Pascal's Triangle</a></li><li><a href="/algorithm/algo-print-a-m-n-matrix-in-square-wise.html" class="sidebar-link">Algo:- Print a m*n matrix in square wise</a></li><li><a href="/algorithm/matrix-exponentiation.html" class="sidebar-link">Matrix Exponentiation</a></li><li><a href="/algorithm/polynomial-time-bounded-algorithm-for-minimum-vertex-cover.html" class="sidebar-link">polynomial-time bounded algorithm for Minimum Vertex Cover</a></li><li><a href="/algorithm/dynamic-time-warping.html" class="sidebar-link">Dynamic Time Warping</a></li><li><a href="/algorithm/fast-fourier-transform.html" class="sidebar-link">Fast Fourier Transform</a></li><li><a href="/algorithm/pseudocode.html" class="sidebar-link">Pseudocode</a></li><li><a href="/algorithm/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="applications-of-greedy-technique"><a href="#applications-of-greedy-technique" class="header-anchor">#</a> Applications of Greedy technique</h1> <h2 id="ticket-automat"><a href="#ticket-automat" class="header-anchor">#</a> Ticket automat</h2> <p>First simple Example:</p> <p>You have a ticket automat which gives exchange in coins with values 1, 2, 5, 10 and 20. The dispension of the exchange can be seen as a series of coin drops until the right value is dispensed. We say a dispension is <strong>optimal</strong> when its <strong>coin count is minimal</strong> for its value.</p> <p>Let <code>M</code> in <code>[1,50]</code> be the price for the ticket <code>T</code> and <code>P</code> in <code>[1,50]</code> the money somebody paid for <code>T</code>, with <code>P &gt;= M</code>. Let <code>D=P-M</code>. We define the <strong>benefit</strong> of a step as the difference between <code>D</code> and <code>D-c</code> with <code>c</code> the coin the automat dispense in this step.</p> <p>The <strong>Greedy Technique</strong> for the exchange is the following pseudo algorithmic approach:</p> <p><strong>Step 1:</strong> while <code>D &gt; 20</code> dispense a 20 coin and set <code>D = D - 20</code> <br> <strong>Step 2:</strong> while <code>D &gt; 10</code> dispense a 10 coin and set <code>D = D - 10</code> <br> <strong>Step 3:</strong> while <code>D &gt; 5</code> dispense a 5 coin and set <code>D = D - 5</code> <br> <strong>Step 4:</strong> while <code>D &gt; 2</code> dispense a 2 coin and set <code>D = D - 2</code> <br> <strong>Step 5:</strong> while <code>D &gt; 1</code> dispense a 1 coin and set <code>D = D - 1</code> <br></p> <p>Afterwards the sum of all coins clearly equals <code>D</code>. Its a <strong>greedy algorithm</strong> because after each step and after each repitition of a step the benefit is maximized. We cannot dispense another coin with a higher benefit.</p> <p>Now the ticket automat as program (in C++):</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">// read some coin values, sort them descending,</span>
<span class="token comment">// purge copies and guaratee the 1 coin is in it</span>
std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">readInCoinValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> coinValues<span class="token punctuation">;</span>   <span class="token comment">// Array of coin values ascending    </span>
    <span class="token keyword">int</span> ticketPrice<span class="token punctuation">;</span>                        <span class="token comment">// M in example</span>
    <span class="token keyword">int</span> paidMoney<span class="token punctuation">;</span>                          <span class="token comment">// P in example</span>

    <span class="token comment">// generate coin values</span>
    coinValues <span class="token operator">=</span> <span class="token function">readInCoinValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ticket price: &quot;</span><span class="token punctuation">;</span>
    cin <span class="token operator">&gt;&gt;</span> ticketPrice<span class="token punctuation">;</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;money paid: &quot;</span><span class="token punctuation">;</span>
    cin <span class="token operator">&gt;&gt;</span> paidMoney<span class="token punctuation">;</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>paidMoney <span class="token operator">&lt;=</span> ticketPrice<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;No exchange money&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">int</span> diffValue <span class="token operator">=</span> paidMoney <span class="token operator">-</span> ticketPrice<span class="token punctuation">;</span>
    
    <span class="token comment">// Here starts greedy</span>

    <span class="token comment">// we save how many coins we have to give out</span>
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> coinCount<span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> coinValue  <span class="token operator">=</span> coinValues<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             coinValue <span class="token operator">!=</span> coinValues<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>coinValue<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> countCoins <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span>diffValue <span class="token operator">&gt;=</span> <span class="token operator">*</span>coinValue<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            diffValue <span class="token operator">-=</span> <span class="token operator">*</span>coinValue<span class="token punctuation">;</span>
            countCoins<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        coinCount<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>countCoins<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// print out result</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;the difference &quot;</span> <span class="token operator">&lt;&lt;</span> paidMoney <span class="token operator">-</span> ticketPrice 
         <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; is paid with: &quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coinValues<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>coinCount<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            cout <span class="token operator">&lt;&lt;</span> coinCount<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; coins with value &quot;</span> 
                 <span class="token operator">&lt;&lt;</span> coinValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">readInCoinValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// coin values</span>
    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> coinValues<span class="token punctuation">;</span>
    
    <span class="token comment">// make sure 1 is in vectore</span>
    coinValues<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// read in coin values (attention: error handling is omitted)</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> coinValue<span class="token punctuation">;</span>
        
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Coin value (&lt;1 to stop): &quot;</span><span class="token punctuation">;</span>
        cin <span class="token operator">&gt;&gt;</span> coinValue<span class="token punctuation">;</span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span>coinValue <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            coinValues<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>coinValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">else</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// sort values</span>
    <span class="token function">sort</span><span class="token punctuation">(</span>coinValues<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> coinValues<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">greater</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// erase copies of same value</span>
    <span class="token keyword">auto</span> last <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">unique</span><span class="token punctuation">(</span>coinValues<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> coinValues<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    coinValues<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>last<span class="token punctuation">,</span> coinValues<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// print array</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Coin values: &quot;</span><span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> coinValues<span class="token punctuation">)</span>
        cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> coinValues<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Be aware there is now input checking to keep the example simple. One example output:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Coin <span class="token function">value</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">1</span> to stop<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">2</span>
Coin <span class="token function">value</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">1</span> to stop<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">4</span>
Coin <span class="token function">value</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">1</span> to stop<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">7</span>
Coin <span class="token function">value</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">1</span> to stop<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">9</span>
Coin <span class="token function">value</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">1</span> to stop<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">14</span>
Coin <span class="token function">value</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">1</span> to stop<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">4</span>
Coin <span class="token function">value</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token number">1</span> to stop<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">0</span>
Coin values<span class="token operator">:</span> <span class="token number">14</span> <span class="token number">9</span> <span class="token number">7</span> <span class="token number">4</span> <span class="token number">2</span> <span class="token number">1</span> 
ticket price<span class="token operator">:</span> <span class="token number">34</span>
money paid<span class="token operator">:</span> <span class="token number">67</span>
the difference <span class="token number">33</span> is paid with<span class="token operator">:</span> 
<span class="token number">2</span> coins with value <span class="token number">14</span>
<span class="token number">1</span> coins with value <span class="token number">4</span>
<span class="token number">1</span> coins with value <span class="token number">1</span>

</code></pre></div><p>As long as <code>1</code> is in the coin values we now, that the algorithm will terminate, because:</p> <ul><li><code>D</code> strictly decreases with every step</li> <li><code>D</code> is never <code>&gt;0</code> and smaller than than the smallest coin <code>1</code> at the same time</li></ul> <p>But the algorithm has two pitfalls:</p> <ol><li>Let <code>C</code> be the biggest coin value. The runtime is only polynomial as long as <code>D/C</code> is polynomial, because the representation of <code>D</code> uses only <code>log D</code> bits and the runtime is at least linear in <code>D/C</code>.</li> <li>In every step our algorithm chooses the local optimum. But this is not sufficient to say that the algorithm finds the global optimal solution (see more informations <a href="https://en.wikipedia.org/wiki/Matroid" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or in the Book of <a href="http://www.or.uni-bonn.de/%7Evygen/co.html" target="_blank" rel="noopener noreferrer">Korte and Vygen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</li></ol> <p>A simple counter example: the coins are <code>1,3,4</code> and <code>D=6</code>. The optimal solution is clearly two coins of value <code>3</code> but greedy chooses <code>4</code> in the first step so it has to choose <code>1</code> in step two and three. So it gives no optimal soution. A possible optimal Algorithm for this example is based on <strong>dynamic programming</strong>.</p> <h2 id="interval-scheduling"><a href="#interval-scheduling" class="header-anchor">#</a> Interval Scheduling</h2> <p>We have a set of jobs <code>J={a,b,c,d,e,f,g}</code>. Let <code>j in J</code> be a job than its start at <code>sj</code> and ends at <code>fj</code>. Two jobs are compatible if they don't overlap. A picture as example:
<a href="https://postimg.org/image/6etvj3k81/" target="_blank" rel="noopener noreferrer"><img src="https://s16.postimg.org/6rl9pa2hx/intervall_scheduling.png" alt="intervall_scheduling.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
The goal is to find the <strong>maximum subset of mutually compatible jobs</strong>. There are several greedy approaches for this problem:</p> <ol><li><strong>Earliest start time</strong>: Consider jobs in ascending order of <code>sj</code></li> <li><strong>Earliest finish time</strong>: Consider jobs in ascending order of <code>fj</code></li> <li><strong>Shortest interval</strong>: Consider jobs in ascending order of <code>fj-sj</code></li> <li><strong>Fewest conflicts</strong>: For each job <code>j</code>, count the number of conflicting jobs <code>cj</code></li></ol> <p>The question now is, which approach is really successfull. <strong>Early start time</strong> definetly not, here is a counter example
<a href="https://postimg.org/image/x8zfx2zq9/" target="_blank" rel="noopener noreferrer"><img src="https://s16.postimg.org/odylmkaxx/ce_early.png" alt="ce_early.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <strong>Shortest interval</strong> is not optimal either
<a href="https://postimg.org/image/m4npmnkur/" target="_blank" rel="noopener noreferrer"><img src="https://s21.postimg.org/ixt6310ev/ce_shortest_intervall.png" alt="ce_shortest_intervall.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
and <strong>fewest conflicts</strong> may indeed sound optimal, but here is a problem case for this approach:
<a href="https://postimg.org/image/48f87mmol/" target="_blank" rel="noopener noreferrer"><img src="https://s18.postimg.org/ugqcx06s9/ce_fewest_conflicts.png" alt="ce_fewest_conflicts.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
Which leaves us with <strong>earliest finish time</strong>. The pseudo code is quiet simple:</p> <ol><li>Sort jobs by finish time so that <code>f1&lt;=f2&lt;=...&lt;=fn</code></li> <li>Let <code>A</code> be an empty set</li> <li>for <code>j=1</code> to <code>n</code> if <code>j</code> is compatible to <strong>all</strong> jobs in <code>A</code> set <code>A=A+{j}</code></li> <li><code>A</code> is a <strong>maximum subset of mutually compatible jobs</strong></li></ol> <p>Or as C++ program:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;utility&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;tuple&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

<span class="token keyword">const</span> <span class="token keyword">int</span> jobCnt <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">// Job start times</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> startTimes<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Job end times</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> endTimes<span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> jobs<span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>jobCnt<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        jobs<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>startTimes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> endTimes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// step 1: sort</span>
    <span class="token function">sort</span><span class="token punctuation">(</span>jobs<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> jobs<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p1<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p2<span class="token punctuation">)</span> 
                                     <span class="token punctuation">{</span> <span class="token keyword">return</span> p1<span class="token punctuation">.</span>second <span class="token operator">&lt;</span> p2<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// step 2: empty set A</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> A<span class="token punctuation">;</span>
    
    <span class="token comment">// step 3:</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>jobCnt<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> job <span class="token operator">=</span> jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> isCompatible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> jobIndex <span class="token operator">:</span> A<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// test whether the actual job and the job from A are incompatible</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span>second <span class="token operator">&gt;=</span> jobs<span class="token punctuation">[</span>jobIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">&amp;&amp;</span>
               job<span class="token punctuation">.</span>first  <span class="token operator">&lt;=</span> jobs<span class="token punctuation">[</span>jobIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                isCompatible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">if</span><span class="token punctuation">(</span>isCompatible<span class="token punctuation">)</span>
            A<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//step 4: print A</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Compatible: &quot;</span><span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> A<span class="token punctuation">)</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">&lt;&lt;</span> jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">&lt;&lt;</span> jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;) &quot;</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The output for this example is: <code>Compatible: (1,3) (4,5) (6,8) (9,10)</code></p> <p>The implementation of the algorithm is clearly in Θ(n^2). There is a Θ(n log n) implementation and the interested reader may continue reading below (Java Example).</p> <p>Now we have a greedy algorithm for the interval scheduling problem, but is it optimal?</p> <p><strong>Proposition:</strong> The greedy algorithm <strong>earliest finish time</strong> is optimal.</p> <p><strong>Proof:****(by contradiction)</strong></p> <p>Assume greedy is not optimal and <code>i1,i2,...,ik</code> denote the set of jobs selected by greedy. Let <code>j1,j2,...,jm</code> denote the set of jobs in an <strong>optimal</strong> solution with <code>i1=j1,i2=j2,...,ir=jr</code> for the <strong>largest possible</strong> value of <code>r</code>.</p> <p>The job <code>i(r+1)</code> exists and finishes before <code>j(r+1)</code> (earliest finish). But than is <code>j1,j2,...,jr,i(r+1),j(r+2),...,jm</code> also a <strong>optimal</strong> solution and for all <code>k</code> in <code>[1,(r+1)]</code> is <code>jk=ik</code>. thats a <strong>contradiction</strong> to the maximality of <code>r</code>. This concludes the proof.</p> <p>This second example demonstrates that there are usually many possible greedy strategies but only some or even none might find the optimal solution in every instance.</p> <p>Below is a Java program that runs in Θ(n log n)</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">import</span> <span class="token module">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token module">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Comparator</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Job</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> start<span class="token punctuation">,</span> finish<span class="token punctuation">,</span> profit<span class="token punctuation">;</span>

    <span class="token function">Job</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> finish<span class="token punctuation">,</span> <span class="token keyword">int</span> profit<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> start<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>finish <span class="token operator">=</span> finish<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>profit <span class="token operator">=</span> profit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">JobComparator</span> implements Comparator<span class="token operator">&lt;</span>Job<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span>Job a<span class="token punctuation">,</span> Job b<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span>finish <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>finish <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> a<span class="token punctuation">.</span>finish <span class="token operator">==</span> b<span class="token punctuation">.</span>finish <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeightedIntervalScheduling</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>Job jobs<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> lo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> hi <span class="token operator">=</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span>lo <span class="token operator">&lt;=</span> hi<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>lo <span class="token operator">+</span> hi<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>jobs<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">.</span>finish <span class="token operator">&lt;=</span> jobs<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>start<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>jobs<span class="token punctuation">[</span>mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>finish <span class="token operator">&lt;=</span> jobs<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>start<span class="token punctuation">)</span>
                    lo <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span>
                    <span class="token keyword">return</span> mid<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
                hi <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">schedule</span><span class="token punctuation">(</span>Job jobs<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>jobs<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">JobComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> n <span class="token operator">=</span> jobs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> table<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        table<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> jobs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>profit<span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">int</span> inclProf <span class="token operator">=</span> jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>profit<span class="token punctuation">;</span>
            <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>jobs<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                inclProf <span class="token operator">+=</span> table<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>

            table<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>inclProf<span class="token punctuation">,</span> table<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> table<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Job jobs<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token function">Job</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">Job</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token function">Job</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">Job</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Optimal profit is &quot;</span> <span class="token operator">+</span> <span class="token function">schedule</span><span class="token punctuation">(</span>jobs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>And the expected output is:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Optimal profit is <span class="token number">250</span>

</code></pre></div><h2 id="minimizing-lateness"><a href="#minimizing-lateness" class="header-anchor">#</a> Minimizing Lateness</h2> <p>There are numerous problems minimizing lateness, here we have a single resource which can only process one job at a time. Job <code>j</code> requires <code>tj</code> units of processing time and is due at time <code>dj</code>. if <code>j</code> starts at time <code>sj</code> it will finish at time <code>fj=sj+tj</code>. We define lateness <code>L=max{0,fj-dh}</code> for all <code>j</code>. The goal is to minimize the <strong>maximum lateness</strong> L.</p> <table><thead><tr><th>1</th> <th>3</th> <th>4</th> <th>5</th> <th>6</th></tr></thead> <tbody><tr><td><code>tj</code></td> <td>3</td> <td>2</td> <td>1</td> <td>4</td></tr> <tr><td><code>dj</code></td> <td>6</td> <td>8</td> <td>9</td> <td>9</td></tr></tbody></table> <table><thead><tr><th>Job</th> <th>3</th> <th>2</th> <th>5</th> <th>5</th> <th>5</th> <th>4</th> <th>4</th> <th>4</th> <th>4</th> <th>1</th> <th>1</th> <th>1</th> <th>6</th> <th>6</th></tr></thead> <tbody><tr><td>Time</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td> <td>6</td> <td>7</td> <td>8</td> <td>9</td> <td>10</td> <td>11</td> <td>12</td> <td>13</td> <td>14</td></tr> <tr><td><code>Lj</code></td> <td>-8</td> <td></td> <td>-5</td> <td></td> <td></td> <td>-4</td> <td></td> <td></td> <td></td> <td>1</td> <td></td> <td></td> <td><strong>7</strong></td> <td></td></tr></tbody></table> <p>The solution <code>L=7</code> is obviously not optimal. Lets look at some greedy strategies:</p> <ol><li><strong>Shortest processing time first</strong>: schedule jobs in ascending order og processing time j`</li> <li><strong>Earliest deadline first</strong>: Schedule jobs in ascending order of deadline <code>dj</code></li> <li><strong>Smallest slack</strong>: schedule jobs in ascending order of slack <code>dj-tj</code></li></ol> <p>Its easy to see that <strong>shortest processing time first</strong> is not optimal a good counter example is</p> <table><thead><tr><th>1</th> <th>2</th></tr></thead> <tbody><tr><td><code>tj</code></td> <td>1</td></tr> <tr><td><code>dj</code></td> <td>10</td></tr></tbody></table> <p>the <strong>smallest stack</strong> solution  has simillar problems</p> <table><thead><tr><th>1</th> <th>2</th></tr></thead> <tbody><tr><td><code>tj</code></td> <td>1</td></tr> <tr><td><code>dj</code></td> <td>3</td></tr></tbody></table> <p>the last strategy looks valid so we start with some pseudo code:</p> <ol><li>Sort <code>n</code> jobs by due time so that <code>d1&lt;=d2&lt;=...&lt;=dn</code></li> <li>Set <code>t=0</code></li><li>for <code>j=1</code> to <code>n</code> <ul></ul></li> <li>Assign job <code>j</code> to interval <code>[t,t+tj]</code></li> <li>set <code>sj=t</code> and <code>fj=t+tj</code></li> <li>set <code>t=t+tj</code></li> <li>return intervals <code>[s1,f1],[s2,f2],...,[sn,fn]</code></li></ol> <p>And as implementation in C++:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;utility&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;tuple&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

<span class="token keyword">const</span> <span class="token keyword">int</span> jobCnt <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">// Job start times</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> processTimes<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Job end times</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> dueTimes<span class="token punctuation">[</span><span class="token punctuation">]</span>     <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> jobs<span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>jobCnt<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        jobs<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>processTimes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dueTimes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// step 1: sort</span>
    <span class="token function">sort</span><span class="token punctuation">(</span>jobs<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> jobs<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p1<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p2<span class="token punctuation">)</span>
                                    <span class="token punctuation">{</span> <span class="token keyword">return</span> p1<span class="token punctuation">.</span>second <span class="token operator">&lt;</span> p2<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// step 2: set t=0</span>
    <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    
    <span class="token comment">// step 3:</span>
    vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> jobIntervals<span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>jobCnt<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        jobIntervals<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>t<span class="token operator">+</span>jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t <span class="token operator">+=</span> jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
            
    <span class="token comment">//step 4: print intervals</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Intervals:\n&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> lateness <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>jobCnt<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> pair <span class="token operator">=</span> jobIntervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        lateness <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>lateness<span class="token punctuation">,</span> pair<span class="token punctuation">.</span>second<span class="token operator">-</span>jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>

        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">&lt;&lt;</span> pair<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">&lt;&lt;</span> pair<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;) &quot;</span>
             <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Lateness: &quot;</span> <span class="token operator">&lt;&lt;</span> pair<span class="token punctuation">.</span>second<span class="token operator">-</span>jobs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\nmaximal lateness is &quot;</span> <span class="token operator">&lt;&lt;</span> lateness <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>And the output for this program is:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Intervals<span class="token operator">:</span>

<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>   Lateness<span class="token operator">:</span><span class="token operator">-</span><span class="token number">2</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>   Lateness<span class="token operator">:</span><span class="token operator">-</span><span class="token number">2</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>   Lateness<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>   Lateness<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span>  Lateness<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span> Lateness<span class="token operator">:</span> <span class="token number">6</span>
<span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span> Lateness<span class="token operator">:</span> <span class="token number">8</span>
<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span> Lateness<span class="token operator">:</span> <span class="token number">6</span>
<span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span> Lateness<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">)</span> Lateness<span class="token operator">:</span> <span class="token number">1</span>

maximal lateness is <span class="token number">8</span>

</code></pre></div><p>The runtime of the algorithm is obviously Θ(n log n) because sorting is the dominating operation of this algorithm. Now we need to show that it is optimal. Clearly an optimal schedule has no <strong>idle time</strong>. the <strong>earliest deadline first</strong> schedule has also no idle time.</p> <p>Lets assume the jobs are numbered so that <code>d1&lt;=d2&lt;=...&lt;=dn</code>. We say a <strong>inversion</strong> of a schedule is a pair of jobs <code>i</code> and <code>j</code> so that <code>i&lt;j</code> but j is scheduled before <code>i</code>. Due to its definition the <strong>earliest deadline first</strong> schedule has no inversions. Of course if a schedule has an inversion it has one with a pair of inverted jobs scheduled consecutively.</p> <p><strong>Proposition:</strong> Swapping two adjacent, inverted jobs reduces the number of inversions by <strong>one</strong> and <strong>does not increase</strong> the maximal lateness.</p> <p><strong>Proof:</strong> Let <code>L</code> be the lateness before the swap and <code>M</code> the lateness afterwards. Because exchanging two adjacent jobs does not move the other jobs from their position it is <code>Lk=Mk</code> for all <code>k != i,j</code>.</p> <p>Clearly it is <code>Mi&lt;=Li</code> since job <code>i</code> got scheduled earlier. if job <code>j</code> is late, so follows from the definition:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Mj <span class="token operator">=</span> fi<span class="token operator">-</span><span class="token function">dj</span>    <span class="token punctuation">(</span>definition<span class="token punctuation">)</span>
    <span class="token operator">&lt;=</span> fi<span class="token operator">-</span><span class="token function">di</span>    <span class="token punctuation">(</span>since i <span class="token operator">and</span> j are exchanged<span class="token punctuation">)</span>
    <span class="token operator">&lt;=</span> Li

</code></pre></div><p>That means the lateness after swap is less or equal than before. This concludes the proof.</p> <p><strong>Proposition:</strong> The <strong>earliest deadline first</strong> schedule <code>S</code> is optimal.</p> <p><strong>Proof:****(by contradiction)</strong></p> <p>Lets assume <code>S*</code> is optimal schedule with the <strong>fewest possible</strong> number of inversions. we can assume that <code>S*</code> has no idle time. If <code>S*</code> has no inversions, then <code>S=S*</code> and we are done. If <code>S*</code> has an inversion, than it has an adjacent inversion. The last Proposition states that we can swap the adjacent inversion without increasing lateness but with decreasing the number of inversions. This contradicts the definition of <code>S*</code>.</p> <p>The minimizing lateness problem and its near related <strong>minimum makespan</strong> problem, where the question for a minimal schedule is asked have lots of applications in the real world. But usually you don't have only one machine but many and they handle the same task at different rates. These problems get NP-complete really fast.</p> <p>Another interesting question arises if we don't look at the <strong>offline</strong> problem, where we have all tasks and data at hand but at the <strong>online</strong> variant, where tasks appear during execution.</p> <h2 id="offline-caching"><a href="#offline-caching" class="header-anchor">#</a> Offline Caching</h2> <p>The caching problem arises from the limitation of finite space. Lets assume our cache <code>C</code> has <code>k</code> pages. Now we want to process a sequence  of <code>m</code> item requests which must have been placed in the cache before they are processed.Of course if <code>m&lt;=k</code> then we just put all elements in the cache and it will work, but usually is <code>m&gt;&gt;k</code>.</p> <p>We say a request is a <strong>cache hit</strong>, when the item is already in cache, otherwise its called a <strong>cache miss</strong>. In that case we must bring the requested item into cache and evict another, assuming the cache is full. The Goal is a eviction schedule that <strong>minimizes the number of evictions</strong>.</p> <p>There are numerous greedy strategies for this problem, lets look at some:</p> <ol><li><strong>First in, first out (FIFO)</strong>: The oldest page gets evicted</li> <li><strong>Last in, first out (LIFO)</strong>: The newest page gets evicted</li> <li><strong>Last recent out (LRU)</strong>: Evict page whose most recent access was earliest</li> <li><strong>Least frequently requested(LFU)</strong>: Evict page that was least frequently requested</li> <li><strong>Longest forward distance (LFD)</strong>: Evict page in the cache that is not requested until farthest in the future.</li></ol> <p><strong>Attention:</strong> For the following examples we evict the page with the smallest index, if more than one page could be evicted.</p> <h3 id="example-fifo"><a href="#example-fifo" class="header-anchor">#</a> Example (FIFO)</h3> <p>Let the cache size be <code>k=3</code> the initial cache <code>a,b,c</code> and the request <code>a,a,d,e,b,b,a,c,f,d,e,a,f,b,e,c</code>:</p> <table><thead><tr><th>Request</th> <th>a</th> <th>a</th> <th>d</th> <th>e</th> <th>b</th> <th>b</th> <th>a</th> <th>c</th> <th>f</th> <th>d</th> <th>e</th> <th>a</th> <th>f</th> <th>b</th> <th>e</th> <th>c</th></tr></thead> <tbody><tr><td><code>cache 1</code></td> <td>a</td> <td>a</td> <td>d</td> <td>d</td> <td>d</td> <td>d</td> <td>a</td> <td>a</td> <td>a</td> <td>d</td> <td>d</td> <td>d</td> <td>f</td> <td>f</td> <td>f</td> <td>c</td></tr> <tr><td><code>cache 2</code></td> <td>b</td> <td>b</td> <td>b</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>c</td> <td>c</td> <td>c</td> <td>e</td> <td>e</td> <td>e</td> <td>b</td> <td>b</td> <td>b</td></tr> <tr><td><code>cache 3</code></td> <td>c</td> <td>c</td> <td>c</td> <td>c</td> <td>b</td> <td>b</td> <td>b</td> <td>b</td> <td>f</td> <td>f</td> <td>f</td> <td>a</td> <td>a</td> <td>a</td> <td>e</td> <td>e</td></tr> <tr><td>cache miss</td> <td></td> <td></td> <td>x</td> <td>x</td> <td>x</td> <td></td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td></tr></tbody></table> <p>Thirteen cache misses by sixteen requests does not sound very optimal, lets try the same example with another strategy:</p> <h3 id="example-lfd"><a href="#example-lfd" class="header-anchor">#</a> Example (LFD)</h3> <p>Let the cache size be <code>k=3</code> the initial cache <code>a,b,c</code> and the request <code>a,a,d,e,b,b,a,c,f,d,e,a,f,b,e,c</code>:</p> <table><thead><tr><th>Request</th> <th>a</th> <th>a</th> <th>d</th> <th>e</th> <th>b</th> <th>b</th> <th>a</th> <th>c</th> <th>f</th> <th>d</th> <th>e</th> <th>a</th> <th>f</th> <th>b</th> <th>e</th> <th>c</th></tr></thead> <tbody><tr><td><code>cache 1</code></td> <td>a</td> <td>a</td> <td>d</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>e</td> <td>c</td></tr> <tr><td><code>cache 2</code></td> <td>b</td> <td>b</td> <td>b</td> <td>b</td> <td>b</td> <td>b</td> <td>a</td> <td>a</td> <td>a</td> <td>a</td> <td>a</td> <td>a</td> <td>f</td> <td>f</td> <td>f</td> <td>f</td></tr> <tr><td><code>cache 3</code></td> <td>c</td> <td>c</td> <td>c</td> <td>c</td> <td>c</td> <td>c</td> <td>c</td> <td>c</td> <td>f</td> <td>d</td> <td>d</td> <td>d</td> <td>d</td> <td>b</td> <td>b</td> <td>b</td></tr> <tr><td>cache miss</td> <td></td> <td></td> <td>x</td> <td>x</td> <td></td> <td></td> <td>x</td> <td></td> <td>x</td> <td>x</td> <td></td> <td></td> <td>x</td> <td>x</td> <td></td> <td>x</td></tr></tbody></table> <p>Eight cache misses is a lot better.</p> <p><strong>Selftest</strong>: Do the example for LIFO, LFU, RFU and look what happend.</p> <p>The following example programm (written in C++) consists of two parts:</p> <p>The skeleton is a application, which solves the problem dependent on the chosen greedy strategy:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">int</span> cacheSize     <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> requestLength <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">char</span> request<span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// for reset</span>
<span class="token keyword">char</span> originalCache<span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">class</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Strategy</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">strategyName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Strategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>

    <span class="token comment">// calculate which cache place should be used</span>
    <span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestIndex<span class="token punctuation">)</span>                                      <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// updates information the strategy needs</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> cachePlace<span class="token punctuation">,</span> <span class="token keyword">int</span> requestIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> cacheMiss<span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string strategyName<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">bool</span> <span class="token function">updateCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestIndex<span class="token punctuation">,</span> Strategy<span class="token operator">*</span> strategy<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// calculate where to put request</span>
    <span class="token keyword">int</span> cachePlace <span class="token operator">=</span> strategy<span class="token operator">-&gt;</span><span class="token function">apply</span><span class="token punctuation">(</span>requestIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// proof whether its a cache hit or a cache miss</span>
    <span class="token keyword">bool</span> isMiss <span class="token operator">=</span> request<span class="token punctuation">[</span>requestIndex<span class="token punctuation">]</span> <span class="token operator">!=</span> cache<span class="token punctuation">[</span>cachePlace<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// update strategy (for example recount distances)</span>
    strategy<span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span>cachePlace<span class="token punctuation">,</span> requestIndex<span class="token punctuation">,</span> isMiss<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// write to cache</span>
    cache<span class="token punctuation">[</span>cachePlace<span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">[</span>requestIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> isMiss<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Strategy<span class="token operator">*</span> selectedStrategy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> FIFO<span class="token punctuation">,</span> <span class="token keyword">new</span> LIFO<span class="token punctuation">,</span> <span class="token keyword">new</span> LRU<span class="token punctuation">,</span> <span class="token keyword">new</span> LFU<span class="token punctuation">,</span> <span class="token keyword">new</span> LFD <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> strat<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> strat <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>strat<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// reset cache</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> originalCache<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

        cout <span class="token operator">&lt;&lt;</span><span class="token string">&quot;\nStrategy: &quot;</span> <span class="token operator">&lt;&lt;</span> selectedStrategy<span class="token punctuation">[</span>strat<span class="token punctuation">]</span><span class="token operator">-&gt;</span>strategyName <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\nCache initial: (&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cacheSize<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
        cout <span class="token operator">&lt;&lt;</span> cache<span class="token punctuation">[</span>cacheSize<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;)\n\n&quot;</span><span class="token punctuation">;</span>

        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Request\t&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;cache &quot;</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;cache miss&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

        <span class="token keyword">int</span> cntMisses <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>requestLength<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">bool</span> isMiss <span class="token operator">=</span> <span class="token function">updateCache</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> selectedStrategy<span class="token punctuation">[</span>strat<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>isMiss<span class="token punctuation">)</span> <span class="token operator">++</span>cntMisses<span class="token punctuation">;</span>

            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">&lt;&lt;</span> request<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> l <span class="token operator">&lt;</span> cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>l<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">&lt;&lt;</span> cache<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>isMiss <span class="token operator">?</span> <span class="token string">&quot;x&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        cout<span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\nTotal cache misses: &quot;</span> <span class="token operator">&lt;&lt;</span> cntMisses <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">delete</span> selectedStrategy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>The basic idea is simple: for every request I have two calls two my strategy:</p> <ol><li><strong>apply</strong>: The strategy has to tell the caller which page to use</li> <li><strong>update</strong>: After the caller uses the place, it tells the strategy whether it was a miss or not. Then the strategy may update its internal data. The strategy <strong>LFU</strong> for example has to update the hit frequency for the cache pages, while the <strong>LFD</strong> strategy has to recalculate the distances for the cache pages.</li></ol> <p>Now lets look of example implementations for our five strategies:</p> <h3 id="fifo"><a href="#fifo" class="header-anchor">#</a> FIFO</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">FIFO</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Strategy</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">FIFO</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Strategy</span><span class="token punctuation">(</span><span class="token string">&quot;FIFO&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestIndex<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> oldest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> request<span class="token punctuation">[</span>requestIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>

            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> age<span class="token punctuation">[</span>oldest<span class="token punctuation">]</span><span class="token punctuation">)</span>
                oldest <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> oldest<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> cachePos<span class="token punctuation">,</span> <span class="token keyword">int</span> requestIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> cacheMiss<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// nothing changed we dont need to update the ages</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>cacheMiss<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment">// all old pages get older, the new one get 0</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> cachePos<span class="token punctuation">)</span>
                age<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>

            <span class="token keyword">else</span>
                age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> age<span class="token punctuation">[</span>cacheSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>FIFO</strong> just needs the information how long a page is in the cache (and of course only relative to the other pages). So the only thing to do is wait for a miss and then make the pages, which where not evicted older. For our example above the program solution is:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Strategy<span class="token operator">:</span> FIFO

Cache initial<span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>

Request    cache <span class="token number">0</span>    cache <span class="token number">1</span>    cache <span class="token number">2</span>    cache miss
  a          a          b          c    
  a          a          b          c    
  d          d          b          c          x
  e          d          e          c          x
  b          d          e          b          x
  b          d          e          b    
  a          a          e          b          x
  c          a          c          b          x
  f          a          c          f          x
  d          d          c          f          x
  e          d          e          f          x
  a          d          e          a          x
  f          f          e          a          x
  b          f          b          a          x
  e          f          b          e          x
  c          c          b          e          x

Total cache misses<span class="token operator">:</span> <span class="token number">13</span>

</code></pre></div><p>Thats exact the solution from above.</p> <h3 id="lifo"><a href="#lifo" class="header-anchor">#</a> LIFO</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">LIFO</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Strategy</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">LIFO</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Strategy</span><span class="token punctuation">(</span><span class="token string">&quot;LIFO&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestIndex<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> newest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> request<span class="token punctuation">[</span>requestIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>

            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> age<span class="token punctuation">[</span>newest<span class="token punctuation">]</span><span class="token punctuation">)</span>
                newest <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> newest<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> cachePos<span class="token punctuation">,</span> <span class="token keyword">int</span> requestIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> cacheMiss<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// nothing changed we dont need to update the ages</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>cacheMiss<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment">// all old pages get older, the new one get 0</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> cachePos<span class="token punctuation">)</span>
                age<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>

            <span class="token keyword">else</span>
                age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> age<span class="token punctuation">[</span>cacheSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>The implementation of <strong>LIFO</strong> is more or less the same as by <strong>FIFO</strong> but we evict the youngest not the oldest page. The program results are:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Strategy<span class="token operator">:</span> LIFO

Cache initial<span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>

Request    cache <span class="token number">0</span>    cache <span class="token number">1</span>    cache <span class="token number">2</span>    cache miss
  a          a          b          c    
  a          a          b          c    
  d          d          b          c          x
  e          e          b          c          x
  b          e          b          c    
  b          e          b          c    
  a          a          b          c          x
  c          a          b          c    
  f          f          b          c          x
  d          d          b          c          x
  e          e          b          c          x
  a          a          b          c          x
  f          f          b          c          x
  b          f          b          c    
  e          e          b          c          x
  c          e          b          c    

Total cache misses<span class="token operator">:</span> <span class="token number">9</span>

</code></pre></div><h3 id="lru"><a href="#lru" class="header-anchor">#</a> LRU</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">LRU</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Strategy</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">LRU</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Strategy</span><span class="token punctuation">(</span><span class="token string">&quot;LRU&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// here oldest mean not used the longest</span>
    <span class="token keyword">int</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestIndex<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> oldest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> request<span class="token punctuation">[</span>requestIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>

            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> age<span class="token punctuation">[</span>oldest<span class="token punctuation">]</span><span class="token punctuation">)</span>
                oldest <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> oldest<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> cachePos<span class="token punctuation">,</span> <span class="token keyword">int</span> requestIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> cacheMiss<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// all old pages get older, the used one get 0</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> cachePos<span class="token punctuation">)</span>
                age<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>

            <span class="token keyword">else</span>
                age<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> age<span class="token punctuation">[</span>cacheSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>In case of <strong>LRU</strong> the strategy is independent from what is at the cache page, its only interest is the last usage. The programm results are:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Strategy<span class="token operator">:</span> LRU

Cache initial<span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>

Request    cache <span class="token number">0</span>    cache <span class="token number">1</span>    cache <span class="token number">2</span>    cache miss
  a          a          b          c    
  a          a          b          c    
  d          a          d          c          x
  e          a          d          e          x
  b          b          d          e          x
  b          b          d          e    
  a          b          a          e          x
  c          b          a          c          x
  f          f          a          c          x
  d          f          d          c          x
  e          f          d          e          x
  a          a          d          e          x
  f          a          f          e          x
  b          a          f          b          x
  e          e          f          b          x
  c          e          c          b          x

Total cache misses<span class="token operator">:</span> <span class="token number">13</span>

</code></pre></div><h3 id="lfu"><a href="#lfu" class="header-anchor">#</a> LFU</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">LFU</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Strategy</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">LFU</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Strategy</span><span class="token punctuation">(</span><span class="token string">&quot;LFU&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> requestFrequency<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestIndex<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> least <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> request<span class="token punctuation">[</span>requestIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>

            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>requestFrequency<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> requestFrequency<span class="token punctuation">[</span>least<span class="token punctuation">]</span><span class="token punctuation">)</span>
                least <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> least<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> cachePos<span class="token punctuation">,</span> <span class="token keyword">int</span> requestIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> cacheMiss<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cacheMiss<span class="token punctuation">)</span>
            requestFrequency<span class="token punctuation">[</span>cachePos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">else</span>
            <span class="token operator">++</span>requestFrequency<span class="token punctuation">[</span>cachePos<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>

    <span class="token comment">// how frequently was the page used</span>
    <span class="token keyword">int</span> requestFrequency<span class="token punctuation">[</span>cacheSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>LFU</strong> evicts the page uses least often. So the update strategy is just to count every access. Of course after a miss the count resets. The program results are:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Strategy<span class="token operator">:</span> LFU

Cache initial<span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>

Request    cache <span class="token number">0</span>    cache <span class="token number">1</span>    cache <span class="token number">2</span>    cache miss
  a          a          b          c    
  a          a          b          c    
  d          a          d          c          x
  e          a          d          e          x
  b          a          b          e          x
  b          a          b          e    
  a          a          b          e    
  c          a          b          c          x
  f          a          b          f          x
  d          a          b          d          x
  e          a          b          e          x
  a          a          b          e    
  f          a          b          f          x
  b          a          b          f    
  e          a          b          e          x
  c          a          b          c          x

Total cache misses<span class="token operator">:</span> <span class="token number">10</span>

</code></pre></div><h3 id="lfd"><a href="#lfd" class="header-anchor">#</a> LFD</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">LFD</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Strategy</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">LFD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Strategy</span><span class="token punctuation">(</span><span class="token string">&quot;LFD&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// precalc next usage before starting to fullfill requests</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> nextUse<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">calcNextUse</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestIndex<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> latest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cacheSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> request<span class="token punctuation">[</span>requestIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>

            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nextUse<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nextUse<span class="token punctuation">[</span>latest<span class="token punctuation">]</span><span class="token punctuation">)</span>
                latest <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> latest<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> cachePos<span class="token punctuation">,</span> <span class="token keyword">int</span> requestIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> cacheMiss<span class="token punctuation">)</span> <span class="token keyword">override</span>
    <span class="token punctuation">{</span>
            nextUse<span class="token punctuation">[</span>cachePos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">calcNextUse</span><span class="token punctuation">(</span>requestIndex<span class="token punctuation">,</span> cache<span class="token punctuation">[</span>cachePos<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>

    <span class="token keyword">int</span> <span class="token function">calcNextUse</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestPosition<span class="token punctuation">,</span> <span class="token keyword">char</span> pageItem<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> requestPosition<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> requestLength<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> pageItem<span class="token punctuation">)</span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> requestLength <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// next usage of page</span>
    <span class="token keyword">int</span> nextUse<span class="token punctuation">[</span>cacheSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>The <strong>LFD</strong> strategy is different from everyone before. Its the only strategy that uses the future requests for its decission who to evict. The implementation uses the function <code>calcNextUse</code> to get the page which next use is farthest away in the future. The program solution is equal to the solution by hand from above:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Strategy<span class="token operator">:</span> LFD

Cache initial<span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>

Request    cache <span class="token number">0</span>    cache <span class="token number">1</span>    cache <span class="token number">2</span>    cache miss
  a          a          b          c    
  a          a          b          c    
  d          a          b          d          x
  e          a          b          e          x
  b          a          b          e    
  b          a          b          e    
  a          a          b          e    
  c          a          c          e          x
  f          a          f          e          x
  d          a          d          e          x
  e          a          d          e    
  a          a          d          e    
  f          f          d          e          x
  b          b          d          e          x
  e          b          d          e    
  c          c          d          e          x

Total cache misses<span class="token operator">:</span> <span class="token number">8</span> 

</code></pre></div><p>The greedy strategy <strong>LFD</strong> is indeed the only optimal strategy of the five presented. The proof is rather long and can be found <a href="https://blog.henrypoon.com/blog/2014/02/02/proof-of-the-farthest-in-future-optimal-caching-algorithm/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or in the book by Jon Kleinberg and Eva Tardos (see sources in remarks down below).</p> <h3 id="algorithm-vs-reality"><a href="#algorithm-vs-reality" class="header-anchor">#</a> Algorithm vs Reality</h3> <p>The <strong>LFD</strong> strategy is optimal, but there is a big problem. Its an optimal <strong>offline</strong> solution. In praxis caching is usually an <strong>online</strong> problem, that means the strategy is useless because we cannot now the next time we need a particular item. The other four strategies are also <strong>online</strong> strategies. For online problems we need a general different approach.</p> <h4 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h4> <h3 id="sources"><a href="#sources" class="header-anchor">#</a> Sources</h3> <ol><li>The examples above are from lecture notes frome a lecture which was taught 2008 in Bonn, Germany. They in term are based on the book <a href="https://www.pearsonhighered.com/program/Kleinberg-Algorithm-Design/PGM319216.html" target="_blank" rel="noopener noreferrer">Algorithm Design<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by Jon Kleinberg and Eva Tardos:</li></ol> <img src="https://s14.postimg.org/qiq7yjyv5/tardos.png"></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/algorithm/applications-of-greedy-technique.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/algorithm/greedy-algorithms.html" class="prev">
        Greedy Algorithms
      </a></span> <span class="next"><a href="/algorithm/prim-s-algorithm.html">
        Prim's Algorithm
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/16.4df12303.js" defer></script>
  </body>
</html>
