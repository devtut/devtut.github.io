<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Haskell - IO</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Getting the 'a' out of 'IO a', IO defines your program's `main` action, Checking for end-of-file conditions, Reading all contents of standard input into a string, Role and Purpose of IO, Reading a line from standard input, Reading words from an entire file, Writing to stdout, Parsing and constructing an object from standard input, Reading from file handles, Reading from `stdin`">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Haskell - IO">
    <meta property="og:description" content="Getting the 'a' out of 'IO a', IO defines your program's `main` action, Checking for end-of-file conditions, Reading all contents of standard input into a string, Role and Purpose of IO, Reading a line from standard input, Reading words from an entire file, Writing to stdout, Parsing and constructing an object from standard input, Reading from file handles, Reading from `stdin`">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/haskell/io.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Haskell - IO">
    <meta name="twitter:description" content="Getting the 'a' out of 'IO a', IO defines your program's `main` action, Checking for end-of-file conditions, Reading all contents of standard input into a string, Role and Purpose of IO, Reading a line from standard input, Reading words from an entire file, Writing to stdout, Parsing and constructing an object from standard input, Reading from file handles, Reading from `stdin`">
    <meta name="twitter:url" content="/haskell/io.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1198.6c69cc51.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Haskell</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/haskell/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/haskell/getting-started-with-haskell-language.html" class="sidebar-link">Getting started with Haskell Language</a></li><li><a href="/haskell/overloaded-literals.html" class="sidebar-link">Overloaded Literals</a></li><li><a href="/haskell/foldable.html" class="sidebar-link">Foldable</a></li><li><a href="/haskell/traversable.html" class="sidebar-link">Traversable</a></li><li><a href="/haskell/lens.html" class="sidebar-link">Lens</a></li><li><a href="/haskell/quickcheck.html" class="sidebar-link">QuickCheck</a></li><li><a href="/haskell/common-ghc-language-extensions.html" class="sidebar-link">Common GHC Language Extensions</a></li><li><a href="/haskell/free-monads.html" class="sidebar-link">Free Monads</a></li><li><a href="/haskell/type-classes.html" class="sidebar-link">Type Classes</a></li><li><a href="/haskell/io.html" aria-current="page" class="active sidebar-link">IO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/haskell/io.html#getting-the-a-out-of-io-a" class="sidebar-link">Getting the 'a' &quot;out of&quot; 'IO a'</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#io-defines-your-program-s-main-action" class="sidebar-link">IO defines your program's main action</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#checking-for-end-of-file-conditions" class="sidebar-link">Checking for end-of-file conditions</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#reading-all-contents-of-standard-input-into-a-string" class="sidebar-link">Reading all contents of standard input into a string</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#role-and-purpose-of-io" class="sidebar-link">Role and Purpose of IO</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#reading-a-line-from-standard-input" class="sidebar-link">Reading a line from standard input</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#reading-words-from-an-entire-file" class="sidebar-link">Reading words from an entire file</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#writing-to-stdout" class="sidebar-link">Writing to stdout</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#parsing-and-constructing-an-object-from-standard-input" class="sidebar-link">Parsing and constructing an object from standard input</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#reading-from-file-handles" class="sidebar-link">Reading from file handles</a></li><li class="sidebar-sub-header"><a href="/haskell/io.html#reading-from-stdin" class="sidebar-link">Reading from stdin</a></li></ul></li><li><a href="/haskell/record-syntax.html" class="sidebar-link">Record Syntax</a></li><li><a href="/haskell/partial-application.html" class="sidebar-link">Partial Application</a></li><li><a href="/haskell/monoid.html" class="sidebar-link">Monoid</a></li><li><a href="/haskell/category-theory.html" class="sidebar-link">Category Theory</a></li><li><a href="/haskell/lists.html" class="sidebar-link">Lists</a></li><li><a href="/haskell/sorting-algorithms.html" class="sidebar-link">Sorting Algorithms</a></li><li><a href="/haskell/type-families.html" class="sidebar-link">Type Families</a></li><li><a href="/haskell/monads.html" class="sidebar-link">Monads</a></li><li><a href="/haskell/stack.html" class="sidebar-link">Stack</a></li><li><a href="/haskell/generalized-algebraic-data-types.html" class="sidebar-link">Generalized Algebraic Data Types</a></li><li><a href="/haskell/recursion-schemes.html" class="sidebar-link">Recursion Schemes</a></li><li><a href="/haskell/data-text.html" class="sidebar-link">Data.Text</a></li><li><a href="/haskell/using-ghci.html" class="sidebar-link">Using GHCi</a></li><li><a href="/haskell/strictness.html" class="sidebar-link">Strictness</a></li><li><a href="/haskell/syntax-in-functions.html" class="sidebar-link">Syntax in Functions</a></li><li><a href="/haskell/functor.html" class="sidebar-link">Functor</a></li><li><a href="/haskell/testing-with-tasty.html" class="sidebar-link">Testing with Tasty</a></li><li><a href="/haskell/creating-custom-data-types.html" class="sidebar-link">Creating Custom Data Types</a></li><li><a href="/haskell/reactive-banana.html" class="sidebar-link">Reactive-banana</a></li><li><a href="/haskell/optimization.html" class="sidebar-link">Optimization</a></li><li><a href="/haskell/concurrency.html" class="sidebar-link">Concurrency</a></li><li><a href="/haskell/function-composition.html" class="sidebar-link">Function composition</a></li><li><a href="/haskell/databases.html" class="sidebar-link">Databases</a></li><li><a href="/haskell/data-aeson-json-in-haskell.html" class="sidebar-link">Data.Aeson - JSON in Haskell</a></li><li><a href="/haskell/higher-order-functions.html" class="sidebar-link">Higher-order functions</a></li><li><a href="/haskell/containers-data-map.html" class="sidebar-link">Containers - Data.Map</a></li><li><a href="/haskell/fixity-declarations.html" class="sidebar-link">Fixity declarations</a></li><li><a href="/haskell/web-development.html" class="sidebar-link">Web Development</a></li><li><a href="/haskell/vectors.html" class="sidebar-link">Vectors</a></li><li><a href="/haskell/cabal.html" class="sidebar-link">Cabal</a></li><li><a href="/haskell/type-algebra.html" class="sidebar-link">Type algebra</a></li><li><a href="/haskell/arrows.html" class="sidebar-link">Arrows</a></li><li><a href="/haskell/typed-holes.html" class="sidebar-link">Typed holes</a></li><li><a href="/haskell/rewrite-rules-ghc.html" class="sidebar-link">Rewrite rules (GHC)</a></li><li><a href="/haskell/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/haskell/list-comprehensions.html" class="sidebar-link">List Comprehensions</a></li><li><a href="/haskell/streaming-io.html" class="sidebar-link">Streaming IO</a></li><li><a href="/haskell/google-protocol-buffers.html" class="sidebar-link">Google Protocol Buffers</a></li><li><a href="/haskell/template-haskell-quasiquotes.html" class="sidebar-link">Template Haskell &amp; QuasiQuotes</a></li><li><a href="/haskell/phantom-types.html" class="sidebar-link">Phantom types</a></li><li><a href="/haskell/modules.html" class="sidebar-link">Modules</a></li><li><a href="/haskell/tuples-pairs-triples.html" class="sidebar-link">Tuples (Pairs, Triples, ...)</a></li><li><a href="/haskell/graphics-with-gloss.html" class="sidebar-link">Graphics with Gloss</a></li><li><a href="/haskell/state-monad.html" class="sidebar-link">State Monad</a></li><li><a href="/haskell/pipes.html" class="sidebar-link">Pipes</a></li><li><a href="/haskell/infix-operators.html" class="sidebar-link">Infix operators</a></li><li><a href="/haskell/parallelism.html" class="sidebar-link">Parallelism</a></li><li><a href="/haskell/parsing-html-with-taggy-lens-and-lens.html" class="sidebar-link">Parsing HTML with taggy-lens and lens</a></li><li><a href="/haskell/foreign-function-interface.html" class="sidebar-link">Foreign Function Interface</a></li><li><a href="/haskell/gtk3.html" class="sidebar-link">Gtk3</a></li><li><a href="/haskell/monad-transformers.html" class="sidebar-link">Monad Transformers</a></li><li><a href="/haskell/bifunctor.html" class="sidebar-link">Bifunctor</a></li><li><a href="/haskell/proxies.html" class="sidebar-link">Proxies</a></li><li><a href="/haskell/applicative-functor.html" class="sidebar-link">Applicative Functor</a></li><li><a href="/haskell/common-monads-as-free-monads.html" class="sidebar-link">Common monads as free monads</a></li><li><a href="/haskell/common-functors-as-the-base-of-cofree-comonads.html" class="sidebar-link">Common functors as the base of cofree comonads</a></li><li><a href="/haskell/arithmetic.html" class="sidebar-link">Arithmetic</a></li><li><a href="/haskell/role.html" class="sidebar-link">Role</a></li><li><a href="/haskell/arbitrary-rank-polymorphism-with-rankntypes.html" class="sidebar-link">Arbitrary-rank polymorphism with RankNTypes</a></li><li><a href="/haskell/ghcjs.html" class="sidebar-link">GHCJS</a></li><li><a href="/haskell/xml.html" class="sidebar-link">XML</a></li><li><a href="/haskell/reader-readert.html" class="sidebar-link">Reader / ReaderT</a></li><li><a href="/haskell/function-call-syntax.html" class="sidebar-link">Function call syntax</a></li><li><a href="/haskell/logging.html" class="sidebar-link">Logging</a></li><li><a href="/haskell/attoparsec.html" class="sidebar-link">Attoparsec</a></li><li><a href="/haskell/zipwithm.html" class="sidebar-link">zipWithM</a></li><li><a href="/haskell/profunctor.html" class="sidebar-link">Profunctor</a></li><li><a href="/haskell/type-application.html" class="sidebar-link">Type Application</a></li><li><a href="/haskell/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="io"><a href="#io" class="header-anchor">#</a> IO</h1> <h2 id="getting-the-a-out-of-io-a"><a href="#getting-the-a-out-of-io-a" class="header-anchor">#</a> Getting the 'a' &quot;out of&quot; 'IO a'</h2> <p>A common question is &quot;I have a value of <code>IO a</code>, but I want to do something to that <code>a</code> value: how do I get access to it?&quot; How can one operate on data that comes from the outside world (for example, incrementing a number typed by the user)?</p> <p>The point is that if you use a pure function on data obtained impurely, then the result is still impure. It depends on what the user did! A value of type <code>IO a</code> stands for a &quot;side-effecting computation resulting in a value of type <code>a</code>&quot; which can <strong>only</strong> be run by (a) composing it into <code>main</code> and (b) compiling and executing your program. For that reason, there is no way within pure Haskell world to &quot;get the <code>a</code> out&quot;.</p> <p>Instead, we want to build a new computation, a new <code>IO</code> value, which makes use of the <code>a</code> value <strong>at runtime</strong>. This is another way of <strong>composing</strong> <code>IO</code> values and so again we can use <code>do</code>-notation:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token comment">-- assuming</span>
<span class="token hvariable">myComputation</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token constant">Int</span>

<span class="token hvariable">getMessage</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">getMessage</span> <span class="token hvariable">int</span> <span class="token operator">=</span> <span class="token string">&quot;My computation resulted in: &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">int</span>
 
<span class="token hvariable">newComputation</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">newComputation</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">int</span> <span class="token operator">&lt;-</span> <span class="token hvariable">myComputation</span>       <span class="token comment">-- we &quot;bind&quot; the result of myComputation to a name, 'int'</span>
  <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token hvariable">getMessage</span> <span class="token hvariable">int</span>   <span class="token comment">-- 'int' holds a value of type Int</span>

</code></pre></div><p>Here we're using a pure function (<code>getMessage</code>) to turn an <code>Int</code> into a <code>String</code>, but we're using <code>do</code> notation to make it be applied to the result of an <code>IO</code> computation <code>myComputation</code> <strong>when</strong> (after) that computation runs. The result is a bigger <code>IO</code> computation, <code>newComputation</code>. This technique of using pure functions in an impure context is called <strong>lifting</strong>.</p> <h2 id="io-defines-your-program-s-main-action"><a href="#io-defines-your-program-s-main-action" class="header-anchor">#</a> IO defines your program's <code>main</code> action</h2> <p>To make a Haskell program executable you must provide a file with a <code>main</code> function of type <code>IO ()</code></p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;Hello world!&quot;</span>

</code></pre></div><p>When Haskell is compiled it examines the <code>IO</code> data here and turns it into a executable. When we run this program it will print <code>Hello world!</code>.</p> <p>If you have values of type <code>IO a</code> other than <code>main</code> they won't do anything.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">other</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">other</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;I won't get printed&quot;</span>

<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;Hello world!&quot;</span>

</code></pre></div><p>Compiling this program and running it will have the same effect as the last example. The code in <code>other</code> is ignored.</p> <p>In order to make the code in <code>other</code> have runtime effects you have to <strong>compose</strong> it into <code>main</code>. No <code>IO</code> values not eventually composed into <code>main</code> will have any runtime effect. To compose two <code>IO</code> values sequentially you can use <code>do</code>-notation:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">other</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">other</span> <span class="token operator">=</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;I will get printed... but only at the point where I'm composed into main&quot;</span>

<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span> 
  <span class="token builtin">putStrLn</span> <span class="token string">&quot;Hello world!&quot;</span>
  <span class="token hvariable">other</span>

</code></pre></div><p>When you compile and run <strong>this</strong> program it outputs</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Hello</span> <span class="token hvariable">world</span><span class="token operator">!</span>
<span class="token constant">I</span> <span class="token hvariable">will</span> <span class="token hvariable">get</span> <span class="token hvariable">printed</span><span class="token operator">...</span> <span class="token hvariable">but</span> <span class="token hvariable">only</span> <span class="token hvariable">at</span> <span class="token hvariable">the</span> <span class="token hvariable">point</span> <span class="token keyword">where</span> <span class="token constant">I'</span><span class="token hvariable">m</span> <span class="token hvariable">composed</span> <span class="token hvariable">into</span> <span class="token hvariable">main</span>

</code></pre></div><p>Note that the order of operations is described by how <code>other</code> was composed into <code>main</code> and not the definition order.</p> <h2 id="checking-for-end-of-file-conditions"><a href="#checking-for-end-of-file-conditions" class="header-anchor">#</a> Checking for end-of-file conditions</h2> <p>A bit counter-intuitive to the way most other languages' standard I/O libraries do it, Haskell's <code>isEOF</code> does not require you to perform a read operation before checking for an EOF condition; the runtime will do it for you.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO</span><span class="token punctuation">(</span> <span class="token hvariable">isEOF</span> <span class="token punctuation">)</span>


<span class="token hvariable">eofTest</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">eofTest</span> <span class="token hvariable">line</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token hvariable">end</span> <span class="token operator">&lt;-</span> <span class="token hvariable">isEOF</span>
    <span class="token keyword">if</span> <span class="token hvariable">end</span> <span class="token keyword">then</span>
        <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token string">&quot;End-of-file reached at line &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">line</span> <span class="token operator">++</span> <span class="token string">&quot;.&quot;</span>
    <span class="token keyword">else</span> <span class="token keyword">do</span>
        <span class="token builtin">getLine</span>
        <span class="token hvariable">eofTest</span> <span class="token operator">$</span> <span class="token hvariable">line</span> <span class="token operator">+</span> <span class="token number">1</span>


<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span>
    <span class="token hvariable">eofTest</span> <span class="token number">1</span>

</code></pre></div><p>Input:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Line</span> <span class="token operator">#</span><span class="token number">1</span><span class="token punctuation">.</span>
<span class="token constant">Line</span> <span class="token operator">#</span><span class="token number">2</span><span class="token punctuation">.</span>
<span class="token constant">Line</span> <span class="token operator">#</span><span class="token number">3</span><span class="token punctuation">.</span>

</code></pre></div><p>Output:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">End</span><span class="token operator">-</span><span class="token keyword">of</span><span class="token operator">-</span><span class="token hvariable">file</span> <span class="token hvariable">reached</span> <span class="token hvariable">at</span> <span class="token hvariable">line</span> <span class="token number">4</span><span class="token punctuation">.</span>

</code></pre></div><h2 id="reading-all-contents-of-standard-input-into-a-string"><a href="#reading-all-contents-of-standard-input-into-a-string" class="header-anchor">#</a> Reading all contents of standard input into a string</h2> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token hvariable">input</span> <span class="token operator">&lt;-</span> <span class="token builtin">getContents</span>
    <span class="token builtin">putStr</span> <span class="token hvariable">input</span>

</code></pre></div><p>Input:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">an</span> <span class="token hvariable">example</span> <span class="token hvariable">sentence</span><span class="token punctuation">.</span>
<span class="token constant">And</span> <span class="token hvariable">this</span> <span class="token hvariable">one</span> <span class="token hvariable">is</span><span class="token punctuation">,</span> <span class="token hvariable">too</span><span class="token operator">!</span>

</code></pre></div><p>Output:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">an</span> <span class="token hvariable">example</span> <span class="token hvariable">sentence</span><span class="token punctuation">.</span>
<span class="token constant">And</span> <span class="token hvariable">this</span> <span class="token hvariable">one</span> <span class="token hvariable">is</span><span class="token punctuation">,</span> <span class="token hvariable">too</span><span class="token operator">!</span>

</code></pre></div><p>Note: This program will actually print parts of the output before all of the input has been fully read in. This means that, if, for example, you use <code>getContents</code> over a 50MiB file, Haskell's lazy evaluation and garbage collector will ensure that only the parts of the file that are currently needed (read: indispensable for further execution) will be loaded into memory. Thus, the 50MiB file won't be loaded into memory at once.</p> <h2 id="role-and-purpose-of-io"><a href="#role-and-purpose-of-io" class="header-anchor">#</a> Role and Purpose of IO</h2> <p>Haskell is a pure language, meaning that expressions cannot have side effects. A side effect is anything that the expression or function does other than produce a value, for example, modify a global counter or print to standard output.</p> <p>In Haskell, side-effectful computations (specifically, those which can have an effect on the real world) are modelled using <code>IO</code>. Strictly speaking, <code>IO</code> is a type constructor, taking a type and producing a type. For example, <code>IO Int</code> is the type of an I/O computation producing an <code>Int</code> value. The <code>IO</code> type is <strong>abstract</strong>, and the interface provided for <code>IO</code> ensures that certain illegal values (that is, functions with non-sensical types) cannot exist, by ensuring that all built-in functions which perform IO have a return type enclosed in <code>IO</code>.</p> <p>When a Haskell program is run, the computation represented by the Haskell value named <code>main</code>, whose type can be <code>IO x</code> for any type <code>x</code>, is executed.</p> <h3 id="manipulating-io-values"><a href="#manipulating-io-values" class="header-anchor">#</a> Manipulating IO values</h3> <p>There are many functions in the standard library providing typical <code>IO</code> actions that a general purpose programming language should perform, such as reading and writing to file handles. General <code>IO</code> actions are created and combined primarily with two functions:</p> <div class="language- extra-class"><pre class="language-text"><code>
(&gt;&gt;=) :: IO a -&gt; (a -&gt; IO b) -&gt; IO b

</code></pre></div><p>This function (typically called <strong>bind</strong>) takes an <code>IO</code> action and a function which returns an <code>IO</code> action, and produces the <code>IO</code> action which is the result of applying the function to the value produced by the first <code>IO</code> action.</p> <div class="language- extra-class"><pre class="language-text"><code>
return :: a -&gt; IO a

</code></pre></div><p>This function takes any value (i.e., a pure value) and returns the IO computation which does no IO and produces the given value. In other words, it is a no-op I/O action.</p> <p>There are additional general functions which are often used, but all can be written in terms of the two above. For example, <code>(&gt;&gt;) :: IO a -&gt; IO b -&gt; IO b</code> is similar to <code>(&gt;&gt;=)</code> but the result of the first action is ignored.</p> <p>A simple program greeting the user using these functions:</p> <div class="language- extra-class"><pre class="language-text"><code>
main :: IO ()
 main =
   putStrLn &quot;What is your name?&quot; &gt;&gt;
   getLine &gt;&gt;= \name -&gt;
   putStrLn (&quot;Hello &quot; ++ name ++ &quot;!&quot;)

</code></pre></div><p>This program also uses <code>putStrLn :: String -&gt; IO ()</code> and <code>getLine :: IO String</code>.</p> <p>Note: the types of certain functions above are actually more general than those types given (namely <code>&gt;&gt;=</code>, <code>&gt;&gt;</code> and <code>return</code>).</p> <h3 id="io-semantics"><a href="#io-semantics" class="header-anchor">#</a> IO semantics</h3> <p>The <code>IO</code> type in Haskell has very similar semantics to that of imperative programming languages. For example, when one writes <code>s1 ; s2</code> in an imperative language to indicate executing statement <code>s1</code>, then statement <code>s2</code>, one can write <code>s1 &gt;&gt; s2</code> to model the same thing in Haskell.</p> <p>However, the semantics of <code>IO</code> diverge slightly of what would be expected coming from an imperative background. The <code>return</code> function <strong>does not</strong> interrupt control flow - it has no effect on the program if another <code>IO</code> action is run in sequence. For example, <code>return () &gt;&gt; putStrLn &quot;boom&quot;</code> correctly prints &quot;boom&quot; to standard output.</p> <p>The formal semantics of <code>IO</code> can given in terms of simple equalities involving the functions in the previous section:</p> <div class="language- extra-class"><pre class="language-text"><code>
return x &gt;&gt;= f ≡ f x, ∀ f x
 y &gt;&gt;= return ≡ return y, ∀ y
 (m &gt;&gt;= f) &gt;&gt;= g ≡ m &gt;&gt;= (\x -&gt; (f x &gt;&gt;= g)), ∀ m f g

</code></pre></div><p>These laws are typically referred to as left identity, right identity, and composition, respectively. They can be stated more naturally in terms of the function</p> <div class="language- extra-class"><pre class="language-text"><code>
(&gt;=&gt;) :: (a -&gt; IO b) -&gt; (b -&gt; IO c) -&gt; a -&gt; IO c
 (f &gt;=&gt; g) x = (f x) &gt;&gt;= g

</code></pre></div><p>as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>
return &gt;=&gt; f ≡ f, ∀ f
 f &gt;=&gt; return ≡ f, ∀ f
 (f &gt;=&gt; g) &gt;=&gt; h ≡ f &gt;=&gt; (g &gt;=&gt; h), ∀ f g h

</code></pre></div><h3 id="lazy-io"><a href="#lazy-io" class="header-anchor">#</a> Lazy IO</h3> <p>Functions performing I/O computations are typically strict, meaning that all preceding actions in a sequence of actions must be completed before the next action is begun. Typically this is useful and expected behaviour - <code>putStrLn &quot;X&quot; &gt;&gt; putStrLn &quot;Y&quot;</code> should print &quot;XY&quot;. However, certain library functions perform I/O lazily, meaning that the I/O actions required to produce the value are only performed when the value is actually consumed. Examples of such functions are <code>getContents</code> and <code>readFile</code>. Lazy I/O can drastically reduce the performance of a Haskell program, so when using library functions, care should be taken to note which functions are lazy.</p> <h3 id="io-and-do-notation"><a href="#io-and-do-notation" class="header-anchor">#</a> IO and <code>do</code> notation</h3> <p>Haskell provides a simpler method of combining different IO values into larger IO values. This special syntax is known as <code>do</code> notation* and is simply syntactic sugar for usages of the <code>&gt;&gt;=</code>, <code>&gt;&gt;</code> and <code>return</code> functions.</p> <p>The program in the previous section can be written in two different ways using <code>do</code> notation, the first being layout-sensitive and the second being  layout insensitive:</p> <div class="language- extra-class"><pre class="language-text"><code>
main = do
   putStrLn &quot;What is your name?&quot;
   name &lt;- getLine
   putStrLn (&quot;Hello &quot; ++ name ++ &quot;!&quot;)


 main = do {
   putStrLn &quot;What is your name?&quot; ;
   name &lt;- getLine ;
   putStrLn (&quot;Hello &quot; ++ name ++ &quot;!&quot;)
   }

</code></pre></div><p>All three programs are exactly equivalent.</p> <p>*Note that <code>do</code> notation is also applicable to a broader class of type constructors called <strong>monads</strong>.</p> <h2 id="reading-a-line-from-standard-input"><a href="#reading-a-line-from-standard-input" class="header-anchor">#</a> Reading a line from standard input</h2> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token hvariable">line</span> <span class="token operator">&lt;-</span> <span class="token builtin">getLine</span>
    <span class="token builtin">putStrLn</span> <span class="token hvariable">line</span>

</code></pre></div><p>Input:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">an</span> <span class="token hvariable">example</span><span class="token punctuation">.</span>

</code></pre></div><p>Output:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">an</span> <span class="token hvariable">example</span><span class="token punctuation">.</span>

</code></pre></div><h2 id="reading-words-from-an-entire-file"><a href="#reading-words-from-an-entire-file" class="header-anchor">#</a> Reading words from an entire file</h2> <p>In Haskell, it often makes sense <strong>not to bother with file handles</strong> at all, but simply read or write an entire file straight from disk to memory<sup>†</sup>, and do all the partitioning/processing of the text with the pure string data structure. This avoids mixing IO and program logic, which can greatly help avoiding bugs.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token comment">-- | The interesting part of the program, which actually processes data</span>
<span class="token comment">--   but doesn't do any IO!</span>
<span class="token hvariable">reverseWords</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span>
<span class="token hvariable">reverseWords</span> <span class="token operator">=</span> <span class="token builtin">reverse</span> <span class="token operator">.</span> <span class="token builtin">words</span>

<span class="token comment">-- | A simple wrapper that only fetches the data from disk, lets</span>
<span class="token comment">--   'reverseWords' do its job, and puts the result to stdout.</span>
<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
   <span class="token hvariable">content</span> <span class="token operator">&lt;-</span> <span class="token builtin">readFile</span> <span class="token string">&quot;loremipsum.txt&quot;</span>
   <span class="token builtin">mapM_</span> <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token hvariable">reverseWords</span> <span class="token hvariable">content</span>

</code></pre></div><p>If <code>loremipsum.txt</code> contains</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Lorem</span> <span class="token hvariable">ipsum</span> <span class="token hvariable">dolor</span> <span class="token hvariable">sit</span> <span class="token hvariable">amet</span><span class="token punctuation">,</span>
<span class="token hvariable">consectetur</span> <span class="token hvariable">adipiscing</span> <span class="token hvariable">elit</span>

</code></pre></div><p>then the program will output</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">elit</span>
<span class="token hvariable">adipiscing</span>
<span class="token hvariable">consectetur</span>
<span class="token hvariable">amet</span><span class="token punctuation">,</span>
<span class="token hvariable">sit</span>
<span class="token hvariable">dolor</span>
<span class="token hvariable">ipsum</span>
<span class="token constant">Lorem</span>

</code></pre></div><p>Here, <a href="http://hackage.haskell.org/package/base-4.9.0.0/docs/Control-Monad.html#v:mapM_" target="_blank" rel="noopener noreferrer"><code>mapM_</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> went through the list of all words in the file, and printed each of them to a separate line with <a href="http://hackage.haskell.org/package/base-4.9.0.0/docs/Prelude.html#v:putStrLn" target="_blank" rel="noopener noreferrer"><code>putStrLn</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p><sup>†</sup><sub>If you think this is wasteful on memory, you have a point. Actually, Haskell's laziness can often avoid that the entire file needs to reside in memory simultaneously... but beware, this kind of lazy IO causes its own set of problems. For performance-critical applications, it often makes sense to enforce the entire file to be read at once, strictly; you can do this with <a href="http://hackage.haskell.org/package/text-1.2.2.1/docs/Data-Text-IO.html#v:readFile" target="_blank" rel="noopener noreferrer">the <code>Data.Text</code> version of <code>readFile</code>.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></sub></p> <h2 id="writing-to-stdout"><a href="#writing-to-stdout" class="header-anchor">#</a> Writing to stdout</h2> <p>Per the <a href="https://www.haskell.org/onlinereport/haskell2010/haskellch7.html#x14-1430007.1" target="_blank" rel="noopener noreferrer">Haskell 2010 Language Specification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> the following are standard IO functions available in Prelude, so no imports are required to use them.</p> <h3 id="putchar-char-io-writes-a-char-to-stdout"><a href="#putchar-char-io-writes-a-char-to-stdout" class="header-anchor">#</a> <code>putChar :: Char -&gt; IO ()</code> - writes a <code>char</code> to <code>stdout</code></h3> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">putChar</span> <span class="token char string">'a'</span>
<span class="token hvariable">aPrelude</span><span class="token operator">&gt;</span>  <span class="token comment">-- Note, no new line</span>

</code></pre></div><h3 id="putstr-string-io-writes-a-string-to-stdout"><a href="#putstr-string-io-writes-a-string-to-stdout" class="header-anchor">#</a> <code>putStr :: String -&gt; IO ()</code> - writes a <code>String</code> to <code>stdout</code></h3> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">putStr</span> <span class="token string">&quot;This is a string!&quot;</span>
<span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">a</span> <span class="token hvariable">string</span><span class="token operator">!</span><span class="token constant">Prelude</span><span class="token operator">&gt;</span>  <span class="token comment">-- Note, no new line</span>

</code></pre></div><h3 id="putstrln-string-io-writes-a-string-to-stdout-and-adds-a-new-line"><a href="#putstrln-string-io-writes-a-string-to-stdout-and-adds-a-new-line" class="header-anchor">#</a> <code>putStrLn :: String -&gt; IO ()</code> - writes a <code>String</code> to <code>stdout</code> and adds a new line</h3> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">putStrLn</span> <span class="token string">&quot;Hi there, this is another String!&quot;</span>
<span class="token constant">Hi</span> <span class="token hvariable">there</span><span class="token punctuation">,</span> <span class="token hvariable">this</span> <span class="token hvariable">is</span> <span class="token hvariable">another</span> <span class="token constant">String</span><span class="token operator">!</span>

</code></pre></div><h3 id="print-show-a-a-io-writes-a-an-instance-of-show-to-stdout"><a href="#print-show-a-a-io-writes-a-an-instance-of-show-to-stdout" class="header-anchor">#</a> <code>print :: Show a =&gt; a -&gt; IO ()</code> - writes <code>a</code> an instance of <code>Show</code> to <code>stdout</code></h3> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">print</span> <span class="token string">&quot;hi&quot;</span>
<span class="token string">&quot;hi&quot;</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">print</span> <span class="token number">1</span>
<span class="token number">1</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">print</span> <span class="token char string">'a'</span>
<span class="token char string">'a'</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">print</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token char string">'a'</span><span class="token punctuation">)</span>  <span class="token comment">-- Maybe is an instance of the `Show` type class</span>
<span class="token constant">Just</span> <span class="token char string">'a'</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">print</span> <span class="token constant">Nothing</span>
<span class="token constant">Nothing</span>

</code></pre></div><p>Recall that you can instantiate <code>Show</code> for your own types using <code>deriving</code>:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token comment">-- In ex.hs</span>
<span class="token keyword">data</span> <span class="token constant">Person</span> <span class="token operator">=</span> <span class="token constant">Person</span> <span class="token punctuation">{</span> <span class="token hvariable">name</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token punctuation">}</span> <span class="token keyword">deriving</span> <span class="token constant">Show</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token builtin">print</span> <span class="token punctuation">(</span><span class="token constant">Person</span> <span class="token string">&quot;Alex&quot;</span><span class="token punctuation">)</span>  <span class="token comment">-- Person is an instance of `Show`, thanks to `deriving`</span>

</code></pre></div><p>Loading &amp; running in GHCi:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">load</span> <span class="token hvariable">ex</span><span class="token punctuation">.</span><span class="token hvariable">hs</span>
<span class="token punctuation">[</span><span class="token number">1</span> <span class="token keyword">of</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">Compiling</span> <span class="token hvariable">ex</span>             <span class="token punctuation">(</span> <span class="token hvariable">ex</span><span class="token punctuation">.</span><span class="token hvariable">hs</span><span class="token punctuation">,</span> <span class="token hvariable">interpreted</span> <span class="token punctuation">)</span>
<span class="token constant">Ok</span><span class="token punctuation">,</span> <span class="token hvariable">modules</span> <span class="token hvariable">loaded</span><span class="token operator">:</span> <span class="token hvariable">ex</span><span class="token punctuation">.</span>
<span class="token operator">*</span><span class="token constant">Main</span><span class="token operator">&gt;</span> <span class="token hvariable">main</span>  <span class="token comment">-- from ex.hs</span>
<span class="token constant">Person</span> <span class="token punctuation">{</span><span class="token hvariable">name</span> <span class="token operator">=</span> <span class="token string">&quot;Alex&quot;</span><span class="token punctuation">}</span>
<span class="token operator">*</span><span class="token constant">Main</span><span class="token operator">&gt;</span>

</code></pre></div><h2 id="parsing-and-constructing-an-object-from-standard-input"><a href="#parsing-and-constructing-an-object-from-standard-input" class="header-anchor">#</a> Parsing and constructing an object from standard input</h2> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token builtin">readFloat</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token constant">Float</span>
<span class="token builtin">readFloat</span> <span class="token operator">=</span>
    <span class="token builtin">fmap</span> <span class="token builtin">read</span> <span class="token builtin">getLine</span>


<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token builtin">putStr</span> <span class="token string">&quot;Type the first number: &quot;</span>
    <span class="token hvariable">first</span> <span class="token operator">&lt;-</span> <span class="token builtin">readFloat</span>

    <span class="token builtin">putStr</span> <span class="token string">&quot;Type the second number: &quot;</span>
    <span class="token hvariable">second</span> <span class="token operator">&lt;-</span> <span class="token builtin">readFloat</span>

    <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token builtin">show</span> <span class="token hvariable">first</span> <span class="token operator">++</span> <span class="token string">&quot; + &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">second</span> <span class="token operator">++</span> <span class="token string">&quot; = &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token punctuation">(</span> <span class="token hvariable">first</span> <span class="token operator">+</span> <span class="token hvariable">second</span> <span class="token punctuation">)</span>

</code></pre></div><p>Input:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Type</span> <span class="token hvariable">the</span> <span class="token hvariable">first</span> <span class="token hvariable">number</span><span class="token operator">:</span> <span class="token number">9.5</span>
<span class="token constant">Type</span> <span class="token hvariable">the</span> <span class="token hvariable">second</span> <span class="token hvariable">number</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">2.02</span>

</code></pre></div><p>Output:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token number">9.5</span> <span class="token operator">+</span> <span class="token operator">-</span><span class="token number">2.02</span> <span class="token operator">=</span> <span class="token number">7.48</span>

</code></pre></div><h2 id="reading-from-file-handles"><a href="#reading-from-file-handles" class="header-anchor">#</a> Reading from file handles</h2> <p>Like in several other parts of the I/O library, functions that implicitly use a standard stream have a counterpart in <code>System.IO</code> that performs the same job,  but with an extra parameter at the left, of type <code>Handle</code>, that represents the stream being handled. For instance, <code>getLine :: IO String</code> has a counterpart <code>hGetLine :: Handle -&gt; IO String</code>.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>IO</span><span class="token punctuation">(</span> <span class="token constant">Handle</span><span class="token punctuation">,</span> <span class="token constant">FilePath</span><span class="token punctuation">,</span> <span class="token constant">IOMode</span><span class="token punctuation">(</span> <span class="token constant">ReadMode</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> 
                  <span class="token hvariable">openFile</span><span class="token punctuation">,</span> <span class="token hvariable">hGetLine</span><span class="token punctuation">,</span> <span class="token hvariable">hPutStr</span><span class="token punctuation">,</span> <span class="token hvariable">hClose</span><span class="token punctuation">,</span> <span class="token hvariable">hIsEOF</span><span class="token punctuation">,</span> <span class="token hvariable">stderr</span> <span class="token punctuation">)</span>

<span class="token import-statement"><span class="token keyword">import</span> Control<span class="token punctuation">.</span>Monad</span><span class="token punctuation">(</span> <span class="token hvariable">when</span> <span class="token punctuation">)</span>


<span class="token hvariable">dumpFile</span> <span class="token operator">::</span> <span class="token constant">Handle</span> <span class="token operator">-&gt;</span> <span class="token constant">FilePath</span> <span class="token operator">-&gt;</span> <span class="token constant">Integer</span> <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token hvariable">dumpFile</span> <span class="token hvariable">handle</span> <span class="token hvariable">filename</span> <span class="token hvariable">lineNumber</span> <span class="token operator">=</span> <span class="token keyword">do</span>      <span class="token comment">-- show file contents line by line</span>
    <span class="token hvariable">end</span> <span class="token operator">&lt;-</span> <span class="token hvariable">hIsEOF</span> <span class="token hvariable">handle</span>
    <span class="token hvariable">when</span> <span class="token punctuation">(</span> <span class="token builtin">not</span> <span class="token hvariable">end</span> <span class="token punctuation">)</span> <span class="token operator">$</span> <span class="token keyword">do</span>
        <span class="token hvariable">line</span> <span class="token operator">&lt;-</span> <span class="token hvariable">hGetLine</span> <span class="token hvariable">handle</span>
        <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token hvariable">filename</span> <span class="token operator">++</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">lineNumber</span> <span class="token operator">++</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">++</span> <span class="token hvariable">line</span>
        <span class="token hvariable">dumpFile</span> <span class="token hvariable">handle</span> <span class="token hvariable">filename</span> <span class="token operator">$</span> <span class="token hvariable">lineNumber</span> <span class="token operator">+</span> <span class="token number">1</span>


<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
    <span class="token hvariable">hPutStr</span> <span class="token hvariable">stderr</span> <span class="token string">&quot;Type a filename: &quot;</span>
    <span class="token hvariable">filename</span> <span class="token operator">&lt;-</span> <span class="token builtin">getLine</span>
    <span class="token hvariable">handle</span> <span class="token operator">&lt;-</span> <span class="token hvariable">openFile</span> <span class="token hvariable">filename</span> <span class="token constant">ReadMode</span>
    <span class="token hvariable">dumpFile</span> <span class="token hvariable">handle</span> <span class="token hvariable">filename</span> <span class="token number">1</span>
    <span class="token hvariable">hClose</span> <span class="token hvariable">handle</span>

</code></pre></div><p>Contents of file <code>example.txt</code>:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">an</span> <span class="token hvariable">example</span><span class="token punctuation">.</span>
<span class="token constant">Hello</span><span class="token punctuation">,</span> <span class="token hvariable">world</span><span class="token operator">!</span>
<span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">another</span> <span class="token hvariable">example</span><span class="token punctuation">.</span>

</code></pre></div><p>Input:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Type</span> <span class="token hvariable">a</span> <span class="token hvariable">filename</span><span class="token operator">:</span> <span class="token hvariable">example</span><span class="token punctuation">.</span><span class="token hvariable">txt</span>

</code></pre></div><p>Output:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">example</span><span class="token punctuation">.</span><span class="token hvariable">txt</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">:</span> <span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">an</span> <span class="token hvariable">example</span><span class="token punctuation">.</span>
<span class="token hvariable">example</span><span class="token punctuation">.</span><span class="token hvariable">txt</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">:</span> <span class="token constant">Hello</span><span class="token punctuation">,</span> <span class="token hvariable">world</span><span class="token operator">!</span>
<span class="token hvariable">example</span><span class="token punctuation">.</span><span class="token hvariable">txt</span><span class="token operator">:</span><span class="token number">3</span><span class="token operator">:</span> <span class="token constant">This</span> <span class="token hvariable">is</span> <span class="token hvariable">another</span> <span class="token hvariable">example</span>

</code></pre></div><h2 id="reading-from-stdin"><a href="#reading-from-stdin" class="header-anchor">#</a> Reading from <code>stdin</code></h2> <p>As-per the <a href="https://www.haskell.org/onlinereport/haskell2010/haskellch7.html#x14-1430007.1" target="_blank" rel="noopener noreferrer">Haskell 2010 Language Specification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, the following are standard IO functions available in Prelude, so no imports are required to use them.</p> <h3 id="getchar-io-char-read-a-char-from-stdin"><a href="#getchar-io-char-read-a-char-from-stdin" class="header-anchor">#</a> <code>getChar :: IO Char</code> - read a <code>Char</code> from <code>stdin</code></h3> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token comment">-- MyChar.hs</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">myChar</span> <span class="token operator">&lt;-</span> <span class="token builtin">getChar</span>
  <span class="token builtin">print</span> <span class="token hvariable">myChar</span>

<span class="token comment">-- In your shell</span>

<span class="token hvariable">runhaskell</span> <span class="token hvariable">MyChar<span class="token punctuation">.</span>hs</span>
<span class="token hvariable">a</span> <span class="token comment">-- you enter a and press enter</span>
<span class="token char string">'a'</span>  <span class="token comment">-- the program prints 'a'</span>

</code></pre></div><h3 id="getline-io-string-read-a-string-from-stdin-sans-new-line-character"><a href="#getline-io-string-read-a-string-from-stdin-sans-new-line-character" class="header-anchor">#</a> <code>getLine :: IO String</code> - read a <code>String</code> from <code>stdin</code>, sans new line character</h3> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">getLine</span>
<span class="token constant">Hello</span> <span class="token hvariable">there</span><span class="token operator">!</span>  <span class="token comment">-- user enters some text and presses enter</span>
<span class="token string">&quot;Hello there!&quot;</span>

</code></pre></div><h3 id="read-read-a-string-a-convert-a-string-to-a-value"><a href="#read-read-a-string-a-convert-a-string-to-a-value" class="header-anchor">#</a> <code>read :: Read a =&gt; String -&gt; a</code> - convert a String to a value</h3> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">::</span> <span class="token constant">Int</span>
<span class="token number">1</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">::</span> <span class="token constant">Float</span>
<span class="token number">1.0</span>
<span class="token constant">Prelude</span><span class="token operator">&gt;</span> <span class="token builtin">read</span> <span class="token string">&quot;True&quot;</span> <span class="token operator">::</span> <span class="token constant">Bool</span>
<span class="token constant">True</span>

</code></pre></div><p>Other, less common functions are:</p> <ul><li><code>getContents :: IO String</code> - returns all user input as a single string, which is read lazily as it is needed</li> <li><code>interact :: (String -&gt; String) -&gt; IO ()</code> - takes a function of type String-&gt;String as its argument. The entire input from the standard input device is passed to this function as its argument</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/haskell/io.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/haskell/type-classes.html" class="prev">
        Type Classes
      </a></span> <span class="next"><a href="/haskell/record-syntax.html">
        Record Syntax
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1198.6c69cc51.js" defer></script>
  </body>
</html>
