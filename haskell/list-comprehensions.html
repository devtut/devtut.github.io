<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Haskell - List Comprehensions</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Basic List Comprehensions, Patterns in Generator Expressions, Guards, Parallel Comprehensions, Do Notation, Nested Generators, Local Bindings">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Haskell - List Comprehensions">
    <meta property="og:description" content="Basic List Comprehensions, Patterns in Generator Expressions, Guards, Parallel Comprehensions, Do Notation, Nested Generators, Local Bindings">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/haskell/list-comprehensions.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Haskell - List Comprehensions">
    <meta name="twitter:description" content="Basic List Comprehensions, Patterns in Generator Expressions, Guards, Parallel Comprehensions, Do Notation, Nested Generators, Local Bindings">
    <meta name="twitter:url" content="/haskell/list-comprehensions.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1200.be336ca7.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Haskell</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/haskell/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/haskell/getting-started-with-haskell-language.html" class="sidebar-link">Getting started with Haskell Language</a></li><li><a href="/haskell/overloaded-literals.html" class="sidebar-link">Overloaded Literals</a></li><li><a href="/haskell/foldable.html" class="sidebar-link">Foldable</a></li><li><a href="/haskell/traversable.html" class="sidebar-link">Traversable</a></li><li><a href="/haskell/lens.html" class="sidebar-link">Lens</a></li><li><a href="/haskell/quickcheck.html" class="sidebar-link">QuickCheck</a></li><li><a href="/haskell/common-ghc-language-extensions.html" class="sidebar-link">Common GHC Language Extensions</a></li><li><a href="/haskell/free-monads.html" class="sidebar-link">Free Monads</a></li><li><a href="/haskell/type-classes.html" class="sidebar-link">Type Classes</a></li><li><a href="/haskell/io.html" class="sidebar-link">IO</a></li><li><a href="/haskell/record-syntax.html" class="sidebar-link">Record Syntax</a></li><li><a href="/haskell/partial-application.html" class="sidebar-link">Partial Application</a></li><li><a href="/haskell/monoid.html" class="sidebar-link">Monoid</a></li><li><a href="/haskell/category-theory.html" class="sidebar-link">Category Theory</a></li><li><a href="/haskell/lists.html" class="sidebar-link">Lists</a></li><li><a href="/haskell/sorting-algorithms.html" class="sidebar-link">Sorting Algorithms</a></li><li><a href="/haskell/type-families.html" class="sidebar-link">Type Families</a></li><li><a href="/haskell/monads.html" class="sidebar-link">Monads</a></li><li><a href="/haskell/stack.html" class="sidebar-link">Stack</a></li><li><a href="/haskell/generalized-algebraic-data-types.html" class="sidebar-link">Generalized Algebraic Data Types</a></li><li><a href="/haskell/recursion-schemes.html" class="sidebar-link">Recursion Schemes</a></li><li><a href="/haskell/data-text.html" class="sidebar-link">Data.Text</a></li><li><a href="/haskell/using-ghci.html" class="sidebar-link">Using GHCi</a></li><li><a href="/haskell/strictness.html" class="sidebar-link">Strictness</a></li><li><a href="/haskell/syntax-in-functions.html" class="sidebar-link">Syntax in Functions</a></li><li><a href="/haskell/functor.html" class="sidebar-link">Functor</a></li><li><a href="/haskell/testing-with-tasty.html" class="sidebar-link">Testing with Tasty</a></li><li><a href="/haskell/creating-custom-data-types.html" class="sidebar-link">Creating Custom Data Types</a></li><li><a href="/haskell/reactive-banana.html" class="sidebar-link">Reactive-banana</a></li><li><a href="/haskell/optimization.html" class="sidebar-link">Optimization</a></li><li><a href="/haskell/concurrency.html" class="sidebar-link">Concurrency</a></li><li><a href="/haskell/function-composition.html" class="sidebar-link">Function composition</a></li><li><a href="/haskell/databases.html" class="sidebar-link">Databases</a></li><li><a href="/haskell/data-aeson-json-in-haskell.html" class="sidebar-link">Data.Aeson - JSON in Haskell</a></li><li><a href="/haskell/higher-order-functions.html" class="sidebar-link">Higher-order functions</a></li><li><a href="/haskell/containers-data-map.html" class="sidebar-link">Containers - Data.Map</a></li><li><a href="/haskell/fixity-declarations.html" class="sidebar-link">Fixity declarations</a></li><li><a href="/haskell/web-development.html" class="sidebar-link">Web Development</a></li><li><a href="/haskell/vectors.html" class="sidebar-link">Vectors</a></li><li><a href="/haskell/cabal.html" class="sidebar-link">Cabal</a></li><li><a href="/haskell/type-algebra.html" class="sidebar-link">Type algebra</a></li><li><a href="/haskell/arrows.html" class="sidebar-link">Arrows</a></li><li><a href="/haskell/typed-holes.html" class="sidebar-link">Typed holes</a></li><li><a href="/haskell/rewrite-rules-ghc.html" class="sidebar-link">Rewrite rules (GHC)</a></li><li><a href="/haskell/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/haskell/list-comprehensions.html" aria-current="page" class="active sidebar-link">List Comprehensions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/haskell/list-comprehensions.html#basic-list-comprehensions" class="sidebar-link">Basic List Comprehensions</a></li><li class="sidebar-sub-header"><a href="/haskell/list-comprehensions.html#patterns-in-generator-expressions" class="sidebar-link">Patterns in Generator Expressions</a></li><li class="sidebar-sub-header"><a href="/haskell/list-comprehensions.html#guards" class="sidebar-link">Guards</a></li><li class="sidebar-sub-header"><a href="/haskell/list-comprehensions.html#parallel-comprehensions" class="sidebar-link">Parallel Comprehensions</a></li><li class="sidebar-sub-header"><a href="/haskell/list-comprehensions.html#do-notation" class="sidebar-link">Do Notation</a></li><li class="sidebar-sub-header"><a href="/haskell/list-comprehensions.html#nested-generators" class="sidebar-link">Nested Generators</a></li><li class="sidebar-sub-header"><a href="/haskell/list-comprehensions.html#local-bindings" class="sidebar-link">Local Bindings</a></li></ul></li><li><a href="/haskell/streaming-io.html" class="sidebar-link">Streaming IO</a></li><li><a href="/haskell/google-protocol-buffers.html" class="sidebar-link">Google Protocol Buffers</a></li><li><a href="/haskell/template-haskell-quasiquotes.html" class="sidebar-link">Template Haskell &amp; QuasiQuotes</a></li><li><a href="/haskell/phantom-types.html" class="sidebar-link">Phantom types</a></li><li><a href="/haskell/modules.html" class="sidebar-link">Modules</a></li><li><a href="/haskell/tuples-pairs-triples.html" class="sidebar-link">Tuples (Pairs, Triples, ...)</a></li><li><a href="/haskell/graphics-with-gloss.html" class="sidebar-link">Graphics with Gloss</a></li><li><a href="/haskell/state-monad.html" class="sidebar-link">State Monad</a></li><li><a href="/haskell/pipes.html" class="sidebar-link">Pipes</a></li><li><a href="/haskell/infix-operators.html" class="sidebar-link">Infix operators</a></li><li><a href="/haskell/parallelism.html" class="sidebar-link">Parallelism</a></li><li><a href="/haskell/parsing-html-with-taggy-lens-and-lens.html" class="sidebar-link">Parsing HTML with taggy-lens and lens</a></li><li><a href="/haskell/foreign-function-interface.html" class="sidebar-link">Foreign Function Interface</a></li><li><a href="/haskell/gtk3.html" class="sidebar-link">Gtk3</a></li><li><a href="/haskell/monad-transformers.html" class="sidebar-link">Monad Transformers</a></li><li><a href="/haskell/bifunctor.html" class="sidebar-link">Bifunctor</a></li><li><a href="/haskell/proxies.html" class="sidebar-link">Proxies</a></li><li><a href="/haskell/applicative-functor.html" class="sidebar-link">Applicative Functor</a></li><li><a href="/haskell/common-monads-as-free-monads.html" class="sidebar-link">Common monads as free monads</a></li><li><a href="/haskell/common-functors-as-the-base-of-cofree-comonads.html" class="sidebar-link">Common functors as the base of cofree comonads</a></li><li><a href="/haskell/arithmetic.html" class="sidebar-link">Arithmetic</a></li><li><a href="/haskell/role.html" class="sidebar-link">Role</a></li><li><a href="/haskell/arbitrary-rank-polymorphism-with-rankntypes.html" class="sidebar-link">Arbitrary-rank polymorphism with RankNTypes</a></li><li><a href="/haskell/ghcjs.html" class="sidebar-link">GHCJS</a></li><li><a href="/haskell/xml.html" class="sidebar-link">XML</a></li><li><a href="/haskell/reader-readert.html" class="sidebar-link">Reader / ReaderT</a></li><li><a href="/haskell/function-call-syntax.html" class="sidebar-link">Function call syntax</a></li><li><a href="/haskell/logging.html" class="sidebar-link">Logging</a></li><li><a href="/haskell/attoparsec.html" class="sidebar-link">Attoparsec</a></li><li><a href="/haskell/zipwithm.html" class="sidebar-link">zipWithM</a></li><li><a href="/haskell/profunctor.html" class="sidebar-link">Profunctor</a></li><li><a href="/haskell/type-application.html" class="sidebar-link">Type Application</a></li><li><a href="/haskell/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="list-comprehensions"><a href="#list-comprehensions" class="header-anchor">#</a> List Comprehensions</h1> <h2 id="basic-list-comprehensions"><a href="#basic-list-comprehensions" class="header-anchor">#</a> Basic List Comprehensions</h2> <p>Haskell has <a href="https://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-420003.11" target="_blank" rel="noopener noreferrer">list comprehensions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which are a lot like set comprehensions in math and similar implementations in  imperative languages such as Python and JavaScript. At their most basic, list comprehensions take the following form.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">someList</span> <span class="token punctuation">]</span>

</code></pre></div><p>For example</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">]</span>    <span class="token comment">-- [1,2,3,4]</span>

</code></pre></div><p>Functions can be directly applied to x as well:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">someList</span> <span class="token punctuation">]</span>

</code></pre></div><p>This is equivalent to:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token builtin">map</span> <span class="token hvariable">f</span> <span class="token hvariable">someList</span>

</code></pre></div><p>Example:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token hvariable">x</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    <span class="token comment">-- [2,3,4,5]</span>

</code></pre></div><h2 id="patterns-in-generator-expressions"><a href="#patterns-in-generator-expressions" class="header-anchor">#</a> Patterns in Generator Expressions</h2> <p>However, <code>x</code> in the generator expression is not just variable, but can be any pattern. In cases of pattern mismatch the generated element is skipped over, and processing of the list continues with the next element, thus acting like a filter:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token constant">Just</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token constant">Just</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">Nothing</span><span class="token punctuation">,</span> <span class="token constant">Just</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>     <span class="token comment">-- [1, 3]</span>

</code></pre></div><p>A generator with a variable <code>x</code> in its pattern creates new scope containing all the expressions on its right, where <code>x</code> is defined to be the generated element.</p> <p>This means that guards can be coded as</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">even</span> <span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token operator">==</span>
<span class="token punctuation">[</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token builtin">even</span> <span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span>
<span class="token punctuation">[</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token keyword">if</span> <span class="token builtin">even</span> <span class="token hvariable">x</span> <span class="token keyword">then</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="guards"><a href="#guards" class="header-anchor">#</a> Guards</h2> <p>Another feature of list comprehensions is guards, which also act as filters. Guards are Boolean expressions and appear on the right side of the bar in a list comprehension.</p> <p>Their most basic use is</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token hvariable">x</span>    <span class="token operator">|</span> <span class="token hvariable">p</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>   <span class="token operator">===</span>   <span class="token keyword">if</span> <span class="token hvariable">p</span> <span class="token hvariable">x</span> <span class="token keyword">then</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

</code></pre></div><p>Any variable used in a guard must appear on its left in the comprehension, or otherwise be in scope. So,</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">list</span><span class="token punctuation">,</span> <span class="token hvariable">pred1</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">,</span> <span class="token hvariable">pred2</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>     <span class="token comment">-- `y` must be defined in outer scope</span>

</code></pre></div><p>which is equivalent to</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token builtin">map</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token builtin">filter</span> <span class="token hvariable">pred2</span> <span class="token punctuation">(</span><span class="token builtin">filter</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">pred1</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token hvariable">list</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token comment">-- or,</span>

<span class="token comment">-- ($ list) (filter (`pred1` y) &gt;&gt;&gt; filter pred2 &gt;&gt;&gt; map f)     </span>

<span class="token comment">-- list &gt;&gt;= (\x-&gt; [x | pred1 x y]) &gt;&gt;= (\x-&gt; [x | pred2 x]) &gt;&gt;= (\x -&gt; [f x])</span>

</code></pre></div><p>(the <code>&gt;&gt;=</code> operator is <code>infixl 1</code>, i.e. it associates (is parenthesized) to the left). Examples:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token hvariable">x</span>       <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">even</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>           <span class="token comment">-- [2,4]</span>

<span class="token punctuation">[</span> <span class="token hvariable">x</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">even</span> <span class="token hvariable">x</span> <span class="token punctuation">]</span>        <span class="token comment">-- map (\x -&gt; x^2 + 1) (filter even [1..100])</span>

</code></pre></div><h2 id="parallel-comprehensions"><a href="#parallel-comprehensions" class="header-anchor">#</a> Parallel Comprehensions</h2> <p>With <a href="https://downloads.haskell.org/%7Eghc/latest/docs/html/users_guide/glasgow_exts.html#parallel-list-comprehensions" target="_blank" rel="noopener noreferrer">Parallel List Comprehensions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> language extension,</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span> <span class="token operator">|</span> <span class="token hvariable">y</span> <span class="token operator">&lt;-</span> <span class="token hvariable">ys</span><span class="token punctuation">]</span>

</code></pre></div><p>is equivalent to</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token builtin">zip</span> <span class="token hvariable">xs</span> <span class="token hvariable">ys</span>

</code></pre></div><p>Example:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token hvariable">y</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">]</span> 

<span class="token comment">-- [(1,10),(2,20)]</span>

</code></pre></div><h2 id="do-notation"><a href="#do-notation" class="header-anchor">#</a> Do Notation</h2> <p>Any list comprehension can be correspondingly coded with <a href="http://stackoverflow.com/documentation/haskell/2968/monads/14170/list-monad#t=201608030840447565994" target="_blank" rel="noopener noreferrer">list monad's<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="http://stackoverflow.com/documentation/haskell/2968/monads/15585/do-notation#t=201608030840447565994" target="_blank" rel="noopener noreferrer"><code>do</code> notation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">]</span>                 <span class="token hvariable">f</span>  <span class="token operator">&lt;$&gt;</span> <span class="token hvariable">xs</span>         <span class="token keyword">do</span> <span class="token punctuation">{</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span> <span class="token punctuation">;</span> <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">f</span> <span class="token operator">&lt;-</span> <span class="token hvariable">fs</span><span class="token punctuation">,</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">]</span>        <span class="token hvariable">fs</span> <span class="token operator">&lt;*&gt;</span> <span class="token hvariable">xs</span>         <span class="token keyword">do</span> <span class="token punctuation">{</span> <span class="token hvariable">f</span> <span class="token operator">&lt;-</span> <span class="token hvariable">fs</span> <span class="token punctuation">;</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span> <span class="token punctuation">;</span> <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token hvariable">y</span>   <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">,</span> <span class="token hvariable">y</span> <span class="token operator">&lt;-</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>       <span class="token hvariable">f</span>  <span class="token operator">=&lt;&lt;</span> <span class="token hvariable">xs</span>         <span class="token keyword">do</span> <span class="token punctuation">{</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span> <span class="token punctuation">;</span> <span class="token hvariable">y</span> <span class="token operator">&lt;-</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token punctuation">;</span> <span class="token builtin">return</span> <span class="token hvariable">y</span> <span class="token punctuation">}</span>

</code></pre></div><p>The <a href="https://stackoverflow.com/documentation/haskell/4970/list-comprehensions/17541/guards" target="_blank" rel="noopener noreferrer">guards<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can be handled using <a href="https://hackage.haskell.org/package/base/docs/Control-Monad.html#v:guard" target="_blank" rel="noopener noreferrer"><code>Control.Monad.guard</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token hvariable">x</span>   <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span><span class="token punctuation">,</span> <span class="token builtin">even</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>                           <span class="token keyword">do</span> <span class="token punctuation">{</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token hvariable">xs</span> <span class="token punctuation">;</span> <span class="token hvariable">guard</span> <span class="token punctuation">(</span><span class="token builtin">even</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token builtin">return</span> <span class="token hvariable">x</span> <span class="token punctuation">}</span>

</code></pre></div><h2 id="nested-generators"><a href="#nested-generators" class="header-anchor">#</a> Nested Generators</h2> <p>List comprehensions can also draw elements from multiple lists, in which case the result will be the list of every possible combination of the two elements, as if the two lists were processed in the <strong>nested</strong> fashion. For example,</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token hvariable">a</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token hvariable">b</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token char string">'a'</span><span class="token punctuation">,</span><span class="token char string">'b'</span><span class="token punctuation">]</span> <span class="token punctuation">]</span>

<span class="token comment">-- [(1,'a'), (1,'b'), (2,'a'), (2,'b'), (3,'a'), (3,'b')]</span>

</code></pre></div><h2 id="local-bindings"><a href="#local-bindings" class="header-anchor">#</a> Local Bindings</h2> <p>List comprehensions can introduce local bindings for variables to hold some interim values:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">let</span> <span class="token hvariable">y</span><span class="token operator">=</span><span class="token hvariable">x</span><span class="token operator">*</span><span class="token hvariable">x</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">even</span> <span class="token hvariable">y</span><span class="token punctuation">]</span>    <span class="token comment">-- [(1,2),(3,10)]</span>

</code></pre></div><p>Same effect can be achieved with a trick,</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token hvariable">y</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token operator">*</span><span class="token hvariable">x</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">even</span> <span class="token hvariable">y</span><span class="token punctuation">]</span>   <span class="token comment">-- [(1,2),(3,10)]</span>

</code></pre></div><p>The <code>let</code> in list comprehensions is recursive, as usual. But generator bindings are not, which enables <strong>shadowing</strong>:</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token punctuation">[</span><span class="token hvariable">x</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token operator">*</span><span class="token hvariable">x</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">even</span> <span class="token hvariable">x</span><span class="token punctuation">]</span>       <span class="token comment">-- [2,10]</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/haskell/list-comprehensions.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/haskell/date-and-time.html" class="prev">
        Date and Time
      </a></span> <span class="next"><a href="/haskell/streaming-io.html">
        Streaming IO
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1200.be336ca7.js" defer></script>
  </body>
</html>
