<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Haskell - QuickCheck</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="description" content="Randomly generating data for custom types, Using implication (==>) to check properties with preconditions, Declaring a property, Checking a single property, Checking all the properties in a file, Limiting the size of test data">
    <meta property="og:site_name" content="DevTut">
    <meta property="og:title" content="Haskell - QuickCheck">
    <meta property="og:description" content="Randomly generating data for custom types, Using implication (==>) to check properties with preconditions, Declaring a property, Checking a single property, Checking all the properties in a file, Limiting the size of test data">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/haskell/quickcheck.html">
    <meta property="og:image" content="/logo.png">
    <meta name="twitter:title" content="Haskell - QuickCheck">
    <meta name="twitter:description" content="Randomly generating data for custom types, Using implication (==>) to check properties with preconditions, Declaring a property, Checking a single property, Checking all the properties in a file, Limiting the size of test data">
    <meta name="twitter:url" content="/haskell/quickcheck.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logo.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="google-site-verification" content="76_rKXgwMVIjd-axJC_1zPV9OS4mEjvtgjYOWVkAdnQ">
    
    <link rel="preload" href="/assets/css/0.styles.60619e34.css" as="style"><link rel="preload" href="/assets/js/app.1779e102.js" as="script"><link rel="preload" href="/assets/js/3.2cfa8016.js" as="script"><link rel="preload" href="/assets/js/1216.6a9dcb8a.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.60619e34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DevTut</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/devtut/generate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Haskell</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/haskell/" aria-current="page" class="sidebar-link">Disclaimer</a></li><li><a href="/haskell/getting-started-with-haskell-language.html" class="sidebar-link">Getting started with Haskell Language</a></li><li><a href="/haskell/overloaded-literals.html" class="sidebar-link">Overloaded Literals</a></li><li><a href="/haskell/foldable.html" class="sidebar-link">Foldable</a></li><li><a href="/haskell/traversable.html" class="sidebar-link">Traversable</a></li><li><a href="/haskell/lens.html" class="sidebar-link">Lens</a></li><li><a href="/haskell/quickcheck.html" aria-current="page" class="active sidebar-link">QuickCheck</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/haskell/quickcheck.html#randomly-generating-data-for-custom-types" class="sidebar-link">Randomly generating data for custom types</a></li><li class="sidebar-sub-header"><a href="/haskell/quickcheck.html#using-implication-to-check-properties-with-preconditions" class="sidebar-link">Using implication (==&gt;) to check properties with preconditions</a></li><li class="sidebar-sub-header"><a href="/haskell/quickcheck.html#declaring-a-property" class="sidebar-link">Declaring a property</a></li><li class="sidebar-sub-header"><a href="/haskell/quickcheck.html#checking-a-single-property" class="sidebar-link">Checking a single property</a></li><li class="sidebar-sub-header"><a href="/haskell/quickcheck.html#checking-all-the-properties-in-a-file" class="sidebar-link">Checking all the properties in a file</a></li><li class="sidebar-sub-header"><a href="/haskell/quickcheck.html#limiting-the-size-of-test-data" class="sidebar-link">Limiting the size of test data</a></li></ul></li><li><a href="/haskell/common-ghc-language-extensions.html" class="sidebar-link">Common GHC Language Extensions</a></li><li><a href="/haskell/free-monads.html" class="sidebar-link">Free Monads</a></li><li><a href="/haskell/type-classes.html" class="sidebar-link">Type Classes</a></li><li><a href="/haskell/io.html" class="sidebar-link">IO</a></li><li><a href="/haskell/record-syntax.html" class="sidebar-link">Record Syntax</a></li><li><a href="/haskell/partial-application.html" class="sidebar-link">Partial Application</a></li><li><a href="/haskell/monoid.html" class="sidebar-link">Monoid</a></li><li><a href="/haskell/category-theory.html" class="sidebar-link">Category Theory</a></li><li><a href="/haskell/lists.html" class="sidebar-link">Lists</a></li><li><a href="/haskell/sorting-algorithms.html" class="sidebar-link">Sorting Algorithms</a></li><li><a href="/haskell/type-families.html" class="sidebar-link">Type Families</a></li><li><a href="/haskell/monads.html" class="sidebar-link">Monads</a></li><li><a href="/haskell/stack.html" class="sidebar-link">Stack</a></li><li><a href="/haskell/generalized-algebraic-data-types.html" class="sidebar-link">Generalized Algebraic Data Types</a></li><li><a href="/haskell/recursion-schemes.html" class="sidebar-link">Recursion Schemes</a></li><li><a href="/haskell/data-text.html" class="sidebar-link">Data.Text</a></li><li><a href="/haskell/using-ghci.html" class="sidebar-link">Using GHCi</a></li><li><a href="/haskell/strictness.html" class="sidebar-link">Strictness</a></li><li><a href="/haskell/syntax-in-functions.html" class="sidebar-link">Syntax in Functions</a></li><li><a href="/haskell/functor.html" class="sidebar-link">Functor</a></li><li><a href="/haskell/testing-with-tasty.html" class="sidebar-link">Testing with Tasty</a></li><li><a href="/haskell/creating-custom-data-types.html" class="sidebar-link">Creating Custom Data Types</a></li><li><a href="/haskell/reactive-banana.html" class="sidebar-link">Reactive-banana</a></li><li><a href="/haskell/optimization.html" class="sidebar-link">Optimization</a></li><li><a href="/haskell/concurrency.html" class="sidebar-link">Concurrency</a></li><li><a href="/haskell/function-composition.html" class="sidebar-link">Function composition</a></li><li><a href="/haskell/databases.html" class="sidebar-link">Databases</a></li><li><a href="/haskell/data-aeson-json-in-haskell.html" class="sidebar-link">Data.Aeson - JSON in Haskell</a></li><li><a href="/haskell/higher-order-functions.html" class="sidebar-link">Higher-order functions</a></li><li><a href="/haskell/containers-data-map.html" class="sidebar-link">Containers - Data.Map</a></li><li><a href="/haskell/fixity-declarations.html" class="sidebar-link">Fixity declarations</a></li><li><a href="/haskell/web-development.html" class="sidebar-link">Web Development</a></li><li><a href="/haskell/vectors.html" class="sidebar-link">Vectors</a></li><li><a href="/haskell/cabal.html" class="sidebar-link">Cabal</a></li><li><a href="/haskell/type-algebra.html" class="sidebar-link">Type algebra</a></li><li><a href="/haskell/arrows.html" class="sidebar-link">Arrows</a></li><li><a href="/haskell/typed-holes.html" class="sidebar-link">Typed holes</a></li><li><a href="/haskell/rewrite-rules-ghc.html" class="sidebar-link">Rewrite rules (GHC)</a></li><li><a href="/haskell/date-and-time.html" class="sidebar-link">Date and Time</a></li><li><a href="/haskell/list-comprehensions.html" class="sidebar-link">List Comprehensions</a></li><li><a href="/haskell/streaming-io.html" class="sidebar-link">Streaming IO</a></li><li><a href="/haskell/google-protocol-buffers.html" class="sidebar-link">Google Protocol Buffers</a></li><li><a href="/haskell/template-haskell-quasiquotes.html" class="sidebar-link">Template Haskell &amp; QuasiQuotes</a></li><li><a href="/haskell/phantom-types.html" class="sidebar-link">Phantom types</a></li><li><a href="/haskell/modules.html" class="sidebar-link">Modules</a></li><li><a href="/haskell/tuples-pairs-triples.html" class="sidebar-link">Tuples (Pairs, Triples, ...)</a></li><li><a href="/haskell/graphics-with-gloss.html" class="sidebar-link">Graphics with Gloss</a></li><li><a href="/haskell/state-monad.html" class="sidebar-link">State Monad</a></li><li><a href="/haskell/pipes.html" class="sidebar-link">Pipes</a></li><li><a href="/haskell/infix-operators.html" class="sidebar-link">Infix operators</a></li><li><a href="/haskell/parallelism.html" class="sidebar-link">Parallelism</a></li><li><a href="/haskell/parsing-html-with-taggy-lens-and-lens.html" class="sidebar-link">Parsing HTML with taggy-lens and lens</a></li><li><a href="/haskell/foreign-function-interface.html" class="sidebar-link">Foreign Function Interface</a></li><li><a href="/haskell/gtk3.html" class="sidebar-link">Gtk3</a></li><li><a href="/haskell/monad-transformers.html" class="sidebar-link">Monad Transformers</a></li><li><a href="/haskell/bifunctor.html" class="sidebar-link">Bifunctor</a></li><li><a href="/haskell/proxies.html" class="sidebar-link">Proxies</a></li><li><a href="/haskell/applicative-functor.html" class="sidebar-link">Applicative Functor</a></li><li><a href="/haskell/common-monads-as-free-monads.html" class="sidebar-link">Common monads as free monads</a></li><li><a href="/haskell/common-functors-as-the-base-of-cofree-comonads.html" class="sidebar-link">Common functors as the base of cofree comonads</a></li><li><a href="/haskell/arithmetic.html" class="sidebar-link">Arithmetic</a></li><li><a href="/haskell/role.html" class="sidebar-link">Role</a></li><li><a href="/haskell/arbitrary-rank-polymorphism-with-rankntypes.html" class="sidebar-link">Arbitrary-rank polymorphism with RankNTypes</a></li><li><a href="/haskell/ghcjs.html" class="sidebar-link">GHCJS</a></li><li><a href="/haskell/xml.html" class="sidebar-link">XML</a></li><li><a href="/haskell/reader-readert.html" class="sidebar-link">Reader / ReaderT</a></li><li><a href="/haskell/function-call-syntax.html" class="sidebar-link">Function call syntax</a></li><li><a href="/haskell/logging.html" class="sidebar-link">Logging</a></li><li><a href="/haskell/attoparsec.html" class="sidebar-link">Attoparsec</a></li><li><a href="/haskell/zipwithm.html" class="sidebar-link">zipWithM</a></li><li><a href="/haskell/profunctor.html" class="sidebar-link">Profunctor</a></li><li><a href="/haskell/type-application.html" class="sidebar-link">Type Application</a></li><li><a href="/haskell/contributors.html" class="sidebar-link">The Contributors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="quickcheck"><a href="#quickcheck" class="header-anchor">#</a> QuickCheck</h1> <h2 id="randomly-generating-data-for-custom-types"><a href="#randomly-generating-data-for-custom-types" class="header-anchor">#</a> Randomly generating data for custom types</h2> <p>The <code>Arbitrary</code> class is for types that can be randomly generated by QuickCheck.</p> <p>The minimal implementation of <code>Arbitrary</code> is the <code>arbitrary</code> method, which runs in the <code>Gen</code> monad to produce a random value.</p> <p>Here is an instance of <code>Arbitrary</code> for the following datatype of non-empty lists.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token import-statement"><span class="token keyword">import</span> Test<span class="token punctuation">.</span>QuickCheck<span class="token punctuation">.</span>Arbitrary</span> <span class="token punctuation">(</span><span class="token constant">Arbitrary</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token import-statement"><span class="token keyword">import</span> Test<span class="token punctuation">.</span>QuickCheck<span class="token punctuation">.</span>Gen</span> <span class="token punctuation">(</span><span class="token hvariable">oneof</span><span class="token punctuation">)</span>
<span class="token import-statement"><span class="token keyword">import</span> Control<span class="token punctuation">.</span>Applicative</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&lt;$&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">&lt;*&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">data</span> <span class="token constant">NonEmpty</span> <span class="token hvariable">a</span> <span class="token operator">=</span> <span class="token constant">End</span> <span class="token hvariable">a</span> <span class="token operator">|</span> <span class="token constant">Cons</span> <span class="token hvariable">a</span> <span class="token punctuation">(</span><span class="token constant">NonEmpty</span> <span class="token hvariable">a</span><span class="token punctuation">)</span>

<span class="token keyword">instance</span> <span class="token constant">Arbitrary</span> <span class="token hvariable">a</span> <span class="token operator">=&gt;</span> <span class="token constant">Arbitrary</span> <span class="token punctuation">(</span><span class="token constant">NonEmpty</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
    <span class="token hvariable">arbitrary</span> <span class="token operator">=</span> <span class="token hvariable">oneof</span> <span class="token punctuation">[</span>  <span class="token comment">-- randomly select one of the cases from the list</span>
        <span class="token constant">End</span> <span class="token operator">&lt;$&gt;</span> <span class="token hvariable">arbitrary</span><span class="token punctuation">,</span>  <span class="token comment">-- call a's instance of Arbitrary</span>
        <span class="token constant">Cons</span> <span class="token operator">&lt;$&gt;</span>
            <span class="token hvariable">arbitrary</span> <span class="token operator">&lt;*&gt;</span>  <span class="token comment">-- call a's instance of Arbitrary</span>
            <span class="token hvariable">arbitrary</span>  <span class="token comment">-- recursively call NonEmpty's instance of Arbitrary</span>
        <span class="token punctuation">]</span>

</code></pre></div><h2 id="using-implication-to-check-properties-with-preconditions"><a href="#using-implication-to-check-properties-with-preconditions" class="header-anchor">#</a> Using implication (==&gt;) to check properties with preconditions</h2> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">prop_evenNumberPlusOneIsOdd</span> <span class="token operator">::</span> <span class="token constant">Integer</span> <span class="token operator">-&gt;</span> <span class="token constant">Property</span>
<span class="token hvariable">prop_evenNumberPlusOneIsOdd</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token builtin">even</span> <span class="token hvariable">x</span> <span class="token operator">==&gt;</span> <span class="token builtin">odd</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

</code></pre></div><p>If you want to check that a property holds given that a precondition holds, you can use the <code>==&gt;</code> operator. Note that if it's very unlikely for arbitrary inputs to match the precondition, QuickCheck can give up early.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">prop_overlySpecific</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">==&gt;</span> <span class="token hvariable">x</span> <span class="token operator">*</span> <span class="token hvariable">y</span> <span class="token operator">==</span> <span class="token number">0</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">quickCheck</span> <span class="token hvariable">prop_overlySpecific</span>
<span class="token operator">***</span> <span class="token constant">Gave</span> <span class="token hvariable">up</span><span class="token operator">!</span> <span class="token constant">Passed</span> <span class="token hvariable">only</span> <span class="token number">31</span> <span class="token hvariable">tests</span><span class="token punctuation">.</span>

</code></pre></div><h2 id="declaring-a-property"><a href="#declaring-a-property" class="header-anchor">#</a> Declaring a property</h2> <p>At its simplest, a <strong>property</strong> is a function which returns a <code>Bool</code>.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">prop_reverseDoesNotChangeLength</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token builtin">reverse</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">length</span> <span class="token hvariable">xs</span>

</code></pre></div><p>A property declares a high-level invariant of a program. The QuickCheck test runner will evaluate the function with 100 random inputs and check that the result is always <code>True</code>.</p> <p>By convention, functions that are properties have names which start with <code>prop_</code>.</p> <h2 id="checking-a-single-property"><a href="#checking-a-single-property" class="header-anchor">#</a> Checking a single property</h2> <p>The <code>quickCheck</code> function tests a property on 100 random inputs.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">quickCheck</span> <span class="token hvariable">prop_reverseDoesNotChangeLength</span>
<span class="token operator">+++</span> <span class="token constant">OK</span><span class="token punctuation">,</span> <span class="token hvariable">passed</span> <span class="token number">100</span> <span class="token hvariable">tests</span><span class="token punctuation">.</span>

</code></pre></div><p>If a property fails for some input, <code>quickCheck</code> prints out a counterexample.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token hvariable">prop_reverseIsAlwaysEmpty</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">reverse</span> <span class="token hvariable">xs</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment">-- plainly not true for all xs</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">quickCheck</span> <span class="token hvariable">prop_reverseIsAlwaysEmpty</span>
<span class="token operator">***</span> <span class="token constant">Failed</span><span class="token operator">!</span> <span class="token constant">Falsifiable</span> <span class="token punctuation">(</span><span class="token hvariable">after</span> <span class="token number">2</span> <span class="token hvariable">tests</span><span class="token punctuation">)</span><span class="token operator">:</span>                  
<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="checking-all-the-properties-in-a-file"><a href="#checking-all-the-properties-in-a-file" class="header-anchor">#</a> Checking all the properties in a file</h2> <p><code>quickCheckAll</code> is a Template Haskell helper which finds all the definitions in the current file whose name begins with <code>prop_</code> and tests them.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token comment">{-# LANGUAGE TemplateHaskell #-}</span>

<span class="token import-statement"><span class="token keyword">import</span> Test<span class="token punctuation">.</span>QuickCheck</span> <span class="token punctuation">(</span><span class="token hvariable">quickCheckAll</span><span class="token punctuation">)</span>
<span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>List</span> <span class="token punctuation">(</span><span class="token builtin">sort</span><span class="token punctuation">)</span>

<span class="token hvariable">idempotent</span> <span class="token operator">::</span> <span class="token constant">Eq</span> <span class="token hvariable">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
<span class="token hvariable">idempotent</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">f</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span>

<span class="token hvariable">prop_sortIdempotent</span> <span class="token operator">=</span> <span class="token hvariable">idempotent</span> <span class="token builtin">sort</span>

<span class="token comment">-- does not begin with prop_, will not be picked up by the test runner</span>
<span class="token hvariable">sortDoesNotChangeLength</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token builtin">sort</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">length</span> <span class="token hvariable">xs</span>


<span class="token builtin">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token operator">$</span><span class="token hvariable">quickCheckAll</span>

</code></pre></div><p>Note that the <code>return []</code> line is required. It makes definitions textually above that line visible to Template Haskell.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token operator">$</span> <span class="token hvariable">runhaskell</span> <span class="token hvariable">QuickCheckAllExample<span class="token punctuation">.</span>hs</span>
<span class="token operator">===</span> <span class="token hvariable">prop_sortIdempotent</span> <span class="token hvariable">from</span> <span class="token hvariable">tree</span><span class="token punctuation">.</span><span class="token hvariable">hs</span><span class="token operator">:</span><span class="token number">7</span> <span class="token operator">===</span>
<span class="token operator">+++</span> <span class="token constant">OK</span><span class="token punctuation">,</span> <span class="token hvariable">passed</span> <span class="token number">100</span> <span class="token hvariable">tests</span><span class="token punctuation">.</span>

</code></pre></div><h2 id="limiting-the-size-of-test-data"><a href="#limiting-the-size-of-test-data" class="header-anchor">#</a> Limiting the size of test data</h2> <p>It can be difficult to test functions with poor asymptotic complexity using quickcheck as the random inputs are not usually size bounded. By adding an upper bound on the size of the input we can still test these expensive functions.</p> <div class="language-hs extra-class"><pre class="language-hs"><code><span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>List</span><span class="token punctuation">(</span><span class="token hvariable">permutations</span><span class="token punctuation">)</span>
<span class="token import-statement"><span class="token keyword">import</span> Test<span class="token punctuation">.</span>QuickCheck</span>

<span class="token hvariable">longRunningFunction</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">longRunningFunction</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token hvariable">permutations</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span>

<span class="token hvariable">factorial</span> <span class="token operator">::</span> <span class="token constant">Integral</span> <span class="token hvariable">a</span> <span class="token operator">=&gt;</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>
<span class="token hvariable">factorial</span> <span class="token hvariable">n</span> <span class="token operator">=</span> <span class="token builtin">product</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token hvariable">n</span><span class="token punctuation">]</span>

<span class="token hvariable">prop_numberOfPermutations</span> <span class="token hvariable">xs</span> <span class="token operator">=</span>
    <span class="token hvariable">longRunningFunction</span> <span class="token hvariable">xs</span> <span class="token operator">==</span> <span class="token hvariable">factorial</span> <span class="token punctuation">(</span><span class="token builtin">length</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">quickCheckWith</span> <span class="token punctuation">(</span><span class="token hvariable">stdArgs</span> <span class="token punctuation">{</span> <span class="token hvariable">maxSize</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token hvariable">prop_numberOfPermutations</span>

</code></pre></div><p>By using <code>quickCheckWith</code> with a modified version of <code>stdArgs</code> we can limit the size of the inputs to be at most 10. In this case, as we are generating lists, this means we generate lists of up to size 10. Our permutations function doesn't take too long to run for these short lists but we can still be reasonably confident that our definition is correct.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/devtut/generate/edit/master/docs/haskell/quickcheck.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/haskell/lens.html" class="prev">
        Lens
      </a></span> <span class="next"><a href="/haskell/common-ghc-language-extensions.html">
        Common GHC Language Extensions
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1779e102.js" defer></script><script src="/assets/js/3.2cfa8016.js" defer></script><script src="/assets/js/1216.6a9dcb8a.js" defer></script>
  </body>
</html>
